(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{552:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_531-é™æµ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_531-é™æµ"}},[s._v("#")]),s._v(" 531.é™æµ")]),s._v(" "),t("h4",{attrs:{id:"æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[s._v("#")]),s._v(" æ¦‚è¿°")]),s._v(" "),t("p",[s._v("é™æµå¯ä»¥è®¤ä¸ºæ˜¯"),t("strong",[s._v("æœåŠ¡é™çº§")]),s._v("çš„ä¸€ç§æ–¹å¼, å³"),t("strong",[s._v("é™åˆ¶ç³»ç»Ÿçš„è¾“å…¥å’Œè¾“å‡ºæµé‡ä»¥è¾¾åˆ°ä¿æŠ¤ç³»ç»Ÿçš„ç›®çš„")]),s._v(". ä¸€èˆ¬æ¥è¯´ç³»ç»Ÿçš„æµé‡æ˜¯å¯ä»¥è¢«æµ‹ç®—çš„, ä¸ºä¿è¯ç³»ç»Ÿç¨³å®šè¿è¡Œ, ä¸€æ—¦æµé‡è¾¾åˆ°é™åˆ¶çš„é˜ˆå€¼, å°±éœ€è¦é‡‡å–ä¸€äº›æªæ–½ä»¥å®Œæˆé™åˆ¶æµé‡çš„ç›®çš„. æ¯”å¦‚: "),t("strong",[s._v("å»¶è¿Ÿå¤„ç†, æ‹’ç»å¤„ç†, æˆ–è€…éƒ¨åˆ†æ‹’ç»å¤„ç†")]),s._v("ç­‰.")]),s._v(" "),t("p",[s._v("é™æµå¯ä»¥åº”å¯¹:")]),s._v(" "),t("ul",[t("li",[s._v("çƒ­ç‚¹ä¸šåŠ¡å¸¦æ¥çš„çªå‘è¯·æ±‚.")]),s._v(" "),t("li",[s._v("è°ƒç”¨æ–¹ bug å¯¼è‡´çš„çªå‘è¯·æ±‚.")]),s._v(" "),t("li",[s._v("æ¶æ„æ”»å‡»è¯·æ±‚.")])]),s._v(" "),t("p",[s._v("é™æµä¹Ÿå¯ä»¥é…åˆå®¢æˆ·ç«¯ä¸€èµ·å®ç°, æ¯”å¦‚å®¢æˆ·ç«¯æ”¶åˆ°é™æµå“åº”åé‡‡å–é™é»˜å¤„ç†, åœ¨ä¸€æ®µæ—¶é—´å†…ä¸è¿›è¡Œæ¥å£è°ƒç”¨, é˜²æ­¢ç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»é‡è¯•è€Œé€ æˆæµé‡æ›´å¤§.")]),s._v(" "),t("h4",{attrs:{id:"é™æµç®—æ³•ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™æµç®—æ³•ğŸŒŸ"}},[s._v("#")]),s._v(" é™æµç®—æ³•ğŸŒŸ")]),s._v(" "),t("h5",{attrs:{id:"_1-æ¼æ¡¶ç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¼æ¡¶ç®—æ³•"}},[s._v("#")]),s._v(" 1.æ¼æ¡¶ç®—æ³•")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v("æ¼æ¡¶ç®—æ³•æ¦‚å¿µå¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[s._v("å°†æ¯ä¸ª"),t("strong",[s._v("è¯·æ±‚")]),s._v('è§†ä½œ "'),t("strong",[s._v("æ°´æ»´")]),s._v('" æ”¾å…¥ "æ¼æ¡¶" è¿›è¡Œå­˜å‚¨.')]),s._v(" "),t("li",[s._v('"æ¼æ¡¶" ä»¥'),t("strong",[s._v('å›ºå®šé€Ÿç‡å‘å¤– "æ¼" å‡ºè¯·æ±‚æ¥æ‰§è¡Œ')]),s._v(', å¦‚æœ "æ¼æ¡¶" ç©ºäº†åˆ™åœæ­¢ "æ¼æ°´â€.')]),s._v(" "),t("li",[s._v('å¦‚æœ "æ¼æ¡¶" æ»¡äº†åˆ™å¤šä½™çš„ "æ°´æ»´" ä¼šè¢«'),t("strong",[s._v("ç›´æ¥ä¸¢å¼ƒ")]),s._v(".")])]),s._v(" "),t("p",[s._v("æ¼æ¡¶ç®—æ³•å¤šä½¿ç”¨"),t("strong",[s._v("é˜Ÿåˆ—å®")]),s._v("ç°, æœåŠ¡çš„è¯·æ±‚ä¼šå­˜åˆ°é˜Ÿåˆ—ä¸­, æœåŠ¡çš„æä¾›æ–¹åˆ™æŒ‰ç…§"),t("strong",[s._v("å›ºå®šçš„é€Ÿç‡ä»é˜Ÿåˆ—ä¸­")]),s._v("å–å‡ºè¯·æ±‚å¹¶æ‰§è¡Œ, è¿‡å¤šçš„è¯·æ±‚åˆ™æ”¾åœ¨é˜Ÿåˆ—ä¸­æ’é˜Ÿæˆ–ç›´æ¥æ‹’ç».")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200727000033941.png",alt:""}})]),s._v(" "),t("p",[s._v("æ¼æ¡¶ç®—æ³•çš„ç¼ºé™·ä¹Ÿå¾ˆæ˜æ˜¾, å½“çŸ­æ—¶é—´å†…æœ‰"),t("strong",[s._v("å¤§é‡çš„çªå‘è¯·æ±‚")]),s._v("æ—¶, å³ä¾¿æ­¤æ—¶æœåŠ¡å™¨æ²¡æœ‰ä»»ä½•è´Ÿè½½, "),t("strong",[s._v("æ¯ä¸ªè¯·æ±‚ä¹Ÿéƒ½å¾—åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½è¢«å“åº”")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_2-ä»¤ç‰Œæ¡¶ç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä»¤ç‰Œæ¡¶ç®—æ³•"}},[s._v("#")]),s._v(" 2.ä»¤ç‰Œæ¡¶ç®—æ³•")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-2"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v("è§„å®šå›ºå®šå®¹é‡çš„æ¡¶, "),t("strong",[s._v("token ä»¥å›ºå®šé€Ÿåº¦å¾€æ¡¶å†…å¡«å……")]),s._v(", å½“æ¡¶æ»¡æ—¶ token ä¸ä¼šè¢«ç»§ç»­æ”¾å…¥, æ¯è¿‡æ¥ä¸€ä¸ªè¯·æ±‚æŠŠ "),t("strong",[s._v("token")]),s._v(" ä»æ¡¶ä¸­ç§»é™¤, å¦‚æœæ¡¶ä¸­æ²¡æœ‰ token åˆ™ä¸èƒ½è¯·æ±‚.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200727000232046.png",alt:""}})]),s._v(" "),t("p",[s._v("ä»¤ç‰Œæ¡¶ç®—æ³•æ¦‚å¿µå¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("ä»¤ç‰Œä»¥å›ºå®šé€Ÿç‡ç”Ÿæˆ")]),s._v(".")]),s._v(" "),t("li",[s._v("ç”Ÿæˆçš„ä»¤ç‰Œæ”¾å…¥ä»¤ç‰Œæ¡¶"),t("strong",[s._v("ä¸­å­˜æ”¾")]),s._v(", å¦‚æœä»¤ç‰Œæ¡¶æ»¡äº†åˆ™å¤šä½™çš„"),t("strong",[s._v("ä»¤ç‰Œä¼šç›´æ¥ä¸¢å¼ƒ")]),s._v(", å½“è¯·æ±‚åˆ°è¾¾æ—¶, ä¼šå°è¯•ä»ä»¤ç‰Œæ¡¶ä¸­"),t("strong",[s._v("å–ä»¤ç‰Œ")]),s._v(", å–åˆ°äº†ä»¤ç‰Œçš„è¯·æ±‚å¯ä»¥æ‰§è¡Œ.")]),s._v(" "),t("li",[s._v("å¦‚æœæ¡¶ç©ºäº†, é‚£ä¹ˆå°è¯•å–ä»¤ç‰Œçš„è¯·æ±‚ä¼šè¢«"),t("strong",[s._v("ç›´æ¥ä¸¢å¼ƒ")]),s._v(".")])]),s._v(" "),t("p",[s._v("ä»¤ç‰Œæ¡¶ç®—æ³•æ—¢èƒ½å¤Ÿå°†æ‰€æœ‰çš„è¯·æ±‚"),t("strong",[s._v("å¹³å‡åˆ†å¸ƒåˆ°æ—¶é—´åŒºé—´å†…")]),s._v(", åˆèƒ½æ¥å—æœåŠ¡å™¨èƒ½å¤Ÿæ‰¿å—èŒƒå›´å†…çš„"),t("strong",[s._v("çªå‘è¯·æ±‚")]),s._v(", å› æ­¤æ˜¯ç›®å‰ä½¿ç”¨"),t("strong",[s._v("è¾ƒä¸ºå¹¿æ³›çš„ä¸€ç§é™æµç®—æ³•")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("Guava")]),s._v(" æä¾›äº† "),t("strong",[s._v("RateLimiter ç±»")]),s._v(", å®ç°äº†"),t("strong",[s._v("å•ç‚¹çš„ä»¤ç‰Œæ¡¶é™æµ")]),s._v(".")]),s._v(" "),t("p",[s._v("æºç åˆ†æå‚è€ƒ: "),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/519936968",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://zhuanlan.zhihu.com/p/519936968"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"é™æµå®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™æµå®ç°"}},[s._v("#")]),s._v(" é™æµå®ç°")]),s._v(" "),t("h5",{attrs:{id:"_1-spring-cloud-gateway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-spring-cloud-gateway"}},[s._v("#")]),s._v(" 1.Spring Cloud Gateway")]),s._v(" "),t("p",[s._v("Spring Cloud Gateway é»˜è®¤ä½¿ç”¨ Redis è¿›è¡Œé™æµ.")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-gateway"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-data-redis-reactive"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("gateway")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" requestratelimiter_route\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//pigx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("upms\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/admin/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RequestRateLimiter\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-rate-limiter.replenishRate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä»¤ç‰Œæ¡¶çš„å®¹ç§¯")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-rate-limiter.burstCapacity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æµé€Ÿ æ¯ç§’")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key-resolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#{@remoteAddrKeyResolver}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SPELè¡¨è¾¾å¼å»çš„å¯¹åº”çš„bean")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("KeyResolver")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("remoteAddrKeyResolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" exchange "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Mono")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("just")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exchange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRemoteAddress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHostName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h5",{attrs:{id:"_2-sentinel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-sentinel"}},[s._v("#")]),s._v(" 2.Sentinel")]),s._v(" "),t("p",[t("strong",[s._v("é€šè¿‡é…ç½®æ¥æ§åˆ¶æ¯ä¸ªæ¥å£çš„æµé‡")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-sentinel"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sentinel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("transport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dashboard")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8720")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dataId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" spring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sentinel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nacos\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DEFAULT_GROUP\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rule-type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flow\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xxxxxxxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("é…ç½®å†…å®¹åœ¨ Nacos ä¸Šè¿›è¡Œç¼–è¾‘.")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resource"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"limitApp"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"grade"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"count"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"strategy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"controlBehavior"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clusterMode"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("resource")]),s._v(": èµ„æºå, å³é™æµè§„åˆ™çš„ä½œç”¨å¯¹è±¡.")]),s._v(" "),t("li",[t("strong",[s._v("limitApp")]),s._v(": æµæ§é’ˆå¯¹çš„è°ƒç”¨æ¥æº, è‹¥ä¸º default åˆ™ä¸åŒºåˆ†è°ƒç”¨æ¥æº.")]),s._v(" "),t("li",[t("strong",[s._v("grade")]),s._v(": é™æµé˜ˆå€¼ç±»å‹, QPS æˆ–çº¿ç¨‹æ•°æ¨¡å¼, 0ä»£è¡¨æ ¹æ®å¹¶å‘æ•°é‡æ¥é™æµ, 1ä»£è¡¨æ ¹æ®QPSæ¥è¿›è¡Œæµé‡æ§åˆ¶.")]),s._v(" "),t("li",[t("strong",[s._v("count")]),s._v(": é™æµé˜ˆå€¼.")]),s._v(" "),t("li",[t("strong",[s._v("strategy")]),s._v(": åˆ¤æ–­çš„æ ¹æ®æ˜¯èµ„æºè‡ªèº«, è¿˜æ˜¯æ ¹æ®å…¶å®ƒå…³è”èµ„æº(refResource), è¿˜æ˜¯æ ¹æ®é“¾è·¯å…¥å£.")]),s._v(" "),t("li",[t("strong",[s._v("controlBehavior")]),s._v(": æµæ§æ•ˆæœ(ç›´æ¥æ‹’ç» / æ’é˜Ÿç­‰å¾… / æ…¢å¯åŠ¨æ¨¡å¼).")]),s._v(" "),t("li",[t("strong",[s._v("clusterMode")]),s._v(": æ˜¯å¦ä¸º"),t("strong",[s._v("é›†ç¾¤æ¨¡å¼")]),s._v(".")])]),s._v(" "),t("h5",{attrs:{id:"_3-guava"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-guava"}},[s._v("#")]),s._v(" 3.Guava")]),s._v(" "),t("p",[s._v("åŸºäº RateLimiter å®ç°åŸºç¡€é™æµ.")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[s._v("ä¸€æ–‡è¯»æ‡‚Guava RateLimiteråŸç†ä¸ç»†èŠ‚:"),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/519936968",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://zhuanlan.zhihu.com/p/519936968"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);