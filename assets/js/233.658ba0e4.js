(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{564:function(s,t,e){"use strict";e.r(t);var a=e(4),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_35-rediså†…å­˜-é˜»å¡-è¿ç»´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_35-rediså†…å­˜-é˜»å¡-è¿ç»´"}},[s._v("#")]),s._v(" 35.Rediså†…å­˜&é˜»å¡&è¿ç»´")]),s._v(" "),t("p",[s._v("Redis æ˜¯"),t("strong",[s._v("å†…å­˜æ•°æ®åº“")]),s._v(", ç†è§£ Redis å†…å­˜ååˆ†å…³é”®.")]),s._v(" "),t("h4",{attrs:{id:"å†…å­˜æ¶ˆè€—ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜æ¶ˆè€—ğŸŒŸ"}},[s._v("#")]),s._v(" å†…å­˜æ¶ˆè€—ğŸŒŸ")]),s._v(" "),t("p",[s._v("å†…å­˜æ¶ˆè€—åˆ†ä¸º"),t("strong",[s._v("è‡ªèº«å†…å­˜")]),s._v("æ¶ˆè€—å’Œ"),t("strong",[s._v("å­è¿›ç¨‹å†…å­˜")]),s._v("æ¶ˆè€—.")]),s._v(" "),t("h5",{attrs:{id:"_1-å†…å­˜ä½¿ç”¨ç»Ÿè®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å†…å­˜ä½¿ç”¨ç»Ÿè®¡"}},[s._v("#")]),s._v(" 1.å†…å­˜ä½¿ç”¨ç»Ÿè®¡")]),s._v(" "),t("p",[s._v("å†…å­˜ç»Ÿè®¡ä¿¡æ¯é€šè¿‡ "),t("strong",[s._v("info memory")]),s._v(" æŒ‡ä»¤æŸ¥çœ‹. é‡ç‚¹æŒ‡æ ‡å¦‚ä¸‹.")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("å±æ€§å")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("å±æ€§è¯´æ˜")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("used_memory")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Redis åˆ†é…çš„å†…å­˜"),t("strong",[s._v("æ€»é‡")]),s._v(", å³å†…éƒ¨å­˜å‚¨çš„æ‰€æœ‰æ•°æ®å†…å­˜å ç”¨é‡")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("used_memory_rss")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("ä»"),t("strong",[s._v("æ“ä½œç³»ç»Ÿ")]),s._v("è§’åº¦æ˜¾ç¤º Redis è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜æ€»é‡")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("used_memory_peak")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("å†…å­˜"),t("strong",[s._v("ä½¿ç”¨çš„æœ€å¤§å€¼")]),s._v(", è¡¨ç¤º used_memory "),t("strong",[s._v("å³°å€¼")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("used_memory_peak_human")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("ä»¥"),t("strong",[s._v("å¯è¯»çš„æ ¼å¼")]),s._v("è¿”å› used_memory peak")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("mem_fragmentation_ratio")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("used_memory_rss/used_memory "),t("strong",[s._v("æ¯”å€¼")]),s._v(", è¡¨ç¤º"),t("strong",[s._v("å†…å­˜ç¢ç‰‡ç‡")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("mem_allocator")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Redis æ‰€ä½¿ç”¨çš„å†…å­˜åˆ†é…å™¨ é»˜è®¤ä¸º jemalloc")])])])]),s._v(" "),t("p",[s._v("é‡ç‚¹å…³æ³¨: "),t("strong",[s._v("used_memory_rss")]),s._v(", "),t("strong",[s._v("used_memory")]),s._v(", åŠä¸¤è€…æ¯”å€¼ "),t("strong",[s._v("mem_fragmentation_ratio")]),s._v(".")]),s._v(" "),t("ul",[t("li",[s._v("å½“ "),t("strong",[s._v("mem_fragmentation_ratio > 1")]),s._v(" æ—¶, è¯´æ˜ used_memory_rss-used_memory å¤šå‡ºçš„éƒ¨åˆ†"),t("strong",[s._v("å†…å­˜å¹¶æ²¡æœ‰ç”¨äºæ•°æ®å­˜å‚¨")]),s._v(", è€Œæ˜¯è¢«å†…å­˜ç¢ç‰‡æ‰€æ¶ˆè€—, å¦‚æœä¸¤è€…ç›¸å·®å¾ˆå¤§, "),t("strong",[s._v("è¯´æ˜å†…å­˜ç¢ç‰‡ç‡ä¸¥é‡")]),s._v(".")]),s._v(" "),t("li",[s._v("å½“ "),t("strong",[s._v("mem_fragmentation_ratio < 1")]),s._v(" æ—¶, è¿™ç§æƒ…å†µä¸€èˆ¬å‡ºç°åœ¨æ“ä½œç³»ç»ŸæŠŠ Redis å†…å­˜"),t("strong",[s._v("äº¤æ¢åˆ°ç¡¬ç›˜å¯¼è‡´")]),s._v(", ç”±äºç¡¬ç›˜é€Ÿåº¦è¿œè¿œæ…¢äºå†…å­˜, Redis æ€§èƒ½ä¼šå˜å¾—å¾ˆå·®.")])]),s._v(" "),t("h5",{attrs:{id:"_2-å†…å­˜æ¶ˆè€—åˆ’åˆ†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜æ¶ˆè€—åˆ’åˆ†"}},[s._v("#")]),s._v(" 2.å†…å­˜æ¶ˆè€—åˆ’åˆ†")]),s._v(" "),t("p",[s._v("Redis è¿›ç¨‹å†…å­˜æ¶ˆè€—ä¸»è¦æœ‰å››ä¸ªéƒ¨åˆ†: "),t("strong",[s._v("è‡ªèº«å†…å­˜, å¯¹è±¡å†…å­˜, ç¼“å†²å†…å­˜, å†…å­˜ç¢ç‰‡")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527224014153.png",alt:""}})]),s._v(" "),t("h6",{attrs:{id:"_1-è‡ªèº«å†…å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è‡ªèº«å†…å­˜"}},[s._v("#")]),s._v(" (1)è‡ªèº«å†…å­˜")]),s._v(" "),t("p",[s._v("è‡ªèº«å†…å­˜å¾ˆå°.")]),s._v(" "),t("h6",{attrs:{id:"_2-å¯¹è±¡å†…å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¯¹è±¡å†…å­˜"}},[s._v("#")]),s._v(" (2)å¯¹è±¡å†…å­˜")]),s._v(" "),t("p",[s._v("å ç”¨æœ€å¤šçš„å†…å­˜, å³ä¿å­˜ç”¨æˆ·çš„"),t("strong",[s._v("æ‰€æœ‰æ•°æ®")]),s._v(". æ‰€æœ‰æ•°æ®é‡‡ç”¨ key-value çš„æ–¹å¼è¿›è¡Œå­˜å‚¨. é”®éƒ½æ˜¯å­—ç¬¦ä¸², æ‰€ä»¥åº”è¯¥é¿å…è¿‡é•¿çš„é”®. ä¸åŒæ•°æ®ç»“æ„å ç”¨å†…å­˜ä¸åŒ.")]),s._v(" "),t("h6",{attrs:{id:"_3-ç¼“å†²åŒºå†…å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼“å†²åŒºå†…å­˜"}},[s._v("#")]),s._v(" (3)ç¼“å†²åŒºå†…å­˜")]),s._v(" "),t("p",[s._v("ç¼“å†²å†…å­˜å°±æ˜¯"),t("strong",[s._v("ç¼“å†²åŒº")]),s._v("å†…å­˜. ä¸»è¦åŒ…æ‹¬: "),t("strong",[s._v("å®¢æˆ·ç«¯ç¼“å†², å¤åˆ¶ç§¯å‹ç¼“å†²åŒº, AOF ç¼“å†²åŒº")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527224046540.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("â‘  å®¢æˆ·ç«¯ç¼“å†²åŒº")]),s._v(": æŒ‡æ‰€æœ‰æ¥å…¥åˆ° Redis æœåŠ¡å™¨ TCP è¿æ¥çš„"),t("strong",[s._v("è¾“å…¥è¾“å‡ºç¼“å†²")]),s._v(". "),t("strong",[s._v("è¾“å…¥ç¼“å†²")]),s._v("æ— æ³•æ§åˆ¶, æœ€å¤§ç©ºé—´ä¸º 1G. "),t("strong",[s._v("è¾“å‡ºç¼“å†²")]),s._v("é€šè¿‡å‚æ•° client-output-buffer-limit æ§åˆ¶. å®¢æˆ·ç«¯åˆ†ä¸ºæ™®é€šå®¢æˆ·ç«¯, ä»å®¢æˆ·ç«¯, è®¢é˜…å®¢æˆ·ç«¯, é…ç½®æƒ…å†µä¸åŒ.")]),s._v(" "),t("p",[t("strong",[s._v("â‘¡ å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v(": Redis æœ‰ä¸€ä¸ª"),t("strong",[s._v("å¯é‡ç”¨çš„å›ºå®šå¤§å°ç¼“å†²åŒºç”¨äºå®ç°éƒ¨åˆ†å¤åˆ¶")]),s._v("åŠŸèƒ½, é€šè¿‡ repl-backlog-size å‚æ•°æ§åˆ¶, é»˜è®¤ 1MB. å¤åˆ¶ç§¯å‹ç¼“å†²åŒº"),t("strong",[s._v("æ•´ä¸ªä¸»èŠ‚ç‚¹åªæœ‰ä¸€ä¸ª")]),s._v(", æ‰€æœ‰ä»èŠ‚ç‚¹"),t("strong",[s._v("å…±äº«")]),s._v("æ­¤ç¼“å†²åŒº, å› æ­¤å¯ä»¥"),t("strong",[s._v("è®¾ç½®è¾ƒå¤§")]),s._v("çš„ç¼“å†²åŒºç©ºé—´, å¦‚ 100MB, è¿™éƒ¨åˆ†å†…å­˜æŠ•å…¥æ˜¯æœ‰ä»·å€¼çš„, å¯ä»¥"),t("strong",[s._v("æœ‰æ•ˆé¿å…å…¨é‡å¤åˆ¶")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("â‘¢ AOFç¼“å†²åŒº")]),s._v(": ç”¨äºåœ¨ "),t("strong",[s._v("AOF é‡å†™æœŸé—´ä¿å­˜æœ€è¿‘çš„å†™å…¥å‘½ä»¤")]),s._v(". æ­¤ç©ºé—´çš„æ¶ˆè€—ç”¨æˆ·æ— æ³•æ§åˆ¶, æ¶ˆè€—çš„å†…å­˜å–å†³äº AOF é‡å†™æ—¶é—´å’Œå†™å…¥å‘½ä»¤é‡, è¿™éƒ¨åˆ†ç©ºé—´å ç”¨é€šå¸¸å¾ˆå°.")]),s._v(" "),t("h6",{attrs:{id:"_4-å†…å­˜ç¢ç‰‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å†…å­˜ç¢ç‰‡"}},[s._v("#")]),s._v(" (4)å†…å­˜ç¢ç‰‡")]),s._v(" "),t("p",[s._v("ä¸ºæ›´å¥½çš„ç®¡ç†å’Œé‡å¤åˆ©ç”¨å†…å­˜, åˆ†é…å†…å­˜ç­–ç•¥ä¸€èˆ¬é‡‡ç”¨"),t("strong",[s._v("å›ºå®šèŒƒå›´çš„å†…å­˜å—")]),s._v("è¿›è¡Œåˆ†é…. åœ¨ 64 ä½ç³»ç»Ÿä¸­å°†å†…å­˜ç©ºé—´åˆ’åˆ†ä¸º: å°, å¤§, å·¨å¤§ä¸‰ä¸ªèŒƒå›´. æ¯ä¸ªèŒƒå›´å†…åˆåˆ’åˆ†ä¸ºå¤šä¸ªå°çš„"),t("strong",[s._v("å†…å­˜å—å•ä½")]),s._v(". æ¯”å¦‚ä¿å­˜ 5KB å¯¹è±¡å¯èƒ½ä¼šé‡‡ç”¨ 8KB çš„å—å­˜å‚¨, å‰©ä¸‹çš„ 3KB ç©ºé—´å˜ä¸ºäº†"),t("strong",[s._v("å†…å­˜ç¢ç‰‡")]),s._v("ä¸èƒ½å†åˆ†é…ç»™å…¶ä»–å¯¹è±¡å­˜å‚¨.")]),s._v(" "),t("p",[s._v("æ­£å¸¸çš„ç¢ç‰‡ç‡ "),t("strong",[s._v("mem_fragmentation_ratio")]),s._v(" åœ¨ "),t("strong",[s._v("1.03")]),s._v(" å·¦å³.")]),s._v(" "),t("blockquote",[t("p",[s._v("é«˜å†…å­˜ç¢ç‰‡ç‡çš„åŸå› ?")])]),s._v(" "),t("p",[s._v("å½“å­˜å‚¨çš„æ•°æ®"),t("strong",[s._v("é•¿çŸ­å·®å¼‚è¾ƒå¤§")]),s._v("æ—¶å€™, ä»¥ä¸‹åœºæ™¯å®¹æ˜“å‡ºç°"),t("strong",[s._v("é«˜å†…å­˜ç¢ç‰‡")]),s._v("é—®é¢˜:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("é¢‘ç¹åšæ›´æ–°æ“ä½œ")]),s._v(", ä¾‹å¦‚é¢‘ç¹å¯¹å·²å­˜åœ¨çš„é”®æ‰§è¡Œ append, setrange ç­‰æ›´æ–°æ“ä½œ.")]),s._v(" "),t("li",[s._v("å¤§é‡è¿‡æœŸ"),t("strong",[s._v("é”®åˆ é™¤")]),s._v(", é”®å¯¹è±¡è¿‡æœŸåˆ é™¤å, é‡Šæ”¾çš„ç©ºé—´æ— æ³•å¾—åˆ°å……åˆ†åˆ©ç”¨, å¯¼è‡´ç¢ç‰‡ç‡ä¸Šå‡.")])]),s._v(" "),t("blockquote",[t("p",[s._v("å‡ºç°é«˜å†…å­˜ç¢ç‰‡ç‡çš„è§£å†³æ–¹æ³•?")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ•°æ®å¯¹é½")]),s._v(": å°½é‡åšæ•°æ®å¯¹é½, æ¯”å¦‚æ•°æ®å°½é‡é‡‡ç”¨æ•°å­—ç±»å‹æˆ–è€…å›ºå®šé•¿åº¦å­—ç¬¦ä¸²ç­‰, è¿™è¦çœ‹å…·ä½“ä¸šåŠ¡.")]),s._v(" "),t("li",[t("strong",[s._v("å®‰å…¨é‡å¯")]),s._v(": é‡å¯èŠ‚ç‚¹å¯ä»¥åšåˆ°å†…å­˜ç¢ç‰‡é‡å¯æ•´ç†, å› æ­¤å¯ä»¥åˆ©ç”¨é«˜å¯ç”¨æ¶æ„, å¦‚ sentinel æˆ– cluster, å°†ç¢ç‰‡ç‡è¿‡é«˜çš„ä¸»èŠ‚ç‚¹è½¬æ¢ä¸º"),t("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(", è¿›è¡Œå®‰å…¨é‡å¯.")])]),s._v(" "),t("h5",{attrs:{id:"_3-å­è¿›ç¨‹å†…å­˜æ¶ˆè€—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å­è¿›ç¨‹å†…å­˜æ¶ˆè€—"}},[s._v("#")]),s._v(" 3.å­è¿›ç¨‹å†…å­˜æ¶ˆè€—")]),s._v(" "),t("p",[s._v("ä¸»è¦æ˜¯æŒ‡æ‰§è¡Œ "),t("strong",[s._v("RDB, AOF é‡å†™")]),s._v("æ—¶ Redis åˆ›å»ºçš„"),t("strong",[s._v("å­è¿›ç¨‹å†…å­˜")]),s._v("æ¶ˆè€—. Redis æ‰§è¡Œ fork æ“ä½œäº§ç”Ÿçš„å­è¿›ç¨‹å†…å­˜å ç”¨é‡å¯¹å¤–è¡¨ç°ä¸ºä¸çˆ¶è¿›ç¨‹"),t("strong",[s._v("ç›¸åŒ")]),s._v(", ç†è®ºä¸Šéœ€è¦"),t("strong",[s._v("ä¸€å€çš„ç‰©ç†å†…å­˜")]),s._v("æ¥å®Œæˆé‡å†™æ“ä½œ. ä½† Linux å…·æœ‰"),t("strong",[s._v("å†™æ—¶å¤åˆ¶")]),s._v("æŠ€æœ¯, çˆ¶å­è¿›ç¨‹ä¼š"),t("strong",[s._v("å…±äº«ç›¸åŒçš„ç‰©ç†å†…å­˜é¡µ")]),s._v(", å½“"),t("strong",[s._v("çˆ¶è¿›ç¨‹å¤„ç†å†™è¯·æ±‚")]),s._v("æ—¶ä¼šå¯¹"),t("strong",[s._v("éœ€è¦ä¿®æ”¹çš„é¡µå¤åˆ¶å‡ºä¸€ä»½å‰¯æœ¬å®Œæˆå†™æ“ä½œ")]),s._v(", è€Œå­è¿›ç¨‹ä¾ç„¶"),t("strong",[s._v("è¯»å– fork æ—¶æ•´ä¸ªçˆ¶è¿›ç¨‹çš„å†…å­˜å¿«ç…§")]),s._v(".")]),s._v(" "),t("h4",{attrs:{id:"å†…å­˜ç®¡ç†ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜ç®¡ç†ğŸŒŸ"}},[s._v("#")]),s._v(" å†…å­˜ç®¡ç†ğŸŒŸ")]),s._v(" "),t("p",[s._v("Redis ä¸»è¦é€šè¿‡"),t("strong",[s._v("æ§åˆ¶å†…å­˜ä¸Šé™å’Œå›æ”¶ç­–ç•¥")]),s._v("æ¥å®ç°å†…å­˜ç®¡ç†.")]),s._v(" "),t("h5",{attrs:{id:"_1-è®¾ç½®å†…å­˜ä¸Šé™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è®¾ç½®å†…å­˜ä¸Šé™"}},[s._v("#")]),s._v(" 1.è®¾ç½®å†…å­˜ä¸Šé™")]),s._v(" "),t("p",[s._v("Redis ä½¿ç”¨ "),t("strong",[s._v("maxmemory")]),s._v(" å‚æ•°é™åˆ¶"),t("strong",[s._v("æœ€å¤§å¯ç”¨å†…å­˜")]),s._v(". é™åˆ¶å†…å­˜ç›®çš„:")]),s._v(" "),t("ol",[t("li",[s._v("ç”¨äºç¼“å­˜åœºæ™¯, å½“è¶…å‡ºå†…å­˜ä¸Šé™ maxmemory æ—¶ä½¿ç”¨ LRU ç­‰"),t("strong",[s._v("åˆ é™¤ç­–ç•¥é‡Šæ”¾ç©ºé—´")]),s._v(".")]),s._v(" "),t("li",[s._v("é˜²æ­¢æ‰€ç”¨å†…å­˜"),t("strong",[s._v("è¶…è¿‡")]),s._v("æœåŠ¡å™¨ç‰©ç†å†…å­˜.")])]),s._v(" "),t("p",[s._v("maxmemory é™åˆ¶çš„æ˜¯ Redis "),t("strong",[s._v("å®é™…ä½¿ç”¨çš„å†…å­˜é‡")]),s._v(", å³ used_memory ç»Ÿè®¡çš„å†…å­˜. ç”±äºå­˜åœ¨"),t("strong",[s._v("å†…å­˜ç¢ç‰‡")]),s._v(", "),t("strong",[s._v("å®é™…å†…å­˜æ¶ˆè€—")]),s._v("å¯èƒ½æ¯” maxmemory è®¾ç½®çš„"),t("strong",[s._v("æ›´å¤§")]),s._v(", ä½¿ç”¨æ—¶è¦å°å¿ƒè¿™éƒ¨åˆ†å†…å­˜"),t("strong",[s._v("æº¢å‡º")]),s._v(".")]),s._v(" "),t("p",[s._v("å¯ä»¥é€šè¿‡ "),t("strong",[s._v("config set maxmemory")]),s._v(" åŠ¨æ€ä¿®æ”¹æœ€å¤§å¯ç”¨å†…å­˜, å®ç°åŠ¨æ€ä¼¸ç¼© Redis å†…å­˜.")]),s._v(" "),t("h5",{attrs:{id:"_2-å†…å­˜å›æ”¶ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜å›æ”¶ç­–ç•¥"}},[s._v("#")]),s._v(" 2.å†…å­˜å›æ”¶ç­–ç•¥")]),s._v(" "),t("p",[s._v("å†…å­˜å›æ”¶ç­–ç•¥ä¹Ÿå«å†…å­˜æ·˜æ±°æœºåˆ¶. å†…å­˜å›æ”¶æœºåˆ¶ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢:")]),s._v(" "),t("ul",[t("li",[s._v("åˆ é™¤åˆ°è¾¾"),t("strong",[s._v("è¿‡æœŸ")]),s._v("æ—¶é—´çš„é”®å¯¹è±¡.")]),s._v(" "),t("li",[s._v("å†…å­˜ä½¿ç”¨è¾¾åˆ° "),t("strong",[s._v("maxmemory")]),s._v(" ä¸Šé™æ—¶è§¦å‘å†…å­˜æº¢å‡ºæ§åˆ¶ç­–ç•¥.")])]),s._v(" "),t("h6",{attrs:{id:"_1-ç¼“å­˜è¿‡æœŸç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç¼“å­˜è¿‡æœŸç­–ç•¥"}},[s._v("#")]),s._v(" (1)ç¼“å­˜è¿‡æœŸç­–ç•¥")]),s._v(" "),t("p",[s._v("ç¼“å­˜è¿‡æœŸç­–ç•¥å°±æ˜¯"),t("strong",[s._v("åˆ é™¤è¿‡æœŸé”®å¯¹è±¡")]),s._v("çš„ç­–ç•¥.")]),s._v(" "),t("p",[s._v("ä¸€èˆ¬é¡¹ç›®ä¸­çš„ token æˆ–ä¸€äº›ç™»å½•ä¿¡æ¯, å°¤å…¶æ˜¯çŸ­ä¿¡éªŒè¯ç éƒ½æœ‰æ—¶é—´é™åˆ¶, å¦‚æœè‡ªå·±åˆ¤æ–­è¿‡æœŸä¼šä¸¥é‡å½±å“é¡¹ç›®æ€§èƒ½. å½“ set key çš„æ—¶å€™, éƒ½å¯ä»¥ç»™ä¸€ä¸ªè¿‡æœŸæ—¶é—´, é€šè¿‡è¿‡æœŸæ—¶é—´å¯ä»¥æŒ‡å®šè¿™ä¸ª key å¯ä»¥å­˜æ´»çš„æ—¶é—´.")]),s._v(" "),t("p",[s._v("å¦‚æœå‡è®¾è®¾ç½®äº†ä¸€æ‰¹ key åªèƒ½å­˜æ´» 1 ä¸ªå°æ—¶, é‚£ä¹ˆæ¥ä¸‹æ¥ 1 å°æ—¶å, Redis æ˜¯æ€ä¹ˆå¯¹è¿™æ‰¹ key è¿›è¡Œåˆ é™¤çš„?")]),s._v(" "),t("p",[s._v("ç²¾å‡†ç»´æŠ¤æ¯ä¸ªé”®è¿‡æœŸæ—¶é—´ä¼šå¯¼è‡´æ¶ˆè€—å¤§é‡çš„ CPU, å¯¹äºå•çº¿ç¨‹çš„ Redis æ¥è¯´"),t("strong",[s._v("æˆæœ¬è¿‡é«˜")]),s._v(", å› æ­¤é‡‡ç”¨"),t("strong",[s._v("æƒ°æ€§åˆ é™¤")]),s._v("å’Œ"),t("strong",[s._v("å®šæ—¶ä»»åŠ¡åˆ é™¤")]),s._v("æœºåˆ¶å®ç°è¿‡æœŸé”®çš„å†…å­˜å›æ”¶.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æƒ°æ€§åˆ é™¤: ç”¨äºå½“å®¢æˆ·ç«¯è¯»å–å¸¦æœ‰è¶…æ—¶å±æ€§")]),s._v("çš„é”®æ—¶, å¦‚æœ"),t("strong",[s._v("å·²ç»è¶…è¿‡é”®è®¾ç½®çš„è¿‡æœŸæ—¶é—´")]),s._v(", ä¼š"),t("strong",[s._v("æ‰§è¡Œåˆ é™¤æ“ä½œå¹¶è¿”å›ç©º")]),s._v(", è¿™ç§ç­–ç•¥æ˜¯å‡ºäºèŠ‚çœ CPU æˆæœ¬è€ƒè™‘, ä¸éœ€è¦å•ç‹¬ç»´æŠ¤ TTL é“¾è¡¨æ¥å¤„ç†è¿‡æœŸé”®. ä½†å•ç‹¬ç”¨è¿™ç§æ–¹å¼"),t("strong",[s._v("å­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜")]),s._v(", å› ä¸ºå¦‚æœè¿‡æœŸé”®"),t("strong",[s._v("ä¸€ç›´æ²¡æœ‰è®¿é—®")]),s._v("å°†æ— æ³•å¾—åˆ°åŠæ—¶çš„åˆ é™¤, ä»è€Œå¯¼è‡´å†…å­˜ä¸èƒ½åŠæ—¶é‡Šæ”¾.")]),s._v(" "),t("li",[t("strong",[s._v("å®šæ—¶åˆ é™¤ä»»åŠ¡: â€‹")]),s._v("Redis å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª"),t("strong",[s._v("å®šæ—¶ä»»åŠ¡")]),s._v(", é»˜è®¤æ¯éš” 100ms å°±"),t("strong",[s._v("éšæœºæŠ½å–")]),s._v("ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„ key, æ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸ, å¦‚æœè¿‡æœŸå°±åˆ é™¤. å®šæ—¶ä»»åŠ¡ä¸­åˆ é™¤è¿‡æœŸé”®é€»è¾‘é‡‡ç”¨äº†"),t("strong",[s._v("è‡ªé€‚åº”ç®—æ³•")]),s._v(", æ ¹æ®é”®çš„è¿‡æœŸæ¯”ä¾‹, ä½¿ç”¨"),t("strong",[s._v("å¿«æ…¢ä¸¤ç§é€Ÿç‡")]),s._v("æ¨¡å¼å›æ”¶é”®. å¯ä»¥ç”¨ä½œæƒ°æ€§åˆ é™¤çš„è¡¥å……. ä»æ¯ä¸ªæ•°æ®åº“éšæœºæ£€æŸ¥ 20 ä¸ªé”®å¦‚æœè¶…è¿‡ 25% çš„é”®è¿‡æœŸäº†åˆ™å¾ªç¯æ‰§è¡Œå›æ”¶é€»è¾‘ç›´åˆ°ä¸è¶³ 25%. ä¸ºä»€ä¹ˆè¦éšæœºå‘¢? å‡å¦‚ Redis å­˜äº†å‡ åä¸‡ä¸ª key, æ¯éš” 100ms å°±éå†æ‰€æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„ key çš„è¯, å°±ä¼šç»™ CPU å¸¦æ¥å¾ˆå¤§çš„è´Ÿè½½.")])]),s._v(" "),t("p",[s._v("ä½†ä»…ä»…è®¾ç½®è¿‡æœŸæ—¶é—´è¿˜æ˜¯æœ‰é—®é¢˜çš„. å¦‚æœå®šæœŸåˆ é™¤æ¼æ‰äº†å¾ˆå¤šè¿‡æœŸ key, ç„¶åä¹Ÿæ²¡åŠæ—¶å»æŸ¥, ä¹Ÿå°±æ²¡èµ°æƒ°æ€§åˆ é™¤. å¦‚æœå¤§é‡è¿‡æœŸ key å †ç§¯åœ¨å†…å­˜é‡Œ, å¯¼è‡´ Redis å†…å­˜å¿«è€—å°½äº†. è¿™æ—¶å€™å°±ä¼šå¯ç”¨ "),t("strong",[s._v("Redis å†…å­˜æ·˜æ±°æœºåˆ¶.")])]),s._v(" "),t("h6",{attrs:{id:"_2-å†…å­˜æ·˜æ±°æœºåˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜æ·˜æ±°æœºåˆ¶"}},[s._v("#")]),s._v(" (2)å†…å­˜æ·˜æ±°æœºåˆ¶")]),s._v(" "),t("p",[s._v("MySQL é‡Œæœ‰ 2000w æ•°æ®, Redis ä¸­åªå­˜ 20w æ•°æ®, å¦‚ä½•ä¿è¯ Redis ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®? è¿™å°±éœ€è¦å†…å­˜æ·˜æ±°æœºåˆ¶.")]),s._v(" "),t("p",[s._v("å†…å­˜æ·˜æ±°æœºåˆ¶å°±æ˜¯"),t("strong",[s._v("å†…å­˜æº¢å‡ºæ§åˆ¶ç­–ç•¥")]),s._v(". å³ Redis å†…å­˜ä½¿ç”¨è¾¾åˆ° "),t("strong",[s._v("maxmemory ä¸Šé™")]),s._v("æ—¶è§¦å‘å†…å­˜æº¢å‡ºæ§åˆ¶ç­–ç•¥. å…·ä½“ç”± "),t("strong",[s._v("maxmemory-policy")]),s._v(" å‚æ•°æ§åˆ¶å†…å­˜æº¢å‡ºåçš„å‰”é™¤ç­–ç•¥.")]),s._v(" "),t("p",[s._v("Redis æ”¯æŒ 6 ç§ç­–ç•¥.")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("ç­–ç•¥")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("è¯´æ˜")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("noeviction")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("é»˜è®¤")]),s._v("ç­–ç•¥, "),t("strong",[s._v("æ‹’ç»å†™å…¥")]),s._v(", ä¸åˆ é™¤æ•°æ®, åªå“åº”è¯»æ“ä½œ")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("volatitle-lru")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("æ ¹æ® "),t("strong",[s._v("LRU ç®—æ³•")]),s._v("åˆ é™¤"),t("strong",[s._v("è¿‡æœŸçš„é”®")]),s._v(", ç›´åˆ°è…¾å‡ºè¶³å¤Ÿç©ºé—´, å¦‚æœ"),t("strong",[s._v("æ²¡æœ‰å¯åˆ é™¤çš„é”®")]),s._v("åˆ™ä¼š"),t("strong",[s._v("é€€åˆ°é»˜è®¤ç­–ç•¥")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("allkeys-lru")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("æ ¹æ® "),t("strong",[s._v("LRU ç®—æ³•")]),s._v("åˆ é™¤é”®, ä¸ç®¡æ˜¯å¦è¶…æ—¶, "),t("strong",[s._v("ç›´åˆ°è…¾å‡ºè¶³å¤Ÿç©ºé—´")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("allkeys-random")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("éšæœºåˆ é™¤æ‰€æœ‰é”®")]),s._v(", ç›´åˆ°è…¾å‡ºè¶³å¤Ÿç©ºé—´ä¸ºæ­¢")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("volatitle-random")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("éšæœºåˆ é™¤è¿‡æœŸé”®")]),s._v(", ç›´åˆ°è…¾å‡ºè¶³å¤Ÿç©ºé—´")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("volatitle-ttl")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("æ ¹æ®é”®å¯¹è±¡çš„ TTL, åˆ é™¤"),t("strong",[s._v("æœ€è¿‘è¦è¿‡æœŸ")]),s._v("çš„é”®. æ²¡æœ‰å¯åˆ é™¤çš„é”®åˆ™å›é€€é»˜è®¤ç­–ç•¥")])])])]),s._v(" "),t("p",[s._v("å¦‚æœ"),t("strong",[s._v("å†…å­˜é¢‘ç¹æº¢å‡º, ä¼šé¢‘ç¹è§¦å‘å†…å­˜å›æ”¶æ“ä½œ, éå¸¸å½±å“æ€§èƒ½")]),s._v(". å¦‚æœå½“å‰ Redis æœ‰ä»èŠ‚ç‚¹ , å›æ”¶å†…å­˜æ“ä½œå¯¹åº”çš„åˆ é™¤å‘½ä»¤ä¼š"),t("strong",[s._v("åŒæ­¥")]),s._v("åˆ°ä»èŠ‚ç‚¹, å¯¼è‡´"),t("strong",[s._v("å†™æ”¾å¤§")]),s._v("çš„é—®é¢˜.")]),s._v(" "),t("h4",{attrs:{id:"å†…å­˜ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜ä¼˜åŒ–"}},[s._v("#")]),s._v(" å†…å­˜ä¼˜åŒ–")]),s._v(" "),t("h5",{attrs:{id:"_1-redisobjectå¯¹è±¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-redisobjectå¯¹è±¡"}},[s._v("#")]),s._v(" 1.RedisObjectå¯¹è±¡")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v("redisObject æ˜¯ä¸€ä¸ª"),t("strong",[s._v("ç»“æ„ä½“")]),s._v(". Redis å†…éƒ¨ä½¿ç”¨ redisObject å¯¹è±¡æ¥è¡¨ç¤º"),t("strong",[s._v("æ‰€æœ‰çš„ key å’Œ value")]),s._v(", æ¯æ¬¡åœ¨ Redis æ•°æ®å—ä¸­åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ—¶, ä¸€ä¸ªæ˜¯é”®å¯¹è±¡, ä¸€ä¸ªæ˜¯å€¼å¯¹è±¡. Redis å­˜å‚¨æ•°æ®"),t("strong",[s._v("éƒ½é‡‡ç”¨ redisObject å°è£…")]),s._v(".")]),s._v(" "),t("p",[s._v("redisObject æœ€ä¸»è¦çš„ä¿¡æ¯:")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typedef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("redisObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å½“å‰å¯¹è±¡ä½¿ç”¨çš„æ•°æ®ç±»å‹ ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å½“å‰å¯¹è±¡å†…éƒ¨ç¼–ç ç±»å‹")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" encoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸å¯¹è±¡çš„æ•°æ®å†…å®¹ç›¸å…³, å¦‚æœæ˜¯æ•´æ•°, ç›´æ¥å­˜å‚¨æ•°æ®; å¦åˆ™è¡¨ç¤ºæŒ‡å‘æ•°æ®çš„æŒ‡é’ˆ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("ptr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®°å½•å½“å‰å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°, ç”¨äºé€šè¿‡å¼•ç”¨æ¬¡æ•°å›æ”¶å†…å­˜")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" refcount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®°å½•æœ€åä¸€æ¬¡è¢«ç¨‹åºè®¿é—®çš„æ—¶é—´,ç”¨äºè¾…åŠ© LRU ç®—æ³•å®ç°å†…å­˜å›æ”¶")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" lru"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" robj\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527224418151.png",alt:""}})]),s._v(" "),t("h6",{attrs:{id:"_2-å†…å­˜å›æ”¶ä¸å…±äº«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜å›æ”¶ä¸å…±äº«"}},[s._v("#")]),s._v(" (2)å†…å­˜å›æ”¶ä¸å…±äº«")]),s._v(" "),t("p",[s._v("å› ä¸º C è¯­è¨€ä¸å…·å¤‡è‡ªåŠ¨å†…å­˜å›æ”¶åŠŸèƒ½, å½“å°† redisObject å¯¹è±¡ä½œä¸ºæ•°æ®åº“çš„é”®æˆ–å€¼è€Œä¸æ˜¯ä½œä¸ºå‚æ•°å­˜å‚¨æ—¶å…¶ç”Ÿå‘½å‘¨æœŸæ˜¯éå¸¸é•¿çš„, ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, Redis "),t("strong",[s._v("è‡ªå·±æ„å»ºäº†ä¸€ä¸ªå†…å­˜å›æ”¶æœºåˆ¶")]),s._v(", é€šè¿‡ redisobject ç»“æ„ä¸­çš„ "),t("strong",[s._v("refcount")]),s._v(" å®ç°. è¿™ä¸ªå±æ€§ä¼šéšç€å¯¹è±¡çš„"),t("strong",[s._v("ä½¿ç”¨çŠ¶æ€è€Œä¸æ–­å˜åŒ–")]),s._v(". å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼å˜ä¸º 0 æ—¶, å¯¹è±¡æ‰€å ç”¨çš„"),t("strong",[s._v("å†…å­˜å°±ä¼šè¢«é‡Šæ”¾")]),s._v(". refcount å±æ€§é™¤äº†èƒ½å®ç°å†…å­˜å›æ”¶ä»¥å¤–, è¿˜èƒ½å®ç°å†…å­˜å…±äº«.")]),s._v(" "),t("p",[s._v("é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸­, åœ¨æ¡ä»¶å…è®¸æƒ…å†µä¸‹, å»ºè®®å­—ç¬¦ä¸²"),t("strong",[s._v("é•¿åº¦æ§åˆ¶åœ¨ 39 å­—èŠ‚")]),s._v("ä»¥å†…, å‡å°‘"),t("strong",[s._v("åˆ›å»º redisObject")]),s._v(" å†…å­˜åˆ†é…æ¬¡æ•°, ä»è€Œæé«˜æ€§èƒ½.")]),s._v(" "),t("h5",{attrs:{id:"_2-ç¼©å‡é”®å€¼å¯¹è±¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¼©å‡é”®å€¼å¯¹è±¡"}},[s._v("#")]),s._v(" 2.ç¼©å‡é”®å€¼å¯¹è±¡")]),s._v(" "),t("p",[t("strong",[s._v("å‡å°‘å†…å­˜")]),s._v("æœ€ç›´æ¥çš„å°±æ˜¯ç¼©å‡ key å’Œ value "),t("strong",[s._v("é•¿åº¦")]),s._v(".")]),s._v(" "),t("p",[s._v("å¸¸è§éœ€æ±‚æ˜¯æŠŠä¸šåŠ¡å¯¹è±¡"),t("strong",[s._v("åºåˆ—åŒ–")]),s._v("æˆäºŒè¿›åˆ¶æ•°ç»„æ”¾å…¥ Redis, å¯ä»¥é‡‡ç”¨"),t("strong",[s._v("é«˜æ•ˆ")]),s._v("çš„åºåˆ—åŒ–å·¥å…·é™ä½æ•°ç»„å¤§å°, ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›å‹ç¼©ç®—æ³•å¯¹å€¼å‹ç¼©.")]),s._v(" "),t("h5",{attrs:{id:"_3-å…±äº«å¯¹è±¡æ± "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å…±äº«å¯¹è±¡æ± "}},[s._v("#")]),s._v(" 3.å…±äº«å¯¹è±¡æ± ")]),s._v(" "),t("p",[t("strong",[s._v("å…±äº«å¯¹è±¡æ± ")]),s._v("æŒ‡åœ¨ Redis å†…éƒ¨ç»´æŠ¤ "),t("strong",[s._v("[0-9999] çš„æ•´æ•°å¯¹è±¡æ± ")]),s._v(", åªä¿ç•™ä¸€ä¸‡ä¸ªæ•´æ•°ä¸ºäº†é˜²æ­¢å¯¹è±¡æ± æµªè´¹. åˆ›å»ºå¤§é‡çš„"),t("strong",[s._v("æ•´æ•°")]),s._v("ç±»å‹ redisObject å­˜åœ¨å†…å­˜å¼€é”€, æ¯ä¸ª redisObject å†…éƒ¨ç»“æ„è‡³å°‘å ç”¨ 16 ä¸ªå­—èŠ‚, ç”šè‡³è¶…è¿‡äº†æ•´æ•°è‡ªèº«ç©ºé—´æ¶ˆè€—. æ‰€ä»¥ Redis å†…å­˜ç»´æŠ¤ä¸€ä¸ª [0-9999] æ•´æ•°å¯¹è±¡æ± , ç”¨äº"),t("strong",[s._v("èŠ‚çº¦å†…å­˜")]),s._v(". é™¤äº†æ•´æ•°å€¼å¯¹è±¡, å…¶ä»–ç±»å‹å¦‚ list, hash, set, zset å†…éƒ¨å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨æ•´æ•°å¯¹è±¡æ± . å› æ­¤å¼€å‘ä¸­åœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹, å°½å¯èƒ½ä½¿ç”¨"),t("strong",[s._v("æ•´æ•°å¯¹è±¡")]),s._v("ä»¥èŠ‚çœå†…å­˜.")]),s._v(" "),t("p",[s._v("å¯è§å½“æ•°æ®"),t("strong",[s._v("å¤§é‡ä½¿ç”¨ [0-9999] çš„æ•´æ•°")]),s._v("æ—¶, å…±äº«å¯¹è±¡æ± å¯ä»¥èŠ‚çº¦å¤§é‡å†…å­˜. å½“å¤šä¸€ä¸ªå¼•ç”¨æ—¶, æ•°æ®çš„"),t("strong",[s._v("å¼•ç”¨æ•°")]),s._v("ä¼š + 1.")]),s._v(" "),t("p",[t("strong",[s._v("æ³¨æ„")]),s._v(": å½“è®¾ç½® maxmemory å¹¶"),t("strong",[s._v("å¯ç”¨ LRU ç›¸å…³æ·˜æ±°ç­–ç•¥")]),s._v(": volatile-lru, allkeys-lru æ—¶, Redis "),t("strong",[s._v("ç¦æ­¢ä½¿ç”¨")]),s._v("å…±äº«å¯¹è±¡æ± .")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸ºå•¥å¼€å¯maxmemoryå’ŒLRUæ·˜æ±°ç­–ç•¥åå¯¹è±¡æ± æ— æ•ˆ?")])]),s._v(" "),t("p",[s._v("LRU ç®—æ³•æ™“è·å–å¯¹è±¡"),t("strong",[s._v("æœ€åè¢«è®¿é—®æ—¶é—´")]),s._v(", ä»¥ä¾¿æ·˜æ±°"),t("strong",[s._v("æœ€é•¿æœªè®¿é—®")]),s._v("æ•°æ®, æ¯ä¸ªå¯¹è±¡æœ€åè®¿é—®æ—¶é—´å­˜å‚¨åœ¨ redisObject å¯¹è±¡çš„ "),t("strong",[s._v("lru å­—æ®µ")]),s._v(". å¯¹è±¡å…±äº«æ„å‘³ç€å¤šä¸ªå¼•ç”¨å…±äº«"),t("strong",[s._v("åŒä¸€ä¸ª")]),s._v(" redisObject, è¿™æ—¶ lru å­—æ®µä¹Ÿä¼š"),t("strong",[s._v("è¢«å…±äº«")]),s._v(", å¯¼è‡´"),t("strong",[s._v("æ— æ³•è·å–")]),s._v("æ¯ä¸ªå¯¹è±¡çš„æœ€åè®¿é—®æ—¶é—´. å¦‚æœæ²¡æœ‰è®¾ç½® maxmemory, ç›´åˆ°å†…å­˜è¢«ç”¨å°½ Redis ä¹Ÿä¸ä¼šè§¦å‘å†…å­˜å›æ”¶. æ‰€ä»¥"),t("strong",[s._v("å…±äº«å¯¹è±¡æ± ä¸ maxmemory + LRU ç­–ç•¥å†²çª, ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„")]),s._v(".")]),s._v(" "),t("p",[s._v("æ­¤å¤–, å¯¹äº "),t("strong",[s._v("ziplist ç¼–ç ")]),s._v("çš„å€¼å¯¹è±¡, å³ä½¿å†…éƒ¨æ•°æ®ä¸ºæ•´æ•°ä¹Ÿ"),t("strong",[s._v("æ— æ³•")]),s._v("ä½¿ç”¨å…±äº«å¯¹è±¡æ± , å› ä¸º ziplist ä½¿ç”¨"),t("strong",[s._v("å‹ç¼©ä¸”å†…å­˜è¿ç»­")]),s._v("çš„ç»“æ„, å¯¹è±¡å…±äº«åˆ¤æ–­æˆæœ¬è¿‡é«˜.")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸ºå•¥åªæœ‰æ•´æ•°å¯¹è±¡æ± ?")])]),s._v(" "),t("p",[s._v("é¦–å…ˆæ•´æ•°å¯¹è±¡æ± "),t("strong",[s._v("å¤ç”¨å‡ ç‡æœ€å¤§")]),s._v(", å…¶æ¬¡å¯¹è±¡å…±äº«çš„ä¸€ä¸ªå…³é”®æ“ä½œå°±æ˜¯åˆ¤æ–­ç›¸ç­‰æ€§, è€Œæ•´æ•°"),t("strong",[s._v("æ¯”è¾ƒç®—æ³•")]),s._v("æ—¶é—´å¤æ‚åº¦ "),t("strong",[s._v("O(1)")]),s._v(".")]),s._v(" "),t("p",[s._v("å¦‚æœ"),t("strong",[s._v("å­—ç¬¦ä¸²åˆ¤æ–­ç›¸ç­‰æ€§")]),s._v(", æ—¶é—´å¤æ‚åº¦ O(N) ç‰¹åˆ«æ˜¯é•¿å­—ç¬¦ä¸²æ›´æ¶ˆè€—æ€§èƒ½, æ­¤å¤–æµ®ç‚¹æ•°åœ¨ Redis å†…éƒ¨ä½¿ç”¨å­—ç¬¦ä¸²å­˜å‚¨. å¯¹äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„å¦‚ hash/list ç­‰, ç›¸ç­‰æ€§åˆ¤æ–­éœ€è¦ O(N^2). è¿™æ ·çš„å¼€é”€æ˜¾ç„¶ä¸åˆç†, å› æ­¤ Redis åªä¿ç•™æ•´æ•°å…±äº«å¯¹è±¡æ± .")]),s._v(" "),t("h5",{attrs:{id:"_4-å­—ç¬¦ä¸²ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å­—ç¬¦ä¸²ä¼˜åŒ–"}},[s._v("#")]),s._v(" 4.å­—ç¬¦ä¸²ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("å­—ç¬¦ä¸²å¯¹è±¡æ˜¯ Redis å†…éƒ¨æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹. æ‰€æœ‰"),t("strong",[s._v("é”®éƒ½æ˜¯å­—ç¬¦ä¸²")]),s._v("ç±»å‹, å€¼å¯¹è±¡æ•°æ®é™¤äº†æ•´æ•°ä¹‹å¤–éƒ½ä½¿ç”¨å­—ç¬¦ä¸²å­˜å‚¨.")]),s._v(" "),t("p",[s._v("Redis æ²¡æœ‰é‡‡ç”¨åŸç”Ÿ C è¯­è¨€å­—ç¬¦ä¸²ç±»å‹è€Œæ˜¯è‡ªå·±å®ç°äº†å­—ç¬¦ä¸²ç»“æ„: "),t("strong",[s._v("å†…éƒ¨ç®€å•åŠ¨æ€å­—ç¬¦ä¸²(SDS)")]),s._v(". SDS å­˜åœ¨ç©ºé—´é¢„åˆ†é…æœºåˆ¶, å­—ç¬¦ä¸²ä¹‹æ‰€ä»¥é‡‡ç”¨é¢„åˆ†é…çš„æ–¹å¼æ˜¯"),t("strong",[s._v("é˜²æ­¢ä¿®æ”¹æ“ä½œéœ€è¦ä¸æ–­é‡åˆ†é…å†…å­˜å’Œå­—èŠ‚æ•°æ®æ‹·è´")]),s._v(". ä½†è¿™åŒæ ·ä¼šé€ æˆ"),t("strong",[s._v("å†…å­˜æµªè´¹")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("ä¼˜åŒ–:")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å‡å°‘å­—ç¬¦ä¸²é¢‘ç¹ä¿®æ”¹æ“ä½œå¦‚ append, setrange ç­‰. ç›´æ¥ä½¿ç”¨ set ä¿®æ”¹å­—ç¬¦ä¸², é™ä½é¢„åˆ†é…å¸¦æ¥çš„å†…å­˜æµªè´¹å’Œå†…å­˜ç¢ç‰‡åŒ–.")])]),s._v(" "),t("li",[t("strong",[s._v("å­—ç¬¦ä¸²é‡æ„")]),s._v(": ä¸ä¸€å®šæŠŠæ¯ä»½æ•°æ®ä½œä¸ºå­—ç¬¦ä¸²æ•´ä½“å­˜å‚¨, å¦‚ JSON æ•°æ®å¯ä»¥ä½¿ç”¨ hash ç»“æ„, ä½¿ç”¨"),t("strong",[s._v("äºŒçº§ç»“æ„")]),s._v("å­˜å‚¨ä¹Ÿèƒ½èŠ‚çœå†…å­˜.")])]),s._v(" "),t("h5",{attrs:{id:"_5-ç¼–ç ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-ç¼–ç ä¼˜åŒ–"}},[s._v("#")]),s._v(" 5.ç¼–ç ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("ç¼–ç å°±æ˜¯å…·ä½“ä½¿ç”¨å“ªç§"),t("strong",[s._v("åº•å±‚æ•°æ®ç»“æ„")]),s._v("æ¥å®ç°. ç¼–ç ä¸åŒå°†ç›´æ¥å½±å“æ•°æ®çš„å†…å­˜å ç”¨å’Œè¯»å†™æ•ˆç‡. é€šè¿‡ä¸åŒç¼–ç å®ç°"),t("strong",[s._v("æ•ˆç‡å’Œç©ºé—´çš„å¹³è¡¡")]),s._v(".")]),s._v(" "),t("p",[s._v("æ¯”å¦‚å­˜å‚¨åªæœ‰ 10 ä¸ªå…ƒç´ çš„"),t("strong",[s._v("åˆ—è¡¨")]),s._v(", å½“ä½¿ç”¨"),t("strong",[s._v("åŒå‘é“¾è¡¨")]),s._v("æ•°æ®ç»“æ„æ—¶, å¿…ç„¶éœ€è¦ç»´æŠ¤å¤§é‡çš„å†…éƒ¨å­—æ®µå¦‚: å‰ç½®æŒ‡é’ˆ, åç½®æŒ‡é’ˆ, æ•°æ®æŒ‡é’ˆç­‰, é€ æˆç©ºé—´æµªè´¹, å¦‚æœé‡‡ç”¨"),t("strong",[s._v("è¿ç»­çº¿æ€§å†…å­˜ç»“æ„")]),s._v("çš„å‹ç¼©åˆ—è¡¨(ziplist) å°†ä¼šèŠ‚çœå¤§é‡å†…å­˜è€Œç”±äºæ•°æ®é•¿åº¦è¾ƒå°, å­˜å–æ“ä½œæ—¶é—´å¤æ‚åº¦å³ä½¿ä¸º O(N^2) ä¹Ÿå¯ä»¥æ»¡è¶³è¦æ±‚. "),t("strong",[s._v("ziplist ç¼–ç ")]),s._v("æ˜¯åº”ç”¨èŒƒå›´æœ€å¹¿çš„ä¸€ç§, å¯ä»¥åˆ†åˆ«ä½œä¸º hash/ list / zset /ç±»å‹çš„åº•å±‚æ•°æ®ç»“æ„å®ç°. ziplist å°±æ˜¯"),t("strong",[s._v("æ•ˆç‡å’Œç©ºé—´çš„å¹³è¡¡")]),s._v("çš„é‡è¦ä½“ç°.")]),s._v(" "),t("p",[s._v("ç¼–ç ç±»å‹è½¬æ¢åœ¨ Redis å†™å…¥æ•°æ®æ—¶"),t("strong",[s._v("è‡ªåŠ¨å®Œæˆ")]),s._v(", è¿™ä¸ªè½¬æ¢è¿‡ç¨‹æ˜¯"),t("strong",[s._v("ä¸å¯é€†")]),s._v("çš„. è½¬æ¢è§„åˆ™åªèƒ½ä»"),t("strong",[s._v("å°å†…å­˜ç¼–ç å‘å¤§å†…å­˜ç¼–ç ")]),s._v("è½¬æ¢.")]),s._v(" "),t("p",[t("strong",[s._v("intset")]),s._v(" æ˜¯é›†åˆ(set) ç±»å‹ç¼–ç çš„ä¸€ç§, å½“ä½¿ç”¨"),t("strong",[s._v("æ•´æ•°é›†åˆ")]),s._v("æ—¶å°½é‡ä½¿ç”¨ intset ç¼–ç .")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ "),t("strong",[s._v("object encoding {key}")]),s._v(" å‘½ä»¤å¯ä»¥è·å–ç¼–ç ç±»å‹.")]),s._v(" "),t("h5",{attrs:{id:"_6-æ§åˆ¶é”®çš„æ•°é‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-æ§åˆ¶é”®çš„æ•°é‡"}},[s._v("#")]),s._v(" 6.æ§åˆ¶é”®çš„æ•°é‡")]),s._v(" "),t("p",[s._v("å½“ä½¿ç”¨ Redis å­˜å‚¨å¤§é‡æ•°æ®æ—¶, é€šå¸¸ä¼šå­˜åœ¨"),t("strong",[s._v("å¤§é‡é”®")]),s._v(", è¿‡å¤šçš„é”®åŒæ ·ä¼šæ¶ˆè€—å¤§é‡å†…å­˜.")]),s._v(" "),t("p",[s._v("å¯¹äºå­˜å‚¨ç›¸åŒçš„æ•°æ®å†…å®¹åˆ©ç”¨ Redis çš„æ•°æ®ç»“æ„"),t("strong",[s._v("é™ä½å¤–å±‚é”®çš„æ•°é‡")]),s._v(", å¯ä»¥èŠ‚çœå†…å­˜, å¦‚ä½¿ç”¨ hash ç»“æ„.")]),s._v(" "),t("p",[s._v("å¯¹äº"),t("strong",[s._v("å¤§é‡å°å¯¹è±¡")]),s._v("çš„å­˜å‚¨åœºæ™¯, éå¸¸é€‚åˆç”¨ "),t("strong",[s._v("ziplist ç¼–ç çš„ hash ç±»å‹")]),s._v("æ§åˆ¶é”®çš„è§„æ¨¡æ¥é™ä½å†…å­˜.")]),s._v(" "),t("h3",{attrs:{id:"redisé˜»å¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redisé˜»å¡"}},[s._v("#")]),s._v(" Redisé˜»å¡")]),s._v(" "),t("p",[s._v("Redis æ˜¯å•çº¿ç¨‹æ¶æ„, é˜»å¡èµ·æ¥å¾ˆéš¾å—, æ€»ç»“ä¸€ä¸‹å¯èƒ½å¯¼è‡´ Redis é˜»å¡çš„æƒ…å†µ. ä¸»è¦åˆ†ä¸ºå†…åœ¨åŸå› å’Œå¤–åœ¨åŸå› .")]),s._v(" "),t("p",[t("strong",[s._v("å†…åœ¨åŸå› ")]),s._v(": ä¸åˆç†çš„ä½¿ç”¨ API æˆ–æ•°æ®ç»“æ„, CPU é¥±å’Œ, æŒä¹…åŒ–é˜»å¡ç­‰.")]),s._v(" "),t("p",[t("strong",[s._v("å¤–åœ¨åŸå› ")]),s._v(": CPU ç«äº‰, å†…å­˜äº¤æ¢, ç½‘ç»œé—®é¢˜ç­‰.")]),s._v(" "),t("h4",{attrs:{id:"é˜»å¡å‘ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é˜»å¡å‘ç°"}},[s._v("#")]),s._v(" é˜»å¡å‘ç°")]),s._v(" "),t("p",[s._v("å¦‚ä½•å‘ç°é˜»å¡é—®é¢˜? å…ˆåˆ†ææ˜¯ä¸æ˜¯ Redis å†…åœ¨åŸå› , å¦‚æœä¸æ˜¯, å†å®šä½å¯èƒ½çš„å¤–åœ¨åŸå› .")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("åº”ç”¨å±‚å¯ä»¥åŠ å…¥å¼‚å¸¸ç›‘æ§é€»è¾‘")]),s._v(", æ¯”å¦‚å¼•å…¥æ—¥å¿—ç³»ç»Ÿ, ç»Ÿè®¡é˜»å¡çš„æƒ…å†µ.")]),s._v(" "),t("li",[s._v("å¯ä»¥å€ŸåŠ©ä¸€äº› Redis ç›‘æ§ç³»ç»Ÿè¿›è¡Œé˜»å¡ç›‘æ§.")]),s._v(" "),t("li",[s._v("å¯ä»¥é€šè¿‡å®šæœŸåˆ†æ Redis æ—¥å¿—çš„æ–¹å¼æ¥å‘ç°é˜»å¡çš„é—®é¢˜.")]),s._v(" "),t("li",[s._v("ä½¿ç”¨ Redis æä¾›çš„æ…¢æŸ¥è¯¢åŠŸèƒ½è¿›è¡Œæ…¢æŸ¥è¯¢åˆ†æ, å¦‚ slowlog get {n} è·å–æ…¢æŸ¥è¯¢è®°å½•. ä½†æ…¢æŸ¥è¯¢åªè®°å½•å‘½ä»¤æ‰§è¡Œçš„æ—¶é—´, è€Œé˜»å¡åŸå› æ˜¯å¤šç§å¤šæ ·çš„.")])]),s._v(" "),t("h4",{attrs:{id:"é˜»å¡å†…åœ¨åŸå› "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é˜»å¡å†…åœ¨åŸå› "}},[s._v("#")]),s._v(" é˜»å¡å†…åœ¨åŸå› ")]),s._v(" "),t("h5",{attrs:{id:"_1-apiæˆ–æ•°æ®ç»“æ„ä½¿ç”¨ä¸åˆç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-apiæˆ–æ•°æ®ç»“æ„ä½¿ç”¨ä¸åˆç†"}},[s._v("#")]),s._v(" 1.APIæˆ–æ•°æ®ç»“æ„ä½¿ç”¨ä¸åˆç†")]),s._v(" "),t("p",[s._v("æœ‰çš„å‘½ä»¤æ—¶é—´å¤æ‚åº¦æ˜¯ "),t("strong",[s._v("O(N)")]),s._v(" çš„, å¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§("),t("strong",[s._v("å¤§å¯¹è±¡")]),s._v("), å°±å®¹æ˜“é€ æˆé˜»å¡. "),t("strong",[s._v("åº”è¯¥é¿å…åœ¨å¤§å¯¹è±¡ä¸Šæ‰§è¡Œå¤æ‚åº¦è¶…è¿‡ O(N) çš„å‘½ä»¤.")])]),s._v(" "),t("p",[s._v("è¿™ç±»åŸå› é€‚åˆç”¨"),t("strong",[s._v("æ…¢æŸ¥è¯¢è®°å½•")]),s._v("æ¥è¿›è¡ŒæŸ¥æ‰¾. å¤§å¯¹è±¡çš„æŸ¥æ‰¾å¯ä»¥é€šè¿‡ "),t("strong",[s._v("redis-cli --bigkeys")]),s._v(" å‘½ä»¤è¿›è¡Œæ‰«æå¯»æ‰¾.")]),s._v(" "),t("p",[s._v("è§£å†³æ–¹æ³•:")]),s._v(" "),t("ul",[t("li",[s._v("ä¿®æ”¹ä¸ºæ—¶é—´"),t("strong",[s._v("å¤æ‚åº¦è¾ƒä½")]),s._v("çš„ç®—æ³•. æ¯”å¦‚ hegtall ä¿®æ”¹ä¸º hmget, ç¦ç”¨ keys, sort å‘½ä»¤ç­‰.")]),s._v(" "),t("li",[t("strong",[s._v("è°ƒæ•´å¤§å¯¹è±¡")]),s._v(". å°†å¤§å¯¹è±¡æ•°æ®æ‹†åˆ†æˆå¤šä¸ªå°å¯¹è±¡, é˜²æ­¢ä¸€æ¬¡æ“ä½œè¯»å–è¿‡å¤šæ•°æ®.")])]),s._v(" "),t("h5",{attrs:{id:"_2-cpué¥±å’Œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cpué¥±å’Œ"}},[s._v("#")]),s._v(" 2.CPUé¥±å’Œ")]),s._v(" "),t("p",[s._v("Redis æ‰§è¡Œå‘½ä»¤åªä¼šç”¨ä¸€ä¸ª CPU, CPU é¥±å’ŒæŒ‡ Redis æŠŠå•æ ¸ CPU ä½¿ç”¨åˆ°äº†æ¥è¿‘ 100%. ä½¿ç”¨ "),t("strong",[s._v("top å‘½ä»¤")]),s._v("å¯ä»¥è¯†åˆ«å‡º Redis è¿›ç¨‹æ˜¯å¦å ç”¨äº†è¾ƒå¤š CPU.")]),s._v(" "),t("h5",{attrs:{id:"_3-æŒä¹…åŒ–é˜»å¡ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æŒä¹…åŒ–é˜»å¡ğŸŒŸ"}},[s._v("#")]),s._v(" 3.æŒä¹…åŒ–é˜»å¡ğŸŒŸ")]),s._v(" "),t("p",[s._v("æŒä¹…åŒ–è¿‡ç¨‹æŒºå¤šé€ æˆé˜»å¡çš„åŸå› .")]),s._v(" "),t("h6",{attrs:{id:"_1-forké˜»å¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-forké˜»å¡"}},[s._v("#")]),s._v(" (1)forké˜»å¡")]),s._v(" "),t("p",[s._v("fork æ“ä½œå‘ç”Ÿåœ¨"),t("strong",[s._v("æ‰§è¡Œ RDB æˆ– AOF çš„é‡å†™")]),s._v("æ—¶, ä¸»çº¿ç¨‹è°ƒç”¨ fork äº§ç”Ÿ"),t("strong",[s._v("å­è¿›ç¨‹")]),s._v("å®ŒæˆæŒä¹…åŒ–æ“ä½œ. è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå¯èƒ½é˜»å¡.")]),s._v(" "),t("p",[s._v("å¯ä»¥æ‰§è¡Œ "),t("strong",[s._v("info stats")]),s._v(" å‘½ä»¤è·å–åˆ° "),t("strong",[s._v("latest_fork_usec")]),s._v(" æŒ‡æ ‡æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡ fork æ“ä½œçš„è€—æ—¶.")]),s._v(" "),t("h6",{attrs:{id:"_2-aofåˆ·ç›˜é˜»å¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-aofåˆ·ç›˜é˜»å¡"}},[s._v("#")]),s._v(" (2)AOFåˆ·ç›˜é˜»å¡")]),s._v(" "),t("p",[s._v("å¼€å¯ AOF æŒä¹…åŒ–æ—¶, æ–‡ä»¶åˆ·ç›˜æ–¹å¼ä¸€èˆ¬é‡‡ç”¨æ¯ç§’ 1 æ¬¡, åå°çº¿ç¨‹æ¯ç§’å¯¹ AOF æ–‡ä»¶åš "),t("strong",[s._v("fsync")]),s._v(" æ“ä½œ. å½“ä¸»çº¿ç¨‹å‘ç°è·ç¦»ä¸Šä¸€æ¬¡çš„ fsync æˆåŠŸ"),t("strong",[s._v("è¶…è¿‡ 2 ç§’")]),s._v("æ—¶, ä¸ºäº†æ•°æ®å®‰å…¨æ€§å®ƒä¼š"),t("strong",[s._v("é˜»å¡")]),s._v("ç›´åˆ°åå°çº¿ç¨‹æ‰§è¡Œ fsync "),t("strong",[s._v("æˆåŠŸ")]),s._v(".")]),s._v(" "),t("p",[s._v("è¿™ç§é˜»å¡è¡Œä¸ºä¸»è¦æ˜¯ç”±"),t("strong",[s._v("ç¡¬ç›˜å‹åŠ›")]),s._v("å¼•èµ·çš„, æ¯”å¦‚å…¶ä»–è¿›ç¨‹æ­£åœ¨å¤§é‡å ç”¨ç¡¬ç›˜èµ„æº, å¯¼è‡´ Redis è¿›ç¨‹åˆ·ç›˜è¶…æ—¶. å¯ä»¥ä½¿ç”¨ "),t("strong",[s._v("iotop")]),s._v(" æŒ‡ä»¤æŸ¥çœ‹è¿›ç¨‹ä½¿ç”¨"),t("strong",[s._v("ç¡¬ç›˜èµ„æº")]),s._v("çš„æƒ…å†µ.")]),s._v(" "),t("h6",{attrs:{id:"_3-hugepageå†™æ“ä½œé˜»å¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-hugepageå†™æ“ä½œé˜»å¡"}},[s._v("#")]),s._v(" (3)HugePageå†™æ“ä½œé˜»å¡")]),s._v(" "),t("p",[s._v("å­è¿›ç¨‹åœ¨æ‰§è¡Œé‡å†™æœŸé—´åˆ©ç”¨ Linux å†™æ—¶å¤åˆ¶æŠ€æœ¯é™ä½å†…å­˜å¼€é”€, å› æ­¤åªæœ‰åœ¨å†™æ“ä½œçš„æ—¶å€™ Redis æ‰å¤åˆ¶è¦ä¿®æ”¹çš„å†…å­˜é¡µ.")]),s._v(" "),t("p",[s._v("å¯¹äº"),t("strong",[s._v("å¼€å¯äº† Transparent HugePage")]),s._v(" çš„æ“ä½œç³»ç»Ÿ, æ¯æ¬¡"),t("strong",[s._v("å†™å‘½ä»¤")]),s._v("å¼•èµ·çš„å¤åˆ¶å†…å­˜é¡µå•ä½ç”± 4K å˜ä¸º 2MB, å¢å¤§äº† 512 å€, ä¼š"),t("strong",[s._v("æ‹–æ…¢å†™æ“ä½œ")]),s._v("æ‰§è¡Œæ—¶é—´.")]),s._v(" "),t("h4",{attrs:{id:"é˜»å¡å¤–åœ¨åŸå› "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é˜»å¡å¤–åœ¨åŸå› "}},[s._v("#")]),s._v(" é˜»å¡å¤–åœ¨åŸå› ")]),s._v(" "),t("h5",{attrs:{id:"_1-cpuç«äº‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cpuç«äº‰"}},[s._v("#")]),s._v(" 1.CPUç«äº‰")]),s._v(" "),t("p",[s._v("Redis æ˜¯å…¸å‹çš„ CPU å¯†é›†å‹åº”ç”¨, ä¸å»ºè®®å’Œå…¶ä»–å¯†é›†å‹æœåŠ¡ä¸€èµ·éƒ¨ç½². å…¶ä»–è¿›ç¨‹å¯èƒ½ç«äº‰ CPU. å¦‚æœåšäº† CPU ç»‘å®š, é‚£ä¹ˆå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¼šå…±äº«ä½¿ç”¨åŒä¸€ä¸ª CPU, å­è¿›ç¨‹å ç”¨ CPU é€šå¸¸è¾ƒå¤§, å¯¹äºå¼€å¯äº†æŒä¹…åŒ–æˆ–è€…å‚ä¸å¤åˆ¶çš„ä¸»èŠ‚ç‚¹ä¸å»ºè®®ç»‘å®š CPU.")]),s._v(" "),t("h5",{attrs:{id:"_2-å†…å­˜äº¤æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜äº¤æ¢"}},[s._v("#")]),s._v(" 2.å†…å­˜äº¤æ¢")]),s._v(" "),t("p",[s._v("Redis æ˜¯åŸºäºå†…å­˜å·¥ä½œçš„, å¦‚æœ"),t("strong",[s._v("å‘ç”Ÿäº†å†…å­˜äº¤æ¢")]),s._v("é‚£å¯¹æ€§èƒ½å½±å“"),t("strong",[s._v("æå¤§")]),s._v(". æ’æŸ¥æ–¹å¼å¦‚ä¸‹.")]),s._v(" "),t("ul",[t("li",[s._v("æŸ¥è¯¢ Redis è¿›ç¨‹å·.")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6739")]),s._v(" info server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" process_id\nprocess_id:4476\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("æ ¹æ®è¿›ç¨‹å·æŸ¥çœ‹å†…å­˜äº¤æ¢ä¿¡æ¯.")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/4476/smaps "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Swap\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ä¸ºé˜²æ­¢å†…å­˜äº¤æ¢, éœ€è¦ä¿è¯æœºå™¨"),t("strong",[s._v("å†…å­˜å……è¶³")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_3-ç½‘ç»œé—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç½‘ç»œé—®é¢˜"}},[s._v("#")]),s._v(" 3.ç½‘ç»œé—®é¢˜")]),s._v(" "),t("p",[s._v("ç½‘ç»œä¹Ÿå¯èƒ½å‡ºç°é—®é¢˜å¯¼è‡´é˜»å¡, å¦‚: "),t("strong",[s._v("è¿æ¥æ‹’ç», ç½‘ç»œå»¶è¿Ÿ, ç½‘å¡è½¯ä¸­æ–­")]),s._v("ç­‰.")]),s._v(" "),t("h3",{attrs:{id:"redisè¿ç»´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redisè¿ç»´"}},[s._v("#")]),s._v(" Redisè¿ç»´")]),s._v(" "),t("p",[s._v("æ€»ç»“ä¸€ä¸‹ Redis è¿ç»´æŒ‡å—.")]),s._v(" "),t("h4",{attrs:{id:"linuxç›¸å…³ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linuxç›¸å…³ä¼˜åŒ–"}},[s._v("#")]),s._v(" Linuxç›¸å…³ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("Redis éƒ¨ç½²åœ¨ Linux ä¸Š, æ‰€ä»¥ Linux é…ç½®ä¹Ÿä¼šå½±å“ Redis æ€§èƒ½.")]),s._v(" "),t("ul",[t("li",[s._v("Transparent Huge Pages(THP) å»ºè®®å…³é—­æ‰.")]),s._v(" "),t("li",[s._v("å»ºè®®å¯¹ Redis æ‰€æœ‰èŠ‚ç‚¹æ‰€åœ¨æœºå™¨ä½¿ç”¨ "),t("strong",[s._v("NTP")]),s._v(" æœåŠ¡.")]),s._v(" "),t("li",[s._v("åˆç†è®¾ç½® ulimit ä¿è¯ç½‘ç»œè¿æ¥æ­£å¸¸.")]),s._v(" "),t("li",[s._v("åˆç†è®¾ç½® tcp-backlog å‚æ•°.")])]),s._v(" "),t("h4",{attrs:{id:"rediså®‰å…¨å»ºè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rediså®‰å…¨å»ºè®®"}},[s._v("#")]),s._v(" Rediså®‰å…¨å»ºè®®")]),s._v(" "),t("ul",[t("li",[s._v("éœ€è¦è®¾ç½® Redis å¯†ç .")]),s._v(" "),t("li",[s._v("åˆç†çš„é˜²ç«å¢™å¯ä»¥é˜²æ­¢æ”»å‡».")]),s._v(" "),t("li",[s._v("å¯ä»¥é€‚å½“é”™å¼€ Redis é»˜è®¤ç«¯å£å¯åŠ¨, é˜²æ­¢è¢«æ”»å‡».")])]),s._v(" "),t("h4",{attrs:{id:"rediséƒ¨ç½²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rediséƒ¨ç½²"}},[s._v("#")]),s._v(" Rediséƒ¨ç½²")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸€ä¸ªé—®é¢˜: ç”Ÿäº§ç¯å¢ƒä¸­çš„ Redis æ˜¯æ€ä¹ˆéƒ¨ç½²çš„?")])]),s._v(" "),t("p",[s._v("çœ‹çœ‹ä½ äº†è§£ä¸äº†è§£ä½ ä»¬å…¬å¸çš„ Redis ç”Ÿäº§é›†ç¾¤çš„éƒ¨ç½²æ¶æ„, å¦‚æœä½ ä¸äº†è§£, é‚£ä¹ˆç¡®å®ä½ å°±å¾ˆå¤±èŒäº†, ä½ çš„ Redis æ˜¯ä¸»ä»æ¶æ„? é›†ç¾¤æ¶æ„? ç”¨äº†å“ªç§é›†ç¾¤æ–¹æ¡ˆ? æœ‰æ²¡æœ‰åšé«˜å¯ç”¨ä¿è¯? æœ‰æ²¡æœ‰å¼€å¯æŒä¹…åŒ–æœºåˆ¶ç¡®ä¿å¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤? çº¿ä¸Š Redis ç»™å‡ ä¸ª G çš„å†…å­˜? è®¾ç½®äº†å“ªäº›å‚æ•°? å‹æµ‹åä½ ä»¬ Redis é›†ç¾¤æ‰¿è½½å¤šå°‘ QPS?")]),s._v(" "),t("p",[s._v("Demo: "),t("strong",[s._v("Redis cluster, 10 å°æœºå™¨, 5 å°æœºå™¨éƒ¨ç½²äº† Redis ä¸»å®ä¾‹, å¦å¤– 5 å°æœºå™¨éƒ¨ç½²äº† Redis çš„ä»å®ä¾‹")]),s._v(", æ¯ä¸ªä¸»å®ä¾‹æŒ‚äº†ä¸€ä¸ªä»å®ä¾‹, 5 ä¸ªèŠ‚ç‚¹å¯¹å¤–æä¾›è¯»å†™æœåŠ¡, "),t("strong",[s._v("æ¯ä¸ªèŠ‚ç‚¹çš„è¯»å†™é«˜å³° QPS å¯èƒ½å¯ä»¥è¾¾åˆ°æ¯ç§’ 5 ä¸‡, 5 å°æœºå™¨æœ€å¤šæ˜¯ 25 ä¸‡è¯»å†™è¯·æ±‚/s.")])]),s._v(" "),t("p",[s._v("æœºå™¨æ˜¯ä»€ä¹ˆé…ç½®? "),t("strong",[s._v("32G å†…å­˜+ 8 æ ¸ CPU + 1T ç£ç›˜")]),s._v(", ä½†æ˜¯åˆ†é…ç»™ Redis è¿›ç¨‹çš„æ˜¯ 10G å†…å­˜, ä¸€èˆ¬çº¿ä¸Šç”Ÿäº§ç¯å¢ƒ, Redis çš„å†…å­˜å°½é‡"),t("strong",[s._v("ä¸è¦è¶…è¿‡ 10G, è¶…è¿‡ 10G å¯èƒ½ä¼šæœ‰é—®é¢˜")]),s._v(".")]),s._v(" "),t("p",[s._v("5 å°æœºå™¨å¯¹å¤–æä¾›è¯»å†™, ä¸€å…±æœ‰ "),t("strong",[s._v("50G")]),s._v(" å†…å­˜.")]),s._v(" "),t("p",[s._v("å› ä¸ºæ¯ä¸ªä¸»å®ä¾‹éƒ½æŒ‚äº†ä¸€ä¸ªä»å®ä¾‹, æ‰€ä»¥æ˜¯é«˜å¯ç”¨çš„, ä»»ä½•ä¸€ä¸ªä¸»å®ä¾‹å®•æœº, éƒ½ä¼šè‡ªåŠ¨æ•…éšœè¿ç§», Redis ä»å®ä¾‹ä¼šè‡ªåŠ¨å˜æˆä¸»å®ä¾‹ç»§ç»­æä¾›è¯»å†™æœåŠ¡.")]),s._v(" "),t("h4",{attrs:{id:"å…¶ä»–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–"}},[s._v("#")]),s._v(" å…¶ä»–")]),s._v(" "),t("h5",{attrs:{id:"_1-bigkey"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-bigkey"}},[s._v("#")]),s._v(" 1.bigkey")]),s._v(" "),t("p",[s._v("bigkey å¯èƒ½é€ æˆæ•°æ®å€¾æ–œ, è¶…æ—¶é˜»å¡, ç½‘ç»œæ‹¥å¡, æ˜¯ Redis ç”Ÿäº§ç¯å¢ƒçš„ä¸€é¢—å®šæ—¶ç‚¸å¼¹. åˆ é™¤ bigkey é€šå¸¸ä½¿ç”¨"),t("strong",[s._v("æ¸è¿›å¼")]),s._v("éå†çš„æ–¹å¼è¿›è¡Œ, é˜²æ­¢å‡ºç°é˜»å¡.")]),s._v(" "),t("h5",{attrs:{id:"_2-çƒ­ç‚¹key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-çƒ­ç‚¹key"}},[s._v("#")]),s._v(" 2.çƒ­ç‚¹key")]),s._v(" "),t("p",[s._v("å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯, ä»£ç†, monitor, æŠ“åŒ…ç­‰æ–¹å¼æ‰¾åˆ°çƒ­ç‚¹ key è¿›è¡Œåˆ†æ.")]),s._v(" "),t("h4",{attrs:{id:"redisé…ç½®æ–‡ä»¶è¯¦è§£ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redisé…ç½®æ–‡ä»¶è¯¦è§£ğŸŒŸ"}},[s._v("#")]),s._v(" Redisé…ç½®æ–‡ä»¶è¯¦è§£ğŸŒŸ")]),s._v(" "),t("p",[s._v("æ³¨æ„: å¦‚æœæƒ³åœ¨ä¸€å°æœºå™¨ä¸Šä¸åŒç«¯å£å¯åŠ¨å¤šä¸ª Redis æœåŠ¡, å°±æŠŠåé¢çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸‹, åé¢åŠ ä¸Šé…ç½®æ–‡ä»¶è·¯å¾„å¯åŠ¨å³å¯. ç«¯å£å’Œæ•°æ®, æ—¥å¿—ç­‰æ”¹ä¸‹.")]),s._v(" "),t("p",[s._v("Redis é…ç½®æ–‡ä»¶æ ·ä¾‹:")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½®yesä½¿Redisä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("daemonize")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("yes")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“Redisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶, Redisé»˜è®¤ä¼šæŠŠpidå†™å…¥/var/run/redis.pidæ–‡ä»¶, å¯ä»¥é€šè¿‡pidfileæŒ‡å®š")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("pidfile")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/var/run/redis.pid")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redisç›‘å¬ç«¯å£, é»˜è®¤ç«¯å£ä¸º6379, å¦‚æœæŒ‡å®š0ç«¯å£, è¡¨ç¤ºRedisä¸ç›‘å¬TCPè¿æ¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6379")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç»‘å®šçš„ä¸»æœºåœ°å€, å¯ä»¥ç»‘å®šå•ä¸€æ¥å£, å¦‚æœæ²¡æœ‰ç»‘å®š, æ‰€æœ‰æ¥å£éƒ½ä¼šç›‘å¬åˆ°æ¥çš„è¿æ¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 127.0.0.1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Specify the path for the unix socket that will be used to listen for")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# incoming connections. There is no default, so Redis will not listen")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# on a unix socket when not specified.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unixsocket /tmp/redis.sock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unixsocketperm 755")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“å®¢æˆ·ç«¯é—²ç½®å¤šé•¿æ—¶é—´åå…³é—­è¿æ¥, å¦‚æœæŒ‡å®šä¸º0, è¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("timeout")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«, åŒ…å«: debug, verbose, notice, warning, é»˜è®¤ä¸ºverbose")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("loglevel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("verbose")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ—¥å¿—è®°å½•æ–¹å¼, é»˜è®¤ä¸ºæ ‡å‡†è¾“å‡º")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("logfile")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/var/log/redis.log")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®æ•°æ®åº“çš„æ•°é‡, é»˜è®¤æ•°æ®åº“ä¸º0, å¯ä»¥ä½¿ç”¨select <dbid>å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dbidæ˜¯ä»0åˆ°'databases'-1çš„æ•°ç›®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("databases")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("16")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################ SNAPSHOTTING #################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…, æœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œ, å°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶, å¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Save the DB on disk:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   save <seconds> <changes>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Will save the DB if both the given number of seconds and the given")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   number of write operations against the DB occurred.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   æ»¡è¶³ä»¥ä¸‹æ¡ä»¶å°†ä¼šåŒæ­¥æ•°æ®:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   900ç§’(15åˆ†é’Ÿ)å†…æœ‰1ä¸ªæ›´æ”¹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   300ç§’(5åˆ†é’Ÿ)å†…æœ‰10ä¸ªæ›´æ”¹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   60ç§’å†…æœ‰10000ä¸ªæ›´æ”¹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Note: å¯ä»¥æŠŠæ‰€æœ‰â€œsaveâ€è¡Œæ³¨é‡Šæ‰, è¿™æ ·å°±å–æ¶ˆåŒæ­¥æ“ä½œäº†")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("save")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("900 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("save")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("300 10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("save")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("60 10000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®, é»˜è®¤ä¸ºyes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("rdbcompression")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("yes")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶å, é»˜è®¤å€¼ä¸ºdump.rdb")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dbfilename")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/usr/local/redis/dump.rdb")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å·¥ä½œç›®å½•.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½•, æ–‡ä»¶åç”±ä¸Šä¸€ä¸ªdbfilenameé…ç½®é¡¹æŒ‡å®š")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„: åªèƒ½æŒ‡å®šä¸€ä¸ªç›®å½•, ä¸èƒ½æŒ‡å®šæ–‡ä»¶å")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/usr/local/redis")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# å¤åˆ¶ç›¸å…³ #################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸»ä»å¤åˆ¶. ä½¿ç”¨slaveofä» RedisæœåŠ¡å™¨å¤åˆ¶ä¸€ä¸ªRediså®ä¾‹. æ³¨æ„, è¯¥é…ç½®ä»…é™äºå½“å‰slaveæœ‰æ•ˆ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®å½“æœ¬æœºä¸ºslavæœåŠ¡æ—¶, è®¾ç½®masteræœåŠ¡çš„ipåœ°å€åŠç«¯å£, åœ¨Rediså¯åŠ¨æ—¶, å®ƒä¼šè‡ªåŠ¨ä»masterè¿›è¡Œæ•°æ®åŒæ­¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# slaveof <masterip> <masterport>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“masteræœåŠ¡è®¾ç½®äº†å¯†ç ä¿æŠ¤æ—¶, slaveæœåŠ¡è¿æ¥masterçš„å¯†ç ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# ä¸‹æ–‡çš„"requirepass"é…ç½®é¡¹å¯ä»¥æŒ‡å®šå¯†ç ')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# masterauth <master-password>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# When a slave lost the connection with the master, or when the replication")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is still in progress, the slave can act in two different ways:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1) if slave-serve-stale-data is set to 'yes' (the default) the slave will")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    still reply to client requests, possibly with out of data data, or the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    data set may just be empty if this is the first synchronization.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2) if slave-serve-stale data is set to 'no' the slave will reply with")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    an error "SYNC with master in progress" to all the kind of commands')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    but to INFO and SLAVEOF.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("slave-serve-stale-data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("yes")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Slaves send PINGs to server in a predefined interval. It's possible to change")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# this interval with the repl_ping_slave_period option. The default value is 10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# seconds.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# repl-ping-slave-period 10")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The following option sets a timeout for both Bulk transfer I/O timeout and")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# master data or ping response timeout. The default value is 60 seconds.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is important to make sure that this value is greater than the value")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# specified for repl-ping-slave-period otherwise a timeout will be detected")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# every time there is low traffic between the master and the slave.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# repl-timeout 60")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################## SECURITY ###################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®Redisè¿æ¥å¯†ç , å¦‚æœé…ç½®äº†è¿æ¥å¯†ç , å®¢æˆ·ç«¯åœ¨è¿æ¥Redisæ—¶éœ€è¦é€šè¿‡auth <password>å‘½ä»¤æä¾›å¯†ç , é»˜è®¤å…³é—­")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# requirepass foobared")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Command renaming.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is possilbe to change the name of dangerous commands in a shared")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# environment. For instance the CONFIG command may be renamed into something")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# of hard to guess so that it will be still available for internal-use")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tools but not available for general clients.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Example:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is also possilbe to completely kill a command renaming it into")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# an empty string:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# rename-command CONFIG ""')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################### LIMITS ####################################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°, é»˜è®¤æ— é™åˆ¶, Rediså¯ä»¥åŒæ—¶æ‰“å¼€çš„å®¢æˆ·ç«¯è¿æ¥æ•°ä¸ºRedisè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°, ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœè®¾ç½®maxclients 0, è¡¨ç¤ºä¸ä½œé™åˆ¶. å½“å®¢æˆ·ç«¯è¿æ¥æ•°åˆ°è¾¾é™åˆ¶æ—¶, Redisä¼šå…³é—­æ–°çš„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯è¿”å›max Number of clients reachedé”™è¯¯ä¿¡æ¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxclients 128")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't use more memory than the specified amount of bytes.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# When the memory limit is reached Redis will try to remove keys with an")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# EXPIRE set. It will try to start freeing keys that are going to expire")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# in little time and preserve keys with a longer time to live.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis will also try to remove objects from free lists if possible.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If all this fails, Redis will start to reply with errors to commands")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# that will use more memory, like SET, LPUSH, and so on, and will continue")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to reply to most read-only commands like GET.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# WARNING: maxmemory can be a good idea mainly if you want to use Redis as a")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'state' server or cache, not as a real DB. When Redis is used as a real")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# database the memory usage will grow over the weeks, it will be obvious if")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# it is going to use too much memory in the long run, and you'll have the time")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to upgrade. With maxmemory after the limit is reached you'll start to get")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errors for write operations, and this may even lead to DB inconsistency.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šRedisæœ€å¤§å†…å­˜é™åˆ¶, Redisåœ¨å¯åŠ¨æ—¶ä¼šæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­, è¾¾åˆ°æœ€å¤§å†…å­˜å, Redisä¼šå…ˆå°è¯•æ¸…é™¤å·²åˆ°æœŸæˆ–å³å°†åˆ°æœŸçš„Key, ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“æ­¤æ–¹æ³•å¤„ç†å, ä»ç„¶åˆ°è¾¾æœ€å¤§å†…å­˜è®¾ç½®, å°†æ— æ³•å†è¿›è¡Œå†™å…¥æ“ä½œ, ä½†ä»ç„¶å¯ä»¥è¿›è¡Œè¯»å–æ“ä½œ. ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redisæ–°çš„vmæœºåˆ¶, ä¼šæŠŠKeyå­˜æ”¾å†…å­˜, Valueä¼šå­˜æ”¾åœ¨swapåŒº")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxmemory <bytes>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is reached? You can select among five behavior:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# volatile-lru -> remove the key with an expire set using an LRU algorithm")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# allkeys-lru -> remove any key accordingly to the LRU algorithm")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# volatile-random -> remove a random key with an expire set")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# allkeys->random -> remove a random key, any key")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# volatile-ttl -> remove the key with the nearest expire time (minor TTL)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# noeviction -> don't expire at all, just return an error on write operations")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note: with all the kind of policies, Redis will return an error on write")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       operations, when there are not suitable keys for eviction.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       At the date of writing this commands are: set setnx setex append")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       getset mset msetnx exec sort")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default is:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxmemory-policy volatile-lru")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# LRU and minimal TTL algorithms are not precise algorithms but approximated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# algorithms (in order to save memory), so you can select as well the sample")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# size to check. For instance for default Redis will check three keys and")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pick the one that was used less recently, you can change the sample size")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# using the following configuration directive.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxmemory-samples 3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############################## APPEND ONLY MODE ###############################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that you can have both the async dumps and the append only file if you")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# like (you have to comment the "save" statements above to disable the dumps).')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Still if append only mode is enabled Redis will load the data from the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# log file at startup ignoring the dump.rdb file.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ˜¯å¦åœ¨æ¯æ¬¡æ›´æ–°æ“ä½œåè¿›è¡Œæ—¥å¿—è®°å½•, Redisåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼‚æ­¥çš„æŠŠæ•°æ®å†™å…¥ç£ç›˜, å¦‚æœä¸å¼€å¯, å¯èƒ½ä¼šåœ¨æ–­ç”µæ—¶å¯¼è‡´ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ä¸¢å¤±. ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å› ä¸ºredisæœ¬èº«åŒæ­¥æ•°æ®æ–‡ä»¶æ˜¯æŒ‰ä¸Šé¢saveæ¡ä»¶æ¥åŒæ­¥çš„, æ‰€ä»¥æœ‰çš„æ•°æ®ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…åªå­˜åœ¨äºå†…å­˜ä¸­. é»˜è®¤ä¸ºno")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# log file in background when it gets too big.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("appendonly")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("no")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ›´æ–°æ—¥å¿—æ–‡ä»¶å, é»˜è®¤ä¸ºappendonly.aof")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfilename appendonly.aof")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The fsync() call tells the Operating System to actually write data on disk")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# instead to wait for more data in the output buffer. Some OS will really flush ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# data on disk, some other OS will just try to do it ASAP.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ›´æ–°æ—¥å¿—æ¡ä»¶, å…±æœ‰3ä¸ªå¯é€‰å€¼: ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# no:è¡¨ç¤ºç­‰æ“ä½œç³»ç»Ÿè¿›è¡Œæ•°æ®ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜(å¿«)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# always:è¡¨ç¤ºæ¯æ¬¡æ›´æ–°æ“ä½œåæ‰‹åŠ¨è°ƒç”¨fsync()å°†æ•°æ®å†™åˆ°ç£ç›˜(æ…¢, å®‰å…¨)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# everysec:è¡¨ç¤ºæ¯ç§’åŒæ­¥ä¸€æ¬¡(æŠ˜è¡·, é»˜è®¤å€¼)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("appendfsync")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("everysec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfsync no")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# When the AOF fsync policy is set to always or everysec, and a background")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# saving process (a background save or AOF log background rewriting) is")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# performing a lot of I/O against the disk, in some Linux configurations")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis may block too long on the fsync() call. Note that there is no fix for")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# this currently, as even performing fsync in a different thread will block")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# our synchronous write(2) call.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# In order to mitigate this problem it's possible to use the following option")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# that will prevent fsync() from being called in the main process while a")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# BGSAVE or BGREWRITEAOF is in progress.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This means that while another child is saving the durability of Redis is")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# the same as "appendfsync none", that in pratical terms means that it is')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# possible to lost up to 30 seconds of log in the worst scenario (with the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# default Linux settings).")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# If you have latency problems turn this to "yes". Otherwise leave it as')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# "no" that is the safest pick from the point of view of durability.')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("no-appendfsync-on-rewrite")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("no")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Automatic rewrite of the append only file.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis is able to automatically rewrite the log file implicitly calling")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# BGREWRITEAOF when the AOF log size will growth by the specified percentage.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is how it works: Redis remembers the size of the AOF file after the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# latest rewrite (or if no rewrite happened since the restart, the size of")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the AOF at startup is used).")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This base size is compared to the current size. If the current size is")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bigger than the specified percentage, the rewrite is triggered. Also")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you need to specify a minimal size for the AOF file to be rewritten, this")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is useful to avoid rewriting the AOF file even if the percentage increase")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is reached but it is still pretty small.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Specify a precentage of zero in order to disable the automatic AOF")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rewrite feature.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("auto-aof-rewrite-percentage")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("auto-aof-rewrite-min-size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("64mb")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################## SLOW LOG ###################################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The Redis Slow Log is a system to log queries that exceeded a specified")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# execution time. The execution time does not include the I/O operations")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# like talking with the client, sending the reply and so forth,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# but just the time needed to actually execute the command (this is the only")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stage of command execution where the thread is blocked and can not serve")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# other requests in the meantime).")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can configure the slow log with two parameters: one tells Redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# what is the execution time, in microseconds, to exceed in order for the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# command to get logged, and the other parameter is the length of the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# slow log. When a new command is logged the oldest one is removed from the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# queue of logged commands.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The following time is expressed in microseconds, so 1000000 is equivalent")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to one second. Note that a negative number disables the slow log, while")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a value of zero forces the logging of every command.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("slowlog-log-slower-than")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# There is no limit to this length. Just be aware that it will consume memory.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can reclaim memory used by the slow log with SLOWLOG RESET.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("slowlog-max-len")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("1024")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################ VIRTUAL MEMORY ###############################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### WARNING! Virtual Memory is deprecated in Redis 2.4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### The use of Virtual Memory is strongly discouraged.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### WARNING! Virtual Memory is deprecated in Redis 2.4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### The use of Virtual Memory is strongly discouraged.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Virtual Memory allows Redis to work with datasets bigger than the actual")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# amount of RAM needed to hold the whole dataset in memory.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# In order to do so very used keys are taken in memory while the other keys")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# are swapped into a swap file, similarly to what operating systems do")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# with memory pages.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ˜¯å¦å¯ç”¨è™šæ‹Ÿå†…å­˜æœºåˆ¶, é»˜è®¤å€¼ä¸ºno, ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# VMæœºåˆ¶å°†æ•°æ®åˆ†é¡µå­˜æ”¾, ç”±Rediså°†è®¿é—®é‡è¾ƒå°‘çš„é¡µå³å†·æ•°æ®swapåˆ°ç£ç›˜ä¸Š, è®¿é—®å¤šçš„é¡µé¢ç”±ç£ç›˜è‡ªåŠ¨æ¢å‡ºåˆ°å†…å­˜ä¸­")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŠŠvm-enabledè®¾ç½®ä¸ºyes, æ ¹æ®éœ€è¦è®¾ç½®å¥½æ¥ä¸‹æ¥çš„ä¸‰ä¸ªVMå‚æ•°, å°±å¯ä»¥å¯åŠ¨VMäº†")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-enabled")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("no")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vm-enabled yes")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is the path of the Redis swap file. As you can guess, swap files")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# can't be shared by different Redis instances, so make sure to use a swap")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file for every redis process you are running. Redis will complain if the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# swap file is already in use.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redisäº¤æ¢æ–‡ä»¶æœ€å¥½çš„å­˜å‚¨æ˜¯SSD(å›ºæ€ç¡¬ç›˜)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è™šæ‹Ÿå†…å­˜æ–‡ä»¶è·¯å¾„, é»˜è®¤å€¼ä¸º/tmp/redis.swap, ä¸å¯å¤šä¸ªRediså®ä¾‹å…±äº«")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# *** WARNING *** if you are using a shared hosting the default of putting")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the swap file under /tmp is not secure. Create a dir with access granted")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# only to Redis user and configure Redis to create the swap file there.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-swap-file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/tmp/redis.swap")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# With vm-max-memory 0 the system will swap everything it can. Not a good")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# default, just specify the max amount of RAM you can in bytes, but it's")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# better to leave some margin. For instance specify an amount of RAM")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# that's more or less between 60 and 80% of your free RAM.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†æ‰€æœ‰å¤§äºvm-max-memoryçš„æ•°æ®å­˜å…¥è™šæ‹Ÿå†…å­˜, æ— è®ºvm-max-memoryè®¾ç½®å¤šå°‘, æ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½æ˜¯å†…å­˜å­˜å‚¨çš„(Redisçš„ç´¢å¼•æ•°æ®å°±æ˜¯keys)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¹Ÿå°±æ˜¯è¯´å½“vm-max-memoryè®¾ç½®ä¸º0çš„æ—¶å€™, å…¶å®æ˜¯æ‰€æœ‰valueéƒ½å­˜åœ¨äºç£ç›˜. é»˜è®¤å€¼ä¸º0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-max-memory")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis swapæ–‡ä»¶åˆ†æˆäº†å¾ˆå¤šçš„page, ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä¿å­˜åœ¨å¤šä¸ªpageä¸Šé¢, ä½†ä¸€ä¸ªpageä¸Šä¸èƒ½è¢«å¤šä¸ªå¯¹è±¡å…±äº«, vm-page-sizeæ˜¯è¦æ ¹æ®å­˜å‚¨çš„æ•°æ®å¤§å°æ¥è®¾å®šçš„. ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å»ºè®®å¦‚æœå­˜å‚¨å¾ˆå¤šå°å¯¹è±¡, pageå¤§å°æœ€åè®¾ç½®ä¸º32æˆ–64bytes; å¦‚æœå­˜å‚¨å¾ˆå¤§çš„å¯¹è±¡, åˆ™å¯ä»¥ä½¿ç”¨æ›´å¤§çš„page, å¦‚æœä¸ç¡®å®š, å°±ä½¿ç”¨é»˜è®¤å€¼")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-page-size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("32")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®swapæ–‡ä»¶ä¸­çš„pageæ•°é‡ç”±äºé¡µè¡¨(ä¸€ç§è¡¨ç¤ºé¡µé¢ç©ºé—²æˆ–ä½¿ç”¨çš„bitmap)æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„, åœ¨ç£ç›˜ä¸Šæ¯8ä¸ªpageså°†æ¶ˆè€—1byteçš„å†…å­˜")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# swapç©ºé—´æ€»å®¹é‡ä¸º vm-page-size * vm-pages")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# With the default of 32-bytes memory pages and 134217728 pages Redis will")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# use a 4 GB swap file, that will use 16 MB of RAM for the page table.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It's better to use the smallest acceptable value for your application,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# but the default is large in order to work in most conditions.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-pages")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("134217728")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Max number of VM I/O threads running at the same time.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This threads are used to read/write data from/to swap file, since they")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# also encode and decode objects from disk to memory or the reverse, a bigger")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# number of threads can help with big objects even if they can't help with")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# I/O itself as the physical device may not be able to couple with many")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# reads/writes operations at the same time.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®è®¿é—®swapæ–‡ä»¶çš„I/Oçº¿ç¨‹æ•°, æœ€åä¸è¦è¶…è¿‡æœºå™¨çš„æ ¸æ•°, å¦‚æœè®¾ç½®ä¸º0, é‚£ä¹ˆæ‰€æœ‰å¯¹swapæ–‡ä»¶çš„æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„, å¯èƒ½ä¼šé€ æˆæ¯”è¾ƒé•¿æ—¶é—´çš„å»¶è¿Ÿ, é»˜è®¤å€¼ä¸º4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("vm-max-threads")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("4")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############################### ADVANCED CONFIG ###############################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Hashes are encoded in a special way (much more memory efficient) when they")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# have at max a given numer of elements, and the biggest element does not")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exceed a given threshold. You can configure this limits with the following")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# configuration directives.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šåœ¨è¶…è¿‡ä¸€å®šçš„æ•°é‡æˆ–è€…æœ€å¤§çš„å…ƒç´ è¶…è¿‡æŸä¸€ä¸´ç•Œå€¼æ—¶, é‡‡ç”¨ä¸€ç§ç‰¹æ®Šçš„å“ˆå¸Œç®—æ³•")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("hash-max-zipmap-entries")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("512")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("hash-max-zipmap-value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("64")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Similarly to hashes, small lists are also encoded in a special way in order")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to save a lot of space. The special representation is only used when")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you are under the following limits:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("list-max-ziplist-entries")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("512")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("list-max-ziplist-value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("64")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Sets have a special encoding in just one case: when a set is composed")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# of just strings that happens to be integers in radix 10 in the range")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# of 64 bit signed integers.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The following configuration setting sets the limit in the size of the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# set in order to use this special memory saving encoding.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("set-max-intset-entries")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("512")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Similarly to hashes and lists, sorted sets are also specially encoded in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# order to save a lot of space. This encoding is only used when the length and")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# elements of a sorted set are below the following limits:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("zset-max-ziplist-entries")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("128")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("zset-max-ziplist-value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("64")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# order to help rehashing the main Redis hash table (the one mapping top-level")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# keys to values). The hash table implementation redis uses (see dict.c)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# performs a lazy rehashing: the more operation you run into an hash table")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# that is rhashing, the more rehashing "steps" are performed, so if the')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server is idle the rehashing is never complete and some more memory is used")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# by the hash table.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default is to use this millisecond 10 times every second in order to")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# active rehashing the main dictionaries, freeing memory when possible.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If unsure:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# use "activerehashing no" if you have hard latency requirements and it is')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# not a good thing in your environment that Redis can reply form time to time")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to queries with 2 milliseconds delay.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šæ˜¯å¦æ¿€æ´»é‡ç½®å“ˆå¸Œ, é»˜è®¤ä¸ºå¼€å¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("activerehashing")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("yes")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################## INCLUDES ###################################")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šåŒ…å«å…¶ä»–çš„é…ç½®æ–‡ä»¶, å¯ä»¥åœ¨åŒä¸€ä¸»æœºä¸Šå¤šä¸ªRediså®ä¾‹ä¹‹é—´ä½¿ç”¨åŒä¸€ä»½é…ç½®æ–‡ä»¶, è€ŒåŒæ—¶å„å®ä¾‹åˆæ‹¥æœ‰è‡ªå·±çš„ç‰¹å®šé…ç½®æ–‡ä»¶")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include /path/to/local.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include /path/to/other.conf")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br"),t("span",{staticClass:"line-number"},[s._v("200")]),t("br"),t("span",{staticClass:"line-number"},[s._v("201")]),t("br"),t("span",{staticClass:"line-number"},[s._v("202")]),t("br"),t("span",{staticClass:"line-number"},[s._v("203")]),t("br"),t("span",{staticClass:"line-number"},[s._v("204")]),t("br"),t("span",{staticClass:"line-number"},[s._v("205")]),t("br"),t("span",{staticClass:"line-number"},[s._v("206")]),t("br"),t("span",{staticClass:"line-number"},[s._v("207")]),t("br"),t("span",{staticClass:"line-number"},[s._v("208")]),t("br"),t("span",{staticClass:"line-number"},[s._v("209")]),t("br"),t("span",{staticClass:"line-number"},[s._v("210")]),t("br"),t("span",{staticClass:"line-number"},[s._v("211")]),t("br"),t("span",{staticClass:"line-number"},[s._v("212")]),t("br"),t("span",{staticClass:"line-number"},[s._v("213")]),t("br"),t("span",{staticClass:"line-number"},[s._v("214")]),t("br"),t("span",{staticClass:"line-number"},[s._v("215")]),t("br"),t("span",{staticClass:"line-number"},[s._v("216")]),t("br"),t("span",{staticClass:"line-number"},[s._v("217")]),t("br"),t("span",{staticClass:"line-number"},[s._v("218")]),t("br"),t("span",{staticClass:"line-number"},[s._v("219")]),t("br"),t("span",{staticClass:"line-number"},[s._v("220")]),t("br"),t("span",{staticClass:"line-number"},[s._v("221")]),t("br"),t("span",{staticClass:"line-number"},[s._v("222")]),t("br"),t("span",{staticClass:"line-number"},[s._v("223")]),t("br"),t("span",{staticClass:"line-number"},[s._v("224")]),t("br"),t("span",{staticClass:"line-number"},[s._v("225")]),t("br"),t("span",{staticClass:"line-number"},[s._v("226")]),t("br"),t("span",{staticClass:"line-number"},[s._v("227")]),t("br"),t("span",{staticClass:"line-number"},[s._v("228")]),t("br"),t("span",{staticClass:"line-number"},[s._v("229")]),t("br"),t("span",{staticClass:"line-number"},[s._v("230")]),t("br"),t("span",{staticClass:"line-number"},[s._v("231")]),t("br"),t("span",{staticClass:"line-number"},[s._v("232")]),t("br"),t("span",{staticClass:"line-number"},[s._v("233")]),t("br"),t("span",{staticClass:"line-number"},[s._v("234")]),t("br"),t("span",{staticClass:"line-number"},[s._v("235")]),t("br"),t("span",{staticClass:"line-number"},[s._v("236")]),t("br"),t("span",{staticClass:"line-number"},[s._v("237")]),t("br"),t("span",{staticClass:"line-number"},[s._v("238")]),t("br"),t("span",{staticClass:"line-number"},[s._v("239")]),t("br"),t("span",{staticClass:"line-number"},[s._v("240")]),t("br"),t("span",{staticClass:"line-number"},[s._v("241")]),t("br"),t("span",{staticClass:"line-number"},[s._v("242")]),t("br"),t("span",{staticClass:"line-number"},[s._v("243")]),t("br"),t("span",{staticClass:"line-number"},[s._v("244")]),t("br"),t("span",{staticClass:"line-number"},[s._v("245")]),t("br"),t("span",{staticClass:"line-number"},[s._v("246")]),t("br"),t("span",{staticClass:"line-number"},[s._v("247")]),t("br"),t("span",{staticClass:"line-number"},[s._v("248")]),t("br"),t("span",{staticClass:"line-number"},[s._v("249")]),t("br"),t("span",{staticClass:"line-number"},[s._v("250")]),t("br"),t("span",{staticClass:"line-number"},[s._v("251")]),t("br"),t("span",{staticClass:"line-number"},[s._v("252")]),t("br"),t("span",{staticClass:"line-number"},[s._v("253")]),t("br"),t("span",{staticClass:"line-number"},[s._v("254")]),t("br"),t("span",{staticClass:"line-number"},[s._v("255")]),t("br"),t("span",{staticClass:"line-number"},[s._v("256")]),t("br"),t("span",{staticClass:"line-number"},[s._v("257")]),t("br"),t("span",{staticClass:"line-number"},[s._v("258")]),t("br"),t("span",{staticClass:"line-number"},[s._v("259")]),t("br"),t("span",{staticClass:"line-number"},[s._v("260")]),t("br"),t("span",{staticClass:"line-number"},[s._v("261")]),t("br"),t("span",{staticClass:"line-number"},[s._v("262")]),t("br"),t("span",{staticClass:"line-number"},[s._v("263")]),t("br"),t("span",{staticClass:"line-number"},[s._v("264")]),t("br"),t("span",{staticClass:"line-number"},[s._v("265")]),t("br"),t("span",{staticClass:"line-number"},[s._v("266")]),t("br"),t("span",{staticClass:"line-number"},[s._v("267")]),t("br"),t("span",{staticClass:"line-number"},[s._v("268")]),t("br"),t("span",{staticClass:"line-number"},[s._v("269")]),t("br"),t("span",{staticClass:"line-number"},[s._v("270")]),t("br"),t("span",{staticClass:"line-number"},[s._v("271")]),t("br"),t("span",{staticClass:"line-number"},[s._v("272")]),t("br"),t("span",{staticClass:"line-number"},[s._v("273")]),t("br"),t("span",{staticClass:"line-number"},[s._v("274")]),t("br"),t("span",{staticClass:"line-number"},[s._v("275")]),t("br"),t("span",{staticClass:"line-number"},[s._v("276")]),t("br"),t("span",{staticClass:"line-number"},[s._v("277")]),t("br"),t("span",{staticClass:"line-number"},[s._v("278")]),t("br"),t("span",{staticClass:"line-number"},[s._v("279")]),t("br"),t("span",{staticClass:"line-number"},[s._v("280")]),t("br"),t("span",{staticClass:"line-number"},[s._v("281")]),t("br"),t("span",{staticClass:"line-number"},[s._v("282")]),t("br"),t("span",{staticClass:"line-number"},[s._v("283")]),t("br"),t("span",{staticClass:"line-number"},[s._v("284")]),t("br"),t("span",{staticClass:"line-number"},[s._v("285")]),t("br"),t("span",{staticClass:"line-number"},[s._v("286")]),t("br"),t("span",{staticClass:"line-number"},[s._v("287")]),t("br"),t("span",{staticClass:"line-number"},[s._v("288")]),t("br"),t("span",{staticClass:"line-number"},[s._v("289")]),t("br"),t("span",{staticClass:"line-number"},[s._v("290")]),t("br"),t("span",{staticClass:"line-number"},[s._v("291")]),t("br"),t("span",{staticClass:"line-number"},[s._v("292")]),t("br"),t("span",{staticClass:"line-number"},[s._v("293")]),t("br"),t("span",{staticClass:"line-number"},[s._v("294")]),t("br"),t("span",{staticClass:"line-number"},[s._v("295")]),t("br"),t("span",{staticClass:"line-number"},[s._v("296")]),t("br"),t("span",{staticClass:"line-number"},[s._v("297")]),t("br"),t("span",{staticClass:"line-number"},[s._v("298")]),t("br"),t("span",{staticClass:"line-number"},[s._v("299")]),t("br"),t("span",{staticClass:"line-number"},[s._v("300")]),t("br"),t("span",{staticClass:"line-number"},[s._v("301")]),t("br"),t("span",{staticClass:"line-number"},[s._v("302")]),t("br"),t("span",{staticClass:"line-number"},[s._v("303")]),t("br"),t("span",{staticClass:"line-number"},[s._v("304")]),t("br"),t("span",{staticClass:"line-number"},[s._v("305")]),t("br"),t("span",{staticClass:"line-number"},[s._v("306")]),t("br"),t("span",{staticClass:"line-number"},[s._v("307")]),t("br"),t("span",{staticClass:"line-number"},[s._v("308")]),t("br"),t("span",{staticClass:"line-number"},[s._v("309")]),t("br"),t("span",{staticClass:"line-number"},[s._v("310")]),t("br"),t("span",{staticClass:"line-number"},[s._v("311")]),t("br"),t("span",{staticClass:"line-number"},[s._v("312")]),t("br"),t("span",{staticClass:"line-number"},[s._v("313")]),t("br"),t("span",{staticClass:"line-number"},[s._v("314")]),t("br"),t("span",{staticClass:"line-number"},[s._v("315")]),t("br"),t("span",{staticClass:"line-number"},[s._v("316")]),t("br"),t("span",{staticClass:"line-number"},[s._v("317")]),t("br"),t("span",{staticClass:"line-number"},[s._v("318")]),t("br"),t("span",{staticClass:"line-number"},[s._v("319")]),t("br"),t("span",{staticClass:"line-number"},[s._v("320")]),t("br"),t("span",{staticClass:"line-number"},[s._v("321")]),t("br"),t("span",{staticClass:"line-number"},[s._v("322")]),t("br"),t("span",{staticClass:"line-number"},[s._v("323")]),t("br"),t("span",{staticClass:"line-number"},[s._v("324")]),t("br"),t("span",{staticClass:"line-number"},[s._v("325")]),t("br"),t("span",{staticClass:"line-number"},[s._v("326")]),t("br"),t("span",{staticClass:"line-number"},[s._v("327")]),t("br"),t("span",{staticClass:"line-number"},[s._v("328")]),t("br"),t("span",{staticClass:"line-number"},[s._v("329")]),t("br"),t("span",{staticClass:"line-number"},[s._v("330")]),t("br"),t("span",{staticClass:"line-number"},[s._v("331")]),t("br"),t("span",{staticClass:"line-number"},[s._v("332")]),t("br"),t("span",{staticClass:"line-number"},[s._v("333")]),t("br"),t("span",{staticClass:"line-number"},[s._v("334")]),t("br"),t("span",{staticClass:"line-number"},[s._v("335")]),t("br"),t("span",{staticClass:"line-number"},[s._v("336")]),t("br"),t("span",{staticClass:"line-number"},[s._v("337")]),t("br"),t("span",{staticClass:"line-number"},[s._v("338")]),t("br"),t("span",{staticClass:"line-number"},[s._v("339")]),t("br"),t("span",{staticClass:"line-number"},[s._v("340")]),t("br"),t("span",{staticClass:"line-number"},[s._v("341")]),t("br"),t("span",{staticClass:"line-number"},[s._v("342")]),t("br"),t("span",{staticClass:"line-number"},[s._v("343")]),t("br"),t("span",{staticClass:"line-number"},[s._v("344")]),t("br"),t("span",{staticClass:"line-number"},[s._v("345")]),t("br"),t("span",{staticClass:"line-number"},[s._v("346")]),t("br"),t("span",{staticClass:"line-number"},[s._v("347")]),t("br"),t("span",{staticClass:"line-number"},[s._v("348")]),t("br"),t("span",{staticClass:"line-number"},[s._v("349")]),t("br"),t("span",{staticClass:"line-number"},[s._v("350")]),t("br"),t("span",{staticClass:"line-number"},[s._v("351")]),t("br"),t("span",{staticClass:"line-number"},[s._v("352")]),t("br"),t("span",{staticClass:"line-number"},[s._v("353")]),t("br"),t("span",{staticClass:"line-number"},[s._v("354")]),t("br"),t("span",{staticClass:"line-number"},[s._v("355")]),t("br"),t("span",{staticClass:"line-number"},[s._v("356")]),t("br"),t("span",{staticClass:"line-number"},[s._v("357")]),t("br"),t("span",{staticClass:"line-number"},[s._v("358")]),t("br"),t("span",{staticClass:"line-number"},[s._v("359")]),t("br"),t("span",{staticClass:"line-number"},[s._v("360")]),t("br"),t("span",{staticClass:"line-number"},[s._v("361")]),t("br"),t("span",{staticClass:"line-number"},[s._v("362")]),t("br"),t("span",{staticClass:"line-number"},[s._v("363")]),t("br"),t("span",{staticClass:"line-number"},[s._v("364")]),t("br"),t("span",{staticClass:"line-number"},[s._v("365")]),t("br"),t("span",{staticClass:"line-number"},[s._v("366")]),t("br"),t("span",{staticClass:"line-number"},[s._v("367")]),t("br"),t("span",{staticClass:"line-number"},[s._v("368")]),t("br"),t("span",{staticClass:"line-number"},[s._v("369")]),t("br"),t("span",{staticClass:"line-number"},[s._v("370")]),t("br"),t("span",{staticClass:"line-number"},[s._v("371")]),t("br"),t("span",{staticClass:"line-number"},[s._v("372")]),t("br"),t("span",{staticClass:"line-number"},[s._v("373")]),t("br"),t("span",{staticClass:"line-number"},[s._v("374")]),t("br"),t("span",{staticClass:"line-number"},[s._v("375")]),t("br"),t("span",{staticClass:"line-number"},[s._v("376")]),t("br"),t("span",{staticClass:"line-number"},[s._v("377")]),t("br"),t("span",{staticClass:"line-number"},[s._v("378")]),t("br"),t("span",{staticClass:"line-number"},[s._v("379")]),t("br"),t("span",{staticClass:"line-number"},[s._v("380")]),t("br")])]),t("p",[s._v("â€")]),s._v(" "),t("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[s._v("ã€ŠRedis å¼€å‘ä¸è¿ç»´ã€‹")])])])}),[],!1,null,null,null);t.default=n.exports}}]);