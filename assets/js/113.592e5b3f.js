(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{441:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_109-异常"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_109-异常"}},[s._v("#")]),s._v(" 109.异常")]),s._v(" "),t("h4",{attrs:{id:"异常体系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常体系"}},[s._v("#")]),s._v(" 异常体系")]),s._v(" "),t("h5",{attrs:{id:"_1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[s._v("#")]),s._v(" 1.概述")]),s._v(" "),t("p",[s._v("异常对象"),t("strong",[s._v("都是派生于 Throwable 类")]),s._v("的一个实例, 异常体系如下所示.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563604669873-0823948.png",alt:"1563604669873"}})]),s._v(" "),t("p",[s._v("Throwable 可以用来表示任何可以作为异常抛出的"),t("strong",[s._v("类")]),s._v(", 分为两种: "),t("strong",[s._v("Error(错误)")]),s._v("  和 "),t("strong",[s._v("Exception(异常)")]),s._v(". 异常和错误的区别: "),t("strong",[s._v("异常可以被处理, 而错误无法处理")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("RuntimeException")]),s._v(" 下面是"),t("strong",[s._v("非受查异常")]),s._v("; "),t("strong",[s._v("IOException")]),s._v(" 下面是"),t("strong",[s._v("受查异常")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_2-error"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-error"}},[s._v("#")]),s._v(" 2.Error")]),s._v(" "),t("p",[s._v("Error 用来表示 JVM 无法处理的"),t("strong",[s._v("错误")]),s._v(", 对于所有的"),t("strong",[s._v("编译时期")]),s._v("的错误以及"),t("strong",[s._v("系统错误")]),s._v("都通过 Error 抛出.")]),s._v(" "),t("p",[s._v("如 "),t("strong",[s._v("NoClassDefFoundError")]),s._v(": 如果 ClassLoader 实例"),t("strong",[s._v("尝试加载")]),s._v("(通过正常的方法调用或使用 new 来创建新对象)"),t("strong",[s._v("类的时候却找不到类的定义")]),s._v(". 要查找的类在"),t("strong",[s._v("编译的时候是存在")]),s._v("的, "),t("strong",[s._v("运行的时候却找不到")]),s._v("了, 就会抛出 NoClassDefFoundError.")]),s._v(" "),t("h5",{attrs:{id:"_3-exception"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-exception"}},[s._v("#")]),s._v(" 3.Exception")]),s._v(" "),t("p",[t("strong",[s._v("Exception")]),s._v(" 是"),t("strong",[s._v("异常")]),s._v(", 主要分为两种:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("受查异常")]),s._v(": 程序**==编译阶段=="),t("strong",[s._v("发生异常, 必须使用 "),t("strong",[s._v("try-catch")]),s._v(" 或 "),t("strong",[s._v("throws")]),s._v(" 抛出进行处理, 否则无法通过编译; 受查就是")]),s._v("可以检查**到的, 与 "),t("strong",[s._v("IO 操作相关")]),s._v("的很多异常就是这个. 如 ClassNotFoundException, NoSuchFieldException, NoSuchMetodException 等. 除了 "),t("strong",[s._v("RuntimeException")]),s._v(" 及其子类以外, 都是受查异常.")]),s._v(" "),t("li",[t("strong",[s._v("非受查异常")]),s._v(": 程序**==运行时=="),t("strong",[s._v("错误, 例如除以 0 会引发 ArithmeticException. 是派生于 "),t("strong",[s._v("RuntimeException 类")]),s._v("的异常. 这种异常只能在程序运行过程中才能被触发, 所以是")]),s._v("不能检查**的异常.")])]),s._v(" "),t("p",[t("strong",[s._v("常见的 RuntimeException 表(非受查异常)")]),s._v(".")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("异常")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("类型")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("NullPointerException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("空指针引用异常")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ClassCastException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("类型强制转换异常")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("IllegalArgumentException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("传递非法参数异常")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ArithmeticException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("算术运算异常")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("IndexOutOfBoundsException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("下标越界异常")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("NumberFormatException")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("数字格式异常")])])])]),s._v(" "),t("h4",{attrs:{id:"基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),t("h5",{attrs:{id:"_1-throwable类api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-throwable类api"}},[s._v("#")]),s._v(" 1.Throwable类API")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造一个新的Throwable对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \t\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造一个新的带有特定详细描述信息的throwable对象, 习惯上所有派生的异常类都支持一个默认的构造器和一个带有详细描述信息的构造器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获得Throwable对象的详细描述信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h5",{attrs:{id:"_2-异常声明与抛出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-异常声明与抛出"}},[s._v("#")]),s._v(" 2.异常声明与抛出")]),s._v(" "),t("p",[t("strong",[s._v("受查异常")]),s._v("使用 "),t("strong",[s._v("throws")]),s._v(" 关键词"),t("strong",[s._v("声明")]),s._v("异常.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 声明多个可能抛出的异常")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Image")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("load")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FileNotFoundException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EOFException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("非受查异常")]),s._v("使用 "),t("strong",[s._v("throw")]),s._v(" 关键词"),t("strong",[s._v("抛出")]),s._v("异常.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EOFException")]),s._v(" e "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EOFException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 抛出异常对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EOFException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"File is not found."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h5",{attrs:{id:"_3-异常链"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-异常链"}},[s._v("#")]),s._v(" 3.异常链")]),s._v(" "),t("p",[t("strong",[s._v("再次抛出异常与异常链")])]),s._v(" "),t("p",[t("strong",[s._v("异常链")]),s._v("是指在进行一个"),t("strong",[s._v("异常处理时抛出了另外一个异常")]),s._v(", 从而产生了一个"),t("strong",[s._v("异常链条")]),s._v(", 大多用于将"),t("strong",[s._v("受查异常封装")]),s._v("成为非受查异常或者 RuntimeException. 如果封装原有一个异常而抛出另一个"),t("strong",[s._v("新的")]),s._v("异常时一定要"),t("strong",[s._v("包含原有")]),s._v("异常, 将原始异常设置为新异常的"),t("strong",[s._v("原因")]),s._v(", 这样处理程序就能通过 getCause() 和 initCause() 方法来访问异常最终的"),t("strong",[s._v("根源")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// access the database")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SQLException")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造新的异常对象")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" se "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"database error"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把原本异常e传入新异常对象")]),s._v("\n    se"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("initCause")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" se"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 抛出新异常对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("当捕获到异常时, 就能使用下面的语句重新得到原始异常:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" e "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" se"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCause")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("《Java Core》"),t("strong",[s._v("强烈建议")]),s._v("使用这种包装技术.")]),s._v(" "),t("h5",{attrs:{id:"_4-自定义异常类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-自定义异常类"}},[s._v("#")]),s._v(" 4.自定义异常类")]),s._v(" "),t("p",[s._v("自定义异常类只需"),t("strong",[s._v("继承 Exception")]),s._v(" 类或者其子类即可.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FileFormatException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FileFormatException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The file format is not good."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FileFormatException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" gripe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gripe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h5",{attrs:{id:"_5-覆写父类异常方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-覆写父类异常方法"}},[s._v("#")]),s._v(" 5.覆写父类异常方法")]),s._v(" "),t("p",[s._v("如果子类"),t("strong",[s._v("覆写")]),s._v("了父类的一个方法, "),t("strong",[s._v("子类")]),s._v("方法中声明的受查异常"),t("strong",[s._v("不能比父类方法中声明的异常更通用")]),s._v(", 即子类方法中可以抛出"),t("strong",[s._v("更特定")]),s._v("的异常, 或者根本不抛出任何异常.")]),s._v(" "),t("p",[s._v("如果父类方法没有抛出任何受查异常, 子类也不能抛出任何受查异常.")]),s._v(" "),t("p",[s._v("总而言之, "),t("strong",[s._v("父类异常范围最广泛")]),s._v(", 子类抛出的异常"),t("strong",[s._v("只能更加详细")]),s._v(". "),t("strong",[s._v("覆写的方法不能拓展父类异常的范围")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuperClass")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" someMethod "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//....")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SubClass")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuperClass")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Error子类方法比父类异常范围更大")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" someMethod "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\t\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//....")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SubClass")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuperClass")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果Exception3继承Exception1是可以的")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" someMethod "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\t\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//....")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h4",{attrs:{id:"try-catch-finally"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#try-catch-finally"}},[s._v("#")]),s._v(" try-catch-finally")]),s._v(" "),t("h5",{attrs:{id:"_1-概述-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述-2"}},[s._v("#")]),s._v(" 1.概述")]),s._v(" "),t("p",[s._v("不管是"),t("strong",[s._v("否有异常被捕获")]),s._v(", finally 子句中的代码"),t("strong",[s._v("都被执行")]),s._v(". 因此 finally 用于"),t("strong",[s._v("回收资源")]),s._v(". 涉及"),t("strong",[s._v("资源操作")]),s._v("的都需要执行! 比如文件打开, Redis 或 MySQL 连接等.")]),s._v(" "),t("p",[s._v("try 语句可以只有 finally 子句, 而没有 catch 子句.")]),s._v(" "),t("p",[s._v("finally 语句中"),t("strong",[s._v("可能也会产生异常")]),s._v("! 如资源关闭 close() 方法的异常. 此时原始的异常将会丢失, 转而抛出 close() 方法的异常.")]),s._v(" "),t("p",[t("strong",[s._v("注意")]),s._v(": 就算 "),t("strong",[s._v("try 语句中含有 return 语句, 那么 finally 语句依然会执行")]),s._v(". try 代码块中的 "),t("strong",[s._v("break 或 continue")]),s._v(" 语句也可能使控制权进入 finally 代码块.")]),s._v(" "),t("h5",{attrs:{id:"_2-带return的finally语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-带return的finally语句"}},[s._v("#")]),s._v(" 2.带return的finally语句")]),s._v(" "),t("p",[s._v("finally 块里 return 语句会把 try 块或者 catch 块里的 return 语句效果给覆盖掉"),t("strong",[s._v("且吞掉了异常")]),s._v(". "),t("strong",[s._v("不要在 finally 语句中使用 return, 这不是 finally 语句的用处.")])]),s._v(" "),t("p",[s._v("当 "),t("strong",[s._v("finally 子句包含 return 语句")]),s._v("时, 将会出现一种"),t("strong",[s._v("意想不到")]),s._v("的结果, 假设利用 return 语句从 "),t("strong",[s._v("try")]),s._v(" 语句块中"),t("strong",[s._v("退出")]),s._v(". "),t("strong",[s._v("在方法返回前, finally 子句的内容将被执行")]),s._v(". 但如果 finally 子句中也有一个 return 语句, 这个返回值将会"),t("strong",[s._v("覆盖")]),s._v("原始的"),t("strong",[s._v("返回值")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果try子句含有return")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// catch里面也有return")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// finally中的return覆盖try中的return")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("如果调用 f(2), 那么 try 语句块的计算结果为 r = 4, 并执行 return 语句. 然而在方法真正"),t("strong",[s._v("返回前")]),s._v(", 还要执行 finally 子句. finally 子句将使得"),t("strong",[s._v("方法返回 0")]),s._v(", 这个返回值"),t("strong",[s._v("覆盖")]),s._v("了原始的返回值 4. 如果 "),t("strong",[s._v("catch 语句块里面有 return 语句")]),s._v(", 那么 finally "),t("strong",[s._v("依然会覆盖")]),s._v("这个结果.")]),s._v(" "),t("h5",{attrs:{id:"_3-try-with-resources"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-try-with-resources"}},[s._v("#")]),s._v(" 3.try-with-resources")]),s._v(" "),t("p",[s._v("对于实现了 "),t("strong",[s._v("AutoCloseable")]),s._v(" 接口的资源, 如果需要关闭资源, 最好使用"),t("strong",[s._v("带资源的 try 语句(try-with-resources)")]),s._v(". 当 try 块正常或者发生异常退出时, 会"),t("strong",[s._v("自动调用 res.close()")]),s._v(", 就"),t("strong",[s._v("像使用了 finally 子句")]),s._v(".")]),s._v(" "),t("p",[s._v("AutoCloseable 接口有一个方法:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("try-with-resources 的最简形式如下:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Resource")]),s._v(" res "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// work with res")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("可以指定"),t("strong",[s._v("多个资源")]),s._v(". 例如:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Scanner")]),s._v(" in "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Scanner")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FileInputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("'usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dict"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("words"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"),  "')]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UTF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v('"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PrintWriter")]),s._v(" out "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ntWriter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"out.txt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasNex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("next")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toUpperCase")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("不论这个块如何退出, in 和 out 都会"),t("strong",[s._v("关闭")]),s._v(".")]),s._v(" "),t("p",[s._v("如果资源"),t("strong",[s._v("没有实现 AutoCloseable 接口")]),s._v("就"),t("strong",[s._v("不能")]),s._v("使用 try-with-resources 语句.")]),s._v(" "),t("h5",{attrs:{id:"_4-问题总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-问题总结"}},[s._v("#")]),s._v(" 4.问题总结")]),s._v(" "),t("blockquote",[t("p",[s._v("如果执行finally代码块之前方法返回了结果或者JVM退出了, 这时finally块中的代码还会执行吗?")])]),s._v(" "),t("p",[s._v("只有在 try 里面通过 "),t("strong",[s._v("System.exit(0)")]),s._v(" 来"),t("strong",[s._v("退出 JVM")]),s._v(" 的情况下 finally 块中的代码才"),t("strong",[s._v("不会")]),s._v("执行, 其他 return 等情况"),t("strong",[s._v("都会调用")]),s._v(", 所以在"),t("strong",[s._v("不终止 JVM 的情况下 finally 中的代码一定会执行")]),s._v(".")]),s._v(" "),t("blockquote",[t("p",[s._v("finally语句块一定会执行吗?")])]),s._v(" "),t("p",[t("strong",[s._v("不一定")]),s._v(". 当在 try 块或者 catch 块里进行 return 时 finally 会被执行. 有一些特殊情况不一定会执行:")]),s._v(" "),t("ul",[t("li",[s._v("执行 finally 块的"),t("strong",[s._v("前提是必须执行到了 try 块")]),s._v(", 当在 try 块或者 catch 块中"),t("strong",[s._v("有 System.exit(0);")]),s._v(" 这样的语句存在时 finally 块就"),t("strong",[s._v("不会被执行")]),s._v("到了, 因为程序被打断(interrupted)或者被终止(killed);")]),s._v(" "),t("li",[s._v("更极端的情况就是在线程运行 try 语句块或者 catch 语句块时, 突然断电了.")])]),s._v(" "),t("h4",{attrs:{id:"异常开发技巧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常开发技巧"}},[s._v("#")]),s._v(" 异常开发技巧")]),s._v(" "),t("p",[s._v("源自《Java Core》.")]),s._v(" "),t("ul",[t("li",[s._v("多使用代码检查机制, "),t("strong",[s._v("捕获异常的开销非常大")]),s._v(".")]),s._v(" "),t("li",[s._v("不要过分细化异常.")]),s._v(" "),t("li",[s._v("利用异常层次结构, 不要只抛出 RuntimeException 异常. 应该寻找更加适当的子类或创建自己的异常类. 不要只捕获 Thowable 异常, 否则会使程序代码难以阅读与维护. 将一种异常转换成另一种更加适合的异常时不要犹豫.")]),s._v(" "),t("li",[s._v("不要压制异常, 不要羞于传递异常.")]),s._v(" "),t("li",[s._v('在检测错误时, "苛刻" 要比放任更好.')]),s._v(" "),t("li",[s._v("早抛出, 晚捕获.")]),s._v(" "),t("li",[s._v("多个 catch 块的次序应该是"),t("strong",[s._v("具体异常")]),s._v("放在其祖先类的前面, 否则后面的 catch 语句可能进入不了.")])]),s._v(" "),t("p",[s._v("‍")]),s._v(" "),t("h4",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.tianmaying.com/tutorial/Java-Exception",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java 入门之异常处理"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("《Java 核心技术卷》")])])])}),[],!1,null,null,null);t.default=e.exports}}]);