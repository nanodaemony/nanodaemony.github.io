(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{549:function(t,a,s){"use strict";s.r(a);var r=s(7),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_2-å£ç®—-å…¨æµç¨‹å¤ç›˜-é™æµåŸå› åˆ†æä¼˜åŒ–ä¸å…¨é“¾è·¯æ•°æ®ä¼ è¾“ç ”ç©¶ğŸŒŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å£ç®—-å…¨æµç¨‹å¤ç›˜-é™æµåŸå› åˆ†æä¼˜åŒ–ä¸å…¨é“¾è·¯æ•°æ®ä¼ è¾“ç ”ç©¶ğŸŒŸ"}},[t._v("#")]),t._v(" 2.å£ç®—-å…¨æµç¨‹å¤ç›˜-é™æµåŸå› åˆ†æä¼˜åŒ–ä¸å…¨é“¾è·¯æ•°æ®ä¼ è¾“ç ”ç©¶ğŸŒŸ")]),t._v(" "),a("p",[t._v("æœ¬æ–‡é“¾æ¥: https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=452900480#id-%E5%85%A8%E6%B5%81%E7%A8%8B%E5%A4%8D%E7%9B%98%E9%99%90%E6%B5%81%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90%E4%B8%8E%E4%BC%98%E5%8C%96&%E5%85%A8%E9%93%BE%E8%B7%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E7%A0%94%E7%A9%B6-%E5%81%87%E6%83%B3%E7%9A%84%E5%A4%84%E7%90%86%E8%A7%A3%E9%87%8A%E6%A8%A1%E5%9E%8B")]),t._v(" "),a("h4",{attrs:{id:"åŸæ•…éšœä¿¡æ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸæ•…éšœä¿¡æ¯"}},[t._v("#")]),t._v(" åŸæ•…éšœä¿¡æ¯")]),t._v(" "),a("p",[t._v("å£ç®—ç»„è®°å½•: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=311513772",target:"_blank",rel:"noopener noreferrer"}},[t._v("04. [2022-06-07] solar-thoræ‹ç…§æ£€æŸ¥ç­‰æ¥å£å“åº”æ—¶é—´æ…¢åŠé™æµæ•…éšœå¤ç›˜. - 2022å¹´06æœˆ07æ—¥"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("å†…å®¹ç»„è®°å½•: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=311246151",target:"_blank",rel:"noopener noreferrer"}},[t._v("2022-06-06-[P0] è§†é¢‘æ¥å£è¶…æ—¶"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"åŸæ•…éšœå¤ç›˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸæ•…éšœå¤ç›˜"}},[t._v("#")]),t._v(" åŸæ•…éšœå¤ç›˜")]),t._v(" "),a("p",[t._v("19:49 å†…å®¹çš„ RPC æ¥å£æ•…éšœ. ç›¸å…³çš„æ¥å£éƒ½å˜æ…¢. å¦‚ä¸‹å›¾, ç»“æŸæ—¶é—´çº¦åœ¨ 21:30 å·¦å³.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_0-22-7-20231119112306-4ttrl69.png",alt:""}})]),t._v(" "),a("p",[t._v("åœ¨æ­¤æœŸé—´, å¤§é‡çš„æ¥å£éƒ½å˜æ…¢. è¿™é‡Œè´´å‡ ä¸ªé‡è¦çš„,é¦–å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªä¾èµ–åˆ—è¡¨, å› æ­¤ä¾èµ–è¿™ä¸ª RPC çš„æ¥å£éƒ½ä¼šå˜æ…¢. ä»ç›‘æ§å›¾ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºæ¥.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_0-26-39-20231119112306-4g116te.png",alt:""}})]),t._v(" "),a("p",[t._v("å…¶ä¸­æœ€å¤§çš„æµé‡æ¥å£ä¸º: question-multi-video. è¿™ä¸ªæ¥å£ä»æ€§èƒ½ä¸Šçœ‹. P99 ä»ä¸€å¼€å§‹æ•…éšœåˆ°ç»“æŸ. å…¶åŸºæœ¬å¤„äºä¸€ä¸ªç¨³å®šçš„äºšå¥åº·çŠ¶æ€. å³: P99 ä¸º 2.35 ç§’å·¦å³.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_0-47-3-20231119112307-r3y11nz.png",alt:""}})]),t._v(" "),a("p",[t._v("ä½†æ˜¯å…¶ä¸­çš„æ‹ç…§æ£€æŸ¥çš„æ¥å£, åŒ…æ‹¬å£ç®—, æœé¢˜ , è¾…å¯¼. è¿™ä¸‰ä¸ªæ¥å£çš„å“åº”æ—¶é—´: "),a("strong",[t._v("å˜ååˆ†ä¸ºäº†ä¸¤ä¸ªé˜¶æ®µ")]),t._v(".")]),t._v(" "),a("ul",[a("li",[t._v("åˆ†åˆ«æ˜¯æ•…éšœå¼€å§‹çš„ 19:49 ~ 20:00 è¿™æ®µæ—¶é—´çš„å“åº”æ—¶é—´ P99 å¤§æ¦‚åœ¨ 3.75 ç§’å·¦å³.")]),t._v(" "),a("li",[t._v("20:00 åæ¥å£æ€§èƒ½è¿›ä¸€æ­¥æ¶åŒ– , å¤§æ¦‚æ¥åˆ°äº† 4.5 ç§’.")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨æ„: æ­¤æ—¶åœ¨æ‹ç…§æ£€æŸ¥çš„ç›‘æ§å¤§ç›˜é‡Œé¢çœ‹åˆ°äº†ä¸€ä¸ªä¸ä¹‹åŒæ­¥çš„å¼‚å¸¸æƒ…å†µ. é‚£å°±æ˜¯æ­¤æ—¶äº§ç”Ÿäº†é™æµ.")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_0-46-20-20231119112306-4r07xsz.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_0-46-41-20231119112307-tak13ws.png",alt:""}})]),t._v(" "),a("p",[t._v("åœ¨ 20:00 æ‹ç…§æ£€æŸ¥çš„æ¥å£å‘ç”Ÿé™æµ(HTTP å“åº”ç  429), é™æµçš„å€¼ç‰¹åˆ«å¤§.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2022-6-8_1-52-0-20231119112306-38tp6bb.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"è¡¨ç°ä¸åŸå› åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¡¨ç°ä¸åŸå› åˆ†æ"}},[t._v("#")]),t._v(" è¡¨ç°ä¸åŸå› åˆ†æ")]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯ä»£ç ä¸­çš„é…ç½®, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¯”è¾ƒæ¨¡ç³Šçš„è®¤è¯†, å¤§æ¦‚çŸ¥é“ Tomcat çš„çº¿ç¨‹æ± å¤§å°ä¸º 500. è¿æ¥æ•°ç”±äºæ²¡æœ‰é…ç½®. è¿™é‡Œçš„å€¼æ˜¯é»˜è®¤é…ç½® 1 ä¸‡è¿æ¥.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_22-12-8-20231119112306-na6q5bd.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("Tomcat çš„ HTTP çº¿ç¨‹æ± ä¸º 500, ç”±äºå‰é¢ RPC å˜æ…¢,å¯¼è‡´äº†å¤§é‡çš„ HTTP è¯·æ±‚çš„ RT å˜é•¿.")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126161916-u8g7csk.png",alt:"image"}})]),t._v(" "),a("p",[t._v("åŒæ—¶, æ‹ç…§æ£€æŸ¥çš„æ¥å£åœ¨ 20:00 æ—¶, è¿›ä¸€æ­¥çš„å˜æ…¢. å°±äº§ç”Ÿäº†å¹¶å‘å¤„ç†æ‹ç…§æ£€æŸ¥çš„çº¿ç¨‹æ•°è¶…è¿‡äº†é¢„ç•™çš„é˜ˆå€¼. (å€¼æ˜¯å¤šå°‘, å®é™…ä¸é‡è¦äº†.) æ­¤æ—¶å°±ä¼šå‘ç”Ÿé™æµ. è¿™ä¸ªä¹Ÿæ˜¯ç›‘æ§å›¾ä¸Šè¯»å‡ºæ¥çš„ä¸€äº›æ•°æ®, ä¹Ÿç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸ.")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„é™æµçš„é˜ˆå€¼å°±æ˜¯å¤§æ¦‚è®¾å®šçš„å¤„ç† RT åœ¨ 2 ç§’å·¦å³å¹¶å‘ 100 ä¸ªå¤„ç†çº¿ç¨‹. è¿™ä¸ªæ˜¯æœ€åˆå§‹çš„è®¾å®š. ç°åœ¨ P99 å·²ç»æ¥åˆ°äº† 4.5 ç§’ä»¥ä¸Š. é‚£æœ‰ç†ç”±ç›¸ä¿¡ RT å¹³å‡å€¼æ­¤æ—¶å·²ç»è¶…è¿‡äº† 2 ç§’. å®é™…ä¸ç®¡ç›¸ä¸ç›¸ä¿¡,ç»“æœéƒ½æ˜¯å¦‚æ­¤. å¦åˆ™ä¸ä¼šå‡ºç°é¢„æœŸä¹‹å¤–çš„é™æµè¯·æ±‚.")]),t._v(" "),a("h4",{attrs:{id:"å‡æƒ³çš„å¤„ç†è§£é‡Šæ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡æƒ³çš„å¤„ç†è§£é‡Šæ¨¡å‹"}},[t._v("#")]),t._v(" å‡æƒ³çš„å¤„ç†è§£é‡Šæ¨¡å‹")]),t._v(" "),a("p",[a("strong",[t._v("ä¸ç¬¦åˆé¢„æœŸçš„æ˜¯")]),t._v(", æ˜æ˜æˆ‘ä»¬å·²ç»åšäº†é™æµ. åœ¨ç¬¬äºŒå¤©, åœ¨å¾®åšä¸Šæœ‰ç”¨æˆ·åé¦ˆæˆ‘ä»¬çš„ APP ç‰¹åˆ«çš„æ…¢. å¹¶ä¸”, ä» PIPE é‡‡é›†çš„ C ç«¯ç›‘æ§æ¥çœ‹. ç”¨æˆ·çš„å¹³å‡å“åº”æ—¶é—´éƒ½æ¥åˆ°äº† 20 ç§’åˆ° 30 ç§’å·¦å³. è€Œæˆ‘ä»¬çš„æ‹ç…§æ£€æŸ¥å¤§ç›˜çš„ RT P99 æ‰ 4.5 ç§’å·¦å³. è™½ç„¶æ¯”è¾ƒç³Ÿç³•, ä½†æ˜¯ä¹Ÿä¸è‡³äºåˆ° C ç«¯ç›‘æ§é‡‡é›†çš„æ•°æ®å€¼(20-30ç§’).")]),t._v(" "),a("blockquote",[a("p",[t._v("å½“æ—¶çš„å¤ç›˜æ—¶, æœ‰å¤§é‡çš„è¯·æ±‚è¢«é™æµäº†. é™æµçš„ç”¨æˆ·è¿›ä¸€æ­¥çš„åˆå‘èµ·äº†æ–°çš„è¯·æ±‚. å¯¼è‡´æµé‡çˆ†æ¶¨. è€Œçˆ†æ¶¨çš„æµé‡åˆä¼šè¿›ä¸€æ­¥çš„åŠ å¼ºæœåŠ¡çš„å‹åŠ›. æœ€ç»ˆå¯¼è‡´æœåŠ¡è¿›ä¸€æ­¥çš„å˜å."),a("br"),t._v("\nä»è€Œä½¿ç”¨æˆ·çš„å“åº”æ—¶é—´çœ‹èµ·æ¥æ˜¯è¾¾åˆ°äº† 20-30 ç§’.")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªè§£é‡Šçœ‹èµ·æ¥éå¸¸çš„å®Œç¾. ä¹Ÿæ¯”è¾ƒç¬¦åˆé€»è¾‘. ä½†æ˜¯è¿™ä¸ªè§£é‡Šä¸äº†ä¸ºä½•ç›‘æ§çš„ P99 åœ¨ 4.5 ç§’å·¦å³. è€Œä¸æ˜¯ 20-30 ç§’. ç›‘æ§å›¾ä¸ä¼šè¯´è°(ä½†æ˜¯çš„ç¡®æ˜¯æœ‰å¯èƒ½å‡ºé”™çš„). å› æ­¤é’ˆå¯¹è¿™ä¸ªæƒ…å†µæˆ‘ä»¬  "),a("strong",[t._v('"å‡æƒ³"')]),t._v("  äº†ä¸€ç§å¯èƒ½çš„è§£é‡Šæ¨¡å‹.")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("å› ä¸ºæˆ‘ä»¬çœ‹åˆ°äº†æœåŠ¡å˜æ…¢, çœ‹èµ·æ¥å“åº”æ—¶é—´å˜é«˜äº†å˜›.")]),t._v(" "),a("li",[t._v("åŒæ—¶æˆ‘ä»¬è¿˜çœ‹åˆ°äº†æµé‡å˜é«˜. æ•´ä½“çš„ç½‘å¡çš„æµé‡è¶…çº§é«˜. æ•…éšœçš„æ—¶å€™æµé‡å¤§æ¦‚åœ¨ 150Mbps åˆ° 200 Mbps å·¦å³. å› æ­¤, æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚å¾ˆæ…¢. å› ä¸ºå›¾ç‰‡æ•°æ®æ¯”è¾ƒå¤§. å¹³å‡ 200k åˆ° 250k å·¦å³.")]),t._v(" "),a("li",[t._v("è€Œä¸”æˆ‘ä»¬è¿˜çŸ¥é“. ä½¿ç”¨äº† SpringBoot çš„ multipart æ¥æ”¶å›¾ç‰‡çš„æ–¹å¼. åœ¨è¿›å…¥ controller å‰, å›¾ç‰‡å·²ç»æ¥æ”¶å®Œæˆ, å·²ç» readyäº†. æ¢è¨€ä¹‹: æ¥æ”¶å›¾ç‰‡çš„å·¥ä½œç”±æ¡†æ¶å±‚å¸®æˆ‘ä»¬åšäº†.")]),t._v(" "),a("li",[t._v("è€Œä¹‹å‰, æˆ‘ä»¬æœ‰è¿‡ç»éªŒ, åœ¨æˆ‘ä»¬çš„å¤„ç†ä»£ç è¿›å…¥ä¸šåŠ¡ä»£ç ä¹‹å‰. æœ‰å¯èƒ½ä¼šæœ‰é˜»å¡ç‚¹.æˆ–è€…æœ‰å…¶å®ƒçš„å·¥ä½œå˜é•¿ä¹Ÿå˜æˆäº†å˜ç›¸çš„é˜»å¡. å°±åƒè¿™é‡Œçš„æ¡†æ¶å±‚å¸®æˆ‘ä»¬æ¥æ”¶å›¾ç‰‡,è€Œç”±äºè¶…çº§å¤§çš„å¸¦å®½å’Œè¾ƒå·®çš„æ€§èƒ½, æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡æ˜¯ç”±äº Spring åœ¨æˆ‘ä»¬çš„æœåŠ¡æ€§èƒ½ä½ä¸‹å’Œå¸¦å®½æŒ¤å çš„æƒ…å†µä¸‹(è¿™ä¸ªåæ¥å¯ä»¥è¯ä¼ª, å› ä¸ºæˆ‘ä»¬ä¸è¿ç»´ç¡®è®¤äº†æˆ‘ä»¬çš„ç½‘å¡è‡³å°‘æ˜¯åƒå…†ç½‘å¡. åé¢æˆ‘ä»¬çš„å‹æµ‹ä¹Ÿå……åˆ†è¯å®äº†æˆ‘ä»¬çš„ç½‘å¡å®é™…æ˜¯ä¸€ä¸ªä¸‡å…†ç½‘å¡). æˆ‘ä»¬çš„æœåŠ¡(Tomcat&SpringBoot)åœ¨æ¥æ”¶å›¾ç‰‡çš„æ—¶å€™å­˜åœ¨æ€§èƒ½ç“¶é¢ˆ.å¯¼è‡´æ¥æ”¶å›¾ç‰‡å˜æ…¢.")]),t._v(" "),a("li",[t._v("è¿™æ ·æˆ‘ä»¬çš„ä»£ç å®é™…ä¸Šçœ‹èµ·æ¥å¾ˆå¿«. å®é™…ä¸Šå¾ˆæ…¢. å¯¼è‡´æœ‰çš„è¯·æ±‚åœ¨å¤„ç†çš„æ—¶å€™. å·²ç»ç§¯å‹äº†å¾ˆä¹….")])])]),t._v(" "),a("p",[t._v("ä¸Šé¢çš„å›¾ç‰‡æ¥æ”¶ç§¯å‹å¤§æ¦‚  "),a("strong",[t._v('"æƒ³è±¡"')]),t._v("  çš„å¤„ç†æ¨¡å‹å¦‚ä¸‹, åªè¦åœ¨è¿™ä¸ª Tomcat ä¸­çš„å›¾ç‰‡æ¥æ”¶å¤„ç†å¾ˆæ…¢çš„è¯. "),a("strong",[t._v("é‚£å°±æœ‰å¯èƒ½å‡ºç°æˆ‘ä»¬è¯´çš„è¯·æ±‚å¤„ç†å‰çš„é˜»å¡")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126161941-mbj1suk.png",alt:"image"}})]),t._v(" "),a("p",[t._v("è¿™ä¸ªè§£é‡Šæ¨¡å‹, èƒ½å¤Ÿ")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("è§£é‡Šä¸ºä»€ä¹ˆç”¨æˆ·çš„è¯·æ±‚åœ¨ C ç«¯çœ‹èµ·æ¥å¾ˆæ…¢, è€Œåœ¨æˆ‘ä»¬ Server ç«¯çœ‹èµ·æ¥å¾ˆå¿«.")])]),t._v(" "),a("li",[a("p",[t._v("å› æ­¤åœ¨ç”¨æˆ·çš„è¯·æ±‚è¿”å›çš„æ—¶å€™, æœ‰å¯èƒ½ç”¨æˆ·å·²ç»æ”¾å¼ƒäº†. å› æ­¤åˆé‡æ–°å‘èµ·äº†è¯·æ±‚. å¯¼è‡´è¯·æ±‚é‡å¾€ä¸Šç¿».")])]),t._v(" "),a("li",[a("p",[t._v("è€Œæ–°çš„è¯·æ±‚è¿›æ¥åˆè¿›ä¸€æ­¥çš„åŠ å‰§äº†æœåŠ¡çš„å‹åŠ›. å¯¼è‡´æœåŠ¡çš„æ€§èƒ½è¿›ä¸€æ­¥çš„ä¸‹é™.")]),t._v(" "),a("ol",[a("li",[t._v("è¿™ä¸ªå¯èƒ½çš„çŒœæƒ³åŸå› æ˜¯å›¾ç‰‡åœ¨æ¥æ”¶çš„ä¸­é—´è¿‡ç¨‹. ä¹Ÿæœ‰å¯èƒ½éœ€è¦èµ„æº. å› ä¸ºæˆ‘ä»¬æƒ³è±¡çš„æ¥æ”¶å›¾ç‰‡è¿‡ç¨‹ä¼šå¾ˆæ…¢. é‚£å†…å­˜ä¸­å¯èƒ½å°±ä¼šå­˜åœ¨å¤§é‡çš„æ¥æ”¶è¿‡ç¨‹ä¸­çš„å›¾ç‰‡. æ¯”å¦‚åŠå¼ å›¾ç‰‡.")]),t._v(" "),a("li",[t._v("è¿™æ ·å°±ä¼šå¯¼è‡´å¯¹å†…å­˜çš„æŒ¤å…‘. åè¿‡æ¥å°±ä¼šåŠ å‰§ GC. è®© CPU è¿›ä¸€æ­¥çš„å¾€ä¸Šæ¶¨. (å®é™… CPU å¹¶æ²¡æœ‰æ¶¨å¤šå°‘, å†…å­˜åº”è¯¥ä¹Ÿè¿˜å¥½.)")])])]),t._v(" "),a("li",[a("p",[t._v("ä»¥ä¸Šä¼šåœ¨æœåŠ¡ç«¯é€ æˆå¤§é‡çš„ 499. å®é™…å·²ç»æ­£å¸¸å®Œæˆçš„è¯·æ±‚. æˆ‘ä»¬çœ‹æ¥æ˜¯æ­£å¸¸å¤„ç†äº†. ä½†æ˜¯å…¶å®å¹¶æ²¡æœ‰æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚. æ‰€ä»¥ç”¨æˆ·æ‰ç–¯ç‹‚é‡è¯•.")])]),t._v(" "),a("li",[a("p",[t._v("åŒæ—¶, åœ¨ 20:00 çš„æ—¶å€™, ç”±äºä¸šåŠ¡å¤„ç†çš„æ—¶é—´è¿›ä¸€æ­¥çš„æ¶åŒ–. æ­¤æ—¶åœ¨ RateLimiterAOP å¤„è¿›è¡Œå¹¶å‘é™æµçš„è®¡æ•°å°±ä¼šè¿›ä¸€æ­¥çš„ä¸Šå‡, ä»è€Œè§¦å‘äº†é™æµ. ä¹Ÿå°±æ˜¯åœ¨ç›‘æ§å›¾ä¸­çœ‹åˆ°çš„é™æµè¯·æ±‚.")])])]),t._v(" "),a("p",[t._v("ä»¥ä¸Šçš„è§£é‡Šæ¨¡å‹èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„è§£é‡Šæ•´ä¸ªæµç¨‹. è¿™ä¸ªæ˜¯å› ä¸ºå®é™…åŸå› å¯¼è‡´çš„æœ€ç»ˆç»“æœä¸ä¸Šé¢çŒœæµ‹çš„æ¨¡å‹ä¸€è‡´. åŸºæœ¬ä¸Šèƒ½å¯¹ä¸Š, åªæœ‰éƒ¨åˆ†å¯¹ä¸ä¸Š. æ‰€ä»¥è¿™ä¸ªè§£é‡Š"),a("strong",[t._v("åœ¨æ¥ä¸‹æ¥çš„åŠå¹´æ—¶é—´å†…è¢«è®¤ä¸ºæ˜¯æ­£ç¡®")]),t._v("çš„.")]),t._v(" "),a("p",[t._v("**åœ¨è¿™ä¸ªè®¤è¯†ä¸‹, æˆ‘ä»¬å°±è®¤ä¸º: **")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("**ç”±äºåœ¨é™æµçš„åˆ‡é¢å¤„å‰æœ‰ä¸€æ®µä¸å¯æ§çš„å›¾ç‰‡ä¸Šä¼ æ¥æ”¶æ“ä½œ, ä¸”è¿™ä¸ªæ¥æ”¶æ—¶é—´æœ‰å¯èƒ½å˜å¾—ç‰¹åˆ«çš„é•¿. å¯¼è‡´é™æµæ“ä½œæ²¡æœ‰æœ‰åˆç†çš„æ—¶é—´èŠ‚ç‚¹è¢«æ‰§è¡Œ. å¯¼è‡´è¯·æ±‚æ²¡æœ‰åŠæ—¶çš„æŠŠå¤šä½™çš„è¯·æ±‚è¿‡æ»¤æ‰. **")])]),t._v(" "),a("li",[a("p",[t._v("**ç»“æœæœ‰ä¸¤: **")]),t._v(" "),a("ol",[a("li",[t._v("**ä¸€ä¸ªæ˜¯è¯·æ±‚æ²¡æœ‰åŠæ—¶çš„è¢«ç»ˆæ­¢æ‰, æœåŠ¡å™¨ä¸Šå­˜åœ¨è¿‡å¤šçš„æ¥æ”¶å›¾ç‰‡ä¸­é—´çŠ¶æ€çš„è¯·æ±‚. è¿™ä¸ªä¼šç§¯å‹å¤§é‡çš„è¯·æ±‚, ä½†æ˜¯åˆæ²¡æœ‰åŠæ³•è¿›è¡Œå¤„ç†. è¿™ä¸ªä¼šå˜ç›¸çš„åŠ å¤§æœåŠ¡çš„å‹åŠ›. **")]),t._v(" "),a("li",[a("strong",[t._v("å¦å¤–ä¸€ä¸ªæ˜¯å‰é¢çš„å›¾ç‰‡æ¥æ”¶æ—¶é—´ä¸å¯æ§, è€Œä¸”æœ‰å¯èƒ½å˜å¾—ç‰¹åˆ«é•¿, é‚£åé¢çš„é™æµé€»è¾‘ä»¥åŠä¸šåŠ¡å¤„ç†ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™å·²ç»æœ‰è¿‡å¤§çš„å‰æœŸå»¶æ—¶, è¿™æ ·æˆ‘ä»¬çš„è¯·æ±‚å¤„ç†å¯èƒ½æ˜¯å¾’åŠ³çš„, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å®é™…çœ‹åˆ°çš„å¤„ç†æ—¶é—´æ˜¯ 4.5 ç§’, ä½†æ˜¯ C ç«¯ç”¨æˆ·æœ‰å¯èƒ½å·²ç»è¿‡æœŸäº†(å³å·²ç»å–æ¶ˆ, è¯·æ±‚åœ¨è¿”å›çš„æ—¶å€™ä¼šè¿”å› 499).")])])])])]),t._v(" "),a("p",[t._v("åŸºäºä»¥ä¸Šçš„è®¤è¯†, æ‰æœ‰äº†å»"),a("strong",[t._v("åˆ†ææ¸…æ¥šè¿™ä¸€æ®µå›¾ç‰‡ä¸Šä¼ å¤„ç†çš„é€»è¾‘")]),t._v("æ˜¯æ€æ ·çš„. ä¸ºä»€ä¹ˆä¼šèŠ±è¿™ä¹ˆå¤šçš„æ—¶å€™. æ˜¯ multipart/form-data çš„è¡¨å•è§£ææœ‰æ€§èƒ½ç“¶é¢ˆå—? æˆ‘ä»¬å¯¹äºè¿™ä¸ªè®¤è¯†å»åšäº†å¾ˆå¤šçš„æµ‹è¯•å’Œæºä»£ç çš„é˜…è¯»,")]),t._v(" "),a("p",[t._v("ç›´åˆ°åé¢æˆ‘ä»¬é˜…è¯»äº† Tomcat çš„æºä»£ç . ä»¥åŠåé¢çš„å…¨é“¾è·¯å‹æµ‹è¿™ä¸ªè¯¯ä¼šæ‰å®Œå…¨æ¶ˆé™¤. "),a("strong",[t._v("æ‰¾åˆ°äº†çœŸæ­£çš„æ€§èƒ½é—®é¢˜.")])]),t._v(" "),a("h4",{attrs:{id:"å¸¦ç€é”™è¯¯çš„è®¤è¯†ç»§ç»­å»ä¼˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¦ç€é”™è¯¯çš„è®¤è¯†ç»§ç»­å»ä¼˜åŒ–"}},[t._v("#")]),t._v(" å¸¦ç€é”™è¯¯çš„è®¤è¯†ç»§ç»­å»ä¼˜åŒ–")]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨: è¿™é‡Œçš„é”™è¯¯è®¤è¯†ä¸æ˜¯å› ä¸ºæˆ‘ä»¬çš„çŸ¥è¯†æœ‰é—®é¢˜, è€Œæ˜¯æ•´ä¸ªé“¾è·¯çš„æ•°æ®æ¥æ”¶ç¡®å®æœ‰å…¶ç‹¬ç‰¹ä¹‹å¤„.")])]),t._v(" "),a("h5",{attrs:{id:"spring-multipart-form-dataçš„æ•°æ®æ¥æ”¶ä¸å¤„ç†æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-multipart-form-dataçš„æ•°æ®æ¥æ”¶ä¸å¤„ç†æ–¹å¼"}},[t._v("#")]),t._v(" spring multipart/form-dataçš„æ•°æ®æ¥æ”¶ä¸å¤„ç†æ–¹å¼.")]),t._v(" "),a("p",[t._v("ä¸ºäº†ææ¸…æ¥šè¿™ä¸ª tomcat/springBoot æ˜¯å¦‚ä½•æ¥æ”¶å›¾ç‰‡è¡¨å•çš„. æˆ‘å†³å®šå»ç¿»é˜… Tomcat çš„æºä»£ç .")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»£ç ä½ç½®: org.apache.catalina.connector.RequestFacade implements HttpServletRequest ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalStateException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"requestFacade.nullRequest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Globals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IS_SECURITY_ENABLED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccessController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPrivileged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetParameterPrivilegedAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parametersParsed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" coyoteRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])]),a("p",[t._v("â€‹"),a("code",[t._v("ä»¥ä¸‹æ˜¯: parseParameters å‡½æ•°ä¸­é—´çš„ä¸€éƒ¨åˆ†.")]),t._v("â€‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126162037-97uawfp.png",alt:"image"}})]),t._v(" "),a("p",[t._v("ä»¥ä¸Šéƒ¨åˆ†æˆ‘ä»¬æ‰¾åˆ°äº†è¡¨å•: "),a("code",[t._v("multipart/form-data")]),t._v("â€‹ çš„è§£ææ–¹å¼. å¾€é‡Œé¢çš„ "),a("code",[t._v("parseParts")]),t._v("â€‹ é‡Œé¢æœ‰å¦‚ä¸‹ä¸€æ®µä»£ç , å¤§æ¦‚çŸ¥é“è¿™ä¸ªåœ¨è§£æ multipart çš„å†…å®¹æ—¶ä¼šç”¨åˆ°ä¸´æ—¶æ–‡ä»¶. å› ä¸ºè¿™é‡Œåœ¨æŸ¥æ‰¾ä¸´æ—¶ç›®å½•.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-34-6-20231119112306-dyzl1fs.png",alt:""}})]),t._v(" "),a("p",[t._v("æ¥ç€å¾€ä¸‹, è¿™ä¸ª upload.parseRequest è¿™é‡ŒæŠŠè¡¨å•è§£ææˆ "),a("code",[t._v("List<FileItem>")]),t._v("â€‹, ç„¶åæœ€ç»ˆè½¬æ¢æˆäº† part, å­˜å‚¨åˆ°äº† parts ä¸­.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-41-36-20231119112306-yul0rws.png",alt:""}})]),t._v(" "),a("p",[t._v("è¿™é‡Œçš„æ ¸å¿ƒä»£ç æ˜¯: "),a("strong",[t._v("parseRequest")]),t._v(", æˆ‘ä»¬æ‰“å¼€è¿™ä¸ªå‡½æ•°, è¿™ä¸ªå‡½æ•°é‡Œé¢æœ‰ä¸€ä¸ªæ ¸å¿ƒä»£ç æ˜¯åœ¨åš stream çš„æ‹·è´.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Streams.copy(item.openStream(), fileItem.getOutputStream(), true, buffer);\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-43-31-20231119112306-d2jryy0.png",alt:""}})]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ˜¯ä» item.openStream ä¸­æ‹·è´åˆ° fileItem çš„ outputStream ä¸­. å†æ‰“å¼€è¿™ä¸ª fileItem çš„è¾“å‡ºæµçš„ç”Ÿæˆ:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-47-53-20231119112306-8ay0dib.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-46-44-20231119112306-tbm8bb0.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-18_0-47-28-20231119112306-w1mv3rh.png",alt:""}})]),t._v(" "),a("p",[t._v("åˆ°æ­¤, æˆ‘ä»¬çœ‹åˆ°äº†. "),a("mark",[a("strong",[t._v("multipart/form-data åœ¨è§£æè¡¨å•çš„æ—¶å€™, ä¼šç”¨åˆ°ä¸´æ—¶æ–‡ä»¶")])]),t._v(". æ ¼å¼ä¸º: upload_%x_%s.tmp è€Œä¸”è¿˜ä¼šåœ¨è¶…è¿‡äº† sizeThreshold åæ‰ä¼šå†™åˆ°ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸Š.")]),t._v(" "),a("p",[t._v("æ€»ç»“ä»¥ä¸Š:")]),t._v(" "),a("ol",[a("li",[t._v("å¦‚æœå‚æ•°ä¼ é€’è¡¨å•çš„æ—¶å€™, åªè¦æœ‰"),a("strong",[t._v("ä¸»åŠ¨çš„è·å–å‚æ•°çš„è¡Œä¸º")]),t._v(". æ­¤æ—¶å°±ä¼šè§¦å‘è¡¨å•ç±»å‹çš„å‚æ•°è§£æ. è¿™æ ·å°±ä¼šæå‰æŠŠè¾“å…¥çš„è¯·æ±‚è§£æä¸ºä¸´æ—¶æ–‡ä»¶;")]),t._v(" "),a("li",[t._v("è€Œä¸”ä¸´æ—¶æ–‡ä»¶çš„å¤§å°è¿˜æœ‰ä¸€ä¸ªé˜ˆå€¼, å¦‚æœå½“å‰çš„ part çš„å¤§å°è¶³å¤Ÿå°çš„æ—¶å€™æ˜¯ä¸ä¼šå†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶çš„.")]),t._v(" "),a("li",[t._v("multipart/form-data çš„è§£ææ˜¯"),a("strong",[t._v("é¡ºåºä¸²è¡Œ")]),t._v("çš„, ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ è¦ getPart å¾—åˆ°ä¸€ä¸ªä½äºä¸­é—´éƒ¨åˆ†çš„ part. é‚£ä»–ä¸€å®šä¼šå…ˆæŠŠæ•´ä¸ªè¾“å…¥è¡¨å•è§£æå®Œæˆåæ‰ä¼šæ‹¿åˆ°è¿™ä¸ªå†…å®¹. æ¢è¨€ä¹‹: å‚æ•°çš„è§£æä¸€å®šæ˜¯æœ‰é¢„è§£æçš„.")])]),t._v(" "),a("p",[t._v("ä»¥ä¸Šçš„ getParam æˆ‘ä»¬å¹¶æ²¡æœ‰è§¦å‘. ä½†æ˜¯è¿™ä¸ª parseParts æ˜¯æ€ä¹ˆè§¦å‘çš„å‘¢.")]),t._v(" "),a("p",[t._v("é€šè¿‡å®é™…è°ƒè¯•å‘ç°, SpringBoot åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ‰§è¡Œå¦‚ä¸‹ä¸€ä¸ª filter: "),a("strong",[t._v("HiddenHttpMethodFilter")]),t._v(". è¿™æ˜¯ä¸€ä¸ªæŠŠé€šç”¨çš„ POST è¯·æ±‚è½¬æ¢ä¸ºç‰¹å®šçš„ method æ–¹å¼çš„è¿‡æ»¤å™¨.")]),t._v(" "),a("blockquote",[a("p",[t._v("å°±åƒæ˜¯ä¸ºæˆ‘ä»¬ä¸­å›½ç¨‹åºå‘˜é‡èº«å®šåˆ¶çš„ä¸€æ ·. å°±åƒå¤§å®¶æ‰€äº†è§£çš„ä¸€æ ·. æˆ‘ä»¬æœ‰ä¸€ç§ç¼–ç¨‹æ¨¡å¼å«ä¸€åˆ‡éƒ½ç”¨ POST çš„å“²å­¦. å…·ä½“åŸå› å¤§å®¶ä¹Ÿå¯èƒ½æœ‰æ‰€äº†è§£.")]),t._v(" "),a("ol",[a("li",[t._v("GET è¯·æ±‚å¯èƒ½è¢«è¿è¥å•†æ‹¦æˆª.")]),t._v(" "),a("li",[t._v("GET è¯·æ±‚å¯èƒ½è¢«ä¸­é—´è®¾å¤‡è®°å½•å†…å®¹.")]),t._v(" "),a("li",[t._v("POST è¯·æ±‚æ›´æ–¹ä¾¿å¤„ç†å‚æ•°. æ¯”å¦‚ @RequestBody è¿™æ ·çš„ç»Ÿä¸€è§£ææ¨¡å¼.")])])]),t._v(" "),a("p",[t._v("åœ¨è¿™ä¸ªè¿‡æ»¤å™¨é‡Œé¢æœ‰ä¸€ä¸ªä»£ç :")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»£ç ä½ç½®:  org.springframework.web.filter.HiddenHttpMethodFilter")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilterInternal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" filterChain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" requestToUse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ERROR_EXCEPTION_ATTRIBUTE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" paramValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("methodParam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("paramValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         requestToUse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpMethodRequestWrapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paramValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n   filterChain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestToUse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("è¿™æ ·å°±"),a("strong",[t._v("è¢«åŠ¨çš„è§¦å‘äº†å‚æ•°è§£æçš„çš„æµç¨‹")]),t._v(". è¿™æ ·å°±å¯ä»¥åœ¨å®é™…æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç çš„æ—¶å€™"),a("strong",[t._v("å°±æ˜¯å·²ç»è§£æå¥½çš„å‚æ•°ä¸æ–‡ä»¶")]),t._v("äº†. åœ¨æˆ‘ä»¬çš„ Controller å±‚ä»£ç å¼€å§‹è¿è¡Œçš„æ—¶å€™. æ‰€æœ‰çš„å‚æ•°è§£æå·²ç»å®Œæˆäº†. è€Œä¸”"),a("strong",[t._v("æ•´ä¸ªè¿‡ç¨‹è¿˜ç”¨åˆ°äº†æ–‡ä»¶ IO ä»¥åŠä¸´æ—¶æ–‡ä»¶")]),t._v(". "),a("strong",[t._v("è¿™ä¸ªå°±æœ‰å¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜")]),t._v(". äºæ˜¯æˆ‘çœŸçš„å°±å»æµ‹è¯•äº†ä¸‹è¿™ä¸ª IO ä¹‹é—´çš„å·®å¼‚.")]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨: å®é™…ä¸Šé™¤äº†ä»¥ä¸Šçš„ Filter ä¼šè§¦å‘å‚æ•°è§£æå¤–, è¿˜æœ‰å…¶å®ƒçš„ç‚¹æœ‰å¯èƒ½è§¦å‘å‚æ•°è§£æ, æœ€å¸¸è§çš„å°±æ˜¯ä½ çš„ Controller å±‚ä»£ç æœ‰åšå‚æ•°ç»‘å®š. æ¯”å¦‚ @RequestParam æ­¤ç±»çš„æ³¨è§£. æˆ‘ä»¬çš„åœºæ™¯æ²¡æœ‰å› ä¸ºå®ƒè€Œè§¦å‘,åªæ˜¯å› ä¸ºè¿™ä¸€ç±»çš„å‚æ•°è§£æç»‘å®šçš„æ—¶é—´æ›´æ™šè€Œå·². é‚£ä¸ªæ—¶å€™ HttpServletRequestå·²ç»å®Œæˆå‚æ•°è§£æäº†.")])]),t._v(" "),a("h4",{attrs:{id:"multipart-form-dataçš„æ–‡ä»¶ä¼ è¾“ä¸httpservletinputstreamä¹‹é—´çš„æ€§èƒ½å·®å¼‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multipart-form-dataçš„æ–‡ä»¶ä¼ è¾“ä¸httpservletinputstreamä¹‹é—´çš„æ€§èƒ½å·®å¼‚"}},[t._v("#")]),t._v(" Multipart/form-dataçš„æ–‡ä»¶ä¼ è¾“ä¸HttpServletInputStreamä¹‹é—´çš„æ€§èƒ½å·®å¼‚")]),t._v(" "),a("p",[t._v('åœ¨æœ‰äº†ä»¥ä¸Šçš„çŸ¥è¯†å, æˆ‘ä»¬æ„è¯†åˆ°å¯èƒ½çš„ç¡®æ˜¯æˆ‘ä»¬ ** "çŒœæƒ³è§£é‡Šæ¨¡å‹"**  æ‰€çŒœæµ‹çš„é‚£æ ·, ç”±äºæ˜¯è¿™ä¸ªå‰ç½®çš„å‚æ•°è§£æéœ€è¦æ–‡ä»¶ IO. è€Œä¸”æ•´ä¸ªè¿‡ç¨‹æ˜¯é¡ºåºæµå¼å¤„ç†çš„, å¦‚æœçœŸçš„æœ‰ç½‘ç»œé€Ÿåº¦è¿‡æ…¢çš„æƒ…å†µé‚£å°±ä¼šå‡ºç°å‰ç½®æ¥æ”¶æ–‡ä»¶æ—¶é—´å˜é•¿çš„é—®é¢˜. è€Œæ­£æ˜¯å› ä¸ºè¿™æ ·å°±æœ‰å¯èƒ½å‡ºç° Controller åœ¨å¤„ç†è¯·æ±‚çš„æ—¶å€™å·²ç»æœ‰äº†å¾ˆå¤§çš„æ¥æ”¶æ—¶é•¿. '),a("strong",[t._v("å½“è¿”å›æ•°æ®çš„æ—¶å€™, è‡ªç„¶å°±å·²ç»è¿‡æœŸäº†")]),t._v(".")]),t._v(" "),a("p",[t._v("ç”±äºè¿™ä¸ªå¯èƒ½å­˜åœ¨çš„æ€§èƒ½é—®é¢˜, è€Œä¸”è¿™ä¸ªè§£æè¿‡ç¨‹ç”¨åˆ°äº†æ–‡ä»¶ IO.")]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨: å®é™…æ–‡ä»¶IOçš„è¿™ä¸€éƒ¨åˆ†æ›¾ç»åšè¿‡è°ƒä¼˜å®éªŒ. åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ–¹å‘.")]),t._v(" "),a("ol",[a("li",[t._v("æ›´ä¼˜çš„æ€§èƒ½, æˆ‘ä»¬è®©ä¸´æ—¶æ–‡ä»¶å°½é‡çš„å­˜å‚¨åœ¨å†…å­˜ä¸­. å‡å°‘å†…å­˜å ç”¨. æå‡å¤„ç†æ€§èƒ½.")]),t._v(" "),a("li",[t._v("æ›´å°çš„å†…å­˜å ç”¨, è¿™ä¸ªæ˜¯å› ä¸ºä¸Šé¢æˆ‘æ‰€è¯´çš„è§£æä¸æ¥æ”¶æ–‡ä»¶çš„è¿‡ç¨‹å¯èƒ½éœ€è¦è¿‡å¤šçš„å†…å­˜ä¸è¿‡æ…¢çš„å¤„ç†è¿‡ç¨‹.æœ‰å†…å­˜é˜»å¡å«Œç–‘. å› æ­¤å°½å¯ä»¥å¤šçš„ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶,å°‘ç”¨å†…å­˜ç©ºé—´.")])]),t._v(" "),a("p",[t._v("å…·ä½“å‚è€ƒ: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=410732320",target:"_blank",rel:"noopener noreferrer"}},[t._v("16. 2022å¹´12æœˆ22æ—¥ - solar-thor ä¸Šä¼ æ–‡ä»¶è°ƒæ•´ç¼“å­˜åˆ°ä¸´æ—¶æ–‡ä»¶çš„é˜ˆå€¼"),a("OutboundLink")],1),t._v(" å®é™…å½±å“ç”šå¾®, è¿™é‡Œåªä½œæ–‡æ¡£å®Œæ•´æ€§å¼•ç”¨.")])]),t._v(" "),a("p",[t._v("è€ƒè™‘åˆ°åé¢çš„æ–‡ä»¶å†…å®¹ä¸»è¦ç”¨äºä¸¤ä¸ªä½œç”¨:")]),t._v(" "),a("ul",[a("li",[t._v("ä¸€ä¸ªæ˜¯é€ä¼ ç»™ RPC, ä¸»è¦æ˜¯ç»™ Venom è¿›è¡Œå›¾åƒè¯†åˆ«å’Œæ£€æŸ¥ç»“æœ.")]),t._v(" "),a("li",[t._v("å¦å¤–æ˜¯ä¿å­˜åˆ° OSS, è¿™ä¸ªç›®å‰æ˜¯åç½®çš„å¼‚æ­¥å¤„ç†. å³ç­‰æ‹ç…§æ£€æŸ¥ç»“æœå‡ºæ¥åæ‰ä¿å­˜åˆ°é˜¿é‡Œäº‘ OSS.")])]),t._v(" "),a("p",[t._v("å› æ­¤, å¦‚æœèƒ½å¤ŸåŠæ—¶çš„æŠŠæ–‡ä»¶é€ä¼ ç»™ä¸¤è€…. å°±åƒè¿™ä¸ªæ–‡ç« ä¸­æ‰€è¯´çš„ä¸€æ ·. å¦‚æœ"),a("strong",[t._v("ç›´æ¥æŠŠ HTTP è¾“å…¥æµèƒ½å¤Ÿè½¬åˆ° OSS å­˜å‚¨å’Œ RPCè°ƒç”¨, ** é‚£å°±å¯ä»¥æå‡ä¼ è¾“æ•ˆç‡. è¿™æ ·ä¹Ÿ")]),t._v("å°±èƒ½å¤Ÿåœ¨å‰é¢çš„å›¾ç‰‡æ¥æ”¶æœªå®Œæˆçš„è¿‡ç¨‹ä¸­, å¯ä»¥è¿›è¡Œå›¾ç‰‡æå‰å¤„ç†. åŒæ—¶ä¹Ÿå¯ä»¥å‡å°‘å†…å­˜å ç”¨**(æ³¨: å®é™…ä¸Š multipart ä¹Ÿä¼šä½¿ç”¨æ–‡ä»¶ç¼“å­˜. å®é™…å¹¶ä¸ä¼šå ç”¨å¤ªå¤šçš„å†…å­˜), å‡å°‘ç£ç›˜ IO.")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/64988683/tomcat-performance-with-spring-boot-api-for-file-upload",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://stackoverflow.com/questions/64988683/tomcat-performance-with-spring-boot-api-for-file-upload"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("There is no other way to do it with multipart. The problem with multipart that to properly segement parts from the requst they need sometimes skipped or be repeatable. That is impossible within memory w/o having memory to explode. Therefore, Commons FileUpload caches them on disk after a certain threshold is reached. Multipart requests are the worst way for that. I highly recommend to use either "),a("code",[t._v("PUT")]),t._v("â€‹â€‹ or "),a("code",[t._v("POST")]),t._v("â€‹â€‹ with content type "),a("code",[t._v("application/octet-stream")]),t._v("â€‹â€‹. You can take the bare request input stream and pass to HttpClient to stream to your backend server. I did this already 5 years ago and it works for gigabytes. I have posted the solution in the Apache HttpClient mailing list.")]),t._v(" "),a("p",[t._v("There is one possibility how this could work under specific conditions:")]),t._v(" "),a("ul",[a("li",[t._v("All parts are in the correct physical order you want to read")]),t._v(" "),a("li",[t._v("Your write to a backend is fast enough to sustain the read from the front")])]),t._v(" "),a("p",[t._v("Consume the root part and then go over to the next physical one, process the request body lazily. JAX-WS RI (Metro) has a very nice handling of multipart requests for XOP/MTOM. Learn from that because you won't be able to make it any better.")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä¹ŸçœŸå®çš„å»"),a("strong",[t._v("æµ‹è¯•äº† multipart/form-data æ–‡ä»¶ä¸Šä¼ æ–¹å¼ä¸ HttpServletInputStream ä¹‹é—´çš„æ€§èƒ½å·®å¼‚")]),t._v(". å¦‚ä¸‹å›¾, å¯ä»¥çœ‹åˆ°æ–‡ä»¶ç›´ä¼ çš„æ–¹å¼å¤§æ¦‚ä¼šæ¯”è¡¨å•æ–¹å¼ä¼ è¾“ä¼šå‡å°‘ä¸€åŠçš„ CPU å ç”¨. å“åº”æ—¶é—´ä¹Ÿä¼šæœ‰ä¸€å®šçš„æå‡. åœ¨åŸºå‡†æµ‹è¯•ä¸­å¤§æ¦‚èƒ½æå‡ 20%-50% çš„å“åº”æ—¶é—´. æ›´è¯¦ç»†çš„æµ‹è¯•å¯ä»¥åœ¨è¿™ä¸ªæµ‹è¯•æŠ¥å‘Šä¸­çœ‹åˆ°: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=434430203",target:"_blank",rel:"noopener noreferrer"}},[t._v("8. 2023å¹´02æœˆ17æ—¥ - [åŸºå‡†æµ‹è¯•] ç©ºå›¾ç‰‡ä¸Šä¼ åŸºå‡†æµ‹è¯•å¯¹æ¯”(åŒæ­¥Multipart/åŒæ­¥/å¼‚æ­¥)"),a("OutboundLink")],1),t._v(" , å®é™…æ•ˆæœæ¯”è¾ƒå°. ä»ä¸Šé¢çš„å®é™…æµ‹è¯•æ¥çœ‹, æˆ‘ä»¬å¤§æ¦‚èƒ½å‡å°‘ä¸€äº› CPU å ç”¨. å¤§æ¦‚æœ‰ 10% å·¦å³. è™½ç„¶åœ¨å®é™…åœºæ™¯æµ‹è¯•ä¸­: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=434424538",target:"_blank",rel:"noopener noreferrer"}},[t._v("7. 2023å¹´02æœˆ15æ—¥ - [ åœºæ™¯æµ‹è¯• ]å›¾ç‰‡ä¸Šä¼ æ–¹å¼ HttpInputStream ä¸ Multipart å®é™…ç¯å¢ƒä¸Šä¼ æ—¶é—´å¯¹æ¯”."),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_11-51-6-20231119112306-myreuww.png",alt:""}})]),t._v(" "),a("p",[t._v('æ³¨æ„, ä»¥ä¸Šå·¥ä½œæ˜¯åœ¨æˆ‘ä»¬ä¹‹å‰  **"å‡æƒ³çš„æ¥æ”¶æ¨¡å¼" ** çš„å·¥ä½œæ–¹å¼çš„å‰æä¸‹, æˆ‘ä»¬éœ€è¦è¿™æ ·å»æ”¹åŠ¨.')]),t._v(" "),a("p",[t._v("ä½†æ˜¯å®é™…åœ¨åšå…¨é“¾è·¯çš„å“åº”æ—¶åºçš„æ—¶å€™æˆ‘ä»¬å‘ç°å¹¶ä¸æ˜¯è¿™æ ·çš„. æ ¸å¿ƒçš„åŸå› æ˜¯ "),a("strong",[t._v("Nginx")]),t._v(" è¿™ä¸€ä¸ªå˜é‡çš„åŠ å…¥.")]),t._v(" "),a("h4",{attrs:{id:"å¯¹multipart-form-dataåŠhttpservletinputstreamè¿›è¡Œå‹æµ‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹multipart-form-dataåŠhttpservletinputstreamè¿›è¡Œå‹æµ‹"}},[t._v("#")]),t._v(" å¯¹multipart/form-dataåŠHttpServletInputStreamè¿›è¡Œå‹æµ‹")]),t._v(" "),a("p",[t._v("ä¸Šé¢æˆ‘ä»¬å¯¹ multipart çš„ä»£ç ä»åŸç†åˆ°ä»£ç ä»¥åŠåˆ°åŸºå‡†æµ‹è¯•. è¿›è¡Œäº†å…¨æ–¹ä½çš„æµ‹è¯•, æˆ‘ä»¬ä¿¡å¿ƒæ»¡æ»¡çš„è®¤ä¸ºè¿™ä¸ªä¼˜åŒ–ä¸€å®šèƒ½èµ·åˆ°è¾ƒå¤§çš„ä½œç”¨. å¹¶ä¸”æˆ‘ä»¬çš„æ•´ä¸ªåˆ†æè¿‡ç¨‹ä¸ç»“è®ºéƒ½æ˜¯æ­£ç¡®çš„. "),a("strong",[t._v("ä½†æ˜¯å®é™… Nginx çš„å·¥ä½œåŸç†ä¸å®é™…æ•ˆæœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·")]),t._v(".")]),t._v(" "),a("p",[t._v('ä»¥ä¸‹æ˜¯ä¸¤è€…çš„å¯¹æ¯”å›¾, æˆ‘ä»¬æƒ³è±¡çš„æ˜¯ Nginx å°±åƒæ˜¯ä¸€ä¸ªæ°´ç®¡ä¸€æ ·, æºæºä¸æ–­çš„æŠŠè¾“å…¥æ•°æ®æµ "å®æ—¶" è½¬å‘ç»™åˆ°æˆ‘ä»¬ Tomcat. è¿™æ ·æ‰èƒ½å®æ—¶çš„å¤„ç†æ•°æ®. ä½†æ˜¯å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·çš„.')]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯æˆ‘ä»¬ä»¥ä¸ºçš„åŸºäºæµçš„æ•°æ®ä¼ è¾“çš„æ–¹å¼. æ•°æ®æŠ¥æ–‡çš„ TCP æŠ¥æ–‡å— nginx ä¼šå®æ—¶çš„æŠŠæŠ¥æ–‡è½¬å‘ç»™æˆ‘ä»¬. è¿™æ ·å°±ä¼šåœ¨ä¼ è¾“ä¸€ä¸ªå¤§çš„è¯·æ±‚çš„æ—¶å€™, å°±ä¼šå‡ºç° Nginx å®æ—¶è½¬å‘.")]),t._v(" "),a("p",[t._v("ç”¨æˆ·çš„æ•°æ®ç»™æˆ‘ä»¬, å¹¶ä¸”æœ€é‡è¦çš„æˆ‘ä»¬è®¤ä¸ºæ˜¯äº‹å®çš„ç‰¹ç‚¹æ˜¯: æ•°æ®ä¼šå®æ—¶è½¬å‘ç»™åç«¯çš„ upstream, ä¸ç®¡æ˜¯æ”¶åˆ°äº† 1 ä¸ªå­—èŠ‚, è¿˜æ˜¯æ”¶åˆ°äº† 10k å­—èŠ‚. éƒ½ä¼šå®æ—¶çš„ç»™åˆ°æˆ‘ä»¬åç«¯.")]),t._v(" "),a("p",[t._v("è¿™æ ·åç«¯çš„ç³»ç»Ÿæ‰èƒ½å®æ—¶çš„, ç¬¬ä¸€æ—¶é—´çš„æ¥æ”¶å¹¶è§£æå¤„ç†æ•°æ®. æˆ‘ä»¬æ˜¯è¿™ä¹ˆæƒ³çš„, ä¹Ÿæ˜¯æŒ‰è¿™ä¸ªæ€è·¯å»ä¼˜åŒ–çš„. (å¦‚ä¸Šé¢çš„ inputstream çš„å®æ—¶è½¬å‘).")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126163113-oikedk0.png",alt:"image"}})]),t._v(" "),a("p",[t._v("**å®é™…çš„è¯·æ±‚å¤„ç†æ–¹å¼æ˜¯è¿™æ ·çš„: **â€‹"),a("mark",[a("strong",[t._v("å³åœ¨æ²¡æœ‰å®Œæ•´æ¥æ”¶åˆ° C ç«¯æ•°æ®ä¹‹å‰æ˜¯ä¸ä¼šè½¬å‘ç»™åˆ° upstream_server çš„. å½“ Nginx æŠŠæ‰€æœ‰çš„æ•°æ®æ¥æ”¶å®Œæˆå, æ‰ä¼šæŠŠæ•°æ®è½¬å‘ç»™åç«¯æœåŠ¡(SpringBoot)")])]),t._v(" .")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126163230-c3hofe7.png",alt:"image"}})]),t._v(" "),a("p",[t._v("ä¸‹é¢ç®€è¿°ä¸€ä¸‹è¿™ä¸ªç»“æœå‘ç°çš„æ­¥éª¤.")]),t._v(" "),a("h5",{attrs:{id:"å‹æµ‹æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‹æµ‹æ–¹å¼"}},[t._v("#")]),t._v(" å‹æµ‹æ–¹å¼")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„æµ‹è¯•åˆ†ä¸ºäº†ä¸¤ä¸ªæ­¥éª¤, å…ˆè¿›è¡Œäº†åŸºå‡†æµ‹è¯•. ç„¶åæ‰è¿›è¡Œçš„å…¨é“¾è·¯å‹æµ‹.")]),t._v(" "),a("h6",{attrs:{id:"åŸºå‡†æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºå‡†æµ‹è¯•"}},[t._v("#")]),t._v(" åŸºå‡†æµ‹è¯•")]),t._v(" "),a("p",[t._v("å› ä¸ºå…¨é“¾è·¯å‹æµ‹çš„å˜é‡è¿‡å¤š, æˆ‘ä»¬æ— æ³•å‡†ç¡®çš„æµ‹è¯•å‡ºç³»ç»Ÿçš„æ€§èƒ½ä»¥åŠå¯èƒ½çš„ç“¶é¢ˆæ‰€åœ¨åœ°æ–¹. å› æ­¤, éœ€è¦å…ˆæ§åˆ¶å˜é‡, è®©è¢«æµ‹è¯•çš„ç³»ç»Ÿè¶³å¤Ÿçš„ç®€å•. è¿™æ ·å¯ä»¥æ›´å¥½çš„è¡¡é‡å‡ºç³»ç»Ÿçš„åŸºå‡†æ€§èƒ½.")]),t._v(" "),a("h6",{attrs:{id:"å…¨é“¾è·¯æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¨é“¾è·¯æµ‹è¯•"}},[t._v("#")]),t._v(" å…¨é“¾è·¯æµ‹è¯•")]),t._v(" "),a("p",[t._v("è™½ç„¶æˆ‘ä»¬åŸºå‡†æµ‹è¯•å, èƒ½å¤Ÿå¾—åˆ°å‡†ç¡®çš„èŠ‚ç‚¹çš„åŸºå‡†ç³»ç»Ÿ, ä½†æ˜¯å®é™…é“¾è·¯ç‰¹åˆ«å¤æ‚. æœ€ç»ˆä»»ä½•ä¸€ä¸ªç¯èŠ‚å‡ºç°æ€§èƒ½ç“¶é¢ˆéƒ½ä¼šå½±å“ç³»ç»Ÿåœ¨ç”¨æˆ·ä½¿ç”¨æ—¶å€™çš„å®é™…æ€§èƒ½.")]),t._v(" "),a("p",[t._v("å› æ­¤éœ€è¦æŠŠèŠ‚ç‚¹æ”¾åˆ°"),a("strong",[t._v("å…¨é“¾è·¯ä¸­è¿›è¡Œå‹æµ‹")]),t._v(". æœ€ç»ˆå¾—åˆ°ç³»ç»Ÿçš„å®é™…å“åº”æ€§èƒ½. ä»¥ä¾¿æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆ,è¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„ä¼˜åŒ–.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_20-19-17-20231119112307-nkw53nk.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨: æ•´ä½“çš„æ€§èƒ½æµ‹è¯•ä¸ç»“æœä¸æˆ‘ä»¬æ­¤æ–‡çš„ä¸»é¢˜ä¸ç”šç›¸å…³, è¿™é‡Œåªå±•å¼€ä»‹ç»å…¶ä¸­çš„å¯¹äºä½¿ç”¨ Jmeter è¿›è¡Œé™é€Ÿä¸ä¸é™é€Ÿæµ‹è¯•ä¹‹é—´çš„å·®å¼‚. ä»è€Œè¯´æ˜æˆ‘ä»¬ä¸Šé¢çš„å‡æƒ³çš„é”™è¯¯.")])]),t._v(" "),a("h5",{attrs:{id:"å¯¹multipart-form-dataå’Œhttpservletinputstreamä½¿ç”¨jmeterè¿›è¡Œå‘å‹æµ‹è¯•-æ— é™é€Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹multipart-form-dataå’Œhttpservletinputstreamä½¿ç”¨jmeterè¿›è¡Œå‘å‹æµ‹è¯•-æ— é™é€Ÿ"}},[t._v("#")]),t._v(" å¯¹multipart/form-dataå’ŒHttpServletInputStreamä½¿ç”¨Jmeterè¿›è¡Œå‘å‹æµ‹è¯•.æ— é™é€Ÿ")]),t._v(" "),a("p",[t._v("æ­¤æ—¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„. æ•´ä¸ªè¿‡ç¨‹æµ‹è¯•ä¸å‡ºä»€ä¹ˆå¼‚å¸¸æƒ…å†µ. æ•´ä½“çš„å“åº”æ—¶é—´æ¯” åŸºå‡†æµ‹è¯•ä¼šå·®å¾ˆå¤š. åŸºå‡†æµ‹è¯•çš„å›¾ç‰‡ä¸Šä¼ ä¸ç®¡æ˜¯ multipart/form-data, è¿˜æ˜¯ HttpServletInputStream æ–¹å¼éƒ½åœ¨ 10ms ä»¥å†….")]),t._v(" "),a("p",[t._v("ä½†æ˜¯åœ¨å…¨é“¾è·¯çš„æµ‹è¯•è¿‡ç¨‹ä¸­, æ•´ä½“æ—¶é—´ä¼šæ¥åˆ° 40-100ms å·¦å³. åœ¨æ­¤ä¸å±•å¼€.")]),t._v(" "),a("h5",{attrs:{id:"å¯¹multipart-form-dataå’Œhttpservletinputstreamä½¿ç”¨jmeterè¿›è¡Œå‘å‹æµ‹è¯•-é™é€Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹multipart-form-dataå’Œhttpservletinputstreamä½¿ç”¨jmeterè¿›è¡Œå‘å‹æµ‹è¯•-é™é€Ÿ"}},[t._v("#")]),t._v(" å¯¹multipart/form-dataå’ŒHttpServletInputStreamä½¿ç”¨Jmeterè¿›è¡Œå‘å‹æµ‹è¯•.é™é€Ÿ")]),t._v(" "),a("p",[t._v("å½“æˆ‘ä»¬ä½¿ç”¨"),a("strong",[t._v("é™é€Ÿæ–¹å¼")]),t._v("å¯¹ä¸Šä¼ æ¥å£è¿›è¡Œå‹æµ‹çš„æ—¶å€™, æˆ‘ä»¬å‘ç°: æ•´ä½“çš„ä¸Šä¼ æ—¶é—´æˆ–è€…æ˜¯è¯·æ±‚æ—¶é—´ä¼šæ¥åˆ° 10 ç§’ä»¥ä¸Š, ä½†æ˜¯ä¸ç®¡æ˜¯ Nginx çš„ upstream_response_time è¿˜æ˜¯å†ä¸‹ä¸€çº§çš„ Ingress çš„ upstream_response_time, æ—¶é—´éƒ½åœ¨"),a("strong",[t._v("æ¯«ç§’å“åº”çº§")]),t._v(". è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ curl è¿›è¡ŒéªŒè¯.")]),t._v(" "),a("blockquote",[a("p",[t._v("æµ‹è¯•æ–‡ä»¶: "),a("a",{attrs:{href:"https://pic.3gbizhi.com/2020/0826/20200826123917742.jpg",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pic.3gbizhi.com/2020/0826/20200826123917742.jpg"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("curl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("O")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rate "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("X")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20200826123917742.")]),t._v("jpg https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("benchmark"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("syncUploadFile\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("è¯·æ±‚ç«¯çš„ curl æ—¥å¿—. èŠ±è´¹äº† 22 ç§’")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_21-24-3-20231119112306-68ub6ng.png",alt:""}})]),t._v(" "),a("p",[t._v("å¦‚ä¸‹æ˜¯ "),a("a",{attrs:{href:"https://sls.console.aliyun.com/lognext/project/op-nginx/logsearch/leo-nginx?encode=base64",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx"),a("OutboundLink")],1),t._v(" çš„æ—¥å¿—, æ•´ä½“ Nginx çš„å“åº”æ—¶é—´æ˜¯ 21.86 ç§’. ä½†æ˜¯ Ingress çš„æ•´ä½“å“åº”æ—¶é—´åªæœ‰ 87ms.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_21-29-5-20231119112306-tdfgc4x.png",alt:""}})]),t._v(" "),a("p",[t._v("ä¸‹é¢æ˜¯åœ¨ Ingress çš„è§†è§’è®°å½•ä¸‹çš„æ—¥å¿—. åœ¨ Ingress ä¸‹çš„ upstream_response_time æ˜¯ 50ms.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_21-23-36-20231119112307-3yeub8j.png",alt:""}})]),t._v(" "),a("p",[t._v("ä¸ç®¡æ˜¯ ingress è¿˜æ˜¯ nginx éƒ½è¡¨ç°å‡ºäº†åç«¯æœåŠ¡çš„æ•´ä½“å¤„ç†æ—¶é—´éƒ½ç‰¹åˆ«çš„çŸ­. å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³åƒçš„é‚£æ ·çš„ Nginx&Ingress ä¼šå¯¹æˆ‘ä»¬çš„ HttpRequest æ•°æ®è¿›è¡Œå®æ—¶è½¬å‘.")]),t._v(" "),a("h4",{attrs:{id:"nginxçš„å®é™…æ”¶å‘æ•°æ®æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„å®é™…æ”¶å‘æ•°æ®æ¨¡å‹"}},[t._v("#")]),t._v(" Nginxçš„å®é™…æ”¶å‘æ•°æ®æ¨¡å‹")]),t._v(" "),a("p",[t._v("ä¸‹é¢æ˜¯ Nginx çš„å®é™…çš„æ¥æ”¶æ—¶åºå›¾, å›¾ä¸­é™¤äº†å¯¹ä¸Šé¢çš„ request åŒ…çš„æ”¶å‘è§„åˆ™è¿›è¡Œäº†è¡¨ç¤ºå¤–, è¿˜å¯¹ç›¸åº”çš„"),a("strong",[t._v("è¿æ¥ä¸å“åº”æ—¶é—´")]),t._v("è¿›è¡Œäº†è¯¦ç»†çš„æ ‡æ³¨.")]),t._v(" "),a("ol",[a("li",[t._v("request data æ‹†åˆ†ä¸ºäº† Header ä¸ Body ä¸¤ä¸ªéƒ¨åˆ†çš„è¡¨ç¤º.")]),t._v(" "),a("li",[t._v("nginx é¦–å…ˆæ¥æ”¶åˆ°è¯·æ±‚çš„ Header")]),t._v(" "),a("li",[t._v("Header æ¥æ”¶å®Œæˆåæ¥æ”¶åˆ°çš„æ˜¯è¯·æ±‚çš„ Body (ä¹Ÿå°±æ˜¯è¿™é‡Œçš„å›¾ç‰‡)")]),t._v(" "),a("li",[t._v("Header åœ¨æ¥æ”¶å®Œæˆå, å¹¶ä¸ä¼šç«‹å³å‘é€ç»™åç«¯æœåŠ¡. ä¼šæ¥ç€æ¥æ”¶ RequestBody;")]),t._v(" "),a("li",[a("strong",[t._v("RequestData åœ¨å®Œå…¨æ¥æ”¶å®Œæˆå, æ‰ä¼šå‘åç«¯å‘èµ·è¿æ¥")]),t._v(".")]),t._v(" "),a("li",[a("strong",[t._v("è¿æ¥å»ºç«‹(è¿æ¥å»ºç«‹æ—¶é—´: upstream_connect_time)åå†æŠŠæ•°æ®è½¬å‘ç»™åç«¯æœåŠ¡ (upstream_server)")])]),t._v(" "),a("li",[t._v("ä»å‘é€ç¬¬ä¸€ä¸ªå­—èŠ‚, åˆ°æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„ç¬¬ä¸€ä¸ªå­—èŠ‚(Header) çš„æ—¶é—´è®°ä¸ºäº†: "),a("strong",[t._v("upstream_head_time")])]),t._v(" "),a("li",[t._v("ä»å‘åç«¯æœåŠ¡ å‘é€ç¬¬ä¸€ä¸ªå­—èŠ‚ åˆ° å®Œå…¨æ¥æ”¶åˆ°åç«¯å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚. è¿™ä¸ªæ—¶é—´è®°ä¸º: "),a("strong",[t._v("upstream_response_time")]),t._v(";")]),t._v(" "),a("li",[t._v("å½“å®Œå…¨æ¥æ”¶åˆ°åç«¯æœåŠ¡çš„ response å, æ‰å¼€å§‹å‘ client è¿”å› å“åº”æ•°æ®.")]),t._v(" "),a("li",[t._v("ä»æ¥æ”¶åˆ°ç”¨æˆ·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°, å®Œå…¨å‘é€å®Œè¿”å›ç»™ç”¨æˆ·çš„æœ€åä¸€ä¸ªå­—èŠ‚. è®°ä¸º: "),a("strong",[t._v("request_time")]),t._v(";")])]),t._v(" "),a("blockquote",[a("p",[t._v("å…·ä½“çš„æ—¥å¿—æ ¼å¼ä¸æ—¶åºè¯´æ˜å¯ä»¥å‚è€ƒ: "),a("a",{attrs:{href:"https://confluence.zhenguanyu.com/pages/viewpage.action?pageId=449797085",target:"_blank",rel:"noopener noreferrer"}},[t._v("19. Nginxæ—¥å¿—æ ¼å¼è¯¦ç»†è¯´æ˜"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126163812-0jbhstf.png",alt:"image"}})]),t._v(" "),a("p",[t._v("è¿™é‡Œæœ‰äº†è¿™ä¸ª Nginx çš„ä¼ è¾“ç‰¹æ€§, é‚£å°±è¯´æ˜äº†"),a("strong",[t._v("åœ¨ tomcat ä¾§çš„å›¾ç‰‡æ¥æ”¶çš„æ€§èƒ½æ˜¯ä¸å·®çš„, è€Œä¸”æ˜¯ç‰¹åˆ«å¿«")]),t._v("çš„; å¦‚æœæœ‰è¾ƒæ…¢çš„è¯·æ±‚, è¿™ä¸ªè¯·æ±‚æ¥æ”¶çš„æ—¶å€™å®é™…æµªè´¹(é˜»å¡)åœ¨äº† Nginx ä¾§çš„è¯·æ±‚æ¥æ”¶ä¸Š, å¹¶æ²¡æœ‰å¯¹æˆ‘ä»¬çš„ Tomcat çš„å›¾ç‰‡æ¥æ”¶æœ‰å½±å“, å”¯ä¸€çš„å½±å“é‚£å°±æ˜¯åœ¨ Tomcat å¤„ç†å›¾ç‰‡æ¥æ”¶çš„æ—¶å€™, å·²ç»æœ‰ä¸€ä¸ªå›ºå®šçš„å¾ˆå¤§çš„ delay äº†. è¿™ä¸ªä¼¼ä¹å¥½åƒå°±æ˜¯æˆ‘ä»¬æ‰¾çš„é‚£ä¸ªå›ºå®šæ—¶å»¶å‘¢? ä¸ç®¡æ€æ ·, å®ƒæ¨ç¿»äº†å‰é¢çš„ Tomcat çš„çº¿ç¨‹å‡è®¾æ¨¡å‹. ä¸‹é¢å…·ä½“çš„å†å›è¿‡å¤´æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªè¯·æ±‚è¿‡ç¨‹.")]),t._v(" "),a("h4",{attrs:{id:"çœŸå®çš„é™æµæ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çœŸå®çš„é™æµæ¨¡å‹"}},[t._v("#")]),t._v(" çœŸå®çš„é™æµæ¨¡å‹")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä¹‹å‰çš„ Tomcat çš„çº¿ç¨‹æ¨¡å‹, æˆ‘ä»¬å¤§æ¦‚çš„ç»™å‡ºäº†ä¸€ä¸ªéå¸¸ç²—ç³™çš„çº¿ç¨‹æ¨¡å‹. å†æ¥çœ‹ä¸€ä¸‹å®ƒæ˜¯æ€æ ·çš„:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/Tomcat%E7%BA%BF%E7%A8%8B%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%9E%8B-20231119112307-rfadjbh.png",alt:""}})]),t._v(" "),a("p",[t._v("åœ¨ä¸Šå›¾ä¸­, æˆ‘ä»¬ä¹‹å‰æƒ³è±¡çš„æ˜¯"),a("strong",[t._v("åœ¨ http çº¿ç¨‹ä¸­çš„å¤„ç†ä¸­æœ‰ä¸€ä¸ªå‰ç½®çš„å›¾ç‰‡æ¥æ”¶")]),t._v(", ç”±äºè¿™ä¸ªå›¾ç‰‡æ¥æ”¶åœ¨é«˜è´Ÿè½½ä¸‹å¯èƒ½å˜å¾—å¼‚å¸¸çš„æ…¢, è¿™æ ·å¯¼è‡´äº†è¯·æ±‚å˜å¾—ç‰¹åˆ«çš„é•¿. æœ€é‡è¦çš„æ˜¯, è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ª"),a("strong",[t._v("å›ºå®šçš„æ—¶å»¶")]),t._v(". å¯¼è‡´ç”¨æˆ·çš„è¯·æ±‚åœ¨"),a("strong",[t._v("å¼€å§‹å¤„ç†çš„æ—¶å€™å¯èƒ½å·²ç»è¿‡æœŸ")]),t._v("äº†. ä¹Ÿå°±æ˜¯è¿™ä¸ªå›¾:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%83%B3%E8%B1%A1%E7%9A%84%E6%8B%8D%E7%85%A7%E6%A3%80%E6%9F%A5%E7%9A%84%E6%B5%81%E7%A8%8B-20231119112306-cg0y14g.png",alt:""}})]),t._v(" "),a("p",[t._v("è€Œä¸Šé¢çš„ nginx çš„å“åº”æ—¶åºå‘Šè¯‰æˆ‘ä»¬å®é™…å¹¶æ²¡æœ‰è¿™ä¸€ä¸ªæƒ³è±¡çš„  "),a("strong",[t._v('"è¿‡æ…¢çš„ æ¥æ”¶å›¾ç‰‡"')]),t._v("  è¿‡ç¨‹. è€Œåœ¨ç”¨æˆ·çš„çœŸå®çš„æ…¢è¯·æ±‚ä¸­, nginx ä¼šæœ‰ä¸€ä¸ªè¿‡é•¿çš„å›¾ç‰‡æ¥æ”¶æ—¶é—´. é‚£ä¸Šé¢çš„ tomcat çš„æ¥æ”¶å›¾ç‰‡è¿™ä¸ªè¿‡æ…¢çš„è¿‡ç¨‹ä¸å­˜åœ¨å, é‚£è¿™ä¸ªè¿‡æ…¢çš„å›ºå®šæ—¶å»¶æ˜¯å¦æ˜¯ nginx æœ¬èº«çš„å›¾ç‰‡æ¥æ”¶è¿™ä¸ªæ—¶é—´å‘¢?")]),t._v(" "),a("p",[t._v("å®é™…å¹¶ä¸æ˜¯çš„, æˆ‘ä»¬çš„"),a("strong",[t._v("è¯·æ±‚åœ¨é«˜å³°æœŸçš„ç¡®æœ‰ç”¨æˆ·å¼±ç½‘ç¯å¢ƒä¸‹çš„è¿‡é•¿çš„ä¸Šä¼ å›¾ç‰‡æ—¶é—´çš„è¯·æ±‚")]),t._v(". è¿™ä¸ªå¯åœ¨ nginx çš„è®¿é—®æ—¥å¿—ä¸­è¿‡æ»¤å‡ºæ¥. è¿™ä¸ªä¸ç®¡æ˜¯å¦æ˜¯åœ¨æ•…éšœçš„æ—¶å€™éƒ½ä¼šæœ‰è¿™æ ·çš„è¯·æ±‚. è€Œä¸æ˜¯å› ä¸ºæˆ‘ä»¬æ•…éšœäº†, å¯¼è‡´ nginx çš„è´Ÿè½½å˜é«˜äº†, ä»è€Œä½¿ nginxçš„è´Ÿè½½åœ¨é«˜æ—¶çš„æ¥æ”¶å›¾ç‰‡çš„æ—¶é—´å˜é•¿. è¿™çœ‹ä¼¼ä¹æ˜¯ä¸€ä¸ªåˆç†çš„æ¨ç†, ä½†æ˜¯å®é™…æˆ‘ä»¬æŸ¥é˜…äº† nginx ç›¸å…³çš„æ—¥å¿—ä¸ç›‘æ§åå‘ç°è¿™ä¸ªå¹¶æ²¡æœ‰ç‰¹æ®Šçš„å˜åŒ–. æœ€é‡è¦çš„ä¸€ä¸ªè®ºæ®æ˜¯, "),a("strong",[t._v("nginx çš„è´Ÿè½½è¿œè¿œæ²¡æœ‰è¿‡è½½")]),t._v(".")]),t._v(" "),a("p",[t._v("å› æ­¤ä¸å¤ªå¯èƒ½åœ¨æ•…éšœçš„æ—¶å€™é€ æˆå¤ªå¤§çš„æ³¢åŠ¨.")]),t._v(" "),a("h5",{attrs:{id:"çœŸå®çš„tomcatçš„çº¿ç¨‹æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çœŸå®çš„tomcatçš„çº¿ç¨‹æ¨¡å‹"}},[t._v("#")]),t._v(" çœŸå®çš„tomcatçš„çº¿ç¨‹æ¨¡å‹.")]),t._v(" "),a("p",[t._v('ä¸ºäº†ææ¸…è¿™ä¸ª tomcat çš„å¤„ç†è¿‡ç¨‹, æˆ‘å†æ¬¡ç¿»é˜…äº† tomcat çš„æºä»£ç . ä¹‹å‰çš„åªæ˜¯ç²—ç•¥çš„çœ‹ Request.getParam(xxx) çš„æ–¹å¼çš„ç ”ç©¶ multipart/form-data æ–¹å¼çš„è¯·æ±‚æ¥æ”¶, å¹¶æ²¡æœ‰å½»åº•è§£å†³æˆ‘ä»¬çš„ç–‘é—®. ä¸Šé¢åªæ˜¯å¤§æ¦‚è§£é‡Šäº†å›¾ç‰‡åœ¨æˆ‘ä»¬ "ä¸»åŠ¨çš„è·å–" æ—¶æ‰ä¼šä»ä¸€ä¸ª ctx ä¸­è¿›è¡Œè§£æ, å¹¶ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ç»™æˆ‘ä»¬ç”¨. é‚£å®é™…ä¸Šè¿™ä¸ª ctx æ˜¯åœ¨æ›´ä¸Šä¸€å±‚çš„ tomcat çš„åè®®å¤„ç†ä»£ç å·²ç»åœ¨å®Œå…¨æ¥æ”¶åˆ°æ•´ä¸ª requestbody åå·²ç»é¢„è§£æå¤„ç†æ”¾åˆ°äº†å†…å­˜(æˆ–è€…ç¡¬ç›˜)ä¸­äº†, è¿˜æ˜¯è¯´è¿™ä¸ª request çš„å¤„ç†å°±æ˜¯æœ€åŸå§‹çš„è¯·æ±‚è§£æçš„åœ°æ–¹å‘¢? å¦‚æœ Request.getparam ä¸æ˜¯, é‚£å‰é¢çš„ "å‡æƒ³çš„åè®®è§£æå’Œbodyå­˜å‚¨" çš„åœ°æ–¹æ˜¯åœ¨å“ªå‘¢. ä»–æœ‰ç‹¬ç«‹çš„çº¿ç¨‹å—, æ˜¯å¤„ç† '),a("strong",[t._v("IOçº¿ç¨‹")]),t._v(" è¿˜æ˜¯å¤„äº "),a("strong",[t._v("worker çº¿ç¨‹")]),t._v("å‘¢.")]),t._v(" "),a("p",[t._v("æ ¸å¿ƒçš„ tomcat çš„æºç å¯ä»¥çœ‹ NIO çš„ connector ç›¸å…³çš„ä»£ç : "),a("a",{attrs:{href:"https://github.com/apache/tomcat/blob/8.5.x/java/org/apache/tomcat/util/net/NioEndpoint.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/apache/tomcat/blob/8.5.x/java/org/apache/tomcat/util/net/NioEndpoint.java"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("è¿™é‡Œä¸å¯¹ç›¸å…³çš„ä»£ç è¿›è¡Œå±•å¼€. å¦‚æœè¦è°ƒè¯•ç›¸å…³çš„ä»£ç å¯ä»¥å‚è€ƒ: "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/597375198",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tomcat æºç é˜…è¯»ä¸è°ƒè¯•ç¯å¢ƒæ­å»º - åŸºäºIdeaå’ŒTomcat 8.5"),a("OutboundLink")],1),t._v(", è¿™é‡Œç›´æ¥ç»™å‡ºçœŸå®çš„ Tomcat çš„çº¿ç¨‹æ¨¡å‹ä¸å¤„ç†æµç¨‹. å¹¶ä¸”è¿™é‡Œåªè§£é‡Š NIO æ¨¡å‹ç›¸å…³çš„æµç¨‹, å…¶å®ƒçš„æš‚æ—¶ä¸ä½œä»‹ç».")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126164429-3ggtmmr.png",alt:"image"}})]),t._v(" "),a("p",[t._v("æ•´ä¸ªè¯·æ±‚ä» Client ç«¯è¿‡æ¥, å…¶æµç¨‹å¦‚ä¸‹ ("),a("strong",[t._v("æè¿°ä¸æ˜¯ååˆ†å‡†ç¡®, ä»…ä½œç†è§£æ€§å‚è€ƒ, å®é™…ä»¥ tomcat æºä»£ç ä¸ºå‡†")]),t._v("):")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ä¸€ä¸ª HTTP è¯·æ±‚é€šè¿‡ "),a("strong",[t._v("acceptor")]),t._v(" è¢«æ¥æ”¶.")])]),t._v(" "),a("li",[a("p",[t._v('æ¥æ”¶åå»ºç«‹çš„è¿æ¥, ä¼šæ”¾åˆ° Poller ä¸­è¿›è¡Œç»Ÿä¸€çš„"è½®å¾ª", è¿™é‡Œçš„è½®å¾ªå®é™…æ˜¯ä½¿ç”¨äº† selector çš„ é˜»å¡çš„ IO å¤šè·¯å¤ç”¨çš„è½®å¾ª. æ•ˆç‡è¾ƒé«˜.')])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ Poller è¯»å–åˆ°çœŸå®çš„ Http è¯·æ±‚æ•°æ®å, å»ºç«‹ä¸€ä¸ª SockerProcessor, ç”¨è¿™ä¸ª "),a("strong",[t._v("SocketProcessor")]),t._v(" è¿›è¡Œå¤„ç†.")])]),t._v(" "),a("li",[a("p",[t._v("è€Œè¿™ä¸ªå¤„ç†å™¨(SocketProcessor) æœ€ååŒ…è£…æˆä¸€ä¸ª HTTP ä»»åŠ¡. æœ€ç»ˆæäº¤åˆ° HTTP çº¿ç¨‹æ± ä¸­è¿›è¡Œæ‰§è¡Œ. åœ¨æ‰§è¡Œå‰, ä¼šè¿›å…¥åˆ°Http Task Queue.")])]),t._v(" "),a("li",[a("p",[t._v("å½“ä»»åŠ¡ä» HttpTaskQueue ä¸­å–å‡ºå, æœ€ç»ˆæ‰"),a("strong",[t._v("æœ‰æœºä¼šæ‰§è¡Œ")]),t._v(". è¢«æ”¾å…¥åˆ° Http11NioThreadPool ä¸­è¿›è¡Œæ‰§è¡Œ. è€Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­. è¿™ä¸ªè¿‡ç¨‹åˆå¯ä»¥ç»†åˆ†ä¸º:")]),t._v(" "),a("ul",[a("li",[t._v("HTTP åè®®è§£æ. å¦‚ HTTP2 åè®®å‡çº§. HTTPS åè®®è®¤è¯. æˆ–è€… websocket ç›¸å…³çš„åè®®å‡çº§ç­‰.")]),t._v(" "),a("li",[t._v("åè®®å¤„ç†å®Œæˆå, æ˜¯ Header ç›¸å…³çš„æ¥æ”¶å’Œå¤„ç†.")]),t._v(" "),a("li",[t._v("ç„¶åæ‰æ˜¯"),a("strong",[t._v("çœŸå®çš„è¯·æ±‚æ•°æ®è§£æä¸åŒ…è£…")]),t._v(". (æ³¨: è¿™é‡Œå®é™…å¾ˆè–„, è¯´è–„æ˜¯è¯´çš„å…¶æ•°æ®å¤„ç†, åè®®æœ¬èº«å’Œ tomcat çš„ç»“æ„è®¾è®¡è¿˜æ˜¯å¾ˆå¤æ‚çš„)")]),t._v(" "),a("li",[t._v("æœ€ç»ˆåˆ°è¾¾æˆ‘ä»¬çš„ Servlet.")])])])]),t._v(" "),a("p",[t._v("è¿™é‡Œå…ˆè¯´ä¸€äº›ç®€å•çš„ç»“è®º:")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("åè®®çš„è§£æç›¸å…³çš„å¤„ç†éƒ½æ˜¯åœ¨ http çš„ä¸šåŠ¡å¤„ç†çº¿ç¨‹æ± ä¸­è¿›è¡Œçš„. æˆ‘ä»¬çš„ servelt è¿è¡Œæ—¶ç”¨åˆ°çš„çº¿ç¨‹æ± å°±æ˜¯è‡ªå§‹è‡³ç»ˆçš„çº¿ç¨‹æ± . å‰é¢å¹¶æ²¡æœ‰å…¶å®ƒçš„çº¿ç¨‹æ± å¤„ç†.")])]),t._v(" "),a("li",[t._v("æ‰€æœ‰çš„åè®®è§£æä¸å¤„ç†éƒ½æ˜¯"),a("strong",[t._v("æµå¼")]),t._v("çš„, å‰é¢å¹¶æ²¡æœ‰å¤ªå¤šçš„ç¼“å†²ä»¥åŠæ•°æ®çš„é¢„å­˜å‚¨å’Œé¢„å¤„ç†.")]),t._v(" "),a("li",[t._v("ä¸Šé¢æåˆ°çš„ ctx å®é™…ä¹Ÿæ˜¯å¯¹ httprequest ä¸­çš„ inputstream çš„ç›¸å…³çš„ç®€å•å°è£…, è€Œè¿™ä¸ª inputstream ä¹Ÿæ˜¯å¯¹ socket inputstream çš„æ•°æ®çš„ç®€å•ç¼“å­˜. å¹¶æ²¡æœ‰å¤æ‚çš„å¤§ç¼“å­˜.")])]),t._v(" "),a("h4",{attrs:{id:"çœŸå®çš„é™æµæ¨¡å‹-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çœŸå®çš„é™æµæ¨¡å‹-2"}},[t._v("#")]),t._v(" çœŸå®çš„é™æµæ¨¡å‹")]),t._v(" "),a("p",[t._v("å¦‚ä¸Šé¢çš„åˆ†æ, è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªé˜Ÿåˆ—. "),a("strong",[t._v("è¿™ä¸ªé˜Ÿåˆ—çš„å¤§å°å°±åŸºæœ¬ç­‰ä»·äºè¿æ¥æ•°")]),t._v(". ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„"),a("strong",[t._v("é»˜è®¤ä¸€ä¸‡ä¸ªè¿æ¥")]),t._v(". è€Œæˆ‘ä»¬çš„å…¬å¸çš„"),a("strong",[t._v("é»˜è®¤çš„é…ç½®çš„ HTTP çº¿ç¨‹æ± çš„å¤§å°ä¸º 500")]),t._v(". å†çœ‹ä¸€ä¸‹ä¸Šé¢çš„é‚£ä¸ªç²—ç³™çš„çº¿ç¨‹æ¨¡å‹:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/Tomcat%E7%BA%BF%E7%A8%8B%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%9E%8B-20231119112307-1rooyo9.png",alt:""}})]),t._v(" "),a("p",[t._v("å¦‚æœå’Œä¸Šé¢çš„æ›´å®Œæ•´çš„ TOMCAT çš„çº¿ç¨‹æ¨¡å‹ç›¸æ¯”çš„è¯, è¿™ä¸ªæ¨¡å‹å°±å¯ä»¥æ›´è¿›ä¸€æ­¥çš„è¿›è¡Œæè¿°å’Œæ¨æµ‹.")]),t._v(" "),a("p",[t._v('ä¸Šé¢æˆ‘ä»¬è¯´çš„æ˜¯ç”±äº "å‡æƒ³çš„å›¾ç‰‡æ¥æ”¶" å ç”¨äº†å¤§é‡çš„å‰ç½®æ—¶é—´å¯¼è‡´äº†çº¿ç¨‹çš„å¤„ç†æ—¶é•¿å˜é•¿, å¯¼è‡´äº†çº¿ç¨‹æŒ¤å . ç”±äºè¿™ä¸ªå‰ç½®çš„å›¾ç‰‡æ¥æ”¶æ…¢ç†ç”±ä¸æˆç«‹å, '),a("strong",[t._v("è¿™ä¸ªæŒ¤å çš„åŸå› å°±åªå‰©ä¸‹äº†åé¢çš„ä¸šåŠ¡ä»£ç å¤„ç†æ…¢å¯¼è‡´çš„ http çº¿ç¨‹æŒ¤å…‘")]),t._v(".")]),t._v(" "),a("p",[t._v("ä½†æ˜¯è¿™ä¸ª "),a("strong",[t._v("çº¿ç¨‹æŒ¤å…‘")]),t._v(" å¹¶ä¸èƒ½é€ æˆ æ‹ç…§æ£€æŸ¥ç›¸å…³çš„çº¿ç¨‹ äº§ç”Ÿé™æµ.")]),t._v(" "),a("blockquote",[a("p",[t._v('å®é™…äº§ç”Ÿ "æ‹ç…§æ£€æŸ¥çº¿ç¨‹é™æµ" çš„åŸå› è¿˜æ˜¯å› ä¸ºè‡ªèº«çš„æ‹ç…§æ£€æŸ¥ç›¸å…³çš„çº¿ç¨‹çš„å¤„ç†æ—¶é•¿å˜é•¿çš„åŸå› . å¯¼è‡´äº†å¹¶å‘å˜é«˜, ç„¶åäº§ç”Ÿäº†é™æµ.')])]),t._v(" "),a("p",[t._v("ä½†æ˜¯"),a("strong",[t._v("è¯·æ±‚å¤„ç†æ—¶çš„å›ºå®šæ—¶å»¶")]),t._v("è¿˜æœ‰æ²¡æœ‰æ‰¾åˆ°åŸå› . ä»æ•´ä½“çš„é“¾è·¯æ¥çœ‹, æŠŠæ•´ä¸ªè¯·æ±‚è¿‡ç¨‹çš„è¯·æ±‚å›¾å†ç”»å‡ºæ¥çœ‹çœ‹:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-19_23-31-7-20231119112307-d6d1uho.png",alt:""}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å·²ç»æ’é™¤äº† nginx å’Œ ingress ç›¸å…³çš„æ€§èƒ½é—®é¢˜. åŒæ—¶ä¹Ÿæ²¡æœ‰äº†å‡æƒ³ä¸­çš„ tomcat æ¥æ”¶å›¾ç‰‡æ…¢çš„é—®é¢˜. é‚£"),a("strong",[t._v("å”¯ä¸€æœ‰å¯èƒ½äº§ç”Ÿå›ºå®šçš„è¯·æ±‚æ—¶å»¶çš„åœ°æ–¹")]),t._v("å°±æ˜¯ä¸Šé¢çš„: "),a("mark",[a("strong",[t._v("HTTP TASK QUEUE")])]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("å¦‚æœè¯·æ±‚è¢«æ”¾åˆ°äº†è¯·æ±‚é˜Ÿåˆ—, æ²¡æœ‰è¢«åŠæ—¶çš„é™å‡ºå¤„ç†. é‚£å°±æœ‰å¯èƒ½åœ¨å¤„ç†è¿™ä¸ªè¯·æ±‚çš„æ—¶å€™å·²ç»è¿‡æœŸäº†. (ç”¨æˆ·å·²ç»å…³é—­,æˆ–è€…æ˜¯è¶…è¿‡äº†ä¸€åˆ†é’Ÿ.)")])]),t._v(" "),a("p",[a("strong",[t._v("è€Œè¦è®©è¿™ä¸ªé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ²¡æœ‰åŠæ—¶çš„è¢«è°ƒåº¦, é‚£åªéœ€è¦ä¸€ä¸ªåŸå› . å°±æ˜¯ http çº¿ç¨‹æ± å·²ç»è¢«å æ»¡äº†. è¿™ä¸ª http çº¿ç¨‹æ± è¢«ç‚¹æ»¡æœ‰ä¸¤ä¸ªè¯±å› ")]),t._v(":")]),t._v(" "),a("ol",[a("li",[t._v("è¯·æ±‚å˜å¤šäº†.")]),t._v(" "),a("li",[t._v("è¯·æ±‚å˜æ…¢äº†.")])]),t._v(" "),a("p",[t._v("å¦‚æœä»¥ä¸Šçš„ä»»æ„ä¸€ä¸ªåŸå› å‡ºç°éƒ½æœ‰å¯èƒ½æŠŠè¿æ¥æ± å æ»¡. è€Œè¿™ä»¬è¿™é‡Œå®é™…ä¸Šä¸¤ä¸ªå› ç´ éƒ½å‡ºç°äº†. å‡†ç¡®çš„è¯´, æ˜¯"),a("strong",[t._v("å…ˆå‡ºç°äº†è¯·æ±‚å˜æ…¢")]),t._v("äº†. ç„¶åå†ç”±äº"),a("strong",[t._v("ç”¨æˆ·çš„åå¤é‡è¯•å¯¼è‡´è¯·æ±‚åˆå˜å¤šäº†")]),t._v(". å› æ­¤, æˆ‘ä»¬è¿™é‡Œç»™å‡ºçš„å›ºå®šæ—¶å»¶çš„è§£é‡Šå¦‚ä¸‹:")]),t._v(" "),a("blockquote",[a("p",[t._v("ç”±äºè¯·æ±‚å˜æ…¢. ä¸ç®¡æ˜¯æ‹ç…§æ£€æŸ¥çš„è¯·æ±‚å˜æ…¢, è¿˜æ˜¯å…¶å®ƒçš„è¯·æ±‚å˜æ…¢. ç»¼åˆçœ‹å°±æ˜¯è¯·æ±‚å˜æ…¢å¯¼è‡´äº†æ•´ä½“çš„è¯·æ±‚çº¿ç¨‹å ç”¨å˜å¤š. æœ€ç»ˆæŠŠæ‰€æœ‰çš„ HTTP çº¿ç¨‹æ± å æ»¡. å¯¼è‡´æŸäº›ä»»åŠ¡å¾—ä¸åˆ°è°ƒåº¦, å…¶ä¸­å°±åŒ…å«æ‹ç…§æ£€æŸ¥çº¿ç¨‹.")])]),t._v(" "),a("p",[t._v("ç»¼åˆåˆ†æå°±æ˜¯:")]),t._v(" "),a("ol",[a("li",[t._v("ç”±äº"),a("strong",[t._v("å†…å®¹æ¥å£å˜æ…¢, å¯¼è‡´äº†æ•´ä½“çš„å¤„ç†æ—¶é—´å˜é•¿")]),t._v(".")]),t._v(" "),a("li",[t._v("æ•´ä½“æ—¶é—´å˜é•¿å, å…¶ä¸­åœ¨ 20:00 åæ‹ç…§æ£€æŸ¥çš„æ¥å£è¿›ä¸€æ­¥çš„å˜æ…¢. å¯¼è‡´äº†æ‹ç…§æ£€æŸ¥æ¥å£çš„å¹¶å‘è¶…è¿‡äº†è®¾å®šçš„ 100 å¹¶å‘çš„é˜ˆå€¼. ä»è€Œè§¦å‘äº†é™æµ.")]),t._v(" "),a("li",[t._v("åŒæ—¶, ä¸Šé¢çš„è¿›ä¸€æ­¥çš„æ¶åŒ–å˜æ…¢å, "),a("strong",[t._v("HTTP çº¿ç¨‹æ± çš„çº¿ç¨‹å·²ç»å®Œå…¨è¢«ä½¿ç”¨å®Œ")]),t._v(". å¯¼è‡´ååºçš„æ‹ç…§æ£€æŸ¥è¯·æ±‚(ä¹Ÿæœ‰å¯èƒ½æœ‰å…¶å®ƒçš„è¯·æ±‚) è¢«"),a("strong",[t._v("é˜»å¡åœ¨ HTTP è¯·æ±‚é˜Ÿåˆ—ä¸­")]),t._v(". å¯¼è‡´è¯·æ±‚çš„å¤„ç†æ—¶é—´è¢«å»¶è¿Ÿäº†. è€Œä¸”è¿™ä¸ªå»¶è¿Ÿæ—¶é—´å¯èƒ½è¿˜ä¸å°. å¹³å‡è¾¾åˆ°äº† 20-30 ç§’å·¦å³.")])]),t._v(" "),a("h4",{attrs:{id:"æˆ‘ä»¬èƒ½å¾—åˆ°ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘ä»¬èƒ½å¾—åˆ°ä»€ä¹ˆ"}},[t._v("#")]),t._v(" æˆ‘ä»¬èƒ½å¾—åˆ°ä»€ä¹ˆ")]),t._v(" "),a("ol",[a("li",[t._v("nginx å¹¶æ²¡æœ‰åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·ä¼ è¾“æˆ‘ä»¬çš„æ•°æ®. è€Œæ˜¯"),a("strong",[t._v("åŸºäºå®Œå…¨ç¼“å­˜çš„ç­–ç•¥")]),t._v("è¿›è¡Œäº†. è¿™æ˜¯é»˜è®¤çš„, å¯ä»¥ä¿®æ”¹. ä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰. å¹¶ä¸”ä¹Ÿä¸æ¨è.")]),t._v(" "),a("li",[a("strong",[t._v("Tomcat å¹¶æ²¡æœ‰åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·. æµå¼çš„ç›´æ¥æ¥æ”¶ C ç«¯çš„å›¾ç‰‡. è€Œæ˜¯è¢« Nginx ç¼“å­˜å®Œæˆå, å†è½¬å‘ç»™æˆ‘ä»¬. åŒæ—¶æˆ‘ä»¬è¿”å›ç»™ Nginx çš„å“åº”ä¹Ÿæ²¡æœ‰åŠæ—¶çš„è¿”å›ç»™ C ç«¯. è€Œæ˜¯åœ¨æ¥æ”¶åˆ°å®Œæ•´çš„ response åå†è¿”å›ç»™ C ç«¯.")])]),t._v(" "),a("li",[t._v("tomcat çš„é»˜è®¤çš„çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸åˆç†. è¿™é‡Œçš„ 500 åœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™ç‰¹åˆ«å®¹æ˜“é˜»å¡.")]),t._v(" "),a("li",[t._v("åŒæ—¶ tomcat çš„"),a("strong",[t._v("çº¿ç¨‹æ•°ä¸è¿æ¥æ•°çš„é…æ¯”å…³ç³»")]),t._v("éœ€è¦é‡æ–°å®¡è§†.")])]),t._v(" "),a("h4",{attrs:{id:"å…¶å®ƒå¯èƒ½çš„ç–‘é—®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒå¯èƒ½çš„ç–‘é—®"}},[t._v("#")]),t._v(" å…¶å®ƒå¯èƒ½çš„ç–‘é—®")]),t._v(" "),a("blockquote",[a("p",[t._v("nginxå¯ä»¥ä¿®æ”¹ä¸ºå®æ—¶è½¬å‘ä¹ˆ?")])]),t._v(" "),a("ol",[a("li",[t._v("å¯ä»¥, ä½†æ˜¯ä¸å»ºè®®. å¯¹äºé‚£äº› websocket è¿™ç±»çš„è¿æ¥, æ˜¯é¢å‘æµçš„æ•°æ®ä¼ è¾“. è¿™ä¸ªæ—¶å€™å¯èƒ½æ”¹ä¸ºå®æ—¶çš„è½¬å‘å¯ä»¥æå‡ç³»ç»Ÿçš„å“åº”åŠæ—¶æ€§ä¸æ€§èƒ½.")]),t._v(" "),a("li",[t._v("æˆ‘ä»¬å®æµ‹è¿‡åœ¨é™é€Ÿçš„åŸºå‡†æµ‹è¯•ä¸­. ç”±äºæ•°æ®ä¼ è¾“çš„ä½é€Ÿå¯¼è‡´ Tocmat åœ¨æ¥æ”¶å›¾ç‰‡çš„æ—¶å€™ç”±äºé€Ÿç‡ä½ä¼šæ¥æ”¶å¤§é‡çš„å°åŒ…. å¯¼è‡´ CPU çš„å ç”¨ç‡ç‰¹åˆ«é«˜. ä¸æ˜¯é«˜ä¸€ç‚¹ç‚¹, æ˜¯ 10 å€é‡çº§çš„å¢åŠ .")])]),t._v(" "),a("p",[t._v("å½“ç„¶, å®é™…æˆ‘ä»¬åœ¨åŸºå‡†æµ‹è¯•ä¸­å‘ç°. Nginx åœ¨æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹, æ”¶å‘æ€§èƒ½æ¯”ç›´æ¥ä¼ ç»™ server è¦æ…¢å¾—å¤š. è‡³å°‘ä¹Ÿè¦æ…¢ 10 å€çš„é‡çº§. æˆ‘ä»¬åœ¨åŸºå‡†æµ‹è¯•ä¸­å‘ç°. ç›´æ¥è¿æ¥ server ä¸Šä¼ çš„å“åº”åœ¨ 10ms ä»¥å†…. è€Œç»è¿‡äº† nginx åè‡³å°‘æ˜¯ 40ms åˆ° 100ms å·¦å³.")]),t._v(" "),a("p",[t._v("è¿™ä¸ªå…¶ä¸­æœ‰ä¸€ä¸ªåŸå› æ˜¯ nginx æœ¬èº«çš„ç¼“å­˜çš„åŸå› å¸¦æ¥çš„å»¶æ—¶. å¦å¤–ä¸€ä¸ªåŸå› æ˜¯ nginx ä¸­å®é™…è¿˜é™„å¸¦äº†å…¶å®ƒçš„é€»è¾‘. æ¯”å¦‚ WAF çš„å®‰å…¨æ£€æµ‹ç­‰.")]),t._v(" "),a("blockquote",[a("p",[t._v("æ‹ç…§æ£€æŸ¥æ¥å£çš„é™æµå¯¼è‡´ç”¨æˆ·çš„åŠ å€çš„é‡è¯•, è¿™ä¸ªä¸é™æµè®©ç”¨æˆ·å®Œæˆè¯·æ±‚æ˜¯ä¸æ˜¯å¯ä»¥ç¼“å‡æˆ–è€…é¿å…è¿™ä¸ªæƒ…å†µ.")])]),t._v(" "),a("p",[t._v("å½“æ—¶, æœ‰ä¸€ä¸ªç–‘é—®, å¦‚æœé™æµå¯¼è‡´äº†ç”¨æˆ·åå¤çš„é‡è¯•, å¯¼è‡´æµé‡æ¯”å¹³æ—¶çš„å¤š. é‚£å¦‚æœä¸é™æµ. è¿™ä¸ªç³Ÿç³•çš„æƒ…å†µæ˜¯å¦å¯ä»¥é¿å…?")]),t._v(" "),a("p",[a("strong",[t._v("å®é™…æ˜¯ä¸å¯ä»¥çš„")]),t._v(". åŸå› æ˜¯å½“æ—¶çš„çº¿ç¨‹æŒ¤å å·²ç»ååˆ†æ˜æ˜¾äº†. é‚£å°±ä¼šä½¿å †ç§¯çš„è¯·æ±‚è¶Šæ¥è¶Šå¤š. å¦‚æœæ‹ç…§æ£€æŸ¥çš„ç›¸å…³çš„è¯·æ±‚è¢«å¤„ç†çš„æ›´å¤š, è™½ç„¶åªæ˜¯åœ¨ä¸€ç¬é—´. é‚£åé¢å…¶å®ƒçš„è¯·æ±‚çš„å †ç§¯å°±ä¼šæ›´å¤š.")]),t._v(" "),a("p",[a("strong",[t._v("ç‰¹åˆ«æ˜¯é‚£äº›å¿«è¯·æ±‚")]),t._v(".(å½“æ—¶è¿˜æ²¡æœ‰åšå¿«æ…¢è¯·æ±‚éš”ç¦»). è€Œè¿™äº›è¯·æ±‚ç”±äºå¿«, é‚£å¾€å¾€ä¹Ÿæ„å‘³ç€å¾ˆå¤š. å¦‚æœè¿‡å¤šçš„è¯·æ±‚ç§¯å‹çš„è¯. åé¢ç§¯å‹çš„è¯·æ±‚ä¼šè¶Šæ¥è¶Šå¤š.")]),t._v(" "),a("p",[t._v("æ­¤æ—¶, "),a("strong",[t._v("é™æµæ°å¥½æ˜¯ç”¨æ¥å¿«é€Ÿçš„è®©é˜»å¡é˜Ÿåˆ—ä¸­çš„è¯·æ±‚å¿«é€Ÿçš„å¤±è´¥")]),t._v(". å¦‚æœæ²¡æœ‰è¿™ä¸ªä¸¢å¼ƒ. é‚£é˜»å¡çš„ä¼šè¶Šæ¥è¶Šå¤š, æœ€åè¾¾åˆ° 1 ä¸‡è¿æ¥. æœ€ç»ˆæœåŠ¡æ‹’ç»æœåŠ¡.")]),t._v(" "),a("blockquote",[a("p",[t._v("æ—¢ç„¶æœ‰é™æµé€»è¾‘åœ¨å¿«é€Ÿçš„æ‰”è¯·æ±‚. é‚£ä¸ºä»€ä¹ˆæ‹ç…§æ£€æŸ¥ç›¸å…³çš„è¯·æ±‚çš„ç§¯å‹æ²¡æœ‰å®Œå…¨è§£å†³æ‰å‘¢?")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªè¿˜æ˜¯è¦å†å›åˆ°é‚£ä¸ªç²—ç³™çš„çº¿ç¨‹å›¾:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/Tomcat%E7%BA%BF%E7%A8%8B%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%9E%8B-20231119112307-1rooyo9.png",alt:""}})]),t._v(" "),a("p",[t._v("ç”±äºå½“æ—¶é™æµåªæ‰”æ‰äº† check ç›¸å…³çš„æ•°æ®. ä½†æ˜¯å…¶å®ƒçš„æ¥å£çš„æ•°æ®å¹¶æ²¡æœ‰åšå¤„ç†. æˆ–è€…å½“æ—¶åšäº†å¤„ç†å¹¶æ²¡æœ‰å¤„ç†å®Œå…¨å’Œæ­£ç¡®. å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å»ç®¡å…¶å®ƒçš„é™æµå€¼. æˆ‘ä»¬è®¤ä¸ºç³»ç»Ÿæ˜¯æ­£å¸¸çš„. qps å¹¶æ²¡æœ‰è¶…. åªæ˜¯æ…¢äº†ä¸€ç‚¹å¯¹ä¸?")]),t._v(" "),a("p",[t._v("é‚£è¿™æ ·çš„è¯. "),a("strong",[t._v("è¿˜æ˜¯ä¼šç”±å…¶å®ƒçš„ä¸šåŠ¡æŒ¤å æ‰§è¡Œçº¿ç¨‹")]),t._v(". æˆ‘ä»¬çš„æ‹ç…§æ£€æŸ¥ç›¸å…³çš„çº¿ç¨‹å°±æ— æ³•è¿›è¡Œæ‰§è¡Œ.")]),t._v(" "),a("p",[t._v("ä¹Ÿå°±æ˜¯è¯´: "),a("strong",[t._v("æˆ‘ä»¬çš„é™æµæ“ä½œç›¸å…³çš„ check å¤„ç†. éƒ½æ˜¯è¢«é—´æ­‡æ€§çš„é˜»å¡åœ¨äº† httpçº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­. å¹¶æ²¡æœ‰è¢«æœ€å¤§é€Ÿåº¦çš„æ‰§è¡Œå»æ‰”æ‰é˜»å¡çš„ä»»åŠ¡")]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("æ—¢ç„¶ä¸å­˜åœ¨å‡æƒ³çš„ Tomcat å‰ç½®è¿‡æ…¢çš„å›¾ç‰‡ä¸Šä¼ è¿‡ç¨‹. é‚£ä¿®æ”¹ multipart ä¸º HttpServletInputStream æ˜¯å¦è¿˜æœ‰æ„ä¹‰?")])]),t._v(" "),a("p",[t._v("æœ‰çš„, ä¸€ä¸ªæ˜¯è¿™ä¸ªä¿®æ”¹çš„ç¡®æœ‰å“åº”æ—¶é—´æå‡è¿˜ CPU çš„é™ä½. è¿™ä¸ªè™½ç„¶å¾ˆå°. ä½†æ˜¯æ›´å®é™…çš„æ„ä¹‰åœ¨äº, æˆ‘ä»¬å¯ä»¥èƒ½æ›´å¯æ§çš„å»æ§åˆ¶è¾“å…¥æµ. åŒæ—¶ä¹Ÿå¯ä»¥æ›´å¥½çš„ä½¿ç”¨æ¥æ”¶å›¾ç‰‡ç”¨çš„ç¼“å†²åŒº. æ¯”å¦‚"),a("strong",[t._v("å¯ä»¥ä½¿ç”¨æ± åŒ–çš„å¯¹è±¡æ¥å‡å°‘å†…å­˜çš„å‹åŠ›å’Œå¯èƒ½çš„å†…å­˜ååé‡æå‡")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"å¯ä»¥åšå“ªäº›æ”¹è¿›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯ä»¥åšå“ªäº›æ”¹è¿›"}},[t._v("#")]),t._v(" å¯ä»¥åšå“ªäº›æ”¹è¿›")]),t._v(" "),a("blockquote",[a("p",[t._v("è°ƒæ•´ tomcat çš„çº¿ç¨‹æ•°ä¸è¿æ¥æ•°.")])]),t._v(" "),a("p",[t._v("å»ºè®®è°ƒæ•´å¤§ tomcat çš„çº¿ç¨‹æ•°. æ¯”è¾ƒä¿å®ˆçš„ç»éªŒå€¼æ˜¯: "),a("mark",[a("strong",[t._v("1c å¯¹åº”åˆ° 200 çº¿ç¨‹. ç›¸åº”çš„ 4 æ ¸çš„ POD è‡³å°‘å¯ä»¥è°ƒæ•´åˆ° 800 çº¿ç¨‹. 8 æ ¸çš„POD è‡³å°‘å¯ä»¥è°ƒæ•´åˆ° 1600 çº¿ç¨‹")])]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("åœ¨æœåŠ¡æœ‰å¼‚å¸¸çš„æ—¶å€™. å¯ä»¥å¯¹æœåŠ¡è¿›è¡Œä¸€æ¬¡æµé‡æ¸…ç†. è®©æœåŠ¡å¿«é€Ÿçš„æ¢å¤åˆ°å¥åº·çŠ¶æ€. (å‰ææ˜¯ä½ èƒ½è¯†åˆ«å‡ºåœ¨æ•…éšœåæœåŠ¡å¤„ç†äºšå¥åº·çš„çŠ¶æ€)")])]),t._v(" "),a("p",[t._v("ç±»ä¼¼è¿™é‡Œ, æˆ‘ä»¬å¦‚æœçŸ¥é“åŸå› . å¯ä»¥å¯¹æœåŠ¡è¿›è¡Œä¸€äº›é™æµæ¸…ç†. æ¯”å¦‚ç›´æ¥æŠŠæ‰€æœ‰çš„è¯·æ±‚éƒ½é™æµåˆ° 0qps 5ç§’. åªè¦ä¸€ä¸ªå¾ˆçŸ­æš‚çš„æ—¶é—´. å°±å¯ä»¥æŠŠæœåŠ¡çš„é˜»å¡æµé‡æ¸…ç†å¹²å‡€.")]),t._v(" "),a("blockquote",[a("p",[t._v("ç›‘æ§ tomcat çš„çº¿ç¨‹æ± ä½¿ç”¨ç‡")])]),t._v(" "),a("p",[t._v("ç›‘æ§è¿™ä¸€ä¸ªæŒ‡æ ‡, åœ¨æ•…éšœçš„æ—¶å€™å¯ä»¥æä¾›ä¸€ä¸ªå‚è€ƒ. å¦‚æœå¯ä»¥çš„è¯. å¯ä»¥"),a("strong",[t._v("ç›‘æ§é˜»å¡é˜Ÿåˆ—çš„å¤§å°")]),t._v(". æˆ–è€…è¯´æ˜¯"),a("strong",[t._v("æ´»è·ƒè¿æ¥æ•°é‡")]),t._v(". è¿™ä¸ªå¯ä»¥çŸ¥é“ tomcat çš„å®æ—¶è´Ÿè½½é˜»å¡æƒ…å†µ.")]),t._v(" "),a("p",[t._v("ç›®å‰å·²ç»æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„ç›‘æ§æŒ‡æ ‡, å¯ä»¥å‚è€ƒå¤§ç›˜: "),a("a",{attrs:{href:"https://grafana.zhenguanyu.com/d/ZFggH8K4k/ye-wu-tomcat-leo-dan-ge?orgId=1&from=1679023677609&to=1679026989107&var-ds=prometheus-online&var-region=All&var-service=solar-thor&var-canary=All&var-instance=10.65.50.120:26666&var-instance=10.64.100.201:26666&var-pod=All",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.zhenguanyu.com/d/ZFggH8K4k/ye-wu-tomcat-leo-dan-ge?orgId=1&from=1679023677609&to=1679026989107&var-ds=prometheus-online&var-region=All&var-service=solar-thor&var-canary=All&var-instance=10.65.50.120:26666&var-instance=10.64.100.201:26666&var-pod=All"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image2023-3-20_0-15-43-20231119112306-iikejlr.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"ä¼˜åŒ–æªæ–½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–æªæ–½"}},[t._v("#")]),t._v(" ä¼˜åŒ–æªæ–½")]),t._v(" "),a("h5",{attrs:{id:"solar-thoræœåŠ¡å¿«æ…¢è¯·æ±‚éš”ç¦»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solar-thoræœåŠ¡å¿«æ…¢è¯·æ±‚éš”ç¦»"}},[t._v("#")]),t._v(" solar-thoræœåŠ¡å¿«æ…¢è¯·æ±‚éš”ç¦»")]),t._v(" "),a("p",[t._v("ç”±äº tomcat çš„è¯·æ±‚å¤„ç†çº¿ç¨‹æ± . æ²¡æœ‰å•ç‹¬çš„çº¿ç¨‹æ± ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚è¿›è¡Œé…ç½®è¿™æ ·å°±ä¼š"),a("strong",[t._v("ä½¿æ…¢çš„è¯·æ±‚ä¸å¿«çš„è¯·æ±‚ç›¸äº’å½±å“")]),t._v(". æ¯”å¦‚æ…¢è¯·æ±‚å ç”¨äº†çº¿ç¨‹æ± . "),a("strong",[t._v("å¿«çš„è¯·æ±‚æœ‰å¯èƒ½ä¼šç­‰å¾…ç‰¹åˆ«é•¿çš„æ—¶é—´")]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("åˆ›å»ºæ–°æœåŠ¡")])]),t._v(" "),a("p",[t._v("ä½¿ç”¨ solar-thor çš„æœåŠ¡ä»£ç é‡æ–°åˆ›å»ºä¸€ä¸ªæœåŠ¡.åç§°å»ºä¸º solar-thor-api.")]),t._v(" "),a("blockquote",[a("p",[t._v("è½¬å‘è§„åˆ™å˜æ›´")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126173720-rq75vb5.png",alt:"image"}})]),t._v(" "),a("blockquote",[a("p",[t._v("å¿«è¯·æ±‚æ¥å£æ¢³ç†")])]),t._v(" "),a("p",[t._v("è¿›ä¸€æ­¥æ¸…ç† solar-thor æœåŠ¡ä¸Šçš„å¿«è¯·æ±‚. è®© solar-thor çš„æ‹ç…§æ£€æŸ¥æ…¢è¯·æ±‚æ›´ç¨³å®š. éœ€è¦è¿›ä¸€æ­¥çš„å‡å°‘ solar-thor ä¸Šçš„å¿«è¯·æ±‚.")]),t._v(" "),a("p",[t._v("solar-thor å’Œ solar-thor-api CPUå ç”¨:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126173824-31a8iap.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126173838-fvyukv9.png",alt:"image"}})]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@solar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("77f")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("76f")]),t._v("bbb4"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("xfv8 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$  cat  solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep restAPI "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep 'evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions' "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("P")]),t._v(" 'http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\\"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("' "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" sort "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" uniq "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("c  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" sort "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("n\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iphone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyst"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iphone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tutor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyst"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tutor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyst"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("311")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iphone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1390")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("evaluations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("questions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@solar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("77f")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("76f")]),t._v("bbb4"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("xfv8 log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$  cat  solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep restAPI "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep 'search"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chinese' "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("P")]),t._v(" 'http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\\"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("' "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" sort "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" uniq "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("c  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" sort "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("n\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2940")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xyst"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuanfudao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("solar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("search"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chinese"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("éš”ç¦»åæ•ˆæœ:")]),t._v(" "),a("ul",[a("li",[t._v("P99 æ¯”åŸæ¥çš„è¯·æ±‚ç¨³å®šå¤šäº†. ä¸å†ä¼šæœ‰æ¯›åˆºåˆ° 10 ç§’çš„æƒ…å†µ.")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126173627-1r4g3vd.png",alt:"image"}})]),t._v(" "),a("h5",{attrs:{id:"_2-å¢åŠ æœºå™¨-å¢åŠ å†…å­˜å¤§å°-ä¼˜åŒ–tomcatçº¿ç¨‹é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¢åŠ æœºå™¨-å¢åŠ å†…å­˜å¤§å°-ä¼˜åŒ–tomcatçº¿ç¨‹é…ç½®"}},[t._v("#")]),t._v(" 2.å¢åŠ æœºå™¨&å¢åŠ å†…å­˜å¤§å°&ä¼˜åŒ–TOMCATçº¿ç¨‹é…ç½®")]),t._v(" "),a("p",[t._v("ä¼˜åŒ–ç‚¹:")]),t._v(" "),a("ul",[a("li",[t._v("æ•´ä½“å†…å­˜å¤§å°ä» 12G è°ƒæ•´ä¸º 16G")]),t._v(" "),a("li",[t._v("å †å†…å­˜å¤§å°ä» 9G è°ƒæ•´ä¸º 12G")]),t._v(" "),a("li",[t._v("é™æµå€¼ä» å•æœºå¹¶å‘ 100 â†’ è°ƒæ•´ä¸º 120")]),t._v(" "),a("li",[t._v("å‡çº§ infra-monorepo ç‰ˆæœ¬: ä» "),a("strong",[t._v("2021.03.0 â†’ 2021.05.0")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174138-4lebel5.png",alt:"image"}})]),t._v(" "),a("p",[t._v("æ•ˆæœå¯¹æ¯”:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174201-h43cbre.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174215-deyjd4f.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174229-n56rnlb.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174238-dhhzgmb.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20231126174249-fcltip2.png",alt:"image"}})]),t._v(" "),a("h5",{attrs:{id:"_3-é™æµå¹¶å‘æ•°è®¡ç®—ä¸ä¼˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-é™æµå¹¶å‘æ•°è®¡ç®—ä¸ä¼˜åŒ–"}},[t._v("#")]),t._v(" 3.é™æµå¹¶å‘æ•°è®¡ç®—ä¸ä¼˜åŒ–")]),t._v(" "),a("p",[t._v("**é™æµå¼€å…³ - æ‹ç…§æ£€æŸ¥æ‰€æœ‰æ¥å£é™æµ - è¿™é‡Œé…ç½®çš„æ˜¯å•æœºçš„å¹¶å‘æ•°: v = qps * 2 / 20 ; æŒ‰å“åº”æ—¶é—´ 2s ç®—. åˆ™ qps = (å¹¶å‘*æœºå™¨æ•°) / 2; å¹¶å‘å€¼ = æ€»QPS * 2 / æœºå™¨æ•° ; å¤‡æ³¨: ç›®å‰æœºå™¨æ•°ä¸º 20. **")]),t._v(" "),a("p",[t._v("æœ€å¼€å§‹çš„é…ç½®ä¸º: 100.")]),t._v(" "),a("p",[t._v("QPS: 100 å¹¶å‘ *  20 / 2")]),t._v(" "),a("p",[t._v("è§£é‡Š: æ ‡ç§°çš„ qps ä¸º 1000qps.")]),t._v(" "),a("p",[t._v("å¦‚æœ QPS åˆ° 1.4K, åˆ™å¹¶å‘å€¼è®¡ç®—ä¸º: å¹¶å‘å€¼ = 1400*2 / 20 = 140.")]),t._v(" "),a("p",[t._v("æ›´ç²¾ç¡®çš„è®¡ç®—æ–¹æ³•éœ€è¦æ ¹æ® TP9X å€¼è¿›è¡Œæ¢ç®—ç­‰ä»·æ›¿æ¢.")]),t._v(" "),a("p",[t._v("ç„¶åæ›´ç»Ÿè®¡æ„ä¹‰çš„è®¡ç®—å¦‚ä¸‹:")]),t._v(" "),a("p",[t._v("è¿™ä¸ªå¹³å‡å“åº”æ—¶é—´ä¸º 1.2 ç§’å·¦å³. åˆ™å“åº”æ—¶é—´è¿›è¡ŒåŠ å€. æˆ–è€…è¯´æ˜¯å¯ä»¥æ‰¿æ‹…çš„å¹¶å‘ä¸º 2 å€æ—¶. ç­‰ä»·çš„å“åº”æ—¶é—´ä¸º 2.4 ç§’. åˆ™å¹¶å‘è®¡ç®—ä¸º 1400 * 2.4  / 20 = 168.")]),t._v(" "),a("p",[t._v("**æ³¨: ä¸‹å›¾çš„æ—¶é—´æ˜¯ä»¥ 6.14 å·çš„æ¬¡é«˜å³°çš„æ—¥æœŸè¿›è¡Œé‡‡æ ·çš„. **")]),t._v(" "),a("p",[t._v("â€‹"),a("img",{attrs:{src:"/img/image-20231126174746-ihzl33n.png",alt:"image"}}),t._v("æŒ‰æ˜¨å¤©çš„ç›‘æ§çœ‹. æ˜¨æ™šåˆšå¥½æ˜¯åœ¨é™æµå€¼å¡«åˆ° 170 çš„æ—¶å€™. (æ³¨: æœ€å¼€å§‹ä¸º130 , ä¸­é—´è°ƒæ•´ä¸º 150. æœ€åè°ƒæ•´ä¸º 170). é™æµæ¶ˆå¤±. æœåŠ¡å˜å¾—ç¨³å®šä¸‹æ¥.")]),t._v(" "),a("p",[t._v("â€‹"),a("img",{attrs:{src:"/img/image-20231126174815-ykg70lp.png",alt:"image"}}),t._v("â€‹")]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯ 1500QPS , è€Œå“åº”æ—¶é—´ä¸º 1.5 ç§’çš„è¯. å¹¶å‘é™åˆ¶ä¸º: **1500*3/20 = 225. **")]),t._v(" "),a("p",[t._v("â€")]),t._v(" "),a("p",[t._v("â€")]),t._v(" "),a("p",[t._v("â€")]),t._v(" "),a("p",[t._v("â€")]),t._v(" "),a("p",[t._v("â€")])])}),[],!1,null,null,null);a.default=e.exports}}]);