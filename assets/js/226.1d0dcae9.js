(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{555:function(t,s,a){"use strict";a.r(s);var n=a(4),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_1-ç¼“å­˜åŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç¼“å­˜åŸºç¡€"}},[t._v("#")]),t._v(" 1.ç¼“å­˜åŸºç¡€")]),t._v(" "),s("h4",{attrs:{id:"ç¼“å­˜åŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜åŸºç¡€"}},[t._v("#")]),t._v(" ç¼“å­˜åŸºç¡€")]),t._v(" "),s("h5",{attrs:{id:"_1-åŸºæœ¬æ¦‚å¿µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŸºæœ¬æ¦‚å¿µ"}},[t._v("#")]),t._v(" 1.åŸºæœ¬æ¦‚å¿µ")]),t._v(" "),s("p",[s("strong",[t._v("ç¼“å­˜å‘½ä¸­ç‡")]),t._v(": å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶, ç§°ä¸º"),s("strong",[t._v("ç¼“å­˜å‘½ä¸­")]),t._v(". ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜, ç¼“å­˜åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜.")]),t._v(" "),s("p",[s("strong",[t._v("æœ€å¤§ç©ºé—´")]),t._v(": ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­, å†…å­˜ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤š, å› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§. å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡"),s("strong",[t._v("è¶…è¿‡æœ€å¤§ç©ºé—´")]),t._v("æ—¶, å°±éœ€è¦"),s("strong",[t._v("æ·˜æ±°")]),t._v("éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°çš„æ•°æ®.")]),t._v(" "),s("h4",{attrs:{id:"ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ"}},[t._v("#")]),t._v(" ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ")]),t._v(" "),s("h5",{attrs:{id:"_1-æµè§ˆå™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æµè§ˆå™¨"}},[t._v("#")]),t._v(" 1.æµè§ˆå™¨")]),t._v(" "),s("p",[t._v("å½“ HTTP å“åº”"),s("strong",[t._v("å…è®¸")]),t._v("è¿›è¡Œç¼“å­˜æ—¶, æµè§ˆå™¨ä¼šå°† HTML, CSS, JavaScript, å›¾ç‰‡ç­‰"),s("strong",[t._v("é™æ€")]),t._v("èµ„æºè¿›è¡Œç¼“å­˜.")]),t._v(" "),s("h5",{attrs:{id:"_2-isp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-isp"}},[t._v("#")]),t._v(" 2.ISP")]),t._v(" "),s("p",[s("strong",[t._v("ç½‘ç»œæœåŠ¡æä¾›å•†")]),t._v("(ISP) æ˜¯ç½‘ç»œè®¿é—®çš„"),s("strong",[t._v("ç¬¬ä¸€è·³")]),t._v(", é€šè¿‡å°†"),s("strong",[t._v("æ•°æ®ç¼“å­˜åœ¨ ISP ä¸­")]),t._v("èƒ½å¤Ÿå¤§å¤§æé«˜ç”¨æˆ·çš„"),s("strong",[t._v("è®¿é—®é€Ÿåº¦")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_3-cdn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-cdn"}},[t._v("#")]),t._v(" 3.CDN")]),t._v(" "),s("p",[s("strong",[t._v("å†…å®¹åˆ†å‘ç½‘ç»œ")]),t._v("(Content distribution network, CDN) æ˜¯ä¸€ç§"),s("strong",[t._v("äº’è¿çš„ç½‘ç»œç³»ç»Ÿ")]),t._v(", å®ƒåˆ©ç”¨"),s("strong",[t._v("æ›´é è¿‘ç”¨æˆ·çš„æœåŠ¡å™¨")]),t._v("ä»è€Œæ›´å¿«æ›´å¯é åœ°å°† HTML, CSS, JavaScript, éŸ³ä¹, å›¾ç‰‡, è§†é¢‘ç­‰"),s("strong",[t._v("é™æ€èµ„æºåˆ†å‘ç»™ç”¨æˆ·")]),t._v(".")]),t._v(" "),s("p",[t._v("CDN ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹:")]),t._v(" "),s("ul",[s("li",[t._v("æ›´å¿«åœ°å°†æ•°æ®åˆ†å‘ç»™ç”¨æˆ·.")]),t._v(" "),s("li",[t._v("é€šè¿‡éƒ¨ç½²å¤šå°æœåŠ¡å™¨, ä»è€Œæé«˜ç³»ç»Ÿæ•´ä½“çš„å¸¦å®½æ€§èƒ½.")]),t._v(" "),s("li",[t._v("å¤šå°æœåŠ¡å™¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§"),s("strong",[t._v("å†—ä½™æœºåˆ¶")]),t._v(", ä»è€Œå…·æœ‰é«˜å¯ç”¨æ€§.")])]),t._v(" "),s("h5",{attrs:{id:"_4-åå‘ä»£ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-åå‘ä»£ç†"}},[t._v("#")]),t._v(" 4.åå‘ä»£ç†")]),t._v(" "),s("p",[t._v("åå‘ä»£ç†ä½äºæœåŠ¡å™¨ä¹‹å‰, "),s("strong",[t._v("è¯·æ±‚ä¸å“åº”éƒ½éœ€è¦ç»è¿‡åå‘ä»£ç†")]),t._v(". é€šè¿‡å°†"),s("strong",[t._v("æ•°æ®ç¼“å­˜åœ¨åå‘ä»£ç†")]),t._v(", åœ¨ç”¨æˆ·è¯·æ±‚åå‘ä»£ç†æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜è¿›è¡Œå“åº”.")]),t._v(" "),s("h5",{attrs:{id:"_5-æœ¬åœ°ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æœ¬åœ°ç¼“å­˜"}},[t._v("#")]),t._v(" 5.æœ¬åœ°ç¼“å­˜")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ "),s("strong",[t._v("Guava Cache")]),t._v(" å°†æ•°æ®ç¼“å­˜åœ¨"),s("strong",[t._v("æœåŠ¡å™¨æœ¬åœ°å†…å­˜")]),t._v("ä¸­, æœåŠ¡å™¨ä»£ç å¯ä»¥ç›´æ¥è¯»å–æœ¬åœ°å†…å­˜ä¸­çš„ç¼“å­˜, é€Ÿåº¦éå¸¸å¿«.")]),t._v(" "),s("p",[t._v("ç¼“å­˜åˆ†ä¸º"),s("strong",[t._v("æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜")]),t._v(". Java "),s("strong",[t._v("è‡ªå¸¦çš„ ConcurrentHashMap æˆ– Guava")]),t._v(" å®ç°çš„æ˜¯æœ¬åœ°ç¼“å­˜, æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯è½»é‡ä»¥åŠå¿«é€Ÿ, "),s("strong",[t._v("ç”Ÿå‘½å‘¨æœŸ")]),t._v("éšç€ JVM çš„é”€æ¯è€Œç»“æŸ, å¹¶ä¸”åœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹, æ¯ä¸ªå®ä¾‹éƒ½éœ€è¦å„è‡ªä¿å­˜ä¸€ä»½ç¼“å­˜, å¤šä¸ªæœºå™¨"),s("strong",[t._v("ç¼“å­˜ä¸å…·æœ‰ä¸€è‡´æ€§")]),t._v(". é€šå¸¸ç”¨äºä¿å­˜å˜åŒ–è¾ƒå°‘çš„æ•°æ®.")]),t._v(" "),s("h5",{attrs:{id:"_6-åˆ†å¸ƒå¼ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-åˆ†å¸ƒå¼ç¼“å­˜"}},[t._v("#")]),t._v(" 6.åˆ†å¸ƒå¼ç¼“å­˜")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ Redis, Memcache ç­‰"),s("strong",[t._v("åˆ†å¸ƒå¼ç¼“å­˜")]),t._v("å°†æ•°æ®ç¼“å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿä¸­. ç›¸å¯¹äºæœ¬åœ°ç¼“å­˜æ¥è¯´, åˆ†å¸ƒå¼ç¼“å­˜éœ€å•ç‹¬éƒ¨ç½², å¯ä»¥æ ¹æ®éœ€æ±‚åˆ†é…ç¡¬ä»¶èµ„æº. "),s("strong",[t._v("æœåŠ¡å™¨é›†ç¾¤éƒ½å¯ä»¥è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜")]),t._v(", è€Œæœ¬åœ°ç¼“å­˜éœ€è¦åœ¨æœåŠ¡å™¨é›†ç¾¤ä¹‹é—´è¿›è¡ŒåŒæ­¥, å®ç°éš¾åº¦å’Œæ€§èƒ½å¼€é”€ä¸Šéƒ½æ›´å¤§.")]),t._v(" "),s("p",[t._v("åœ¨å¤šå®ä¾‹æƒ…å†µä¸‹, å„å®ä¾‹å…±ç”¨ä¸€ä»½ç¼“å­˜æ•°æ®, "),s("strong",[t._v("ç¼“å­˜æ•°æ®å…·æœ‰ä¸€è‡´æ€§")]),t._v(". ç”±äºéœ€è¦ä¿è¯ Redis æœåŠ¡çš„"),s("strong",[t._v("é«˜å¯ç”¨")]),t._v(", æ•´ä¸ªç¨‹åºæ¶æ„ä¸Šè¾ƒä¸ºå¤æ‚.")]),t._v(" "),s("h5",{attrs:{id:"_7-æ•°æ®åº“ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-æ•°æ®åº“ç¼“å­˜"}},[t._v("#")]),t._v(" 7.æ•°æ®åº“ç¼“å­˜")]),t._v(" "),s("p",[t._v("MySQL ç­‰æ•°æ®åº“å…·æœ‰è‡ªå·±çš„"),s("strong",[t._v("æŸ¥è¯¢ç¼“å­˜æœºåˆ¶")]),t._v("æ¥æé«˜æŸ¥è¯¢æ•ˆç‡.")]),t._v(" "),s("h5",{attrs:{id:"_8-javaå†…éƒ¨ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-javaå†…éƒ¨ç¼“å­˜"}},[t._v("#")]),t._v(" 8.Javaå†…éƒ¨ç¼“å­˜")]),t._v(" "),s("p",[t._v("Java ä¸ºäº†ä¼˜åŒ–ç©ºé—´, æé«˜å­—ç¬¦ä¸², åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»çš„åˆ›å»ºæ•ˆç‡, è®¾è®¡äº†å­—ç¬¦ä¸²å¸¸é‡æ± åŠ Byte, Short, Character, Integer, Long, Boolean è¿™å…­ç§åŒ…è£…ç±»"),s("strong",[t._v("ç¼“å†²æ± ")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_9-cpuå¤šçº§ç¼“å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-cpuå¤šçº§ç¼“å­˜"}},[t._v("#")]),t._v(" 9.CPUå¤šçº§ç¼“å­˜")]),t._v(" "),s("p",[t._v("CPU ä¸ºäº†è§£å†³è¿ç®—é€Ÿåº¦ä¸"),s("strong",[t._v("ä¸»å­˜ IO é€Ÿåº¦ä¸åŒ¹é…")]),t._v("çš„é—®é¢˜, å¼•å…¥äº†"),s("strong",[t._v("å¤šçº§ç¼“å­˜")]),t._v("ç»“æ„, åŒæ—¶ä½¿ç”¨ MESI ç­‰ç¼“å­˜ä¸€è‡´æ€§åè®®æ¥è§£å†³å¤šæ ¸ CPU ç¼“å­˜æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜.")]),t._v(" "),s("h4",{attrs:{id:"ç¼“å­˜æ·˜æ±°-æ›´æ–°-ç­–ç•¥ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜æ·˜æ±°-æ›´æ–°-ç­–ç•¥ğŸŒŸ"}},[t._v("#")]),t._v(" ç¼“å­˜æ·˜æ±°(æ›´æ–°)ç­–ç•¥ğŸŒŸ")]),t._v(" "),s("p",[t._v("ç¼“å­˜æ·˜æ±°ç®—æ³•é€šå¸¸ç”¨äºç¼“å­˜ä½¿ç”¨é‡"),s("strong",[t._v("è¶…è¿‡äº†é¢„è®¾æœ€å¤§å€¼")]),t._v("çš„æ—¶å€™, å®ç°å¯¹ç°æœ‰æ•°æ®è¿›è¡Œå‰”é™¤.")]),t._v(" "),s("h6",{attrs:{id:"_1-fifo-lru-lfuç®—æ³•å‰”é™¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-fifo-lru-lfuç®—æ³•å‰”é™¤"}},[t._v("#")]),t._v(" (1)FIFO/LRU/LFUç®—æ³•å‰”é™¤")]),t._v(" "),s("p",[s("strong",[t._v("å…ˆè¿›å…ˆå‡ºç­–ç•¥")]),t._v(" FIFO(First In First Out): åœ¨å®æ—¶æ€§åœºæ™¯ä¸‹, éœ€è¦ç»å¸¸è®¿é—®æœ€æ–°çš„æ•°æ®, é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ FIFO, ä½¿å¾—æœ€å…ˆè¿›å…¥çš„æ•°æ®è¢«æ·˜æ±°.")]),t._v(" "),s("p",[s("strong",[t._v("æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç­–ç•¥")]),t._v(" LRU(Least Recently Used): ä¼˜å…ˆæ·˜æ±°"),s("strong",[t._v("æœ€ä¹…æœªä½¿ç”¨")]),t._v("çš„æ•°æ®, ä¹Ÿå°±æ˜¯ä¸Šæ¬¡"),s("strong",[t._v("è¢«è®¿é—®æ—¶é—´è·ç¦»ç°åœ¨æœ€ä¹…")]),t._v("çš„æ•°æ®. è¯¥ç­–ç•¥å¯ä»¥ä¿è¯å†…å­˜ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®, ä¹Ÿå°±æ˜¯ç»å¸¸è¢«è®¿é—®çš„æ•°æ®, ä»è€Œä¿è¯ç¼“å­˜å‘½ä¸­ç‡.")]),t._v(" "),s("p",[s("strong",[t._v("æœ€ä¸ç»å¸¸ä½¿ç”¨ç­–ç•¥")]),t._v(" LFU(Least Frequently Used): ä¼˜å…ˆæ·˜æ±°ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨"),s("strong",[t._v("æ¬¡æ•°æœ€å°‘")]),t._v("çš„æ•°æ®.")]),t._v(" "),s("h6",{attrs:{id:"_2-è¶…æ—¶å‰”é™¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¶…æ—¶å‰”é™¤"}},[t._v("#")]),t._v(" (2)è¶…æ—¶å‰”é™¤")]),t._v(" "),s("p",[t._v("é€šè¿‡ç»™ç¼“å­˜æ•°æ®"),s("strong",[t._v("è®¾ç½®è¶…æ—¶æ—¶é—´")]),t._v(", è®©å…¶åœ¨è¿‡æœŸæ—¶é—´å"),s("strong",[t._v("è‡ªåŠ¨åˆ é™¤")]),t._v(", å¦‚ Redis æä¾›çš„ "),s("strong",[t._v("expire")]),t._v(" å‘½ä»¤.")]),t._v(" "),s("h6",{attrs:{id:"_3-ä¸»åŠ¨æ›´æ–°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸»åŠ¨æ›´æ–°"}},[t._v("#")]),t._v(" (3)ä¸»åŠ¨æ›´æ–°")]),t._v(" "),s("p",[t._v("å¯¹äº"),s("strong",[t._v("é«˜ä¸€è‡´æ€§è¦æ±‚")]),t._v("åœºæ™¯ä¸‹, éœ€è¦åœ¨çœŸå®æ•°æ®æ›´æ–°å, "),s("strong",[t._v("ç«‹å³")]),t._v("æ›´æ–°ç¼“å­˜æ•°æ®.")]),t._v(" "),s("h4",{attrs:{id:"ç¼“å­˜é—®é¢˜ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜é—®é¢˜ğŸŒŸ"}},[t._v("#")]),t._v(" ç¼“å­˜é—®é¢˜ğŸŒŸ")]),t._v(" "),s("p",[s("strong",[t._v("ç¼“å­˜")]),t._v("ä¹Ÿå¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜.")]),t._v(" "),s("h5",{attrs:{id:"_1-ç¼“å­˜ç©¿é€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç¼“å­˜ç©¿é€"}},[t._v("#")]),t._v(" 1.ç¼“å­˜ç©¿é€")]),t._v(" "),s("h6",{attrs:{id:"_1-æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[t._v("#")]),t._v(" (1)æ¦‚è¿°")]),t._v(" "),s("p",[t._v("æŒ‡çš„æ˜¯å¯¹æŸä¸ª"),s("strong",[t._v("ç¼“å­˜ä¸­ä¸€å®šä¸å­˜åœ¨")]),t._v("çš„æ•°æ®è¿›è¡Œè¯·æ±‚, è¯¥è¯·æ±‚å°†ä¼š"),s("strong",[t._v("ç©¿é€ç¼“å­˜åˆ°è¾¾æ•°æ®åº“")]),t._v(". ä¸¾ä¸ªä¾‹å­: æŸä¸ªé»‘å®¢æ•…æ„åˆ¶é€ ç¼“å­˜ä¸­"),s("strong",[t._v("ä¸å­˜åœ¨çš„ key")]),t._v(" å‘èµ·"),s("strong",[t._v("å¤§é‡è¯·æ±‚")]),t._v(", å¯¼è‡´å¤§é‡è¯·æ±‚è½åˆ°æ•°æ®åº“.")]),t._v(" "),s("p",[t._v("æ­£å¸¸ç¼“å­˜å¤„ç†æµç¨‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174357591.png",alt:""}})]),t._v(" "),s("p",[t._v("ç¼“å­˜ç©¿é€æƒ…å†µ:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174250613.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¸€èˆ¬ MySQL é»˜è®¤çš„æœ€å¤§è¿æ¥æ•°åœ¨ 150 å·¦å³, è¿™ä¸ªå¯ä»¥é€šè¿‡ "),s("strong",[t._v("show variables like '%max_connections%';")]),t._v(" å‘½ä»¤æ¥æŸ¥çœ‹. æœ€å¤§è¿æ¥æ•°ä¸€ä¸ªè¿˜åªæ˜¯ä¸€ä¸ªæŒ‡æ ‡, CPU, å†…å­˜, ç£ç›˜, ç½‘ç»œç­‰æ— åŠ›æ¡ä»¶éƒ½æ˜¯å…¶è¿è¡ŒæŒ‡æ ‡, è¿™äº›æŒ‡æ ‡éƒ½ä¼šé™åˆ¶å…¶å¹¶å‘èƒ½åŠ›! æ‰€ä»¥ä¸€èˆ¬ 3000 ä¸ªå¹¶å‘è¯·æ±‚å°±èƒ½æ‰“æ­»å¤§éƒ¨åˆ†æ•°æ®åº“äº†.")]),t._v(" "),s("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" (2)è§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("p",[t._v("é¦–å…ˆå¯ä»¥åœ¨"),s("strong",[t._v("åº”ç”¨å±‚")]),t._v("è®°å½•ä¸€ä¸‹"),s("strong",[t._v("ç¼“å­˜ç©¿é€çš„æ¬¡æ•°")]),t._v(", æ–¹ä¾¿é—®é¢˜æŸ¥æ‰¾ä¸é¢„è­¦.")]),t._v(" "),s("p",[s("strong",[t._v("(1) å‚æ•°æ ¡éªŒ")])]),t._v(" "),s("p",[s("strong",[t._v("æœ€åŸºæœ¬")]),t._v("çš„å°±æ˜¯é¦–å…ˆ"),s("strong",[t._v("åšå¥½å‚æ•°æ ¡éªŒ")]),t._v(", ä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥"),s("strong",[t._v("æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯")]),t._v("è¿”å›ç»™å®¢æˆ·ç«¯. æ¯”å¦‚æŸ¥è¯¢çš„"),s("strong",[t._v("æ•°æ®åº“ id ä¸èƒ½å°äº")]),t._v(" 0, ä¼ å…¥çš„é‚®ç®±"),s("strong",[t._v("æ ¼å¼ä¸å¯¹")]),t._v("çš„æ—¶å€™ç›´æ¥è¿”å›é”™è¯¯æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ç­‰ç­‰.")]),t._v(" "),s("p",[s("strong",[t._v("(2) ç¼“å­˜æ— æ•ˆkey")])]),t._v(" "),s("p",[t._v("å¦‚æœç¼“å­˜å’Œæ•°æ®åº“"),s("strong",[t._v("éƒ½æŸ¥ä¸åˆ°")]),t._v("æŸä¸ª key çš„æ•°æ®å°±"),s("strong",[t._v("å†™ä¸€ä¸ª")]),t._v("è¿™ä¸ªé”®çš„"),s("strong",[t._v("ç©ºå¯¹è±¡")]),t._v("åˆ° Redis ä¸­å»å¹¶"),s("strong",[t._v("è®¾ç½®è¿‡æœŸæ—¶é—´")]),t._v(", å…·ä½“å‘½ä»¤å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-mysql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SET key value EX 10086\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ "),s("strong",[t._v("key å˜åŒ–ä¸é¢‘ç¹")]),t._v("çš„æƒ…å†µ, ä½†å¦‚æœé»‘å®¢æ¶æ„æ”»å‡», æ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ key, ä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key. å¾ˆæ˜æ˜¾è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜. å¦‚æœç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯, "),s("strong",[t._v("å°½é‡å°†æ— æ•ˆ")]),t._v("çš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®"),s("strong",[t._v("çŸ­ä¸€ç‚¹")]),t._v("æ¯”å¦‚ 1 åˆ†é’Ÿ.")]),t._v(" "),s("p",[t._v("æ•´ä½“æµç¨‹å¤§è‡´å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectInclNullById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»ç¼“å­˜ä¸­è·å–æ•°æ®")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" cacheValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜ä¸ºç©º")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cacheValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»æ•°æ®åº“ä¸­è·å–")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" storageValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" storage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜ç©ºå¯¹è±¡")]),t._v("\n        cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" storageValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœå­˜å‚¨æ•°æ®ä¸ºç©º, éœ€è¦è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´(300ç§’)")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storageValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…é¡»è®¾ç½®è¿‡æœŸæ—¶é—´, å¦åˆ™å¦‚æœé”®å˜åŒ–è¾ƒå¤§å¯èƒ½é€ æˆRediså†…å­˜ä¸å¤Ÿç”¨")]),t._v("\n            cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expire")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" storageValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cacheValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[s("strong",[t._v("(3) ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨")])]),t._v(" "),s("p",[t._v("éœ€è¦åšçš„å°±æ˜¯"),s("strong",[t._v("åˆ¤æ–­ key æ˜¯å¦åˆæ³•")]),t._v(". "),s("strong",[t._v("äº‹å…ˆ")]),t._v("æŠŠæ‰€æœ‰"),s("strong",[t._v("å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨")]),t._v("ä¸­, å½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥, å…ˆåˆ¤æ–­"),s("strong",[t._v("è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨")]),t._v("ä¸­. "),s("strong",[t._v("ä¸å­˜åœ¨")]),t._v("åˆ™ç›´æ¥è¿”å›"),s("strong",[t._v("è¯·æ±‚å‚æ•°é”™è¯¯")]),t._v("ä¿¡æ¯ç»™å®¢æˆ·ç«¯, å­˜åœ¨æ—¶æ‰ä¼šèµ°ä¸‹é¢çš„æµç¨‹. å¸ƒéš†è¿‡æ»¤å™¨åœ¨ç¼“å­˜å±‚"),s("strong",[t._v("ä¹‹å‰")]),t._v(". å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174647325.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™ç§æ–¹æ³•é€‚ç”¨äºæ•°æ®"),s("strong",[t._v("å‘½ä¸­ç‡ä¸é«˜, æ•°æ®ç›¸å¯¹å›ºå®š")]),t._v(", å®æ—¶æ€§ä½(é€šå¸¸æ˜¯"),s("strong",[t._v("æ•°æ®é›†è¾ƒå¤§")]),t._v(") çš„åœºæ™¯.")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ BloomFilter å¸ƒéš†è¿‡æ»¤å™¨çš„è¯, éœ€è¦"),s("strong",[t._v("æå‰å°†å·²å­˜åœ¨çš„ KEY å§‹åŒ–å­˜å‚¨")]),t._v("åˆ° BloomFilter ç¼“å­˜ä¸­. æ•´ä¸ªé€»è¾‘å¦‚ä¸‹: æ ¹æ® KEY æŸ¥è¯¢ BloomFilter ç¼“å­˜. å¦‚æœ"),s("strong",[t._v("ä¸å­˜åœ¨å¯¹åº”çš„å€¼, ç›´æ¥è¿”å›")]),t._v("; å¦‚æœå­˜åœ¨å°±è¯´æ˜æ˜¯å¤§æ¦‚ç‡æ˜¯ç³»ç»Ÿé¢„å…ˆå­˜å…¥çš„é”®, è¿™æ—¶å€™å°±å¯ä»¥å» Redis ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜. å¦‚æœå­˜åœ¨ç¼“å­˜å€¼, ç›´æ¥è¿”å›; å¦‚æœä¸å­˜åœ¨åˆ™ç»§ç»­åˆ°æ•°æ®åº“å»æŸ¥æ•°æ®. æ‰¾åˆ°çš„æ•°æ®å¯ä»¥å†æ¬¡å­˜å‚¨åˆ° Redis ä¸­, å¹¶ä¸”å¯ä»¥"),s("strong",[t._v("æ›´æ–° BloomFilter")]),t._v(" ç¼“å­˜è®°å½•.")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("BloomFilterçš„å®ç°")])])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Redisson BloomFilter")]),t._v(": Java Redis åº“.")]),t._v(" "),s("li",[t._v("åŸºäº Guava å®ç°.")]),t._v(" "),s("li",[t._v("åŸºäº Redis è‡ªå¸¦çš„ Bitmaps ç»“æ„.")])]),t._v(" "),s("h5",{attrs:{id:"_2-ç¼“å­˜é›ªå´©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¼“å­˜é›ªå´©"}},[t._v("#")]),t._v(" 2.ç¼“å­˜é›ªå´©")]),t._v(" "),s("h6",{attrs:{id:"_1-æ¦‚è¿°-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-2"}},[t._v("#")]),t._v(" (1)æ¦‚è¿°")]),t._v(" "),s("p",[t._v("æŒ‡ç”±äº"),s("strong",[t._v("æ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜")]),t._v("ä¸­, æˆ–ç¼“å­˜æ•°æ®åœ¨"),s("strong",[t._v("åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¤±æ•ˆ")]),t._v(", æˆ–"),s("strong",[t._v("ç¼“å­˜æœåŠ¡å™¨å®•æœºç­‰")]),t._v(", å¯¼è‡´å¤§é‡è¯·æ±‚åŒæ—¶æ‰“åˆ°æ•°æ®åº“, é€ æˆæ•°æ®åº“å‹åŠ›è¿‡å¤§. åœ¨æœ‰ç¼“å­˜çš„ç³»ç»Ÿä¸­, ç¼“å­˜åˆ†æ‹…äº†å¾ˆå¤§ä¸€éƒ¨åˆ†æ•°æ®è¯·æ±‚. å½“å‘ç”Ÿç¼“å­˜é›ªå´©æ—¶, æ•°æ®åº“æ— æ³•å¤„ç†è¿™ä¹ˆå¤§çš„è¯·æ±‚, å¯¼è‡´æ•°æ®åº“å´©æºƒ. å°±åƒ"),s("strong",[t._v("é›ªå´©")]),t._v("ä¸€æ ·.")]),t._v(" "),s("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-2"}},[t._v("#")]),t._v(" (2)è§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("ul",[s("li",[t._v("ä¸ºäº†é˜²æ­¢ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¯¼è‡´çš„ç¼“å­˜é›ªå´©, å¯ä»¥é€šè¿‡"),s("strong",[t._v("è§‚å¯Ÿç”¨æˆ·è¡Œä¸º")]),t._v(", åˆç†è®¾ç½®"),s("strong",[t._v("ç¼“å­˜è¿‡æœŸæ—¶é—´")]),t._v(". çƒ­ç‚¹æ•°æ®è®¾ç½®æ°¸ä¸è¿‡æœŸ, ä¸€èˆ¬æ•°æ®é”™å¼€è¿‡æœŸæ—¶é—´, æ¯”å¦‚è®¾ç½®"),s("strong",[t._v("éšæœºè¿‡æœŸå€¼")]),t._v("è€Œä¸æ˜¯å…¨éƒ¨ä¸€æ ·.")]),t._v(" "),s("li",[t._v("ä¸ºäº†é˜²æ­¢ç¼“å­˜æœåŠ¡å™¨å®•æœºå‡ºç°çš„ç¼“å­˜é›ªå´©, å¯ä»¥ä½¿ç”¨"),s("strong",[t._v("åˆ†å¸ƒå¼ç¼“å­˜")]),t._v(", ä¿è¯"),s("strong",[t._v("ç¼“å†²å±‚çš„é«˜å¯ç”¨")]),t._v(". åˆ†å¸ƒå¼ç¼“å­˜ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹åªç¼“å­˜éƒ¨åˆ†çš„æ•°æ®, å½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶å¯ä»¥ä¿è¯å…¶å®ƒèŠ‚ç‚¹çš„ç¼“å­˜ä»ç„¶å¯ç”¨, å®ç°"),s("strong",[t._v("é«˜å¯ç”¨")]),t._v(".")]),t._v(" "),s("li",[t._v("å¯ä»¥è¿›è¡Œ"),s("strong",[t._v("ç¼“å­˜é¢„çƒ­")]),t._v(", "),s("strong",[t._v("æå‰æ”¾ä¸€äº›æ•°æ®åˆ°ç¼“å­˜ä¸­")]),t._v(", é¿å…åœ¨ç³»ç»Ÿåˆšå¯åŠ¨ä¸ä¹…ç”±äºè¿˜æœªå°†å¤§é‡æ•°æ®è¿›è¡Œç¼“å­˜è€Œå¯¼è‡´ç¼“å­˜é›ªå´©.")]),t._v(" "),s("li",[s("strong",[t._v("ä¾èµ–éš”ç¦»ç»„ä»¶ä¸ºåç«¯é™æµå¹¶é™çº§")]),t._v(". å¯ä»¥è€ƒè™‘è¿›è¡Œ"),s("strong",[t._v("æœåŠ¡é™çº§")]),t._v(", å¹¶å¯¹é‡è¦çš„èµ„æºè¿›è¡Œ"),s("strong",[t._v("éš”ç¦»")]),t._v(".")])]),t._v(" "),s("p",[t._v("å¦ä¸€ç§è¯´æ³•:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("äº‹å‰")]),t._v(": å°½é‡ä¿è¯æ•´ä¸ª Redis é›†ç¾¤çš„"),s("strong",[t._v("é«˜å¯ç”¨æ€§")]),t._v(", å‘ç°æœºå™¨å®•æœºå°½å¿«è¡¥ä¸Š. é€‰æ‹©åˆé€‚çš„"),s("strong",[t._v("å†…å­˜æ·˜æ±°ç­–ç•¥")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("äº‹ä¸­")]),t._v(": "),s("strong",[t._v("æœ¬åœ°ç¼“å­˜")]),t._v(" + "),s("strong",[t._v("é™æµä¸é™çº§")]),t._v(", é¿å… MySQL å´©æ‰.")]),t._v(" "),s("li",[s("strong",[t._v("äº‹å")]),t._v(": åˆ©ç”¨ Redis "),s("strong",[t._v("æŒä¹…åŒ–")]),t._v("æœºåˆ¶ä¿å­˜çš„æ•°æ®"),s("strong",[t._v("å°½å¿«æ¢å¤ç¼“å­˜")]),t._v(".")])]),t._v(" "),s("h5",{attrs:{id:"_3-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"}},[t._v("#")]),t._v(" 3.ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜")]),t._v(" "),s("h6",{attrs:{id:"_1-æ¦‚è¿°-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-3"}},[t._v("#")]),t._v(" (1)æ¦‚è¿°")]),t._v(" "),s("p",[s("strong",[t._v("ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚")]),t._v("çš„æ•°æ®å­˜åœ¨ä¸€å®šæ—¶é—´çª—å£çš„"),s("strong",[t._v("ä¸ä¸€è‡´æ€§")]),t._v(". ç¼“å­˜ä¸€è‡´æ€§è¦æ±‚æ•°æ®"),s("strong",[t._v("æ›´æ–°çš„åŒæ—¶ç¼“å­˜æ•°æ®ä¹Ÿèƒ½å¤Ÿå®æ—¶æ›´æ–°")]),t._v(".")]),t._v(" "),s("p",[t._v("æ›´æ–° DB å’Œæ“ä½œç¼“å­˜ä¸¤ä¸ªåŠ¨ä½œä¹‹é—´, æ˜æ˜¾"),s("strong",[t._v("ç¼ºä¹åŸå­æ€§")]),t._v(", æœ‰å¯èƒ½æ›´æ–° DB å®Œæˆ, ä½†æ˜¯æ“ä½œç¼“å­˜å¤±è´¥(æ·˜æ±°æˆ–è€…æ›´æ–°), åä¹‹äº¦ç„¶. æ‰€ä»¥ä¸¤è€…ä¹‹é—´å¿…ç„¶æ˜¯å­˜åœ¨æ–­å±‚çš„.")]),t._v(" "),s("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-3"}},[t._v("#")]),t._v(" (2)è§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("p",[s("strong",[t._v("å¯ä»¥è€ƒè™‘å…ˆæ›´æ–°æ•°æ®åº“, å†æ›´æ–°ç¼“å­˜")]),t._v(". å¦‚æœé‡‡ç”¨å…ˆæ·˜æ±°ç¼“å­˜, åæ›´æ–° DB æ“ä½œ, å¦‚æœåœ¨ DB æ›´æ–°å®Œæˆä¹‹å‰, æ¥äº†ä¸€ä¸ªæ–°çš„è¯»è¯·æ±‚, é‚£ä¹ˆå°±ä¼šæŸ¥è¯¢å‡ºæ•°æ®åº“çš„æ—§æ•°æ®, ç¼“å­˜åˆ° Redis, å¯¼è‡´ DB æ›´æ–°å®Œæˆä¹‹å, ä¸¤è€…æ•°æ®ä¸ä¸€è‡´. å¦‚æœå…ˆæ›´æ–° DB, ç„¶åæ“ä½œç¼“å­˜å¤±è´¥, å®¢æˆ·ç«¯è¯»å–åˆ°çš„æ˜¯æ—§çš„æ•°æ®, æ­¤æ—¶ä¹Ÿæ˜¯å­˜åœ¨ DB ä¸ç¼“å­˜ä¸ä¸€è‡´. ä½†æ˜¯å®é™…ä¸šåŠ¡ä¸Š, æ›´å¤š"),s("strong",[t._v("è¿˜æ˜¯ä»¥ DB æ•°æ®ä¸ºå‡†")]),t._v(", è¿™ç§è¯»å–åˆ°æ—§æ•°æ®çš„ä¸šåŠ¡å½±å“å¯èƒ½æ¯”è¯»å–åˆ°ä¸ºæœªæ›´æ–°åˆ° DB çš„æ•°æ®å½±å“è¦å°. ä½¿ç”¨ç¼“å­˜æœ¬èº«å°±èƒ½å®¹å¿æœ‰ä¸€å®šçš„è„æ•°æ®å‡ºç°.")]),t._v(" "),s("p",[t._v("è¦ä¿è¯ç¼“å­˜ä¸€è‡´æ€§éœ€è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·, "),s("strong",[t._v("==ç¼“å­˜æ•°æ®æœ€å¥½æ˜¯é‚£äº›å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®, å…è®¸ç¼“å­˜æ•°æ®å­˜åœ¨ä¸€äº›è„æ•°æ®==")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_4-ç¼“å­˜æ— åº•æ´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç¼“å­˜æ— åº•æ´"}},[t._v("#")]),t._v(" 4.ç¼“å­˜æ— åº•æ´")]),t._v(" "),s("h6",{attrs:{id:"_1-æ¦‚è¿°-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-4"}},[t._v("#")]),t._v(" (1)æ¦‚è¿°")]),t._v(" "),s("p",[t._v('ç¼“å­˜ "æ— åº•æ´" æŒ‡çš„æ˜¯ä¸ºäº†æ»¡è¶³ä¸šåŠ¡è¦æ±‚'),s("strong",[t._v("æ·»åŠ äº†å¤§é‡ç¼“å­˜èŠ‚ç‚¹")]),t._v(", ä½†æ˜¯"),s("strong",[t._v("æ€§èƒ½ä¸ä½†æ²¡æœ‰å¥½è½¬åè€Œä¸‹é™")]),t._v("äº†çš„ç°è±¡.")]),t._v(" "),s("p",[s("strong",[t._v("äº§ç”ŸåŸå› ")]),t._v(": ç¼“å­˜ç³»ç»Ÿé€šå¸¸"),s("strong",[t._v("é‡‡ç”¨ hash å‡½æ•°å°† key æ˜ å°„åˆ°å¯¹åº”çš„ç¼“å­˜èŠ‚ç‚¹")]),t._v(", éšç€ç¼“å­˜èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ , "),s("strong",[t._v("é”®å€¼åˆ†å¸ƒåˆ°æ›´å¤šçš„èŠ‚ç‚¹ä¸Š")]),t._v(", å¯¼è‡´å®¢æˆ·ç«¯ä¸€æ¬¡æ‰¹é‡æ“ä½œä¼šæ¶‰åŠ"),s("strong",[t._v("å¤šæ¬¡ç½‘ç»œæ“ä½œ")]),t._v(", è¿™æ„å‘³ç€æ‰¹é‡æ“ä½œçš„"),s("strong",[t._v("è€—æ—¶ä¼šéšç€èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ è€Œä¸æ–­å¢å¤§")]),t._v(". æ­¤å¤–, ç½‘ç»œè¿æ¥æ•°å˜å¤š, å¯¹èŠ‚ç‚¹çš„æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šå½±å“.")]),t._v(" "),s("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-4"}},[t._v("#")]),t._v(" (2)è§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("ul",[s("li",[t._v("ä¼˜åŒ–"),s("strong",[t._v("æ‰¹é‡æ•°æ®")]),t._v("æ“ä½œå‘½ä»¤.")]),t._v(" "),s("li",[t._v("å‡å°‘ç½‘ç»œé€šä¿¡"),s("strong",[t._v("æ¬¡æ•°")]),t._v(".")]),t._v(" "),s("li",[t._v("é™ä½"),s("strong",[t._v("æ¥å…¥æˆæœ¬")]),t._v(", ä½¿ç”¨é•¿è¿æ¥, è¿æ¥æ± , "),s("strong",[t._v("NIO")]),t._v(" ç­‰.")])]),t._v(" "),s("p",[s("strong",[t._v("åˆ†å¸ƒå¼")]),t._v("æ¡ä»¶ä¸‹, ä»¥ Redis çš„ "),s("strong",[t._v("mget")]),t._v(" æŒ‡ä»¤ä¸ºä¾‹, æœ‰"),s("strong",[t._v("å››ç§æ‰¹é‡æ“ä½œçš„è§£å†³æ–¹æ¡ˆ")]),t._v(".")]),t._v(" "),s("ul",[s("li",[t._v("ä¸²è¡Œå‘½ä»¤. é€æ¬¡æ‰§è¡Œ n ä¸ª get å‘½ä»¤.")]),t._v(" "),s("li",[t._v('ä¸²è¡Œ IO. åœ¨å®¢æˆ·ç«¯ç¼“å­˜"'),s("strong",[t._v("é”®-æ§½-èŠ‚ç‚¹")]),t._v('"çš„å¯¹åº”å…³ç³», åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ä½¿ç”¨ Pipeline è¯·æ±‚å®Œæˆ.')]),t._v(" "),s("li",[t._v("å¹¶è¡Œ IO. ä½¿ç”¨å¤šçº¿ç¨‹æ–¹å¼è¿›è¡Œä¸²è¡Œ IO.")]),t._v(" "),s("li",[t._v("hash_tag å®ç°. Redis cluster çš„ hash_tag åŠŸèƒ½å¯ä»¥å°†å¤šä¸ª key å¼ºåˆ¶åˆ†é…åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Š, å‡å°‘æ“ä½œ.")])]),t._v(" "),s("h4",{attrs:{id:"æ•°æ®åˆ†å¸ƒæ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åˆ†å¸ƒæ–¹å¼"}},[t._v("#")]),t._v(" æ•°æ®åˆ†å¸ƒæ–¹å¼")]),t._v(" "),s("h5",{attrs:{id:"_1-é¡ºåºåˆ†å¸ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¡ºåºåˆ†å¸ƒ"}},[t._v("#")]),t._v(" 1.é¡ºåºåˆ†å¸ƒ")]),t._v(" "),s("p",[t._v("å°†æ•°æ®åˆ’åˆ†ä¸º"),s("strong",[t._v("å¤šä¸ªè¿ç»­")]),t._v("çš„éƒ¨åˆ†, æŒ‰æ•°æ®çš„ ID æˆ–è€…æ—¶é—´åˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹ä¸Š. ä¾‹å¦‚ User è¡¨çš„ ID èŒƒå›´ä¸º 1 ~ 7000, ä½¿ç”¨é¡ºåºåˆ†å¸ƒå¯ä»¥å°†å…¶åˆ’åˆ†æˆå¤šä¸ªå­è¡¨, å¯¹åº”çš„ä¸»é”®èŒƒå›´ä¸º 1 ~ 1000, 1001 ~ 2000, ..., 6001 ~ 7000.")]),t._v(" "),s("p",[t._v("é¡ºåºåˆ†å¸ƒç›¸æ¯”äºå“ˆå¸Œåˆ†å¸ƒçš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[t._v("èƒ½ä¿æŒæ•°æ®åŸæœ‰çš„"),s("strong",[t._v("é¡ºåº")]),t._v(".")]),t._v(" "),s("li",[t._v("èƒ½å¤Ÿå‡†ç¡®æ§åˆ¶æ¯å°æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡, ä»è€Œä½¿å¾—å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡æœ€å¤§.")])]),t._v(" "),s("h5",{attrs:{id:"_2-å“ˆå¸Œåˆ†å¸ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å“ˆå¸Œåˆ†å¸ƒ"}},[t._v("#")]),t._v(" 2.å“ˆå¸Œåˆ†å¸ƒ")]),t._v(" "),s("p",[s("strong",[t._v("å“ˆå¸Œåˆ†å¸ƒ")]),t._v("å°±æ˜¯å°†æ•°æ®è®¡ç®—å“ˆå¸Œå€¼ä¹‹å, æŒ‰ç…§"),s("strong",[t._v("å“ˆå¸Œå€¼")]),t._v("åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Š. ä¾‹å¦‚æœ‰ N ä¸ªèŠ‚ç‚¹, æ•°æ®çš„ä¸»é”®ä¸º key, åˆ™å°†è¯¥æ•°æ®åˆ†é…çš„èŠ‚ç‚¹åºå·ä¸º: "),s("strong",[t._v("hash(key) % N")]),t._v(".")]),t._v(" "),s("p",[t._v("ä¼ ç»Ÿçš„å“ˆå¸Œåˆ†å¸ƒç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜: å½“èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶, ä¹Ÿå°±æ˜¯ N å€¼å˜åŒ–, é‚£ä¹ˆå‡ ä¹æ‰€æœ‰çš„æ•°æ®"),s("strong",[t._v("éƒ½éœ€è¦é‡æ–°åˆ†å¸ƒ")]),t._v(", å³"),s("strong",[t._v("å†å“ˆå¸Œ")]),t._v(", å°†"),s("strong",[t._v("å¯¼è‡´å¤§é‡çš„æ•°æ®è¿ç§»")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_3-ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ"}},[t._v("#")]),t._v(" 3.ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ")]),t._v(" "),s("p",[s("strong",[t._v("Distributed Hash Table")]),t._v("(DHT) æ˜¯ä¸€ç§"),s("strong",[t._v("å“ˆå¸Œåˆ†å¸ƒæ–¹å¼")]),t._v(", å¯ä»¥è§£å†³ä¼ ç»Ÿå“ˆå¸Œåˆ†å¸ƒåœ¨æœåŠ¡å™¨èŠ‚ç‚¹æ•°é‡å˜åŒ–å†å“ˆå¸Œæ—¶"),s("strong",[t._v("å¤§é‡æ•°æ®è¿ç§»")]),t._v("çš„é—®é¢˜.")]),t._v(" "),s("h6",{attrs:{id:"_1-åŸºæœ¬åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŸºæœ¬åŸç†"}},[t._v("#")]),t._v(" (1)åŸºæœ¬åŸç†")]),t._v(" "),s("p",[t._v("å°†å“ˆå¸Œç©ºé—´ [0, 2n-1] çœ‹æˆä¸€ä¸ª"),s("strong",[t._v("å“ˆå¸Œç¯")]),t._v(", æ¯ä¸ªæœåŠ¡å™¨"),s("strong",[t._v("èŠ‚ç‚¹")]),t._v("éƒ½é…ç½®åˆ°"),s("strong",[t._v("å“ˆå¸Œç¯")]),t._v("ä¸Š. "),s("strong",[t._v("æ¯ä¸ªæ•°æ®å¯¹è±¡é€šè¿‡å“ˆå¸Œå–æ¨¡å¾—åˆ°å“ˆå¸Œå€¼ä¹‹å, å­˜æ”¾åˆ°å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å“ˆå¸Œå€¼çš„èŠ‚ç‚¹ä¸Š")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200527211945450.png",alt:"image-20200527211945450"}})]),t._v(" "),s("p",[t._v("ä¸€è‡´æ€§å“ˆå¸Œåœ¨"),s("strong",[t._v("å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶åªä¼šå½±å“åˆ°å“ˆå¸Œç¯ä¸­ç›¸é‚»çš„èŠ‚ç‚¹")]),t._v(", ä¾‹å¦‚ä¸‹å›¾ä¸­æ–°å¢èŠ‚ç‚¹ 5, åªéœ€è¦å°†å®ƒå‰ä¸€ä¸ªèŠ‚ç‚¹ 4 ä¸Šçš„æ•°æ®é‡æ–°è¿›è¡Œåˆ†å¸ƒå³å¯, å¯¹äºèŠ‚ç‚¹ 1, 2, 3 éƒ½æ²¡æœ‰å½±å“. å¯ä»¥å‡å°‘æ•´ä½“çš„æ•°æ®è¿ç§»é‡.")]),t._v(" "),s("h6",{attrs:{id:"_2-è™šæ‹ŸèŠ‚ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è™šæ‹ŸèŠ‚ç‚¹"}},[t._v("#")]),t._v(" (2)è™šæ‹ŸèŠ‚ç‚¹")]),t._v(" "),s("p",[t._v("ä¸Šé¢æè¿°çš„ä¸€è‡´æ€§å“ˆå¸Œä¾ç„¶å¯èƒ½å­˜åœ¨æ•°æ®"),s("strong",[t._v("åˆ†å¸ƒä¸å‡åŒ€")]),t._v("çš„é—®é¢˜, ä¸åŒèŠ‚ç‚¹å­˜å‚¨çš„"),s("strong",[t._v("æ•°æ®é‡")]),t._v("æœ‰å¯èƒ½ä¼šå­˜åœ¨"),s("strong",[t._v("å¾ˆå¤§çš„ä¸åŒ")]),t._v(". æ•°æ®ä¸å‡åŒ€ä¸»è¦æ˜¯å› ä¸º"),s("strong",[t._v("èŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„ä¸å‡åŒ€")]),t._v(", è¿™ç§æƒ…å†µåœ¨"),s("strong",[t._v("èŠ‚ç‚¹æ•°é‡å¾ˆå°‘")]),t._v("çš„æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾.")]),t._v(" "),s("p",[t._v("è§£å†³æ–¹å¼æ˜¯é€šè¿‡"),s("strong",[t._v("å¢åŠ å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹")]),t._v(", ç„¶åå°†"),s("strong",[t._v("è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°çœŸå®èŠ‚ç‚¹")]),t._v("ä¸Š. è™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡æ¯”çœŸå®èŠ‚ç‚¹æ¥å¾—"),s("strong",[t._v("å¤š")]),t._v(", é‚£ä¹ˆè™šæ‹ŸèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„å‡åŒ€æ€§å°±ä¼šæ¯”åŸæ¥çš„çœŸå®èŠ‚ç‚¹å¥½, ä»è€Œä½¿å¾—æ•°æ®åˆ†å¸ƒä¹Ÿæ›´åŠ å‡åŒ€.")]),t._v(" "),s("h4",{attrs:{id:"å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§"}},[t._v("#")]),t._v(" å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§?")]),t._v(" "),s("p",[t._v("åªè¦ç”¨"),s("strong",[t._v("ç¼“å­˜")]),t._v(", å°±å¯èƒ½ä¼šæ¶‰åŠåˆ°ç¼“å­˜ä¸æ•°æ®åº“åŒå­˜å‚¨åŒå†™, åªè¦æ˜¯åŒå†™, å°±"),s("strong",[t._v("ä¸€å®šä¼šæœ‰æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜")]),t._v(", å¦‚ä½•è§£å†³ä¸€è‡´æ€§é—®é¢˜?")]),t._v(" "),s("p",[t._v("æœ€ç»å…¸çš„"),s("strong",[t._v("ç¼“å­˜ + æ•°æ®åº“è¯»å†™")]),t._v("çš„æ¨¡å¼, å°±æ˜¯ "),s("strong",[t._v("Cache Aside Pattern")]),t._v(".")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è¯»çš„æ—¶å€™, å…ˆè¯»ç¼“å­˜, ç¼“å­˜æ²¡æœ‰çš„è¯, å°±è¯»æ•°æ®åº“, ç„¶åå–å‡ºæ•°æ®åæ”¾å…¥ç¼“å­˜, åŒæ—¶è¿”å›å“åº”")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("æ›´æ–°çš„æ—¶å€™, å…ˆæ›´æ–°æ•°æ®åº“, ç„¶åå†åˆ é™¤ç¼“å­˜.")])])]),t._v(" "),s("p",[s("strong",[t._v("ä¸ºä»€ä¹ˆæ˜¯åˆ é™¤ç¼“å­˜, è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜?")])]),t._v(" "),s("p",[t._v("å› ä¸ºåœ¨å¤æ‚ç‚¹çš„ç¼“å­˜åœºæ™¯ä¸­, ç¼“å­˜ä¸ä»…æ˜¯æ•°æ®åº“ä¸­ç›´æ¥å–å‡ºæ¥çš„å€¼. æ¯”å¦‚å¯èƒ½æ›´æ–°äº†æŸä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ, ç„¶åå…¶å¯¹åº”çš„ç¼“å­˜, æ˜¯éœ€è¦æŸ¥è¯¢å¦å¤–ä¸¤ä¸ªè¡¨çš„æ•°æ®å¹¶è¿›è¡Œ"),s("strong",[t._v("è¿ç®—")]),t._v(", æ‰èƒ½è®¡ç®—å‡ºç¼“å­˜çš„æœ€æ–°å€¼.")]),t._v(" "),s("p",[t._v("ä¸¾ä¸ªä¾‹å­, å¯¹äºæ›´æ–°ç¼“å­˜çš„æ–¹æ¡ˆ, ä¸€ä¸ªç¼“å­˜æ¶‰åŠçš„è¡¨çš„å­—æ®µ, åœ¨ 1 åˆ†é’Ÿå†…å°±ä¿®æ”¹äº† 100 æ¬¡, é‚£ä¹ˆç¼“å­˜æ›´æ–° 100 æ¬¡; ä½†æ˜¯è¿™ä¸ªç¼“å­˜åœ¨ 1 åˆ†é’Ÿå†…"),s("strong",[t._v("åªè¢«è¯»å–äº† 1 æ¬¡")]),t._v(", æœ‰å¤§é‡çš„å†·æ•°æ®. è€Œå¦‚æœæ˜¯åˆ é™¤ç¼“å­˜çš„è¯, é‚£ä¹ˆåœ¨ 1 åˆ†é’Ÿå†…, è¿™ä¸ªç¼“å­˜ä¸è¿‡å°±"),s("strong",[t._v("é‡æ–°è®¡ç®—ä¸€æ¬¡")]),t._v("è€Œå·², å¼€é”€å¤§å¹…åº¦é™ä½.")]),t._v(" "),s("p",[s("strong",[t._v("ç”¨åˆ°ç¼“å­˜æ‰å»ç®—ç¼“å­˜")]),t._v(". "),s("strong",[t._v("åˆ é™¤ç¼“å­˜è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜, å°±æ˜¯ä¸€ä¸ª lazy è®¡ç®—çš„æ€æƒ³")]),t._v(", ä¸è¦æ¯æ¬¡éƒ½é‡æ–°åšå¤æ‚çš„è®¡ç®—, ä¸ç®¡å®ƒä¼šä¸ä¼šç”¨åˆ°, è€Œæ˜¯è®©å®ƒåˆ°éœ€è¦è¢«ä½¿ç”¨çš„æ—¶å€™å†é‡æ–°è®¡ç®—.")]),t._v(" "),s("p",[t._v("é—®é¢˜: "),s("strong",[t._v("å…ˆæ›´æ–°æ•°æ®åº“, å†åˆ é™¤ç¼“å­˜")]),t._v(". å¦‚æœ"),s("strong",[t._v("åˆ é™¤ç¼“å­˜å¤±è´¥")]),t._v("äº†, é‚£ä¹ˆä¼š"),s("strong",[t._v("å¯¼è‡´æ•°æ®åº“ä¸­æ˜¯æ–°æ•°æ®, ç¼“å­˜ä¸­æ˜¯æ—§æ•°æ®")]),t._v(", æ•°æ®å°±å‡ºç°äº†"),s("strong",[t._v("ä¸ä¸€è‡´")]),t._v(".")]),t._v(" "),s("p",[t._v("è§£å†³æ€è·¯: "),s("strong",[t._v("å…ˆåˆ é™¤ç¼“å­˜, å†æ›´æ–°æ•°æ®åº“")]),t._v(". å¦‚æœ"),s("strong",[t._v("æ•°æ®åº“æ›´æ–°å¤±è´¥äº†, é‚£ä¹ˆæ•°æ®åº“ä¸­æ˜¯æ—§æ•°æ®")]),t._v(", ç¼“å­˜ä¸­æ˜¯"),s("strong",[t._v("ç©ºçš„")]),t._v(", é‚£ä¹ˆæ•°æ®ä¸ä¼šä¸ä¸€è‡´. å› ä¸ºè¯»çš„æ—¶å€™ç¼“å­˜æ²¡æœ‰, æ‰€ä»¥å»è¯»äº†æ•°æ®åº“ä¸­çš„æ—§æ•°æ®, ç„¶åæ›´æ–°åˆ°ç¼“å­˜ä¸­.")]),t._v(" "),s("p",[t._v("é—®é¢˜: æ•°æ®å‘ç”Ÿäº†å˜æ›´, å…ˆåˆ é™¤äº†ç¼“å­˜, ç„¶åè¦å»ä¿®æ”¹æ•°æ®åº“, "),s("strong",[t._v("æ­¤æ—¶è¿˜æ²¡ä¿®æ”¹")]),t._v(". ä¸€ä¸ªè¯·æ±‚è¿‡æ¥, å»è¯»ç¼“å­˜, å‘ç°ç¼“å­˜ç©ºäº†, å»æŸ¥è¯¢æ•°æ®åº“, "),s("strong",[t._v("æŸ¥åˆ°äº†ä¿®æ”¹å‰çš„æ—§æ•°æ®")]),t._v(", æ”¾åˆ°äº†"),s("strong",[t._v("ç¼“å­˜")]),t._v("ä¸­. éšåæ•°æ®å˜æ›´çš„ç¨‹åºå®Œæˆäº†æ•°æ®åº“çš„ä¿®æ”¹. æ­¤æ—¶æ•°æ®åº“å’Œç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´äº†.")]),t._v(" "),s("p",[s("strong",[t._v("ä¸ºä»€ä¹ˆä¸Šäº¿æµé‡é«˜å¹¶å‘åœºæ™¯ä¸‹, ç¼“å­˜ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜?")])]),t._v(" "),s("p",[t._v("åªæœ‰åœ¨å¯¹ä¸€ä¸ªæ•°æ®åœ¨å¹¶å‘çš„è¿›è¡Œè¯»å†™çš„æ—¶å€™, æ‰å¯èƒ½ä¼šå‡ºç°è¿™ç§é—®é¢˜. å…¶å®å¦‚æœè¯´å¹¶å‘é‡å¾ˆä½çš„è¯, ç‰¹åˆ«æ˜¯è¯»å¹¶å‘å¾ˆä½, æ—¥æ´»å°± 1 W, é‚£ä¹ˆå¾ˆå°‘çš„æƒ…å†µä¸‹, ä¼šå‡ºç°åˆšæ‰æè¿°çš„é‚£ç§ä¸ä¸€è‡´çš„åœºæ™¯. ä½†å¦‚æœæ—¥æ´»ä¸Šäº¿, æ¯ç§’å¹¶å‘è¯»å¯èƒ½æˆåƒä¸Šä¸‡, æ¯ç§’åªè¦æœ‰æ•°æ®æ›´æ–°çš„è¯·æ±‚, å°±"),s("strong",[t._v("å¯èƒ½ä¼šå‡ºç°ä¸Šè¿°çš„æ•°æ®åº“ + ç¼“å­˜ä¸ä¸€è‡´çš„æƒ…å†µ")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("è§£å†³æ–¹æ¡ˆå¦‚ä¸‹:")])]),t._v(" "),s("p",[t._v("æ›´æ–°æ•°æ®çš„æ—¶å€™, æ ¹æ®"),s("strong",[t._v("æ•°æ®çš„å”¯ä¸€æ ‡è¯†")]),t._v(', å°†æ“ä½œè·¯ç”±ä¹‹å, å‘é€åˆ°ä¸€ä¸ª JVM å†…éƒ¨é˜Ÿåˆ—ä¸­. è¯»å–æ•°æ®çš„æ—¶å€™, å¦‚æœå‘ç°æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­, é‚£ä¹ˆå°†é‡æ–°æ‰§è¡Œ "è¯»å–æ•°æ®+æ›´æ–°ç¼“å­˜" çš„æ“ä½œ, æ ¹æ®å”¯ä¸€æ ‡è¯†è·¯ç”±ä¹‹å, ä¹Ÿå‘é€åˆ°åŒä¸€ä¸ª JVM å†…éƒ¨é˜Ÿåˆ—ä¸­.')]),t._v(" "),s("p",[t._v("ä¸€ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸€ä¸ªå·¥ä½œçº¿ç¨‹, æ¯ä¸ªå·¥ä½œçº¿ç¨‹"),s("strong",[t._v("ä¸²è¡Œ")]),t._v("æ‹¿åˆ°å¯¹åº”çš„æ“ä½œ, ç„¶åä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œ. è¿™æ ·çš„è¯, ä¸€ä¸ªæ•°æ®å˜æ›´çš„æ“ä½œ, å…ˆåˆ é™¤ç¼“å­˜, ç„¶åå†å»æ›´æ–°æ•°æ®åº“, ä½†æ˜¯è¿˜æ²¡å®Œæˆæ›´æ–°. æ­¤æ—¶å¦‚æœä¸€ä¸ªè¯»è¯·æ±‚è¿‡æ¥, æ²¡æœ‰è¯»åˆ°ç¼“å­˜, é‚£ä¹ˆå¯ä»¥å…ˆå°†ç¼“å­˜æ›´æ–°çš„è¯·æ±‚å‘é€åˆ°é˜Ÿåˆ—ä¸­, æ­¤æ—¶ä¼šåœ¨é˜Ÿåˆ—ä¸­ç§¯å‹, ç„¶ååŒæ­¥ç­‰å¾…ç¼“å­˜æ›´æ–°å®Œæˆ.")]),t._v(" "),s("p",[t._v("è¿™é‡Œæœ‰ä¸€ä¸ª"),s("strong",[t._v("ä¼˜åŒ–ç‚¹")]),t._v(", ä¸€ä¸ªé˜Ÿåˆ—ä¸­, å…¶å®"),s("strong",[t._v("å¤šä¸ªæ›´æ–°ç¼“å­˜è¯·æ±‚ä¸²åœ¨ä¸€èµ·æ˜¯æ²¡æ„ä¹‰çš„")]),t._v(", å› æ­¤å¯ä»¥åšè¿‡æ»¤, å¦‚æœå‘ç°é˜Ÿåˆ—ä¸­å·²ç»æœ‰ä¸€ä¸ªæ›´æ–°ç¼“å­˜çš„è¯·æ±‚äº†, é‚£ä¹ˆå°±ä¸ç”¨å†æ”¾ä¸ªæ›´æ–°è¯·æ±‚æ“ä½œè¿›å»äº†, ç›´æ¥ç­‰å¾…å‰é¢çš„æ›´æ–°æ“ä½œè¯·æ±‚å®Œæˆå³å¯.")]),t._v(" "),s("p",[t._v("å¾…é‚£ä¸ªé˜Ÿåˆ—å¯¹åº”çš„å·¥ä½œçº¿ç¨‹å®Œæˆäº†ä¸Šä¸€ä¸ªæ“ä½œçš„æ•°æ®åº“çš„ä¿®æ”¹ä¹‹å, æ‰ä¼šå»æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œ, ä¹Ÿå°±æ˜¯ç¼“å­˜æ›´æ–°çš„æ“ä½œ, æ­¤æ—¶ä¼šä»æ•°æ®åº“ä¸­è¯»å–æœ€æ–°çš„å€¼, ç„¶åå†™å…¥ç¼“å­˜ä¸­.")]),t._v(" "),s("p",[t._v("å¦‚æœè¯·æ±‚è¿˜åœ¨ç­‰å¾…æ—¶é—´èŒƒå›´å†…, ä¸æ–­è½®è¯¢å‘ç°å¯ä»¥å–åˆ°å€¼äº†, é‚£ä¹ˆå°±ç›´æ¥è¿”å›; å¦‚æœè¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¶…è¿‡ä¸€å®šæ—¶é•¿, é‚£ä¹ˆè¿™ä¸€æ¬¡ç›´æ¥ä»æ•°æ®åº“ä¸­è¯»å–å½“å‰çš„æ—§å€¼.")]),t._v(" "),s("h4",{attrs:{id:"lruå®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lruå®ç°"}},[t._v("#")]),t._v(" LRUå®ç°")]),t._v(" "),s("p",[t._v("ä»¥ä¸‹æ˜¯åŸºäº "),s("strong",[t._v("åŒå‘é“¾è¡¨ + HashMap")]),t._v(" çš„ LRU ç®—æ³•å®ç°, å¯¹ç®—æ³•çš„è§£é‡Šå¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è®¿é—®")]),t._v("æŸä¸ªèŠ‚ç‚¹æ—¶, å°†å…¶ä»åŸæ¥çš„ä½ç½®"),s("strong",[t._v("åˆ é™¤")]),t._v(", å¹¶é‡æ–°æ’å…¥åˆ°"),s("strong",[t._v("é“¾è¡¨å¤´éƒ¨")]),t._v(". è¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨"),s("strong",[t._v("å°¾éƒ¨")]),t._v("å­˜å‚¨çš„å°±æ˜¯"),s("strong",[t._v("æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨")]),t._v("çš„èŠ‚ç‚¹, å½“èŠ‚ç‚¹æ•°é‡"),s("strong",[t._v("å¤§äº")]),t._v("ç¼“å­˜æœ€å¤§ç©ºé—´æ—¶å°±"),s("strong",[t._v("æ·˜æ±°")]),t._v("é“¾è¡¨å°¾éƒ¨çš„èŠ‚ç‚¹.")]),t._v(" "),s("li",[t._v("ä¸ºäº†ä½¿"),s("strong",[t._v("åˆ é™¤")]),t._v("æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º "),s("strong",[t._v("O(1)")]),t._v(", å°±ä¸èƒ½é‡‡ç”¨éå†çš„æ–¹å¼æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹. "),s("strong",[t._v("HashMap")]),t._v(" å­˜å‚¨ç€ "),s("strong",[t._v("Key åˆ°èŠ‚ç‚¹")]),t._v("çš„æ˜ å°„, é€šè¿‡ Key å°±èƒ½ä»¥ O(1) çš„æ—¶é—´å¾—åˆ°èŠ‚ç‚¹, ç„¶åå†ä»¥ O(1) çš„æ—¶é—´å°†å…¶ä»"),s("strong",[t._v("åŒå‘é˜Ÿåˆ—")]),t._v("ä¸­åˆ é™¤.")])]),t._v(" "),s("p",[t._v("é‡‡â½¤è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„ç»„åˆ, get æ“ä½œå°±å¯ä»¥åœ¨ "),s("strong",[t._v("O(1)")]),t._v(" æ—¶é—´å¤æ‚åº¦å†…å®Œæˆäº†. ç”±äº put æ“ä½œè¦åˆ é™¤çš„èŠ‚ç‚¹â¼€èˆ¬æ˜¯å°¾éƒ¨èŠ‚ç‚¹, æ‰€ä»¥å¯ä»¥â½¤â¼€ä¸ªå˜é‡ tail æ—¶åˆ»è®°å½•å°¾éƒ¨èŠ‚ç‚¹çš„ä½ç½®, è¿™æ · put æ“ä½œä¹Ÿå¯ä»¥åœ¨ O(1) æ—¶é—´å†…å®Œæˆäº†.")]),t._v(" "),s("p",[t._v("å…ˆæ¥ä¸€ä¸ªç»“ç‚¹ç±».")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" next"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" pre"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("æ³¨æ„: ä¸ç®¡æ˜¯ put æ–¹æ³•è¿˜æ˜¯ get æ–¹æ³•, "),s("strong",[t._v("éƒ½éœ€è¦å°†è®¿é—®çš„ç»“ç‚¹é‡æ–°æ”¾åˆ°é“¾è¡¨å¤´éƒ¨")]),t._v(", æ‰€ä»¥ä¼šæŠ½å‡ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUCache")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" tail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜æœ€â¼¤å®¹é‡å¤§äº1")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" capacity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" capacity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("capacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" capacity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** æ’å…¥å…ƒç´  */")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯´æ˜ç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("head "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\thead "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\ttail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tmap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯´æ˜ç¼“å­˜ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå…ƒç´ äº†")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°å€¼")]),t._v("\n\t\t\tnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠè¿™ä¸ªç»“ç‚¹ä»é“¾è¡¨åˆ é™¤å¹¶ä¸”æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAndInsert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯´æ˜å½“å‰ç¼“å­˜ä¸å­˜åœ¨è¿™ä¸ªå€¼")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" newHead "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤å¤„æº¢å‡ºåˆ™éœ€è¦åˆ é™¤æœ€è¿‘æœ€è¿‘æœªä½¿ç”¨çš„èŠ‚ç‚¹")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" capacity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tmap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ é™¤å°¾ç»“ç‚¹")]),t._v("\n\t\t\t\ttail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\ttail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\tmap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newHead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ–°çš„ç»“ç‚¹æ’å…¥é“¾è¡¨å¤´éƒ¨")]),t._v("\n\t\t\tnewHead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\thead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newHead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\thead "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newHead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** ä»ç¼“å­˜ä¸­å–å€¼ */")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœæœ‰å€¼åˆ™éœ€è¦å°†è¿™ä¸ªç»“ç‚¹æ”¾åˆ°é“¾è¡¨å¤´éƒ¨")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠè¿™ä¸ªèŠ‚ç‚¹åˆ é™¤å¹¶æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAndInsert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAndInsert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUNode")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç‰¹æ®Šæƒ…å†µå…ˆåˆ¤æ–­, ä¾‹å¦‚è¯¥èŠ‚ç‚¹æ˜¯å¤´ç»“ç‚¹æˆ–æ˜¯å°¾éƒ¨èŠ‚ç‚¹")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" tail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\ttail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\ttail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),t._v("\n\t\tnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" head"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\thead"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pre "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\thead "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br")])]),s("p",[s("strong",[t._v("LinkedHashMap")]),t._v(" ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°"),s("strong",[t._v("å›ºå®šå¤§å°")]),t._v("çš„ LRU ç¼“å­˜, å½“ LRU ç¼“å­˜å·²ç»æ»¡äº†çš„æ—¶å€™, å®ƒä¼šæŠŠæœ€è€çš„é”®å€¼å¯¹ç§»å‡ºç¼“å­˜. LinkedHashMap æä¾›äº†ä¸€ä¸ªç§°ä¸º "),s("strong",[t._v("removeEldestEntry")]),t._v("() çš„æ–¹æ³•, è¯¥æ–¹æ³•ä¼šè¢« put() å’Œ putAll() è°ƒç”¨æ¥åˆ é™¤æœ€è€çš„é”®å€¼å¯¹.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUCache")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("V")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedHashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("V")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CACHE_SIZE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * ä¼ é€’è¿›æ¥æœ€å¤šèƒ½ç¼“å­˜å¤šå°‘æ•°æ®\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LRUCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" cacheSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// trueè¡¨ç¤ºè®©linkedHashMapæŒ‰ç…§è®¿é—®é¡ºåºæ¥è¿›è¡Œæ’åº, æœ€è¿‘è®¿é—®çš„æ”¾åœ¨å¤´éƒ¨, æœ€è€è®¿é—®çš„æ”¾åœ¨å°¾éƒ¨")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Math")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ceil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cacheSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.75")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.75f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CACHE_SIZE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cacheSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * é’©å­æ–¹æ³•, é€šè¿‡putæ–°å¢é”®å€¼å¯¹çš„æ—¶å€™, è‹¥è¯¥æ–¹æ³•è¿”å›true\n     * ä¾¿ç§»é™¤è¯¥mapä¸­æœ€è€çš„é”®å’Œå€¼\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEldestEntry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Entry")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("V")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" eldest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“mapä¸­çš„æ•°æ®é‡å¤§äºæŒ‡å®šçš„ç¼“å­˜ä¸ªæ•°çš„æ—¶å€™, å°±è‡ªåŠ¨åˆ é™¤æœ€è€çš„æ•°æ®")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CACHE_SIZE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[t._v("â€")]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[t._v("å¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://tech.meituan.com/cache_about.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¼“å­˜é‚£äº›äº‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://my.oschina.net/jayhu/blog/732849",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF",target:"_blank",rel:"noopener noreferrer"}},[t._v("å†…å®¹åˆ†å‘ç½‘ç»œ"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);