(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{464:function(s,t,a){"use strict";a.r(t);var n=a(7),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_10-ç¼“å­˜åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-ç¼“å­˜åŸºç¡€"}},[s._v("#")]),s._v(" 10.ç¼“å­˜åŸºç¡€")]),s._v(" "),t("h4",{attrs:{id:"ç¼“å­˜åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜åŸºç¡€"}},[s._v("#")]),s._v(" ç¼“å­˜åŸºç¡€")]),s._v(" "),t("h5",{attrs:{id:"_1-æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" 1.æ¦‚è¿°")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¼“å­˜èƒ½å¤Ÿæé«˜æ€§èƒ½çš„åŸå› ")])]),s._v(" "),t("ul",[t("li",[s._v("ç¼“å­˜æ•°æ®é€šå¸¸ä½äº"),t("strong",[s._v("å†…å­˜ç­‰ä»‹è´¨")]),s._v("ä¸­, æ•°æ®"),t("strong",[s._v("è¯»å–")]),s._v("ç‰¹åˆ«å¿«.")]),s._v(" "),t("li",[s._v("ç¼“å­˜æ•°æ®å¯ä»¥ä½äº"),t("strong",[s._v("é è¿‘ç”¨æˆ·çš„åœ°ç†ä½ç½®")]),s._v("ä¸Š.")]),s._v(" "),t("li",[s._v("å¯ä»¥å°†è®¡ç®—ç»“æœè¿›è¡Œç¼“å­˜, ä»è€Œ"),t("strong",[s._v("é¿å…é‡å¤è®¡ç®—")]),s._v(".")])]),s._v(" "),t("h5",{attrs:{id:"_2-åŸºæœ¬æ¦‚å¿µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-åŸºæœ¬æ¦‚å¿µ"}},[s._v("#")]),s._v(" 2.åŸºæœ¬æ¦‚å¿µ")]),s._v(" "),t("p",[t("strong",[s._v("ç¼“å­˜å‘½ä¸­ç‡")]),s._v(": å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶, ç§°ä¸º"),t("strong",[s._v("ç¼“å­˜å‘½ä¸­")]),s._v(". ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜, ç¼“å­˜åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜.")]),s._v(" "),t("p",[t("strong",[s._v("æœ€å¤§ç©ºé—´")]),s._v(": ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­, å†…å­˜ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤š, å› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§. å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡"),t("strong",[s._v("è¶…è¿‡æœ€å¤§ç©ºé—´")]),s._v("æ—¶, å°±éœ€è¦"),t("strong",[s._v("æ·˜æ±°")]),s._v("éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°çš„æ•°æ®.")]),s._v(" "),t("h4",{attrs:{id:"ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ"}},[s._v("#")]),s._v(" ç¼“å­˜å®ç°ä¸ç¼“å­˜ä½ç½®ğŸŒŸ")]),s._v(" "),t("h5",{attrs:{id:"_1-æµè§ˆå™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æµè§ˆå™¨"}},[s._v("#")]),s._v(" 1.æµè§ˆå™¨")]),s._v(" "),t("p",[s._v("å½“ HTTP å“åº”"),t("strong",[s._v("å…è®¸")]),s._v("è¿›è¡Œç¼“å­˜æ—¶, æµè§ˆå™¨ä¼šå°† HTML, CSS, JavaScript, å›¾ç‰‡ç­‰"),t("strong",[s._v("é™æ€")]),s._v("èµ„æºè¿›è¡Œç¼“å­˜.")]),s._v(" "),t("h5",{attrs:{id:"_2-isp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-isp"}},[s._v("#")]),s._v(" 2.ISP")]),s._v(" "),t("p",[t("strong",[s._v("ç½‘ç»œæœåŠ¡æä¾›å•†")]),s._v("(ISP) æ˜¯ç½‘ç»œè®¿é—®çš„"),t("strong",[s._v("ç¬¬ä¸€è·³")]),s._v(", é€šè¿‡å°†"),t("strong",[s._v("æ•°æ®ç¼“å­˜åœ¨ ISP ä¸­")]),s._v("èƒ½å¤Ÿå¤§å¤§æé«˜ç”¨æˆ·çš„"),t("strong",[s._v("è®¿é—®é€Ÿåº¦")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_3-cdn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cdn"}},[s._v("#")]),s._v(" 3.CDN")]),s._v(" "),t("p",[t("strong",[s._v("å†…å®¹åˆ†å‘ç½‘ç»œ")]),s._v("(Content distribution network, CDN) æ˜¯ä¸€ç§"),t("strong",[s._v("äº’è¿çš„ç½‘ç»œç³»ç»Ÿ")]),s._v(", å®ƒåˆ©ç”¨"),t("strong",[s._v("æ›´é è¿‘ç”¨æˆ·çš„æœåŠ¡å™¨")]),s._v("ä»è€Œæ›´å¿«æ›´å¯é åœ°å°† HTML, CSS, JavaScript, éŸ³ä¹, å›¾ç‰‡, è§†é¢‘ç­‰"),t("strong",[s._v("é™æ€èµ„æºåˆ†å‘ç»™ç”¨æˆ·")]),s._v(".")]),s._v(" "),t("p",[s._v("CDN ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹:")]),s._v(" "),t("ul",[t("li",[s._v("æ›´å¿«åœ°å°†æ•°æ®åˆ†å‘ç»™ç”¨æˆ·.")]),s._v(" "),t("li",[s._v("é€šè¿‡éƒ¨ç½²å¤šå°æœåŠ¡å™¨, ä»è€Œæé«˜ç³»ç»Ÿæ•´ä½“çš„å¸¦å®½æ€§èƒ½.")]),s._v(" "),t("li",[s._v("å¤šå°æœåŠ¡å™¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§"),t("strong",[s._v("å†—ä½™æœºåˆ¶")]),s._v(", ä»è€Œå…·æœ‰é«˜å¯ç”¨æ€§.")])]),s._v(" "),t("h5",{attrs:{id:"_4-åå‘ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-åå‘ä»£ç†"}},[s._v("#")]),s._v(" 4.åå‘ä»£ç†")]),s._v(" "),t("p",[s._v("åå‘ä»£ç†ä½äºæœåŠ¡å™¨ä¹‹å‰, è¯·æ±‚ä¸å“åº”éƒ½éœ€è¦ç»è¿‡åå‘ä»£ç†. é€šè¿‡å°†"),t("strong",[s._v("æ•°æ®ç¼“å­˜åœ¨åå‘ä»£ç†")]),s._v(", åœ¨ç”¨æˆ·è¯·æ±‚åå‘ä»£ç†æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜è¿›è¡Œå“åº”.")]),s._v(" "),t("h5",{attrs:{id:"_5-æœ¬åœ°ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-æœ¬åœ°ç¼“å­˜"}},[s._v("#")]),s._v(" 5.æœ¬åœ°ç¼“å­˜")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ "),t("strong",[s._v("Guava Cache")]),s._v(" å°†æ•°æ®ç¼“å­˜åœ¨"),t("strong",[s._v("æœåŠ¡å™¨æœ¬åœ°å†…å­˜")]),s._v("ä¸­, æœåŠ¡å™¨ä»£ç å¯ä»¥ç›´æ¥è¯»å–æœ¬åœ°å†…å­˜ä¸­çš„ç¼“å­˜, é€Ÿåº¦éå¸¸å¿«.")]),s._v(" "),t("p",[s._v("ç¼“å­˜åˆ†ä¸º"),t("strong",[s._v("æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜")]),s._v(". Java "),t("strong",[s._v("è‡ªå¸¦çš„ ConcurrentHashMap æˆ– Guava")]),s._v(" å®ç°çš„æ˜¯æœ¬åœ°ç¼“å­˜, æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯è½»é‡ä»¥åŠå¿«é€Ÿ, "),t("strong",[s._v("ç”Ÿå‘½å‘¨æœŸ")]),s._v("éšç€ JVM çš„é”€æ¯è€Œç»“æŸ, å¹¶ä¸”åœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹, "),t("strong",[s._v("æ¯ä¸ªå®ä¾‹éƒ½éœ€è¦å„è‡ªä¿å­˜ä¸€ä»½ç¼“å­˜")]),s._v(", å¤šä¸ªæœºå™¨"),t("strong",[s._v("ç¼“å­˜ä¸å…·æœ‰ä¸€è‡´æ€§")]),s._v(". é€šå¸¸ç”¨äºä¿å­˜å˜åŒ–è¾ƒå°‘çš„æ•°æ®.")]),s._v(" "),t("h5",{attrs:{id:"_6-åˆ†å¸ƒå¼ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-åˆ†å¸ƒå¼ç¼“å­˜"}},[s._v("#")]),s._v(" 6.åˆ†å¸ƒå¼ç¼“å­˜")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ Redis, Memcache ç­‰"),t("strong",[s._v("åˆ†å¸ƒå¼ç¼“å­˜")]),s._v("å°†æ•°æ®ç¼“å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿä¸­. ç›¸å¯¹äºæœ¬åœ°ç¼“å­˜æ¥è¯´, åˆ†å¸ƒå¼ç¼“å­˜éœ€å•ç‹¬éƒ¨ç½², å¯ä»¥æ ¹æ®éœ€æ±‚åˆ†é…ç¡¬ä»¶èµ„æº. "),t("strong",[s._v("æœåŠ¡å™¨é›†ç¾¤éƒ½å¯ä»¥è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜")]),s._v(", è€Œæœ¬åœ°ç¼“å­˜éœ€è¦åœ¨æœåŠ¡å™¨é›†ç¾¤ä¹‹é—´è¿›è¡ŒåŒæ­¥, å®ç°éš¾åº¦å’Œæ€§èƒ½å¼€é”€ä¸Šéƒ½æ›´å¤§.")]),s._v(" "),t("p",[s._v("åœ¨å¤šå®ä¾‹æƒ…å†µä¸‹, å„å®ä¾‹å…±ç”¨ä¸€ä»½ç¼“å­˜æ•°æ®, "),t("strong",[s._v("ç¼“å­˜æ•°æ®å…·æœ‰ä¸€è‡´æ€§")]),s._v(". ç”±äºéœ€è¦ä¿è¯ Redis æœåŠ¡çš„"),t("strong",[s._v("é«˜å¯ç”¨")]),s._v(", æ•´ä¸ªç¨‹åºæ¶æ„ä¸Šè¾ƒä¸ºå¤æ‚.")]),s._v(" "),t("h5",{attrs:{id:"_7-æ•°æ®åº“ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-æ•°æ®åº“ç¼“å­˜"}},[s._v("#")]),s._v(" 7.æ•°æ®åº“ç¼“å­˜")]),s._v(" "),t("p",[s._v("MySQL ç­‰æ•°æ®åº“å…·æœ‰è‡ªå·±çš„"),t("strong",[s._v("æŸ¥è¯¢ç¼“å­˜æœºåˆ¶")]),s._v("æ¥æé«˜æŸ¥è¯¢æ•ˆç‡.")]),s._v(" "),t("h5",{attrs:{id:"_8-javaå†…éƒ¨ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-javaå†…éƒ¨ç¼“å­˜"}},[s._v("#")]),s._v(" 8.Javaå†…éƒ¨ç¼“å­˜")]),s._v(" "),t("p",[s._v("Java ä¸ºäº†ä¼˜åŒ–ç©ºé—´, æé«˜å­—ç¬¦ä¸², åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»çš„åˆ›å»ºæ•ˆç‡, è®¾è®¡äº†å­—ç¬¦ä¸²å¸¸é‡æ± åŠ Byte, Short, Character, Integer, Long, Boolean è¿™å…­ç§åŒ…è£…ç±»"),t("strong",[s._v("ç¼“å†²æ± ")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_9-cpuå¤šçº§ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-cpuå¤šçº§ç¼“å­˜"}},[s._v("#")]),s._v(" 9.CPUå¤šçº§ç¼“å­˜")]),s._v(" "),t("p",[s._v("CPU ä¸ºäº†è§£å†³è¿ç®—é€Ÿåº¦ä¸"),t("strong",[s._v("ä¸»å­˜ IO é€Ÿåº¦ä¸åŒ¹é…")]),s._v("çš„é—®é¢˜, å¼•å…¥äº†"),t("strong",[s._v("å¤šçº§ç¼“å­˜")]),s._v("ç»“æ„, åŒæ—¶ä½¿ç”¨ MESI ç­‰ç¼“å­˜ä¸€è‡´æ€§åè®®æ¥"),t("strong",[s._v("è§£å†³å¤šæ ¸ CPU ç¼“å­˜æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜")]),s._v(".")]),s._v(" "),t("h4",{attrs:{id:"ç¼“å­˜æ·˜æ±°-æ›´æ–°-ç­–ç•¥ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜æ·˜æ±°-æ›´æ–°-ç­–ç•¥ğŸŒŸ"}},[s._v("#")]),s._v(" ç¼“å­˜æ·˜æ±°(æ›´æ–°)ç­–ç•¥ğŸŒŸ")]),s._v(" "),t("p",[s._v("ç¼“å­˜æ·˜æ±°ç®—æ³•é€šå¸¸ç”¨äºç¼“å­˜ä½¿ç”¨é‡"),t("strong",[s._v("è¶…è¿‡äº†é¢„è®¾æœ€å¤§å€¼")]),s._v("çš„æ—¶å€™, å®ç°å¯¹ç°æœ‰æ•°æ®è¿›è¡Œå‰”é™¤.")]),s._v(" "),t("h6",{attrs:{id:"_1-fifo-lru-lfuç®—æ³•å‰”é™¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-fifo-lru-lfuç®—æ³•å‰”é™¤"}},[s._v("#")]),s._v(" (1)FIFO/LRU/LFUç®—æ³•å‰”é™¤")]),s._v(" "),t("p",[t("strong",[s._v("å…ˆè¿›å…ˆå‡ºç­–ç•¥")]),s._v(" FIFO(First In First Out): åœ¨å®æ—¶æ€§åœºæ™¯ä¸‹, éœ€è¦ç»å¸¸è®¿é—®æœ€æ–°çš„æ•°æ®, é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ FIFO, ä½¿å¾—æœ€å…ˆè¿›å…¥çš„æ•°æ®è¢«æ·˜æ±°.")]),s._v(" "),t("p",[t("strong",[s._v("æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç­–ç•¥")]),s._v(" LRU(Least Recently Used): ä¼˜å…ˆæ·˜æ±°"),t("strong",[s._v("æœ€ä¹…æœªä½¿ç”¨")]),s._v("çš„æ•°æ®, ä¹Ÿå°±æ˜¯ä¸Šæ¬¡"),t("strong",[s._v("è¢«è®¿é—®æ—¶é—´è·ç¦»ç°åœ¨æœ€ä¹…")]),s._v("çš„æ•°æ®. è¯¥ç­–ç•¥å¯ä»¥ä¿è¯å†…å­˜ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®, ä¹Ÿå°±æ˜¯ç»å¸¸è¢«è®¿é—®çš„æ•°æ®, ä»è€Œä¿è¯ç¼“å­˜å‘½ä¸­ç‡.")]),s._v(" "),t("p",[t("strong",[s._v("æœ€ä¸ç»å¸¸ä½¿ç”¨ç­–ç•¥")]),s._v(" LFU(Least Frequently Used): ä¼˜å…ˆæ·˜æ±°ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨"),t("strong",[s._v("æ¬¡æ•°æœ€å°‘")]),s._v("çš„æ•°æ®.")]),s._v(" "),t("h6",{attrs:{id:"_2-è¶…æ—¶å‰”é™¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¶…æ—¶å‰”é™¤"}},[s._v("#")]),s._v(" (2)è¶…æ—¶å‰”é™¤")]),s._v(" "),t("p",[s._v("é€šè¿‡ç»™ç¼“å­˜æ•°æ®"),t("strong",[s._v("è®¾ç½®è¶…æ—¶æ—¶é—´")]),s._v(", è®©å…¶åœ¨è¿‡æœŸæ—¶é—´å"),t("strong",[s._v("è‡ªåŠ¨åˆ é™¤")]),s._v(", å¦‚ Redis æä¾›çš„ "),t("strong",[s._v("expire")]),s._v(" å‘½ä»¤.")]),s._v(" "),t("h6",{attrs:{id:"_3-ä¸»åŠ¨æ›´æ–°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸»åŠ¨æ›´æ–°"}},[s._v("#")]),s._v(" (3)ä¸»åŠ¨æ›´æ–°")]),s._v(" "),t("p",[s._v("å¯¹äº"),t("strong",[s._v("é«˜ä¸€è‡´æ€§è¦æ±‚")]),s._v("åœºæ™¯ä¸‹, éœ€è¦åœ¨çœŸå®æ•°æ®æ›´æ–°å, "),t("strong",[s._v("ç«‹å³")]),s._v("æ›´æ–°ç¼“å­˜æ•°æ®.")]),s._v(" "),t("h4",{attrs:{id:"ç¼“å­˜é—®é¢˜ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜é—®é¢˜ğŸŒŸ"}},[s._v("#")]),s._v(" ç¼“å­˜é—®é¢˜ğŸŒŸ")]),s._v(" "),t("p",[t("strong",[s._v("ç¼“å­˜")]),s._v("ä¹Ÿå¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜.")]),s._v(" "),t("h5",{attrs:{id:"_1-ç¼“å­˜ç©¿é€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç¼“å­˜ç©¿é€"}},[s._v("#")]),s._v(" 1.ç¼“å­˜ç©¿é€")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-2"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v("ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯"),t("strong",[s._v("å¯¹æŸä¸ªç¼“å­˜ä¸­ä¸€å®šä¸å­˜åœ¨çš„æ•°æ®è¿›è¡Œè¯·æ±‚, è¯¥è¯·æ±‚å°†ä¼šç©¿é€ç¼“å­˜åˆ°è¾¾æ•°æ®åº“")]),s._v(". ä¸¾ä¸ªä¾‹å­: æŸä¸ªé»‘å®¢æ•…æ„åˆ¶é€ ç¼“å­˜ä¸­"),t("strong",[s._v("ä¸å­˜åœ¨çš„ key")]),s._v(" å‘èµ·"),t("strong",[s._v("å¤§é‡è¯·æ±‚")]),s._v(", å¯¼è‡´å¤§é‡è¯·æ±‚è½åˆ°æ•°æ®åº“.")]),s._v(" "),t("p",[s._v("æ­£å¸¸ç¼“å­˜å¤„ç†æµç¨‹:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174357591.png",alt:""}})]),s._v(" "),t("p",[s._v("ç¼“å­˜ç©¿é€æƒ…å†µ:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174250613.png",alt:""}})]),s._v(" "),t("p",[s._v("ä¸€èˆ¬ MySQL é»˜è®¤çš„æœ€å¤§è¿æ¥æ•°åœ¨ 150 å·¦å³, è¿™ä¸ªå¯ä»¥é€šè¿‡ "),t("strong",[s._v("show variables like '%max_connections%';")]),s._v("  å‘½ä»¤æ¥æŸ¥çœ‹. æœ€å¤§è¿æ¥æ•°ä¸€ä¸ªè¿˜åªæ˜¯ä¸€ä¸ªæŒ‡æ ‡, CPU, å†…å­˜, ç£ç›˜, ç½‘ç»œç­‰æ— åŠ›æ¡ä»¶éƒ½æ˜¯å…¶è¿è¡ŒæŒ‡æ ‡, è¿™äº›æŒ‡æ ‡éƒ½ä¼šé™åˆ¶å…¶å¹¶å‘èƒ½åŠ›! æ‰€ä»¥ä¸€èˆ¬ 3000 ä¸ªå¹¶å‘è¯·æ±‚å°±èƒ½æ‰“æ­»å¤§éƒ¨åˆ†æ•°æ®åº“äº†.")]),s._v(" "),t("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" (2)è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("p",[s._v("é¦–å…ˆå¯ä»¥åœ¨"),t("strong",[s._v("åº”ç”¨å±‚")]),s._v("è®°å½•ä¸€ä¸‹"),t("strong",[s._v("ç¼“å­˜ç©¿é€çš„æ¬¡æ•°")]),s._v(", æ–¹ä¾¿é—®é¢˜æŸ¥æ‰¾ä¸é¢„è­¦.")]),s._v(" "),t("blockquote",[t("p",[s._v("å‚æ•°æ ¡éªŒ")])]),s._v(" "),t("p",[t("strong",[s._v("æœ€åŸºæœ¬")]),s._v("çš„å°±æ˜¯é¦–å…ˆ"),t("strong",[s._v("åšå¥½å‚æ•°æ ¡éªŒ")]),s._v(", ä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥"),t("strong",[s._v("æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯")]),s._v("è¿”å›ç»™å®¢æˆ·ç«¯. æ¯”å¦‚æŸ¥è¯¢çš„"),t("strong",[s._v("æ•°æ®åº“ id ä¸èƒ½å°äº")]),s._v(" 0, ä¼ å…¥çš„é‚®ç®±"),t("strong",[s._v("æ ¼å¼ä¸å¯¹")]),s._v("çš„æ—¶å€™ç›´æ¥è¿”å›é”™è¯¯æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ç­‰ç­‰.")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¼“å­˜æ— æ•ˆkey")])]),s._v(" "),t("p",[s._v("å¦‚æœç¼“å­˜å’Œæ•°æ®åº“"),t("strong",[s._v("éƒ½æŸ¥ä¸åˆ°")]),s._v("æŸä¸ª key çš„æ•°æ®å°±"),t("strong",[s._v("å†™ä¸€ä¸ª")]),s._v("è¿™ä¸ªé”®çš„"),t("strong",[s._v("ç©ºå¯¹è±¡")]),s._v("åˆ° Redis ä¸­å»å¹¶"),t("strong",[s._v("è®¾ç½®è¿‡æœŸæ—¶é—´")]),s._v(", å…·ä½“å‘½ä»¤å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-mysql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("SET key value EX 10086\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ "),t("strong",[s._v("key å˜åŒ–ä¸é¢‘ç¹")]),s._v("çš„æƒ…å†µ, ä½†å¦‚æœé»‘å®¢æ¶æ„æ”»å‡», æ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ key, ä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key. å¾ˆæ˜æ˜¾è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜. å¦‚æœç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯, "),t("strong",[s._v("å°½é‡å°†æ— æ•ˆ")]),s._v("çš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®"),t("strong",[s._v("çŸ­ä¸€ç‚¹")]),s._v("æ¯”å¦‚ 1 åˆ†é’Ÿ.")]),s._v(" "),t("p",[s._v("æ•´ä½“æµç¨‹å¤§è‡´å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getObjectInclNullById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»ç¼“å­˜ä¸­è·å–æ•°æ®")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" cacheValue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¼“å­˜ä¸ºç©º")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cacheValue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»æ•°æ®åº“ä¸­è·å–")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" storageValue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" storage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¼“å­˜ç©ºå¯¹è±¡")]),s._v("\n        cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" storageValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦‚æœå­˜å‚¨æ•°æ®ä¸ºç©º, éœ€è¦è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´(300ç§’)")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("storageValue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¿…é¡»è®¾ç½®è¿‡æœŸæ—¶é—´, å¦åˆ™å¦‚æœé”®å˜åŒ–è¾ƒå¤§å¯èƒ½é€ æˆRediså†…å­˜ä¸å¤Ÿç”¨")]),s._v("\n            cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" storageValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" cacheValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("blockquote",[t("p",[s._v("ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨")])]),s._v(" "),t("p",[s._v("éœ€è¦åšçš„å°±æ˜¯"),t("strong",[s._v("åˆ¤æ–­ key æ˜¯å¦åˆæ³•")]),s._v(". "),t("strong",[s._v("äº‹å…ˆ")]),s._v("æŠŠæ‰€æœ‰"),t("strong",[s._v("å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨")]),s._v("ä¸­, å½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥, å…ˆåˆ¤æ–­"),t("strong",[s._v("è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨")]),s._v("ä¸­. "),t("strong",[s._v("ä¸å­˜åœ¨")]),s._v("åˆ™ç›´æ¥è¿”å›"),t("strong",[s._v("è¯·æ±‚å‚æ•°é”™è¯¯")]),s._v("ä¿¡æ¯ç»™å®¢æˆ·ç«¯, å­˜åœ¨æ—¶æ‰ä¼šèµ°ä¸‹é¢çš„æµç¨‹. å¸ƒéš†è¿‡æ»¤å™¨åœ¨ç¼“å­˜å±‚"),t("strong",[s._v("ä¹‹å‰")]),s._v(". å¦‚ä¸‹å›¾æ‰€ç¤º.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218174647325.png",alt:""}})]),s._v(" "),t("p",[s._v("è¿™ç§æ–¹æ³•é€‚ç”¨äºæ•°æ®"),t("strong",[s._v("å‘½ä¸­ç‡ä¸é«˜, æ•°æ®ç›¸å¯¹å›ºå®š")]),s._v(", å®æ—¶æ€§ä½(é€šå¸¸æ˜¯"),t("strong",[s._v("æ•°æ®é›†è¾ƒå¤§")]),s._v(") çš„åœºæ™¯.")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ BloomFilter å¸ƒéš†è¿‡æ»¤å™¨çš„è¯, éœ€è¦"),t("strong",[s._v("æå‰å°†å·²å­˜åœ¨çš„ KEY å§‹åŒ–å­˜å‚¨")]),s._v("åˆ° BloomFilter ç¼“å­˜ä¸­. æ•´ä¸ªé€»è¾‘å¦‚ä¸‹: æ ¹æ® KEY æŸ¥è¯¢ BloomFilter ç¼“å­˜. å¦‚æœ"),t("strong",[s._v("ä¸å­˜åœ¨å¯¹åº”çš„å€¼, ç›´æ¥è¿”å›")]),s._v("; å¦‚æœå­˜åœ¨å°±è¯´æ˜æ˜¯å¤§æ¦‚ç‡æ˜¯ç³»ç»Ÿé¢„å…ˆå­˜å…¥çš„é”®, è¿™æ—¶å€™å°±å¯ä»¥å» Redis ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜. å¦‚æœå­˜åœ¨ç¼“å­˜å€¼, ç›´æ¥è¿”å›; å¦‚æœä¸å­˜åœ¨åˆ™ç»§ç»­åˆ°æ•°æ®åº“å»æŸ¥æ•°æ®. æ‰¾åˆ°çš„æ•°æ®å¯ä»¥å†æ¬¡å­˜å‚¨åˆ° Redis ä¸­, å¹¶ä¸”å¯ä»¥"),t("strong",[s._v("æ›´æ–° BloomFilter")]),s._v(" ç¼“å­˜è®°å½•.")]),s._v(" "),t("p",[s._v("BloomFilter çš„å®ç°å‚è€ƒ: å®ç°å¸ƒéš†è¿‡æ»¤å™¨.")]),s._v(" "),t("h5",{attrs:{id:"_2-ç¼“å­˜é›ªå´©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¼“å­˜é›ªå´©"}},[s._v("#")]),s._v(" 2.ç¼“å­˜é›ªå´©")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-3"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v("ç¼“å­˜é›ªå´©"),t("strong",[s._v("æŒ‡ç”±äºæ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜ä¸­, æˆ–ç¼“å­˜æ•°æ®åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¤±æ•ˆ, æˆ–ç¼“å­˜æœåŠ¡å™¨å®•æœºç­‰, å¯¼è‡´å¤§é‡è¯·æ±‚åŒæ—¶æ‰“åˆ°æ•°æ®åº“, é€ æˆæ•°æ®åº“å‹åŠ›è¿‡å¤§")]),s._v(". åœ¨ç³»ç»Ÿç¼“å­˜å‘½ä¸­ç‡è¾ƒé«˜æ—¶, ç¼“å­˜åˆ†æ‹…äº†å¾ˆå¤§ä¸€éƒ¨åˆ†æ•°æ®è¯·æ±‚. å½“å‘ç”Ÿç¼“å­˜é›ªå´©æ—¶, æ•°æ®åº“æ— æ³•å¤„ç†è¿™ä¹ˆå¤§çš„è¯·æ±‚, å¯¼è‡´æ•°æ®åº“å´©æºƒ. å°±åƒ"),t("strong",[s._v("é›ªå´©")]),s._v("ä¸€æ ·.")]),s._v(" "),t("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-2"}},[s._v("#")]),s._v(" (2)è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("ul",[t("li",[s._v("ä¸ºäº†é˜²æ­¢ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¯¼è‡´çš„ç¼“å­˜é›ªå´©, å¯ä»¥é€šè¿‡"),t("strong",[s._v("è§‚å¯Ÿç”¨æˆ·è¡Œä¸º")]),s._v(", åˆç†è®¾ç½®"),t("strong",[s._v("ç¼“å­˜è¿‡æœŸæ—¶é—´")]),s._v(". çƒ­ç‚¹æ•°æ®è®¾ç½®æ°¸ä¸è¿‡æœŸ, ä¸€èˆ¬æ•°æ®é”™å¼€è¿‡æœŸæ—¶é—´, æ¯”å¦‚è®¾ç½®"),t("strong",[s._v("éšæœºè¿‡æœŸå€¼")]),s._v("è€Œä¸æ˜¯å…¨éƒ¨ä¸€æ ·.")]),s._v(" "),t("li",[s._v("ä¸ºäº†é˜²æ­¢ç¼“å­˜æœåŠ¡å™¨å®•æœºå‡ºç°çš„ç¼“å­˜é›ªå´©, å¯ä»¥ä½¿ç”¨"),t("strong",[s._v("åˆ†å¸ƒå¼ç¼“å­˜")]),s._v(", ä¿è¯"),t("strong",[s._v("ç¼“å†²å±‚çš„é«˜å¯ç”¨")]),s._v(". åˆ†å¸ƒå¼ç¼“å­˜ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹åªç¼“å­˜éƒ¨åˆ†çš„æ•°æ®, å½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶å¯ä»¥ä¿è¯å…¶å®ƒèŠ‚ç‚¹çš„ç¼“å­˜ä»ç„¶å¯ç”¨, å®ç°"),t("strong",[s._v("é«˜å¯ç”¨")]),s._v(".")]),s._v(" "),t("li",[s._v("å¯ä»¥è¿›è¡Œ"),t("strong",[s._v("ç¼“å­˜é¢„çƒ­")]),s._v(", "),t("strong",[s._v("æå‰æ”¾ä¸€äº›æ•°æ®åˆ°ç¼“å­˜ä¸­")]),s._v(", é¿å…åœ¨ç³»ç»Ÿåˆšå¯åŠ¨ä¸ä¹…ç”±äºè¿˜æœªå°†å¤§é‡æ•°æ®è¿›è¡Œç¼“å­˜è€Œå¯¼è‡´ç¼“å­˜é›ªå´©.")]),s._v(" "),t("li",[t("strong",[s._v("ä¾èµ–éš”ç¦»ç»„ä»¶ä¸ºåç«¯é™æµå¹¶é™çº§")]),s._v(". å¯ä»¥è€ƒè™‘è¿›è¡Œ"),t("strong",[s._v("æœåŠ¡é™çº§")]),s._v(", å¹¶å¯¹é‡è¦çš„èµ„æºè¿›è¡Œ"),t("strong",[s._v("éš”ç¦»")]),s._v(".")])]),s._v(" "),t("p",[s._v("å¦ä¸€ç§è¯´æ³•:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("äº‹å‰")]),s._v(": å°½é‡ä¿è¯æ•´ä¸ª Redis é›†ç¾¤çš„"),t("strong",[s._v("é«˜å¯ç”¨æ€§")]),s._v(", å‘ç°æœºå™¨å®•æœºå°½å¿«è¡¥ä¸Š. é€‰æ‹©åˆé€‚çš„"),t("strong",[s._v("å†…å­˜æ·˜æ±°ç­–ç•¥")]),s._v(".")]),s._v(" "),t("li",[t("strong",[s._v("äº‹ä¸­")]),s._v(": "),t("strong",[s._v("æœ¬åœ°ç¼“å­˜")]),s._v(" + "),t("strong",[s._v("é™æµä¸é™çº§")]),s._v(", é¿å… MySQL å´©æ‰.")]),s._v(" "),t("li",[t("strong",[s._v("äº‹å")]),s._v(": åˆ©ç”¨ Redis "),t("strong",[s._v("æŒä¹…åŒ–")]),s._v("æœºåˆ¶ä¿å­˜çš„æ•°æ®"),t("strong",[s._v("å°½å¿«æ¢å¤ç¼“å­˜")]),s._v(".")])]),s._v(" "),t("h5",{attrs:{id:"_3-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"}},[s._v("#")]),s._v(" 3.ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-4"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[t("strong",[s._v("ç”±äºæ•°æ®æ›´æ–°, å¯èƒ½å¯¼è‡´ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¸ä¸€è‡´")]),s._v(". ç¼“å­˜ä¸€è‡´æ€§è¦æ±‚æ•°æ®"),t("strong",[s._v("æ›´æ–°çš„åŒæ—¶ç¼“å­˜æ•°æ®ä¹Ÿèƒ½å¤Ÿå®æ—¶æ›´æ–°")]),s._v(".")]),s._v(" "),t("p",[s._v("æ›´æ–° DB å’Œæ“ä½œç¼“å­˜ä¸¤ä¸ªåŠ¨ä½œä¹‹é—´, æ˜æ˜¾"),t("strong",[s._v("ç¼ºä¹åŸå­æ€§")]),s._v(", æœ‰å¯èƒ½æ›´æ–° DB å®Œæˆ, ä½†æ˜¯æ“ä½œç¼“å­˜å¤±è´¥(æ·˜æ±°æˆ–è€…æ›´æ–°), åä¹‹äº¦ç„¶. æ‰€ä»¥ä¸¤è€…ä¹‹é—´å¿…ç„¶æ˜¯å­˜åœ¨æ–­å±‚çš„.")]),s._v(" "),t("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-3"}},[s._v("#")]),s._v(" (2)è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("p",[t("strong",[s._v("å¯ä»¥è€ƒè™‘å…ˆæ›´æ–°æ•°æ®åº“, å†åˆ é™¤ç¼“å­˜")]),s._v(". å¦‚æœé‡‡ç”¨å…ˆæ·˜æ±°ç¼“å­˜, åæ›´æ–° DB æ“ä½œ, å¦‚æœåœ¨ DB æ›´æ–°å®Œæˆä¹‹å‰, æ¥äº†ä¸€ä¸ªæ–°çš„è¯»è¯·æ±‚, é‚£ä¹ˆå°±ä¼šæŸ¥è¯¢å‡ºæ•°æ®åº“çš„æ—§æ•°æ®, ç¼“å­˜åˆ° Redis, å¯¼è‡´ DB æ›´æ–°å®Œæˆä¹‹å, ä¸¤è€…æ•°æ®ä¸ä¸€è‡´. å¦‚æœå…ˆæ›´æ–° DB, ç„¶åæ“ä½œç¼“å­˜å¤±è´¥, å®¢æˆ·ç«¯è¯»å–åˆ°çš„æ˜¯æ—§çš„æ•°æ®, æ­¤æ—¶ä¹Ÿæ˜¯å­˜åœ¨ DB ä¸ç¼“å­˜ä¸ä¸€è‡´. ä½†æ˜¯å®é™…ä¸šåŠ¡ä¸Š, æ›´å¤š"),t("strong",[s._v("è¿˜æ˜¯ä»¥ DB æ•°æ®ä¸ºå‡†")]),s._v(", è¿™ç§è¯»å–åˆ°æ—§æ•°æ®çš„ä¸šåŠ¡å½±å“å¯èƒ½æ¯”è¯»å–åˆ°ä¸ºæœªæ›´æ–°åˆ° DB çš„æ•°æ®å½±å“è¦å°. ä½¿ç”¨ç¼“å­˜æœ¬èº«å°±èƒ½å®¹å¿æœ‰ä¸€å®šçš„è„æ•°æ®å‡ºç°.")]),s._v(" "),t("p",[s._v("è¦ä¿è¯ç¼“å­˜ä¸€è‡´æ€§éœ€è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·, "),t("mark",[t("strong",[s._v("ç¼“å­˜æ•°æ®æœ€å¥½æ˜¯é‚£äº›å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®, å…è®¸ç¼“å­˜æ•°æ®å­˜åœ¨ä¸€äº›è„æ•°æ®")])]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_4-ç¼“å­˜æ— åº•æ´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç¼“å­˜æ— åº•æ´"}},[s._v("#")]),s._v(" 4.ç¼“å­˜æ— åº•æ´")]),s._v(" "),t("h6",{attrs:{id:"_1-æ¦‚è¿°-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-5"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),t("p",[s._v('ç¼“å­˜ "æ— åº•æ´" æŒ‡çš„æ˜¯ä¸ºäº†æ»¡è¶³ä¸šåŠ¡è¦æ±‚'),t("strong",[s._v("æ·»åŠ äº†å¤§é‡ç¼“å­˜èŠ‚ç‚¹")]),s._v(", ä½†æ˜¯"),t("strong",[s._v("æ€§èƒ½ä¸ä½†æ²¡æœ‰å¥½è½¬åè€Œä¸‹é™")]),s._v("äº†çš„ç°è±¡.")]),s._v(" "),t("p",[t("strong",[s._v("äº§ç”ŸåŸå› ")]),s._v(": ç¼“å­˜ç³»ç»Ÿé€šå¸¸"),t("strong",[s._v("é‡‡ç”¨ hash å‡½æ•°å°† key æ˜ å°„åˆ°å¯¹åº”çš„ç¼“å­˜èŠ‚ç‚¹")]),s._v(", éšç€ç¼“å­˜èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ , "),t("strong",[s._v("é”®å€¼åˆ†å¸ƒåˆ°æ›´å¤šçš„èŠ‚ç‚¹ä¸Š")]),s._v(", å¯¼è‡´å®¢æˆ·ç«¯ä¸€æ¬¡æ‰¹é‡æ“ä½œä¼šæ¶‰åŠ"),t("strong",[s._v("å¤šæ¬¡ç½‘ç»œæ“ä½œ")]),s._v(", è¿™æ„å‘³ç€æ‰¹é‡æ“ä½œçš„"),t("strong",[s._v("è€—æ—¶ä¼šéšç€èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ è€Œä¸æ–­å¢å¤§")]),s._v(". æ­¤å¤–, ç½‘ç»œè¿æ¥æ•°å˜å¤š, å¯¹èŠ‚ç‚¹çš„æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šå½±å“.")]),s._v(" "),t("h6",{attrs:{id:"_2-è§£å†³æ–¹æ¡ˆ-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£å†³æ–¹æ¡ˆ-4"}},[s._v("#")]),s._v(" (2)è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("ul",[t("li",[s._v("ä¼˜åŒ–"),t("strong",[s._v("æ‰¹é‡æ•°æ®")]),s._v("æ“ä½œå‘½ä»¤.")]),s._v(" "),t("li",[s._v("å‡å°‘ç½‘ç»œé€šä¿¡"),t("strong",[s._v("æ¬¡æ•°")]),s._v(".")]),s._v(" "),t("li",[s._v("é™ä½"),t("strong",[s._v("æ¥å…¥æˆæœ¬")]),s._v(", ä½¿ç”¨é•¿è¿æ¥, è¿æ¥æ± , "),t("strong",[s._v("NIO")]),s._v(" ç­‰.")])]),s._v(" "),t("p",[t("strong",[s._v("åˆ†å¸ƒå¼")]),s._v("æ¡ä»¶ä¸‹, ä»¥ Redis çš„ "),t("strong",[s._v("mget")]),s._v(" æŒ‡ä»¤ä¸ºä¾‹, æœ‰"),t("strong",[s._v("å››ç§æ‰¹é‡æ“ä½œçš„è§£å†³æ–¹æ¡ˆ")]),s._v(".")]),s._v(" "),t("ul",[t("li",[s._v("ä¸²è¡Œå‘½ä»¤. é€æ¬¡æ‰§è¡Œ n ä¸ª get å‘½ä»¤.")]),s._v(" "),t("li",[s._v('ä¸²è¡Œ IO. åœ¨å®¢æˆ·ç«¯ç¼“å­˜"'),t("strong",[s._v("é”®-æ§½-èŠ‚ç‚¹")]),s._v('"çš„å¯¹åº”å…³ç³», åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ä½¿ç”¨ Pipeline è¯·æ±‚å®Œæˆ.')]),s._v(" "),t("li",[s._v("å¹¶è¡Œ IO. ä½¿ç”¨å¤šçº¿ç¨‹æ–¹å¼è¿›è¡Œä¸²è¡Œ IO.")]),s._v(" "),t("li",[s._v("hash_tag å®ç°. Redis cluster çš„ hash_tag åŠŸèƒ½å¯ä»¥å°†å¤šä¸ª key å¼ºåˆ¶åˆ†é…åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Š, å‡å°‘æ“ä½œ.")])]),s._v(" "),t("h4",{attrs:{id:"æ•°æ®åˆ†å¸ƒæ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åˆ†å¸ƒæ–¹å¼"}},[s._v("#")]),s._v(" æ•°æ®åˆ†å¸ƒæ–¹å¼")]),s._v(" "),t("p",[s._v("åˆ†å¸ƒå¼æ•°æ®åº“é¦–å…ˆè¦è§£å†³æŠŠ"),t("strong",[s._v("æ•´ä¸ªæ•°æ®é›†")]),s._v("æŒ‰ç…§åˆ†åŒºè§„åˆ™"),t("strong",[s._v("æ˜ å°„åˆ°å¤šä¸ªèŠ‚ç‚¹")]),s._v("çš„é—®é¢˜, å³æŠŠæ•°æ®é›†åˆ’åˆ†åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Š, æ¯ä¸ª"),t("strong",[s._v("èŠ‚ç‚¹")]),s._v("è´Ÿè´£æ•´ä½“æ•°æ®çš„ä¸€ä¸ª"),t("strong",[s._v("å­é›†")]),s._v(". æ•°æ®åˆ†åŒºæ˜¯"),t("strong",[s._v("åˆ†å¸ƒå¼å­˜å‚¨çš„æ ¸å¿ƒ")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523215154473.png",alt:""}})]),s._v(" "),t("p",[s._v("éœ€è¦é‡ç‚¹å…³æ³¨çš„æ˜¯"),t("strong",[s._v("æ•°æ®åˆ†åŒºæ–¹æ¡ˆ")]),s._v(". å¸¸è§çš„åˆ†åŒºè§„åˆ™æœ‰"),t("strong",[s._v("å“ˆå¸Œåˆ†åŒºå’Œé¡ºåºåˆ†åŒº")]),s._v("ä¸¤ç§.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("é¡ºåºåˆ†åŒº")]),s._v(": ç¦»æ•£åº¦æ˜“å€¾æ–œ, æ•°æ®åˆ†å¸ƒä¸šåŠ¡ç›¸å…³, å¯é¡ºåºè®¿é—®. ä»£è¡¨äº§å“: "),t("strong",[s._v("HBase")]),s._v(", Bigtable.")]),s._v(" "),t("li",[t("strong",[s._v("å“ˆå¸Œåˆ†åŒº")]),s._v(": ç¦»æ•£åº¦å¥½, æ•°æ®åˆ†å¸ƒä¸šåŠ¡æ— å…³, æ— æ³•é¡ºåºè®¿é—®. ä»£è¡¨äº§å“: "),t("strong",[s._v("Redis Cluster")]),s._v(", Dynamo, Cassandra.")])]),s._v(" "),t("h5",{attrs:{id:"_1-é¡ºåºåˆ†å¸ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¡ºåºåˆ†å¸ƒ"}},[s._v("#")]),s._v(" 1.é¡ºåºåˆ†å¸ƒ")]),s._v(" "),t("p",[s._v("å°†æ•°æ®åˆ’åˆ†ä¸º"),t("strong",[s._v("å¤šä¸ªè¿ç»­")]),s._v("çš„éƒ¨åˆ†, æŒ‰æ•°æ®çš„ ID æˆ–è€…æ—¶é—´åˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹ä¸Š. ä¾‹å¦‚ User è¡¨çš„ ID èŒƒå›´ä¸º 1 ~ 7000, ä½¿ç”¨é¡ºåºåˆ†å¸ƒå¯ä»¥å°†å…¶åˆ’åˆ†æˆå¤šä¸ªå­è¡¨, å¯¹åº”çš„ä¸»é”®èŒƒå›´ä¸º 1 ~ 1000, 1001 ~ 2000, ..., 6001 ~ 7000.")]),s._v(" "),t("p",[s._v("é¡ºåºåˆ†å¸ƒç›¸æ¯”äºå“ˆå¸Œåˆ†å¸ƒçš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[s._v("èƒ½ä¿æŒæ•°æ®åŸæœ‰çš„"),t("strong",[s._v("é¡ºåº")]),s._v(".")]),s._v(" "),t("li",[s._v("èƒ½å¤Ÿå‡†ç¡®æ§åˆ¶æ¯å°æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡, ä»è€Œä½¿å¾—å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡æœ€å¤§.")])]),s._v(" "),t("h5",{attrs:{id:"_2-å“ˆå¸Œåˆ†å¸ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å“ˆå¸Œåˆ†å¸ƒ"}},[s._v("#")]),s._v(" 2.å“ˆå¸Œåˆ†å¸ƒ")]),s._v(" "),t("p",[t("strong",[s._v("å“ˆå¸Œåˆ†å¸ƒ")]),s._v("å°±æ˜¯å°†æ•°æ®è®¡ç®—å“ˆå¸Œå€¼ä¹‹å, æŒ‰ç…§"),t("strong",[s._v("å“ˆå¸Œå€¼")]),s._v("æ˜ å°„ç»“æœåˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Š. ä¾‹å¦‚æœ‰ N ä¸ªèŠ‚ç‚¹, æ•°æ®çš„ä¸»é”®ä¸º key, åˆ™å°†è¯¥æ•°æ®åˆ†é…çš„èŠ‚ç‚¹åºå·ä¸º: "),t("strong",[s._v("hash(key) % N")]),s._v(".")]),s._v(" "),t("blockquote",[t("p",[s._v("æ™®é€šå“ˆå¸Œåˆ†å¸ƒçš„é—®é¢˜")])]),s._v(" "),t("p",[s._v("ä¼ ç»Ÿçš„å“ˆå¸Œåˆ†å¸ƒç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜: å½“èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶, å¦‚"),t("strong",[s._v("æ‰©å®¹æˆ–æ”¶ç¼©èŠ‚ç‚¹")]),s._v(", æ•°æ®èŠ‚ç‚¹æ˜ å°„å…³ç³»éƒ½éœ€è¦"),t("strong",[s._v("é‡æ–°è®¡ç®—å†å“ˆå¸Œ")]),s._v(", ä¼šå¯¼è‡´æ•°æ®çš„å¤§é‡"),t("strong",[s._v("é‡æ–°è¿ç§»")]),s._v(". æ‰€ä»¥æ‰©å®¹æ—¶é€šå¸¸é‡‡ç”¨"),t("strong",[s._v("ç¿»å€æ‰©å®¹")]),s._v(", é¿å…æ•°æ®æ˜ å°„å…¨éƒ¨è¢«æ‰“ä¹±å¯¼è‡´å…¨é‡è¿ç§»çš„æƒ…å†µ.")]),s._v(" "),t("h5",{attrs:{id:"_3-ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ"}},[s._v("#")]),s._v(" 3.ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒğŸŒŸ")]),s._v(" "),t("p",[t("strong",[s._v("Distributed Hash Table")]),s._v("(DHT) æ˜¯ä¸€ç§"),t("strong",[s._v("å“ˆå¸Œåˆ†å¸ƒæ–¹å¼")]),s._v(", å¯ä»¥è§£å†³ä¼ ç»Ÿå“ˆå¸Œåˆ†å¸ƒåœ¨æœåŠ¡å™¨èŠ‚ç‚¹æ•°é‡å˜åŒ–å†å“ˆå¸Œæ—¶"),t("strong",[s._v("å¤§é‡æ•°æ®è¿ç§»")]),s._v("çš„é—®é¢˜.")]),s._v(" "),t("h6",{attrs:{id:"_1-åŸºæœ¬åŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŸºæœ¬åŸç†"}},[s._v("#")]),s._v(" (1)åŸºæœ¬åŸç†")]),s._v(" "),t("p",[t("strong",[s._v("ä¸€è‡´æ€§å“ˆå¸Œåˆ†åŒº")]),s._v("(Distributed Hash Table)å®ç°æ€è·¯æ˜¯ä¸ºç³»ç»Ÿä¸­"),t("strong",[s._v("æ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ª token")]),s._v(", èŒƒå›´ä¸€èˆ¬åœ¨ "),t("code",[s._v("0 ~ 2^32")]),s._v("â€‹, è¿™äº› token æ„æˆä¸€ä¸ª"),t("strong",[s._v("å“ˆå¸Œç¯")]),s._v(". æ¯ä¸ªæœåŠ¡å™¨"),t("strong",[s._v("èŠ‚ç‚¹éƒ½ä¼šè¢«é…ç½®åˆ°å“ˆå¸Œç¯")]),s._v("ä¸Š.")]),s._v(" "),t("p",[s._v("æ•°æ®è¯»å†™æ‰§è¡ŒèŠ‚ç‚¹æŸ¥æ‰¾æ“ä½œæ—¶, å…ˆæ ¹æ® key è®¡ç®— hash å€¼, "),t("strong",[s._v("å­˜æ”¾åˆ°å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å“ˆå¸Œå€¼ token çš„èŠ‚ç‚¹ä¸Š")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200527211945450.png",alt:"image-20200527211945450"}})]),s._v(" "),t("p",[s._v("ä¸€è‡´æ€§å“ˆå¸Œåˆ†åŒºå°†"),t("strong",[s._v("å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶åªä¼šå½±å“åˆ°å“ˆå¸Œç¯ä¸­ç›¸é‚»çš„èŠ‚ç‚¹")]),s._v(". ä»¥ä¸Šå›¾ä¸ºä¾‹, å¦‚æœåœ¨ node1 å’Œ node2 ä¹‹é—´å¢åŠ  node5, åˆ™åªæœ‰ node2 ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ä¼šè¿ç§»åˆ° node5; å¦‚æœå»æ‰ node2, åˆ™åŸ node2 ä¸­çš„æ•°æ®åªä¼šè¿ç§»åˆ° node4 ä¸­, åªæœ‰ node4 ä¼šå—å½±å“.")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸€è‡´æ€§å“ˆå¸Œåˆ†å¸ƒçš„é—®é¢˜")])]),s._v(" "),t("p",[s._v("ä¸Šé¢æè¿°çš„ä¸€è‡´æ€§å“ˆå¸Œä¾ç„¶å¯èƒ½å­˜åœ¨æ•°æ®"),t("strong",[s._v("åˆ†å¸ƒä¸å‡åŒ€")]),s._v("çš„é—®é¢˜, ä¸åŒèŠ‚ç‚¹å­˜å‚¨çš„"),t("strong",[s._v("æ•°æ®é‡")]),s._v("æœ‰å¯èƒ½ä¼šå­˜åœ¨"),t("strong",[s._v("å¾ˆå¤§çš„ä¸åŒ")]),s._v(". æ•°æ®ä¸å‡åŒ€ä¸»è¦æ˜¯å› ä¸º"),t("strong",[s._v("èŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„ä¸å‡åŒ€")]),s._v(", è¿™ç§æƒ…å†µåœ¨"),t("strong",[s._v("èŠ‚ç‚¹æ•°é‡å¾ˆå°‘")]),s._v("çš„æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾.")]),s._v(" "),t("p",[s._v("å½“"),t("strong",[s._v("èŠ‚ç‚¹æ•°é‡è¾ƒå°‘")]),s._v("æ—¶, å¢åŠ æˆ–åˆ å‡èŠ‚ç‚¹, å¯¹"),t("strong",[s._v("å•ä¸ªèŠ‚ç‚¹")]),s._v("çš„å½±å“å¯èƒ½å¾ˆå¤§, "),t("strong",[s._v("é€ æˆæ•°æ®çš„ä¸¥é‡ä¸å¹³è¡¡")]),s._v(". è¿˜æ˜¯ä»¥ä¸Šå›¾ä¸ºä¾‹, å¦‚æœå»æ‰ node2, node4 ä¸­çš„æ•°æ®ç”±æ€»æ•°æ®çš„ 1/4 å·¦å³å˜ä¸º 1/2 å·¦å³, ä¸å…¶ä»–èŠ‚ç‚¹ç›¸æ¯”è´Ÿè½½è¿‡é«˜.")]),s._v(" "),t("h6",{attrs:{id:"_2-è™šæ‹ŸèŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è™šæ‹ŸèŠ‚ç‚¹"}},[s._v("#")]),s._v(" (2)è™šæ‹ŸèŠ‚ç‚¹")]),s._v(" "),t("p",[s._v("æ­£å› ä¸ºä¸€è‡´æ€§å“ˆå¸Œåˆ†åŒºå¯èƒ½å­˜åœ¨æ•°æ®åˆ†å¸ƒä¸å‡çš„ç¼ºç‚¹, å¯ä»¥é‡‡ç”¨"),t("strong",[s._v("è™šæ‹Ÿæ§½")]),s._v("å¯¹ä¸€è‡´æ€§å“ˆå¸Œè¿›è¡Œæ”¹è¿›.")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹å¼æ˜¯åœ¨ä¸€è‡´æ€§å“ˆå¸Œåˆ†åŒºçš„åŸºç¡€ä¸Š, å¢åŠ å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹, ç„¶åå°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°çœŸå®èŠ‚ç‚¹ä¸Š")]),s._v(". è™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡æ¯”çœŸå®èŠ‚ç‚¹æ¥å¾—"),t("strong",[s._v("å¤š")]),s._v(", é‚£ä¹ˆè™šæ‹ŸèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„å‡åŒ€æ€§å°±ä¼šæ¯”åŸæ¥çš„çœŸå®èŠ‚ç‚¹å¥½, ä»è€Œä½¿å¾—æ•°æ®åˆ†å¸ƒä¹Ÿæ›´åŠ å‡åŒ€.")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤ä½¿ç”¨çš„ä¾¿æ˜¯è¯¥æ–¹æ¡ˆ, å…¶ä¸­çš„"),t("strong",[s._v("è™šæ‹ŸèŠ‚ç‚¹")]),s._v("ç§°ä¸º"),t("strong",[s._v("æ§½(slot)")]),s._v(" . æ§½æ˜¯ä»‹äºæ•°æ®å’Œå®é™…èŠ‚ç‚¹ä¹‹é—´çš„è™šæ‹Ÿæ¦‚å¿µ, æ¯ä¸ªå®é™…èŠ‚ç‚¹åŒ…å«ä¸€å®šæ•°é‡çš„æ§½, æ¯ä¸ªæ§½åŒ…å«å“ˆå¸Œå€¼åœ¨ä¸€å®šèŒƒå›´å†…çš„æ•°æ®. å‚è€ƒ: Redisæ•°æ®åˆ†åŒº.")]),s._v(" "),t("p",[s._v("è™šæ‹Ÿæ§½åˆ†åŒºå·§å¦™åœ°ä½¿ç”¨äº†"),t("strong",[s._v("å“ˆå¸Œç©ºé—´")]),s._v(", ä½¿ç”¨åˆ†æ•£åº¦è‰¯å¥½çš„"),t("strong",[s._v("å“ˆå¸Œå‡½æ•°")]),s._v("æŠŠæ‰€æœ‰æ•°æ®æ˜ å°„åˆ°ä¸€ä¸ª"),t("strong",[s._v("å›ºå®šèŒƒå›´")]),s._v("çš„æ•´æ•°é›†åˆä¸­, "),t("strong",[s._v("æŠŠæ•´æ•°å®šä¹‰ä¸ºæ§½")]),s._v(". è¿™ä¸ªèŒƒå›´ä¸€èˆ¬"),t("strong",[s._v("è¿œè¿œå¤§äºèŠ‚ç‚¹æ•°")]),s._v(", æ¯”å¦‚ Redis Cluster æ§½èŒƒå›´æ˜¯ "),t("strong",[s._v("0 ~ 16383")]),s._v(".")]),s._v(" "),t("p",[s._v("åœ¨ä½¿ç”¨äº†æ§½çš„ä¸€è‡´æ€§å“ˆå¸Œåˆ†åŒºä¸­, "),t("strong",[s._v("æ§½æ˜¯æ•°æ®ç®¡ç†å’Œè¿ç§»çš„åŸºæœ¬å•ä½")]),s._v(". "),t("strong",[s._v("æ§½è§£è€¦äº†æ•°æ®å’Œå®é™…èŠ‚ç‚¹é—´çš„å…³ç³»")]),s._v(", å¢åŠ æˆ–åˆ é™¤èŠ‚ç‚¹å¯¹ç³»ç»Ÿçš„å½±å“å¾ˆå°. å‡è®¾ç³»ç»Ÿä¸­æœ‰ 4 ä¸ªå®é™…èŠ‚ç‚¹, å‡è®¾ä¸ºå…¶åˆ†é… 16 ä¸ªæ§½(0 - 15), é‚£ä¹ˆæ§½ 0 - 3 ä½äº node1; 4 - 7 ä½äº node2; ä»¥æ­¤ç±»æ¨....å¦‚æœæ­¤æ—¶åˆ é™¤ node2, åªéœ€è¦"),t("strong",[s._v("å°†æ§½ 4-7 é‡æ–°åˆ†é…")]),s._v("å³å¯, ä¾‹å¦‚æ§½ 4-5 åˆ†é…ç»™ node1, æ§½ 6 åˆ†é…ç»™ node3, æ§½ 7 åˆ†é…ç»™ node4; å¯ä»¥çœ‹å‡ºåˆ é™¤ node2 å, æ•°æ®åœ¨å…¶ä»–èŠ‚ç‚¹çš„åˆ†å¸ƒ"),t("strong",[s._v("ä»ç„¶è¾ƒä¸ºå‡è¡¡")]),s._v(".")]),s._v(" "),t("h6",{attrs:{id:"_3-åº”ç”¨å®ä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-åº”ç”¨å®ä¾‹"}},[s._v("#")]),s._v(" (3)åº”ç”¨å®ä¾‹")]),s._v(" "),t("p",[t("strong",[s._v("ç»™å›¾ç‰‡åŠ æ°´å°çš„ä¾‹å­")]),s._v(". å‡è®¾éœ€è¦ç»™å›¾ç‰‡åŠ æ°´å°, æ°´å°çš„èƒŒæ™¯æ€»å…±æœ‰ 10 ä¸ª, éœ€è¦æ ¹æ® imageId é€‰æ‹©æ˜ å°„åˆ°å“ªä¸ªæ°´å°èƒŒæ™¯. å¦‚æœé‡‡ç”¨æ™®é€šçš„ Hash å¹¶å¯¹æ°´å°æ•°é‡å–æ¨¡çš„æ–¹å¼æ¥é€‰æ‹©å›¾ç‰‡, é‚£ä¹ˆä¸€ä½†æ–°å¢æˆ–è€…å‡å°‘æ°´å°å›¾ç‰‡, é‚£ä¹ˆå¯èƒ½å¯¼è‡´å¤§éƒ¨åˆ†çš„å›¾ç‰‡æ˜ å°„åˆ°çš„æ°´å°èƒŒæ™¯å‘ç”Ÿå˜åŒ–. å¦‚æœé‡‡ç”¨ä¸€è‡´æ€§ Hash çš„å®ç°, é‚£ä¹ˆå¢åŠ æ°´å°èƒŒæ™¯çš„æ•°é‡å, å¤§éƒ¨åˆ†çš„å›¾ç‰‡è¿˜æ˜¯ä¼šæ˜ å°„åˆ°åŸæ¥çš„æ°´å°èƒŒæ™¯ä¸Š, è¿™æ ·çœ‹èµ·æ¥æ›´åŠ ä¸€è‡´.")]),s._v(" "),t("h4",{attrs:{id:"ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§"}},[s._v("#")]),s._v(" ç¼“å­˜ä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§")]),s._v(" "),t("p",[s._v("åªè¦ç”¨"),t("strong",[s._v("ç¼“å­˜")]),s._v(", å°±å¯èƒ½ä¼šæ¶‰åŠåˆ°ç¼“å­˜ä¸æ•°æ®åº“åŒå­˜å‚¨åŒå†™, åªè¦æ˜¯åŒå†™, å°±ä¸€å®šä¼šæœ‰æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜, "),t("strong",[s._v("å¦‚ä½•è§£å†³ä¸€è‡´æ€§é—®é¢˜")]),s._v("?")]),s._v(" "),t("p",[s._v("æœ€ç»å…¸çš„"),t("strong",[s._v("ç¼“å­˜ + æ•°æ®åº“è¯»å†™")]),s._v("çš„æ¨¡å¼, å°±æ˜¯ "),t("strong",[s._v("Cache Aside Pattern")]),s._v(".")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("è¯»çš„æ—¶å€™, å…ˆè¯»ç¼“å­˜, ç¼“å­˜æ²¡æœ‰çš„è¯, å°±è¯»æ•°æ®åº“, ç„¶åå–å‡ºæ•°æ®åæ”¾å…¥ç¼“å­˜, åŒæ—¶è¿”å›å“åº”")]),s._v(".")]),s._v(" "),t("li",[t("strong",[s._v("æ›´æ–°çš„æ—¶å€™, å…ˆæ›´æ–°æ•°æ®åº“, ç„¶åå†åˆ é™¤ç¼“å­˜.")])])]),s._v(" "),t("p",[t("strong",[s._v("ä¸ºä»€ä¹ˆæ˜¯åˆ é™¤ç¼“å­˜, è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜?")])]),s._v(" "),t("p",[s._v("å› ä¸ºåœ¨å¤æ‚ç‚¹çš„ç¼“å­˜åœºæ™¯ä¸­, ç¼“å­˜ä¸ä»…æ˜¯æ•°æ®åº“ä¸­ç›´æ¥å–å‡ºæ¥çš„å€¼. æ¯”å¦‚å¯èƒ½æ›´æ–°äº†æŸä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ, ç„¶åå…¶å¯¹åº”çš„ç¼“å­˜, æ˜¯éœ€è¦æŸ¥è¯¢å¦å¤–ä¸¤ä¸ªè¡¨çš„æ•°æ®å¹¶è¿›è¡Œ"),t("strong",[s._v("è¿ç®—")]),s._v(", æ‰èƒ½è®¡ç®—å‡ºç¼“å­˜çš„æœ€æ–°å€¼.")]),s._v(" "),t("p",[s._v("ä¸¾ä¸ªä¾‹å­, å¯¹äºæ›´æ–°ç¼“å­˜çš„æ–¹æ¡ˆ, ä¸€ä¸ªç¼“å­˜æ¶‰åŠçš„è¡¨çš„å­—æ®µ, åœ¨ 1 åˆ†é’Ÿå†…å°±ä¿®æ”¹äº† 100 æ¬¡, é‚£ä¹ˆç¼“å­˜æ›´æ–° 100 æ¬¡; ä½†æ˜¯è¿™ä¸ªç¼“å­˜åœ¨ 1 åˆ†é’Ÿå†…"),t("strong",[s._v("åªè¢«è¯»å–äº† 1 æ¬¡")]),s._v(", æœ‰å¤§é‡çš„å†·æ•°æ®. è€Œå¦‚æœæ˜¯åˆ é™¤ç¼“å­˜çš„è¯, é‚£ä¹ˆåœ¨ 1 åˆ†é’Ÿå†…, è¿™ä¸ªç¼“å­˜ä¸è¿‡å°±"),t("strong",[s._v("é‡æ–°è®¡ç®—ä¸€æ¬¡")]),s._v("è€Œå·², å¼€é”€å¤§å¹…åº¦é™ä½.")]),s._v(" "),t("p",[t("strong",[s._v("ç”¨åˆ°ç¼“å­˜æ‰å»ç®—ç¼“å­˜")]),s._v(". "),t("strong",[s._v("åˆ é™¤ç¼“å­˜è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜, å°±æ˜¯ä¸€ä¸ª lazy è®¡ç®—çš„æ€æƒ³")]),s._v(", ä¸è¦æ¯æ¬¡éƒ½é‡æ–°åšå¤æ‚çš„è®¡ç®—, ä¸ç®¡å®ƒä¼šä¸ä¼šç”¨åˆ°, è€Œæ˜¯è®©å®ƒåˆ°éœ€è¦è¢«ä½¿ç”¨çš„æ—¶å€™å†é‡æ–°è®¡ç®—.")]),s._v(" "),t("p",[s._v("é—®é¢˜: "),t("strong",[s._v("å…ˆæ›´æ–°æ•°æ®åº“, å†åˆ é™¤ç¼“å­˜")]),s._v(". å¦‚æœ"),t("strong",[s._v("åˆ é™¤ç¼“å­˜å¤±è´¥")]),s._v("äº†, é‚£ä¹ˆä¼š"),t("strong",[s._v("å¯¼è‡´æ•°æ®åº“ä¸­æ˜¯æ–°æ•°æ®, ç¼“å­˜ä¸­æ˜¯æ—§æ•°æ®")]),s._v(", æ•°æ®å°±å‡ºç°äº†"),t("strong",[s._v("ä¸ä¸€è‡´")]),s._v(".")]),s._v(" "),t("p",[s._v("è§£å†³æ€è·¯: "),t("strong",[s._v("å…ˆåˆ é™¤ç¼“å­˜, å†æ›´æ–°æ•°æ®åº“")]),s._v(". å¦‚æœ"),t("strong",[s._v("æ•°æ®åº“æ›´æ–°å¤±è´¥äº†, é‚£ä¹ˆæ•°æ®åº“ä¸­æ˜¯æ—§æ•°æ®")]),s._v(", ç¼“å­˜ä¸­æ˜¯"),t("strong",[s._v("ç©ºçš„")]),s._v(", é‚£ä¹ˆæ•°æ®ä¸ä¼šä¸ä¸€è‡´. å› ä¸ºè¯»çš„æ—¶å€™ç¼“å­˜æ²¡æœ‰, æ‰€ä»¥å»è¯»äº†æ•°æ®åº“ä¸­çš„æ—§æ•°æ®, ç„¶åæ›´æ–°åˆ°ç¼“å­˜ä¸­.")]),s._v(" "),t("p",[s._v("é—®é¢˜: æ•°æ®å‘ç”Ÿäº†å˜æ›´, å…ˆåˆ é™¤äº†ç¼“å­˜, ç„¶åè¦å»ä¿®æ”¹æ•°æ®åº“, "),t("strong",[s._v("æ­¤æ—¶è¿˜æ²¡ä¿®æ”¹")]),s._v(". ä¸€ä¸ªè¯·æ±‚è¿‡æ¥, å»è¯»ç¼“å­˜, å‘ç°ç¼“å­˜ç©ºäº†, å»æŸ¥è¯¢æ•°æ®åº“, "),t("strong",[s._v("æŸ¥åˆ°äº†ä¿®æ”¹å‰çš„æ—§æ•°æ®")]),s._v(", æ”¾åˆ°äº†"),t("strong",[s._v("ç¼“å­˜")]),s._v("ä¸­. éšåæ•°æ®å˜æ›´çš„ç¨‹åºå®Œæˆäº†æ•°æ®åº“çš„ä¿®æ”¹. æ­¤æ—¶æ•°æ®åº“å’Œç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´äº†.")]),s._v(" "),t("p",[t("strong",[s._v("ä¸ºä»€ä¹ˆä¸Šäº¿æµé‡é«˜å¹¶å‘åœºæ™¯ä¸‹, ç¼“å­˜ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜?")])]),s._v(" "),t("p",[s._v("åªæœ‰åœ¨å¯¹ä¸€ä¸ªæ•°æ®åœ¨å¹¶å‘çš„è¿›è¡Œè¯»å†™çš„æ—¶å€™, æ‰å¯èƒ½ä¼šå‡ºç°è¿™ç§é—®é¢˜. å…¶å®å¦‚æœè¯´å¹¶å‘é‡å¾ˆä½çš„è¯, ç‰¹åˆ«æ˜¯è¯»å¹¶å‘å¾ˆä½, æ—¥æ´»å°± 1 W, é‚£ä¹ˆå¾ˆå°‘çš„æƒ…å†µä¸‹, ä¼šå‡ºç°åˆšæ‰æè¿°çš„é‚£ç§ä¸ä¸€è‡´çš„åœºæ™¯. ä½†å¦‚æœæ—¥æ´»ä¸Šäº¿, æ¯ç§’å¹¶å‘è¯»å¯èƒ½æˆåƒä¸Šä¸‡, æ¯ç§’åªè¦æœ‰æ•°æ®æ›´æ–°çš„è¯·æ±‚, å°±"),t("strong",[s._v("å¯èƒ½ä¼šå‡ºç°ä¸Šè¿°çš„æ•°æ®åº“ + ç¼“å­˜ä¸ä¸€è‡´çš„æƒ…å†µ")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆå¦‚ä¸‹:")])]),s._v(" "),t("p",[s._v("æ›´æ–°æ•°æ®çš„æ—¶å€™, æ ¹æ®"),t("strong",[s._v("æ•°æ®çš„å”¯ä¸€æ ‡è¯†")]),s._v(', å°†æ“ä½œè·¯ç”±ä¹‹å, å‘é€åˆ°ä¸€ä¸ª JVM å†…éƒ¨é˜Ÿåˆ—ä¸­. è¯»å–æ•°æ®çš„æ—¶å€™, å¦‚æœå‘ç°æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­, é‚£ä¹ˆå°†é‡æ–°æ‰§è¡Œ "è¯»å–æ•°æ®+æ›´æ–°ç¼“å­˜" çš„æ“ä½œ, æ ¹æ®å”¯ä¸€æ ‡è¯†è·¯ç”±ä¹‹å, ä¹Ÿå‘é€åˆ°åŒä¸€ä¸ª JVM å†…éƒ¨é˜Ÿåˆ—ä¸­.')]),s._v(" "),t("p",[s._v("ä¸€ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸€ä¸ªå·¥ä½œçº¿ç¨‹, æ¯ä¸ªå·¥ä½œçº¿ç¨‹"),t("strong",[s._v("ä¸²è¡Œ")]),s._v("æ‹¿åˆ°å¯¹åº”çš„æ“ä½œ, ç„¶åä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œ. è¿™æ ·çš„è¯, ä¸€ä¸ªæ•°æ®å˜æ›´çš„æ“ä½œ, å…ˆåˆ é™¤ç¼“å­˜, ç„¶åå†å»æ›´æ–°æ•°æ®åº“, ä½†æ˜¯è¿˜æ²¡å®Œæˆæ›´æ–°. æ­¤æ—¶å¦‚æœä¸€ä¸ªè¯»è¯·æ±‚è¿‡æ¥, æ²¡æœ‰è¯»åˆ°ç¼“å­˜, é‚£ä¹ˆå¯ä»¥å…ˆå°†ç¼“å­˜æ›´æ–°çš„è¯·æ±‚å‘é€åˆ°é˜Ÿåˆ—ä¸­, æ­¤æ—¶ä¼šåœ¨é˜Ÿåˆ—ä¸­ç§¯å‹, ç„¶ååŒæ­¥ç­‰å¾…ç¼“å­˜æ›´æ–°å®Œæˆ.")]),s._v(" "),t("p",[s._v("è¿™é‡Œæœ‰ä¸€ä¸ª"),t("strong",[s._v("ä¼˜åŒ–ç‚¹")]),s._v(", ä¸€ä¸ªé˜Ÿåˆ—ä¸­, å…¶å®"),t("strong",[s._v("å¤šä¸ªæ›´æ–°ç¼“å­˜è¯·æ±‚ä¸²åœ¨ä¸€èµ·æ˜¯æ²¡æ„ä¹‰çš„")]),s._v(", å› æ­¤å¯ä»¥åšè¿‡æ»¤, å¦‚æœå‘ç°é˜Ÿåˆ—ä¸­å·²ç»æœ‰ä¸€ä¸ªæ›´æ–°ç¼“å­˜çš„è¯·æ±‚äº†, é‚£ä¹ˆå°±ä¸ç”¨å†æ”¾ä¸ªæ›´æ–°è¯·æ±‚æ“ä½œè¿›å»äº†, ç›´æ¥ç­‰å¾…å‰é¢çš„æ›´æ–°æ“ä½œè¯·æ±‚å®Œæˆå³å¯.")]),s._v(" "),t("p",[s._v("å¾…é‚£ä¸ªé˜Ÿåˆ—å¯¹åº”çš„å·¥ä½œçº¿ç¨‹å®Œæˆäº†ä¸Šä¸€ä¸ªæ“ä½œçš„æ•°æ®åº“çš„ä¿®æ”¹ä¹‹å, æ‰ä¼šå»æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œ, ä¹Ÿå°±æ˜¯ç¼“å­˜æ›´æ–°çš„æ“ä½œ, æ­¤æ—¶ä¼šä»æ•°æ®åº“ä¸­è¯»å–æœ€æ–°çš„å€¼, ç„¶åå†™å…¥ç¼“å­˜ä¸­.")]),s._v(" "),t("p",[s._v("å¦‚æœè¯·æ±‚è¿˜åœ¨ç­‰å¾…æ—¶é—´èŒƒå›´å†…, ä¸æ–­è½®è¯¢å‘ç°å¯ä»¥å–åˆ°å€¼äº†, é‚£ä¹ˆå°±ç›´æ¥è¿”å›; å¦‚æœè¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¶…è¿‡ä¸€å®šæ—¶é•¿, é‚£ä¹ˆè¿™ä¸€æ¬¡ç›´æ¥ä»æ•°æ®åº“ä¸­è¯»å–å½“å‰çš„æ—§å€¼.")]),s._v(" "),t("h4",{attrs:{id:"lruå®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lruå®ç°"}},[s._v("#")]),s._v(" LRUå®ç°")]),s._v(" "),t("p",[s._v("ä»¥ä¸‹æ˜¯åŸºäº "),t("strong",[s._v("åŒå‘é“¾è¡¨ + HashMap")]),s._v(" çš„ LRU ç®—æ³•å®ç°, å¯¹ç®—æ³•çš„è§£é‡Šå¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("è®¿é—®")]),s._v("æŸä¸ªèŠ‚ç‚¹æ—¶, å°†å…¶ä»åŸæ¥çš„ä½ç½®"),t("strong",[s._v("åˆ é™¤")]),s._v(", å¹¶é‡æ–°æ’å…¥åˆ°"),t("strong",[s._v("é“¾è¡¨å¤´éƒ¨")]),s._v(". è¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨"),t("strong",[s._v("å°¾éƒ¨")]),s._v("å­˜å‚¨çš„å°±æ˜¯"),t("strong",[s._v("æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨")]),s._v("çš„èŠ‚ç‚¹, å½“èŠ‚ç‚¹æ•°é‡"),t("strong",[s._v("å¤§äº")]),s._v("ç¼“å­˜æœ€å¤§ç©ºé—´æ—¶å°±"),t("strong",[s._v("æ·˜æ±°")]),s._v("é“¾è¡¨å°¾éƒ¨çš„èŠ‚ç‚¹.")]),s._v(" "),t("li",[s._v("ä¸ºäº†ä½¿"),t("strong",[s._v("åˆ é™¤")]),s._v("æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º "),t("strong",[s._v("O(1)")]),s._v(" , å°±ä¸èƒ½é‡‡ç”¨éå†çš„æ–¹å¼æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹. "),t("strong",[s._v("HashMap")]),s._v(" å­˜å‚¨ç€ "),t("strong",[s._v("Key åˆ°èŠ‚ç‚¹")]),s._v("çš„æ˜ å°„, é€šè¿‡ Key å°±èƒ½ä»¥ O(1) çš„æ—¶é—´å¾—åˆ°èŠ‚ç‚¹, ç„¶åå†ä»¥ O(1) çš„æ—¶é—´å°†å…¶ä»"),t("strong",[s._v("åŒå‘é˜Ÿåˆ—")]),s._v("ä¸­åˆ é™¤.")]),s._v(" "),t("li",[s._v("é‡‡â½¤è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„ç»„åˆ, get æ“ä½œå°±å¯ä»¥åœ¨ "),t("strong",[s._v("O(1)")]),s._v("  æ—¶é—´å¤æ‚åº¦å†…å®Œæˆäº†. ç”±äº put æ“ä½œè¦åˆ é™¤çš„èŠ‚ç‚¹â¼€èˆ¬æ˜¯å°¾éƒ¨èŠ‚ç‚¹, æ‰€ä»¥å¯ä»¥â½¤â¼€ä¸ªå˜é‡ tail æ—¶åˆ»è®°å½•å°¾éƒ¨èŠ‚ç‚¹çš„ä½ç½®, è¿™æ · put æ“ä½œä¹Ÿå¯ä»¥åœ¨ O(1) æ—¶é—´å†…å®Œæˆäº†.")])]),s._v(" "),t("p",[s._v("å…ˆæ¥ä¸€ä¸ªç»“ç‚¹ç±».")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("æ³¨æ„: ä¸ç®¡æ˜¯ put æ–¹æ³•è¿˜æ˜¯ get æ–¹æ³•, "),t("strong",[s._v("éƒ½éœ€è¦å°†è®¿é—®çš„ç»“ç‚¹é‡æ–°æ”¾åˆ°é“¾è¡¨å¤´éƒ¨")]),s._v(", æ‰€ä»¥ä¼šæŠ½å‡ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUCache")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" map "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¼“å­˜æœ€â¼¤å®¹é‡å¤§äº1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" capacity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUCache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" capacity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" capacity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** æ’å…¥å…ƒç´  */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯´æ˜ç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("head "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            head "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            tail "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯´æ˜ç¼“å­˜ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå…ƒç´ äº†")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ›´æ–°å€¼")]),s._v("\n            node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŠŠè¿™ä¸ªç»“ç‚¹ä»é“¾è¡¨åˆ é™¤å¹¶ä¸”æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeAndInsert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯´æ˜å½“å‰ç¼“å­˜ä¸å­˜åœ¨è¿™ä¸ªå€¼")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" newHead "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¤å¤„æº¢å‡ºåˆ™éœ€è¦åˆ é™¤æœ€è¿‘æœ€è¿‘æœªä½¿ç”¨çš„èŠ‚ç‚¹")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" capacity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("remove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ é™¤å°¾ç»“ç‚¹")]),s._v("\n                tail "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newHead"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†æ–°çš„ç»“ç‚¹æ’å…¥é“¾è¡¨å¤´éƒ¨")]),s._v("\n            newHead"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newHead"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            head "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newHead"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** ä»ç¼“å­˜ä¸­å–å€¼ */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦‚æœæœ‰å€¼åˆ™éœ€è¦å°†è¿™ä¸ªç»“ç‚¹æ”¾åˆ°é“¾è¡¨å¤´éƒ¨")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŠŠè¿™ä¸ªèŠ‚ç‚¹åˆ é™¤å¹¶æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeAndInsert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeAndInsert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LRUNode")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç‰¹æ®Šæƒ…å†µå…ˆåˆ¤æ–­, ä¾‹å¦‚è¯¥èŠ‚ç‚¹æ˜¯å¤´ç»“ç‚¹æˆ–æ˜¯å°¾éƒ¨èŠ‚ç‚¹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("mark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mark"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            tail "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            tail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ’â¼Šåˆ°å¤´ç»“ç‚¹")]),s._v("\n        node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        head "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br")])]),t("p",[t("strong",[s._v("LinkedHashMap")]),s._v(" ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°"),t("strong",[s._v("å›ºå®šå¤§å°")]),s._v("çš„ LRU ç¼“å­˜, å½“ LRU ç¼“å­˜å·²ç»æ»¡äº†çš„æ—¶å€™, å®ƒä¼šæŠŠæœ€è€çš„é”®å€¼å¯¹ç§»å‡ºç¼“å­˜. LinkedHashMap æä¾›äº†ä¸€ä¸ªç§°ä¸º "),t("strong",[s._v("removeEldestEntry()")]),s._v("  çš„æ–¹æ³•, è¯¥æ–¹æ³•ä¼šè¢« put() å’Œ putAll() è°ƒç”¨æ¥åˆ é™¤æœ€è€çš„é”®å€¼å¯¹. å‚è€ƒ: LinkedHashMapç¼“å­˜åº”ç”¨.")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[s._v("å¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://tech.meituan.com/cache_about.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç¼“å­˜é‚£äº›äº‹"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://my.oschina.net/jayhu/blog/732849",target:"_blank",rel:"noopener noreferrer"}},[s._v("ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF",target:"_blank",rel:"noopener noreferrer"}},[s._v("å†…å®¹åˆ†å‘ç½‘ç»œ"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);