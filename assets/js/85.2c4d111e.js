(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{414:function(t,_,s){"use strict";s.r(_);var v=s(4),r=Object(v.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_12-linux文件系统与文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_12-linux文件系统与文件"}},[t._v("#")]),t._v(" 12.Linux文件系统与文件")]),t._v(" "),_("p",[t._v("Linux 中"),_("strong",[t._v("所有被操作系统管理的资源")]),t._v(", 如网络接口卡, 磁盘驱动器, 输入输出设备等硬件设备, 普通文件或目录"),_("strong",[t._v("都被看作文件")]),t._v(". Linux 中硬件也被当成一个文件, 通常称为设备文件, 这样就可以通过"),_("strong",[t._v("读写文件的方式实现对硬件的访问")]),t._v(".")]),t._v(" "),_("h4",{attrs:{id:"文件系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文件系统"}},[t._v("#")]),t._v(" 文件系统")]),t._v(" "),_("h5",{attrs:{id:"_1-分区与文件系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-分区与文件系统"}},[t._v("#")]),t._v(" 1.分区与文件系统")]),t._v(" "),_("p",[t._v("对分区进行"),_("strong",[t._v("格式化")]),t._v("是为了在"),_("strong",[t._v("分区上建立文件系统")]),t._v(". 一个分区通常只能格式化为一个文件系统, 但是磁盘阵列等技术可以将一个分区格式化为"),_("strong",[t._v("多个")]),t._v("文件系统.")]),t._v(" "),_("h5",{attrs:{id:"_2-组成"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-组成"}},[t._v("#")]),t._v(" 2.组成")]),t._v(" "),_("p",[_("strong",[t._v("文件系统")]),t._v("最主要的几个组成部分如下:")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("inode")]),t._v(": 一个"),_("strong",[t._v("文件")]),t._v("占用一个 "),_("strong",[t._v("inode")]),t._v(", 记录文件的"),_("strong",[t._v("属性")]),t._v(", 同时记录此文件的"),_("strong",[t._v("实际内容所在的 block 编号")]),t._v(";")]),t._v(" "),_("li",[_("strong",[t._v("block")]),t._v(": 实际记录文件的"),_("strong",[t._v("内容")]),t._v(", 文件太大时, 会占用"),_("strong",[t._v("多个 block")]),t._v(";")]),t._v(" "),_("li",[_("strong",[t._v("superblock")]),t._v(": 记录文件系统的"),_("strong",[t._v("整体信息")]),t._v(", 包括 inode 和 block 的总量, 使用量, 剩余量, 以及文件系统的格式与相关信息等;")]),t._v(" "),_("li",[_("strong",[t._v("block bitmap")]),t._v(": 记录 block "),_("strong",[t._v("是否被使用的位域")]),t._v(".")])]),t._v(" "),_("p",[t._v("下面的图甚妙.")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563425402250.png",alt:"1563425402250",title:"文件系统组成"}})]),t._v(" "),_("h6",{attrs:{id:"_1-block"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-block"}},[t._v("#")]),t._v(" (1)block")]),t._v(" "),_("p",[t._v("在 "),_("strong",[t._v("Ext2 文件系统")]),t._v("中所支持的 "),_("strong",[t._v("block")]),t._v(" 大小有 "),_("strong",[t._v("1K, 2K 及 4K")]),t._v(" 三种, 不同的大小限制了"),_("strong",[t._v("单个文件和文件系统")]),t._v("的最大大小.")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("大小")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("1KB")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("2KB")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("4KB")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("最大单一文件")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("16GB")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("256GB")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("2TB")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("最大文件系统")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("2TB")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("8TB")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("16TB")])])])]),t._v(" "),_("p",[t._v("一个 block 只能被"),_("strong",[t._v("一个文件")]),t._v("所使用, 未使用的部分则浪费了. 因此如果需要存储大量小文件, 最好选用比较小的 block.")]),t._v(" "),_("p",[t._v("文件存储在硬盘上, 硬盘的最小存储单位是"),_("strong",[t._v("扇区")]),t._v(", 每个扇区存储 512 字节. 操作系统读取硬盘数据时, 不会一个扇区一个扇区的读取, 这样效率较低, 而是"),_("strong",[t._v("一次读取多个扇区, 即一次读取一个块(block). 块由多个扇区组成, 是文件读取的最小单位, 块最常见大小是 4Kb, 约为 8 个连续的扇区组成")]),t._v(".")]),t._v(" "),_("h6",{attrs:{id:"_2-inode"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-inode"}},[t._v("#")]),t._v(" (2)inode")]),t._v(" "),_("p",[t._v("除数据存储外, 还需要一个空间来存储文件的"),_("strong",[t._v("元信息 metadata")]),t._v(", 如文件拥有者, 创建时间, 权限, 大小等. 这种"),_("strong",[t._v("存储文件元信息的区域就叫 inode. 每个文件都有一个 inode")]),t._v(".")]),t._v(" "),_("p",[_("strong",[t._v("使用 stat 命令可以查看文件的 inode 信息. 每个 inode 都有一个号码, Linux 中使用 inode 号码区分不同的文件.")])]),t._v(" "),_("p",[t._v("inode 具体包含以下信息(文件的"),_("strong",[t._v("属性")]),t._v("):")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("权限")]),t._v("(read/write/excute)")]),t._v(" "),_("li",[t._v("拥有者与群组(owner/group)")]),t._v(" "),_("li",[_("strong",[t._v("容量")])]),t._v(" "),_("li",[t._v("建立或状态改变的时间(ctime)")]),t._v(" "),_("li",[t._v("最近一次的读取时间(atime)")]),t._v(" "),_("li",[t._v("最近修改的时间(mtime)")]),t._v(" "),_("li",[t._v("该文件真正内容的"),_("strong",[t._v("指向")]),t._v("(pointer).")])]),t._v(" "),_("p",[t._v("inode 中记录了"),_("strong",[t._v("文件内容所在的 block 编号")]),t._v(", 但是每个 block 非常小, 一个大文件"),_("strong",[t._v("随便都需要几十万的 block")]),t._v(". 而一个 inode 大小有限, 无法直接引用这么多 block 编号. 因此引入了"),_("strong",[t._v("间接, 双间接, 三间接引用")]),t._v(". 间接引用是指让 inode 记录的引用 "),_("strong",[t._v("block 块记录引用信息")]),t._v(".")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563425463927.png",alt:""}})]),t._v(" "),_("h5",{attrs:{id:"_3-文件读取"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-文件读取"}},[t._v("#")]),t._v(" 3.文件读取")]),t._v(" "),_("p",[t._v("对于 "),_("strong",[t._v("Ext2")]),t._v(" 文件系统, 当要读取一个文件的内容时, 先在 "),_("strong",[t._v("inode")]),t._v(" 中去查找文件内容所在的"),_("strong",[t._v("所有 block")]),t._v(", 然后把所有 block 的内容读出来.")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220528220129644.png",alt:""}})]),t._v(" "),_("p",[t._v("而对于 "),_("strong",[t._v("FAT")]),t._v(" 文件系统, 它"),_("strong",[t._v("没有 inode")]),t._v(", "),_("strong",[t._v("每个 block")]),t._v(" 中存储着"),_("strong",[t._v("下一个 block")]),t._v(" 的编号, 链式存储 block 编号.")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220528220155317.png",alt:""}})]),t._v(" "),_("h4",{attrs:{id:"目录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),_("h5",{attrs:{id:"_1-概述"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[t._v("#")]),t._v(" 1.概述")]),t._v(" "),_("p",[t._v("建立一个"),_("strong",[t._v("目录")]),t._v("时, 会分配一个 "),_("strong",[t._v("inode")]),t._v(" 与"),_("strong",[t._v("至少一个 block")]),t._v(". "),_("strong",[t._v("block 记录")]),t._v("的内容是目录下所有"),_("strong",[t._v("文件的 inode 编号以及文件名")]),t._v(".")]),t._v(" "),_("p",[t._v("可以看出"),_("strong",[t._v("文件的 inode 本身不记录文件名")]),t._v(", "),_("strong",[t._v("文件名")]),t._v("记录在"),_("strong",[t._v("目录")]),t._v("中, 因此新增文件, 删除文件, 更改文件名这些操作与"),_("strong",[t._v("目录的 w 权限")]),t._v("有关.")]),t._v(" "),_("p",[t._v('"~" 表示主目录, 通常是 "/home/user", 这里 user 即用户名. 如果是 root 用户, 则是 /root.')]),t._v(" "),_("h5",{attrs:{id:"_2-挂载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-挂载"}},[t._v("#")]),t._v(" 2.挂载")]),t._v(" "),_("p",[t._v("挂载利用"),_("strong",[t._v("目录")]),t._v("作为"),_("strong",[t._v("文件系统的进入点")]),t._v(", 也就是说进入"),_("strong",[t._v("目录")]),t._v("之后就可以读取"),_("strong",[t._v("文件系统")]),t._v("的数据.")]),t._v(" "),_("h5",{attrs:{id:"_3-目录结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-目录结构"}},[t._v("#")]),t._v(" 3.目录结构")]),t._v(" "),_("p",[t._v("为了使不同 "),_("strong",[t._v("Linux 发行版本")]),t._v("的目录结构保持一致性, FHS 标准规定了 Linux 目录结构. 最基础的三个目录如下:")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("/")]),t._v(": root. 根目录.")]),t._v(" "),_("li",[_("strong",[t._v("/usr")]),t._v(": unix software resource. 所有系统"),_("strong",[t._v("默认软件")]),t._v("都会安装到这个目录.")]),t._v(" "),_("li",[_("strong",[t._v("/var")]),t._v(": variable. 存放系统或程序运行过程中的"),_("strong",[t._v("数据文件")]),t._v(".")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563425533764.png",alt:"1563425533764",title:"Linux目录结构"}})]),t._v(" "),_("p",[_("strong",[t._v("常见目录说明:")])]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("/bin: ​")]),t._v("​"),_("strong",[_("strong",[t._v("存放")])]),t._v("​"),_("strong",[t._v("二进制可执行文件")]),t._v("(ls, cat, mkdir 等), 常用命令一般都在这里.")]),t._v(" "),_("li",[_("strong",[t._v("/etc: ​")]),t._v("​"),_("strong",[_("strong",[t._v("存放")])]),t._v("​"),_("strong",[t._v("系统管理和配置文件")]),t._v(".")]),t._v(" "),_("li",[_("strong",[t._v("/home: ​")]),t._v("​"),_("strong",[_("strong",[t._v("存放所有")])]),t._v("​"),_("strong",[t._v("用户文件")]),t._v("的根目录, 是用户主目录的基点, 比如用户 user 的主目录就是 /home/user, 可以用 ~user 表示.")]),t._v(" "),_("li",[_("strong",[t._v("/usr: ​")]),t._v("​"),_("strong",[_("strong",[t._v("存放")])]),t._v("​"),_("strong",[t._v("系统应用程序")]),t._v(".")]),t._v(" "),_("li",[_("strong",[t._v("/opt: ​")]),t._v("存放额外安装的可选应用程序包. 如可以把 Tomcat 安装到这里.")]),t._v(" "),_("li",[_("strong",[t._v("/proc: ​")]),t._v("虚拟文件系统目录, 是系统内存的映射. 可直接访问这个目录来获取系统信息.")]),t._v(" "),_("li",[_("strong",[t._v("/root: ​")]),t._v("root 用户的主目录.")]),t._v(" "),_("li",[_("strong",[t._v("/sbin:")]),t._v(" 存放二进制可执行文件, 只有 root 才能访问. 这里存放的是 root 用户使用的系统级别的管理命令和程序. 如 ifconfig 等.")]),t._v(" "),_("li",[_("strong",[t._v("/dev: ​")]),t._v("存放设备文件.")]),t._v(" "),_("li",[_("strong",[t._v("/mnt: ​")]),t._v("root 安装临时文件系统的安装点, 系统提供这个目录是让用户临时挂载其他的文件系统.")]),t._v(" "),_("li",[_("strong",[t._v("/boot: ​")]),t._v("存放用于系统引导时使用的各种文件.")]),t._v(" "),_("li",[_("strong",[t._v("/lib: ​")]),t._v("存放与系统运行相关的库文件 .")]),t._v(" "),_("li",[_("strong",[t._v("/tmp: ​")]),t._v("存放各种临时文件, 是公用的临时文件存储点.")]),t._v(" "),_("li",[_("strong",[t._v("/var: ​")]),t._v("存放运行时需要改变数据的文件, 也是某些大文件的溢出区, 比如日志文件等.")])]),t._v(" "),_("h4",{attrs:{id:"文件🌟"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文件🌟"}},[t._v("#")]),t._v(" 文件🌟")]),t._v(" "),_("h5",{attrs:{id:"_1-文件类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件类型"}},[t._v("#")]),t._v(" 1.文件类型")]),t._v(" "),_("p",[t._v("Linux 中比较重要的文件类型有: 普通文件, 目录文件, 链接文件, 设备文件, 管道文件, Socket 套接字文件等.")]),t._v(" "),_("h6",{attrs:{id:"_1-普通文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-普通文件"}},[t._v("#")]),t._v(" (1)普通文件")]),t._v(" "),_("p",[t._v("普通文件指 txt, html, pdf 等应用层面的文件类型, 用户可以根据访问权限对其进行访问, 修改和删除.")]),t._v(" "),_("h6",{attrs:{id:"_2-目录文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-目录文件"}},[t._v("#")]),t._v(" (2)目录文件")]),t._v(" "),_("p",[_("strong",[t._v("目录")]),t._v("也是一种"),_("strong",[t._v("文件")]),t._v(", 打开目录实际上是打开"),_("strong",[t._v("目录文件")]),t._v(". 目录文件包含了它目录下的所有文件名以及指向这些文件的指针.")]),t._v(" "),_("h6",{attrs:{id:"_3-链接文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-链接文件"}},[t._v("#")]),t._v(" (3)链接文件")]),t._v(" "),_("p",[_("strong",[t._v("链接文件")]),t._v("分为符号链接(软链接)文件和硬链接文件. 后面"),_("strong",[t._v("详解")]),t._v(".")]),t._v(" "),_("ul",[_("li",[t._v("符号链接(软链接)(Symbolic Link)")]),t._v(" "),_("li",[t._v("硬链接(Hard Link)")])]),t._v(" "),_("h6",{attrs:{id:"_4-设备文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-设备文件"}},[t._v("#")]),t._v(" (4)设备文件")]),t._v(" "),_("p",[t._v("设备文件分为"),_("strong",[t._v("块设备")]),t._v("文件和"),_("strong",[t._v("字符设")]),t._v("备文件, 设备文件一般存于 "),_("strong",[t._v("/dev")]),t._v(" 目录下. "),_("strong",[t._v("字符设备与块设备最根本的区别就是它们是否可以被随机访问.")])]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("字符设备文件")]),t._v(": 字符设备是依照先后顺序被存取数据的设备, 通常不支持随机存取, 此类设备可以按字节/字符来读取数据,  如键盘, 串口等等.")]),t._v(" "),_("li",[_("strong",[t._v("块设备文件")]),t._v(": 块设备是可以被随机存取数据的设备, 应用程序可以访问块设备上任何一块位置. 块设备以块的方式读取数据,如硬盘, 软盘, 光碟等.")])]),t._v(" "),_("h6",{attrs:{id:"_5-管道文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-管道文件"}},[t._v("#")]),t._v(" (5)管道文件")]),t._v(" "),_("p",[t._v("管道文件一般用于"),_("strong",[t._v("进程间通信")]),t._v(", 使用 "),_("strong",[t._v("mkfifo")]),t._v(" 命令可以创建一个管道文件.")]),t._v(" "),_("h6",{attrs:{id:"_6-socket套接字文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-socket套接字文件"}},[t._v("#")]),t._v(" (6)Socket套接字文件")]),t._v(" "),_("p",[t._v("套接字文件用于"),_("strong",[t._v("网络进程")]),t._v("间的通信, 可以用于两台不同机器间通信, 也可以用于本机的 Socket 网络程序.")]),t._v(" "),_("h5",{attrs:{id:"_2-链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-链接"}},[t._v("#")]),t._v(" 2.链接")]),t._v(" "),_("p",[t._v("详解一下链接文件, 分为"),_("strong",[t._v("软(符号)链接和硬(实体)链接")]),t._v(".")]),t._v(" "),_("div",{staticClass:"language-shell line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-sf"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" source_filename dist_filename\n"),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 默认是实体链接"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hard "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", 加 "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" 为符号链接"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("symbolic "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 如果目标文件存在时, 先删除目标文件\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br")])]),_("p",[t._v("两者关系图如下:")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220528222344567.png",alt:"",title:"软链接与硬链接的关系"}})]),t._v(" "),_("h6",{attrs:{id:"_1-实体链接-硬链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-实体链接-硬链接"}},[t._v("#")]),t._v(" (1)实体链接(硬链接)")]),t._v(" "),_("p",[t._v("在目录下创建一个"),_("strong",[t._v("条目")]),t._v(", 记录着文件名与 inode 编号, 这个 inode 就是"),_("strong",[t._v("源文件的 inode")]),t._v(". "),_("strong",[t._v("删除任意一个")]),t._v("条目, 文件还是"),_("strong",[t._v("存在")]),t._v(", 只要"),_("strong",[t._v("引用数量不为 0")]),t._v(".")]),t._v(" "),_("p",[_("strong",[t._v("硬链接的文件拥有相同的 inode")]),t._v(", 因为操作系统"),_("strong",[t._v("靠 inode 来区分文件")]),t._v(", 2 个 inode 相同的文件, 就代表它们"),_("strong",[t._v("是一个文件")]),t._v(". 删除一个文件并不会对其他拥有相同 inode 的文件产生影响, 只有当 inode 相同的"),_("strong",[t._v("所有文件被删除")]),t._v("了, 也就是把硬链接和源文件都删除, 这个文件才会被删除.")]),t._v(" "),_("p",[t._v("硬链接的限制: "),_("strong",[t._v("不能跨越文件系统, 不能对目录进行链接")]),t._v(".")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" /etc/crontab "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n$ ll "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" /etc/crontab "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("crontab")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("34474855")]),t._v(" -rw-r--r--. "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("451")]),t._v(" Jun "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2014")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("crontab")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("34474855")]),t._v(" -rw-r--r--. "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("451")]),t._v(" Jun "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2014")]),t._v(" /etc/crontab\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里这两个文件其实指向的是同一个文件, 只有都删掉才能完全删除文件")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br")])]),_("h6",{attrs:{id:"_2-符号链接-软链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-符号链接-软链接"}},[t._v("#")]),t._v(" (2)符号链接(软链接)")]),t._v(" "),_("p",[t._v("符号链接文件保存着"),_("strong",[t._v("源文件所在的绝对路径")]),t._v(", 在读取时会定位到"),_("strong",[t._v("源文件")]),t._v("上, 可以理解为 "),_("strong",[t._v("Windows 的快捷方式.")])]),t._v(" "),_("p",[t._v("当符号链接被删除时, "),_("strong",[t._v("并不会影响")]),t._v("源文件. 而当"),_("strong",[t._v("源文件")]),t._v("被删除了, 链接文件就"),_("strong",[t._v("打不开")]),t._v("了.")]),t._v(" "),_("p",[t._v("因为记录的是"),_("strong",[t._v("路径")]),t._v(", 所以可以为"),_("strong",[t._v("目录建立链接")]),t._v(".")]),t._v(" "),_("h5",{attrs:{id:"_3-文件属性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-文件属性"}},[t._v("#")]),t._v(" 3.文件属性")]),t._v(" "),_("p",[t._v("用户分为三种: "),_("strong",[t._v("文件拥有者, 群组, 其它人")]),t._v(". 不同用户有不同的文件权限.")]),t._v(" "),_("p",[t._v("使用 "),_("strong",[t._v("ll")]),t._v(" 查看一个文件时, 会显示文件信息, 如:")]),t._v(" "),_("div",{staticClass:"language-shell line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[t._v("drwxr-xr-x "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" root root "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" May "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" 00:14 hello.txt\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("解释:")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("drwxr-xr-x")]),t._v(": 文件"),_("strong",[t._v("类型以及权限")]),t._v(", 第 1 位为文件"),_("strong",[t._v("类型字段")]),t._v(", 后 9 位为文件"),_("strong",[t._v("权限字段")]),t._v(".")]),t._v(" "),_("li",[t._v("3: "),_("strong",[t._v("链接数")]),t._v(".")]),t._v(" "),_("li",[t._v("root: 文件"),_("strong",[t._v("拥有者")]),t._v(".")]),t._v(" "),_("li",[t._v("root: 所属"),_("strong",[t._v("群组")]),t._v(".")]),t._v(" "),_("li",[t._v("17: 文件大小.")]),t._v(" "),_("li",[t._v("May 6 00:14: 文件最后被修改的时间.")]),t._v(" "),_("li",[t._v("hello.txt: 文件名.")])]),t._v(" "),_("p",[t._v("常见文件类型及其含义:")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("d")]),t._v(": "),_("strong",[t._v("目录")])]),t._v(" "),_("li",[_("strong",[t._v("-")]),t._v(": "),_("strong",[t._v("文件")])]),t._v(" "),_("li",[_("strong",[t._v("l")]),t._v(": "),_("strong",[t._v("链接文件")])])]),t._v(" "),_("h5",{attrs:{id:"_4-文件权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-文件权限"}},[t._v("#")]),t._v(" 4.文件权限")]),t._v(" "),_("p",[t._v("Linux 中的每个用户必须属于一个组, 不能独立于组外. 每个文件有所有者, 所在组, 其它组的概念.")]),t._v(" "),_("p",[t._v("文件信息中 9 位的文件权限字段中, 每 3 个为一组, 共 3 组, 每一组分别代表对"),_("strong",[t._v("文件拥有者, 所属群组, 其它人")]),t._v("的文件权限. 一组权限中的 3 位分别为 "),_("strong",[t._v("r, w, x")]),t._v(" 权限, 分别表示"),_("strong",[t._v("可读, 可写, 可执行")]),t._v(".")]),t._v(" "),_("p",[_("strong",[t._v("文件权限")]),t._v("可以用一组数字来表示, 此时一组权限的 3 个位当做二进制数字的位, 从左到右每个位的权值为 4, 2, 1, 即每个权限对应的"),_("strong",[t._v("数字权值为 ​")]),t._v("​**==r = 4, w = 2, x = 1==**.")]),t._v(" "),_("h6",{attrs:{id:"_1-修改权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改权限"}},[t._v("#")]),t._v(" (1)修改权限")]),t._v(" "),_("p",[t._v("使用 "),_("strong",[t._v("chmod 指令")]),t._v("修改权限.")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-R"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" xyz dirname/filename\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("示例: 将 .bashrc 文件的权限修改为 "),_("strong",[t._v("-rwxr-xr--. ​")]),t._v("​"),_("strong",[_("strong",[t._v("这里就是用")])]),t._v("​"),_("strong",[t._v("数字")]),t._v("代表权限.")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("754")]),t._v(" .bashrc\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("也可以使用"),_("strong",[t._v("符号")]),t._v("来设定权限.")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ugoa"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("+-"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rwx"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" dirname/filename\n- u: 拥有者\n- g: 所属群组\n- o: 其他人\n- a: 所有人\n- +: 添加权限\n- -: 移除权限\n- "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(": 设定权限\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br")])]),_("p",[t._v("示例: 为 .bashrc 文件的所有用户"),_("strong",[t._v("添加")]),t._v("写权限.")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("$ "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+w .bashrc\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("strong",[t._v("对于文件:")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("权限名称")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("操作")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("r")]),t._v("(读)")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("可以使用"),_("strong",[t._v("查看文件内容")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("w")]),t._v("(写)")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("可以"),_("strong",[t._v("修改文件内容")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("x")]),t._v("(执行)")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("可以将其作为二进制文件"),_("strong",[t._v("运行")])])])])]),t._v(" "),_("p",[t._v("root 可以无视普通用户的权限, 即使文件目录权限是 000, "),_("strong",[t._v("依旧可以访问")]),t._v(".")]),t._v(" "),_("h6",{attrs:{id:"_2-目录权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-目录权限"}},[t._v("#")]),t._v(" (2)目录权限")]),t._v(" "),_("p",[_("strong",[t._v("文件名不是存储在一个文件的内容中, 而是存储在一个文件所在的目录中")]),t._v(". 因此, 拥有文件的 "),_("strong",[t._v("w 权限并不能对文件名进行修改")]),t._v(". 文件名是存放在"),_("strong",[t._v("目录的 block 中")]),t._v("的, 所以要新增, 删除, 修改文件名需要"),_("strong",[t._v("目录的 w 权限")]),t._v(".")]),t._v(" "),_("p",[t._v("对"),_("strong",[t._v("文件和目录")]),t._v("而言, 读写权限表示"),_("strong",[t._v("不同的意义")]),t._v(". 目录存储文件列表, 一个目录的权限也就是对其"),_("strong",[t._v("文件列表")]),t._v("的权限.")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("r 权限")]),t._v("表示可以"),_("strong",[t._v("读取")]),t._v("目录的文件列表.")]),t._v(" "),_("li",[_("strong",[t._v("w 权限")]),t._v("表示可以"),_("strong",[t._v("修改")]),t._v("目录的文件列表, 即可添加, 删除文件, 对文件名"),_("strong",[t._v("进行修改")]),t._v("等.")]),t._v(" "),_("li",[_("strong",[t._v("x 权限")]),t._v("表示可以使用 cd 进入目录, x "),_("strong",[t._v("权限是 r 和 w 权限")]),t._v("的"),_("strong",[t._v("基础")]),t._v(", 如果这个目录都不能进, 也就没办法读取文件列表以及对文件列表进行修改了.")])]),t._v(" "),_("h6",{attrs:{id:"_3-文件默认权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-文件默认权限"}},[t._v("#")]),t._v(" (3)文件默认权限")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("文件")]),t._v("默认权限: 文件"),_("strong",[t._v("默认没有可执行权限")]),t._v(", 因此为 "),_("strong",[t._v("666")]),t._v(", 也就是 "),_("strong",[t._v("-rw-rw-rw-")]),t._v(".")]),t._v(" "),_("li",[_("strong",[t._v("目录")]),t._v("默认权限: 目录必须要能够"),_("strong",[t._v("进入")]),t._v(", 也就是必须拥有"),_("strong",[t._v("可执行权限")]),t._v(", 因此为 "),_("strong",[t._v("777")]),t._v(", 也就是 "),_("strong",[t._v("drwxrwxrwx")]),t._v(".")])]),t._v(" "),_("p",[t._v("‍")])])}),[],!1,null,null,null);_.default=r.exports}}]);