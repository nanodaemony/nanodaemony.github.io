(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{548:function(a,t,e){"use strict";e.r(t);var s=e(7),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_3-å£ç®—-æ‹è¯•å·è½®è¯¢æ¥å£æŠ¥é”™ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å£ç®—-æ‹è¯•å·è½®è¯¢æ¥å£æŠ¥é”™ğŸŒŸ"}},[a._v("#")]),a._v(" 3.å£ç®—-æ‹è¯•å·è½®è¯¢æ¥å£æŠ¥é”™ğŸŒŸ")]),a._v(" "),t("h4",{attrs:{id:"æ•…éšœç°è±¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•…éšœç°è±¡"}},[a._v("#")]),a._v(" æ•…éšœç°è±¡")]),a._v(" "),t("p",[a._v("ä¼ä¸šå¾®ä¿¡æ”¶åˆ°æŠ¥è­¦, æ‹è¯•å·è½®è¯¢æ¥å£(/leo-exam/{client:xxx}/photograph/poll) æŠ¥é”™")]),a._v(" "),t("blockquote",[t("p",[a._v("[ERROR][CONTROLLER][leo-exam][[102 æ¬¡][NullPointerException]null]")]),a._v(" "),t("p",[a._v("request: /leo-exam/{client:xxx}/photograph/poll"),t("br"),a._v("\nmethod: PhotographController.paperPagePool(..)"),t("br"),a._v("\nhost: leo-exam-6b6cbbd75d-gj84r"),t("br"),a._v("\nuser_id: 514597712"),t("br"),a._v("\nplatform: android"),t("br"),a._v("\napp_ver: 3.40.2"),t("br"),a._v("\nUA: Leo/3.40.2 (HUAWEILIO-AN00m; Android 10; Scale/3.00)"),t("br"),a._v("\ntrace_id: 3s95i5yzqu0bf2ufzs9")]),a._v(" "),t("p",[a._v("å †æ ˆä¿¡æ¯:"),t("br"),a._v("\ncom.fenbi.leo.db.utils.CachedBeanCopier.copy(CachedBeanCopier.java:39)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.service.impl.PhotographServiceImpl.getPaperPageById(PhotographServiceImpl.java:309)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.logic.PhotographLogic.poolPaperPage(PhotographLogic.java:211)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.ctrl.PhotographController.paperPagePool$original$ntQmU7pc(PhotographController.java:95)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.ctrl.PhotographController.paperPagePool$original$ntQmU7pc$accessor$y8YzcWvp(PhotographController.java)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.ctrl.PhotographController$auxiliary$YQwykV1x.call(Unknown Source)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.ctrl.PhotographController.paperPagePool(PhotographController.java)"),t("br"),a._v("\ncom.fenbi.leo.exam.server.web.ctrl.PhotographController$$FastClassBySpringCGLIB$$d1575628.invoke("),t("generated",[a._v(")"),t("br"),a._v("\næ­¤æ¶ˆæ¯äº 2022-06-13 20:53:17.121 å‘å¸ƒ")])],1)]),a._v(" "),t("p",[a._v("ç”¨æˆ·åé¦ˆæ‹è¯•å·åŠŸèƒ½æ— æ³•ä½¿ç”¨.")]),a._v(" "),t("h4",{attrs:{id:"æ•…éšœå¤ç›˜-å¤„ç†è¿‡ç¨‹-ç°è±¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•…éšœå¤ç›˜-å¤„ç†è¿‡ç¨‹-ç°è±¡"}},[a._v("#")]),a._v(" æ•…éšœå¤ç›˜(å¤„ç†è¿‡ç¨‹&ç°è±¡)")]),a._v(" "),t("blockquote",[t("p",[a._v("20:00 å¼€å§‹ä¼ä¸šå¾®ä¿¡æœ‰ä¸€äº›leo-examçš„æŠ¥è­¦ä¿¡æ¯")])]),a._v(" "),t("blockquote",[t("p",[a._v("20:48 å®šä½åˆ°å¼‚å¸¸åŸå› æ˜¯æ•°æ®åº“çš„ä¸»ä»å»¶è¿Ÿ")])]),a._v(" "),t("p",[a._v("é€šè¿‡ä¼ä¸šå¾®ä¿¡æŠ¥è­¦é”™è¯¯å†…å®¹æ¥çœ‹, é¦–å…ˆçŒœæµ‹æ˜¯æŸ¥è¯¢æ—¶æœªæŸ¥å‡ºæ•°æ®. ç„¶è€Œè¿™éƒ¨åˆ†ä¸šåŠ¡åœ¨è®¾è®¡æ—¶, æ˜¯ä¿è¯æ•°æ®åº“é‡Œæœ‰æ•°æ®æ—¶æ‰ä¼šè¯·æ±‚è¿™ä¸ªæ¥å£è¿›è¡ŒæŸ¥è¯¢, æ‰€ä»¥å°†å¼‚å¸¸å®šä½åœ¨æ•°æ®åº“çš„èŒƒå›´ä¸­.")]),a._v(" "),t("p",[a._v("è§‚å¯Ÿç›‘æ§, leo-c-mysql é›†ç¾¤çš„"),t("mark",[t("strong",[a._v("ä¸»ä»å»¶è¿Ÿæ¯”è¾ƒé«˜")])]),a._v(", å·²ç»æ¥è¿‘ 30s, æ‰€ä»¥å¯¼è‡´æ•°æ®æ’å…¥å, æŸ¥è¯¢çš„æ¥å£æŸ¥è¯¢ä¸åˆ°è®°å½•, å¯¼è‡´ NPE.")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126180911-lyn3f0r.png",alt:"image"}})]),a._v(" "),t("blockquote",[t("p",[a._v("20:56 DBAæ’æŸ¥ä¸»ä»å»¶è¿Ÿæ¯”è¾ƒé«˜çš„åŸå› ")])]),a._v(" "),t("p",[a._v("DBA åé¦ˆæ˜¯ç”±äºä¸»åº“å†™å…¥æ¯”è¾ƒé«˜, åŒæ—¶ä»åº“çš„è¯»å‹åŠ›æ¯”è¾ƒå¤§, å¯¼è‡´ä¸»ä»å»¶è¿Ÿå¢åŠ . æ¯”è¾ƒé«˜çš„è¯»æ˜¯æ¥è‡ªäº leo-midas-group-activity, è¯¥æœåŠ¡åªé…ç½®äº†ä¸€ä¸ªä»åº“, æ‰€ä»¥å¯¼è‡´å•ä¸ªåº“çš„æµé‡æ¯”è¾ƒå¤§.")]),a._v(" "),t("p",[a._v("ä»æ•´ä½“é›†ç¾¤ä¸Šçœ‹, ä»åº“çš„è´Ÿè½½ä¸å‡è¡¡, å¤§éƒ¨åˆ†è¯·æ±‚éƒ½æ‰“åˆ°äº†å…¶ä¸­ä¸€ä¸ªä»åº“ä¸Š.")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126180945-t6qgfps.png",alt:"image"}})]),a._v(" "),t("blockquote",[t("p",[a._v("21:00 ä¸»ä»å»¶è¿Ÿæ¢å¤æ­£å¸¸, æœåŠ¡æ¢å¤")])]),a._v(" "),t("p",[a._v("é«˜å³°æœŸå·²è¿‡, æµé‡æ…¢æ…¢é™ä¸‹æ¥, ä¸»ä»å»¶è¿Ÿåœ¨ 21:00 æ¢å¤åˆ°æ­£å¸¸, æŠ¥è­¦ä¿¡æ¯ä¹Ÿæ²¡æœ‰äº†, æœåŠ¡é”™è¯¯ QPS ä¹Ÿæ¢å¤æ­£å¸¸.")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181017-4iz8zj0.png",alt:"image"}})]),a._v(" "),t("h4",{attrs:{id:"æ•…éšœåŸå› "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•…éšœåŸå› "}},[a._v("#")]),a._v(" æ•…éšœåŸå› ")]),a._v(" "),t("p",[a._v("leo-c-mysql é›†ç¾¤çš„å†™æµé‡æ¯”è¾ƒå¤§, åŒæ—¶ä¸€ä¸ªä»åº“çš„è¯»æµé‡æ¯”è¾ƒå¤§, å¯¼è‡´ä¸»ä»å»¶è¿Ÿå¢åŠ .")]),a._v(" "),t("h4",{attrs:{id:"ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–"}},[a._v("#")]),a._v(" ä¼˜åŒ–")]),a._v(" "),t("h5",{attrs:{id:"_1-å¢åŠ ä»åº“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¢åŠ ä»åº“"}},[a._v("#")]),a._v(" 1.å¢åŠ ä»åº“")]),a._v(" "),t("p",[a._v("æµé‡è¾ƒå¤§çš„æœåŠ¡(leo-midas-group-activity)å¢åŠ å¤šä»åº“é…ç½®, å‡å°å•ä¸ªä»åº“å‹åŠ›")]),a._v(" "),t("h5",{attrs:{id:"_2-åŸå› æ’æŸ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-åŸå› æ’æŸ¥"}},[a._v("#")]),a._v(" 2.åŸå› æ’æŸ¥")]),a._v(" "),t("p",[a._v("06-13 å·å‘ç”Ÿäº†æ¯”è¾ƒé•¿çš„ä¸»ä»å»¶è¿Ÿ, åç»­è§‚å¯Ÿ 06-14 ä»ç„¶åœ¨ç›¸åŒçš„æ—¶é—´ç‚¹æœ‰è¾ƒé«˜çš„ä¸»ä»å»¶è¿Ÿ, éœ€è¦æ’æŸ¥ä¸€ä¸‹é—®é¢˜åŸå› .")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181140-4v8pb32.png",alt:"image"}})]),a._v(" "),t("p",[a._v("è§‚å¯Ÿ MySQL é›†ç¾¤çš„ç›‘æ§, åœ¨ 06-07 å¼€å§‹åçš„å‡ å¤©, å†™ QPS ä¸Šæ¶¨äº†å¾ˆå¤š.")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181202-depovv4.png",alt:"image"}})]),a._v(" "),t("p",[a._v("ç»Ÿè®¡å†™è¯·æ±‚æœ€é«˜çš„åº“")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("sum "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("mysql_perf_schema_table_io_waits_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*leo-c-mysql.*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" operation"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"update|delete|insert"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20231126181232-361o5jk.png",alt:"image"}})]),a._v(" "),t("p",[a._v("ç»Ÿè®¡æ˜¯å“ªå¼ è¡¨çš„å†™è¯·æ±‚")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("sum "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("mysql_perf_schema_table_io_waits_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" instance"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*leo-c-mysql.*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" operation"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("~")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"update|delete|insert"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" schema"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"leo_exam"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20231126181256-h58tb94.png",alt:"image"}})]),a._v(" "),t("p",[a._v("è§‚å¯ŸæœåŠ¡æ¦‚è§ˆä¸­å†™ MySQL çš„è¯·æ±‚ä¹Ÿæ˜¯èƒ½å¤Ÿå¯¹çš„ä¸Šçš„")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181313-wq7ywlh.png",alt:"image"}})]),a._v(" "),t("p",[a._v("æ’æŸ¥ä»£ç , æ‰¾åˆ°æµé‡æ¥æº")]),a._v(" "),t("p",[a._v("æ’æŸ¥ leo-exam ä»£ç , è¿™å¼ è¡¨çš„å†™å…¥æœ‰ä¸¤ä¸ªæ¥æº, ä¸€ä¸ªæ¥æºæ˜¯æ‹ç…§æ£€æŸ¥çš„ MQ, ä¸€ä¸ªæ¥æºæ˜¯ addAnimationKeypointVideos RPC æ¥å£. çœ‹æ¥å£ç›‘æ§, addAnimationKeypointVideos æ¥å£çš„ç›‘æ§æ¯”è¾ƒæ­£å¸¸, ä½†æ˜¯æ‹ç…§æ£€æŸ¥ MQ çš„ QPS å’Œæ•°æ®åº“ QPS ä¸Šæ¶¨è§„å¾‹åŸºæœ¬ä¸€è‡´. ä½†æ˜¯å³°å€¼ QPS ç›¸å·® 3 å€, çœ‹ä¸šåŠ¡é€»è¾‘æ˜¯å› ä¸ºæ‹ç…§æ£€æŸ¥ä¸€èˆ¬ä¸€æ¬¡æœ€å¤š 3 ä¸ªé¢˜ç›®, æ‹¿åˆ°é¢˜ç›®ä¹‹åä¼šå»å†…å®¹ç»„çš„æ¥å£æŸ¥è¯¢æœ‰æ— è§†é¢‘, ç„¶å Insert æˆ–è€… update search_question_video è¿™å¼ è¡¨, æ‰€ä»¥ QPS ç›¸å·®ä¸‰å€.")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181409-chq6ito.png",alt:"image"}})]),a._v(" "),t("p",[a._v("çœ‹æ‹ç…§æ£€æŸ¥çš„ QPS è¶‹åŠ¿åŸºæœ¬ä¸€è‡´")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20231126181453-us5dkj6.png",alt:"image"}})]),a._v(" "),t("p",[a._v("ä¼˜åŒ–äº† SQL:")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("leo-exam ä¸­ insert å¯ä»¥æ‰¹é‡å†™")])]),a._v(" "),t("li",[a._v("leo-exam ä¸­å…ˆ select å update/select å¯ä»¥æ”¹ä¸ºä¸€æ¬¡ insert into ... on duplicate key update ...")])]),a._v(" "),t("p",[a._v("â€")]),a._v(" "),t("p",[a._v("â€")]),a._v(" "),t("p",[a._v("â€")]),a._v(" "),t("p",[a._v("â€")])])}),[],!1,null,null,null);t.default=r.exports}}]);