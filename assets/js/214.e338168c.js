(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{542:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_3-zookeeperåº”ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-zookeeperåº”ç”¨"}},[t._v("#")]),t._v(" 3.Zookeeperåº”ç”¨")]),t._v(" "),s("p",[t._v("Zookeeper æ˜¯ä¸€ä¸ªå…¸å‹çš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„åˆ†å¸ƒå¼æ•°æ®ç®¡ç†ä¸åè°ƒæ¡†æ¶, åŸºäºåˆ†å¸ƒå¼çš„"),s("strong",[t._v("æ•°æ®å‘å¸ƒä¸è®¢é˜…")]),t._v("å¯ä»¥æœ‰è¯¸å¤šåº”ç”¨åœºæ™¯. å¯ä»¥ç”¨åœ¨"),s("strong",[t._v("åå­—æœåŠ¡, é…ç½®ç®¡ç†, é›†ç¾¤ç®¡ç†, é›†ç¾¤é€‰ä¸¾, åˆ†å¸ƒå¼é”, é˜Ÿåˆ—ç®¡ç†, æ¶ˆæ¯è®¢é˜…")]),t._v(" ç­‰åœºæ™¯.")]),t._v(" "),s("h4",{attrs:{id:"å‘½åæœåŠ¡-æ³¨å†Œä¸­å¿ƒğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘½åæœåŠ¡-æ³¨å†Œä¸­å¿ƒğŸŒŸ"}},[t._v("#")]),t._v(" å‘½åæœåŠ¡/æ³¨å†Œä¸­å¿ƒğŸŒŸ")]),t._v(" "),s("p",[t._v("å‘½åæœåŠ¡åŠŸèƒ½ä¸»è¦æ˜¯æ ¹æ®æŒ‡å®šåå­—æ¥è·å–èµ„æºæˆ–æœåŠ¡çš„åœ°å€, æä¾›è€…ç­‰ä¿¡æ¯, åˆ©ç”¨å…¶ znode å’Œ watcher æœºåˆ¶, å°†å…¶ä½œä¸ºåŠ¨æ€æ³¨å†Œå’Œè·å–æœåŠ¡ä¿¡æ¯çš„é…ç½®ä¸­å¿ƒ, ç»Ÿä¸€ç®¡ç†æœåŠ¡åç§°å’Œå…¶å¯¹åº”çš„æœåŠ¡å™¨åˆ—è¡¨ä¿¡æ¯, ç³»ç»Ÿèƒ½å¤Ÿå®æ—¶æ„ŸçŸ¥"),s("strong",[t._v("æœåŠ¡å™¨çš„çŠ¶æ€")]),t._v("(ä¸Šçº¿, ä¸‹çº¿, å®•æœº).")]),t._v(" "),s("p",[t._v("å› æ­¤ ZK å¯ä»¥ä½œä¸º"),s("strong",[t._v("æ³¨å†Œä¸­å¿ƒ")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_1-è´Ÿè½½å‡è¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-è´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" 1.è´Ÿè½½å‡è¡¡")]),t._v(" "),s("p",[t._v("è½®è¯¢æœåŠ¡æ³¨å†Œè¡¨, å°½å¯èƒ½å°†æœåŠ¡è¯·æ±‚å‡åŒ€åˆ†é…åˆ°æ‰€æœ‰æ³¨å†Œæœ‰æ•ˆçš„æœåŠ¡å™¨ä¸Š.")]),t._v(" "),s("h5",{attrs:{id:"_2-å¥åº·æ£€æŸ¥-å¿ƒè·³ç›‘æµ‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¥åº·æ£€æŸ¥-å¿ƒè·³ç›‘æµ‹"}},[t._v("#")]),t._v(" 2.å¥åº·æ£€æŸ¥/å¿ƒè·³ç›‘æµ‹")]),t._v(" "),s("p",[t._v("åŠ¨æ€ç»´æŠ¤æœåŠ¡åœ°å€æ³¨å†Œè¡¨, åˆ©ç”¨å¿ƒè·³è¯·æ±‚å®æ—¶ç›‘æ§æ³¨å†ŒæœåŠ¡çŠ¶æ€, åˆ é™¤æ— æ•ˆæœåŠ¡èŠ‚ç‚¹, ç»´æŠ¤æœ‰æ•ˆçš„åœ°å€æ³¨å†Œè¡¨. å¯ä»¥è®©ä¸åŒçš„æœºå™¨éƒ½åœ¨ ZK çš„ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸´æ—¶å­èŠ‚ç‚¹. ä¸åŒæœºå™¨ä¹‹é—´å¯ä»¥æ ¹æ®è¿™ä¸ªä¸´æ—¶èŠ‚ç‚¹æ¥åˆ¤æ–­å¯¹åº”çš„å®¢æˆ·ç«¯æœºå™¨æ˜¯å¦å­˜æ´».")]),t._v(" "),s("h5",{attrs:{id:"_3-è°ƒç”¨ç›‘æ§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-è°ƒç”¨ç›‘æ§"}},[t._v("#")]),t._v(" 3.è°ƒç”¨ç›‘æ§")]),t._v(" "),s("p",[t._v("é€šè¿‡ç»Ÿè®¡æ³¨å†Œè¡¨å„ä¸ªå­èŠ‚ç‚¹è¢«"),s("strong",[t._v("è®¿é—®æ¬¡æ•°")]),t._v("æ¥ç›‘æ§æœåŠ¡è°ƒç”¨æƒ…å†µ.")]),t._v(" "),s("h5",{attrs:{id:"_4-åŠ¨æ€è·¯ç”±"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-åŠ¨æ€è·¯ç”±"}},[t._v("#")]),t._v(" 4.åŠ¨æ€è·¯ç”±")]),t._v(" "),s("p",[t._v("å¯ä»¥é€šè¿‡é…ç½®æ³¨å†Œè¡¨å‚æ•°, åœ¨ä¸ä¿®æ”¹æœåŠ¡ä»£ç çš„æƒ…å†µä¸‹, åŠ¨æ€æŒ‡å®šæœåŠ¡è®¿é—®çš„æœºå™¨.")]),t._v(" "),s("h5",{attrs:{id:"_5-åŠ¨æ€é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-åŠ¨æ€é…ç½®"}},[t._v("#")]),t._v(" 5.åŠ¨æ€é…ç½®")]),t._v(" "),s("p",[t._v("ä¸€èˆ¬å‘å¸ƒè®¢é˜…æœ‰ä¸¤ç§æ¨¡å¼: æ¨æ¨¡å¼å’Œæ‹‰æ¨¡å¼.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ¨æ¨¡å¼: â€‹")]),t._v("æœåŠ¡ç«¯ä¸»åŠ¨å°†æ•°æ®æ›´æ–°å‘é€ç»™æ‰€æœ‰è®¢é˜…çš„å®¢æˆ·ç«¯.")]),t._v(" "),s("li",[s("strong",[t._v("æ‹‰æ¨¡å¼: â€‹")]),t._v("å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚ä»¥å®šæ—¶è½®è¯¢çš„æ–¹å¼è·å–æœ€æ–°æ•°æ®.")])]),t._v(" "),s("p",[t._v("å‘å¸ƒè€…å°†æ•°æ®å‘å¸ƒåˆ° ZK çš„ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ä¸Š, è®¢é˜…è€…è¿›è¡Œæ•°æ®è®¢é˜…ä»¥åŠ¨æ€è·å–æ•°æ®, ä»è€Œå®ç°é…ç½®ä¿¡æ¯çš„é›†ä¸­å¼ç®¡ç†ä¸æ•°æ®çš„åŠ¨æ€æ›´æ–°.")]),t._v(" "),s("p",[t._v("ZK é‡‡å–äº†æ¨æ‹‰ç»“åˆçš„æ¨¡å¼. "),s("strong",[t._v("å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æ³¨å†Œè‡ªå·±éœ€è¦å…³æ³¨çš„èŠ‚ç‚¹, ä¸€æ—¦èŠ‚ç‚¹çš„æ•°æ®å‘ç”Ÿå˜æ›´, é‚£ä¹ˆæœåŠ¡ç«¯å°±ä¼šå‘ç›¸åº”çš„å®¢æˆ·ç«¯å‘é€ Watcher äº‹ä»¶é€šçŸ¥. å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªé€šçŸ¥ä¹‹å, éœ€è¦ä¸»åŠ¨åˆ°æœåŠ¡ç«¯è·å–æœ€æ–°çš„æ•°æ®")]),t._v(".")]),t._v(" "),s("p",[t._v("é…ç½®ä¸­å¿ƒçš„æ•°æ®æœ‰å‡ ä¸ªç‰¹ç‚¹:")]),t._v(" "),s("ul",[s("li",[t._v("æ•°æ®é‡è¾ƒå°.")]),t._v(" "),s("li",[t._v("æ•°æ®å†…å®¹å¯ä»¥åŠ¨æ€å˜åŒ–.")]),t._v(" "),s("li",[t._v("é›†ç¾¤å¤šä¸ªæœºå™¨å…±äº«é…ç½®ä¿¡æ¯.")])]),t._v(" "),s("p",[t._v("å¯ä»¥æŠŠæ•°æ®åº“çš„é…ç½®ä¿¡æ¯å­˜æ”¾åˆ° Zookeeper ä¸­, æœºå™¨åˆå§‹åŒ–çš„æ—¶å€™å»è¯»å–ä¸€æ¬¡æ•°æ®åº“é…ç½®ä¿¡æ¯, å¹¶åœ¨é…ç½®èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ªç›‘å¬æ•°æ®å˜æ›´çš„ Watcher ç›‘å¬. å¦‚æœé…ç½®ä¿¡æ¯æ”¹å˜, Zookeeper å¯ä»¥å‘ŠçŸ¥æœºå™¨é…ç½®ä¿¡æ¯å‘ç”Ÿå˜æ›´, æœºå™¨é‡æ–°æ‹‰å–é…ç½®ä¿¡æ¯å³å¯.")]),t._v(" "),s("h4",{attrs:{id:"åˆ†å¸ƒå¼é”ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼é”ğŸŒŸ"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼é”ğŸŒŸ")]),t._v(" "),s("p",[t._v("åˆ†å¸ƒå¼é”æ˜¯æ§åˆ¶åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´åŒæ­¥è®¿é—®å…±äº«èµ„æºçš„ä¸€ç§æ–¹å¼.")]),t._v(" "),s("h5",{attrs:{id:"_1-æ’ä»–é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ’ä»–é”"}},[t._v("#")]),t._v(" 1.æ’ä»–é”")]),t._v(" "),s("p",[t._v("æ’ä»–é”(Exclusive Locks, ç®€ç§° X é”), åˆç§°ä¸º"),s("strong",[t._v("å†™é”æˆ–ç‹¬å é”")]),t._v(". å¦‚æœäº‹åŠ¡ T1 å¯¹æ•°æ®å¯¹è±¡ O1 åŠ ä¸Šäº†æ’ä»–é”, é‚£ä¹ˆæ•´ä¸ªåŠ é”æœŸé—´, åªå…è®¸äº‹åŠ¡ T1 å¯¹ O1 è¿›è¡Œè¯»å–å’Œæ“ä½œ, å…¶ä»–ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å†å¯¹è¿™ä¸ªæ•°æ®å¯¹è±¡è¿›è¡Œè¯»å†™æ“ä½œ, ç›´åˆ°äº‹åŠ¡é‡Šæ”¾äº†æ’ä»–é”.")]),t._v(" "),s("p",[t._v("æ’ä»–é”çš„æ ¸å¿ƒæ˜¯å¦‚ä½•ä¿è¯å½“å‰æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªäº‹åŠ¡è·å¾—é”, å¹¶ä¸”é”è¢«é‡Šæ”¾å, æ‰€æœ‰æ­£åœ¨è·å¾—é”çš„äº‹åŠ¡éƒ½èƒ½è¢«é€šçŸ¥åˆ°.")]),t._v(" "),s("h6",{attrs:{id:"_1-å®šä¹‰é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®šä¹‰é”"}},[t._v("#")]),t._v(" (1)å®šä¹‰é”")]),t._v(" "),s("p",[t._v("ZK ä¸­é€šè¿‡"),s("strong",[t._v("æ•°æ®èŠ‚ç‚¹")]),t._v("æ¥è¡¨ç¤ºä¸€ä¸ªé”, ä¾‹å¦‚ /exclusive/lock èŠ‚ç‚¹å°±å¯ä»¥è¢«å®šä¹‰ä¸ºä¸€ä¸ªé”.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211120203357763-7638936.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"_2-è·å–é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è·å–é”"}},[t._v("#")]),t._v(" (2)è·å–é”")]),t._v(" "),s("p",[t._v("åœ¨éœ€è¦è·å–é”æ—¶, æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¼šè¯•å›¾è°ƒç”¨ "),s("strong",[t._v("create()")]),t._v(" æ¥å£, åœ¨ /exclusive èŠ‚ç‚¹ä¸‹åˆ›å»º"),s("strong",[t._v("ä¸´æ—¶å­èŠ‚ç‚¹")]),t._v(" /exclusive/lock. ZK ä¿è¯æ‰€æœ‰å®¢æˆ·ç«¯æœ€ç»ˆåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½"),s("strong",[t._v("åˆ›å»ºæˆåŠŸ")]),t._v(", å°±å¯ä»¥è®¤ä¸ºè¯¥å®¢æˆ·ç«¯è·å–äº†é”. å…¶ä»–æ²¡è·å–é”çš„å®¢æˆ·ç«¯ä¼šåœ¨ /exclusive èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ªå­èŠ‚ç‚¹å˜æ›´çš„ "),s("strong",[t._v("Watcher ç›‘å¬")]),t._v(", ä»¥ä¾¿å®æ—¶ç›‘å¬åˆ° lock èŠ‚ç‚¹çš„å˜æ›´æƒ…å†µ.")]),t._v(" "),s("h6",{attrs:{id:"_3-é‡Šæ”¾é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-é‡Šæ”¾é”"}},[t._v("#")]),t._v(" (3)é‡Šæ”¾é”")]),t._v(" "),s("p",[t._v("ç”±äº /exclusive/lock æ˜¯ä¸€ä¸ª**==ä¸´æ—¶èŠ‚ç‚¹==**, å› æ­¤åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹, éƒ½å¯èƒ½é‡Šæ”¾é”.")]),t._v(" "),s("ul",[s("li",[t._v("å½“å‰è·å–é”çš„å®¢æˆ·ç«¯æœºå™¨å‘ç”Ÿå®•æœº, é‚£ä¹ˆæ­¤ä¸´æ—¶èŠ‚ç‚¹å°±ä¼šè¢«ç§»é™¤.")]),t._v(" "),s("li",[t._v("æ­£å¸¸"),s("strong",[t._v("æ‰§è¡Œå®Œ")]),t._v("ä¸šåŠ¡é€»è¾‘å, å®¢æˆ·ç«¯ä¼šä¸»åŠ¨å°†è‡ªå·±åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹"),s("strong",[t._v("åˆ é™¤")]),t._v(".")])]),t._v(" "),s("p",[t._v("æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ç§»é™¤äº† /exclusive/lock èŠ‚ç‚¹, Zookeeper éƒ½ä¼šé€šçŸ¥æ‰€æœ‰åœ¨ /exclusive èŠ‚ç‚¹ä¸Šæ³¨å†Œäº†"),s("strong",[t._v("å­èŠ‚ç‚¹å˜æ›´")]),t._v(" Watcher ç›‘å¬çš„å®¢æˆ·ç«¯, å®¢æˆ·ç«¯æ”¶åˆ°é€šçŸ¥ä¹‹å, å°±ä¼šé‡æ–°å‘èµ·åˆ†å¸ƒå¼é”è·å–, å³"),s("strong",[t._v('é‡å¤ "è·å–é”"')]),t._v(" è¿‡ç¨‹.")]),t._v(" "),s("p",[t._v("æ•´ä¸ªæ’ä»–é”è·å–ä¸é‡Šæ”¾æµç¨‹å¦‚ä¸‹.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211120202211006-7638936.png",alt:"image-20211120202211006"}})]),t._v(" "),s("h5",{attrs:{id:"_2-å…±äº«é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å…±äº«é”"}},[t._v("#")]),t._v(" 2.å…±äº«é”")]),t._v(" "),s("p",[t._v("å…±äº«é”(Shared Locks, ç®€ç§° S é”), åˆç§°"),s("strong",[t._v("è¯»é”")]),t._v(". å¦‚æœäº‹åŠ¡ T1 å¯¹æ•°æ®å¯¹è±¡ O1 åŠ ä¸Šäº†"),s("strong",[t._v("å…±äº«é”")]),t._v(", é‚£ä¹ˆå½“å‰äº‹åŠ¡åªèƒ½å¯¹ O1 è¿›è¡Œ"),s("strong",[t._v("è¯»å–æ“ä½œ")]),t._v(", å…¶ä»–äº‹åŠ¡ä¹Ÿåªèƒ½å¯¹è¿™ä¸ªæ•°æ®å¯¹è±¡åŠ "),s("strong",[t._v("å…±äº«é”")]),t._v(", ç›´åˆ°è¯¥æ•°æ®å¯¹è±¡ä¸Šçš„"),s("strong",[t._v("æ‰€æœ‰å…±äº«é”éƒ½è¢«é‡Šæ”¾")]),t._v(".")]),t._v(" "),s("p",[t._v("å…±äº«é”ä¸æ’ä»–é”çš„æ ¹æœ¬åŒºåˆ«åœ¨äº, åŠ ä¸Šæ’ä»–é”å, æ•°æ®å¯¹è±¡åªå¯¹ä¸€ä¸ªäº‹åŠ¡å¯è§, è€ŒåŠ ä¸Šå…±äº«é”å, æ•°æ®å¯¹æ‰€æœ‰äº‹åŠ¡éƒ½å¯è§.")]),t._v(" "),s("h6",{attrs:{id:"_1-å®šä¹‰é”-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®šä¹‰é”-2"}},[t._v("#")]),t._v(" (1)å®šä¹‰é”")]),t._v(" "),s("p",[t._v("åŒæ ·é€šè¿‡ Zookeeper ä¸Šçš„æ•°æ®èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªé”, æ˜¯ä¸€ä¸ªç±»ä¼¼äº "),s("strong",[t._v("/shared/[Hostname]-è¯·æ±‚ç±»å‹-åºå·")]),t._v(" çš„"),s("strong",[t._v("ä¸´æ—¶é¡ºåºèŠ‚ç‚¹")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211120203629801-7638936.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"_2-è·å–é”-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è·å–é”-2"}},[t._v("#")]),t._v(" (2)è·å–é”")]),t._v(" "),s("p",[t._v("åœ¨éœ€è¦è·å–å…±äº«é”æ—¶, æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¼šåˆ° /shared è¿™ä¸ªèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ª**==ä¸´æ—¶é¡ºåºèŠ‚ç‚¹==**. å¦‚æœå½“å‰æ˜¯è¯»è¯·æ±‚, é‚£ä¹ˆå°±åˆ›å»ºä¾‹å¦‚ /shared/192.168.0.2-R-000000001 çš„èŠ‚ç‚¹; å¦‚æœæ˜¯å†™è¯·æ±‚, é‚£ä¹ˆå°±åˆ›å»ºä¾‹å¦‚ /shared/192.168.0.2-W-000000001 çš„èŠ‚ç‚¹.")]),t._v(" "),s("h6",{attrs:{id:"_3-åˆ¤æ–­è¯»å†™é¡ºåº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-åˆ¤æ–­è¯»å†™é¡ºåº"}},[t._v("#")]),t._v(" (3)åˆ¤æ–­è¯»å†™é¡ºåº")]),t._v(" "),s("p",[t._v("æ ¹æ®å…±äº«é”çš„å®šä¹‰, "),s("strong",[t._v("ä¸åŒçš„äº‹åŠ¡")]),t._v("éƒ½å¯ä»¥åŒæ—¶å¯¹åŒä¸€ä¸ªæ•°æ®å¯¹è±¡è¿›è¡Œ"),s("strong",[t._v("è¯»å–æ“ä½œ")]),t._v(", è€Œ"),s("strong",[t._v("æ›´æ–°æ“ä½œ")]),t._v("å¿…é¡»åœ¨å½“å‰æ²¡æœ‰ä»»ä½•äº‹åŠ¡è¿›è¡Œ"),s("strong",[t._v("è¯»å†™æ“ä½œ")]),t._v("çš„æƒ…å†µä¸‹è¿›è¡Œ. åŸºäºè¿™ä¸ªåŸåˆ™, é€šè¿‡ Zookeeper çš„èŠ‚ç‚¹å¯ä»¥ç¡®å®šåˆ†å¸ƒå¼è¯»å†™é¡ºåº, å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ä¸ªæ­¥éª¤:")]),t._v(" "),s("ul",[s("li",[t._v("åˆ›å»ºå®ŒèŠ‚ç‚¹å, è·å– /shared èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹, å¹¶å¯¹è¯¥èŠ‚ç‚¹æ³¨å†Œå­èŠ‚ç‚¹å˜æ›´çš„ Watcher ç›‘å¬.")]),t._v(" "),s("li",[t._v("ç¡®å®šè‡ªå·±çš„èŠ‚ç‚¹åºå·åœ¨æ‰€æœ‰å­èŠ‚ç‚¹çš„é¡ºåº.")]),t._v(" "),s("li",[t._v("å¯¹äº"),s("strong",[t._v("è¯»è¯·æ±‚")]),t._v(". å¦‚æœæ²¡æœ‰æ¯”è‡ªå·±åºå·å°çš„å­èŠ‚ç‚¹, æˆ–æ˜¯æ‰€æœ‰æ¯”è‡ªå·±åºå·å°çš„å­èŠ‚ç‚¹éƒ½æ˜¯"),s("strong",[t._v("è¯»è¯·æ±‚")]),t._v(", é‚£ä¹ˆè¡¨æ˜è‡ªå·±å·²ç»æˆåŠŸ"),s("strong",[t._v("è·å–åˆ°äº†å…±äº«é”")]),t._v(", åŒæ—¶å¼€å§‹æ‰§è¡Œè¯»å–é€»è¾‘; å¦‚æœæ¯”è‡ªå·±åºå·å°çš„å­èŠ‚ç‚¹ä¸­æœ‰"),s("strong",[t._v("å†™è¯·æ±‚")]),t._v(", é‚£ä¹ˆéœ€è¦è¿›å…¥ç­‰å¾…. å¯¹äº"),s("strong",[t._v("å†™è¯·æ±‚")]),t._v(". å¦‚æœè‡ªå·±ä¸æ˜¯åºå·æœ€å°çš„å­èŠ‚ç‚¹, å°±éœ€è¦è¿›å…¥ç­‰å¾….")]),t._v(" "),s("li",[t._v("æ¥æ”¶åˆ° Watcher é€šçŸ¥å, é‡å¤æ­¥éª¤ 1.")])]),t._v(" "),s("h6",{attrs:{id:"_4-é‡Šæ”¾é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-é‡Šæ”¾é”"}},[t._v("#")]),t._v(" (4)é‡Šæ”¾é”")]),t._v(" "),s("p",[t._v("é‡Šæ”¾é”çš„é€»è¾‘å’Œæ’ä»–é”æ˜¯ä¸€è‡´çš„. æ•´ä¸ªå…±äº«é”çš„è·å–ä¸é‡Šæ”¾æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211219124304328-7638936.png",alt:"image-20211219124304328"}})]),t._v(" "),s("h5",{attrs:{id:"_3-ç¾Šç¾¤æ•ˆåº”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¾Šç¾¤æ•ˆåº”"}},[t._v("#")]),t._v(" 3.ç¾Šç¾¤æ•ˆåº”")]),t._v(" "),s("p",[t._v('ä¸Šè¿°çš„å…±äº«é”è¿‡ç¨‹åŸºæœ¬èƒ½æ»¡è¶³ä¸€èˆ¬åˆ†å¸ƒå¼é›†ç¾¤ç«äº‰é”çš„éœ€æ±‚(ä¸€èˆ¬ 10 å°æœºå™¨ä»¥å†…). ä½†å¦‚æœæœºå™¨è§„æ¨¡æ‰©å¤§å, å°±ä¼šå­˜åœ¨é—®é¢˜. è¿™é‡Œé‡ç‚¹çœ‹çœ‹ "åˆ¤æ–­è¯»å†™é¡ºåº" çš„è¿‡ç¨‹. ä¸‹é¢æ˜¯ä¸€ä¸ªå…±äº«é”çš„å®ä¾‹.')]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211219125047199-7638936.png",alt:""}})]),t._v(" "),s("p",[t._v("åˆ†æä¸€ä¸‹ä¸Šé¢çš„æƒ…å†µ.")]),t._v(" "),s("ul",[s("li",[t._v("host1 è¿™å°æœºå™¨é¦–å…ˆè¿›è¡Œè¯»æ“ä½œ, å®Œæˆè¯»æ“ä½œåå°†èŠ‚ç‚¹ host1-R-000000001 "),s("strong",[t._v("åˆ é™¤")]),t._v(".")]),t._v(" "),s("li",[t._v("å‰©ä¸‹çš„ 4 å°æœºå™¨"),s("strong",[t._v("éƒ½æ”¶åˆ°äº†è¿™ä¸ªèŠ‚ç‚¹è¢«åˆ é™¤çš„é€šçŸ¥")]),t._v(". ç„¶å"),s("strong",[t._v("é‡æ–°ä» /shared èŠ‚ç‚¹ä¸Šè·å–ä¸€ä»½æ–°çš„å­èŠ‚ç‚¹åˆ—è¡¨")]),t._v(".")]),t._v(" "),s("li",[t._v("æ¯ä¸ªæœºå™¨åˆ¤æ–­è‡ªå·±çš„è¯»å†™é¡ºåº. å…¶ä¸­ host2 è¿™ä¸ªæœºå™¨å‘ç°è‡ªå·±å·²ç»æ˜¯åºå·æœ€å°çš„æœºå™¨äº†, äºæ˜¯å¼€å§‹è¿›è¡Œå†™æ“ä½œ. å…¶ä»–æœºå™¨å‘ç°æ²¡æœ‰è½®åˆ°è‡ªå·±è¿›è¡Œè¯»æˆ–å†™æ“ä½œ, äºæ˜¯ç»§ç»­ç­‰å¾….")]),t._v(" "),s("li",[t._v("é‡å¤ä¸Šè¿°æµç¨‹...")])]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°, host1 è¿™ä¸ªå®¢æˆ·ç«¯åœ¨ç§»é™¤è‡ªå·±çš„å…±äº«é”ä¹‹å, Zookeeper å‘é€äº†**==å­èŠ‚ç‚¹å˜æ›´ Watcher é€šçŸ¥ç»™æ‰€æœ‰æœºå™¨==**, è¿™ä¸ªé€šçŸ¥å®é™…ä¸Šä»…å¯¹ host2 æœºå™¨äº§ç”Ÿäº†å®é™…çš„å½±å“, å¯¹å…¶ä»–çš„å…¨éƒ¨æœºå™¨éƒ½æ²¡æœ‰ä»»ä½•ä½œç”¨.")]),t._v(" "),s("p",[t._v("ä¸Šè¿°è¿‡ç¨‹å¯ä»¥çœ‹åˆ°, åœ¨æ•´ä¸ªåˆ†å¸ƒå¼é”çš„ç«äº‰è¿‡ç¨‹ä¸­, å¤§é‡çš„"),s("strong",[t._v('â€‹ "Watcher é€šçŸ¥" å’Œ "å­ç»“ç‚¹åˆ—è¡¨è·å–"')]),t._v(" ä¸¤ä¸ªæ“ä½œé‡å¤è¿›è¡Œ. ä¸”å¤§å¤šæ•°è¿è¡Œçš„ç»“æœéƒ½æ˜¯åˆ¤æ–­å‡ºè‡ªå·±å¹¶éæ˜¯åºå·æœ€å°çš„ç»“ç‚¹, ä»è€Œç»§ç»­ç­‰å¾…ä¸‹ä¸€è½®é€šçŸ¥. "),s("strong",[t._v("å¦‚æœé›†ç¾¤è§„æ¨¡æ¯”è¾ƒå¤§, å°±ä¼šå¯¹ Zookeeper æœåŠ¡å™¨é€ æˆå·¨å¤§çš„æ€§èƒ½å½±å“å’Œç½‘ç»œå†²å‡»; è€Œä¸”å¦‚æœåŒä¸€æ—¶åˆ»æœ‰å¤šä¸ªç»“ç‚¹å¯¹åº”çš„å®¢æˆ·ç«¯å®Œæˆäº‹åŠ¡æˆ–æ˜¯äº‹åŠ¡ä¸­æ–­å¼•èµ·ç»“ç‚¹æ¶ˆå¤±, Zookeeper æœåŠ¡å™¨å°±ä¼šåœ¨çŸ­æ—¶é—´å†…å‘å…¶ä½™å®¢æˆ·ç«¯å‘é€å¤§é‡çš„äº‹ä»¶é€šçŸ¥")]),t._v(", è¿™å°±æ˜¯ "),s("strong",[t._v('"'),s("strong",[t._v("â€‹")]),t._v("==ç¾Šç¾¤æ•ˆåº”=="),s("strong",[t._v("â€‹")]),t._v('"')]),t._v(".")]),t._v(" "),s("p",[t._v("ä¸Šè¿°çš„ Zookeeper åˆ†å¸ƒå¼å…±äº«é”çš„å®ç°ä¸­å‡ºç°ç¾Šç¾¤æ•ˆåº”çš„æ ¹æºåœ¨äºæ²¡æœ‰æ‰¾å‡†å®¢æˆ·ç«¯çœŸæ­£çš„å…³æ³¨ç‚¹. å‰è¿°çš„åˆ†å¸ƒå¼é”ç«äº‰è¿‡ç¨‹çš„æ ¸å¿ƒé€»è¾‘åœ¨äº, åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯æ‰€æœ‰å­èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„. å› æ­¤å¾ˆå®¹æ˜“æƒ³åˆ°æ¯ä¸ªç»“ç‚¹å¯¹åº”çš„å®¢æˆ·ç«¯å…¶å®åªéœ€è¦å…³æ³¨æ¯”è‡ªå·±åºå·å°çš„é‚£ä¸ªç›¸å…³ç»“ç‚¹çš„å˜æ›´æƒ…å†µå°±å¯ä»¥äº†, è€Œä¸éœ€è¦å…³æ³¨å…¨å±€çš„å­åˆ—è¡¨å˜æ›´æƒ…å†µ.")]),t._v(" "),s("h5",{attrs:{id:"_4-æ”¹è¿›åˆ†å¸ƒå¼é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ”¹è¿›åˆ†å¸ƒå¼é”"}},[t._v("#")]),t._v(" 4.æ”¹è¿›åˆ†å¸ƒå¼é”")]),t._v(" "),s("p",[t._v("å‰è¿°çš„å…±äº«é”å®ç°æ€è·¯æ˜¯å¯¹çš„, è¿™é‡Œçš„æ”¹è¿›ä¸»è¦åœ¨äº: "),s("strong",[t._v("==æ¯ä¸ªé”ç«äº‰è€…, åªéœ€è¦å…³æ³¨ /shared ç»“ç‚¹ä¸‹åºå·æ¯”è‡ªå·±å°çš„é‚£ä¸ªç»“ç‚¹æ˜¯å¦å­˜åœ¨å³å¯==")]),t._v(". å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211219131144732-7638936.png",alt:"image-20211219131144732"}})]),t._v(" "),s("p",[t._v("å…·ä½“æ­¥éª¤å¦‚ä¸‹:")]),t._v(" "),s("ol",[s("li",[t._v('å®¢æˆ·ç«¯è°ƒç”¨ create() æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸ "/shared/[Hostname]-è¯·æ±‚ç±»å‹-åºå·" çš„ä¸´æ—¶é¡ºåºç»“ç‚¹.')]),t._v(" "),s("li",[t._v("å®¢æˆ·ç«¯è°ƒç”¨ getChildren() æ¥å£æ¥è·å–æ‰€æœ‰å·²ç»åˆ›å»ºçš„å­ç»“ç‚¹åˆ—è¡¨. æ³¨æ„å¯¹æ¯”ä¹‹å‰çš„å®ç°: è¿™é‡Œ"),s("strong",[t._v("ä¸éœ€è¦æ³¨å†Œä»»ä½• Watcher")]),t._v(".")]),t._v(" "),s("li",[t._v("å¦‚æœæ— æ³•è·å–å…±äº«é”, é‚£ä¹ˆå°±è°ƒç”¨ exist() æ¥"),s("strong",[t._v("å‘æ¯”è‡ªå·±å°çš„é‚£ä¸ªç»“ç‚¹æ³¨å†Œ Watcher")]),t._v('. æ³¨æ„: è¿™é‡Œ "æ¯”è‡ªå·±å°çš„ç»“ç‚¹" å…·ä½“å¾—çœ‹æ˜¯è¯»è¯·æ±‚è¿˜æ˜¯å†™è¯·æ±‚.')])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è¯»è¯·æ±‚: å‘æ¯”è‡ªå·±åºå·å°çš„æœ€åä¸€ä¸ªå†™è¯·æ±‚ç»“ç‚¹æ³¨å†Œ Watcher ç›‘å¬.")])]),t._v(" "),s("li",[s("strong",[t._v("å†™è¯·æ±‚: å‘æ¯”è‡ªå·±åºå·å°çš„æœ€åä¸€ä¸ªç»“ç‚¹æ³¨å†Œ Watcher ç›‘å¬.")])])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("ç­‰å¾… Watcher é€šçŸ¥, ç»§ç»­è¿›å…¥æ­¥éª¤ 2.")])]),t._v(" "),s("p",[t._v("è¿™ä¸ªæ”¹è¿›è¿‡ç¨‹å…¶å®å°±æ˜¯å°½é‡å»"),s("strong",[t._v("ç¼©å°é”")]),t._v("çš„èŒƒå›´. å…·ä½“é€‰å“ªç§å®ç°å¯ä»¥æ ¹æ®"),s("strong",[t._v("å…·ä½“çš„åœºæ™¯é€‰æ‹©")]),t._v(". åœ¨é›†ç¾¤è§„æ¨¡ä¸å¤§, ç½‘ç»œèµ„æºä¸°å¯Œçš„æƒ…å†µä¸‹, é‡‡ç”¨ç¬¬ä¸€ç§å®ç°æ˜¯ç®€å•å®ç”¨çš„é€‰æ‹©; å¦‚æœé›†ç¾¤è¾¾åˆ°ä¸€å®šè§„æ¨¡, ä¸”å¸Œæœ›èƒ½ç²¾ç»†åŒ–çš„æ§åˆ¶åˆ†å¸ƒå¼é”, é‚£å¯ä»¥é‡‡ç”¨æ”¹è¿›ç‰ˆçš„åˆ†å¸ƒå¼é”å®ç°.")]),t._v(" "),s("h4",{attrs:{id:"æ¡†æ¶ä¸ç³»ç»Ÿåº”ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¡†æ¶ä¸ç³»ç»Ÿåº”ç”¨"}},[t._v("#")]),t._v(" æ¡†æ¶ä¸ç³»ç»Ÿåº”ç”¨")]),t._v(" "),s("p",[s("strong",[t._v("(1) Hadoop")])]),t._v(" "),s("p",[t._v("Hadoop åˆ©ç”¨ Zookeeper å®ç° HA(High Availability).")]),t._v(" "),s("p",[s("strong",[t._v("(2) HBase")])]),t._v(" "),s("p",[t._v("HBase åˆ©ç”¨ Zookeeper å®ç°æ•´ä¸ªç³»ç»Ÿçš„åˆ†å¸ƒå¼åè°ƒå·¥ä½œ.")]),t._v(" "),s("p",[s("strong",[t._v("(3) Kafka")])]),t._v(" "),s("p",[t._v("Kafka ä½¿ç”¨ Zookeeper ä½œä¸ºæ³¨å†Œç³»ç»Ÿæ¥å¯¹æ•´ä¸ªé›†ç¾¤çš„ "),s("strong",[t._v("Broker æœåŠ¡å™¨")]),t._v('è¿›è¡Œç®¡ç†. åœ¨ Zookeeper ä¸Šä¼šæœ‰ä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿›è¡Œ Broker æœåŠ¡å™¨åˆ—è¡¨è®°å½•çš„ç»“ç‚¹(è®°ä¸º Broker ç»“ç‚¹), å…¶è·¯å¾„ä¸º "/brokers/ids". æ¯ä¸ª Broker æœåŠ¡å™¨åœ¨å¯åŠ¨æ—¶, éƒ½ä¼šåˆ° Zookeeper ä¸Šè¿›è¡Œæ³¨å†Œ, å³åˆ° Broker ç»“ç‚¹ä¸‹åˆ›å»ºå±äºè‡ªå·±çš„ç»“ç‚¹, å…¶ç»“ç‚¹è·¯å¾„ä¸º "/brokers/ids/[0-N]".')]),t._v(" "),s("p",[t._v('åœ¨ Kafka ä¸­, ä½¿ç”¨ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æ•°å­—(å¯ç§°ä¸º Broker ID)æ¥ä»£è¡¨æ¯ä¸€ä¸ª Broker æœåŠ¡å™¨, ä¸åŒçš„ Broker å¿…é¡»ä½¿ç”¨ä¸åŒçš„  Broker ID è¿›è¡Œæ³¨å†Œ, å¦‚ "/brokers/ids/1" å’Œ "/brokers/ids/2" åˆ†åˆ«ä»£è¡¨äº†ä¸¤ä¸ª Broker æœåŠ¡å™¨. åˆ›å»ºå®Œ Broker ç»“ç‚¹å, æ¯ä¸ª Broker ä¼šå°†è‡ªå·±çš„ IP åœ°å€å’Œç«¯å£ä¿¡æ¯å†™å…¥åˆ°è¯¥ç»“ç‚¹ä¸‹å».')]),t._v(" "),s("p",[t._v("Broker åˆ›å»ºçš„ç»“ç‚¹æ˜¯ä¸€ä¸ªä¸´æ—¶ç»“ç‚¹, ä¸€æ—¦è¿™ä¸ª Broker æœåŠ¡å™¨å®•æœºæˆ–è€…ä¸‹çº¿, å¯¹åº”çš„ Zookeeper ç»“ç‚¹ä¹Ÿä¼šåˆ é™¤. å› æ­¤å¯ä»¥é€šè¿‡ Zookeeper ä¸Š Broker ç»“ç‚¹çš„å˜åŒ–æƒ…å†µæ¥åŠ¨æ€è¡¨å¾ Broker æœåŠ¡å™¨çš„å¯ç”¨æ€§.")]),t._v(" "),s("p",[t._v("é™¤äº† Broker ä¹‹å¤–, Topic æ³¨å†Œä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘.")]),t._v(" "),s("p",[s("strong",[t._v("(4) Dubbo")])]),t._v(" "),s("p",[s("strong",[t._v("Zookeeper ä¸€ä¸ªæœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ç”¨äºæ‹…ä»»æœåŠ¡ç”Ÿäº§è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…çš„æ³¨å†Œä¸­å¿ƒ(æä¾›å‘å¸ƒè®¢é˜…æœåŠ¡). â€‹")]),t._v("â€‹"),s("strong",[s("strong",[t._v("æœåŠ¡ç”Ÿäº§è€…å°†è‡ªå·±æä¾›çš„æœåŠ¡æ³¨å†Œåˆ° Zookeeper ä¸­å¿ƒ, æœåŠ¡çš„æ¶ˆè´¹è€…åœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„æ—¶å€™å…ˆåˆ° Zookeeper ä¸­æŸ¥æ‰¾æœåŠ¡, è·å–åˆ°æœåŠ¡ç”Ÿäº§è€…çš„è¯¦ç»†ä¿¡æ¯ä¹‹å, å†å»è°ƒç”¨æœåŠ¡ç”Ÿäº§è€…çš„å†…å®¹ä¸æ•°æ®. åœ¨ Dubbo ä¸­ Zookeeper å°±æ‹…ä»»äº†")])]),t._v("â€‹"),s("strong",[t._v("æ³¨å†Œä¸­å¿ƒ")]),t._v("çš„è§’è‰².")]),t._v(" "),s("p",[t._v("åˆ†å¸ƒå¼æœåŠ¡èŠ‚ç‚¹å¾ˆå¤š, ä¸å¯èƒ½åœ¨å®¢æˆ·ç«¯æ‰‹åŠ¨é…ç½®, è¿™å°±éœ€è¦ä¸€ä¸ª"),s("strong",[t._v("ä¸­é—´æœåŠ¡")]),t._v(", ä¸“é—¨ç”¨äº"),s("strong",[t._v("å¸®åŠ©å®¢æˆ·ç«¯å‘ç°æœåŠ¡èŠ‚ç‚¹")]),t._v(", å°±æ˜¯"),s("strong",[t._v("æœåŠ¡å‘ç°")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220107212259512-7638936.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¸€ä¸ªå®Œæ•´çš„æ³¨å†Œä¸­å¿ƒæ¶µç›–ä»¥ä¸‹åŠŸèƒ½ç‰¹æ€§:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æœåŠ¡æ³¨å†Œ: â€‹")]),t._v("â€‹"),s("strong",[s("strong",[t._v("æœåŠ¡ç«¯")])]),t._v("â€‹"),s("strong",[t._v("ä¸Šçº¿æ—¶")]),t._v("å°†è‡ª"),s("strong",[t._v("æä¾›çš„æœåŠ¡æäº¤ç»™æ³¨å†Œä¸­å¿ƒ")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("æœåŠ¡æ³¨é”€: â€‹")]),t._v("â€‹"),s("strong",[s("strong",[t._v("é€šçŸ¥å®¢æˆ·ç«¯æœåŠ¡ç«¯")])]),t._v("â€‹"),s("strong",[t._v("ä¸‹çº¿")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("æœåŠ¡è®¢é˜…")]),t._v(": åŠ¨æ€å®æ—¶æ¥æ”¶æœåŠ¡"),s("strong",[t._v("å˜æ›´æ¶ˆæ¯")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("å¯é æ€§")]),t._v(": æ³¨å†ŒæœåŠ¡æœ¬èº«æ˜¯"),s("strong",[t._v("é›†ç¾¤")]),t._v("çš„, æ•°æ®"),s("strong",[t._v("å†—ä½™å­˜å‚¨")]),t._v(". é¿å…å•ç‚¹æ•…éšœ, åŠæ•°æ®ä¸¢å¤±.")]),t._v(" "),s("li",[s("strong",[t._v("å®¹é”™æ€§")]),t._v(": å½“æœåŠ¡æä¾›è€…å‡ºç°å®•æœº, æ–­ç”µç­‰æç«¯æƒ…å†µæ—¶, æ³¨å†Œä¸­å¿ƒèƒ½å¤Ÿ"),s("strong",[t._v("åŠ¨æ€æ„ŸçŸ¥")]),t._v("å¹¶é€šçŸ¥å®¢æˆ·ç«¯æœåŠ¡æä¾›è€…çš„çŠ¶æ€.")])]),t._v(" "),s("p",[t._v("Dubbo åŸºäº Zookeeper å®ç°æœåŠ¡"),s("strong",[t._v("æ³¨å†Œä¸­å¿ƒ")]),t._v(". æ‰€æœ‰æœåŠ¡æä¾›è€…åœ¨ Zookeeper ä¸Šåˆ›å»ºçš„ç»“ç‚¹éƒ½æ˜¯"),s("strong",[t._v("ä¸´æ—¶ç»“ç‚¹")]),t._v(", è¿™åˆ©ç”¨äº†ä¸´æ—¶ç»“ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç›¸å…³çš„ç‰¹æ€§, å¯ä»¥è¡¨æ˜æœåŠ¡æä¾›è€…çš„åœ¨çº¿çŠ¶æ€.")]),t._v(" "),s("p",[s("strong",[t._v("Dubbo æ³¨å†Œä¸­å¿ƒå­˜å‚¨ç»“æ„")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220107214039226-7638936.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("èŠ‚ç‚¹è¯´æ˜")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("ç±»åˆ«")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("å±æ€§")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("è¯´æ˜")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Root")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æŒä¹…èŠ‚ç‚¹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v('æ ¹èŠ‚ç‚¹åç§°, é»˜è®¤æ˜¯ "dubbo"')])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Service")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æŒä¹…èŠ‚ç‚¹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æœåŠ¡åç§°")]),t._v(", å®Œæ•´çš„æœåŠ¡ç±»å")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("type")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æŒä¹…èŠ‚ç‚¹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¯é€‰å€¼: "),s("strong",[t._v("providers")]),t._v("(æä¾›è€…), "),s("strong",[t._v("consumers")]),t._v("(æ¶ˆè´¹è€…), "),s("strong",[t._v("configurators")]),t._v("(åŠ¨æ€é…ç½®), "),s("strong",[t._v("routers")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("URL")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("ä¸´æ—¶èŠ‚ç‚¹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("URL åç§°: åŒ…å«æœåŠ¡æä¾›è€…çš„ IP ç«¯å£åŠé…ç½®ç­‰ä¿¡æ¯.")])])])]),t._v(" "),s("p",[s("strong",[t._v("æµç¨‹è¯´æ˜")])]),t._v(" "),s("ol",[s("li",[t._v("æœåŠ¡"),s("strong",[t._v("æä¾›è€…")]),t._v("å¯åŠ¨æ—¶: å‘ /dubbo/com.foo.BarService/providers ç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„ "),s("strong",[t._v("URL åœ°å€")]),t._v(".")]),t._v(" "),s("li",[t._v("æœåŠ¡"),s("strong",[t._v("æ¶ˆè´¹è€…")]),t._v("å¯åŠ¨æ—¶: "),s("strong",[t._v("è®¢é˜…")]),t._v(" /dubbo/com.foo.BarService/providers ç›®å½•ä¸‹çš„æä¾›è€… "),s("strong",[t._v("URL åœ°å€")]),t._v(". å¹¶å‘ /dubbo/com.foo.BarService/consumers ç›®å½•ä¸‹å†™å…¥"),s("strong",[t._v("è‡ªå·±çš„ URL åœ°å€")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("ç›‘æ§ä¸­å¿ƒ")]),t._v("å¯åŠ¨æ—¶: è®¢é˜… /dubbo/com.foo.BarService ç›®å½•ä¸‹çš„"),s("strong",[t._v("æ‰€æœ‰æä¾›è€…å’Œæ¶ˆè´¹è€… URL åœ°å€")]),t._v(".")])]),t._v(" "),s("p",[s("strong",[t._v("æ—¶ä»£å˜äº†, ç°åœ¨ Dubbo å·²ç»é›†æˆ â€‹")]),t._v("â€‹**==Nacos=="),s("strong",[t._v("â€‹")]),t._v("â€‹ ä½œä¸ºæ³¨å†Œä¸­å¿ƒ**.")]),t._v(" "),s("h4",{attrs:{id:"åº”ç”¨å®ä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨å®ä¾‹"}},[t._v("#")]),t._v(" åº”ç”¨å®ä¾‹")]),t._v(" "),s("h5",{attrs:{id:"_1-åˆ†å¸ƒå¼é›†ç¾¤ç›‘æ§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åˆ†å¸ƒå¼é›†ç¾¤ç›‘æ§"}},[t._v("#")]),t._v(" 1.åˆ†å¸ƒå¼é›†ç¾¤ç›‘æ§")]),t._v(" "),s("p",[t._v("å®ç°å¯¹é›†ç¾¤ä¸­å„ä¸ªæœºå™¨çš„çŠ¶æ€ç®¡ç†.")]),t._v(" "),s("h6",{attrs:{id:"_1-åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†éœ€æ±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†éœ€æ±‚"}},[t._v("#")]),t._v(" (1)åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†éœ€æ±‚")]),t._v(" "),s("ol",[s("li",[t._v("ä¸»åŠ¨æŸ¥çœ‹çº¿ä¸ŠæœåŠ¡èŠ‚ç‚¹æ•°é‡.")]),t._v(" "),s("li",[t._v("æŸ¥çœ‹æœåŠ¡èŠ‚ç‚¹"),s("strong",[t._v("èµ„æºä½¿ç”¨æƒ…å†µ")]),t._v(".")]),t._v(" "),s("li",[t._v("æœåŠ¡"),s("strong",[t._v("ç¦»çº¿")]),t._v("é€šçŸ¥.")]),t._v(" "),s("li",[t._v("æœåŠ¡èµ„æº(CPU, å†…å­˜, ç¡¬ç›˜)"),s("strong",[t._v("è¶…å‡ºé˜€å€¼")]),t._v("é€šçŸ¥.")])]),t._v(" "),s("h6",{attrs:{id:"_2-æ¶æ„è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ¶æ„è®¾è®¡"}},[t._v("#")]),t._v(" (2)æ¶æ„è®¾è®¡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220104214527238-7638936.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("èŠ‚ç‚¹ç»“æ„: â€‹")]),t._v("æœåŠ¡å™¨å½“åšæ ¹ç»“ç‚¹:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("manger    // æ ¹èŠ‚ç‚¹\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å…¶ä»–æœåŠ¡ç»“ç‚¹ä¸º"),s("strong",[t._v("ä¸´æ—¶åºå·ç»“ç‚¹")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-txt line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-txt"}},[s("code",[t._v("server00001 :<json> \t\t// æœåŠ¡èŠ‚ç‚¹ 1\nserver00002 :<json> \t\t// æœåŠ¡èŠ‚ç‚¹ 2\nserver....n :<json>\t        // æœåŠ¡èŠ‚ç‚¹ n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("strong",[t._v("æœåŠ¡å™¨èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯")]),t._v(":")]),t._v(" "),s("ol",[s("li",[t._v("IP")]),t._v(" "),s("li",[t._v("CPU")]),t._v(" "),s("li",[t._v("memory")]),t._v(" "),s("li",[t._v("disk")])]),t._v(" "),s("h6",{attrs:{id:"_3-åŠŸèƒ½å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-åŠŸèƒ½å®ç°"}},[t._v("#")]),t._v(" (3)åŠŸèƒ½å®ç°")]),t._v(" "),s("p",[s("strong",[t._v("æ•°æ®ç”Ÿæˆä¸ä¸ŠæŠ¥: â€‹")]),t._v("æœåŠ¡å™¨ä¸Šçº¿,åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹. å®šæ—¶å˜æ›´èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯.")]),t._v(" "),s("p",[s("strong",[t._v("ä¸»åŠ¨æŸ¥è¯¢: â€‹")]),t._v("å®æ—¶æŸ¥è¯¢ Zookeeper è·å–é›†ç¾¤èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯.")]),t._v(" "),s("p",[s("strong",[t._v("è¢«åŠ¨é€šçŸ¥: â€‹")]),t._v("ç›‘å¬æ ¹èŠ‚ç‚¹ä¸‹å­èŠ‚ç‚¹çš„å˜åŒ–æƒ…å†µ,å¦‚æœ CPU ç­‰ç¡¬ä»¶èµ„æºä½äºè­¦å‘Šä½åˆ™å‘å‡ºè­¦æŠ¥.")]),t._v(" "),s("p",[t._v("å®¢æˆ·ç«¯:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Agent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.149:2181"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZkClient")]),t._v(" zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Agent")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" rootPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/manger"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" servicePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rootPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" nodePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" stateThread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OsBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("premain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instrumentation")]),t._v(" instrumentation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Agent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n            instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–è¿æ¥")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºå®¢æˆ·ç«¯")]),t._v("\n        zkClient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZkClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zkè¿æ¥æˆåŠŸ"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºæ ¹ç»“ç‚¹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildRoot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç»“ç‚¹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServerNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šæ—¶ä»»åŠ¡å®æ—¶æ›´æ–°")]),t._v("\n        stateThread "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateServerNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zk_stateThread"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        stateThread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDaemon")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        stateThread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„å»ºæ ¹èŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildRoot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPersistent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”ŸæˆæœåŠ¡èŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServerNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        nodePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEphemeralSequential")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("servicePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOsInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ›å»ºèŠ‚ç‚¹:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" nodePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬æœåŠ¡èŠ‚ç‚¹çŠ¶æ€æ”¹å˜")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateServerNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nodePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOsInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°æœåŠ¡èŠ‚ç‚¹çŠ¶æ€")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOsInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OsBean")]),t._v(" bean "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OsBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastUpdateTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ip "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalIp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cpu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CPUMonitorCalc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProcessCpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryUsage")]),t._v(" memoryUsag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ManagementFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMemoryMXBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeapMemoryUsage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("usableMemorySize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" memoryUsag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("usableMemorySize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" memoryUsag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectMapper")]),t._v(" mapper "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectMapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeValueAsString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JsonProcessingException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°ç»“ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            zkClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEphemeral")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æœ¬åœ°IPåœ°å€")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalIp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),t._v(" addr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            addr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetAddress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocalHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnknownHostException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHostAddress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br")])]),s("p",[t._v("â€")]),t._v(" "),s("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[t._v("ã€Šä»Paxosåˆ°Zookeeper-åˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µã€‹")])])])}),[],!1,null,null,null);s.default=e.exports}}]);