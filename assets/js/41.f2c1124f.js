(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{356:function(t,_,v){"use strict";v.r(_);var e=v(7),s=Object(e.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_5-应用层"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-应用层"}},[t._v("#")]),t._v(" 5.应用层")]),t._v(" "),_("h4",{attrs:{id:"应用层协议"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#应用层协议"}},[t._v("#")]),t._v(" 应用层协议")]),t._v(" "),_("p",[t._v("每个应用层协议都是为了解决"),_("strong",[t._v("某一类应用问题")]),t._v(".")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("应用")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("应用层协议")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("端口号")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("传输层协议")]),t._v(" "),_("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("域名解析")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("DNS")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("53")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("UDP/TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("长度超过 512 字节时使用 TCP")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("动态主机配置协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("DHCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("67/68")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("UDP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("文件传送协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("FTP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("20/21")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("控制连接 21, 数据连接 20")])])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("远程终端协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("TELNET")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("23")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("TCP")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("超文本传送协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("HTTP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("80")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("简单邮件传送协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("SMTP")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("25")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("邮件读取协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("POP3")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("110")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("网际报文存取协议")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("IMAP")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[t._v("143")]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}},[_("strong",[t._v("TCP")])]),t._v(" "),_("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),_("p",[_("strong",[t._v("使用 UDP/TCP 协议的应用层协议")]),t._v(":")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220424224651259.png",alt:"",title:"基于UDP与TCP的应用层协议"}})]),t._v(" "),_("h4",{attrs:{id:"域名系统dns🌟"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#域名系统dns🌟"}},[t._v("#")]),t._v(" 域名系统DNS🌟")]),t._v(" "),_("h5",{attrs:{id:"_1-域名及其结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-域名及其结构"}},[t._v("#")]),t._v(" 1.域名及其结构")]),t._v(" "),_("p",[t._v("互联网采用"),_("strong",[t._v("层次结构的命名树")]),t._v("作为主机的名字, 并使用"),_("strong",[t._v("分布式的域名系统 DNS")]),t._v(". 任何一个连接在互联网上的主机或路由器, 都有一个唯一的层次结构的名字, 即"),_("strong",[t._v("域名")]),t._v(". 域名的结构由"),_("strong",[t._v("标号序列")]),t._v("组成, 各标号之间用点隔开.")]),t._v(" "),_("div",{staticClass:"language-http line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-http"}},[_("code",[t._v("….三级域名.二级域名.顶级域名\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("各标号分别代表不同"),_("strong",[t._v("级别")]),t._v("的域名. 注意顶级域名在最后, 如 .cn, .com, .edu 等.")]),t._v(" "),_("p",[_("strong",[t._v("互联网域名空间")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220430222620630.png",alt:"",title:"互联网域名空间"}})]),t._v(" "),_("h5",{attrs:{id:"_2-域名服务器"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-域名服务器"}},[t._v("#")]),t._v(" 2.域名服务器")]),t._v(" "),_("p",[t._v("需要对域名进行"),_("strong",[t._v("解析")]),t._v("才能获取到对应服务的 IP 地址进行通信, 域名到 IP 地址的"),_("strong",[t._v("解析")]),t._v("是由"),_("strong",[t._v("若干个域名服务器")]),t._v("程序完成的, 域名服务器程序在"),_("strong",[t._v("专设的结点")]),t._v("上运行, 这称为"),_("strong",[t._v("域名服务器(DNS 服务器)")]),t._v(" .")]),t._v(" "),_("p",[_("strong",[t._v("树状")]),t._v("结构的 "),_("strong",[t._v("DNS 域名服务器")]),t._v(".")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220429234705738.png",alt:"",title:"域名服务器结构"}})]),t._v(" "),_("p",[_("strong",[t._v("权限域名服务器")]),t._v(": 负责一个"),_("strong",[t._v("区")]),t._v("的域名服务器. 当一个权限域名服务器还不能给出最后的查询回答时, 就会告诉发出查询请求的 DNS 客户端"),_("strong",[t._v("下一步应当找哪一个权限域名服务器")]),t._v(".")]),t._v(" "),_("p",[_("strong",[t._v("本地域名服务器")]),t._v(": 当一个"),_("strong",[t._v("主机")]),t._v("发出 DNS 查询请求时, 这个查询请求报文就"),_("strong",[t._v("发送给本地域名服务器")]),t._v(". 每一个互联网服务提供者 ISP, 或一个"),_("strong",[t._v("大学")]),t._v(", 甚至一个大学里的系, 都可以拥有一个本地域名服务器, 这种域名服务器有时也称为"),_("strong",[t._v("默认域名服务器")]),t._v(".")]),t._v(" "),_("h5",{attrs:{id:"_3-域名解析过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-域名解析过程"}},[t._v("#")]),t._v(" 3.域名解析过程")]),t._v(" "),_("p",[t._v("域名解析过程如下:")]),t._v(" "),_("ol",[_("li",[t._v("找本地缓存.")]),t._v(" "),_("li",[t._v("找本机的 hosts 文件.")]),t._v(" "),_("li",[t._v("找 DNS 服务器.")])]),t._v(" "),_("p",[_("strong",[t._v("主机向本地域名服务器的查询一般都是采用")]),t._v("​"),_("mark",[_("strong",[t._v("递归查询")])]),t._v(". 如果主机所询问的"),_("strong",[t._v("本地域名服务器不知道")]),t._v("被查询域名的 IP 地址, 那么本地域名服务器就以 "),_("strong",[t._v("DNS 客户的身份")]),t._v(", 向其他"),_("strong",[t._v("根域名服务器")]),t._v("继续发出查询请求报文.")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220429235037276.png",alt:"",title:"域名解析过程"}})]),t._v(" "),_("p",[t._v("每个域名服务器都维护一个"),_("strong",[t._v("高速缓存")]),t._v(", 存放最近用过的名字以及从何处获得"),_("strong",[t._v("名字映射信息")]),t._v("的记录. 可大大减轻根域名服务器的负荷, 使互联网上的 DNS 查询请求和回答报文的数量大为减少, 缓存应该设置合理的过期时间.")]),t._v(" "),_("h5",{attrs:{id:"_4-dns传输协议"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-dns传输协议"}},[t._v("#")]),t._v(" 4.DNS传输协议")]),t._v(" "),_("p",[t._v("DNS 可以使用 "),_("strong",[t._v("UDP 或者 TCP")]),t._v(" 进行传输, 使用的端口号都为 "),_("strong",[t._v("53")]),t._v(". "),_("strong",[t._v("大多数情况下 DNS 使用 UDP 进行传输")]),t._v(". DNS 应该是"),_("strong",[t._v("可靠")]),t._v("的, 但它使用 UDP, "),_("strong",[t._v("为什么?")])]),t._v(" "),_("ul",[_("li",[t._v("UDP 速度"),_("strong",[t._v("更快")]),t._v(". TCP 很慢因为它需要 3 次握手. 由于使用了 UDP, 所以 DNS 服务器没有保持连接.")]),t._v(" "),_("li",[t._v("DNS 请求通常非常小, 非常适合 UDP 段.")]),t._v(" "),_("li",[t._v("UDP 虽然不可靠, 但可以在"),_("strong",[t._v("应用层提供可靠性支持")]),t._v(". 应用程序可以使用 UDP, 并且可以通过在"),_("strong",[t._v("应用程序层使用超时和重新发送")]),t._v("来实现可靠性.")])]),t._v(" "),_("p",[t._v("在两种情况下会使用 "),_("strong",[t._v("TCP")]),t._v(" 进行传输:")]),t._v(" "),_("ul",[_("li",[t._v("如果返回的响应超过的 "),_("strong",[t._v("512 字节")]),t._v("(UDP 最大只支持 512 字节的数据).")]),t._v(" "),_("li",[t._v("区域传送. 区域传送是"),_("strong",[t._v("主域名服务器")]),t._v("向辅助域名服务器传送变化的那部分数据.")])]),t._v(" "),_("h4",{attrs:{id:"动态主机配置协议dhcp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#动态主机配置协议dhcp"}},[t._v("#")]),t._v(" 动态主机配置协议DHCP")]),t._v(" "),_("p",[_("strong",[t._v("DHCP")]),t._v("(Dynamic Host Configuration Protocol) 提供了"),_("strong",[t._v("即插即用的连网方式")]),t._v(", 用户不再需要手动配置 IP 地址等信息. 它允许一台计算机加入新的网络时自动获取 IP 地址而不用手动配置. DHCP 配置的内容不仅是 IP 地址, 还包括子网掩码, 网关 IP 地址.")]),t._v(" "),_("h4",{attrs:{id:"应用进程网络间通信"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#应用进程网络间通信"}},[t._v("#")]),t._v(" 应用进程网络间通信")]),t._v(" "),_("h5",{attrs:{id:"_1-系统调用与套接字"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-系统调用与套接字"}},[t._v("#")]),t._v(" 1.系统调用与套接字")]),t._v(" "),_("p",[t._v("大多数操作系统使用"),_("strong",[t._v("系统调用")]),t._v("机制在应用程序和操作系统之间传递控制权.")]),t._v(" "),_("p",[_("strong",[t._v("套接字")])]),t._v(" "),_("ul",[_("li",[t._v("当应用进程需要使用网络进行通信时就发出"),_("strong",[t._v("系统调用")]),t._v(', 请求操作系统为其创建 "'),_("strong",[t._v("套接字")]),t._v('", 以便把网络通信所需要的系统资源分配给该应用进程.')]),t._v(" "),_("li",[t._v("操作系统为这些资源的总和用一个叫做"),_("strong",[t._v("套接字描述符")]),t._v("的号码来表示.")]),t._v(" "),_("li",[t._v("应用进程所进行的"),_("strong",[t._v("网络操作")]),t._v("都必须使用这个套接字描述符.")]),t._v(" "),_("li",[t._v("通信完毕后, 应用进程通过一个关闭套接字的系统调用通知操作系统回收与该套接字描述符相关的所有资源.")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220429235708441.png",alt:""}})]),t._v(" "),_("h5",{attrs:{id:"_2-网络通信系统调用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-网络通信系统调用"}},[t._v("#")]),t._v(" 2.网络通信系统调用")]),t._v(" "),_("p",[t._v("当进程需要使用网络进行通信时, 就发出"),_("strong",[t._v("系统调用")]),t._v(". 使用 TCP/IP 应用编程接口 API, 就可以编写网络应用程序. 如下是网络通信相关系统调用使用顺序的例子.")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220429235459438.png",alt:""}})]),t._v(" "),_("p",[t._v("‍")]),t._v(" "),_("p",[t._v("‍")]),t._v(" "),_("p",[t._v("‍")]),t._v(" "),_("h4",{attrs:{id:"参考资料"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),_("ul",[_("li",[t._v("《计算机网络 第七版 谢希仁》")])])])}),[],!1,null,null,null);_.default=s.exports}}]);