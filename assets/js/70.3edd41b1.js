(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{384:function(t,s,n){"use strict";n.r(s);var a=n(7),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_404-javaç½‘ç»œioæ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_404-javaç½‘ç»œioæ¨¡å‹"}},[t._v("#")]),t._v(" 404.Javaç½‘ç»œIOæ¨¡å‹")]),t._v(" "),s("h4",{attrs:{id:"java-ioåˆ†ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-ioåˆ†ç±»"}},[t._v("#")]),t._v(" Java IOåˆ†ç±»")]),t._v(" "),s("p",[t._v("Java å…±æ”¯æŒ 3 ç§"),s("strong",[t._v("ç½‘ç»œç¼–ç¨‹ IO æ¨¡å¼: BIO, NIO, AIO")]),t._v(". å®ƒä»¬æ˜¯å¯¹"),s("strong",[t._v("æ“ä½œç³»ç»Ÿçš„å„ç§ IO æ¨¡å‹çš„å°è£…")]),t._v("(å‚è€ƒ: IOæ¨¡å‹).")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŒæ­¥é˜»å¡ IO(BIO)")]),t._v(" : ç”¨æˆ·è¿›ç¨‹å‘èµ·ä¸€ä¸ª IO æ“ä½œåå¿…é¡»ç­‰å¾… IO æ“ä½œçœŸæ­£å®Œæˆå, æ‰èƒ½ç»§ç»­è¿è¡Œ.")]),t._v(" "),s("li",[s("strong",[t._v("åŒæ­¥éé˜»å¡ IO(NIO)")]),t._v(" : ç”¨æˆ·è¿›ç¨‹å‘èµ·ä¸€ä¸ª IO æ“ä½œä»¥å"),s("strong",[t._v("å¯åšå…¶å®ƒäº‹æƒ…")]),t._v(", ä½†ç”¨æˆ·è¿›ç¨‹éœ€è¦"),s("strong",[t._v("ç»å¸¸è¯¢é—®")]),t._v(" IO æ“ä½œæ˜¯å¦å®Œæˆ.")]),t._v(" "),s("li",[s("strong",[t._v("å¼‚æ­¥éé˜»å¡ IO(AIO)")]),t._v(" : ç”¨æˆ·è¿›ç¨‹å‘èµ·ä¸€ä¸ª IO æ“ä½œç„¶å"),s("strong",[t._v("ç«‹å³è¿”å›")]),t._v(", ç­‰ IO æ“ä½œçœŸæ­£çš„å®Œæˆä»¥å, åº”ç”¨ç¨‹åºä¼šå¾—åˆ° IO æ“ä½œå®Œæˆçš„é€šçŸ¥.")])]),t._v(" "),s("h4",{attrs:{id:"bio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bio"}},[t._v("#")]),t._v(" BIO")]),t._v(" "),s("p",[s("strong",[t._v("BIO(Blocking IO) æ˜¯é¢å‘æµçš„åŒæ­¥é˜»å¡ IO æ¨¡å‹")]),t._v(". é¢å‘æµæ„å‘³ç€æ¯æ¬¡ä»æµä¸­è¯»"),s("strong",[t._v("ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚")]),t._v(", "),s("strong",[t._v("ç›´åˆ°è¯»å–æ‰€æœ‰å­—èŠ‚")]),t._v(", "),s("strong",[t._v("æ²¡æœ‰è¢«ç¼“å­˜")]),t._v("åˆ°ä»»ä½•åœ°æ–¹. "),s("strong",[t._v("æ•°æ®çš„è¯»å–å†™å…¥æ—¶å¿…é¡»é˜»å¡åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆ, é˜»å¡çš„æ—¶å€™çº¿ç¨‹ä»€ä¹ˆéƒ½ä¸èƒ½åš")]),t._v(".")]),t._v(" "),s("p",[t._v("ä¼ ç»Ÿçš„åŒæ­¥é˜»å¡æ¨¡å‹å¼€å‘ä¸­, "),s("strong",[t._v("ServerSocket")]),t._v(" è´Ÿè´£ç»‘å®š IP åœ°å€, å¯åŠ¨"),s("strong",[t._v("ç›‘å¬")]),t._v("ç«¯å£; "),s("strong",[t._v("socket")]),t._v(" è´Ÿè´£å‘èµ·"),s("strong",[t._v("è¿æ¥æ“ä½œ")]),t._v(", è¿æ¥æˆåŠŸå, åŒæ–¹é€šè¿‡"),s("strong",[t._v("è¾“å…¥æµå’Œè¾“å‡ºæµè¿›è¡ŒåŒæ­¥é˜»å¡å¼")]),t._v("é€šä¿¡.")]),t._v(" "),s("h5",{attrs:{id:"_1-æ¨¡å‹å›¾ç¤º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¨¡å‹å›¾ç¤º"}},[t._v("#")]),t._v(" 1.æ¨¡å‹å›¾ç¤º")]),t._v(" "),s("p",[t._v("é‡‡ç”¨ BIO é€šä¿¡æ¨¡å‹çš„æœåŠ¡ç«¯é€šå¸¸ç”±ä¸€ä¸ªç‹¬ç«‹çš„ "),s("strong",[t._v("Acceptor çº¿ç¨‹")]),t._v("è´Ÿè´£ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥, å®ƒæ”¶åˆ°å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚åä¸º"),s("strong",[t._v("æ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹")]),t._v("è¿›è¡Œé“¾è·¯å¤„ç†, å¤„ç†å®Œæˆå, é€šè¿‡è¾“å‡ºæµè¿”å›å“åº”ç»™å®¢æˆ·ç«¯, çº¿ç¨‹é”€æ¯.")]),t._v(" "),s("p",[t._v("BIO æ˜¯å…¸å‹çš„"),s("strong",[t._v("ä¸€è¯·æ±‚ä¸€åº”ç­”")]),t._v("é€šä¿¡æ¨¡å‹, é€šä¿¡æ¨¡å‹å›¾å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/java-bio2.png",alt:"",title:"BIOæ¨¡å‹"}})]),t._v(" "),s("p",[t._v("ä¸€èˆ¬é€šè¿‡åœ¨ while(true) å¾ªç¯ä¸­æœåŠ¡ç«¯ä¼šè°ƒç”¨ "),s("strong",[t._v("accept()")]),t._v("  æ–¹æ³•ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥çš„æ–¹å¼ç›‘å¬è¯·æ±‚, è¯·æ±‚ä¸€æ—¦æ¥æ”¶åˆ°ä¸€ä¸ªè¿æ¥è¯·æ±‚, å°±å¯ä»¥å»ºç«‹"),s("strong",[t._v("å¥—æ¥å­—")]),t._v("åœ¨è¿™ä¸ªå¥—æ¥å­—ä¸Šè¿›è¡Œè¯»å†™æ“ä½œ, å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹æ¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥, å¦‚ä¸Šå›¾æ‰€ç¤º.")]),t._v(" "),s("h5",{attrs:{id:"_2-ä¼ªå¼‚æ­¥ioæ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¼ªå¼‚æ­¥ioæ¨¡å‹"}},[t._v("#")]),t._v(" 2.ä¼ªå¼‚æ­¥IOæ¨¡å‹")]),t._v(" "),s("p",[t._v("BIO ä¸­å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ˜¯, æœåŠ¡ç«¯ä¼šä¸º"),s("strong",[t._v("æ¯ä¸ªå®¢æˆ·ç«¯å»ºç«‹ä¸€ä¸ªçº¿ç¨‹")]),t._v("æ¥å“åº”. é—®é¢˜æ¥äº†, å¦‚æœå®¢æˆ·ç«¯å‡ºç°äº†å»¶æ—¶ç­‰å¼‚å¸¸, æœåŠ¡ç«¯çš„é€šä¿¡çº¿ç¨‹å°±ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€, è¿™ä¸ªçº¿ç¨‹å°±ä¼šå ç”¨å¾ˆé•¿æ—¶é—´(å› ä¸ºæ•°æ®çš„å‡†å¤‡å’Œå¤„ç†éƒ½åœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šå®Œæˆ); æ›´ç³Ÿç³•çš„æ˜¯, å¦‚æœæœ‰å¤§é‡å¹¶å‘è®¿é—®, æœåŠ¡å™¨å°±ä¼šåˆ›å»ºå¤§é‡çº¿ç¨‹, è¿›è€Œå¼•èµ·æœåŠ¡å™¨èµ„æºæ¯ç«­.")]),t._v(" "),s("p",[t._v("ä¸ºæ”¹è¿›è¿™ç§ä¸€è¿æ¥ä¸€çº¿ç¨‹çš„æ¨¡å‹, å¯ä»¥ä½¿ç”¨"),s("strong",[t._v("çº¿ç¨‹æ± ")]),t._v('æ¥ç®¡ç†è¿™äº›çº¿ç¨‹, å®ç° 1 ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹å¤„ç† N ä¸ªå®¢æˆ·ç«¯çš„æ¨¡å‹(ä½†æ˜¯åº•å±‚è¿˜æ˜¯ä½¿ç”¨çš„åŒæ­¥é˜»å¡ I/O), é€šå¸¸è¢«ç§°ä¸º "'),s("strong",[t._v("ä¼ªå¼‚æ­¥I/Oæ¨¡å‹")]),t._v('".')]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/java-bio-threadpool.png",alt:"",title:"ä¼ªå¼‚æ­¥IOæ¨¡å‹"}})]),t._v(" "),s("p",[t._v("æ¯”å¦‚ä½¿ç”¨ FixedThreadPool å¯ä»¥æ§åˆ¶çº¿ç¨‹æ•°é‡, ä¿è¯ç³»ç»Ÿæœ‰é™èµ„æºçš„æ§åˆ¶, å®ç° N:M çš„ä¼ªå¼‚æ­¥ I/O æ¨¡å‹. ä½†å¦‚æœé™åˆ¶äº†çº¿ç¨‹æ•°é‡, ä½†åˆå‘ç”Ÿ"),s("strong",[t._v("å¤§é‡å¹¶å‘è¯·æ±‚")]),t._v(", è¶…è¿‡æœ€å¤§æ•°é‡çš„çº¿ç¨‹å°±"),s("strong",[t._v("åªèƒ½ç­‰å¾…")]),t._v(", ç›´åˆ°çº¿ç¨‹æ± ä¸­çš„æœ‰ç©ºé—²çš„çº¿ç¨‹å¯ä»¥è¢«å¤ç”¨. è€Œå¯¹ Socket çš„è¾“å…¥æµè¿›è¡Œè¯»å–æ—¶, ä¼šä¸€ç›´é˜»å¡, ç›´åˆ°è¯»å®Œæˆ–å‘ç”Ÿå¼‚å¸¸é€€å‡º. æ‰€ä»¥åœ¨è¯»å–æ•°æ®è¾ƒæ…¢æ—¶(æ¯”å¦‚æ•°æ®é‡å¤§, ç½‘ç»œä¼ è¾“æ…¢ç­‰), å¤§é‡å¹¶å‘çš„æƒ…å†µä¸‹, å…¶ä»–æ¥å…¥çš„æ¶ˆæ¯, åªèƒ½ä¸€ç›´ç­‰å¾…, è¿™æ˜¯æœ€å¤§çš„å¼Šç«¯.")]),t._v(" "),s("h4",{attrs:{id:"nioğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nioğŸŒŸ"}},[t._v("#")]),t._v(" NIOğŸŒŸ")]),t._v(" "),s("p",[s("strong",[t._v("NIO åº“æä¾›äº†é«˜é€Ÿçš„, é¢å‘å—çš„ I/O, æ˜¯ä¸€ç§åŒæ­¥éé˜»å¡çš„é€šä¿¡æ¨¡å‹.")])]),t._v(" "),s("p",[s("strong",[t._v("æœåŠ¡å™¨ä¸­ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†å¤šä¸ªè¯·æ±‚(è¿æ¥), å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚éƒ½ä¼šæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ selector ä¸Š, å¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰ IO è¯·æ±‚å°±è¿›è¡Œå¤„ç†")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v(": NIO æ–¹å¼é€‚ç”¨äº"),s("strong",[t._v("è¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­")]),t._v("(è½»æ“ä½œ)çš„æ¶æ„, æ¯”å¦‚"),s("strong",[t._v("èŠå¤©æœåŠ¡å™¨, å¼¹å¹•ç³»ç»Ÿ, æœåŠ¡å™¨é—´é€šè®¯")]),t._v(", ç¼–ç¨‹æ¯”è¾ƒå¤æ‚. "),s("strong",[t._v("å®é™…å¼€å‘ä¸­ç›´æ¥ç”¨ Netty å°±è¡Œäº†")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_1-æµä¸å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æµä¸å—"}},[t._v("#")]),t._v(" 1.æµä¸å—")]),t._v(" "),s("p",[t._v("BIO ä¸ NIO æœ€é‡è¦çš„åŒºåˆ«æ˜¯"),s("strong",[t._v("æ•°æ®æ‰“åŒ…å’Œä¼ è¾“")]),t._v("çš„æ–¹å¼, "),s("strong",[t._v("BIO ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®, è€Œ NIO ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ®")]),t._v(".")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é¢å‘æµ")]),t._v("çš„ I/O ä¸€æ¬¡å¤„ç†"),s("strong",[t._v("ä¸€ä¸ªå­—èŠ‚æ•°æ®")]),t._v(": ä¸€ä¸ªè¾“å…¥æµäº§ç”Ÿä¸€ä¸ªå­—èŠ‚æ•°æ®, ä¸€ä¸ªè¾“å‡ºæµæ¶ˆè´¹ä¸€ä¸ªå­—èŠ‚æ•°æ®. ä¸ºæµå¼æ•°æ®åˆ›å»ºè¿‡æ»¤å™¨éå¸¸å®¹æ˜“, é“¾æ¥å‡ ä¸ªè¿‡æ»¤å™¨, ä»¥ä¾¿æ¯ä¸ªè¿‡æ»¤å™¨åªè´Ÿè´£å¤æ‚å¤„ç†æœºåˆ¶çš„ä¸€éƒ¨åˆ†. ä¸è¿‡é¢å‘æµçš„ I/O é€šå¸¸æ¯”è¾ƒæ…¢.")]),t._v(" "),s("li",[s("strong",[t._v("é¢å‘å—")]),t._v("çš„ I/O ä¸€æ¬¡å¤„ç†"),s("strong",[t._v("ä¸€ä¸ªæ•°æ®å—")]),t._v(": æŒ‰å—å¤„ç†æ•°æ®æ¯”æŒ‰æµå¤„ç†æ•°æ®è¦"),s("strong",[t._v("å¿«å¾—å¤š")]),t._v(". ä½†é¢å‘å—çš„ I/O å¤„ç†ç›¸å¯¹å¤æ‚.")])]),t._v(" "),s("h5",{attrs:{id:"_2-nioæ¨¡å‹ä¸æ ¸å¿ƒç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-nioæ¨¡å‹ä¸æ ¸å¿ƒç»„ä»¶"}},[t._v("#")]),t._v(" 2.NIOæ¨¡å‹ä¸æ ¸å¿ƒç»„ä»¶")]),t._v(" "),s("p",[t._v("NIO å®ç°äº† IO "),s("strong",[t._v("å¤šè·¯å¤ç”¨")]),t._v("ä¸­çš„ "),s("strong",[t._v("Reactor")]),t._v(" æ¨¡å‹, "),s("strong",[t._v("ä¸€ä¸ªçº¿ç¨‹(Thread)")]),t._v("  é€šè¿‡å¯¹"),s("strong",[t._v("å¤šè·¯å¤ç”¨å™¨(Selector)")]),t._v("  è¿›è¡Œ"),s("strong",[t._v("è½®è¯¢")]),t._v("çš„æ–¹å¼å»"),s("strong",[t._v("ç›‘å¬å¤šä¸ªé€šé“(Channel)")]),t._v("  ä¸Šçš„äº‹ä»¶, ä»è€Œè®©ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥å¤„ç†å¤šä¸ªäº‹ä»¶.")]),t._v(" "),s("p",[t._v("â€‹"),s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230130224612400.png",alt:"",title:"NIOæ¨¡å‹"}}),t._v("â€‹")]),t._v(" "),s("p",[t._v("NIO çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶: "),s("strong",[t._v("Channel(é€šé“), Buffer(ç¼“å†²åŒº), Selector(å¤šè·¯å¤ç”¨å™¨å™¨/é€‰æ‹©å™¨)")]),t._v(" .")]),t._v(" "),s("p",[t._v("å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ "),s("strong",[t._v("Channel é€šä¿¡")]),t._v(". NIO å¯ä»¥åœ¨ Channel è¿›è¡Œè¯»å†™æ“ä½œ.")]),t._v(" "),s("p",[t._v("æ¨¡å‹ç®€ä»‹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("channel ç±»ä¼¼äºæµ")]),t._v(", æ¯ä¸ª channel å¯¹åº”ä¸€ä¸ª "),s("strong",[t._v("buffer ç¼“å†²åŒº")]),t._v(", buffer åº•å±‚å°±æ˜¯ä¸ªæ•°ç»„.")]),t._v(" "),s("li",[s("strong",[t._v("channel ä¼šæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ selector ä¸Š")]),t._v(", ç”± selector æ ¹æ® channel è¯»å†™äº‹ä»¶çš„å‘ç”Ÿå°†å…¶"),s("strong",[t._v("äº¤ç”±æŸä¸ªç©ºé—²çš„çº¿ç¨‹å¤„ç†")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("selector å¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹")]),t._v(".")]),t._v(" "),s("li",[t._v("NIO çš„ Buffer å’Œ channel éƒ½æ˜¯æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™.")])]),t._v(" "),s("h6",{attrs:{id:"_1-é€šé“-channel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é€šé“-channel"}},[t._v("#")]),t._v(" (1)é€šé“(Channel)")]),t._v(" "),s("p",[t._v("é€šé“(Channel) æ˜¯å¯¹åŸ IO åŒ…ä¸­çš„"),s("strong",[t._v("æµçš„æ¨¡æ‹Ÿ")]),t._v(", å¯ä»¥é€šè¿‡å®ƒ"),s("strong",[t._v("è¯»å–å’Œå†™å…¥")]),t._v("æ•°æ®.")]),t._v(" "),s("p",[t._v("é€šé“ä¸æµçš„ä¸åŒä¹‹å¤„åœ¨äº, "),s("strong",[t._v("æµ")]),t._v("æ˜¯å•å‘çš„, åªèƒ½åœ¨"),s("strong",[t._v("ä¸€ä¸ªæ–¹å‘")]),t._v("ä¸Šç§»åŠ¨(æµå¿…é¡»æ˜¯è¾“å…¥æµ "),s("strong",[t._v("InputStream")]),t._v(" æˆ–è¾“å‡ºæµ "),s("strong",[t._v("OutputStream")]),t._v(" çš„å­ç±»), è€Œ"),s("strong",[t._v("é€šé“æ˜¯åŒå‘")]),t._v("çš„, å¯ä»¥ç”¨äºè¯», å†™æˆ–åŒæ—¶ç”¨äºè¯»å†™.")]),t._v(" "),s("p",[t._v("NIO ä¸­è¯»å†™æ•°æ®éƒ½æ˜¯ä» channel å¼€å§‹çš„.")]),t._v(" "),s("ul",[s("li",[t._v("ä» channel è¿›è¡Œæ•°æ®è¯»å–: åˆ›å»ºä¸€ä¸ª"),s("strong",[t._v("ç¼“å†²åŒº")]),t._v(", ç„¶åè¯·æ±‚ channel è¯»å–æ•°æ®.")]),t._v(" "),s("li",[t._v("ä» channel è¿›è¡Œæ•°æ®å†™å…¥: åˆ›å»ºä¸€ä¸ª"),s("strong",[t._v("ç¼“å†²åŒº")]),t._v(", å¡«å……æ•°æ®, å¹¶è¦æ±‚ channel å†™å…¥æ•°æ®.")])]),t._v(" "),s("blockquote",[s("p",[t._v("Channelå®ç°ç±»")])]),t._v(" "),s("p",[s("strong",[t._v("é€šé“éƒ½å®ç°äº† Channel æ¥å£,")]),t._v("  å¸¸è§å®ç°ç±»å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("FileChannel")]),t._v(": ä»"),s("strong",[t._v("æ–‡ä»¶")]),t._v("ä¸­è¯»å†™æ•°æ®;")]),t._v(" "),s("li",[s("strong",[t._v("DatagramChannel")]),t._v(": é€šè¿‡ "),s("strong",[t._v("UDP")]),t._v(" è¯»å†™ç½‘ç»œæ•°æ®;")]),t._v(" "),s("li",[s("strong",[t._v("SocketChannel")]),t._v(": é€šè¿‡ "),s("strong",[t._v("TCP")]),t._v(" è¯»å†™ç½‘ç»œæ•°æ®;")]),t._v(" "),s("li",[s("strong",[t._v("ServerSocketChannel")]),t._v(": ç›‘å¬æ–°è¿›æ¥çš„ TCP è¿æ¥, å¯¹æ¯ä¸€ä¸ªæ–°è¿›æ¥çš„"),s("strong",[t._v("è¿æ¥")]),t._v("éƒ½ä¼šåˆ›å»ºä¸€ä¸ª "),s("strong",[t._v("SocketChannel")]),t._v(".")])]),t._v(" "),s("h6",{attrs:{id:"_2-ç¼“å†²åŒº-buffer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¼“å†²åŒº-buffer"}},[t._v("#")]),t._v(" (2)ç¼“å†²åŒº(Buffer)")]),t._v(" "),s("p",[s("strong",[t._v("ä» channel è¯»å…¥ä¸å†™å‡ºçš„æ•°æ®éƒ½å¿…é¡»å…ˆç»è¿‡ç¼“å†²åŒº, ä¸ä¼šç›´æ¥å¯¹é€šé“è¿›è¡Œè¯»å†™æ•°æ®")]),t._v(".")]),t._v(" "),s("p",[t._v("ç¼“å†²åŒºå®è´¨ä¸Šæ˜¯ä¸€ä¸ª"),s("strong",[t._v("æ•°ç»„")]),t._v(", ä½†å®ƒåŠŸèƒ½æ›´å¤š, æä¾›äº†å¯¹æ•°æ®çš„"),s("strong",[t._v("ç»“æ„åŒ–")]),t._v("è®¿é—®.")]),t._v(" "),s("p",[t._v("ç¼“å†²åŒºéƒ½ç»§æ‰¿äº"),s("strong",[t._v("æŠ½è±¡ç±» Buffer")]),t._v(", å®ç°ç±»æœ‰ ByteBuffer, CharBuffer, ShortBuffer, IntBuffer, LongBuffer, FloatBuffer, DoubleBuffer ç­‰.")]),t._v(" "),s("h6",{attrs:{id:"_3-å¤šè·¯å¤ç”¨å™¨-selector"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¤šè·¯å¤ç”¨å™¨-selector"}},[t._v("#")]),t._v(" (3)å¤šè·¯å¤ç”¨å™¨(Selector)")]),t._v(" "),s("p",[s("strong",[t._v("Selector")]),t._v(" å¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹. Selector é€šè¿‡"),s("strong",[t._v("ä¸€ä¸ªçº¿ç¨‹ä¸åœçš„è½®è¯¢å·²ç»æ³¨å†Œçš„ channel")]),t._v(", æ‰¾å‡ºå·²ç»å‡†å¤‡å°±ç»ªçš„ channel æ‰§è¡Œ IO æ“ä½œ.")]),t._v(" "),s("p",[s("strong",[t._v("Selector IO å¤šè·¯å¤ç”¨")]),t._v("åº•å±‚ä¸€èˆ¬ç”¨çš„ Linux API("),s("strong",[t._v("select, poll, epoll")]),t._v(")æ¥å®ç°, å®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹è¡¨:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}}),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("select")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("poll")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("epoll(JDK5åŠä»¥ä¸Š)")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ“ä½œæ–¹å¼")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("éå†")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("éå†")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("å›è°ƒ")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("åº•å±‚å®ç°")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ•°ç»„")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("é“¾è¡¨")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("å“ˆå¸Œè¡¨")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("IOæ•ˆç‡")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ¯æ¬¡è°ƒç”¨éƒ½è¿›è¡Œçº¿æ€§éå†, æ—¶é—´å¤æ‚åº¦ä¸º O(n)")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ¯æ¬¡è°ƒç”¨éƒ½è¿›è¡Œ"),s("strong",[t._v("çº¿æ€§éå†")]),t._v(", æ—¶é—´å¤æ‚åº¦ä¸ºO(n)")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("äº‹ä»¶é€šçŸ¥æ–¹å¼, æ¯å½“æœ‰ IO äº‹ä»¶å°±ç»ª, ç³»ç»Ÿæ³¨å†Œçš„"),s("strong",[t._v("å›è°ƒå‡½æ•°")]),t._v("å°±ä¼šè¢«è°ƒç”¨, æ—¶é—´å¤æ‚åº¦ O(1)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æœ€å¤§è¿æ¥")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æœ‰ä¸Šé™")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ— ä¸Šé™")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ— ä¸Šé™")])])])])]),t._v(" "),s("p",[t._v("å•çº¿ç¨‹çš„ BIO æ¨¡å‹ä¸ Redis æ¶æ„ç±»ä¼¼, å¦‚æœå¤„ç†çš„äº‹ä»¶è¿‡å¤š, é‚£ä¹ˆå¯èƒ½åé¢çš„è¿æ¥åœ¨è¿æ¥ä¸ä¸Šæ—¶ä¼šå‘ç”Ÿé˜»å¡. æ‰€ä»¥äº‹ä»¶çš„æ“ä½œæœ€å¥½è¾ƒçŸ­, å› æ­¤å¯ä»¥ç”¨ä¸€ä¸ª"),s("strong",[t._v("çº¿ç¨‹æ± ")]),t._v("æ¥ä¸“é—¨å¤„ç†äº‹ä»¶.")]),t._v(" "),s("h5",{attrs:{id:"_3-ç¼“å†²åŒºçŠ¶æ€å˜é‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼“å†²åŒºçŠ¶æ€å˜é‡"}},[t._v("#")]),t._v(" 3.ç¼“å†²åŒºçŠ¶æ€å˜é‡")]),t._v(" "),s("p",[t._v("æœ‰å‡ ä¸ªç”¨äº"),s("strong",[t._v("æè¿°ç¼“å†²åŒº")]),t._v("çŠ¶æ€çš„é‡è¦å˜é‡.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("capacity: æœ€å¤§å®¹é‡")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("position: å½“å‰å·²ç»è¯»å†™çš„å­—èŠ‚æ•°")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("limit: è¿˜å¯ä»¥è¯»å†™çš„å­—èŠ‚æ•°")]),t._v(".")])]),t._v(" "),s("p",[t._v("Buffer çš„"),s("strong",[t._v("æ“ä½œ")]),t._v("åˆ†ä¸º"),s("strong",[t._v("è¯»æ¨¡å¼å’Œå†™æ¨¡å¼")]),t._v(", ä¸€èˆ¬éµå¾ªå‡ ä¸ªæ­¥éª¤:")]),t._v(" "),s("ul",[s("li",[t._v("è°ƒç”¨ "),s("strong",[t._v("allocate()")]),t._v("  æ–¹æ³•åˆ†é…ç¼“å†²åŒºå†…å­˜.")]),t._v(" "),s("li",[t._v("å†™å…¥æ•°æ®åˆ° buffer.")]),t._v(" "),s("li",[t._v("è°ƒç”¨ "),s("strong",[t._v("flip()")]),t._v("  æ–¹æ³•è¿›è¡Œ"),s("strong",[t._v("æ¨¡å¼åˆ‡æ¢")]),t._v("(è¯»å†™æ¨¡å¼çš„åˆ‡æ¢). å¦‚å°†å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼.")]),t._v(" "),s("li",[t._v("ä» buffer ä¸­"),s("strong",[t._v("è¯»å–")]),t._v("æ•°æ®.")]),t._v(" "),s("li",[t._v("è°ƒç”¨ "),s("strong",[t._v("clear()")]),t._v("  æ–¹æ³•, æ¸…ç† buffer.")])]),t._v(" "),s("blockquote",[s("p",[t._v("çŠ¶æ€å˜é‡çš„æ”¹å˜è¿‡ç¨‹ä¸¾ä¾‹")])]),t._v(" "),s("p",[t._v("(1) é€šè¿‡ "),s("strong",[t._v("Buffer")]),t._v(" çš„ "),s("strong",[t._v("allocate()")]),t._v("  æ–¹æ³•è¿›è¡Œå†…å­˜"),s("strong",[t._v("åˆ†é…")]),t._v(". æ–°å»ºä¸€ä¸ªå¤§å°ä¸º 8 ä¸ªå­—èŠ‚çš„"),s("strong",[t._v("ç¼“å†²åŒº")]),t._v(", æ­¤æ—¶ "),s("strong",[t._v("position")]),t._v(" ä¸º 0, è€Œ limit = capacity = 8. "),s("strong",[t._v("capacity")]),t._v(" å˜é‡"),s("strong",[t._v("ä¸ä¼šæ”¹å˜")]),t._v(", ä¸‹é¢çš„è®¨è®ºä¼šå¿½ç•¥å®ƒ.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230131001107914.png",alt:""}})]),t._v(" "),s("p",[t._v("(2) "),s("strong",[t._v("å†™æ¨¡å¼ä¸­")]),t._v(", é¦–å…ˆä»è¾“å…¥é€šé“ä¸­è¯»å– 5 ä¸ªå­—èŠ‚æ•°æ®"),s("strong",[t._v("å†™å…¥")]),t._v("ç¼“å†²åŒºä¸­, æ­¤æ—¶ "),s("strong",[t._v("position")]),t._v(" ä¸º 5, limit ä¿æŒ"),s("strong",[t._v("ä¸å˜")]),t._v(". å†™æ¨¡å¼ä¸­çš„ limit ä¸ºå¯ä»¥å†™å…¥çš„"),s("strong",[t._v("æœ€å¤§å€¼")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230131001129438.png",alt:""}})]),t._v(" "),s("p",[t._v("(3) åœ¨å°†"),s("strong",[t._v("ç¼“å†²åŒº")]),t._v("çš„æ•°æ®å†™åˆ°"),s("strong",[t._v("è¾“å‡ºé€šé“")]),t._v("ä¹‹å‰, éœ€è¦å…ˆè°ƒç”¨ "),s("strong",[t._v("flip()")]),t._v("  æ–¹æ³•, è¿™ä¸ªæ–¹æ³•"),s("strong",[t._v("å°† limit è®¾ç½®ä¸ºå½“å‰ position")]),t._v(", å¹¶å°† "),s("strong",[t._v("position è®¾ç½®ä¸º 0")]),t._v(". è¿™å¯ä»¥ä¿è¯å†™å‡ºçš„æ•°æ®"),s("strong",[t._v("æ­£å¥½")]),t._v("æ˜¯ä¹‹å‰å†™å…¥ç¼“å†²åŒºçš„æ•°æ®, å› ä¸ºåˆ°äº† limit ä½ç½®å°±æˆªæ­¢. "),s("strong",[t._v("flip()")]),t._v("  å¯ä»¥å°†å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼. "),s("strong",[t._v("è¯»æ¨¡å¼")]),t._v("ä¸‹, limit å˜æˆå†™"),s("strong",[t._v("æ•°æ®æ—¶çš„ position å€¼")]),t._v(", ä»£è¡¨èƒ½å¤Ÿ"),s("strong",[t._v("è¯»å‡ºçš„æ•°æ®é‡å€¼")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230131001153176.png",alt:""}})]),t._v(" "),s("p",[t._v("(4) ä»ç¼“å†²åŒºä¸­"),s("strong",[t._v("å– 4 ä¸ªå­—èŠ‚åˆ°è¾“å‡ºé€šé“")]),t._v("ä¸­, æ­¤æ—¶ position è®¾ä¸º 4.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230131001208378.png",alt:""}})]),t._v(" "),s("p",[t._v("(5) æœ€åéœ€è¦è°ƒç”¨ "),s("strong",[t._v("clear()")]),t._v("  æ–¹æ³•æ¥"),s("strong",[t._v("æ¸…ç©ºç¼“å†²åŒº")]),t._v(", æ­¤æ—¶ "),s("strong",[t._v("position å’Œ limit")]),t._v(" éƒ½è¢«è®¾ç½®ä¸º"),s("strong",[t._v("æœ€åˆä½ç½®")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20230131001107914.png",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"_4-å¤šè·¯å¤ç”¨å™¨-selector"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¤šè·¯å¤ç”¨å™¨-selector"}},[t._v("#")]),t._v(" 4.å¤šè·¯å¤ç”¨å™¨(Selector)")]),t._v(" "),s("p",[t._v("å¤šè·¯å¤ç”¨å™¨æä¾›"),s("strong",[t._v("é€‰æ‹©å·²ç»å°±ç»ªä»»åŠ¡")]),t._v("çš„èƒ½åŠ›, å®ƒä¼šä¸æ–­åœ°"),s("strong",[t._v("è½®è¯¢æ³¨å†Œåœ¨å…¶ä¸Šçš„é€šé“")]),t._v("(Channel), å¦‚æœæŸä¸ªé€šé“å¤„äº"),s("strong",[t._v("å°±ç»ªçŠ¶æ€")]),t._v(", ä¼šè¢« Selector è½®è¯¢å‡ºæ¥, ç„¶åé€šè¿‡ "),s("strong",[t._v("SelectionKey")]),t._v(" å¯ä»¥å–å¾—å°±ç»ªçš„ "),s("strong",[t._v("Channel é›†åˆ")]),t._v(", ä»è€Œè¿›è¡Œåç»­çš„ IO æ“ä½œ.")]),t._v(" "),s("p",[t._v("é€šè¿‡é…ç½®ç›‘å¬çš„é€šé“ Channel ä¸º"),s("strong",[t._v("éé˜»å¡")]),t._v(", é‚£ä¹ˆå½“ Channel ä¸Šçš„ IO äº‹ä»¶è¿˜æœªåˆ°è¾¾æ—¶, å°±ä¸ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ä¸€ç›´ç­‰å¾…, è€Œæ˜¯"),s("strong",[t._v("ç»§ç»­è½®è¯¢")]),t._v("å…¶å®ƒ Channel, æ‰¾åˆ° IO "),s("strong",[t._v("äº‹ä»¶å·²ç»åˆ°è¾¾")]),t._v("çš„ Channel å¹¶å¤„ç†äº‹ä»¶. å› ä¸ºåˆ›å»ºå’Œåˆ‡æ¢çº¿ç¨‹çš„å¼€é”€å¾ˆå¤§, å› æ­¤ä½¿ç”¨"),s("strong",[t._v("ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªäº‹ä»¶")]),t._v("è€Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªäº‹ä»¶, å¯¹äº "),s("strong",[t._v("IO å¯†é›†å‹")]),t._v("çš„åº”ç”¨å…·æœ‰å¾ˆå¥½åœ°æ€§èƒ½.")]),t._v(" "),s("p",[t._v("å› æ­¤, åªè¦æä¾›ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£è½®è¯¢ Selector å°±å¯ä»¥æ¥å…¥æˆåƒä¸Šä¸‡ä¸ªå®¢æˆ·ç«¯, å› ä¸ºåº•å±‚ä½¿ç”¨äº† "),s("strong",[t._v("epoll()")]),t._v("  ä»£æ›¿ä¼ ç»Ÿçš„ select() å®ç°, æ²¡æœ‰æœ€å¤§è¿æ¥å¥æŸ„çš„é™åˆ¶.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/image-20230131213540593-20230212215218-rty5kk2.png",alt:"image-20230131213540593"}})]),t._v(" "),s("p",[t._v("å…·ä½“ä½¿ç”¨å¦‚ä¸‹:")]),t._v(" "),s("h6",{attrs:{id:"_1-åˆ›å»ºå¤šè·¯å¤ç”¨å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åˆ›å»ºå¤šè·¯å¤ç”¨å™¨"}},[t._v("#")]),t._v(" (1)åˆ›å»ºå¤šè·¯å¤ç”¨å™¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–å¤šè·¯å¤ç”¨å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),t._v(" selector "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h6",{attrs:{id:"_2-å°†é€šé“æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å°†é€šé“æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Š"}},[t._v("#")]),t._v(" (2)å°†é€šé“æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–ä¸€ä¸ªæœåŠ¡ç«¯Channel")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),t._v(" ssChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®ä¸ºéé˜»å¡")]),t._v("\nssChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†Channelæ³¨å†Œåˆ°Selectorä¸Š")]),t._v("\nssChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_ACCEPT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[s("strong",[t._v("é€šé“")]),t._v("å¿…é¡»é…ç½®ä¸º"),s("strong",[t._v("éé˜»å¡æ¨¡å¼")]),t._v(", å¦åˆ™ä½¿ç”¨é€‰æ‹©å™¨å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†, å› ä¸ºå¦‚æœ"),s("strong",[t._v("é€šé“åœ¨æŸä¸ªäº‹ä»¶ä¸Šè¢«é˜»å¡")]),t._v(", é‚£ä¹ˆæœåŠ¡å™¨å°±ä¸èƒ½å“åº”å…¶å®ƒäº‹ä»¶, å¿…é¡»ç­‰å¾…è¿™ä¸ªäº‹ä»¶å¤„ç†å®Œæ¯•æ‰èƒ½å»å¤„ç†å…¶å®ƒäº‹ä»¶, è¿™æ˜¾ç„¶ä¸é€‰æ‹©å™¨çš„ä½œç”¨èƒŒé“è€Œé©°.")]),t._v(" "),s("p",[t._v("åœ¨å°†é€šé“"),s("strong",[t._v("æ³¨å†Œ")]),t._v("åˆ°é€‰æ‹©å™¨ä¸Šæ—¶, è¿˜éœ€è¦æŒ‡å®šè¦"),s("strong",[t._v("æ³¨å†Œçš„å…·ä½“äº‹ä»¶")]),t._v("ç±»å‹, ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»:")]),t._v(" "),s("ul",[s("li",[t._v("SelectionKey."),s("strong",[t._v("OP_CONNECT")]),t._v(": è¿æ¥å°±ç»ª.")]),t._v(" "),s("li",[t._v("SelectionKey."),s("strong",[t._v("OP_ACCEPT")]),t._v(": æ¥æ”¶å°±ç»ª.")]),t._v(" "),s("li",[t._v("SelectionKey."),s("strong",[t._v("OP_READ")]),t._v(": è¯»å°±ç»ª.")]),t._v(" "),s("li",[t._v("SelectionKey."),s("strong",[t._v("OP_WRITE")]),t._v(": å†™å°±ç»ª.")])]),t._v(" "),s("p",[t._v("å®ƒä»¬åœ¨ SelectionKey ä¸­çš„å®šä¹‰å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_WRITE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_CONNECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_ACCEPT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("è¿™é‡Œæ¯ä¸ªäº‹ä»¶å¯ä»¥è¢«å½“æˆä¸€ä¸ª"),s("strong",[t._v("ä½åŸŸ")]),t._v(", "),s("strong",[t._v('é€šè¿‡ "é€»è¾‘ä¸" è¿ç®—çš„ç»“æœå³å¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºå¤šä¸ªäº‹ä»¶çš„é›†åˆ')]),t._v(". ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OP_READæˆ–è€…OP_WRITEé€»è¾‘ä¸åå³ä¸ºä¸€ä¸ªæ•´æ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" interestSet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_WRITE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h6",{attrs:{id:"_3-ç›‘å¬äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç›‘å¬äº‹ä»¶"}},[t._v("#")]),t._v(" (3)ç›‘å¬äº‹ä»¶")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" num "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä½¿ç”¨ select() æ¥"),s("strong",[t._v("ç›‘å¬")]),t._v("åˆ°è¾¾çš„äº‹ä»¶, å®ƒä¼š"),s("strong",[t._v("ä¸€ç›´é˜»å¡ç›´åˆ°æœ‰è‡³å°‘ä¸€ä¸ªäº‹ä»¶åˆ°è¾¾, è¿™é‡Œä¹Ÿå¯èƒ½æœ‰å¤šä¸ªäº‹ä»¶åˆ°è¾¾")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_4-è·å–åˆ°è¾¾çš„äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-è·å–åˆ°è¾¾çš„äº‹ä»¶"}},[t._v("#")]),t._v(" (4)è·å–åˆ°è¾¾çš„äº‹ä»¶")]),t._v(" "),s("p",[s("strong",[t._v("Selector åœ¨æœ‰é€šé“äº‹ä»¶åˆ°è¾¾çš„æ—¶å€™è¿”å› SelectionKey é›†åˆ")]),t._v(", ä¹‹åå¯ä»¥è¿›è¡Œæ•°æ®å¤„ç†. ç”±äºå¯èƒ½æœ‰å¤šä¸ªé€šé“çš„äº‹ä»¶éœ€è¦å¤„ç†, è¿™é‡Œå¯¹ SelectionKey è¿›è¡Œå¾ªç¯éå†å¤„ç†, å¹¶æ£€æµ‹å„ä¸ª"),s("strong",[t._v("é”®æ‰€å¯¹åº”çš„é€šé“äº‹ä»¶ç±»å‹")]),t._v("è¿›è€Œåšå‡ºä¸åŒçš„å¤„ç†.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éå†SelectionKeyäº‹ä»¶")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–è¿­ä»£å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keyIterator "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éå†å¤„ç†å„ä¸ªäº‹ä»¶")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ¤æ–­äº‹ä»¶ç±»å‹åšä¸åŒå¤„ç†")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcceptable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h6",{attrs:{id:"_5-äº‹ä»¶å¾ªç¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-äº‹ä»¶å¾ªç¯"}},[t._v("#")]),t._v(" (5)äº‹ä»¶å¾ªç¯")]),t._v(" "),s("p",[t._v("ç”±äºæœåŠ¡ç«¯é€šå¸¸éœ€è¦"),s("strong",[t._v("æŒç»­ç›‘å¬äº‹ä»¶")]),t._v(", è€Œä¸€æ¬¡ select() è°ƒç”¨ä¸èƒ½å¤„ç†å®Œæ‰€æœ‰çš„äº‹ä»¶, å› æ­¤ç›‘å¬é€»è¾‘ä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€ä¸ª"),s("strong",[t._v("æ­»å¾ªç¯")]),t._v("å†….")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" num "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" keyIterator "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcceptable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        keyIterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h5",{attrs:{id:"_5-æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å·¥ä½œæµç¨‹åˆ†æğŸŒŸğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å·¥ä½œæµç¨‹åˆ†æğŸŒŸğŸŒŸ"}},[t._v("#")]),t._v(" 5.æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å·¥ä½œæµç¨‹åˆ†æğŸŒŸğŸŒŸ")]),t._v(" "),s("p",[t._v("å…ˆåˆ†åˆ«çœ‹çœ‹åŸºäº NIO çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å®é™…äº¤äº’ä¾‹å­.")]),t._v(" "),s("blockquote",[s("p",[t._v("NIOæœåŠ¡ç«¯ç¤ºä¾‹")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioServer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//public static ExecutorService pool = Executors.newFixedThreadPool(10);")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºä¸€ä¸ªåœ¨æœ¬åœ°ç«¯å£è¿›è¡Œç›‘å¬çš„æœåŠ¡Socketé€šé“.å¹¶è®¾ç½®ä¸ºéé˜»å¡æ–¹å¼, å½“æˆä¸€ä¸ªæœåŠ¡å™¨å³å¯")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),t._v(" serverSocketChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…é¡»é…ç½®ä¸ºéé˜»å¡æ‰èƒ½å¾€selectorä¸Šæ³¨å†Œ, å¦åˆ™ä¼šæŠ¥é”™, selectoræ¨¡å¼æœ¬èº«å°±æ˜¯éé˜»å¡æ¨¡å¼")]),t._v("\n        serverSocketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»‘å®šç«¯å£")]),t._v("\n        serverSocketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–é€‰æ‹©å™¨å¤šè·¯å¤ç”¨å™¨")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),t._v(" selector "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠServerSocketChannelæ³¨å†Œåˆ°selectorä¸Šå¹¶æŒ‡å®šäº‹ä»¶ç±»å‹")]),t._v("\n        serverSocketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_ACCEPT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç­‰å¾…äº‹ä»¶å‘ç”Ÿ.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è½®è¯¢ç›‘å¬channelé‡Œçš„key, selectæ˜¯é˜»å¡çš„, accept()ä¹Ÿæ˜¯é˜»å¡çš„, åœ¨æ­¤å¤„é˜»å¡äº†. ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" select "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœ‰äº‹ä»¶å‘ç”Ÿäº†.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ‰å®¢æˆ·ç«¯è¯·æ±‚, è¢«è½®è¯¢ç›‘å¬åˆ°")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ é™¤æœ¬æ¬¡å·²å¤„ç†çš„key, é˜²æ­¢ä¸‹æ¬¡selecté‡å¤å¤„ç†")]),t._v("\n                it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†äº‹ä»¶: ä½†æ˜¯ä¹Ÿå¯èƒ½å‡ºç°å¹¶å‘é—®é¢˜")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å¤„ç†äº‹ä»¶:åˆ†äº‹ä»¶è¿›è¡Œåˆ†åˆ«å¤„ç†\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAcceptable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœ‰å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶å‘ç”Ÿ.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),t._v(" serverSocketChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerSocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// serverSocketChannelé˜»å¡ç­‰åˆ°è¿æ¥äº‹ä»¶å‘ç”Ÿ, ç„¶åå°†è¿™ä¸ªé“¾æ¥å¯¹åº”çš„é€šé“")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// socketChannelæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Š,æ­¤å¤„æ˜¯éé˜»å¡çš„ä½“ç°ä¹‹ä¸€: è°ƒç”¨accept()")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯é˜»å¡çš„, ä½†è¿™é‡Œå› ä¸ºæ˜¯å‘ç”Ÿäº†è¿æ¥äº‹ä»¶, æ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¼šé©¬ä¸Šæ‰§è¡Œå®Œ, æ‰€ä»¥ä¸ä¼šé˜»å¡")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" socketChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" serverSocketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            socketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡Selectorç›‘å¬Channelæ—¶å¯¹è¯»äº‹ä»¶æ„Ÿå…´è¶£")]),t._v("\n            socketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯»äº‹ä»¶")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœ‰å®¢æˆ·ç«¯æ•°æ®å¯è¯»äº‹ä»¶å‘ç”Ÿ.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™ä¸ªchannelè·Ÿä¸Šé¢ä¸ä¸€æ ·! ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" socketChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†é…æ•°æ®ç¼“å†²åŒº")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NIOéé˜»å¡ä½“ç°:é¦–å…ˆread()æ–¹æ³•ä¸ä¼šé˜»å¡, å…¶æ¬¡è¿™ç§äº‹ä»¶å“åº”æ¨¡å‹, ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“è°ƒç”¨åˆ°read()æ–¹æ³•æ—¶è‚¯å®šæ˜¯å‘ç”Ÿäº†å®¢æˆ·ç«¯å‘é€æ•°æ®çš„äº‹ä»¶")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯»å–åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" len"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" bufferToWrite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HelloClient"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            socketChannel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bufferToWrite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interestOps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_WRITE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isWritable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœ‰å®¢æˆ·ç«¯æ•°æ®å†™äº‹ä»¶å‘ç”Ÿ.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡ç«¯çš„writeäº‹ä»¶å°±æ˜¯å†™æ•°æ®ç»™å®¢æˆ·ç«¯")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" socketChannel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NIOäº‹ä»¶è§¦å‘æ˜¯æ°´å¹³è§¦å‘")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨NIOç¼–ç¨‹æ—¶å€™, åœ¨æ²¡æœ‰æ•°æ®å¯ä»¥å¾€å¤–å†™çš„æ—¶å€™è¦å–æ¶ˆå†™äº‹ä»¶, ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨æœ‰æ•°æ®å¾€å¤–å†™çš„æ—¶å€™å†æ³¨å†Œå†™äº‹ä»¶")]),t._v("\n            key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interestOps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sc.close();")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br")])]),s("blockquote",[s("p",[t._v("NIOå®¢æˆ·ç«¯ç¤ºä¾‹")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioClient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** å¤šè·¯å¤ç”¨å™¨ */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** å¯åŠ¨å®¢æˆ·ç«¯ */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioClient")]),t._v(" client "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–")]),t._v("\n        client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥")]),t._v("\n        client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** è·å¾—ä¸€ä¸ªSocketé€šé“, å¹¶å¯¹è¯¥é€šé“åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œ */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å¾—ä¸€ä¸ªSocketé€šé“")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" channel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®é€šé“ä¸ºéé˜»å¡")]),t._v("\n        channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å¾—ä¸€ä¸ªé€šé“ç®¡ç†å™¨")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨,å…¶å®æ–¹æ³•æ‰§è¡Œå¹¶æ²¡æœ‰å®ç°è¿æ¥, éœ€è¦åœ¨listen()æ–¹æ³•ä¸­è°ƒ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨channel.finishConnect() æ‰èƒ½å®Œæˆè¿æ¥")]),t._v("\n        channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InetSocketAddress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†é€šé“ç®¡ç†å™¨å’Œè¯¥é€šé“ç»‘å®š, å¹¶ä¸ºè¯¥é€šé“æ³¨å†ŒSelectionKey.OP_CONNECTäº‹ä»¶")]),t._v("\n        channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_CONNECT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** é‡‡ç”¨è½®è¯¢çš„æ–¹å¼ç›‘å¬selectorä¸Šæ˜¯å¦æœ‰éœ€è¦å¤„ç†çš„äº‹ä»¶, å¦‚æœæœ‰åˆ™è¿›è¡Œå¤„ç† */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è½®è¯¢è®¿é—®selector")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å¾—selectorä¸­é€‰ä¸­çš„é¡¹çš„è¿­ä»£å™¨")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectedKeys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ é™¤å·²é€‰çš„key,ä»¥é˜²é‡å¤å¤„ç†")]),t._v("\n                it"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥äº‹ä»¶å‘ç”Ÿ")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isConnectable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" channel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœæ­£åœ¨è¿æ¥, åˆ™å®Œæˆè¿æ¥")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isConnectionPending")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("finishConnect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®æˆéé˜»å¡")]),t._v("\n                    channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureBlocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è¿™é‡Œå¯ä»¥ç»™æœåŠ¡ç«¯å‘é€ä¿¡æ¯å“¦")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HelloServer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨å’ŒæœåŠ¡ç«¯è¿æ¥æˆåŠŸä¹‹å, ä¸ºäº†å¯ä»¥æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„ä¿¡æ¯, éœ€è¦ç»™é€šé“è®¾ç½®è¯»çš„æƒé™. ")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å¾—äº†å¯è¯»çš„äº‹ä»¶")]),t._v("\n                    channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OP_READ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** å¤„ç†è¯»å–æœåŠ¡ç«¯å‘æ¥çš„ä¿¡æ¯äº‹ä»¶ */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SelectionKey")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å’ŒæœåŠ¡ç«¯çš„readæ–¹æ³•ä¸€æ ·")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡å™¨å¯è¯»å–æ¶ˆæ¯:å¾—åˆ°äº‹ä»¶å‘ç”Ÿçš„Socketé€šé“")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),t._v(" channel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("channel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºè¯»å–çš„ç¼“å†²åŒº")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),t._v(" buffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯æ”¶åˆ°ä¿¡æ¯: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" len"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br")])]),s("p",[t._v("æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„æ•´ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/image-20230131225305650-20230212215332-q1ul7fm.png",alt:"image-20230131225305650"}})]),t._v(" "),s("p",[t._v("NIO æ¨¡å‹çš„ selector å°±åƒä¸€ä¸ªå¤§æ€»ç®¡, è´Ÿè´£ç›‘å¬å„ç§ IO äº‹ä»¶, ç„¶åè½¬äº¤ç»™å…¶ä»–çº¿ç¨‹å»å¤„ç†. "),s("mark",[s("strong",[t._v("è¿™é‡Œ Selector æ—¢è¦å¤„ç†è¿æ¥äº‹ä»¶, åˆè¦å¤„ç† IO è¯»å†™äº‹ä»¶")])]),t._v("â€‹"),s("mark",[t._v(".")])]),t._v(" "),s("p",[t._v("è¿™é‡Œé¦–å…ˆæ³¨å†Œä¸€ä¸ª "),s("strong",[t._v("ServerSocketChannel åˆ° Selector")]),t._v(" ä¸Š, è¿™é‡Œ ServerSocketChannel å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª"),s("strong",[t._v("æœåŠ¡å™¨")]),t._v(", ä¸“ç”¨äºå¤„ç†"),s("strong",[t._v("å®¢æˆ·ç«¯çš„è¿æ¥äº‹ä»¶")]),t._v(", å¹¶æŒç»­ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥. å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥è¿›æ¥, è¿™æ—¶å€™é€šè¿‡ ServerSocketChannel å¾—åˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥çš„æ™®é€šçš„ "),s("strong",[t._v("SocketChannel")]),t._v(", ç„¶åæŠŠè¿™ä¸ª "),s("strong",[t._v("SocketChannel æ³¨å†Œåˆ° Selector")]),t._v(" ä¸Š, æ­¤åå¦‚æœå®¢æˆ·ç«¯æœ‰è¯»å†™äº‹ä»¶å‘ç”Ÿå°±"),s("strong",[t._v("é€šè¿‡å®¢æˆ·ç«¯è‡ªå·±çš„ SocketChannel è¿›è¡Œå¤„ç†")]),t._v(". ä¹Ÿå°±æ˜¯è¯´ä¸Šå›¾ä¸­ Selector å…¶å®"),s("strong",[t._v("æ³¨å†Œäº†ä¸‰ä¸ªæ™®é€šçš„ SocketChannel å’Œä¸€ä¸ª ServerSocketChannel")]),t._v(", ä½†æ˜¯è¿™å››ä¸ªéƒ½æ˜¯ç±»ä¼¼çš„, åªæ˜¯å„è‡ªå¤„ç†çš„"),s("strong",[t._v("äº‹ä»¶ä¸åŒ")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("NIO ç›¸å¯¹äº BIO çš„éé˜»å¡ä½“ç°åœ¨ BIO çš„åç«¯çº¿ç¨‹éœ€è¦é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯å†™æ•°æ®(æ¯”å¦‚ read æ–¹æ³•), å¦‚æœå®¢æˆ·ç«¯ä¸å†™æ•°æ®çº¿ç¨‹å°±è¦é˜»å¡; è€Œ NIO æŠŠç­‰å¾…å®¢æˆ·ç«¯æ“ä½œçš„äº‹æƒ…äº¤ç»™äº† selector, selector è´Ÿè´£è½®è¯¢æ‰€æœ‰å·²æ³¨å†Œçš„å®¢æˆ·ç«¯, ç›‘å¬åˆ°æœ‰äº‹ä»¶å‘ç”Ÿåæ‰è½¬äº¤ç»™åç«¯çº¿ç¨‹å¤„ç†, è¿™æ ·åç«¯çº¿ç¨‹å°±ä¸éœ€è¦åšä»»ä½•é˜»å¡ç­‰å¾…, ç›´æ¥å¤„ç†å®¢æˆ·ç«¯äº‹ä»¶å³å¯, çº¿ç¨‹å¤„ç†äº‹ä»¶ååˆèƒ½ç»§ç»­å¤„ç†å…¶ä»–å®¢æˆ·ç«¯äº‹ä»¶")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Redis ä¹Ÿæ˜¯å…¸å‹çš„ NIO çº¿ç¨‹æ¨¡å‹")]),t._v(", selector æ”¶é›†æ‰€æœ‰è¿æ¥çš„äº‹ä»¶å¹¶è½¬äº¤ç»™åç«¯çº¿ç¨‹, çº¿ç¨‹è¿ç»­æ‰§è¡Œæ‰€æœ‰äº‹ä»¶å‘½ä»¤å¹¶å°†ç»“æœå†™å›å®¢æˆ·ç«¯.")]),t._v(" "),s("p",[s("strong",[t._v("ä¸Šè¿°æ¨¡å‹çš„ä¸€ä¸ªç¼ºç‚¹")]),t._v(": Selector ä¼šå¯¹æ”¶åˆ°çš„äº‹ä»¶è¿›è¡Œ"),s("strong",[t._v("é€ä¸€å¤„ç†")]),t._v(", å¦‚æœç”¨"),s("strong",[t._v("å•çº¿ç¨‹")]),t._v("å¤„ç†å¤§é‡äº‹ä»¶åˆ™å¯èƒ½å¤„ç†ä¸åŠæ—¶, é€ æˆç­‰å¾…å¤„ç†çš„äº‹ä»¶çš„å †ç§¯, å¯¼è‡´åé¢æ–°çš„è¿æ¥äº‹ä»¶å¾—ä¸åˆ°å¤„ç†, ä»è€Œæ— æ³•è¿›è¡Œè¿æ¥. å¯ä»¥"),s("strong",[t._v("ä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼è¿›è¡Œäº‹ä»¶å¤„ç†")]),t._v(", ä½†æ˜¯è¿™æ—¶å€™å°±å¯èƒ½å¼•å‘å¹¶å‘é—®é¢˜. è¯•æƒ³ä¸€ä¸‹, å¦‚æœæœ‰å‡ åä¸‡çš„è¿æ¥, selector éœ€è¦å¤„ç†å¤ªå¤šçš„è¯»å†™äº‹ä»¶, å°±ç®—ç”¨äº†çº¿ç¨‹æ± , é‚£ä¹ˆæŠŠäº‹ä»¶åˆ†å‘ç»™çº¿ç¨‹æ± å…¶å®ä¹Ÿæ˜¯éœ€è¦èŠ±è´¹æ—¶é—´çš„, è¿™åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¹Ÿä¸å¤ªå¥½. "),s("strong",[t._v("è¿™æ—¶å€™å°±å¯ä»¥é‡‡ç”¨ Netty äº†")]),t._v("!")]),t._v(" "),s("h5",{attrs:{id:"_6-bioä¸nioå¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-bioä¸nioå¯¹æ¯”"}},[t._v("#")]),t._v(" 6.BIOä¸NIOå¯¹æ¯”")]),t._v(" "),s("p",[t._v("NIO ä¸ BIO çš„åŒºåˆ«ä¸»è¦æœ‰: NIO æ˜¯"),s("strong",[t._v("éé˜»å¡")]),t._v("çš„; NIO é¢å‘"),s("strong",[t._v("å—")]),t._v(", I/O é¢å‘æµ; NIO é€‚ç”¨äºæœ‰"),s("strong",[t._v("å¤§é‡è¿æ¥")]),t._v("çš„åœºæ™¯, æ¯”å¦‚ P2P ç½‘ç»œ, èŠå¤©æœåŠ¡å™¨ç­‰. è€Œ BIO æ›´é€‚åˆè¿æ¥è¾ƒå°‘ä¸”å‘é€å¤§é‡æ•°æ®çš„åœºæ™¯.")]),t._v(" "),s("h4",{attrs:{id:"aio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aio"}},[t._v("#")]),t._v(" AIO")]),t._v(" "),s("p",[t._v("åœ¨ JDK7 ä¸­å¼•å…¥äº† AIO, å®ƒæ˜¯"),s("strong",[t._v("å¼‚æ­¥éé˜»å¡ IO æ¨¡å‹")]),t._v(". è™½ç„¶ NIO æä¾›äº†éé˜»å¡çš„æ–¹æ³•, ä½†å…¶ IO è¡Œä¸ºå…¶å®è¿˜æ˜¯"),s("strong",[t._v("åŒæ­¥")]),t._v("çš„. å¼‚æ­¥ IO åŸºäº"),s("strong",[t._v("äº‹ä»¶å’Œå›è°ƒæœºåˆ¶")]),t._v("å®ç°, ä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›, ä¸ä¼šé˜»å¡, å½“åå°å¤„ç†å®Œæˆ, æ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œ. AIO æœ€å¤§çš„ç‰¹æ€§å°±æ˜¯"),s("strong",[t._v("å¼‚æ­¥èƒ½åŠ›")]),t._v(", è¿™ç§èƒ½åŠ›å¯¹ socket ä¸æ–‡ä»¶ I/O éƒ½èµ·ä½œç”¨. AIO ä¸€èˆ¬é€‚ç”¨äº"),s("strong",[t._v("è¿æ¥æ•°è¾ƒå¤šä¸”è¿æ¥æ—¶é—´è¾ƒé•¿")]),t._v("çš„åº”ç”¨.")]),t._v(" "),s("p",[t._v("JDK7 ä¸»è¦å¢åŠ äº†ä¸‰ä¸ªæ–°çš„"),s("strong",[t._v("å¼‚æ­¥é€šé“")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("AsynchronousFileChannel")]),t._v(": ç”¨äº"),s("strong",[t._v("æ–‡ä»¶")]),t._v("å¼‚æ­¥è¯»å†™.")]),t._v(" "),s("li",[s("strong",[t._v("AsynchronousSocketChannel")]),t._v(": "),s("strong",[t._v("å®¢æˆ·ç«¯")]),t._v("å¼‚æ­¥ socket.")]),t._v(" "),s("li",[s("strong",[t._v("AsynchronousServerSocketChannel")]),t._v(": "),s("strong",[t._v("æœåŠ¡ç«¯")]),t._v("å¼‚æ­¥ socket.")])]),t._v(" "),s("p",[t._v("AIO å¹¶"),s("strong",[t._v("æ²¡æœ‰é‡‡ç”¨ NIO çš„å¤šè·¯å¤ç”¨å™¨")]),t._v(", è€Œæ˜¯ä½¿ç”¨"),s("strong",[t._v("å¼‚æ­¥é€šé“")]),t._v("çš„æ¦‚å¿µ. å…¶ "),s("strong",[t._v("read, write æ–¹æ³•")]),t._v("çš„è¿”å›ç±»å‹éƒ½æ˜¯ "),s("strong",[t._v("Future å¯¹è±¡")]),t._v(". è€Œ "),s("strong",[t._v("Future æ¨¡å‹æ˜¯å¼‚æ­¥")]),t._v("çš„, å…¶æ ¸å¿ƒæ€æƒ³æ˜¯: å»ä¸»å‡½æ•°ç­‰å¾…æ—¶é—´.")]),t._v(" "),s("p",[s("strong",[t._v("AIO æ¨¡å‹ä¸­é€šè¿‡ AsynchronousSocketChannel å’Œ AsynchronousServerSocketChannel å®Œæˆå¥—æ¥å­—é€šé“çš„å®ç°å¼‚æ­¥éé˜»å¡")]),t._v(". ä½† AIO åº•å±‚è¿˜æ˜¯ç”¨çš„ NIO, å…¶å®å°±æ˜¯å¯¹ NIO çš„å°è£…, å…¶æ€§èƒ½æ²¡å‡†è¿˜ä¸å¦‚ NIO, æ‰€ä»¥ç”¨çš„ä¸å¹¿æ³›, ä¸å¦‚ç›´æ¥ç”¨ Netty æ˜¯å¯¹æ›´åº•å±‚çš„å°è£….")]),t._v(" "),s("p",[t._v("Netty ä¹Ÿæ”¯æŒ AIO å¹¶æä¾›äº†ç›¸åº”çš„ç±»: AioEventLoopGroup, AioCompletionHandler, AioServerSocketChannel ç­‰. å…¶å®ƒä½¿ç”¨æ–¹æ³•å’Œ NIO ç±»ä¼¼. Netty ä¹‹å‰ä¹Ÿå°è¯•ä½¿ç”¨è¿‡ AIO, ä¸è¿‡åˆ"),s("strong",[t._v("æ”¾å¼ƒ")]),t._v("äº†.")]),t._v(" "),s("h4",{attrs:{id:"java-ioæ€»ç»“ä¸å¯¹æ¯”ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-ioæ€»ç»“ä¸å¯¹æ¯”ğŸŒŸ"}},[t._v("#")]),t._v(" Java IOæ€»ç»“ä¸å¯¹æ¯”ğŸŒŸ")]),t._v(" "),s("h5",{attrs:{id:"_1-æ¨¡å‹å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¨¡å‹å¯¹æ¯”"}},[t._v("#")]),t._v(" 1.æ¨¡å‹å¯¹æ¯”")]),t._v(" "),s("ul",[s("li",[s("mark",[s("strong",[t._v("BIO: åŒæ­¥é˜»å¡æ¨¡å‹")])]),t._v(", æœåŠ¡å™¨å®ç°æ¨¡å¼ä¸º"),s("strong",[t._v("ä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹")]),t._v(", å³å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†, å¦‚æœè¿™ä¸ªè¿æ¥ä¸åšä»»ä½•äº‹æƒ…ä¼šé€ æˆä¸å¿…è¦çš„çº¿ç¨‹å¼€é”€, å½“ç„¶å¯ä»¥é€šè¿‡çº¿ç¨‹æ± æœºåˆ¶æ”¹å–„. é€šè¿‡ "),s("strong",[t._v("Socket")]),t._v(" å’Œ "),s("strong",[t._v("ServerSocket")]),t._v(" ç±»è¿›è¡Œå¥—æ¥å­—é€šä¿¡.")]),t._v(" "),s("li",[s("mark",[s("strong",[t._v("NIO: åŒæ­¥éé˜»å¡æ¨¡å‹")])]),t._v(", æœåŠ¡å™¨å®ç°æ¨¡å¼ä¸º"),s("strong",[t._v("ä¸€ä¸ªçº¿ç¨‹å¤šä¸ªè¿æ¥")]),t._v(", å³å®¢æˆ·ç«¯å‘é€çš„"),s("strong",[t._v("è¿æ¥è¯·æ±‚")]),t._v("éƒ½ä¼šæ³¨å†Œåˆ°"),s("strong",[t._v("å¤šè·¯å¤ç”¨å™¨")]),t._v("ä¸Š, å¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥"),s("strong",[t._v("æœ‰ I/O è¯·æ±‚æ—¶")]),t._v("æ‰å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œ"),s("strong",[t._v("å¤„ç†")]),t._v(". é€šè¿‡ "),s("strong",[t._v("SocketChannel")]),t._v(" å’Œ "),s("strong",[t._v("ServerSocketChannel")]),t._v(" ç±»å®Œæˆå¥—æ¥å­—é€šé“é€šä¿¡.")]),t._v(" "),s("li",[s("mark",[s("strong",[t._v("AIO: å¼‚æ­¥éé˜»å¡æ¨¡å‹")])]),t._v(", æœåŠ¡å™¨å®ç°æ¨¡å¼ä¸º"),s("strong",[t._v("ä¸€ä¸ªæœ‰æ•ˆè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹")]),t._v(", å®¢æˆ·ç«¯çš„ I/O è¯·æ±‚éƒ½æ˜¯"),s("strong",[t._v("ç”± OS å…ˆå®Œæˆäº†å†é€šçŸ¥åº”ç”¨")]),t._v("è¿›è¡Œäº‹ä»¶å¤„ç†. é€šè¿‡ AsynchronousSocketChannel å’Œ AsynchronousServerSocketChannel ç±»å®ç°å¥—æ¥å­—é€šé“.")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("å±æ€§")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("BIO")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("ä¼ªå¼‚æ­¥IO")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("NIO")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("AIO")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Clientæ•°:IOçº¿ç¨‹æ•°")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("1 : 1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("M : N (M >= N)")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("M : 1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("M : 0")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("IOé˜»å¡ç±»å‹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("é˜»å¡IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("é˜»å¡IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("éé˜»å¡IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("éé˜»å¡IO")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("IOåŒæ­¥ç±»å‹")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("åŒæ­¥IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("åŒæ­¥IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("åŒæ­¥IO("),s("strong",[t._v("å¤šè·¯å¤ç”¨")]),t._v(")")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¼‚æ­¥IO")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("APIä½¿ç”¨éš¾åº¦")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ç®€å•")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ç®€å•")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¤æ‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸€èˆ¬")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("å¹¶å‘é‡")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ä½")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸­")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("é«˜")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("é«˜")])])])]),t._v(" "),s("p",[t._v("I/O å±äº"),s("strong",[t._v("åº•å±‚æ“ä½œ")]),t._v(", éœ€è¦"),s("strong",[t._v("æ“ä½œç³»ç»Ÿæ”¯æŒ")]),t._v(", å¹¶å‘ä¹Ÿéœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒ, æ‰€ä»¥æ€§èƒ½æ–¹é¢ä¸åŒæ“ä½œç³»ç»Ÿå·®å¼‚ä¼šæ¯”è¾ƒæ˜æ˜¾.")]),t._v(" "),s("h5",{attrs:{id:"_2-bio-nio-aioé€‚ç”¨åœºæ™¯åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-bio-nio-aioé€‚ç”¨åœºæ™¯åˆ†æ"}},[t._v("#")]),t._v(" 2.BIO/NIO/AIOé€‚ç”¨åœºæ™¯åˆ†æ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("BIO")]),t._v(" æ¨¡å‹é€‚ç”¨äº"),s("strong",[t._v("è¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®š")]),t._v("çš„åœºæ™¯, è¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜, ç¨‹åºç›´è§‚ç®€å•æ˜“ç†è§£.")]),t._v(" "),s("li",[s("strong",[t._v("NIO")]),t._v(" æ¨¡å‹é€‚ç”¨äº"),s("strong",[t._v("è¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­")]),t._v("(è½»æ“ä½œ)çš„åœºæ™¯, æ¯”å¦‚èŠå¤©æœåŠ¡å™¨, å¹¶å‘å±€é™äºåº”ç”¨ä¸­, ç¼–ç¨‹æ¯”è¾ƒå¤æ‚.")]),t._v(" "),s("li",[s("strong",[t._v("AIO")]),t._v(" æ¨¡å‹ä½¿ç”¨äº"),s("strong",[t._v("è¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿")]),t._v("(é‡æ“ä½œ)çš„åœºæ™¯, æ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨, å……åˆ†è°ƒç”¨ "),s("strong",[t._v("OS å‚ä¸")]),t._v("å¹¶å‘æ“ä½œ, ç¼–ç¨‹æ¯”è¾ƒå¤æ‚.")])]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("p",[t._v("â€")])])}),[],!1,null,null,null);s.default=e.exports}}]);