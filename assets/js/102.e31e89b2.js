(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{417:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_220-mysqlé”ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_220-mysqlé”ğŸŒŸ"}},[s._v("#")]),s._v(" 220.MySQLé”ğŸŒŸ")]),s._v(" "),t("h4",{attrs:{id:"é”åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”åŸºç¡€"}},[s._v("#")]),s._v(" é”åŸºç¡€")]),s._v(" "),t("h5",{attrs:{id:"_1-æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" 1.æ¦‚è¿°")]),s._v(" "),t("p",[t("strong",[s._v("é”æ˜¯æ•°æ®åº“åœ¨å¹¶å‘è®¿é—®æ—¶ä¿è¯æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§çš„ä¸»è¦æœºåˆ¶")]),s._v("ã€‚åœ¨ MySQL ä¸­ï¼Œä¸åŒå­˜å‚¨å¼•æ“ä½¿ç”¨ä¸åŒçš„åŠ é”æ–¹å¼. ä¸‹é¢ä»¥ InnoDB å­˜å‚¨å¼•æ“ä¸ºä¾‹ä»‹ç» MySQL ä¸­çš„é”æœºåˆ¶ï¼Œå…¶ä»–å­˜å‚¨å¼•æ“ä¸­çš„é”ç›¸å¯¹ç®€å•ä¸€äº›ã€‚")]),s._v(" "),t("p",[s._v("æ— è®ºä½•æ—¶, åªè¦æœ‰å¤šä¸ªæŸ¥è¯¢éœ€è¦åœ¨"),t("strong",[s._v("åŒä¸€æ—¶åˆ»ä¿®æ”¹æ•°æ®")]),s._v(", éƒ½ä¼šäº§ç”Ÿå¹¶å‘æ§åˆ¶çš„é—®é¢˜. ä¸ºäº†è§£å†³å¤šäº‹åŠ¡å¹¶å‘é—®é¢˜, æ•°æ®åº“è®¾è®¡äº†äº‹åŠ¡éš”ç¦»æœºåˆ¶, é”æœºåˆ¶, MVCC å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶éš”ç¦»æœºåˆ¶, æ—¥å¿—æœºåˆ¶, ç”¨ä¸€æ•´å¥—æœºåˆ¶æ¥è§£å†³å¤šäº‹åŠ¡å¹¶å‘é—®é¢˜.")]),s._v(" "),t("p",[s._v("é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶. åœ¨æ•°æ®åº“ä¸­, é™¤ CPU, I/O ç­‰ä¼ ç»Ÿè®¡ç®—èµ„æºçš„äº‰ç”¨ä»¥å¤–, æ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›éœ€è¦ç”¨æˆ·"),t("strong",[s._v("å…±äº«çš„èµ„æº")]),s._v(". å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§, æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜, é”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ .")]),s._v(" "),t("p",[s._v("MySQL æ¯ç§å­˜å‚¨å¼•æ“éƒ½å¯ä»¥å®ç°è‡ªå·±çš„é”ç­–ç•¥å’Œé”ç²’åº¦.")]),s._v(" "),t("p",[s._v("é”çš„æ ¹æœ¬ç‰¹æ€§: "),t("strong",[s._v("é”æ˜¯å’Œç´¢å¼•, éš”ç¦»çº§åˆ«å¯†åˆ‡ç›¸å…³çš„")]),s._v(". åœ¨ InnoDB å¼•æ“é‡Œé¢, é”å’Œç´¢å¼•, éš”ç¦»çº§åˆ«éƒ½æ˜¯æœ‰å¯†åˆ‡å…³ç³»çš„. åœ¨ InnoDB å¼•æ“é‡Œé¢, é”æ˜¯ä¾èµ–äºç´¢å¼•æ¥å®ç°çš„. æˆ–è€…è¯´, é”éƒ½æ˜¯åŠ åœ¨ç´¢å¼•é¡¹ä¸Šçš„. å› æ­¤, å¦‚æœä¸€ä¸ªæŸ¥è¯¢ç”¨äº†ç´¢å¼•, é‚£ä¹ˆä¼šç”¨è¡Œé”, å¦‚æœæ²¡ç”¨åˆ°ä»»ä½•ç´¢å¼•, é‚£ä¹ˆå°±ä¼šç”¨è¡¨é”. æ­¤å¤–, åœ¨ MySQL é‡Œé¢, é—´éš™é”å’Œä¸´é”®é”æ˜¯åªå·¥ä½œåœ¨å¯é‡å¤è¯»è¿™ä¸ªéš”ç¦»çº§åˆ«ä¸‹çš„.")]),s._v(" "),t("h5",{attrs:{id:"_2-é‡Šæ”¾é”æ—¶æœº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é‡Šæ”¾é”æ—¶æœº"}},[s._v("#")]),s._v(" 2.é‡Šæ”¾é”æ—¶æœº")]),s._v(" "),t("p",[s._v("è®¸å¤šäººè®¤ä¸ºé”æ˜¯åœ¨è¯­å¥æ‰§è¡Œå®Œæ¯•ä¹‹åå°±ç«‹åˆ»é‡Šæ”¾æ‰çš„. å…¶å®å¹¶ä¸æ˜¯, å®ƒæ˜¯åœ¨"),t("strong",[s._v("æ•´ä¸ªäº‹åŠ¡ç»“æŸä¹‹åæ‰é‡Šæ”¾")]),s._v("çš„. æ¢å¥è¯æ¥è¯´, "),t("mark",[t("strong",[s._v("å½“ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨ç»™æ•°æ®åŠ ä¸Šé”ä¹‹å, åªæœ‰åœ¨æ‰§è¡Œ Rollback æˆ–è€… Commit çš„æ—¶å€™, é”æ‰ä¼šè¢«é‡Šæ”¾æ‰")])]),s._v(".")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"/img/147aab4d2904995f473919e089e64cca-20231223175001-s60p1oc.png",alt:""}}),s._v("â€‹")]),s._v(" "),t("h4",{attrs:{id:"é”çš„åˆ†ç±»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”çš„åˆ†ç±»"}},[s._v("#")]),s._v(" é”çš„åˆ†ç±»")]),s._v(" "),t("p",[s._v("ä»ä¸åŒè§’åº¦å¯ä»¥å¯¹ MySQL é”è¿›è¡Œåˆ†ç±»ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä»å¯¹æ•°æ®çš„æ“ä½œç²’åº¦åˆ†: "),t("strong",[s._v("è¡¨é”, è¡Œé”")]),s._v(".")]),s._v(" "),t("li",[s._v("ä»å¯¹æ•°æ®çš„æ“ä½œç±»å‹åˆ†: "),t("strong",[s._v("è¯»é”")]),s._v("å’Œ"),t("strong",[s._v("å†™é”")]),s._v("(éƒ½å±äºæ‚²è§‚é”), ä»¥åŠæ„å‘é”.")]),s._v(" "),t("li",[s._v("ä»æ€§èƒ½ä¸Šåˆ†ä¸ºä¹è§‚é”(ç”¨ç‰ˆæœ¬å¯¹æ¯”æˆ– CAS æœºåˆ¶)å’Œæ‚²è§‚é”, ä¹è§‚é”é€‚åˆè¯»æ“ä½œè¾ƒå¤šçš„åœºæ™¯, æ‚²è§‚é”é€‚åˆå†™æ“ä½œè¾ƒå¤šçš„åœºæ™¯, å¦‚æœåœ¨å†™æ“ä½œè¾ƒå¤šçš„åœºæ™¯ä½¿ç”¨ä¹è§‚é”ä¼šå¯¼è‡´æ¯”å¯¹æ¬¡æ•°è¿‡å¤š, å½±å“æ€§èƒ½.")])]),s._v(" "),t("h5",{attrs:{id:"_1-è¡¨é”ä¸è¡Œé”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¡¨é”ä¸è¡Œé”"}},[s._v("#")]),s._v(" 1.è¡¨é”ä¸è¡Œé”")]),s._v(" "),t("p",[s._v("MySQL ä¸­çš„é”å¯ä»¥æŒ‰ç…§"),t("mark",[t("strong",[s._v("åŠ é”ç²’åº¦")])]),s._v("åˆ†ä¸º"),t("strong",[s._v("é”å®šæ•´ä¸ªè¡¨çš„è¡¨é”")]),s._v("å’Œ"),t("strong",[s._v("é”å®šæ•°æ®è¡Œçš„è¡Œé”")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("è¡¨çº§é”å…·æœ‰å¼€é”€å°ã€åŠ é”å¿«çš„ç‰¹æ€§ï¼›è¡¨çº§é”çš„é”å®šç²’åº¦è¾ƒå¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡é«˜ï¼Œæ”¯æŒçš„å¹¶å‘åº¦ä½ã€‚")]),s._v(" "),t("li",[s._v("è¡Œçº§é”å…·æœ‰å¼€é”€å¤§ï¼ŒåŠ é”æ…¢çš„ç‰¹æ€§ï¼›è¡Œçº§é”çš„é”å®šç²’åº¦è¾ƒå°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼Œæ”¯æŒçš„å¹¶å‘åº¦é«˜ã€‚")])]),s._v(" "),t("p",[s._v("è¡Œé”ä¸è¡¨é”éƒ½æ˜¯æ ¹æ®é”çš„èŒƒå›´æ¥åˆ’åˆ†çš„. ä¸€èˆ¬æ¥è¯´, "),t("mark",[t("strong",[s._v("è¡Œé”æ˜¯æŒ‡é”ä½è¡Œ, å¯èƒ½æ˜¯é”ä½ä¸€è¡Œ, ä¹Ÿå¯èƒ½æ˜¯é”ä½å¤šè¡Œ. è¡¨é”åˆ™æ˜¯ç›´æ¥å°†æ•´ä¸ªè¡¨éƒ½é”ä½")])]),s._v(".")]),s._v(" "),t("p",[s._v("InnoDB å­˜å‚¨å¼•æ“åŒæ—¶æ”¯æŒè¡Œé”å’Œè¡¨é”ï¼Œ"),t("strong",[s._v("é»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨è¡Œé”")]),s._v("ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è¡Œçº§é”åªåœ¨å­˜å‚¨å¼•æ“å±‚å®ç°")]),s._v(", MySQL æœåŠ¡å™¨å±‚æ²¡æœ‰å®ç°. æœåŠ¡å™¨å±‚å®Œå…¨ä¸äº†è§£å­˜å‚¨å¼•æ“ä¸­çš„é”å®ç°.")]),s._v(" "),t("p",[s._v("ä»»ä½•æ—¶å€™, åœ¨ç»™å®šçš„èµ„æºä¸Š, "),t("strong",[s._v("é”å®šçš„æ•°æ®é‡è¶Šå°‘, åˆ™ç³»ç»Ÿçš„å¹¶å‘ç¨‹åº¦è¶Šé«˜, åªè¦ç›¸äº’ä¹‹é—´ä¸å‘ç”Ÿå†²çªå³å¯")]),s._v(". æ‰€è°“çš„é”ç­–ç•¥, å°±æ˜¯åœ¨é”çš„å¼€é”€å’Œæ•°æ®çš„å®‰å…¨æ€§ä¹‹é—´å¯»æ±‚å¹³è¡¡, è¿™ç§å¹³è¡¡å½“ç„¶ä¹Ÿä¼šå½±å“åˆ°æ€§èƒ½.")]),s._v(" "),t("h5",{attrs:{id:"_2-å…±äº«é”ä¸æ’ä»–é”-è¯»å†™é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å…±äº«é”ä¸æ’ä»–é”-è¯»å†™é”"}},[s._v("#")]),s._v(" 2.å…±äº«é”ä¸æ’ä»–é”(è¯»å†™é”)")]),s._v(" "),t("blockquote",[t("p",[s._v("å…±äº«é”ä¸æ’ä»–é”çš„å®šä¹‰")])]),s._v(" "),t("p",[s._v("InnoDB å®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„"),t("mark",[t("strong",[s._v("è¡Œé”")])]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å…±äº«é”(è¯»é”)")]),s._v(" ï¼šç®€ç§° S é”ã€‚å…è®¸è·å¾—è¯¥é”çš„äº‹åŠ¡"),t("strong",[s._v("è¯»å–æ•°æ®è¡Œ")]),s._v("ï¼ŒåŒæ—¶å…è®¸å…¶ä»–äº‹åŠ¡è·å¾—è¯¥æ•°æ®è¡Œä¸Šçš„å…±äº«é”(è¯»é”)ï¼Œå¹¶ä¸”é˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—æ•°æ®è¡Œä¸Šçš„æ’ä»–é”(å†™é”)ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("æ’ä»–é”(å†™é”)")]),s._v(" ï¼šç®€ç§° X é”ã€‚å…è®¸è·å¾—è¯¥é”çš„äº‹åŠ¡"),t("strong",[s._v("æ›´æ–°æˆ–åˆ é™¤æ•°æ®è¡Œ")]),s._v("ï¼ŒåŒæ—¶é˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—è¯¥æ•°æ®è¡Œä¸Šçš„å…±äº«é”(è¯»é”)å’Œæ’ä»–é”(å†™é”)ã€‚")])]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("å¯¹æ•°æ®è¡ŒåŠ äº†å…±äº«é”(è¯»é”)ä¹‹åï¼Œå¯ä»¥å¯¹æ•°æ®è¡Œè¿›è¡Œè¯»å–ï¼›å¯¹æ•°æ®è¡ŒåŠ äº†æ’ä»–é”(å†™é”)ï¼Œå¯ä»¥å¯¹æ•°æ®è¡Œè¿›è¡Œè¯»å–å’Œä¿®æ”¹")])]),s._v(".")]),s._v(" "),t("p",[s._v("åªæœ‰è¿™æ ·, æ‰èƒ½ç¡®ä¿åœ¨ç»™å®šçš„æ—¶é—´é‡Œ, "),t("strong",[s._v("åªæœ‰ä¸€ä¸ªç”¨æˆ·èƒ½æ‰§è¡Œå†™å…¥, å¹¶é˜²æ­¢å…¶ä»–ç”¨æˆ·è¯»å–")]),s._v("æ­£åœ¨å†™å…¥çš„åŒä¸€èµ„æº.")]),s._v(" "),t("blockquote",[t("p",[s._v("å…±äº«é”ä¸æ’ä»–é”çš„å…¼å®¹æ€§")])]),s._v(" "),t("p",[s._v("è¿™ä¸¤ç§è¡Œé”ä¹‹é—´çš„å…¼å®¹æ€§å¦‚ä¸‹ï¼š")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20250220000044-fjpm43i.png",alt:"image"}}),s._v("â€‹")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("å…±äº«é”å’Œå…±äº«é”å¯ä»¥å…¼å®¹ï¼Œæ’ä»–é”å’Œå…¶å®ƒé”éƒ½ä¸å…¼å®¹")])]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚ï¼Œäº‹åŠ¡ A è·å–äº†ä¸€è¡Œæ•°æ®çš„å…±äº«é”ï¼Œäº‹åŠ¡ B å¯ä»¥ç«‹å³è·å¾—è¯¥æ•°æ®è¡Œçš„å…±äº«é”ï¼Œä¹Ÿå°±æ˜¯é”å…¼å®¹ï¼›ä½†æ˜¯æ­¤æ—¶äº‹åŠ¡ B å¦‚æœæƒ³è·å¾—è¯¥æ•°æ®è¡Œçš„æ’ä»–é”ï¼Œåˆ™å¿…é¡»ç­‰å¾…äº‹åŠ¡ A é‡Šæ•°æ®è¡Œä¸Šçš„å…±äº«é”ï¼Œæ­¤ç§æƒ…å†µå­˜åœ¨é”å†²çªã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‰‹åŠ¨åŠ å…±äº«é”ä¸æ’ä»–é”")])]),s._v(" "),t("p",[s._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®åº“ä¸­çš„é”éƒ½å¯ä»¥è‡ªåŠ¨è·å–ï¼›ä½†æ˜¯ä¹Ÿå¯ä»¥"),t("strong",[s._v("æ‰‹åŠ¨åŠ è¯»å†™é”")]),s._v("ã€‚")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("ç±»å‹")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("è¯­å¥")]),s._v(" "),t("th",[s._v("å¤‡æ³¨")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("åŠ å…±äº«é”(è¯»é”)")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("mark",[t("strong",[s._v("select ... for share")])])]),s._v(" "),t("td",[s._v("MySQL8.0 åçš„ç‰ˆæœ¬")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("åŠ å…±äº«é”(è¯»é”)")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("mark",[t("strong",[s._v("select ... lock in share mode")])])]),s._v(" "),t("td",[s._v("MySQL8.0 å‰çš„ç‰ˆæœ¬")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("åŠ æ’ä»–é”(å†™é”)")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("mark",[t("strong",[s._v("select ... for update")])])]),s._v(" "),t("td")])])]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹")])]),s._v(" "),t("p",[s._v("æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªè¡¨ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  c1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  c2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  c3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("å…¶ä¸­ï¼Œid æ˜¯ä¸»é”®ï¼›c1 ä¸Šåˆ›å»ºäº†ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼›c2 ä¸Šåˆ›å»ºäº†ä¸€ä¸ªéå”¯ä¸€ç´¢å¼•ï¼›c3 ä¸Šæ²¡æœ‰ç´¢å¼•ã€‚æ¥ä¸‹æ¥çš„ç¤ºä¾‹éƒ½ä½¿ç”¨ MySQL é»˜è®¤çš„éš”ç¦»çº§åˆ« Repeatable Readï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚")]),s._v(" "),t("p",[s._v("ç„¶å"),t("strong",[s._v("åˆ›å»ºä¸¤ä¸ªæ•°æ®åº“è¿æ¥ T1 å’Œ T2")]),s._v("ï¼Œå…ˆåœ¨ T1 ä¸­"),t("strong",[s._v("ä½¿ç”¨å…±äº«é”é”å®šä¸€è¡Œæ•°æ®")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å¯ä¸€ä¸ªäº‹åŠ¡")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("share")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# T1å°è¯•åŠ å…±äº«é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ å…±äº«é”æˆåŠŸå¹¶è¯»å–åˆ°æ•°æ®")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("åœ¨äº‹åŠ¡ä¸­ä½¿ç”¨ "),t("code",[s._v("select ... for share")]),s._v("â€‹ è¯­å¥è·å¾—äº†æ•°æ®è¡Œ id = 1 ä¸Šçš„å…±äº«é”ã€‚ç”±äº InnoDB ä¸­çš„è‡ªåŠ¨æäº¤ autocommit é»˜è®¤è®¾ç½®ä¸º ONï¼Œæ‰€ä»¥å¿…é¡»åœ¨äº‹åŠ¡ä¸­ä¸ºæ•°æ®è¡ŒåŠ é”ï¼›æˆ–è€…å°† autocommit è®¾ç½®ä¸º OFFã€‚")]),s._v(" "),t("p",[s._v("ç„¶ååœ¨ T2 ä¸­æ‰§è¡Œä»¥ä¸‹è¯­å¥åŒæ ·å°è¯•å¯¹ id = 1 çš„æ•°æ®è¡ŒåŠ "),t("strong",[s._v("å…±äº«é”")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("share")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# T2ä¹Ÿå°è¯•å¯¹id=1åŠ å…±äº«é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ å…±äº«é”æˆåŠŸå¹¶è¯»å–åˆ°æ•°æ®")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("ç»“æœæ˜¾ç¤ºï¼Œåœ¨ T2 ä¸­æˆåŠŸè·å–æ”¹è¡Œæ•°æ®ä¸Šçš„å…±äº«é”ã€‚ç„¶åå°è¯•ä½¿ç”¨ "),t("code",[s._v("select ... for update")]),s._v("â€‹ å‘½ä»¤è·å–æ’ä»–é”ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°è¯•è·å–id=1æ•°æ®è¡Œçš„æ’ä»–é”")]),s._v("\nERROR "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1205")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Lock")]),s._v(" wait timeout exceeded"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" try restarting "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("transaction")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("æ­¤æ—¶è¯¥å‘½ä»¤ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€å¹¶ä¸”æœ€ç»ˆè¶…æ—¶ã€‚ä¹Ÿå°±æ˜¯è¯´å…±äº«é”å’Œæ’ä»–é”ä¸å…¼å®¹ã€‚")]),s._v(" "),t("h5",{attrs:{id:"_3-æ„å‘é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ„å‘é”"}},[s._v("#")]),s._v(" 3.æ„å‘é”")]),s._v(" "),t("blockquote",[t("p",[s._v("æ„å‘é”çš„å¼•å…¥ä¸ä½¿ç”¨åœºæ™¯")])]),s._v(" "),t("p",[s._v("InnoDB é™¤äº†æ”¯æŒè¡Œçº§é”ï¼Œè¿˜æ”¯æŒ"),t("strong",[s._v("ç”± MySQL æœåŠ¡å±‚å®ç°çš„")]),s._v("â€‹"),t("mark",[t("strong",[s._v("è¡¨çº§é”")])]),s._v("(LOCK TABLES ... WRITE åœ¨æŒ‡å®šçš„è¡¨åŠ ä¸Šè¡¨çº§æ’ä»–é”)ã€‚"),t("strong",[s._v("å½“è¿™ä¸¤ç§é”åŒæ—¶å­˜åœ¨æ—¶ï¼Œå¯èƒ½å¯¼è‡´å†²çª")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("åœ¨ MySQL é‡Œé¢, "),t("strong",[s._v("ä½¿ç”¨æ„å‘é”çš„å…¸å‹åœºæ™¯æ˜¯åœ¨å¢åˆ æ”¹æŸ¥çš„æ—¶å€™, å¯¹è¡¨ç»“æ„å®šä¹‰åŠ ä¸€ä¸ªæ„å‘å…±äº«é”, é˜²æ­¢åœ¨æŸ¥è¯¢çš„æ—¶å€™æœ‰äººä¿®æ”¹è¡¨ç»“æ„. è€Œåœ¨ä¿®æ”¹è¡¨ç»“æ„çš„æ—¶å€™, åˆ™ä¼šåŠ ä¸€ä¸ªæ„å‘æ’å®ƒé”. è¿™ä¹Ÿå°±æ˜¯ä¿®æ”¹è¡¨ç»“æ„çš„æ—¶å€™ä¼šç›´æ¥é˜»å¡æ‰æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥è¯­å¥çš„åŸå› ")]),s._v(". ä½¿ç”¨æ„å‘é”èƒ½å¤Ÿæé«˜æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½, å¹¶ä¸”é¿å…æ­»é”é—®é¢˜.")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚ï¼Œäº‹åŠ¡ A è·å–äº†"),t("strong",[s._v("è¡¨ä¸­ä¸€è¡Œæ•°æ®çš„å…±äº«é”(è¯»é”)")]),s._v(" ï¼›ç„¶åäº‹åŠ¡ B ç”³è¯·è¯¥"),t("strong",[s._v("è¡¨çš„æ’ä»–é”(å†™é”)(ä¾‹å¦‚ä¿®æ”¹è¡¨çš„ç»“æ„)")]),s._v(" ã€‚å¦‚æœäº‹åŠ¡ B åŠ é”æˆåŠŸï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥èƒ½ä¿®æ”¹è¡¨ä¸­çš„ä»»æ„æ•°æ®è¡Œï¼Œ"),t("strong",[s._v("ä½†æ˜¯ A æŒæœ‰çš„è¡Œé”ä¸å…è®¸ä¿®æ”¹é”å®šçš„æ•°æ®è¡Œã€‚æ˜¾ç„¶æ•°æ®åº“éœ€è¦é¿å…è¿™ç§é—®é¢˜ï¼ŒB çš„åŠ é”ç”³è¯·éœ€è¦ç­‰å¾… A é‡Šæ”¾è¡Œé”")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20250220093017-66kjy59.png",alt:"image"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­äº‹åŠ¡ B æ˜¯å¦åº”è¯¥è·å–è¡¨çº§é”å‘¢ï¼Ÿé¦–å…ˆéœ€è¦çœ‹è¯¥è¡¨æ˜¯å¦å·²ç»è¢«å…¶ä»–äº‹åŠ¡åŠ ä¸Šäº†è¡¨çº§é”ï¼Œç„¶å"),t("strong",[s._v("ä¾æ¬¡æŸ¥çœ‹è¯¥è¡¨ä¸­çš„æ¯ä¸€è¡Œæ˜¯å¦å·²ç»è¢«å…¶ä»–äº‹åŠ¡åŠ ä¸Šäº†è¡Œçº§é”")]),s._v("ã€‚è¿™ç§æ–¹å¼éœ€è¦"),t("strong",[s._v("éå†æ•´ä¸ªè¡¨ä¸­çš„è®°å½•")]),s._v("ï¼Œæ•ˆç‡å¾ˆä½ã€‚ä¸ºæ­¤ï¼ŒInnoDB å¼•å…¥äº†å¦å¤–ä¸€ç§é”ï¼š"),t("strong",[s._v("æ„å‘é”")]),s._v("(Intention Lock)ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("å®šä¹‰")])]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("æ„å‘é”å±äºè¡¨çº§é”(æ³¨æ„!!)ï¼Œç”± InnoDB è‡ªåŠ¨æ·»åŠ . æ¯”å¦‚ç»™æŸè¡Œæ•°æ®åŠ å†™é”ï¼Œé‚£ä¹ˆå°±ä¼šä¸ºæ•´ä¸ªè¡¨åŠ ä¸Šæ„å‘æ’ä»–é”")])]),s._v("ã€‚")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("æ„å‘é”çš„ä¸»è¦ä½œç”¨æ˜¯è¡¨æ˜æŸä¸ªäº‹åŠ¡æ­£åœ¨æˆ–è€…å³å°†ç»™è¡¨ä¸­çš„æ•°æ®è¡ŒåŠ è¡Œé”")])]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æ„å‘é”ä¹Ÿåˆ†ä¸ºå…±äº«å’Œæ’ä»–ä¸¤ç§æ–¹å¼ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ„å‘å…±äº«é”")]),s._v("(IS)ï¼šäº‹åŠ¡åœ¨"),t("strong",[s._v("ç»™")]),s._v("â€‹"),t("mark",[t("strong",[s._v("æ•°æ®è¡Œ")])]),s._v("â€‹"),t("strong",[s._v("åŠ è¡Œçº§å…±äº«é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆå–å¾—")]),s._v("â€‹"),t("mark",[t("strong",[s._v("è¯¥è¡¨")])]),s._v("â€‹"),t("strong",[s._v("çš„ IS é”")]),s._v("ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("æ„å‘æ’ä»–é”")]),s._v("(IX)ï¼šäº‹åŠ¡åœ¨"),t("strong",[s._v("ç»™")]),s._v("â€‹"),t("mark",[t("strong",[s._v("æ•°æ®è¡Œ")])]),s._v("â€‹"),t("strong",[s._v("åŠ è¡Œçº§æ’ä»–é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆå–å¾—")]),s._v("â€‹"),t("mark",[t("strong",[s._v("è¯¥è¡¨")])]),s._v("â€‹"),t("strong",[s._v("çš„ IX é”")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("å†çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œæ­¤æ—¶ï¼Œäº‹åŠ¡ A å¿…é¡»"),t("strong",[s._v("å…ˆç”³è¯·è¯¥è¡¨çš„æ„å‘å…±äº«é”")]),s._v("ï¼ŒæˆåŠŸåå†ç”³è¯·æ•°æ®è¡Œçš„è¡Œé”ã€‚äº‹åŠ¡ B ç”³è¯·è¡¨é”æ—¶ï¼Œæ•°æ®åº“"),t("strong",[s._v("æŸ¥çœ‹è¯¥è¡¨æ˜¯å¦å·²ç»è¢«å…¶ä»–äº‹åŠ¡åŠ ä¸Šäº†è¡¨çº§é”")]),s._v("ï¼›å¦‚æœå‘ç°è¯¥è¡¨ä¸Šå­˜åœ¨æ„å‘å…±äº«é”ï¼Œè¯´æ˜è¡¨ä¸­æŸäº›æ•°æ®è¡Œä¸Šå­˜åœ¨å…±äº«é”ï¼Œäº‹åŠ¡ B ç”³è¯·çš„å†™é”ä¼šè¢«é˜»å¡ã€‚")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20250220093033-axh7bc2.png",alt:"image"}}),s._v("â€‹")]),s._v(" "),t("p",[t("strong",[s._v("å½“æœ‰äº‹åŠ¡ç»™æ•°æ®è¡ŒåŠ äº†è¯»é”æˆ–å†™é”æ—¶, åŒæ—¶ä¼šç»™è¡¨è®¾ç½®ä¸€ä¸ªæ ‡è¯†, ä»£è¡¨å·²ç»æœ‰è¡Œé”äº†")]),s._v(", å…¶ä»–äº‹åŠ¡è¦æƒ³å¯¹è¡¨åŠ è¡¨é”æ—¶, å°±ä¸å¿…é€è¡Œåˆ¤æ–­æœ‰æ²¡æœ‰è¡Œé”å¯èƒ½è·Ÿè¡¨é”å†²çªäº†, ç›´æ¥è¯»è¿™ä¸ªæ ‡è¯†å°±å¯ä»¥ç¡®å®šè‡ªå·±è¯¥ä¸è¯¥åŠ è¡¨é”. "),t("strong",[s._v("è¿™ä¸ªæ ‡è¯†å°±æ˜¯æ„å‘é”")]),s._v(".")]),s._v(" "),t("p",[s._v("æ³¨æ„, æ„å‘é”çš„æ„å‘å¼ºè°ƒçš„å°±æ˜¯æƒ³è¦æ‹¿åˆ°è¿™ä¸ªé”, ä½†æ˜¯"),t("strong",[s._v("æœ€ç»ˆèƒ½å¦æ‹¿åˆ°è¿™ä¸ªé”æ˜¯ä¸ç¡®å®šçš„")]),s._v(".")]),s._v(" "),t("blockquote",[t("p",[s._v("æ„å‘é”çš„å…¼å®¹æ€§")])]),s._v(" "),t("p",[s._v("å› æ­¤ï¼Œæ„å‘é”æ˜¯ä¸ºäº†"),t("strong",[s._v("ä½¿å¾—è¡Œé”å’Œè¡¨é”èƒ½å¤Ÿå…±å­˜ï¼Œä»è€Œå®ç°å¤šç²’åº¦çš„é”æœºåˆ¶")]),s._v("ã€‚ä»¥ä¸‹æ˜¯"),t("strong",[s._v("è¡¨çº§é”")]),s._v("å’Œ"),t("strong",[s._v("è¡¨çº§æ„å‘é”")]),s._v("çš„å…¼å®¹æ€§ï¼š")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20250220090837-cdt1x77.png",alt:"image"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("ç®€å•æ¥è¯´ï¼Œ"),t("strong",[s._v("æ„å‘é”å’Œè¡Œé”ä¹‹é—´åªæœ‰å…±äº«é”å…¼å®¹ï¼Œæ„å‘é”å’Œæ„å‘é”ä¹‹é—´éƒ½å¯ä»¥å…¼å®¹")]),s._v("ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹1ï¼šæ’ä»–é”ä¸æ„å‘æ’ä»–é”çš„å†²çª")])]),s._v(" "),t("p",[s._v("ä»¥"),t("strong",[s._v("æ„å‘æ’ä»–é”")]),s._v(" IX ä¸ºä¾‹ï¼Œç»§ç»­ä¸Šé¢çš„ç¤ºä¾‹ã€‚å…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹åŠ é”è¯­å¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ æ’ä»–é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ æ’ä»–é”æˆåŠŸå¹¶è¯»å–åˆ°æ•°æ®ï¼ŒåŒæ—¶InnoDBä¹Ÿç»™è¡¨åŠ ä¸Šäº†æ„å‘æ’ä»–é”!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("åœ¨äº‹åŠ¡ä¸­"),t("strong",[s._v("ä¸ºè¡¨ t ä¸­çš„æ•°æ®è¡Œ id = 1 åŠ ä¸Šäº†æ’ä»–é”ï¼ŒåŒæ—¶ä¼šä¸ºè¡¨ t åŠ ä¸Šæ„å‘æ’ä»–é”")]),s._v("ã€‚ç„¶ååœ¨ T2 ä¸­æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- lock tables t write;")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("â€‹"),t("code",[s._v("lock tables ... read")]),s._v("â€‹ è¯­å¥ç”¨äºä¸ºè¡¨ t åŠ ä¸Š"),t("strong",[s._v("è¡¨çº§å…±äº«é”")]),s._v("ï¼›å› ä¸ºæ„å‘æ’ä»–é”å’Œè¡¨çº§å…±äº«é”å†²çªï¼Œæ‰€ä»¥ T2 ä¸€ç›´ç­‰å¾… T1 é‡Šæ”¾é”ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ "),t("code",[s._v("lock tables ... write")]),s._v("â€‹ è¯­å¥ä¸ºè¡¨ t åŠ ä¸Š"),t("strong",[s._v("è¡¨çº§æ’ä»–é”")]),s._v("ï¼›å› ä¸ºæ„å‘æ’ä»–é”å’Œè¡¨çº§æ’ä»–é”å†²çªï¼Œæ‰€ä»¥è¯¥è¯­å¥ä¹Ÿä¼šä¸€ç›´ç­‰å¾… T1 é‡Šæ”¾é”ã€‚")]),s._v(" "),t("p",[s._v("å½“åœ¨ T1 ä¸­æäº¤æˆ–è€…å›æ»šäº‹åŠ¡ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æäº¤äº‹åŠ¡")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("T2 è‡ªåŠ¨è·å¾—è¯¥è¡¨ä¸Šçš„å…±äº«é”")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T2")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" min "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43.17")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unlock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("ä»¥ä¸Šçš„ "),t("code",[s._v("unlock tables")]),s._v("â€‹ è¯­å¥ç”¨äºé‡Šæ”¾è¯¥è¡¨ä¸Šçš„æ’ä»–é”ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹2ï¼šæ„å‘æ’ä»–é”ä¹‹é—´çš„å…¼å®¹æ€§")])]),s._v(" "),t("p",[s._v("å†æ¥éªŒè¯ä¸€ä¸‹"),t("strong",[s._v("ä¸¤ä¸ªæ„å‘æ’ä»–é”ä¹‹é—´é”çš„å…¼å®¹æ€§")]),s._v("ï¼Œå…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹åŠ é”è¯­å¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ æ’ä»–é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ æ’ä»–é”æˆåŠŸå¹¶è¯»å–åˆ°æ•°æ®ï¼ŒåŒæ—¶InnoDBä¹Ÿç»™è¡¨åŠ ä¸Šäº†æ„å‘æ’ä»–é”!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("strong",[s._v("==T1 ä¸ºæ•°æ®è¡Œ id = 1 ä¸Šçš„æ’ä»–é”ï¼Œå¹¶ä¸”ç»™è¡¨ t åŠ ä¸Šäº†æ„å‘æ’ä»–é”==")]),s._v("ã€‚ç„¶ååœ¨ T2 ä¸­æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("==T2 æˆåŠŸä¸ºæ•°æ®è¡Œ id = 2 åŠ ä¸Šçš„æ’ä»–é”ï¼ŒåŒæ—¶ä¸ºè¡¨ t åŠ ä¸Šäº†æ„å‘æ’ä»–é”==")]),s._v("ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒT1 å’Œ T2 åŒæ—¶è·å¾—äº†è¡¨ t ä¸Šçš„æ„å‘æ’ä»–é”ï¼Œä»¥åŠä¸åŒæ•°æ®è¡Œä¸Šçš„è¡Œçº§æ’ä»–é”ã€‚"),t("strong",[s._v("InnoDB é€šè¿‡è¡Œçº§é”ï¼Œå®ç°äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œèƒ½å¤Ÿæ”¯æŒæ›´é«˜çš„å¹¶å‘æ›´æ–°å’ŒæŸ¥è¯¢")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æœ€ååœ¨ T1 ä¸­æäº¤æˆ–è€…å›æ»šäº‹åŠ¡ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è¿æ¥T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"é”çš„å®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”çš„å®ç°"}},[s._v("#")]),s._v(" é”çš„å®ç°")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("InnoDB çš„è¡Œé”å®é™…ä¸Šæ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”(åœ¨ç´¢å¼•å¯¹åº”çš„ç´¢å¼•é¡¹ä¸Šåšæ ‡è®°), ä¸æ˜¯é’ˆå¯¹æ•´ä¸ªè¡Œè®°å½•åŠ çš„é”. å¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆ, å¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”")])]),s._v(".")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("InnoDB å®ç°äº†ä¸‰ç§è¡Œé”çš„ç®—æ³•ï¼šè®°å½•é”(Record Lock)ã€é—´éš™é”(Gap Lock) å’Œ Next-key é”(Next-key Lock) åˆç§°ä¸´é”®é”")])]),s._v("ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("å…¶ä¸­é—´éš™é”åªåœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ç”Ÿæ•ˆï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢äº§ç”Ÿå¹»è¯»ã€‚Next-key é”ï¼ˆNext-key Lockï¼‰ç›¸å½“äºä¸€ä¸ªç´¢å¼•è®°å½•é”åŠ ä¸Šè¯¥è®°å½•ä¹‹å‰çš„ä¸€ä¸ªé—´éš™é”")]),s._v("ã€‚")]),s._v(" "),t("h5",{attrs:{id:"_1-è®°å½•é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è®°å½•é”"}},[s._v("#")]),s._v(" 1.è®°å½•é”")]),s._v(" "),t("h6",{attrs:{id:"åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€"}},[s._v("#")]),s._v(" åŸºç¡€")]),s._v(" "),t("p",[t("strong",[s._v("è®°å½•é”æ˜¯æŒ‡é”ä½äº†ç‰¹å®šçš„æŸä¸€æ¡è®°å½•çš„é”")]),s._v(". "),t("strong",[s._v("è®°å½•é”ï¼ˆRecord Lockï¼‰æ˜¯é’ˆå¯¹ç´¢å¼•è®°å½•ï¼ˆindex recordï¼‰çš„é”å®šï¼Œå¯ä»¥å®ç°å¯¹å•ä¸ªè¡Œè®°å½•åŠ é”")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("InnoDB å®ç°è¡Œçº§é”çš„æ–¹å¼å¦‚ä¸‹ï¼šå½“æœç´¢æˆ–æ‰«æè¡¨ç´¢å¼•æ—¶ï¼Œåœ¨é‡åˆ°çš„ç´¢å¼•è®°å½•ä¸Šè®¾ç½®å…±äº«é”æˆ–æ’å®ƒé”ã€‚å› æ­¤ï¼ŒInnoDB "),t("strong",[s._v("è¡Œçº§é”å®é™…ä¸Šæ˜¯ç´¢å¼•è®°å½•é”")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚è¿™æ ·ä¸€æ¡è¯­å¥:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" your_tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("åœ¨ä½¿ç”¨äº†"),t("strong",[s._v("ä¸»é”®")]),s._v("ä½œä¸ºæŸ¥è¯¢æ¡ä»¶, å¹¶ä¸”æ˜¯ç›¸ç­‰æ¡ä»¶ä¸‹, "),t("strong",[s._v("å°†åªå‘½ä¸­ä¸€æ¡è®°å½•")]),s._v(". è¿™ä¸€æ¡è®°å½•å°±ä¼šè¢«åŠ ä¸Šè®°å½•é”. åŒæ—¶ä¼šé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹ id = 31 çš„æ•°æ®æ‰§è¡Œæ’å…¥ã€æ›´æ–°ï¼Œä»¥åŠåˆ é™¤æ“ä½œã€‚")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"/img/57af4ccedf9b2270decb19235c8a4e08-20231223175001-x2ggvy9.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("ä½†æ˜¯"),t("strong",[s._v("å¦‚æœæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰å‘½ä¸­ä»»ä½•è®°å½•, é‚£ä¹ˆå°±ä¸ä¼šä½¿ç”¨è®°å½•é”, è€Œæ˜¯ä½¿ç”¨é—´éš™é”")]),s._v(". åˆæˆ–è€…ä½¿ç”¨äº†å”¯ä¸€ç´¢å¼•ä½œä¸ºæ¡ä»¶, æ¯”å¦‚è¯´åœ¨ user è¡¨é‡Œé¢åœ¨åˆ— email ä¸Šæœ‰ä¸€ä¸ªå”¯ä¸€ç´¢å¼•.")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" your_tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" email"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your_email'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("é‚£ä¹ˆè¿™æ¡æŸ¥è¯¢è¯­å¥æ­¤æ—¶ä¹Ÿæ˜¯ä½¿ç”¨äº†è®°å½•é”. ç±»ä¼¼åœ°, å¦‚æœ email='your_email' è¿™æ¡è®°å½•ä¸å­˜åœ¨, é‚£ä¹ˆä¼šå˜æˆä¸€ä¸ªé—´éš™é”.")]),s._v(" "),t("p",[s._v("ä¸¾ä¸ªä¾‹å­, å¦‚æœæ•°æ®åº“ä¸­åªæœ‰ id ä¸º(1, 4, 7)çš„ä¸‰æ¡è®°å½•, ä¹Ÿå°±æ˜¯ id = 3 è¿™ä¸ªæ¡ä»¶æ²¡æœ‰å‘½ä¸­ä»»ä½•æ•°æ®, é‚£ä¹ˆè¿™æ¡è¯­å¥ä¼šåœ¨ (1, 4) åŠ ä¸Šé—´éš™é”. æ‰€ä»¥å¯ä»¥çœ‹åˆ°, "),t("strong",[s._v("åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œé¢é‡åˆ°äº†æœªå‘½ä¸­ç´¢å¼•çš„æƒ…å†µ, å¯¹æ€§èƒ½å½±å“æå¤§")]),s._v(".")]),s._v(" "),t("h6",{attrs:{id:"ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[s._v("#")]),s._v(" ç¤ºä¾‹")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹1ï¼šé€šè¿‡ä¸»é”®æ“ä½œå•ä¸ªå€¼")])]),s._v(" "),t("p",[s._v("id æ˜¯è¡¨ t çš„ä¸»é”®ï¼Œå…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" innodb_status_output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" innodb_status_output_locks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("å…¨å±€å˜é‡ innodb_status_output å’Œ innodb_status_output_locks ç”¨äºæ§åˆ¶ InnoDB æ ‡å‡†ç›‘æ§å’Œé”ç›‘æ§ï¼Œå¯ä»¥åˆ©ç”¨ç›‘æ§æŸ¥çœ‹é”çš„ä½¿ç”¨æƒ…å†µã€‚"),t("strong",[s._v("ç„¶å T1 é”å®šäº† id = 1 çš„è®°å½•")]),s._v("ï¼Œæ­¤æ—¶ T2 æ— æ³•ä¿®æ”¹è¯¥è®°å½•ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nERROR "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1205")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Lock")]),s._v(" wait timeout exceeded"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" try restarting "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("transaction")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äºé”çš„äº‹åŠ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43764, ACTIVE 4 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23734")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43764")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43764")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("aaec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("820000008")]),s._v("f0110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("strong",[s._v("æ—¥å¿—æ˜¾ç¤ºå­˜åœ¨ 2 ä¸ªé”ç»“æ„ï¼Œé”å®šäº†ä¸€ä¸ªè®°å½•ï¼›è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ä¸€ä¸ª X è®°å½•é”ï¼ŒåŒæ—¶è¿˜æ˜¾ç¤ºäº†è®°å½•å¯¹åº”çš„æ•°æ®å€¼")]),s._v("ã€‚æ³¨æ„ "),t("code",[s._v("but not gap")]),s._v("â€‹ï¼Œä¸‹æ–‡ä¼šä»‹ç»é—´éš™é”(Gap Lock)ã€‚æœ€ååœ¨ T1 ä¸­é‡Šæ”¾é”ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-- T1\nmysql> commit;\nQuery OK, 0 rows affected (0.00 sec)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("ç¤ºä¾‹2ï¼šé€šè¿‡å”¯ä¸€ç´¢å¼•æ“ä½œå•ä¸ªå€¼")])]),s._v(" "),t("p",[s._v("c1 å­—æ®µä¸Šå­˜åœ¨å”¯ä¸€ç´¢å¼•ï¼Œå…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" c1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äº"),t("strong",[s._v("é”çš„äº‹åŠ¡æ•°æ®")]),s._v("ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43761, ACTIVE 47 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23722")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43761")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43761")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43761")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("aaec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("820000008")]),s._v("f0110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("strong",[s._v("æ—¥å¿—æ˜¾ç¤ºå­˜åœ¨ 3 ä¸ªé”ç»“æ„ï¼Œé”å®šäº† 2 ä¸ªè®°å½•ï¼›è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œç´¢å¼• idx_t_c1 ä¸Šå­˜åœ¨ä¸€ä¸ª X è®°å½•é”ï¼Œä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ä¸€ä¸ª X è®°å½•é”")]),s._v("ã€‚æœ€ååœ¨ T1 ä¸­é‡Šæ”¾é”ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("mark",[t("strong",[s._v("è®°å½•é”æ°¸è¿œéƒ½æ˜¯é”å®šç´¢å¼•è®°å½•ï¼Œé”å®šéèšé›†ç´¢å¼•ä¼šå…ˆé”å®šèšé›†ç´¢å¼•")])]),s._v("ã€‚å¦‚æœè¡¨ä¸­æ²¡æœ‰å®šä¹‰ç´¢å¼•ï¼ŒInnoDB é»˜è®¤ä¸ºè¡¨åˆ›å»ºä¸€ä¸ªéšè—çš„èšç°‡ç´¢å¼•ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥ç´¢å¼•é”å®šè®°å½•ã€‚")]),s._v(" "),t("h5",{attrs:{id:"_2-é—´éš™é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é—´éš™é”"}},[s._v("#")]),s._v(" 2.é—´éš™é”")]),s._v(" "),t("h6",{attrs:{id:"åŸºç¡€-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€-2"}},[s._v("#")]),s._v(" åŸºç¡€")]),s._v(" "),t("p",[t("strong",[s._v("é—´éš™é”æ˜¯é”ä½äº†æŸä¸€æ®µè®°å½•çš„é”")]),s._v(". ç›´è§‚æ¥è¯´å°±æ˜¯é”ä½äº†ä¸€ä¸ªèŒƒå›´çš„è®°å½•. æ¯”å¦‚åœ¨æŸ¥è¯¢çš„æ—¶å€™ä½¿ç”¨äº† "),t("code",[s._v("<, <=, BETWEEN")]),s._v("â€‹ ä¹‹ç±»çš„èŒƒå›´æŸ¥è¯¢æ¡ä»¶, å°±ä¼šä½¿ç”¨é—´éš™é”.")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("é—´éš™é”(Gap Lock)é”å®šçš„æ˜¯ç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™ã€ç¬¬ä¸€ä¸ªç´¢å¼•ä¹‹å‰çš„é—´éš™æˆ–è€…æœ€åä¸€ä¸ªç´¢å¼•ä¹‹åçš„é—´éš™")])]),s._v("ã€‚é—´éš™é”"),t("strong",[s._v("é”å®šä¸€ä¸ªèŒƒå›´, ä¹Ÿå°±æ˜¯é”å®šç´¢å¼•ä¹‹é—´çš„é—´éš™, ä½†æ˜¯ä¸åŒ…å«ç´¢å¼•æœ¬èº«")]),s._v(". åªè¦åœ¨é—´éš™èŒƒå›´å†…é”äº†ä¸€æ¡ä¸å­˜åœ¨çš„è®°å½•ä¼šé”ä½æ•´ä¸ªé—´éš™èŒƒå›´, ä¸é”è¾¹ç•Œè®°å½•, è¿™æ ·å°±èƒ½é˜²æ­¢å…¶å®ƒ Session åœ¨è¿™ä¸ªé—´éš™èŒƒå›´å†…æ’å…¥æ•°æ®, å°±è§£å†³äº†å¯é‡å¤è¯»éš”ç¦»çº§åˆ«çš„å¹»è¯»é—®é¢˜.")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚å½“ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä»¥ä¸‹è¯­å¥ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" your_tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å¦‚æœè¡¨é‡Œé¢æ²¡æœ‰ 50, é‚£ä¹ˆæ•°æ®åº“å°±ä¼š"),t("strong",[s._v("ä¸€ç›´å‘å·¦")]),s._v(", æ‰¾åˆ°ç¬¬ä¸€ä¸ªå­˜åœ¨çš„æ•°æ®, æ¯”å¦‚è¯´ 40; å¦‚æœè¡¨é‡Œé¢æ²¡æœ‰ 100, é‚£ä¹ˆæ•°æ®åº“å°±ä¼š"),t("strong",[s._v("ä¸€ç›´å‘å³")]),s._v(", æ‰¾åˆ°ç¬¬ä¸€ä¸ªå­˜åœ¨çš„æ•°æ®, æ¯”å¦‚è¯´ 120. é‚£ä¹ˆä½¿ç”¨çš„é—´éš™é”å°±æ˜¯ (40, 120). å¦‚æœæ­¤æ—¶å…¶ä»–äº‹åŠ¡æƒ³è¦æ’å…¥ä¸€ä¸ªä¸»é”®ä¸º 70 çš„è¡Œ, æ˜¯æ— æ³•æ’å…¥çš„, å®ƒéœ€è¦"),t("strong",[s._v("ç­‰è¿™ä¸ª SELECT è¯­å¥é‡Šæ”¾æ‰é—´éš™é”")]),s._v(".")]),s._v(" "),t("blockquote",[t("p",[s._v("äº§ç”Ÿé—´éš™é”çš„åœºæ™¯")])]),s._v(" "),t("ol",[t("li",[s._v("ä½¿ç”¨æ™®é€šç´¢å¼•é”å®šï¼›åœ¨æ™®é€šç´¢å¼•åˆ—ä¸Šï¼Œä¸ç®¡æ˜¯ä½•ç§æŸ¥è¯¢ï¼Œåªè¦åŠ é”ï¼Œéƒ½ä¼šäº§ç”Ÿé—´éš™é”ã€‚")]),s._v(" "),t("li",[s._v("ä½¿ç”¨å¤šåˆ—å”¯ä¸€ç´¢å¼•ä¼šäº§ç”Ÿé—´éš™é”ã€‚")]),s._v(" "),t("li",[s._v("ä½¿ç”¨å”¯ä¸€ç´¢å¼•é”å®šå¤šè¡Œè®°å½•(èŒƒå›´æŸ¥æ‰¾)ã€‚")]),s._v(" "),t("li",[s._v("ä½¿ç”¨å”¯ä¸€ç´¢å¼•ï¼Œå¯¹äºæŒ‡å®šæŸ¥è¯¢æŸä¸€æ¡è®°å½•çš„åŠ é”è¯­å¥ï¼Œå¦‚æœè¯¥è®°å½•ä¸å­˜åœ¨ï¼Œä¼šäº§ç”Ÿè®°å½•é”å’Œé—´éš™é”ï¼Œå¦‚æœè®°å½•å­˜åœ¨ï¼Œåˆ™åªä¼šäº§ç”Ÿè®°å½•é”ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("é—´éš™é”çš„äº’æ–¥æ€§")])]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("InnoDB é—´éš™é”çš„å”¯ä¸€ç›®çš„æ˜¯é˜»æ­¢å…¶ä»–äº‹åŠ¡åœ¨é—´éš™ä¸­æ’å…¥æ•°æ®")])]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("è®°å½•é”å’Œè®°å½•é”æ˜¯æ’å®ƒçš„, ä½†æ˜¯é—´éš™é”å¯ä»¥å…±å­˜ï¼Œä¸€ä¸ªäº‹åŠ¡çš„é—´éš™é”ä¸ä¼šé˜»æ­¢å¦ä¸€ä¸ªäº‹åŠ¡åœ¨åŒä¸€ä¸ªé—´éš™ä¸Šè·å–é—´éš™é”")]),s._v(". ä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªé—´éš™é”ä¹‹é—´å³ä¾¿é‡å äº†, ä¹Ÿè¿˜æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„. å…±äº«é—´éš™é”å’Œæ’ä»–é—´éš™é”ä¹‹é—´æ²¡æœ‰åŒºåˆ«ï¼Œå½¼æ­¤ä¸å†²çªï¼Œå®ƒä»¬çš„ä½œç”¨ç›¸åŒã€‚")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/4a3e1d90160bb31cd91edcd720dcbac9-20231223175001-h15ww8v.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("å› æ­¤ï¼Œ"),t("strong",[s._v("ä¸åŒäº‹åŠ¡å¯ä»¥è·å–ä¸€ä¸ªé—´éš™ä¸Šäº’ç›¸å†²çªçš„é”")]),s._v("ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡ A åœ¨ä¸€ä¸ªé—´éš™ä¸Šè·å–äº†å…±äº«çš„é—´éš™é”ï¼ˆé—´éš™ S é”ï¼‰ï¼Œäº‹åŠ¡ B å¯ä»¥åœ¨åŒä¸€é—´éš™ä¸Šè·å–æ’ä»–çš„é—´éš™é”ï¼ˆé—´éš™ X é”ï¼‰ã€‚å…è®¸å­˜åœ¨äº’ç›¸å†²çªçš„é—´éš™é”çš„åŸå› åœ¨äºï¼Œå¦‚æœä»ç´¢å¼•ä¸­æ¸…é™¤æŸä¸ªè®°å½•ï¼Œå¿…é¡»åˆå¹¶ä¸åŒäº‹åŠ¡åœ¨è®°å½•ä¸Šè·å–çš„é—´éš™é”ã€‚")]),s._v(" "),t("p",[s._v("é—´éš™é”åœ¨"),t("strong",[s._v("å¯é‡å¤è¯»")]),s._v("éš”ç¦»çº§åˆ«ä¸‹æ‰ä¼šç”Ÿæ•ˆ. é—´éš™é”å¯ä»¥æ˜¾å¼ç¦ç”¨ï¼Œä¾‹å¦‚å°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸º READ COMMITTEDã€‚æ­¤æ—¶ï¼ŒæŸ¥æ‰¾å’Œç´¢å¼•æ‰«æä¸ä¼šä½¿ç”¨é—´éš™é”ï¼Œé—´éš™é”åªç”¨äºå¤–é”®çº¦æŸå’Œé‡å¤é”®çš„æ£€æŸ¥ã€‚")]),s._v(" "),t("h6",{attrs:{id:"ç¤ºä¾‹-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹-2"}},[s._v("#")]),s._v(" ç¤ºä¾‹")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹1ï¼šé€šè¿‡ä¸»é”®æ“ä½œèŒƒå›´å€¼")])]),s._v(" "),t("p",[s._v("é¦–å…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤"),t("strong",[s._v("é”ä½æ•°æ®èŒƒå›´")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é”ä½èŒƒå›´æ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("è¡¨ t ä¸­åªæœ‰ 3 æ¡è®°å½•ï¼Œid = 4 çš„è®°å½•ä¸å­˜åœ¨ï¼›å³ä¾¿å¦‚æ­¤ï¼Œ"),t("strong",[s._v("T2 ä»ç„¶æ— æ³•æ’å…¥è¯¥è®°å½•")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T2")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nERROR "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1205")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Lock")]),s._v(" wait timeout exceeded"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" try restarting "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("transaction")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("å†æ¬¡ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äºé”çš„äº‹åŠ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43765, ACTIVE 4 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23741")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43765")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43765")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("aaec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("820000008")]),s._v("f0110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43765")]),s._v(" lock_mode X\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("73757072656")]),s._v("d756d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v(" supremum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("aaec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("820000008")]),s._v("f011d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000004")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("aaec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("820000008")]),s._v("f012a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000006")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000009")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[s._v("æ—¥å¿—æ˜¾ç¤º"),t("strong",[s._v("å­˜åœ¨ 3 ä¸ªé”ç»“æ„")]),s._v("ï¼Œé”å®šäº† 4 ä¸ªç´¢å¼•è®°å½•ï¼›"),t("strong",[s._v("è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ 1 ä¸ª X è®°å½•é”ï¼ˆid = 1ï¼‰å’Œ 3 ä¸ªé—´éš™é”ï¼ˆ(1, 2]ã€(2, 3]ã€supremumï¼‰ï¼›å…¶ä¸­ supremum ä»£è¡¨äº†å¤§äº 3 çš„é—´éš™ï¼ˆ(3, positive infinity)ï¼‰")]),s._v(" ã€‚å®é™…ä¸Šè¿™é‡Œçš„é—´éš™é”å±äº Next-key é”ï¼Œç›¸å½“äº"),t("strong",[s._v("é—´éš™é”åŠ è®°å½•é”")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æ­¤æ—¶ï¼Œå¯ä»¥æ’å…¥ id å°äº 1 çš„æ•°æ®ï¼›ä½†æ˜¯ä¸èƒ½æ’å…¥ id å¤§äº 10 çš„æ•°æ®ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹2ï¼šé€šè¿‡å”¯ä¸€ç´¢å¼•æ“ä½œèŒƒå›´å€¼")])]),s._v(" "),t("p",[s._v("é¦–å…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é”ä½æ•°æ®èŒƒå›´ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" c1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("å†æ¬¡ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äºé”çš„äº‹åŠ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43824, ACTIVE 153 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23852")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43824")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43824")]),s._v(" lock_mode X\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("73757072656")]),s._v("d756d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v(" supremum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43824")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a70110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a7011d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000004")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a7012a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000006")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000009")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("p",[s._v("æ—¥å¿—æ˜¾ç¤ºå­˜åœ¨ 3 ä¸ªé”ç»“æ„ï¼Œé”å®šäº† 7 ä¸ªç´¢å¼•è®°å½•ï¼›è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œç´¢å¼• idx_t_c1 ä¸Šå­˜åœ¨ 4 ä¸ªé—´éš™é”ï¼ˆ(negative infinity, 1]ã€(1, 2]ã€(2, 3]ã€supremumï¼‰ï¼Œå…¶ä¸­ supremum ä»£è¡¨äº†å¤§äº 3 çš„é—´éš™ï¼ˆ(3, positive infinity)ï¼‰ï¼›ä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ 3 ä¸ª X è®°å½•é”ï¼Œé”å®šäº† 3 ä¸ªä¸»é”®å€¼ã€‚å®é™…ä¸Šè¿™é‡Œçš„é—´éš™é”å±äº Next-key é”ï¼Œç›¸å½“äº"),t("strong",[s._v("é—´éš™é”åŠ è®°å½•é”")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æ­¤æ—¶ï¼Œæ— æ³•æ’å…¥ä»»ä½•æ•°æ®ã€‚")]),s._v(" "),t("h5",{attrs:{id:"_3-ä¸´é”®é”-next-key-lock"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸´é”®é”-next-key-lock"}},[s._v("#")]),s._v(" 3.ä¸´é”®é”(Next-Key Lock)")]),s._v(" "),t("h6",{attrs:{id:"åŸºç¡€-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€-3"}},[s._v("#")]),s._v(" åŸºç¡€")]),s._v(" "),t("p",[t("strong",[s._v("ä¸´é”®é”ï¼ˆNext-key Lockï¼‰ç›¸å½“äºç´¢å¼•è®°å½•é”å’Œé—´éš™é”çš„ç»“åˆï¼Œ")]),s._v(" ä¸ä»…é”å®šä¸€ä¸ªè®°å½•ä¸Šçš„ç´¢å¼•(åŒ…å«è®°å½•æœ¬èº«), ä¹Ÿé”å®šç´¢å¼•ä¹‹é—´çš„é—´éš™.")]),s._v(" "),t("p",[s._v("å‡è®¾ä¸€ä¸ªç´¢å¼•ä¸­åŒ…å«æ•°æ® 10ã€11ã€13 å’Œ 20ã€‚è¯¥ç´¢å¼•ä¸­å¯èƒ½çš„ next-key é”åŒ…å«ä»¥ä¸‹èŒƒå›´ï¼Œå…¶ä¸­åœ†æ‹¬å·è¡¨ç¤ºæ’é™¤ç«¯ç‚¹å€¼ï¼Œæ–¹æ‹¬å·è¡¨ç¤ºåŒ…å«ç«¯ç‚¹å€¼ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("negative infinity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" positive infinity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ˜¾ç¤ºä¸º supermum")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v('å¯¹äºæœ€åä¸€ä¸ªé—´éš”ï¼Œnext-key é”å°†ä¼šé”å®šæœ€å¤§ç´¢å¼•å€¼ï¼ˆ20ï¼‰ä¹‹åçš„é—´éš™ï¼›ä¼ªè®°å½• "supermum" çš„å€¼å¤§äºç´¢å¼•ä¸­ä»»ä½•å€¼ï¼Œå®ƒä¸æ˜¯çœŸæ­£çš„ç´¢å¼•è®°å½•ã€‚ '),t("strong",[s._v("(10, 11) æ˜¯ä¸€ä¸ªé—´éš™é”çš„é”å®šèŒƒå›´ï¼Œ(10, 11] æ˜¯ä¸€ä¸ª next-key é”çš„é”å®šèŒƒå›´")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("MySQL é»˜è®¤"),t("strong",[s._v("éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»")]),s._v(", è§£å†³ä¸äº†å¹»è¯»é—®é¢˜. åœ¨é»˜è®¤çš„å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œ"),t("mark",[t("strong",[s._v("InnoDB é€šè¿‡ next-key é”è¿›è¡ŒæŸ¥æ‰¾å’Œç´¢å¼•æ‰«æï¼Œå› ä¸ºå®ƒä¼šé”å®šèŒƒå›´å€¼ï¼Œä¸ä¼šå¯¼è‡´ä¸¤æ¬¡æŸ¥è¯¢ç»“æœçš„æ•°é‡ä¸åŒï¼Œå› æ­¤å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜")])]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("é”å®šé—´éš™æœ‰ä»€ä¹ˆç”¨? å› ä¸ºå¹»è¯»å°±æ˜¯ A äº‹åŠ¡"),t("strong",[s._v("ç¬¬ä¸€æ¬¡è¯»äº†ä¸€ä¸ªèŒƒå›´çš„æ•°æ®")]),s._v("ä¹‹å(æ­¤æ—¶ A æ²¡æœ‰ç»“æŸ), å¦ä¸€ä¸ª B äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´æ’å…¥æˆ–è€…åˆ é™¤æ•°æ®è¡Œæ‰€è‡´, "),t("strong",[s._v("é”å®šé—´éš™å¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨ä¹‹ä¸­æ”¹å˜æ•°æ®è¡Œæ•°, å°±è§£å†³äº†å¹»è¯»é—®é¢˜")]),s._v(".")]),s._v(" "),t("h6",{attrs:{id:"ç¤ºä¾‹-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹-3"}},[s._v("#")]),s._v(" ç¤ºä¾‹")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹1ï¼šé€šè¿‡æ™®é€šç´¢å¼•æ“ä½œå•ä¸ªå€¼")])]),s._v(" "),t("p",[s._v("c2 å­—æ®µä¸Š"),t("strong",[s._v("å­˜åœ¨éå”¯ä¸€ç´¢å¼•")]),s._v("ï¼Œå…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" c2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äºé”çš„äº‹åŠ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43830, ACTIVE 6 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23871")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43830")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43830")]),s._v(" lock_mode X\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43830")]),s._v(" lock_mode X locks rec but "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" gap\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a70110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_t_c2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43830")]),s._v(" lock_mode X locks gap before rec\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("æ—¥å¿—æ˜¾ç¤ºå­˜åœ¨ 4 ä¸ªé”ç»“æ„ï¼Œé”å®šäº† 3 ä¸ªç´¢å¼•é¡¹ï¼›è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œç´¢å¼• idx_t_c2 ä¸Šå­˜åœ¨ä¸€ä¸ª next-key é”ï¼ˆc2 = 1ï¼Œé”å®šäº† (negative infinity, 1]ï¼‰å’Œä¸€ä¸ª X é—´éš™é”ï¼ˆï¼ˆ1, 3ï¼‰ï¼‰ï¼Œä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ä¸€ä¸ª X è®°å½•é”ï¼ˆid = 1ï¼‰ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æ­¤æ—¶å…¶ä»–äº‹åŠ¡æ— æ³•åœ¨ c2 ä¸­æ’å…¥å°äº 3 çš„å€¼ï¼Œä½†æ˜¯å¯ä»¥æ’å…¥å¤§äºç­‰äº 3 çš„å€¼")]),s._v("ã€‚æœ€ååœ¨ T1 ä¸­é‡Šæ”¾é”ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("mark",[t("strong",[s._v("å¦‚æœç´¢å¼•æœ‰å”¯ä¸€å±æ€§ï¼Œåˆ™ InnnoDB ä¼šè‡ªåŠ¨å°† next-key é”é™çº§ä¸ºè®°å½•é”")])]),s._v("ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹2ï¼šé€šè¿‡æ™®é€šç´¢å¼•æ“ä½œèŒƒå›´å€¼")])]),s._v(" "),t("p",[s._v("å¦‚æœåˆ©ç”¨ c2 å­—æ®µä½œä¸ºæ¡ä»¶æ“ä½œèŒƒå›´å€¼ï¼ŒåŠ é”æƒ…å†µä¸é€šè¿‡å”¯ä¸€ç´¢å¼•ï¼ˆc1ï¼‰æ“ä½œèŒƒå›´å€¼ç›¸åŒã€‚å¯ä»¥å‚è€ƒä¸Šæ–‡ç¤ºä¾‹ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ç¤ºä¾‹3ï¼šæ— ç´¢å¼•æ“ä½œå•ä¸ªå€¼æˆ–èŒƒå›´å€¼")])]),s._v(" "),t("p",[t("strong",[s._v("c3 å­—æ®µä¸Šæ²¡æœ‰ç´¢å¼•")]),s._v("ï¼Œå…ˆåœ¨ T1 ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" c3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c1   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c2   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c3   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+------+------+------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("ä½¿ç”¨ "),t("code",[s._v("SHOW ENGINE INNODB STATUS")]),s._v("â€‹ å‘½ä»¤æŸ¥çœ‹ InnoDB ç›‘æ§ä¸­å…³äºé”çš„äº‹åŠ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---TRANSACTION 43848, ACTIVE 5 sec")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" struct"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1136")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nMySQL thread id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OS thread handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("140437513750272")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23917")]),s._v(" localhost root\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43848")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" IX\nRECORD LOCKS space id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(" page "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" n bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hrdb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" trx id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43848")]),s._v(" lock_mode X\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("73757072656")]),s._v("d756d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v(" supremum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a70110"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a7011d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000004")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nRecord "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" heap "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" PHYSICAL RECORD: n_fields "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" compact format"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" info bits "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000")]),s._v("ab2b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82000000")]),s._v("a7012a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000006")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": len "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" hex "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80000009")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("p",[s._v("æ—¥å¿—æ˜¾ç¤ºå­˜åœ¨ 2 ä¸ªé”ç»“æ„ï¼Œé”å®šäº† 4 ä¸ªç´¢å¼•é¡¹ï¼›è¡¨ t ä¸Šå­˜åœ¨ IX é”ï¼Œä¸»é”®ç´¢å¼•ä¸Šå­˜åœ¨ 4 ä¸ª next-key é”ï¼Œ"),t("strong",[s._v("é”å®šäº†æ‰€æœ‰çš„ä¸»é”®èŒƒå›´")]),s._v("ã€‚æ­¤æ—¶å…¶ä»–äº‹åŠ¡æ— æ³•æ’å…¥ä»»ä½•æ•°æ®ã€‚")]),s._v(" "),t("p",[s._v("æœ€ååœ¨ T1 ä¸­é‡Šæ”¾é”ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- T1")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("å¦‚æœå°†è¯­å¥ä¿®æ”¹ä¸º "),t("code",[s._v("SELECT * FROM t WHERE c3 between 1 and 10 FOR UPDATE;")]),s._v("â€‹ï¼Œé€šè¿‡æ— ç´¢å¼•çš„å­—æ®µæ“ä½œèŒƒå›´å€¼ï¼Œä¹Ÿä¼šé”å®šä¸»é”®çš„æ‰€æœ‰èŒƒå›´ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ "),t("strong",[s._v("MySQL æ¨èé€šè¿‡ç´¢å¼•æ“ä½œæ•°æ®ï¼Œæœ€å¥½æ˜¯ä¸»é”®")]),s._v("ã€‚")]),s._v(" "),t("h6",{attrs:{id:"ä¸´é”®é”å¼•å‘æ­»é”é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸´é”®é”å¼•å‘æ­»é”é—®é¢˜"}},[s._v("#")]),s._v(" ä¸´é”®é”å¼•å‘æ­»é”é—®é¢˜")]),s._v(" "),t("p",[s._v("åœ¨ä¸€ä¸ªä¸šåŠ¡ä¸­, æœ‰ä¸€ä¸ªåœºæ™¯æ˜¯"),t("strong",[s._v("å…ˆä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®å¹¶é”ä½")]),s._v(". å¦‚æœ"),t("strong",[s._v("è¿™ä¸ªæ•°æ®ä¸å­˜åœ¨, é‚£ä¹ˆå°±éœ€è¦æ‰§è¡Œä¸€æ®µé€»è¾‘, è®¡ç®—å‡ºä¸€ä¸ªæ•°æ®, ç„¶åæ’å…¥. å¦‚æœå·²ç»æœ‰æ•°æ®äº†, é‚£ä¹ˆå°±å°†åŸå§‹çš„æ•°æ®å–å‡ºæ¥, å†åˆ©ç”¨è¿™ä¸ªæ•°æ®æ‰§è¡Œä¸€æ®µé€»è¾‘, è®¡ç®—å‡ºæ¥ä¸€ä¸ªç»“æœ, æ‰§è¡Œæ›´æ–°")]),s._v(".")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/0519d4897c4b8b985d6f54e79yy9ba3e-20231223175001-uegh1ta.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("å› ä¸ºä¸¤æ®µè¿ç®—é€»è¾‘ä¸åŒ, æ‰€ä»¥ä¸èƒ½ç®€å•åœ°ä½¿ç”¨ INSERT ON DUPLICATE çš„è¯­å¥æ¥å–ä»£.")]),s._v(" "),t("p",[s._v("åªçœ‹æ²¡æœ‰æ•°æ®çš„é€»è¾‘, åœ¨è®¡ç®—ä¹‹åæ’å…¥æ–°æ•°æ®, å¦‚æœç”¨ä¼ªä»£ç æ¥æè¿°, å°±æ˜¯ä¸‹é¢è¿™æ ·çš„.")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" biz "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ? "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸­é—´æœ‰å¾ˆå¤šä¸šåŠ¡æ“ä½œ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" biz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMIT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("çœ‹èµ·æ¥æ˜¯ä¸æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜? å®é™…ä¸Š, è¿™ä¸ªåœ°æ–¹ä¼šå¼•èµ·"),t("strong",[s._v("æ­»é”")]),s._v(".")]),s._v(" "),t("p",[s._v("å‡è®¾è¯´ç°åœ¨æ•°æ®åº“ä¸­ ID æœ€å¤§çš„å€¼æ˜¯ 78. é‚£ä¹ˆ"),t("strong",[s._v("å¦‚æœä¸¤ä¸ªä¸šåŠ¡è¿›æ¥, åŒæ—¶æ‰§è¡Œè¿™ä¸ªé€»è¾‘")]),s._v(". ä¸€ä¸ªå‡†å¤‡æ’å…¥ id = 79 çš„æ•°æ®, ä¸€ä¸ªå‡†å¤‡æ’å…¥ id = 80 çš„æ•°æ®. å¦‚æœå®ƒä»¬çš„æ‰§è¡Œæ—¶åºå¦‚ä¸‹å›¾, é‚£å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ­»é”é”™è¯¯.")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"/img/f585706c073yyf00128b91876ff410fc-20231223175001-fpuuh2m.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1213")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Deadlock found when trying to get lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" try restarting transaction\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("é€ æˆæ­»é”çš„åŸå› ä¹Ÿå¾ˆç®€å•. åœ¨çº¿ç¨‹ 1 æ‰§è¡Œ SELECT FOR UPDATE çš„æ—¶å€™, å› ä¸º id = 79 çš„æ•°æ®"),t("strong",[s._v("ä¸å­˜åœ¨")]),s._v(", æ‰€ä»¥å®é™…ä¸Š"),t("strong",[s._v("æ•°æ®åº“ä¼šäº§ç”Ÿä¸€ä¸ª (78, supremum] çš„ä¸´é”®é”")]),s._v(". ç±»ä¼¼åœ°, çº¿ç¨‹ 2 ä¹Ÿä¼š"),t("strong",[s._v("äº§ç”Ÿä¸€ä¸ª (78, supremum] ä¸´é”®é”")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("==å½“çº¿ç¨‹ 1 æƒ³è¦æ‰§è¡Œæ’å…¥çš„æ—¶å€™, å®ƒæƒ³è¦è·å¾— id = 79 çš„è¡Œé”. å½“çº¿ç¨‹ 2 æƒ³è¦æ‰§è¡Œæ’å…¥çš„æ—¶å€™, å®ƒæƒ³è¦è·å¾— id = 80 çš„è¡Œé”, è¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°æ­»é”. å› ä¸ºçº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2 åŒæ—¶è¿˜åœ¨ç­‰ç€å¯¹æ–¹é‡Šæ”¾æ‰æŒæœ‰çš„é—´éš™é”==")]),s._v(".")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"/img/31cee3eb57ff5e8f4ddf49757a072d46-20231223175001-5bxdeud.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("ä»ç†è®ºä¸Šæ¥è¯´, è§£å†³æ–¹æ¡ˆæœ‰ä¸‰ç§.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("ä¸ç®¡æœ‰æ²¡æœ‰æ•°æ®, å…ˆæ’å…¥ä¸€ä¸ªé»˜è®¤çš„æ•°æ®")]),s._v(". å¦‚æœæ²¡æœ‰æ•°æ®, é‚£ä¹ˆä¼šæ’å…¥æˆåŠŸ; å¦‚æœæœ‰æ•°æ®, é‚£ä¹ˆä¼šå‡ºç°ä¸»é”®å†²çªæˆ–è€…å”¯ä¸€ç´¢å¼•å†²çª, æ’å…¥å¤±è´¥. é‚£ä¹ˆåœ¨æ’å…¥æˆåŠŸçš„æ—¶å€™, æ‰§è¡Œä»¥å‰æ•°æ®ä¸å­˜åœ¨çš„é€»è¾‘, ä½†æ˜¯å› ä¸ºæ­¤æ—¶æ•°æ®åº“ä¸­æœ‰æ•°æ®, æ‰€ä»¥ä¸ä¼šä½¿ç”¨é—´éš™é”, è€Œæ˜¯ä½¿ç”¨è¡Œé”, ä»è€Œè§„é¿äº†æ­»é”é—®é¢˜.")]),s._v(" "),t("li",[t("strong",[s._v("è°ƒæ•´æ•°æ®åº“çš„éš”ç¦»çº§åˆ«, é™ä½ä¸ºå·²æäº¤è¯», é‚£ä¹ˆå°±æ²¡æœ‰é—´éš™é”äº†")]),s._v(".")]),s._v(" "),t("li",[t("strong",[s._v("æ”¾å¼ƒæ‚²è§‚é”, ä½¿ç”¨ä¹è§‚é”")]),s._v(".")])]),s._v(" "),t("h4",{attrs:{id:"é”ä¸ç´¢å¼•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”ä¸ç´¢å¼•"}},[s._v("#")]),s._v(" é”ä¸ç´¢å¼•")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("åœ¨ MySQL çš„ InnoDB å¼•æ“é‡Œé¢, é”æ˜¯å€ŸåŠ©ç´¢å¼•æ¥å®ç°çš„. æˆ–è€…è¯´åŠ é”é”ä½çš„å…¶å®æ˜¯ç´¢å¼•é¡¹, æ›´åŠ å…·ä½“åœ°æ¥è¯´, å°±æ˜¯é”ä½äº†å¶å­èŠ‚ç‚¹")])]),s._v(".")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/0be4ab811c14f01f477f9ea2267fbefe-20231223175001-pm3bn8z.png",alt:"å›¾ç‰‡"}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("ä»è¿™ä¸ªè§’åº¦å‡ºå‘, å°±èƒ½ç†è§£å¤§éƒ¨åˆ†è·Ÿé”æœ‰å…³çš„åƒå¥‡ç™¾æ€ªçš„é—®é¢˜äº†.")]),s._v(" "),t("p",[t("mark",[t("strong",[s._v("ä¸€ä¸ªè¡¨æœ‰å¾ˆå¤šç´¢å¼•, é”çš„æ˜¯å“ªä¸ªç´¢å¼•å‘¢? å…¶å®å°±æ˜¯æŸ¥è¯¢æœ€ç»ˆä½¿ç”¨çš„é‚£ä¸ªç´¢å¼•. ä¸‡ä¸€æŸ¥è¯¢æ²¡æœ‰ä½¿ç”¨ä»»ä½•ç´¢å¼•å‘¢? é‚£ä¹ˆé”ä½çš„å°±æ˜¯æ•´ä¸ªè¡¨, ä¹Ÿå°±æ˜¯æ­¤æ—¶é€€åŒ–ä¸ºè¡¨é”")])]),s._v(".")]),s._v(" "),t("p",[s._v("å¦‚æœæŸ¥è¯¢æ¡ä»¶çš„å€¼å¹¶ä¸å­˜åœ¨, ä¾‹å¦‚:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" your_tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("id = 15 çš„å€¼æ ¹æœ¬ä¸å­˜åœ¨, é‚£ä¹ˆæ€ä¹ˆé”? InnoDB å¼•æ“ä¼šåˆ©ç”¨æœ€æ¥è¿‘ 15 çš„ç›¸é‚»çš„ä¸¤ä¸ªèŠ‚ç‚¹, æ„é€ ä¸€ä¸ª"),t("strong",[s._v("ä¸´é”®é”")]),s._v(".")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/eb2c722f039d8962ae6d7c8e29ff7e8a-20231223175001-6qmtahu.png",alt:""}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("æ­¤æ—¶"),t("strong",[s._v("å¦‚æœåˆ«çš„äº‹åŠ¡æƒ³è¦æ’å…¥ä¸€ä¸ª id=15 çš„è®°å½•, å°±ä¸ä¼šæˆåŠŸ")]),s._v(".")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆèŒƒå›´æŸ¥è¯¢å‘¢? ä¹Ÿæ˜¯åˆ©ç”¨ç´¢å¼•ä¸Šçš„æ•°æ®, "),t("strong",[s._v("æ„é€ ä¸€ä¸ªæ°å¥½èƒ½å¤Ÿè£…ä¸‹è¿™ä¸ªèŒƒå›´çš„ä¸´é”®é”")]),s._v(". ä¾‹å¦‚:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" your_tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("InnoDB å¼•æ“ä¼šæ„é€ ä¸€ä¸ª (33, supremum] çš„ä¸´é”®é”, é”ä½æ•´ä¸ªèŒƒå›´. supremum å¯ä»¥ç›´è§‚ç†è§£ä¸º MySQL è®¤ä¸ºçš„ä¸€ä¸ªè™šæ‹Ÿçš„æœ€å¤§å€¼.")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/c081d44794e712b4f4d0c7196b9b85d8-20231223175001-m51en98.png",alt:""}}),s._v("â€‹")]),s._v(" "),t("p",[s._v("å› æ­¤, å¯ä»¥å¾—å‡ºäº†ä¸€ä¸ªç»“è®º: "),t("mark",[t("strong",[s._v("é”å’Œç´¢å¼•å¯†åˆ‡ç›¸å…³")])]),s._v(".")]),s._v(" "),t("h4",{attrs:{id:"é”ç­‰å¾…åˆ†æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”ç­‰å¾…åˆ†æ"}},[s._v("#")]),s._v(" é”ç­‰å¾…åˆ†æ")]),s._v(" "),t("p",[s._v("å¯ä»¥é€šè¿‡æ£€æŸ¥ "),t("strong",[s._v("InnoDB_row_lock")]),s._v(" çŠ¶æ€å˜é‡æ¥åˆ†æç³»ç»Ÿä¸Šçš„"),t("strong",[s._v("è¡Œé”çš„äº‰å¤º")]),s._v("æƒ…å†µ.")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'innodb_row_lock%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å„ä¸ªçŠ¶æ€é‡çš„è¯´æ˜å¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[s._v("Innodb_row_lock_current_waits: å½“å‰æ­£åœ¨ç­‰å¾…é”å®šçš„æ•°é‡.")]),s._v(" "),t("li",[s._v("Innodb_row_lock_time: ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨é”å®šæ€»æ—¶é—´é•¿åº¦.")]),s._v(" "),t("li",[s._v("Innodb_row_lock_time_avg: æ¯æ¬¡ç­‰å¾…æ‰€èŠ±å¹³å‡æ—¶é—´.")]),s._v(" "),t("li",[s._v("Innodb_row_lock_time_max: ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨ç­‰å¾…æœ€é•¿çš„ä¸€æ¬¡æ‰€èŠ±æ—¶é—´.")]),s._v(" "),t("li",[s._v("Innodb_row_lock_waits: ç³»ç»Ÿå¯åŠ¨ååˆ°ç°åœ¨æ€»å…±ç­‰å¾…çš„æ¬¡æ•°.")])]),s._v(" "),t("p",[s._v("å¯¹äºè¿™ 5 ä¸ªçŠ¶æ€å˜é‡, æ¯”è¾ƒé‡è¦çš„ä¸»è¦æ˜¯:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Innodb_row_lock_time_avg")]),s._v(": ç­‰å¾…å¹³å‡æ—¶é•¿")]),s._v(" "),t("li",[t("strong",[s._v("Innodb_row_lock_waits:")]),s._v("  ç­‰å¾…æ€»æ¬¡æ•°")]),s._v(" "),t("li",[t("strong",[s._v("Innodb_row_lock_time:")]),s._v("  ç­‰å¾…æ€»æ—¶é•¿")])]),s._v(" "),t("p",[s._v("å°¤å…¶æ˜¯å½“"),t("strong",[s._v("ç­‰å¾…æ¬¡æ•°å¾ˆé«˜")]),s._v(", è€Œä¸”æ¯æ¬¡ç­‰å¾…æ—¶é•¿ä¹Ÿä¸å°çš„æ—¶å€™, å°±éœ€è¦åˆ†æç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆä¼šæœ‰å¦‚æ­¤å¤šçš„ç­‰å¾…, ç„¶åæ ¹æ®åˆ†æç»“æœç€æ‰‹åˆ¶å®šä¼˜åŒ–è®¡åˆ’.")]),s._v(" "),t("h4",{attrs:{id:"æ­»é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ­»é”"}},[s._v("#")]),s._v(" æ­»é”")]),s._v(" "),t("p",[s._v("æ­»é”åŸºç¡€å‚è€ƒ: è¿›ç¨‹æ­»é”.")]),s._v(" "),t("p",[s._v("ä¸‹é¢çš„è¯­å¥äº§ç”Ÿæ­»é”.")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" tx_isolation "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'repeatable-read'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSession_1æ‰§è¡Œ: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# äº‹åŠ¡1å°è¯•ç»™id=1åŠ å†™é”")]),s._v("\nSession_2æ‰§è¡Œ: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# äº‹åŠ¡2å°è¯•ç»™id=2åŠ å†™é”")]),s._v("\nSession_1æ‰§è¡Œ: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# äº‹åŠ¡1å°è¯•ç»™id=2åŠ å†™é”")]),s._v("\nSession_2æ‰§è¡Œ: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# äº‹åŠ¡2å°è¯•ç»™id=1åŠ å†™é”")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("æŸ¥çœ‹è¿‘æœŸæ­»é”æ—¥å¿—ä¿¡æ¯:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("innodb")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v("\\G"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å¤§å¤šæ•°æƒ…å†µ MySQL å¯ä»¥"),t("strong",[s._v("è‡ªåŠ¨æ£€æµ‹æ­»é”")]),s._v("å¹¶å›æ»šäº§ç”Ÿæ­»é”çš„é‚£ä¸ªäº‹åŠ¡. ä½†æ˜¯æœ‰äº›æƒ…å†µæ²¡æ³•è‡ªåŠ¨æ£€æµ‹æ­»é”, è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡æ—¥å¿—åˆ†ææ‰¾åˆ°"),t("strong",[s._v("å¯¹åº”äº‹åŠ¡çº¿ç¨‹ id, å¯ä»¥é€šè¿‡ kill æ€æ‰")]),s._v(".")]),s._v(" "),t("p",[s._v("InnoDB ç›®å‰å¤„ç†æ­»é”çš„æ–¹æ³•æ˜¯, "),t("strong",[s._v("å°†æŒæœ‰æœ€å°‘è¡Œçº§æ’ä»–é”çš„äº‹åŠ¡è¿›è¡Œå›æ»š")]),s._v(", è¿™æ˜¯ç›¸å¯¹æ¯”è¾ƒç®€å•çš„æ­»é”å›æ»šç®—æ³•.")]),s._v(" "),t("h4",{attrs:{id:"é”ä¼˜åŒ–å®è·µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”ä¼˜åŒ–å®è·µ"}},[s._v("#")]),s._v(" é”ä¼˜åŒ–å®è·µ")]),s._v(" "),t("ul",[t("li",[s._v("å°½å¯èƒ½è®©æ‰€æœ‰"),t("strong",[s._v("æ•°æ®æ£€ç´¢éƒ½é€šè¿‡ç´¢å¼•æ¥å®Œæˆ")]),s._v(", é¿å…"),t("strong",[s._v("æ— ç´¢å¼•è¡Œé”å‡çº§ä¸ºè¡¨é”")]),s._v(". åŒæ—¶åˆç†è®¾è®¡ç´¢å¼•, å°½é‡"),t("strong",[s._v("ç¼©å°é”çš„èŒƒå›´")]),s._v(".")]),s._v(" "),t("li",[s._v("å°½å¯èƒ½å‡å°‘æ£€ç´¢æ¡ä»¶èŒƒå›´, é¿å…é—´éš™é”.")]),s._v(" "),t("li",[s._v("å°½é‡"),t("strong",[s._v("æ§åˆ¶äº‹åŠ¡å¤§å°")]),s._v(", å‡å°‘é”å®šèµ„æºé‡å’Œæ—¶é—´é•¿åº¦, æ¶‰åŠäº‹åŠ¡åŠ é”çš„ SQL å°½é‡æ”¾åœ¨äº‹åŠ¡æœ€åæ‰§è¡Œ. å°½å¯èƒ½ä½çº§åˆ«äº‹åŠ¡éš”ç¦».")]),s._v(" "),t("li",[t("strong",[s._v("ä½¿ç”¨ä¹è§‚é”")]),s._v(". æœ‰çš„åœºæ™¯å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¹è§‚é”ã€‚æ¯”å¦‚æ­£å¸¸çš„æ‚²è§‚é”éƒ½æ˜¯ä½¿ç”¨äº† "),t("code",[s._v("SELECT FOR UPDATE")]),s._v("â€‹ è¯­å¥, æŸ¥è¯¢åˆ°æ•°æ®ä¹‹å, è¿›è¡Œä¸€ä¸²è®¡ç®—, å†å°†ç»“æœå†™å›å». é‚£ä¹ˆæ”¹é€ çš„æ–¹æ¡ˆå¾ˆç®€å•, æŸ¥è¯¢çš„æ—¶å€™ä½¿ç”¨ SELECT è¯­å¥ç›´æ¥æŸ¥è¯¢, ç„¶åè¿›è¡Œè®¡ç®—. ä¿®æ”¹çš„æ—¶å€™ä½¿ç”¨ "),t("code",[s._v("UPDATE xxx SET data = newData WHERE id = 1 AND data = oldData")]),s._v("â€‹ è¿™æ ·çš„ä¹è§‚é”çš„æ€æƒ³.")])]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/better-farther-world2099/articles/14955475.html",title:"å‘å¸ƒäº 2021-07-03 14:34",target:"_blank",rel:"noopener noreferrer"}},[s._v("å½»åº•ææ‡‚ MySQL ä¸­çš„é”æœºåˆ¶"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);