(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{559:function(s,n,t){"use strict";t.r(n);var e=t(4),a=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_33-rediså“¨å…µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_33-rediså“¨å…µ"}},[s._v("#")]),s._v(" 33.Rediså“¨å…µ")]),s._v(" "),n("h4",{attrs:{id:"redis-sentinelæ¶æ„åŸºç¡€ğŸŒŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-sentinelæ¶æ„åŸºç¡€ğŸŒŸ"}},[s._v("#")]),s._v(" Redis Sentinelæ¶æ„åŸºç¡€ğŸŒŸ")]),s._v(" "),n("h5",{attrs:{id:"_1-æ™®é€šä¸»ä»å¤åˆ¶çš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ™®é€šä¸»ä»å¤åˆ¶çš„é—®é¢˜"}},[s._v("#")]),s._v(" 1.æ™®é€šä¸»ä»å¤åˆ¶çš„é—®é¢˜")]),s._v(" "),n("p",[n("strong",[s._v("ä¸»ä»å¤åˆ¶")]),s._v("å­˜åœ¨ä»¥ä¸‹é—®é¢˜:")]),s._v(" "),n("ul",[n("li",[s._v("ä¸€æ—¦ä¸»èŠ‚ç‚¹"),n("strong",[s._v("å‡ºç°æ•…éšœ")]),s._v(", éœ€è¦æ‰‹åŠ¨å°†ä¸€ä¸ªä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹, åŒæ—¶éœ€è¦ä¿®æ”¹åº”ç”¨æ–¹çš„ä¸»èŠ‚ç‚¹åœ°å€, è¿˜éœ€è¦å‘½ä»¤å…¶ä»–ä»èŠ‚ç‚¹å»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹, æ•´ä¸ªè¿‡ç¨‹éœ€è¦"),n("strong",[s._v("äººå·¥å¹²é¢„")]),s._v(".")]),s._v(" "),n("li",[s._v("ä¸»èŠ‚ç‚¹çš„"),n("strong",[s._v("å†™èƒ½åŠ›")]),s._v("å—åˆ°å•æœºçš„é™åˆ¶, ä¸»èŠ‚ç‚¹çš„"),n("strong",[s._v("å­˜å‚¨èƒ½åŠ›")]),s._v("å—åˆ°å•æœºçš„é™åˆ¶.")])]),s._v(" "),n("p",[s._v("è¿™ä¸€ç‚¹ä¹Ÿ"),n("strong",[s._v("ä¸é«˜å¯ç”¨")]),s._v(".")]),s._v(" "),n("h5",{attrs:{id:"_2-redis-sentinelæ¶æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-redis-sentinelæ¶æ„"}},[s._v("#")]),s._v(" 2.Redis Sentinelæ¶æ„")]),s._v(" "),n("p",[s._v("Redis Sentinel æ˜¯ä¸€ä¸ª"),n("strong",[s._v("åˆ†å¸ƒå¼æ¶æ„")]),s._v(", å…¶ä¸­åŒ…å«"),n("strong",[s._v("è‹¥å¹²ä¸ª Sentinel èŠ‚ç‚¹")]),s._v("å’Œ Redis æ•°æ®èŠ‚ç‚¹, æ¯ä¸ª Sentinel èŠ‚ç‚¹ä¼šå¯¹æ•°æ®èŠ‚ç‚¹å’Œ"),n("strong",[s._v("å…¶ä½™")]),s._v(" Sentinel èŠ‚ç‚¹è¿›è¡Œç›‘æ§, å½“å®ƒå‘ç°èŠ‚ç‚¹ä¸å¯è¾¾æ—¶, ä¼šå¯¹èŠ‚ç‚¹åš"),n("strong",[s._v("ä¸‹çº¿æ ‡è¯†")]),s._v(". å¦‚æœè¢«æ ‡è¯†çš„æ˜¯"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(', å®ƒè¿˜ä¼šå’Œå…¶ä»– Sentinel èŠ‚ç‚¹è¿›è¡Œ "'),n("strong",[s._v("åå•†")]),s._v('", å½“å¤§å¤šæ•° Sentinel èŠ‚ç‚¹'),n("strong",[s._v("éƒ½è®¤ä¸ºä¸»èŠ‚ç‚¹ä¸å¯è¾¾")]),s._v("æ—¶, å®ƒä»¬ä¼š"),n("strong",[s._v("é€‰ä¸¾å‡ºä¸€ä¸ª Sentinel èŠ‚ç‚¹")]),s._v("æ¥å®Œæˆ"),n("strong",[s._v("è‡ªåŠ¨æ•…éšœè½¬ç§»")]),s._v("çš„å·¥ä½œ, åŒæ—¶ä¼šå°†è¿™ä¸ªå˜åŒ–"),n("strong",[s._v("å®æ—¶é€šçŸ¥")]),s._v("ç»™å®¢æˆ·ç«¯.")]),s._v(" "),n("p",[s._v("ä¸»èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶, "),n("strong",[s._v("Redis Sentinel")]),s._v(" èƒ½"),n("strong",[s._v("è‡ªåŠ¨å®Œæˆæ•…éšœå‘ç°å’Œæ•…éšœè½¬ç§»")]),s._v(", å¹¶"),n("strong",[s._v("é€šçŸ¥åº”ç”¨æ–¹")]),s._v(", æ•´ä¸ªè¿‡ç¨‹å®Œå…¨æ˜¯"),n("strong",[s._v("è‡ªåŠ¨")]),s._v("çš„, ä¸éœ€è¦äººå·¥æ¥ä»‹å…¥, ä»è€Œå®ç°çœŸæ­£çš„"),n("strong",[s._v("é«˜å¯ç”¨")]),s._v(".")]),s._v(" "),n("p",[s._v("Redis Sentinel ä¸ Redis ä¸»ä»å¤åˆ¶çš„æ¶æ„ç›¸æ¯”è¾ƒ"),n("strong",[s._v("åªæ˜¯å¤šäº†è‹¥å¹² Sentinel èŠ‚ç‚¹")]),s._v(", æ‰€ä»¥ Redis Sentinel "),n("strong",[s._v("å¹¶æ²¡æœ‰")]),s._v("é’ˆå¯¹ Redis èŠ‚ç‚¹åšç‰¹æ®Šå¤„ç†.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218185927434.png",alt:""}})]),s._v(" "),n("p",[n("strong",[s._v("Sentinel èŠ‚ç‚¹æœ¬èº«å°±æ˜¯ç‹¬ç«‹çš„ Redis èŠ‚ç‚¹, åªä¸è¿‡å®ƒä»¬æœ‰ä¸€äº›ç‰¹æ®Š, å®ƒä»¬ä¸å­˜å‚¨æ•°æ®, åªæ”¯æŒéƒ¨åˆ†å‘½ä»¤")]),s._v(". Sentinel èŠ‚ç‚¹"),n("strong",[s._v("é›†åˆ")]),s._v("ä¼šå®šæœŸå¯¹"),n("strong",[s._v("æ‰€æœ‰èŠ‚ç‚¹")]),s._v("è¿›è¡Œç›‘æ§, ç‰¹åˆ«æ˜¯å¯¹ä¸»èŠ‚ç‚¹çš„"),n("strong",[s._v("æ•…éšœå®ç°è‡ªåŠ¨è½¬ç§»")]),s._v(".")]),s._v(" "),n("p",[s._v("Redis Sentinel åŒæ—¶åŒ…å«äº†"),n("strong",[s._v("è‹¥ä¸ª Sentinel èŠ‚ç‚¹")]),s._v(", è¿™æ ·åšæœ‰å¦‚ä¸‹å¥½å¤„:")]),s._v(" "),n("ul",[n("li",[s._v("èŠ‚ç‚¹"),n("strong",[s._v("æ•…éšœåˆ¤æ–­")]),s._v("ç”±å¤šä¸ª Sentinel èŠ‚ç‚¹"),n("strong",[s._v("å…±åŒå®Œæˆ")]),s._v(", å¯ä»¥"),n("strong",[s._v("é˜²æ­¢è¯¯åˆ¤")]),s._v(".")]),s._v(" "),n("li",[s._v("Sentinel èŠ‚ç‚¹é›†åˆç”±è‹¥å¹²ä¸ª Sentinel èŠ‚ç‚¹ç»„æˆ, å³ä½¿ä¸ªåˆ« Sentinel èŠ‚ç‚¹ä¸å¯ç”¨, æ•´ä¸ª Sentinel èŠ‚ç‚¹é›†åˆä¾ç„¶æ˜¯å¥å£®çš„, é˜²æ­¢ Sentinel å‡ºç°å•ç‚¹æ•…éšœ.")])]),s._v(" "),n("h5",{attrs:{id:"_3-sentinelçš„åŠŸèƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-sentinelçš„åŠŸèƒ½"}},[s._v("#")]),s._v(" 3.Sentinelçš„åŠŸèƒ½")]),s._v(" "),n("p",[s._v("Redis Sentinel å…·æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½:")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ç›‘æ§")]),s._v(": Sentinel èŠ‚ç‚¹ä¼šå®šæœŸæ£€æµ‹ Redis æ•°æ®èŠ‚ç‚¹ä»¥åŠå…¶ä½™ Sentinel èŠ‚ç‚¹æ˜¯å¦å¯è¾¾.")]),s._v(" "),n("li",[n("strong",[s._v("é€šçŸ¥")]),s._v(": Sentinel èŠ‚ç‚¹ä¼šå°†æ•…éšœè½¬ç§»çš„ç»“æœé€šçŸ¥ç»™åº”ç”¨æ–¹.")]),s._v(" "),n("li",[n("strong",[s._v("ä¸»èŠ‚ç‚¹æ•…éšœè½¬ç§»")]),s._v(": å®ç°ä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹å¹¶ç»´æŠ¤åç»­æ­£ç¡®çš„ä¸»ä»å…³ç³».")]),s._v(" "),n("li",[n("strong",[s._v("é…ç½®æä¾›è€…")]),s._v(": åœ¨ Sentinel ç»“æ„ä¸­, å®¢æˆ·ç«¯åˆå§‹åŒ–æ—¶è¿æ¥çš„æ˜¯ Sentinel èŠ‚ç‚¹"),n("strong",[s._v("é›†åˆ")]),s._v(", ä»ä¸­è·å–ä¸»èŠ‚ç‚¹ä¿¡æ¯.")])]),s._v(" "),n("h5",{attrs:{id:"_4-sentineléƒ¨ç½²ä¸é…ç½®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-sentineléƒ¨ç½²ä¸é…ç½®"}},[s._v("#")]),s._v(" 4.Sentineléƒ¨ç½²ä¸é…ç½®")]),s._v(" "),n("p",[s._v("éƒ¨ç½²å®æ“å¯ä»¥çœ‹çœ‹ Sentinel æ¶æ„çš„éƒ¨ç½²è¿‡ç¨‹: "),n("a",{attrs:{href:"https://blog.csdn.net/cuiwjava/article/details/98844949",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/cuiwjava/article/details/98844949"),n("OutboundLink")],1)]),s._v(" "),n("h6",{attrs:{id:"_1-é…ç½®å‚æ•°åŠä¼˜åŒ–"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-é…ç½®å‚æ•°åŠä¼˜åŒ–"}},[s._v("#")]),s._v(" (1)é…ç½®å‚æ•°åŠä¼˜åŒ–")]),s._v(" "),n("p",[s._v("Redis å®‰è£…ç›®å½•ä¸‹æœ‰ä¸€ä¸ª "),n("strong",[s._v("sentinel.conf")]),s._v(", æ˜¯é»˜è®¤çš„ Sentinel èŠ‚ç‚¹"),n("strong",[s._v("é…ç½®æ–‡ä»¶")]),s._v(".")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç«¯å£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /opt/soft/redis/data  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å·¥ä½œç›®å½•")]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½®ä¸»èŠ‚ç‚¹åœ°å€ç«¯å£, ä¸å¯è¾¾ç¥¨æ•°ä¸º2")]),s._v("\nsentinel down-after-milliseconds mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30000")]),s._v("\nsentinel parallel-syncs mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsentinel failover-timeout mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("180000")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sentinel auth-pass <master-name> <password>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sentinel notification-script <master-name> <script-path>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sentinel client-reconfig-script <master-name> <script-path>")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("strong",[s._v("â‘  sentinel monitor")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ sentinel monitor "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("master-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ip"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("quorum"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("Sentinel èŠ‚ç‚¹ä¼šå®šæœŸç›‘æ§"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(", æ‰€ä»¥ä»é…ç½®ä¸Šå¿…ç„¶ä¹Ÿä¼šæœ‰æ‰€ä½“ç°, Sentinel èŠ‚ç‚¹è¦ç›‘æ§çš„æ˜¯ä¸€ä¸ªåå­—å«åš "),n("master-name",[s._v(", ip åœ°å€å’Œç«¯å£ä¸º "),n("ip",[n("port",[s._v(" çš„"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(".")])],1)],1)],1),s._v(" "),n("p",[n("strong",[s._v("<quorum>")]),s._v(" ä»£è¡¨è¦åˆ¤å®š**==ä¸»èŠ‚ç‚¹æœ€ç»ˆä¸å¯è¾¾æ‰€éœ€è¦çš„ç¥¨æ•°=="),n("strong",[s._v(". "),n("quorum",[s._v(" å‚æ•°ç”¨äºæ•…éšœå‘ç°å’Œåˆ¤å®š, ä¾‹å¦‚å°† quorum é…ç½®ä¸º 2, ä»£è¡¨è‡³å°‘æœ‰ 2 ä¸ª Sentinel èŠ‚ç‚¹")])],1),s._v("è®¤ä¸º"),n("strong",[s._v("ä¸»èŠ‚ç‚¹ä¸å¯è¾¾æ—¶, è¿™ä¸ªä¸å¯è¾¾çš„åˆ¤å®šæ‰æ˜¯å®¢è§‚çš„. ä¸€èˆ¬å»ºè®®å°†å…¶")]),s._v("è®¾ç½®ä¸º Sentinel èŠ‚ç‚¹æ•°é‡çš„ä¸€åŠåŠ  1**.")]),s._v(" "),n("p",[s._v("åŒæ—¶ "),n("strong",[s._v("<quorum>")]),s._v(" è¿˜ä¸ Sentinel èŠ‚ç‚¹çš„"),n("strong",[s._v("é¢†å¯¼è€…é€‰ä¸¾")]),s._v("æœ‰å…³, è‡³å°‘è¦æœ‰ "),n("strong",[s._v("max(quorum, num(sentinels) / 2 + 1)")]),s._v(" ä¸ª Sentinel èŠ‚ç‚¹å‚ä¸é€‰ä¸¾, æ‰èƒ½é€‰å‡ºé¢†å¯¼è€… Sentinel, ä»è€Œå®Œæˆæ•…éšœè½¬ç§».")]),s._v(" "),n("p",[s._v("Sentinel èŠ‚ç‚¹ä¼šå¯¹"),n("strong",[s._v("æ‰€æœ‰èŠ‚ç‚¹")]),s._v("è¿›è¡Œç›‘æ§, ä½†åœ¨ Sentinel èŠ‚ç‚¹é…ç½®ä¸­æ²¡æœ‰çœ‹åˆ°æœ‰å…³ä»èŠ‚ç‚¹å’Œå…¶ä½™ Sentinel èŠ‚ç‚¹çš„é…ç½®, è¿™æ˜¯å› ä¸º Sentinel èŠ‚ç‚¹ä¼š"),n("strong",[s._v("è‡ªåŠ¨ä»ä¸»èŠ‚ä¸­è·å–æœ‰å…³ä»èŠ‚ç‚¹ä»¥åŠå…¶ä½™ Sentinel èŠ‚ç‚¹")]),s._v("çš„ç›¸å…³ä¿¡æ¯.")]),s._v(" "),n("p",[s._v("ä¾‹å¦‚æŸä¸ª Sentinel "),n("strong",[s._v("åˆå§‹èŠ‚ç‚¹é…ç½®")]),s._v("å¦‚ä¸‹:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26379.log"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /opt/soft/redis/data\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åªæœ‰ä¸»èŠ‚ç‚¹çš„é…ç½®")]),s._v("\nsentinel down-after-milliseconds mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30000")]),s._v("\nsentinel parallel-syncs mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsentinel failover-timeout mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("180000")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("å½“æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨å, é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å‘ç”Ÿäº†"),n("strong",[s._v("å˜åŒ–")]),s._v(", åŸæ¥é…ç½®æ–‡ä»¶ä¸­ä¼š"),n("strong",[s._v("è‡ªåŠ¨åŠ å…¥ä»èŠ‚ç‚¹å’Œå…¶ä»– Sentinel ç»“ç‚¹çš„ä¿¡æ¯")]),s._v(", å¹¶ä¼šå»æ‰ä¸€äº›é»˜è®¤é…ç½®å‚æ•°. å¦‚ä¸‹.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26379.log"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/soft/redis/data"')]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nsentinel config-epoch mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsentinel leader-epoch mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å‘ç°ä¸¤ä¸ªslaveèŠ‚ç‚¹")]),s._v("\nsentinel known-slave mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\nsentinel known-slave mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å‘ç°ä¸¤ä¸ªsentinelèŠ‚ç‚¹")]),s._v("\nsentinel known-sentinel mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26380")]),s._v(" 282a70ff56c36ed56e8f7ee6ada741\n24140d6f53\nsentinel known-sentinel mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26381")]),s._v(" f714470d30a61a8e39ae031192f1fe\nae7eb5b2be\nsentinel current-epoch "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("Redis Sentinel å¯ä»¥"),n("strong",[s._v("åŒæ—¶ç›‘æ§å¤šä¸ªä¸»èŠ‚ç‚¹")]),s._v(". é…ç½®æ—¶åªéœ€è¦æŒ‡å®š"),n("strong",[s._v("å¤šä¸ª masterName")]),s._v(" æ¥åŒºåˆ†"),n("strong",[s._v("ä¸åŒçš„ä¸»èŠ‚ç‚¹")]),s._v("å³å¯.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218185927434.png",alt:""}})]),s._v(" "),n("p",[n("strong",[s._v("â‘¡ sentinel down-after-milliseconds")])]),s._v(" "),n("p",[s._v("é…ç½®ç»“ç‚¹é—´ä¸å¯è¾¾"),n("strong",[s._v("è¶…æ—¶æ—¶é—´")]),s._v(".")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ sentinel down-after-milliseconds "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("master-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("times"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("æ¯ä¸ª Sentinel èŠ‚ç‚¹éƒ½è¦é€šè¿‡"),n("strong",[s._v("å®šæœŸå‘é€ ping å‘½ä»¤")]),s._v("æ¥åˆ¤æ–­ Redis æ•°æ®èŠ‚ç‚¹å’Œå…¶ä½™ Sentinel èŠ‚ç‚¹"),n("strong",[s._v("æ˜¯å¦å¯è¾¾")]),s._v(", å¦‚æœè¶…è¿‡äº† down-after-milliseconds é…ç½®çš„"),n("strong",[s._v("æ—¶é—´")]),s._v("ä¸”æ²¡æœ‰æœ‰æ•ˆçš„å›å¤, åˆ™åˆ¤å®šèŠ‚ç‚¹ä¸å¯è¾¾.")]),s._v(" "),n("p",[n("strong",[s._v("â‘¢ sentinel parallel-syncs")])]),s._v(" "),n("p",[s._v("ç”¨æ¥é™åˆ¶åœ¨ä¸€æ¬¡"),n("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v("ä¹‹å, "),n("strong",[s._v("æ¯æ¬¡å‘æ–°çš„ä¸»èŠ‚ç‚¹å‘èµ·å¤åˆ¶æ“ä½œ")]),s._v("çš„ä»èŠ‚ç‚¹ä¸ªæ•°.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ sentinel parallel-syncs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("master-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("nums"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h6",{attrs:{id:"_2-éƒ¨ç½²æŠ€å·§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-éƒ¨ç½²æŠ€å·§"}},[s._v("#")]),s._v(" (2)éƒ¨ç½²æŠ€å·§")]),s._v(" "),n("ul",[n("li",[s._v("Sentinel èŠ‚ç‚¹åº”éƒ¨ç½²åœ¨å¤šå°ç‰©ç†æœºå™¨ä¸Š.")]),s._v(" "),n("li",[s._v("éƒ¨ç½²"),n("strong",[s._v("ä¸‰ä¸ªä»¥ä¸Šä¸”å¥‡æ•°ä¸ª")]),s._v("çš„ Sentinel èŠ‚ç‚¹. 3 ä¸ªä»¥ä¸Šæ˜¯é€šè¿‡å¢åŠ  Sentinel èŠ‚ç‚¹çš„ä¸ªæ•°æé«˜å¯¹äºæ•…éšœåˆ¤å®šçš„"),n("strong",[s._v("å‡†ç¡®æ€§")]),s._v(", å› ä¸ºé¢†å¯¼è€…é€‰ä¸¾éœ€è¦è‡³å°‘ä¸€åŠåŠ  1 ä¸ªèŠ‚ç‚¹, å¥‡æ•°ä¸ªèŠ‚ç‚¹å¯ä»¥åœ¨æ»¡è¶³è¯¥æ¡ä»¶çš„åŸºç¡€ä¸ŠèŠ‚çœä¸€ä¸ªèŠ‚ç‚¹.")])]),s._v(" "),n("h5",{attrs:{id:"_5-å“¨å…µéƒ¨ç½²ä¸æ•…éšœè½¬ç§»demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-å“¨å…µéƒ¨ç½²ä¸æ•…éšœè½¬ç§»demo"}},[s._v("#")]),s._v(" 5.å“¨å…µéƒ¨ç½²ä¸æ•…éšœè½¬ç§»Demo")]),s._v(" "),n("p",[n("strong",[s._v("(1)ç¬¬ä¸€æ­¥: åˆ›å»ºä¸»ä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨")])]),s._v(" "),n("p",[s._v("å®‰è£…ç›®å½•ä¸‹æ‰¾åˆ° redis.conf æ–‡ä»¶å¤åˆ¶ä¸‰ä»½åˆ†åˆ«å‘½åä¸º redis-master.conf/redis-slave1.conf/redis-slave2.conf, åˆ†åˆ«ä½œä¸º 1 ä¸ªä¸»èŠ‚ç‚¹å’Œ 2 ä¸ªä»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶. åˆ†åˆ«ä¿®æ”¹å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-master.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379.log"')]),s._v("\ndbfilename "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dump-6379.rdb"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-slave1.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6380.log"')]),s._v("\ndbfilename "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dump-6380.rdb"')]),s._v("\nslaveof "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-slave2.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6381.log"')]),s._v("\ndbfilename "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dump-6381.rdb"')]),s._v("\nslaveof "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("ç„¶åæ‰§è¡Œ "),n("strong",[s._v("redis-server <"),n("strong",[s._v("â€‹")]),s._v("config file path>")]),s._v(" æ¥æ ¹æ®é…ç½®æ–‡ä»¶å¯åŠ¨ä¸åŒçš„ Redis èŠ‚ç‚¹å®ä¾‹.")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ redis-server /usr/local/redis-5.0.3/redis-master.conf\n$ redis-server /usr/local/redis-5.0.3/redis-slave1.conf\n$ redis-server /usr/local/redis-5.0.3/redis-slave2.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("èŠ‚ç‚¹å¯åŠ¨åå®¢æˆ·ç«¯è¿æ¥åˆ°ç«¯å£ä¸º "),n("strong",[s._v("6379 çš„ä¸»èŠ‚ç‚¹")]),s._v("æ‰§è¡Œ "),n("strong",[s._v("info Replication")]),s._v(" æ£€æŸ¥ä¸€ä¸‹"),n("strong",[s._v("ä¸»ä»çŠ¶æ€")]),s._v("æ˜¯å¦æ­£å¸¸(å¯ä»¥çœ‹åˆ°ä¸‹æ–¹æ­£ç¡®åœ°æ˜¾ç¤ºäº†ä¸¤ä¸ªä»èŠ‚ç‚¹):")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/7896890-a1c935f094240cac-3785108.png",alt:""}})]),s._v(" "),n("p",[n("strong",[s._v("(2)ç¬¬äºŒæ­¥: åˆ›å»ºå“¨å…µèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨")])]),s._v(" "),n("p",[s._v("æŒ‰ç…§åŒæ ·çš„æ–¹æ³•, ç»™"),n("strong",[s._v("å“¨å…µèŠ‚ç‚¹")]),s._v("ä¹Ÿåˆ›å»º"),n("strong",[s._v("ä¸‰ä¸ªé…ç½®æ–‡ä»¶")]),s._v(". å“¨å…µèŠ‚ç‚¹æœ¬è´¨ä¸Šæ˜¯ç‰¹æ®Šçš„ Redis èŠ‚ç‚¹, æ‰€ä»¥é…ç½®å‡ ä¹æ²¡ä»€ä¹ˆå·®åˆ«, åªæ˜¯åœ¨ç«¯å£ä¸ŠåšåŒºåˆ†å³å¯.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-sentinel-1.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26379.log"')]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-sentinel-2.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26380")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26380.log"')]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-sentinel-3.conf")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26381")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26381.log"')]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("å…¶ä¸­ "),n("strong",[s._v("sentinel monitor mymaster 127.0.0.1 6379 2")]),s._v(" é…ç½®çš„å«ä¹‰æ˜¯: è¯¥å“¨å…µèŠ‚ç‚¹ç›‘æ§ 127.0.0.1:6379 è¿™ä¸ª"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(", è¯¥ä¸»èŠ‚ç‚¹çš„åç§°æ˜¯ mymaster, æœ€å 2 çš„å«ä¹‰ä¸ä¸»èŠ‚ç‚¹çš„æ•…éšœåˆ¤å®šæœ‰å…³: "),n("strong",[s._v("è‡³å°‘éœ€è¦ 2 ä¸ªå“¨å…µèŠ‚ç‚¹åŒæ„")]),s._v(", æ‰èƒ½åˆ¤å®šä¸»èŠ‚ç‚¹æ•…éšœå¹¶è¿›è¡Œæ•…éšœè½¬ç§».")]),s._v(" "),n("p",[s._v("æ‰§è¡Œå‘½ä»¤å¯åŠ¨å“¨å…µèŠ‚ç‚¹.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ redis-server /usr/local/redis-5.0.3/redis-sentinel-1.conf "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--sentinel")]),s._v("\n$ redis-server /usr/local/redis-5.0.3/redis-sentinel-2.conf "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--sentinel")]),s._v("\n$ redis-server /usr/local/redis-5.0.3/redis-sentinel-3.conf "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--sentinel")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥å“¨å…µèŠ‚ç‚¹, å¹¶æ‰§è¡Œ "),n("strong",[s._v("info Sentinel å‘½ä»¤")]),s._v("æ¥æŸ¥çœ‹æ˜¯å¦å·²ç»åœ¨ç›‘è§†ä¸»èŠ‚ç‚¹äº†.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿æ¥ç«¯å£ä¸º 26379 çš„ Redis èŠ‚ç‚¹")]),s._v("\n$ redis-cli "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:2637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" info Sentinel\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Sentinel")]),s._v("\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mymaster,status"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ok,address"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379,slaves"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(",sentinels"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("æŸ¥çœ‹å“¨å…µé…ç½®æ–‡ä»¶, ä¼šå‘ç°å·²ç»è‡ªåŠ¨å†™å…¥ä¸€äº›èŠ‚ç‚¹ç›¸å…³çš„ä¿¡æ¯.")]),s._v(" "),n("p",[n("strong",[s._v("(3)ç¬¬ä¸‰æ­¥: æ¨¡æ‹Ÿæ•…éšœè½¬ç§»")])]),s._v(" "),n("p",[s._v("ä½¿ç”¨ "),n("strong",[s._v('"kill -9"')]),s._v(" å‘½ä»¤"),n("strong",[s._v("æ€æ‰ä¸»èŠ‚ç‚¹")]),s._v(", åŒæ—¶åœ¨å“¨å…µèŠ‚ç‚¹ä¸­æ‰§è¡Œ "),n("strong",[s._v('"info Sentinel" å‘½ä»¤')]),s._v("æ¥è§‚å¯Ÿæ•…éšœèŠ‚ç‚¹çš„è¿‡ç¨‹.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("74529")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4346936")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2132")]),s._v("   ??  Ss   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":30ä¸Šåˆ   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":03.09 redis-server *:26379 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sentinel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("73541")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4348072")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2292")]),s._v("   ??  Ss   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":18ä¸Šåˆ   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":04.79 redis-server *:6379\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75521")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4286728")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("728")]),s._v(" s008  S+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":39ä¸Šåˆ   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--color")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto --exclude-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".bzr --exclude-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CVS --exclude-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".git --exclude-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".hg --exclude-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".svn "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("74836")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4289844")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("944")]),s._v(" s006  S+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":32ä¸Šåˆ   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.01 redis-cli "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("73541")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("å¦‚æœ"),n("strong",[s._v("åˆšæ€æ‰ç¬é—´")]),s._v('åœ¨å“¨å…µèŠ‚ç‚¹ä¸­æ‰§è¡Œ "info" å‘½ä»¤, ä¼šå‘ç°ä¸»èŠ‚ç‚¹è¿˜æ²¡æœ‰åˆ‡æ¢è¿‡æ¥, å› ä¸ºå“¨å…µå‘ç°ä¸»èŠ‚ç‚¹æ•…éšœå¹¶è½¬ç§»éœ€è¦ä¸€æ®µæ—¶é—´. ä¸€æ®µæ—¶é—´ä¹‹åå†æ‰§è¡Œ '),n("strong",[s._v('"info" å‘½ä»¤')]),s._v(", å°±ä¼šå‘ç°"),n("strong",[s._v("ä¸»èŠ‚ç‚¹å·²ç»åˆ‡æ¢æˆäº† 6381 ç«¯å£çš„ä»èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿‡ä¸€æ®µæ—¶é—´ä¹‹ååœ¨æ‰§è¡Œ, å‘ç°å·²ç»åˆ‡æ¢äº† 6381 ç«¯å£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:2637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" info Sentinel\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Sentinel")]),s._v("\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mymaster,status"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ok,address"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381,slaves"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(",sentinels"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("ä½†åŒæ—¶è¿˜å¯ä»¥å‘ç°, "),n("strong",[s._v("å“¨å…µèŠ‚ç‚¹è®¤ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ä»ç„¶æœ‰ä¸¤ä¸ªä»èŠ‚ç‚¹")]),s._v("(ä¸Šæ–¹ slaves=2), è¿™æ˜¯å› ä¸ºå“¨å…µåœ¨å°† 6381 åˆ‡æ¢æˆä¸»èŠ‚ç‚¹çš„åŒæ—¶, å°† 6379 èŠ‚ç‚¹ç½®ä¸ºå…¶ä»èŠ‚ç‚¹. è™½ç„¶ 6379 ä»èŠ‚ç‚¹å·²ç»æŒ‚æ‰, ä½†æ˜¯ç”±äº "),n("strong",[s._v("å“¨å…µå¹¶ä¸ä¼šå¯¹ä»èŠ‚ç‚¹è¿›è¡Œå®¢è§‚ä¸‹çº¿")]),s._v(", å› æ­¤è®¤ä¸ºè¯¥ä»èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨. å½“ 6379 èŠ‚ç‚¹é‡æ–°å¯åŠ¨å, ä¼šè‡ªåŠ¨å˜æˆ 6381 èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹.")]),s._v(" "),n("p",[s._v("å¦å¤–åœ¨æ•…éšœè½¬ç§»çš„é˜¶æ®µ, å“¨å…µå’Œä¸»ä»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶éƒ½ä¼šè¢«æ”¹å†™:")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("å¯¹äºä¸»ä»èŠ‚ç‚¹: â€‹")]),s._v("ä¸»è¦æ˜¯ slaveof é…ç½®çš„å˜åŒ–, æ–°çš„ä¸»èŠ‚ç‚¹æ²¡æœ‰äº† slaveof é…ç½®, å…¶ä»èŠ‚ç‚¹åˆ™ slaveof æ–°çš„ä¸»èŠ‚ç‚¹.")]),s._v(" "),n("li",[n("strong",[s._v("å¯¹äºå“¨å…µèŠ‚ç‚¹: â€‹")]),s._v("é™¤äº†ä¸»ä»èŠ‚ç‚¹ä¿¡æ¯çš„å˜åŒ–, ç”¨äºè®°å½•å½“å‰é›†ç¾¤çŠ¶æ€çš„å‚æ•°çºªå…ƒ(epoch) ä¹Ÿä¼šå˜åŒ–, çºªå…ƒç›¸å…³çš„å‚æ•°éƒ½ +1 äº†.")])]),s._v(" "),n("h4",{attrs:{id:"redis-sentinel-apiä¸å®¢æˆ·ç«¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-sentinel-apiä¸å®¢æˆ·ç«¯"}},[s._v("#")]),s._v(" Redis Sentinel APIä¸å®¢æˆ·ç«¯")]),s._v(" "),n("h5",{attrs:{id:"_1-sentinel-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-sentinel-api"}},[s._v("#")]),s._v(" 1.Sentinel API")]),s._v(" "),n("p",[s._v("Sentinel èŠ‚ç‚¹æ˜¯ä¸€ä¸ª"),n("strong",[s._v("ç‰¹æ®Šçš„ Redis èŠ‚ç‚¹")]),s._v(", å®ƒæœ‰è‡ªå·±"),n("strong",[s._v("ä¸“å±çš„ API")]),s._v(".")]),s._v(" "),n("p",[n("strong",[s._v("â‘  sentinel masters")]),s._v(": å±•ç¤ºæ‰€æœ‰è¢«ç›‘æ§çš„"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("çŠ¶æ€ä»¥åŠç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:2637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" sentinel masters\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mymaster-2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"port"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6382"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".å¿½ç•¥"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mymaster-1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"port"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".å¿½ç•¥"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[n("strong",[s._v("â‘¡ sentinel master <"),n("strong",[s._v("â€‹")]),s._v("master name>")]),s._v(": å±•ç¤ºæŒ‡å®š "),n("master",{attrs:{name:""}},[s._v(" çš„"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("çŠ¶æ€ä»¥åŠç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯.")])],1),s._v(" "),n("p",[n("strong",[s._v("â‘¢ sentinel slaves <"),n("strong",[s._v("â€‹")]),s._v("master name>")]),s._v(": å±•ç¤ºæŒ‡å®š "),n("master",{attrs:{name:""}},[s._v(" çš„"),n("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("çŠ¶æ€ä»¥åŠç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯.")])],1),s._v(" "),n("p",[n("strong",[s._v("â‘£ sentinel sentinels <"),n("strong",[s._v("â€‹")]),s._v("master name>")]),s._v(": å±•ç¤ºæŒ‡å®š "),n("master",{attrs:{name:""}},[s._v(" çš„ "),n("strong",[s._v("Sentinel èŠ‚ç‚¹é›†åˆ")]),s._v(", ä¸åŒ…å«å½“å‰ Sentinel èŠ‚ç‚¹.")])],1),s._v(" "),n("p",[n("strong",[s._v("â‘¤ sentinel failover <"),n("strong",[s._v("â€‹")]),s._v("master name>")]),s._v(": å¯¹æŒ‡å®š "),n("master",{attrs:{name:""}},[n("strong",[s._v("ä¸»èŠ‚ç‚¹è¿›è¡Œå¼ºåˆ¶æ•…éšœè½¬ç§»")]),s._v("(æ²¡æœ‰å’Œå…¶ä»– Sentinel èŠ‚ç‚¹åå•†), å½“æ•…éšœè½¬ç§»å®Œæˆå, å…¶ä»– Sentinel èŠ‚ç‚¹æŒ‰ç…§æ•…éšœè½¬ç§»çš„ç»“æœ"),n("strong",[s._v("æ›´æ–°è‡ªèº«é…ç½®")]),s._v(", è¿™ä¸ªå‘½ä»¤åœ¨ Redis Sentinel çš„"),n("strong",[s._v("æ—¥å¸¸è¿ç»´ä¸­éå¸¸æœ‰ç”¨")]),s._v(".")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:2637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" sentinel failover mymaster-2\nOK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("â‘¥ sentinel remove <"),n("strong",[s._v("â€‹")]),s._v("master name>")]),s._v(": å–æ¶ˆå¯¹æŸä¸ªä¸»èŠ‚ç‚¹çš„ç›‘æ§.")]),s._v(" "),n("h5",{attrs:{id:"_2-å®¢æˆ·ç«¯è¿æ¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯è¿æ¥"}},[s._v("#")]),s._v(" 2.å®¢æˆ·ç«¯è¿æ¥")]),s._v(" "),n("h6",{attrs:{id:"_1-æ¦‚è¿°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" (1)æ¦‚è¿°")]),s._v(" "),n("p",[n("strong",[s._v("å®¢æˆ·ç«¯åˆå§‹åŒ–æ—¶è¿æ¥")]),s._v("çš„æ˜¯ Sentinel "),n("strong",[s._v("èŠ‚ç‚¹é›†åˆ")]),s._v(", "),n("strong",[s._v("ä¸å†æ˜¯")]),s._v("å…·ä½“çš„ Redis èŠ‚ç‚¹, ä½† Sentinel åªæ˜¯é…ç½®ä¸­å¿ƒä¸æ˜¯ä»£ç†.")]),s._v(" "),n("p",[s._v("Sentinel èŠ‚ç‚¹é›†åˆå…·å¤‡äº†"),n("strong",[s._v("ç›‘æ§, é€šçŸ¥, è‡ªåŠ¨æ•…éšœè½¬ç§», é…ç½®æä¾›è€…è‹¥å¹²åŠŸèƒ½")]),s._v(", æ‰€ä»¥æœ€äº†è§£ä¸»èŠ‚ç‚¹ä¿¡æ¯çš„å°±æ˜¯ Sentinel èŠ‚ç‚¹é›†åˆ, è€Œå„ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥é€šè¿‡ "),n("master-name",[s._v(" è¿›è¡Œæ ‡è¯†. å¦‚æœéœ€è¦æ­£ç¡®åœ°è¿æ¥ Redis Sentinel, å¿…é¡»æœ‰ "),n("strong",[s._v("Sentinel èŠ‚ç‚¹é›†åˆå’Œ masterName ä¸¤ä¸ªå‚æ•°")]),s._v(".")])],1),s._v(" "),n("p",[s._v("å®¢æˆ·ç«¯åŸºæœ¬æ“ä½œ:")]),s._v(" "),n("ul",[n("li",[s._v("éå† Sentinel èŠ‚ç‚¹é›†åˆè·å–ä¸€ä¸ªå¯ç”¨çš„ Sentinel èŠ‚ç‚¹, Sentinel èŠ‚ç‚¹ä¹‹é—´å¯ä»¥"),n("strong",[s._v("å…±äº«æ•°æ®")]),s._v(", æ‰€ä»¥ä»"),n("strong",[s._v("ä»»æ„")]),s._v("ä¸€ä¸ª Sentinel èŠ‚ç‚¹è·å–"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("ä¿¡æ¯éƒ½æ˜¯å¯ä»¥çš„.")]),s._v(" "),n("li",[s._v("éœ€è¦"),n("strong",[s._v("éªŒè¯")]),s._v('å½“å‰è·å–çš„ "ä¸»èŠ‚ç‚¹" æ˜¯çœŸæ­£çš„ä¸»èŠ‚ç‚¹, è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢'),n("strong",[s._v("æ•…éšœè½¬ç§»æœŸé—´")]),s._v("ä¸»èŠ‚ç‚¹çš„å˜åŒ–.")]),s._v(" "),n("li",[s._v("ä¿æŒå’Œ Sentinel èŠ‚ç‚¹é›†åˆçš„è”ç³», æ—¶åˆ»è·å–å…³äºä¸»èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯.")])]),s._v(" "),n("h6",{attrs:{id:"_2-jedis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-jedis"}},[s._v("#")]),s._v(" (2)Jedis")]),s._v(" "),n("p",[s._v("Jedis ä¹Ÿæä¾›äº† "),n("strong",[s._v("Sentinel")]),s._v(" è¿æ¥æ± .")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisSentinelPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" masterName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸»èŠ‚ç‚¹å")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" sentinels"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// SentinelèŠ‚ç‚¹é›†åˆ")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenericObjectPoolConfig")]),s._v(" poolConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// common-poolè¿æ¥æ± é…ç½®")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" connectionTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿æ¥è¶…æ—¶")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" soTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯»å†™è¶…æ—¶")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸»èŠ‚ç‚¹å¯†ç ")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" database"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å½“å‰æ•°æ®åº“ç´¢å¼•")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" clientName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®¢æˆ·ç«¯å")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("è¿æ¥æ—¶"),n("strong",[s._v("éå†")]),s._v(" Sentinel ç»“ç‚¹é›†åˆ, æ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„ Sentinel ç»“ç‚¹, ç„¶åä»ä¸­å¾—åˆ°"),n("strong",[s._v("ä¸»èŠ‚ç‚¹ä¿¡æ¯")]),s._v(".")]),s._v(" "),n("h4",{attrs:{id:"å“¨å…µå®ç°åŸç†ğŸŒŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å“¨å…µå®ç°åŸç†ğŸŒŸ"}},[s._v("#")]),s._v(" å“¨å…µå®ç°åŸç†ğŸŒŸ")]),s._v(" "),n("p",[s._v("è¯¦ç»†ä»‹ç»ä¸€ä¸‹å“¨å…µæœºåˆ¶æ˜¯å¦‚ä½•å®ç°çš„.")]),s._v(" "),n("h5",{attrs:{id:"_1-ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡"}},[s._v("#")]),s._v(" 1.ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡")]),s._v(" "),n("p",[s._v("ä¸€å¥—åˆç†çš„ç›‘æ§æœºåˆ¶æ˜¯ Sentinel èŠ‚ç‚¹åˆ¤å®šèŠ‚ç‚¹"),n("strong",[s._v("ä¸å¯è¾¾")]),s._v("çš„é‡è¦ä¿è¯, Redis Sentinel é€šè¿‡"),n("strong",[s._v("ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡")]),s._v("å®Œæˆå¯¹å„ä¸ªèŠ‚ç‚¹å‘ç°å’Œç›‘æ§.")]),s._v(" "),n("h6",{attrs:{id:"_1-sentinelä¸æ•°æ®ç»“ç‚¹çš„å®šæ—¶ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-sentinelä¸æ•°æ®ç»“ç‚¹çš„å®šæ—¶ä»»åŠ¡"}},[s._v("#")]),s._v(" (1)Sentinelä¸æ•°æ®ç»“ç‚¹çš„å®šæ—¶ä»»åŠ¡")]),s._v(" "),n("p",[s._v("æ¯éš” "),n("strong",[s._v("10 ç§’")]),s._v(", æ¯ä¸ª "),n("strong",[s._v("Sentinel èŠ‚ç‚¹")]),s._v("ä¼šå‘"),n("strong",[s._v("ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹")]),s._v("å‘é€ "),n("strong",[s._v("info å‘½ä»¤")]),s._v("è·å–æœ€æ–°çš„æ‹“æ‰‘ç»“æ„.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523213535648.png",alt:""}})]),s._v(" "),n("p",[s._v("å¦‚åœ¨ä¸€ä¸ªä¸»èŠ‚ç‚¹æ‰§è¡Œ "),n("strong",[s._v("info replication")]),s._v(" å‘½ä»¤.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replication")]),s._v("\nrole:master\nconnected_slaves:2\nslave0:ip"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(",state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("online,offset"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4917")]),s._v(",lag"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslave1:ip"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(",state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("online,offset"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4917")]),s._v(",lag"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("Sentinel èŠ‚ç‚¹é€šè¿‡å¯¹ä¸Šè¿°ç»“æœè¿›è¡Œ"),n("strong",[s._v("è§£æ")]),s._v("å°±å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„"),n("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),n("p",[s._v("è¿™ä¸ªå®šæ—¶ä»»åŠ¡çš„ä½œç”¨æœ‰:")]),s._v(" "),n("ul",[n("li",[s._v("é€šè¿‡å‘ä¸»èŠ‚ç‚¹æ‰§è¡Œ info å‘½ä»¤, è·å–ä»èŠ‚ç‚¹çš„ä¿¡æ¯, å› æ­¤ Sentinel èŠ‚ç‚¹æ— éœ€æ˜¾å¼é…ç½®ç›‘æ§ä»èŠ‚ç‚¹.")]),s._v(" "),n("li",[s._v("å½“æœ‰æ–°çš„ä»èŠ‚ç‚¹åŠ å…¥æ—¶éƒ½å¯ä»¥"),n("strong",[s._v("ç«‹åˆ»æ„ŸçŸ¥")]),s._v("å‡ºæ¥.")]),s._v(" "),n("li",[s._v("èŠ‚ç‚¹ä¸å¯è¾¾æˆ–è€…æ•…éšœè½¬ç§»å, å¯ä»¥é€šè¿‡ info å‘½ä»¤å®æ—¶"),n("strong",[s._v("æ›´æ–°")]),s._v("èŠ‚ç‚¹æ‹“æ‰‘ä¿¡æ¯.")])]),s._v(" "),n("h6",{attrs:{id:"_2-sentinelä¹‹é—´çš„å®šæ—¶ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-sentinelä¹‹é—´çš„å®šæ—¶ä»»åŠ¡"}},[s._v("#")]),s._v(" (2)Sentinelä¹‹é—´çš„å®šæ—¶ä»»åŠ¡")]),s._v(" "),n("p",[s._v("æ¯éš” "),n("strong",[s._v("2 ç§’")]),s._v(", "),n("strong",[s._v("æ¯ä¸ª Sentinel èŠ‚ç‚¹")]),s._v("ä¼šå‘ Redis "),n("strong",[s._v("æ•°æ®èŠ‚ç‚¹")]),s._v("çš„ "),n("strong",[n("strong",[s._v("sentinel")])]),s._v("â€‹**: hello** é¢‘é“ä¸Šå‘é€è¯¥ Sentinel èŠ‚ç‚¹å¯¹äº"),n("strong",[s._v("ä¸»èŠ‚ç‚¹çš„åˆ¤æ–­")]),s._v("ä»¥åŠå½“å‰ Sentinel "),n("strong",[s._v("èŠ‚ç‚¹çš„ä¿¡æ¯")]),s._v(", åŒæ—¶æ¯ä¸ª Sentinel èŠ‚ç‚¹ä¹Ÿä¼š"),n("strong",[s._v("è®¢é˜…è¯¥é¢‘é“")]),s._v(", æ¥äº†è§£å…¶ä»– Sentinel èŠ‚ç‚¹ä»¥åŠå®ƒä»¬å¯¹ä¸»èŠ‚ç‚¹çš„åˆ¤æ–­.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523213648378.png",alt:""}})]),s._v(" "),n("p",[s._v("è¿™ä¸ªå®šæ—¶ä»»åŠ¡çš„ä½œç”¨:")]),s._v(" "),n("ul",[n("li",[s._v("å‘ç°"),n("strong",[s._v("æ–°çš„ Sentinel èŠ‚ç‚¹")]),s._v(": é€šè¿‡è®¢é˜…ä¸»èŠ‚ç‚¹çš„ "),n("em",[n("em",[s._v("sentinel")])]),s._v(": hello äº†è§£å…¶ä»–çš„ Sentinel èŠ‚ç‚¹ä¿¡æ¯, å¦‚æœæ˜¯æ–°åŠ å…¥çš„ Sentinel èŠ‚ç‚¹, å°†è¯¥ Sentinel èŠ‚ç‚¹ä¿¡æ¯ä¿å­˜èµ·æ¥, å¹¶ä¸è¯¥ Sentinel èŠ‚ç‚¹åˆ›å»ºè¿æ¥.")]),s._v(" "),n("li",[s._v("Sentinel èŠ‚ç‚¹ä¹‹é—´"),n("strong",[s._v("äº¤æ¢ä¸»èŠ‚ç‚¹çš„çŠ¶æ€")]),s._v(", ä½œä¸ºåé¢"),n("strong",[s._v("å®¢è§‚ä¸‹çº¿")]),s._v("ä»¥åŠ"),n("strong",[s._v("é¢†å¯¼è€…é€‰ä¸¾")]),s._v("çš„ä¾æ®.")])]),s._v(" "),n("h6",{attrs:{id:"_3-å¿ƒè·³å®šæ—¶ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¿ƒè·³å®šæ—¶ä»»åŠ¡"}},[s._v("#")]),s._v(" (3)å¿ƒè·³å®šæ—¶ä»»åŠ¡")]),s._v(" "),n("p",[s._v("æ¯éš” "),n("strong",[s._v("1 ç§’")]),s._v(", æ¯ä¸ª Sentinel èŠ‚ç‚¹ä¼šå‘"),n("strong",[s._v("ä¸»èŠ‚ç‚¹, ä»èŠ‚ç‚¹, å…¶ä½™ Sentinel èŠ‚ç‚¹")]),s._v("å‘é€ä¸€æ¡ "),n("strong",[s._v("ping å‘½ä»¤åšä¸€æ¬¡å¿ƒè·³æ£€æµ‹")]),s._v(", æ¥ç¡®è®¤è¿™äº›èŠ‚ç‚¹å½“å‰"),n("strong",[s._v("æ˜¯å¦å¯è¾¾")]),s._v(". é€šè¿‡ä¸Šé¢çš„å®šæ—¶ä»»åŠ¡, Sentinel èŠ‚ç‚¹å¯¹ä¸»èŠ‚ç‚¹, ä»èŠ‚ç‚¹, å…¶ä½™ Sentinel èŠ‚ç‚¹"),n("strong",[s._v("éƒ½å»ºç«‹èµ·è¿æ¥")]),s._v(", å®ç°äº†å¯¹"),n("strong",[s._v("æ¯ä¸ªèŠ‚ç‚¹")]),s._v("çš„ç›‘æ§, è¿™ä¸ªå®šæ—¶ä»»åŠ¡æ˜¯èŠ‚ç‚¹å¤±è´¥åˆ¤å®šçš„é‡è¦ä¾æ®.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523213736868.png",alt:""}})]),s._v(" "),n("h5",{attrs:{id:"_2-ä¸»è§‚ä¸‹çº¿ä¸å®¢è§‚ä¸‹çº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸»è§‚ä¸‹çº¿ä¸å®¢è§‚ä¸‹çº¿"}},[s._v("#")]),s._v(" 2.ä¸»è§‚ä¸‹çº¿ä¸å®¢è§‚ä¸‹çº¿")]),s._v(" "),n("h6",{attrs:{id:"_1-ä¸»è§‚ä¸‹çº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸»è§‚ä¸‹çº¿"}},[s._v("#")]),s._v(" (1)ä¸»è§‚ä¸‹çº¿")]),s._v(" "),n("p",[n("strong",[s._v("æ¯ä¸ª Sentinel èŠ‚ç‚¹")]),s._v("ä¼šæ¯éš” 1 ç§’å¯¹ä¸»èŠ‚ç‚¹, ä»èŠ‚ç‚¹, å…¶ä»– Sentinel èŠ‚ç‚¹å‘é€ ping å‘½ä»¤åš"),n("strong",[s._v("å¿ƒè·³æ£€æµ‹")]),s._v(", å½“è¿™äº›èŠ‚ç‚¹è¶…è¿‡ down-after-milliseconds "),n("strong",[s._v("æ²¡æœ‰è¿›è¡Œæœ‰æ•ˆå›å¤")]),s._v(", è¿™ä¸ª Sentinel èŠ‚ç‚¹å°±ä¼šå¯¹"),n("strong",[s._v("è¯¥èŠ‚ç‚¹åšå¤±è´¥åˆ¤å®š")]),s._v(", è¿™ä¸ªè¡Œä¸ºå«åš"),n("strong",[s._v("ä¸»è§‚ä¸‹çº¿")]),s._v(".")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523213813042.png",alt:""}})]),s._v(" "),n("p",[s._v("ä»å­—é¢æ„æ€ä¹Ÿå¯ä»¥çœ‹å‡ºä¸»è§‚ä¸‹çº¿æ˜¯"),n("strong",[s._v("å½“å‰ Sentinel èŠ‚ç‚¹çš„ä¸€å®¶ä¹‹è¨€")]),s._v(", å­˜åœ¨"),n("strong",[s._v("è¯¯åˆ¤")]),s._v("çš„å¯èƒ½. ä¹Ÿå°±æ˜¯å¯èƒ½å°±è¿™ä¸€ä¸ª Sentinel è®¤ä¸ºä¸€ä¸ªç»“ç‚¹æ˜¯ä¸‹çº¿äº†.")]),s._v(" "),n("h6",{attrs:{id:"_2-å®¢è§‚ä¸‹çº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢è§‚ä¸‹çº¿"}},[s._v("#")]),s._v(" (2)å®¢è§‚ä¸‹çº¿")]),s._v(" "),n("p",[s._v("å½“ Sentinel ä¸»è§‚ä¸‹çº¿çš„èŠ‚ç‚¹æ˜¯"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("æ—¶, è¯¥ Sentinel èŠ‚ç‚¹ä¼šé€šè¿‡ "),n("strong",[s._v("sentinel ismaster-down-by-addr")]),s._v(" å‘½ä»¤å‘å…¶ä»– Sentinel èŠ‚ç‚¹"),n("strong",[s._v("è¯¢é—®å¯¹ä¸»èŠ‚ç‚¹çš„åˆ¤æ–­")]),s._v(", å½“"),n("strong",[s._v("è¶…è¿‡ <quorum> ä¸ªæ•°")]),s._v(", Sentinel èŠ‚ç‚¹è®¤ä¸ºä¸»èŠ‚ç‚¹"),n("strong",[s._v("ç¡®å®æœ‰é—®é¢˜")]),s._v(", è¿™æ—¶è¯¥ Sentinel èŠ‚ç‚¹ä¼š"),n("strong",[s._v("åšå‡ºå®¢è§‚ä¸‹çº¿")]),s._v("çš„å†³å®š, ä¹Ÿå°±æ˜¯å¤§éƒ¨åˆ† Sentinel èŠ‚ç‚¹éƒ½å¯¹ä¸»èŠ‚ç‚¹çš„ä¸‹çº¿åšäº†åŒæ„çš„åˆ¤å®š, é‚£ä¹ˆè¿™ä¸ªåˆ¤å®šå°±æ˜¯"),n("strong",[s._v("å®¢è§‚")]),s._v("çš„.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523213901063.png",alt:""}})]),s._v(" "),n("p",[s._v("æ³¨æ„: "),n("strong",[s._v("ä»èŠ‚ç‚¹, Sentinel èŠ‚ç‚¹åœ¨ä¸»è§‚ä¸‹çº¿å, æ²¡æœ‰åç»­çš„æ•…éšœè½¬ç§»æ“ä½œ")]),s._v(". "),n("strong",[s._v("åªå¯¹ä¸»èŠ‚ç‚¹åšæ•…éšœè½¬ç§»")]),s._v(".")]),s._v(" "),n("h5",{attrs:{id:"_3-é¢†å¯¼è€…sentinelé€‰ä¸¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-é¢†å¯¼è€…sentinelé€‰ä¸¾"}},[s._v("#")]),s._v(" 3.é¢†å¯¼è€…Sentinelé€‰ä¸¾")]),s._v(" "),n("p",[s._v("å‡å¦‚ Sentinel èŠ‚ç‚¹å¯¹äº"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("å·²ç»åšäº†"),n("strong",[s._v("å®¢è§‚ä¸‹çº¿")]),s._v(", å¹¶ä¸æ˜¯é©¬ä¸Šè¿›è¡Œæ•…éšœè½¬ç§». å®é™…ä¸Š"),n("strong",[s._v("æ•…éšœè½¬ç§»çš„å·¥ä½œ")]),s._v("åªéœ€è¦"),n("strong",[s._v("ä¸€ä¸ª Sentinel èŠ‚ç‚¹æ¥å®Œæˆ")]),s._v("å³å¯, æ‰€ä»¥ Sentinel èŠ‚ç‚¹ä¹‹é—´ä¼šåšä¸€ä¸ª"),n("strong",[s._v("é¢†å¯¼è€…é€‰ä¸¾")]),s._v("çš„å·¥ä½œ, é€‰å‡ºä¸€ä¸ª Sentinel èŠ‚ç‚¹"),n("strong",[s._v("ä½œä¸ºé¢†å¯¼è€…è¿›è¡Œæ•…éšœè½¬ç§»")]),s._v("çš„å·¥ä½œ. Redis ä½¿ç”¨äº† "),n("strong",[s._v("Raft ç®—æ³•")]),s._v("å®ç°é¢†å¯¼è€…é€‰ä¸¾. å¤§è‡´æ€è·¯:")]),s._v(" "),n("p",[s._v("(1) æ¯ä¸ªåœ¨çº¿çš„ Sentinel èŠ‚ç‚¹éƒ½æœ‰èµ„æ ¼æˆä¸ºé¢†å¯¼è€…, å½“å®ƒç¡®è®¤ä¸»èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿æ—¶å€™, ä¼šå‘å…¶ä»– Sentinel èŠ‚ç‚¹å‘é€ sentinel is-master-down-by-addr å‘½ä»¤, è¦æ±‚"),n("strong",[s._v("å°†è‡ªå·±")]),s._v("è®¾ç½®ä¸ºé¢†å¯¼è€….")]),s._v(" "),n("p",[s._v("(2) æ”¶åˆ°å‘½ä»¤çš„ Sentinel èŠ‚ç‚¹, å¦‚æœæ²¡æœ‰åŒæ„è¿‡å…¶ä»– Sentinel èŠ‚ç‚¹çš„ sentinel is-master-down-by-addr å‘½ä»¤, å°†"),n("strong",[s._v("åŒæ„")]),s._v("è¯¥è¯·æ±‚, å¦åˆ™æ‹’ç».")]),s._v(" "),n("p",[s._v("(3) å¦‚æœè¯¥ Sentinel èŠ‚ç‚¹å‘ç°"),n("strong",[s._v("è‡ªå·±çš„ç¥¨æ•°å·²ç»å¤§äºç­‰äº max(quorum, num(sentinels) / 2 + 1)")]),s._v(", é‚£ä¹ˆå®ƒå°†æˆä¸º"),n("strong",[s._v("é¢†å¯¼è€…")]),s._v(". æ¯ä¸ª Sentinel èŠ‚ç‚¹åªæœ‰"),n("strong",[s._v("ä¸€ç¥¨")]),s._v(".")]),s._v(" "),n("p",[s._v("(4) å¦‚æœæ­¤è¿‡ç¨‹æ²¡æœ‰é€‰ä¸¾å‡ºé¢†å¯¼è€…, å°†è¿›å…¥"),n("strong",[s._v("ä¸‹ä¸€æ¬¡")]),s._v("é€‰ä¸¾.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200725150625390.png",alt:""}})]),s._v(" "),n("p",[s._v("é€‰ä¸¾çš„è¿‡ç¨‹éå¸¸å¿«, åŸºæœ¬ä¸Šè°å…ˆå®Œæˆå®¢è§‚ä¸‹çº¿, è°å°±æ˜¯é¢†å¯¼è€….")]),s._v(" "),n("h5",{attrs:{id:"_4-æ•…éšœè½¬ç§»è¿‡ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ•…éšœè½¬ç§»è¿‡ç¨‹"}},[s._v("#")]),s._v(" 4.æ•…éšœè½¬ç§»è¿‡ç¨‹")]),s._v(" "),n("p",[s._v("æ•…éšœè½¬ç§»è¿‡ç¨‹å¦‚ä¸‹. æ•…éšœè½¬ç§»æ¯ä¸€æ­¥éƒ½å¯ä»¥é€šè¿‡"),n("strong",[s._v("å‘å¸ƒè®¢é˜…")]),s._v("æ¥è·å–.")]),s._v(" "),n("p",[s._v("(1) åŠ å…¥ä¸»èŠ‚ç‚¹å‡ºç°"),n("strong",[s._v("æ•…éšœ")]),s._v(", æ­¤æ—¶ä¸¤ä¸ªä»èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹"),n("strong",[s._v("å¤±å»è¿æ¥")]),s._v(", "),n("strong",[s._v("ä¸»ä»å¤åˆ¶å¤±è´¥")]),s._v(".")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214205176.png",alt:""}})]),s._v(" "),n("p",[s._v("(2) æ¯ä¸ª Sentinel èŠ‚ç‚¹é€šè¿‡"),n("strong",[s._v("å®šæœŸç›‘æ§")]),s._v("å‘ç°ä¸»èŠ‚ç‚¹å‡ºç°äº†æ•…éšœ.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214232398.png",alt:""}})]),s._v(" "),n("p",[s._v("(3) å¤šä¸ª Sentinel èŠ‚ç‚¹å¯¹ä¸»èŠ‚ç‚¹çš„æ•…éšœ"),n("strong",[s._v("è¾¾æˆä¸€è‡´")]),s._v(", "),n("strong",[s._v("é€‰ä¸¾å‡º sentinel-3 èŠ‚ç‚¹ä½œä¸ºé¢†å¯¼è€…è´Ÿè´£æ•…éšœè½¬ç§»")]),s._v(".")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214302088.png",alt:""}})]),s._v(" "),n("p",[s._v("(4) Sentinel é¢†å¯¼è€…èŠ‚ç‚¹æ‰§è¡Œäº†"),n("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v(". æµç¨‹å¦‚ä¸‹.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214329887.png",alt:""}})]),s._v(" "),n("p",[s._v("éœ€è¦åœ¨"),n("strong",[s._v("ä»èŠ‚ç‚¹åˆ—è¡¨")]),s._v("ä¸­é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸º"),n("strong",[s._v("æ–°çš„ä¸»èŠ‚ç‚¹")]),s._v(', é€‰æ‹©æ–¹æ³•æœ‰: (1).è¿‡æ»¤ "ä¸å¥åº·" çš„èŠ‚ç‚¹; (2).é€‰æ‹© '),n("strong",[s._v("salve-priority")]),s._v(" æœ€é«˜çš„ä»èŠ‚ç‚¹åˆ—è¡¨; (3).é€‰æ‹©**å¤åˆ¶åç§»é‡æœ€å¤§(å¤åˆ¶æ•°æ®æœ€å®Œæ•´)**çš„èŠ‚ç‚¹; (4).é€‰æ‹© runid æœ€å°çš„ä»èŠ‚ç‚¹.")]),s._v(" "),n("ul",[n("li",[s._v("å‡è®¾è¿™é‡Œä»èŠ‚ç‚¹ 1 å˜æˆä¸»èŠ‚ç‚¹.")]),s._v(" "),n("li",[s._v("Sentinel é¢†å¯¼è€…èŠ‚ç‚¹ä¼šå¯¹é€‰å‡ºæ¥çš„ä»èŠ‚ç‚¹æ‰§è¡Œ slaveof no one å‘½ä»¤è®©å…¶æˆä¸º"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(", æ­¤æ—¶åŸæ¥çš„ä»èŠ‚ç‚¹ 1 å˜æˆæ–°çš„ä¸»èŠ‚ç‚¹.")]),s._v(" "),n("li",[s._v("Sentinel é¢†å¯¼è€…èŠ‚ç‚¹ä¼šå‘"),n("strong",[s._v("å‰©ä½™çš„ä»èŠ‚ç‚¹")]),s._v("å‘é€å‘½ä»¤, è®©å®ƒä»¬æˆä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹, "),n("strong",[s._v("å¤åˆ¶è§„åˆ™")]),s._v("å’Œ parallel-syncs å‚æ•°æœ‰å…³.")]),s._v(" "),n("li",[s._v("ç„¶å Sentinel é¢†å¯¼è€…èŠ‚ç‚¹"),n("strong",[s._v("é€šçŸ¥")]),s._v("å®¢æˆ·ç«¯.")]),s._v(" "),n("li",[s._v("æœ€ååŸæ¥çš„æ•…éšœä¸»èŠ‚ç‚¹"),n("strong",[s._v("é‡å¯")]),s._v("æˆä¸ºä¸€ä¸ª"),n("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(".")])]),s._v(" "),n("p",[n("strong",[s._v("æ•…éšœè½¬ç§»å")]),s._v("æ•´ä¸ª Redis Sentinel çš„"),n("strong",[s._v("æ‹“æ‰‘ç»“æ„å›¾")]),s._v("å¦‚ä¸‹.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214440695.png",alt:""}})]),s._v(" "),n("p",[s._v("æ•´ä¸ªæ•…éšœè½¬ç§»è¿‡ç¨‹ä¼šäº§ç”Ÿå¤§é‡çš„"),n("strong",[s._v("æ—¥å¿—")]),s._v(", å¦‚æœ‰éœ€è¦å†çœ‹çœ‹.")]),s._v(" "),n("h5",{attrs:{id:"_5-èŠ‚ç‚¹ä¸Šä¸‹çº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-èŠ‚ç‚¹ä¸Šä¸‹çº¿"}},[s._v("#")]),s._v(" 5.èŠ‚ç‚¹ä¸Šä¸‹çº¿")]),s._v(" "),n("h6",{attrs:{id:"_1-èŠ‚ç‚¹ä¸‹çº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-èŠ‚ç‚¹ä¸‹çº¿"}},[s._v("#")]),s._v(" (1)èŠ‚ç‚¹ä¸‹çº¿")]),s._v(" "),n("p",[s._v("å¯¹"),n("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("è¿›è¡Œä¸‹çº¿, æ¯”è¾ƒåˆç†çš„åšæ³•æ˜¯é€‰å‡ºä¸€ä¸ªåˆé€‚(ä¾‹å¦‚æ€§èƒ½æ›´é«˜çš„æœºå™¨) çš„"),n("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(", ä½¿ç”¨ "),n("strong",[s._v("sentinel failover")]),s._v(" åŠŸèƒ½å°†ä»èŠ‚ç‚¹æ™‹å‡ä¸»èŠ‚ç‚¹, åªéœ€è¦åœ¨ä»»æ„å¯ç”¨çš„ Sentinel èŠ‚ç‚¹.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ sentinel failover "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("master name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("åœ¨"),n("strong",[s._v("ä»»æ„")]),s._v('ä¸€ä¸ª Sentinel èŠ‚ç‚¹ä¸Šæ‰§è¡Œ "sentinel failover" å³å¯. å¦‚æœéœ€è¦å¯¹'),n("strong",[s._v("ä»èŠ‚ç‚¹æˆ–è€… Sentinel èŠ‚ç‚¹")]),s._v("è¿›è¡Œä¸‹çº¿, åªéœ€è¦ç¡®å®šå¥½æ˜¯ä¸´æ—¶è¿˜æ˜¯æ°¸ä¹…ä¸‹çº¿åæ‰§è¡Œç›¸åº”æ“ä½œå³å¯.")]),s._v(" "),n("h6",{attrs:{id:"_2-èŠ‚ç‚¹ä¸Šçº¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-èŠ‚ç‚¹ä¸Šçº¿"}},[s._v("#")]),s._v(" (2)èŠ‚ç‚¹ä¸Šçº¿")]),s._v(" "),n("p",[n("strong",[s._v("ä»èŠ‚ç‚¹ä¸Šçº¿")]),s._v(": æ·»åŠ  "),n("strong",[s._v("slaveof {masterIp} {masterPort}")]),s._v(" çš„é…ç½®, ä½¿ç”¨ redis-server å¯åŠ¨å³å¯, å®ƒå°†è¢« Sentinel èŠ‚ç‚¹"),n("strong",[s._v("è‡ªåŠ¨å‘ç°")]),s._v(".")]),s._v(" "),n("p",[n("strong",[s._v("Sentinel èŠ‚ç‚¹ä¸Šçº¿")]),s._v(": æ·»åŠ  "),n("strong",[s._v("sentinel monitor")]),s._v(" ä¸»èŠ‚ç‚¹çš„é…ç½®, ä½¿ç”¨ redis-sentinel å¯åŠ¨å³å¯, å®ƒå°†è¢«å…¶ä½™ Sentinel èŠ‚ç‚¹"),n("strong",[s._v("è‡ªåŠ¨å‘ç°")]),s._v(".")]),s._v(" "),n("h4",{attrs:{id:"é«˜å¯ç”¨è¯»å†™åˆ†ç¦»ğŸŒŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é«˜å¯ç”¨è¯»å†™åˆ†ç¦»ğŸŒŸ"}},[s._v("#")]),s._v(" é«˜å¯ç”¨è¯»å†™åˆ†ç¦»ğŸŒŸ")]),s._v(" "),n("p",[s._v("Redis Sentinel å®ç°"),n("strong",[s._v("è¯»å†™åˆ†ç¦»é«˜å¯ç”¨")]),s._v("å¯ä»¥ä¾èµ– Sentinel èŠ‚ç‚¹çš„"),n("strong",[s._v("æ¶ˆæ¯é€šçŸ¥")]),s._v(", è·å– Redis æ•°æ®èŠ‚ç‚¹çš„"),n("strong",[s._v("çŠ¶æ€å˜åŒ–")]),s._v(".")]),s._v(" "),n("p",[n("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("çš„ä½œç”¨:")]),s._v(" "),n("ul",[n("li",[s._v("å½“ä¸»èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶, ä½œä¸ºä¸»èŠ‚ç‚¹çš„åå¤‡é¡¶ä¸Šæ¥å®ç°"),n("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v(", Redis Sentinel å·²ç»å®ç°äº†è¯¥åŠŸèƒ½çš„è‡ªåŠ¨åŒ–, å®ç°äº†çœŸæ­£çš„é«˜å¯ç”¨.")]),s._v(" "),n("li",[s._v("æ‰©å±•ä¸»èŠ‚ç‚¹çš„"),n("strong",[s._v("è¯»èƒ½åŠ›")]),s._v(", å°¤å…¶æ˜¯åœ¨"),n("strong",[s._v("è¯»å¤šå†™å°‘çš„åœºæ™¯")]),s._v("éå¸¸é€‚ç”¨.")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214621694.png",alt:""}})]),s._v(" "),n("p",[s._v("ä½†ä¸Šè¿°æ¨¡å‹ä¸­, ä»èŠ‚ç‚¹"),n("strong",[s._v("ä¸æ˜¯é«˜å¯ç”¨")]),s._v("çš„, å¦‚æœ slave-1 èŠ‚ç‚¹"),n("strong",[s._v("å‡ºç°æ•…éšœ")]),s._v(", é¦–å…ˆå®¢æˆ·ç«¯ client-1 å°†ä¸å…¶"),n("strong",[s._v("å¤±è”")]),s._v(", å…¶æ¬¡ Sentinel èŠ‚ç‚¹åªä¼šå¯¹è¯¥èŠ‚ç‚¹åš"),n("strong",[s._v("ä¸»è§‚ä¸‹çº¿")]),s._v(", å› ä¸º Redis Sentinel çš„"),n("strong",[s._v("æ•…éšœè½¬ç§»æ˜¯é’ˆå¯¹ä¸»èŠ‚ç‚¹")]),s._v("çš„.")]),s._v(" "),n("p",[s._v("æ‰€ä»¥å¾ˆå¤šæ—¶å€™ Redis Sentinel ä¸­çš„"),n("strong",[s._v("ä»èŠ‚ç‚¹ä»…ä»…æ˜¯ä½œä¸ºä¸»èŠ‚ç‚¹ä¸€ä¸ªçƒ­å¤‡")]),s._v(", ä¸è®©å®ƒå‚ä¸å®¢æˆ·ç«¯çš„è¯»æ“ä½œ, å°±æ˜¯ä¸ºäº†ä¿è¯æ•´ä½“é«˜å¯ç”¨æ€§, ä½†å®é™…ä¸Šè¿™ç§ä½¿ç”¨æ–¹æ³•è¿˜æ˜¯æœ‰ä¸€äº›æµªè´¹, å°¤å…¶æ˜¯åœ¨æœ‰å¾ˆå¤šä»èŠ‚ç‚¹æˆ–è€…ç¡®å®éœ€è¦è¯»å†™åˆ†ç¦»çš„åœºæ™¯, æ‰€ä»¥"),n("strong",[s._v("å¦‚ä½•å®ç°ä»èŠ‚ç‚¹çš„é«˜å¯ç”¨")]),s._v("æ˜¯éå¸¸æœ‰å¿…è¦çš„.")]),s._v(" "),n("p",[n("strong",[s._v("Redis Sentinel è¯»å†™åˆ†ç¦»è®¾è®¡æ€è·¯")]),s._v(": Sentinel åœ¨å¯¹å„ä¸ªèŠ‚ç‚¹çš„ç›‘æ§ä¸­, å¦‚æœæœ‰å¯¹åº”"),n("strong",[s._v("äº‹ä»¶")]),s._v("çš„å‘ç”Ÿ, éƒ½ä¼šå‘å‡ºç›¸åº”çš„"),n("strong",[s._v("äº‹ä»¶æ¶ˆæ¯")]),s._v(". åœ¨è®¾è®¡ Redis Sentinel çš„"),n("strong",[s._v("ä»èŠ‚ç‚¹é«˜å¯ç”¨")]),s._v("æ—¶, åªè¦èƒ½å¤Ÿå®æ—¶æŒæ¡"),n("strong",[s._v("æ‰€æœ‰ä»èŠ‚ç‚¹çš„çŠ¶æ€")]),s._v(", æŠŠæ‰€æœ‰ä»èŠ‚ç‚¹çœ‹åšä¸€ä¸ª"),n("strong",[s._v("èµ„æºæ± ")]),s._v(", æ— è®ºæ˜¯ä¸Šçº¿è¿˜æ˜¯ä¸‹çº¿ä»èŠ‚ç‚¹, å®¢æˆ·ç«¯éƒ½èƒ½"),n("strong",[s._v("åŠæ—¶æ„ŸçŸ¥")]),s._v("åˆ°(å°†å…¶ä»èµ„æºæ± ä¸­æ·»åŠ æˆ–è€…åˆ é™¤), è¿™æ ·ä»èŠ‚ç‚¹çš„é«˜å¯ç”¨ç›®æ ‡å°±è¾¾åˆ°äº†.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523214707545.png",alt:""}})]),s._v(" "),n("p",[s._v("â€")]),s._v(" "),n("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),n("ul",[n("li",[s._v("ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹")])])])}),[],!1,null,null,null);n.default=a.exports}}]);