(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{466:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_30-redisåŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_30-redisåŸºç¡€"}},[t._v("#")]),t._v(" 30.RedisåŸºç¡€")]),t._v(" "),s("h4",{attrs:{id:"åŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€"}},[t._v("#")]),t._v(" åŸºç¡€")]),t._v(" "),s("h5",{attrs:{id:"_1-æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[t._v("#")]),t._v(" 1.æ¦‚è¿°")]),t._v(" "),s("p",[t._v("Redis æ˜¯"),s("strong",[t._v("éå…³ç³»å‹(NoSQL) å†…å­˜é”®å€¼æ•°æ®åº“")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_1-redisç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-redisç‰¹æ€§"}},[t._v("#")]),t._v(" (1)Redisç‰¹æ€§")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é€Ÿåº¦å¿«")]),t._v(": å•çº¿ç¨‹æ¨¡å‹, æ•°æ®éƒ½åœ¨å†…å­˜ä¸­.")]),t._v(" "),s("li",[t._v("åŸºäº"),s("strong",[t._v("é”®å€¼å¯¹")]),t._v("çš„æ•°æ®ç»“æ„æœåŠ¡å™¨: NoSQL éå…³ç³»å‹.")]),t._v(" "),s("li",[t._v("åŠŸèƒ½ä¸°å¯Œ: ç¼“å­˜, å‘å¸ƒè®¢é˜…, Lua è„šæœ¬, ç®€å•äº‹åŠ¡, æµæ°´çº¿.")]),t._v(" "),s("li",[s("strong",[t._v("å¯ä»¥æŒä¹…åŒ–")]),t._v(": RDB å’Œ AOF.")]),t._v(" "),s("li",[s("strong",[t._v("ä¸»ä»å¤åˆ¶")]),t._v(": å®ç°æ•°æ®å¤šä¸ªå‰¯æœ¬.")]),t._v(" "),s("li",[s("strong",[t._v("é«˜å¯ç”¨ä¸åˆ†å¸ƒå¼")]),t._v(": Redis Sentinel, Redis Cluster.")])]),t._v(" "),s("blockquote",[s("p",[t._v("Redisä¸Memcachedå¯¹æ¯”")])]),t._v(" "),s("p",[t._v("ä¸¤è€…éƒ½æ˜¯"),s("strong",[t._v("éå…³ç³»å‹å†…å­˜é”®å€¼æ•°æ®åº“")]),t._v(", ä¸»è¦æœ‰ä»¥ä¸‹ä¸åŒ:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ•°æ®ç±»å‹")]),t._v(". Memcached "),s("strong",[t._v("ä»…æ”¯æŒå­—ç¬¦ä¸²ç±»å‹")]),t._v(", è€Œ Redis æ”¯æŒäº”ç§ä¸åŒçš„æ•°æ®ç±»å‹, åº”ç”¨åœºæ™¯ä¸°å¯Œ.")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®æŒä¹…åŒ–")]),t._v(". Redis æ”¯æŒä¸¤ç§æŒä¹…åŒ–ç­–ç•¥: "),s("strong",[t._v("RDB å¿«ç…§å’Œ AOF æ—¥å¿—")]),t._v(", è€Œ Memcached "),s("strong",[t._v("ä¸æ”¯æŒ")]),t._v("æŒä¹…åŒ–.")]),t._v(" "),s("li",[s("strong",[t._v("åˆ†å¸ƒå¼")]),t._v(". Memcached "),s("strong",[t._v("ä¸æ”¯æŒåˆ†å¸ƒå¼")]),t._v(", åªèƒ½é€šè¿‡åœ¨å®¢æˆ·ç«¯ä½¿ç”¨"),s("strong",[t._v("ä¸€è‡´æ€§å“ˆå¸Œ")]),t._v("æ¥å®ç°åˆ†å¸ƒå¼å­˜å‚¨, è¿™ç§æ–¹å¼åœ¨å­˜å‚¨å’ŒæŸ¥è¯¢æ—¶éƒ½éœ€è¦å…ˆåœ¨å®¢æˆ·ç«¯è®¡ç®—ä¸€æ¬¡æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹. Redis Cluster æä¾›"),s("strong",[t._v("åˆ†å¸ƒå¼")]),t._v("çš„æ”¯æŒ.")]),t._v(" "),s("li",[s("strong",[t._v("å†…å­˜ç®¡ç†æœºåˆ¶")]),t._v(". åœ¨ Redis ä¸­, å¹¶ä¸æ˜¯æ‰€æœ‰æ•°æ®éƒ½ä¸€ç›´å­˜å‚¨åœ¨å†…å­˜ä¸­, å¯ä»¥å°†ä¸€äº›"),s("strong",[t._v("å¾ˆä¹…æ²¡ç”¨çš„ value äº¤æ¢åˆ°ç£ç›˜")]),t._v(", è€Œ Memcached çš„æ•°æ®åˆ™ä¼š"),s("strong",[t._v("ä¸€ç›´")]),t._v("åœ¨å†…å­˜ä¸­. Memcached å°†å†…å­˜åˆ†å‰²æˆ"),s("strong",[t._v("ç‰¹å®šé•¿åº¦çš„å—")]),t._v("æ¥å­˜å‚¨æ•°æ®, ä»¥å®Œå…¨è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜. ä½†è¿™ç§æ–¹å¼ä¼šä½¿å¾—å†…å­˜çš„åˆ©ç”¨ç‡ä¸é«˜, ä¾‹å¦‚å—çš„å¤§å°ä¸º 128 bytes, åªå­˜å‚¨ 100 bytes çš„æ•°æ®, é‚£ä¹ˆå‰©ä¸‹çš„ 28 bytes å°±æµªè´¹æ‰äº†.")])]),t._v(" "),s("h6",{attrs:{id:"_2-redisåº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-redisåº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" (2)Redisåº”ç”¨åœºæ™¯")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç¼“å­˜")]),t._v(": å°†çƒ­ç‚¹æ•°æ®æ”¾åˆ°"),s("strong",[t._v("å†…å­˜")]),t._v("ä¸­, è®¾ç½®å†…å­˜çš„"),s("strong",[t._v("æœ€å¤§ä½¿ç”¨é‡")]),t._v("ä»¥åŠ"),s("strong",[t._v("æ·˜æ±°ç­–ç•¥")]),t._v("æ¥ä¿è¯ç¼“å­˜å‘½ä¸­ç‡. (1)"),s("strong",[t._v("ç¼“å­˜çƒ­ç‚¹æ•°æ®")]),t._v(": ç¼“å­˜çƒ­ç‚¹æ•°æ®, å¯ä»¥é™ä½æ•°æ®åº“å‹åŠ›. (2)"),s("strong",[t._v("ç¼“å­˜ Session")]),t._v(": å¯ä»¥ä½¿ç”¨ Redis æ¥ç»Ÿä¸€å­˜å‚¨å¤šå°åº”ç”¨æœåŠ¡å™¨çš„"),s("strong",[t._v("ä¼šè¯ä¿¡æ¯")]),t._v(". å½“åº”ç”¨æœåŠ¡å™¨ä¸å†å­˜å‚¨ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯, ä½¿å¾—æœåŠ¡å™¨"),s("strong",[t._v("æ— çŠ¶æ€")]),t._v(", ä¸€ä¸ªç”¨æˆ·å¯ä»¥è¯·æ±‚ä»»æ„ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨, ä»è€Œæ›´å®¹æ˜“å®ç°é«˜å¯ç”¨æ€§ä»¥åŠ"),s("strong",[t._v("å¯ä¼¸ç¼©æ€§")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("åˆ†å¸ƒå¼é”å®ç°")]),t._v(": å¯ä»¥ä½¿ç”¨ Redis è‡ªå¸¦çš„ "),s("strong",[t._v("SETNX å‘½ä»¤")]),t._v("å®ç°åˆ†å¸ƒå¼é”, ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ "),s("strong",[t._v("RedLock åˆ†å¸ƒå¼é”")]),t._v("å®ç°.")]),t._v(" "),s("li",[s("strong",[t._v("ç¤¾äº¤ç½‘ç»œ")]),t._v(": Set å¯ä»¥å®ç°äº¤é›†, å¹¶é›†ç­‰æ“ä½œ, ä»è€Œå®ç°"),s("strong",[t._v("å…±åŒå¥½å‹")]),t._v("ç­‰åŠŸèƒ½.")]),t._v(" "),s("li",[s("strong",[t._v("æ’è¡Œæ¦œç³»ç»Ÿ")]),t._v(": ZSet å¯ä»¥å®ç°"),s("strong",[t._v("æœ‰åºæ€§")]),t._v("æ“ä½œ, ä»è€Œå®ç°"),s("strong",[t._v("æ’è¡Œæ¦œ")]),t._v("ç­‰åŠŸèƒ½.")]),t._v(" "),s("li",[s("strong",[t._v("è®¡æ•°å™¨")]),t._v(": å¯ä»¥å¯¹ "),s("strong",[t._v("String")]),t._v(" è¿›è¡Œè‡ªå¢è‡ªå‡è¿ç®—, ä»è€Œå®ç°è®¡æ•°å™¨åŠŸèƒ½. Redis è¿™ç§å†…å­˜å‹æ•°æ®åº“çš„è¯»å†™æ€§èƒ½éå¸¸é«˜, å¾ˆé€‚åˆ"),s("strong",[t._v("å­˜å‚¨é¢‘ç¹è¯»å†™çš„è®¡æ•°é‡")]),t._v(". æ¯”å¦‚è§†é¢‘çš„æ’­æ”¾é‡, å•†å“æµè§ˆæ¬¡æ•°ç­‰.")]),t._v(" "),s("li",[s("strong",[t._v("æŸ¥æ‰¾è¡¨")]),t._v(": ä¾‹å¦‚ "),s("strong",[t._v("DNS")]),t._v(" è®°å½•å°±å¾ˆé€‚åˆä½¿ç”¨ Redis è¿›è¡Œå­˜å‚¨. æŸ¥æ‰¾è¡¨å’Œç¼“å­˜ç±»ä¼¼, ä¹Ÿæ˜¯åˆ©ç”¨äº† "),s("strong",[t._v("Redis å¿«é€Ÿ")]),t._v("çš„æŸ¥æ‰¾ç‰¹æ€§. ä½†æŸ¥æ‰¾è¡¨çš„å†…å®¹ä¸èƒ½å¤±æ•ˆ, è€Œç¼“å­˜çš„å†…å®¹å¯ä»¥å¤±æ•ˆ, å› ä¸ºç¼“å­˜ä¸ä½œä¸ºå¯é çš„æ•°æ®æ¥æº.")]),t._v(" "),s("li",[s("strong",[t._v("é™„è¿‘ä½ç½®, æ‘‡ä¸€æ‘‡")]),t._v(": Redis çš„ GEO åŠŸèƒ½å¯ä»¥ç”¨äºå®ç°é™„è¿‘ä½ç½®, æ‘‡ä¸€æ‘‡è¿™ç§åŸºäºä½ç½®ä¿¡æ¯çš„åŠŸèƒ½.")])]),t._v(" "),s("h5",{attrs:{id:"_2-å‘½ä»¤ä¸æ¶æ„åŸºç¡€ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å‘½ä»¤ä¸æ¶æ„åŸºç¡€ğŸŒŸ"}},[t._v("#")]),t._v(" 2.å‘½ä»¤ä¸æ¶æ„åŸºç¡€ğŸŒŸ")]),t._v(" "),s("h6",{attrs:{id:"_1-å•çº¿ç¨‹æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å•çº¿ç¨‹æ¶æ„"}},[t._v("#")]),t._v(" (1)å•çº¿ç¨‹æ¶æ„")]),t._v(" "),s("p",[t._v("Redis æ˜¯"),s("strong",[t._v("å•çº¿ç¨‹æ¶æ„")]),t._v(", å•çº¿ç¨‹æ²¡æœ‰å¹¶å‘é—®é¢˜.")]),t._v(" "),s("p",[t._v("æ³¨æ„ Redis çš„"),s("mark",[s("strong",[t._v("å•çº¿ç¨‹ä¸»è¦æ˜¯æŒ‡ Redis çš„ç½‘ç»œ IO å’Œé”®å€¼å¯¹è¯»å†™æ˜¯ç”±ä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆçš„, è¿™ä¹Ÿæ˜¯ Redis å¯¹å¤–æä¾›é”®å€¼å­˜å‚¨æœåŠ¡çš„ä¸»è¦æµç¨‹")])]),t._v(". ä½† Redis çš„å…¶ä»–åŠŸèƒ½, æ¯”å¦‚æŒä¹…åŒ–, å¼‚æ­¥åˆ é™¤, é›†ç¾¤æ•°æ®åŒæ­¥ç­‰, å…¶å®æ˜¯ç”±é¢å¤–çš„çº¿ç¨‹æ‰§è¡Œçš„.")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜èƒ½è¿™ä¹ˆå¿«?")])]),t._v(" "),s("p",[t._v("åŸå› å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("çº¯å†…å­˜è®¿é—®")]),t._v(". Redis æ•°æ®éƒ½å­˜æ”¾åœ¨"),s("strong",[t._v("å†…å­˜")]),t._v("ä¸­, è®¿é—®é€Ÿåº¦æå¿«.")]),t._v(" "),s("li",[s("strong",[t._v("IO å¤šè·¯å¤ç”¨æ¶æ„")]),t._v(". Redis ä½¿ç”¨ "),s("strong",[t._v("epoll ä½œä¸º IO å¤šè·¯å¤ç”¨çš„å®ç°")]),t._v(", å†åŠ ä¸Š Redis è‡ªèº«çš„äº‹ä»¶å¤„ç†æ¨¡å‹å°† "),s("strong",[t._v("epoll")]),t._v(" ä¸­çš„è¿æ¥, è¯»å†™, å…³é—­ç­‰éƒ½è½¬åŒ–ä¸ºäº‹ä»¶, åœ¨ IO ä¸Šæµªè´¹æ—¶é—´å°‘.")]),t._v(" "),s("li",[s("strong",[t._v("å•çº¿ç¨‹æ¶æ„")]),t._v(". ç®€åŒ–äº†æ•°æ®ç»“æ„å’Œç®—æ³•å®ç°, åŒæ—¶"),s("strong",[t._v("å•çº¿ç¨‹é¿å…äº†çº¿ç¨‹åˆ‡æ¢")]),t._v("çš„ç«äº‰äº§ç”Ÿçš„å¼€é”€.")])]),t._v(" "),s("blockquote",[s("p",[t._v("å•çº¿ç¨‹å¯èƒ½å¼•å‘çš„é—®é¢˜?")])]),t._v(" "),s("p",[t._v("æ­£å› ä¸º Redis æ˜¯å•çº¿ç¨‹, æ‰€ä»¥è¦å°å¿ƒä½¿ç”¨ Redis æŒ‡ä»¤, "),s("strong",[t._v("å¯¹äºé‚£äº›è€—æ—¶çš„æŒ‡ä»¤(æ¯”å¦‚ keys), ä¸€å®šè¦è°¨æ…ä½¿ç”¨")]),t._v(", ä¸€ä¸å°å¿ƒå°±å¯èƒ½ä¼šå¯¼è‡´ Redis å¡é¡¿. å¦‚æœæ¯ä¸ªå‘½ä»¤"),s("strong",[t._v("æ‰§è¡Œæ—¶é—´è¿‡é•¿")]),t._v(", ä¼šé€ æˆå…¶ä»–å‘½ä»¤çš„"),s("strong",[t._v("é˜»å¡")]),t._v(", è¿™éå¸¸éš¾å—.")]),t._v(" "),s("h6",{attrs:{id:"_2-å‘½ä»¤æ‰§è¡ŒåŸºæœ¬æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å‘½ä»¤æ‰§è¡ŒåŸºæœ¬æµç¨‹"}},[t._v("#")]),t._v(" (2)å‘½ä»¤æ‰§è¡ŒåŸºæœ¬æµç¨‹")]),t._v(" "),s("p",[t._v("Redis çš„ IO å¤šè·¯å¤ç”¨: Redis åˆ©ç”¨ epoll æ¥å®ç° IO å¤šè·¯å¤ç”¨, å°†è¿æ¥ä¿¡æ¯å’Œäº‹ä»¶æ”¾åˆ°é˜Ÿåˆ—ä¸­, ä¾æ¬¡æ”¾åˆ°æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨, äº‹ä»¶åˆ†æ´¾å™¨å°†äº‹ä»¶åˆ†å‘ç»™äº‹ä»¶å¤„ç†å™¨.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/image-20231226230320-7gvfrv4.png",alt:"image"}})]),t._v(" "),s("p",[t._v("Redis å‘½ä»¤æ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20211218115418923.png",alt:"",title:"Rediså‘½ä»¤æ‰§è¡Œæµç¨‹"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å‘é€å‘½ä»¤")])]),t._v(" "),s("li",[s("strong",[t._v("å‘½ä»¤æ’é˜Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("æ‰§è¡Œå‘½ä»¤")])]),t._v(" "),s("li",[s("strong",[t._v("è¿”å›ç»“æœ")])])]),t._v(" "),s("p",[t._v("å…¶ä¸­ "),s("strong",[t._v("å‘é€å‘½ä»¤ + å“åº”ç»“æœ")]),t._v(" æ˜¯é€šè¿‡"),s("strong",[t._v("ç½‘ç»œ")]),t._v("è¿›è¡Œçš„, ä½¿ç”¨å‘½ä»¤æ—¶åº”å°½é‡"),s("strong",[t._v("å‡å°‘è¿™ä¸ªæ¬¡æ•°")]),t._v(". ç”±äºæ˜¯"),s("strong",[t._v("å•çº¿ç¨‹")]),t._v("æ¶æ„, æ‰€ä»¥å¦‚æœå‘½ä»¤è¿‡å¤šæˆ–è€…å‰é¢çš„å‘½ä»¤æ‰§è¡Œé˜»å¡ç€, åé¢çš„å‘½ä»¤éœ€è¦åœ¨é˜Ÿåˆ—ä¸­"),s("strong",[t._v("æ’é˜Ÿæ‰§è¡Œ")]),t._v(". "),s("strong",[t._v("æ…¢æŸ¥è¯¢")]),t._v("ä¸»è¦ç»Ÿè®¡"),s("strong",[t._v("æ‰§è¡Œå‘½ä»¤")]),t._v("çš„æ—¶é—´.")]),t._v(" "),s("h4",{attrs:{id:"åŸºæœ¬å‘½ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å‘½ä»¤"}},[t._v("#")]),t._v(" åŸºæœ¬å‘½ä»¤")]),t._v(" "),s("h5",{attrs:{id:"_1-å…¨å±€å‘½ä»¤ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…¨å±€å‘½ä»¤ğŸŒŸ"}},[t._v("#")]),t._v(" 1.å…¨å±€å‘½ä»¤ğŸŒŸ")]),t._v(" "),s("p",[t._v("ä¸€äº›å¸¸è§çš„å…¨éƒ¨æ•°æ®ç»“æ„éƒ½"),s("strong",[t._v("é€šç”¨")]),t._v("çš„å‘½ä»¤.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("å‘½ä»¤")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("é‡Šä¹‰")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("**keys ***")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æŸ¥çœ‹æ‰€æœ‰é”®, å¤æ‚åº¦ O(N), "),s("strong",[t._v("ä¼šéå†æ‰€æœ‰é”®, çº¿ä¸Šç¦æ­¢ä½¿ç”¨")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("dbsize")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("è·å–é”®æ€»æ•°, ä¸ä¼šéå†æ‰€æœ‰é”®, ç›´æ¥ä»éå†è·å–, å¤æ‚åº¦ O(1)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("exists key")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æŸ¥çœ‹"),s("strong",[t._v("é”®æ˜¯å¦å­˜åœ¨")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("del key [key ...]")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("åˆ é™¤é”®")]),t._v(", å¯åŒæ—¶åˆ å¤šä¸ªé”®")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("expire key seconds")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¯¹é”®æ·»åŠ "),s("strong",[t._v("è¿‡æœŸæ—¶é—´")]),t._v(", è¿”å›å¤§äºç­‰äº 0 å³æ˜¯è¿‡æœŸæ—¶é—´, -1 æ˜¯æ²¡æœ‰è®¾ç½®, -2 æ˜¯é”®ä¸å­˜åœ¨")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("ttl key")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æŸ¥çœ‹é”®å‰©ä½™çš„"),s("strong",[t._v("è¿‡æœŸæ—¶é—´")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("type key")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æŸ¥çœ‹é”®çš„"),s("strong",[t._v("æ•°æ®ç»“æ„")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("object encoding key")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("è·å–é”®çš„"),s("strong",[t._v("å†…éƒ¨ç¼–ç ")])])])])]),t._v(" "),s("h5",{attrs:{id:"_2-é”®ç®¡ç†å‘½ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é”®ç®¡ç†å‘½ä»¤"}},[t._v("#")]),t._v(" 2.é”®ç®¡ç†å‘½ä»¤")]),t._v(" "),s("h6",{attrs:{id:"_1-å•ä¸ªé”®ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å•ä¸ªé”®ç®¡ç†"}},[t._v("#")]),t._v(" (1)å•ä¸ªé”®ç®¡ç†")]),t._v(" "),s("blockquote",[s("p",[t._v("é”®è¿‡æœŸ")])]),t._v(" "),s("p",[t._v("ä¸é”®è¿‡æœŸç›¸å…³çš„æŒ‡ä»¤.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("expire key seconds\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é”®åœ¨secondsç§’åè¿‡æœŸ")]),t._v("\nexpire key timestamp\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é”®åœ¨ç§’çº§æ—¶é—´æˆ³timestampåè¿‡æœŸ")]),t._v("\nttl key\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹é”®è¿‡æœŸå‰©ä½™æ—¶é—´, ç§’çº§(ttl = time to leave)")]),t._v("\npttl key\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹é”®è¿‡æœŸå‰©ä½™æ—¶é—´, æ¯«ç§’çº§")]),t._v("\nexpireat key timestamp\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½®é”®çš„ç§’çº§è¿‡æœŸæ—¶é—´æˆ³")]),t._v("\npexpire key milliseconds\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é”®åœ¨millisecondsæ¯«ç§’åè¿‡æœŸ")]),t._v("\nsetex \t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½®é”®å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´, å¤šç”¨! ! ")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("è¿”å›å€¼çš„å«ä¹‰:")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("å¤§äºç­‰äº "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" çš„æ•´æ•°: é”®å‰©ä½™è¿‡æœŸæ—¶é—´\n-1: é”®æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´\n-2: é”®ä¸å­˜åœ¨\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("ä¸è¿‡æœŸç›¸å…³çš„å‘½ä»¤éœ€è¦"),s("strong",[t._v("æ³¨æ„")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœ expire key ä¸å­˜åœ¨, è¿”å›ç»“æœä¸º 0.")]),t._v(" "),s("li",[t._v("å¦‚æœè®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºè´Ÿå€¼, é”®ä¼šç«‹å³è¢«åˆ é™¤, çŠ¹å¦‚ä½¿ç”¨äº† del å‘½ä»¤ä¸€æ ·.")]),t._v(" "),s("li",[t._v("persist å‘½ä»¤å¯ä»¥å°†é”®çš„"),s("strong",[t._v("è¿‡æœŸæ—¶é—´æ¸…é™¤")]),t._v(", æ¸…é™¤å ttl å˜ä¸º -1, è¿™æ ·é”®å°±ä¸ä¼šè¿‡æœŸäº†.")]),t._v(" "),s("li",[t._v("å¯¹äº"),s("strong",[t._v("å­—ç¬¦ä¸²ç±»å‹çš„é”®")]),t._v(", æ‰§è¡Œ "),s("strong",[t._v("set å‘½ä»¤")]),t._v("ä¼š"),s("strong",[t._v("å»æ‰")]),t._v("è¿‡æœŸæ—¶é—´(ttl å˜ä¸º -1), è¿™åœ¨å¼€å‘ä¸­å¾ˆå®¹æ˜“è¢«å¿½è§†. "),s("strong",[t._v("setex å‘½ä»¤")]),t._v("åšä¸º "),s("strong",[t._v("set + expire")]),t._v(" å‘½ä»¤çš„ç»„åˆ, å³æ˜¯åŸå­å‘½ä»¤, ä¸”å°‘äº†ä¸€æ¬¡ç½‘ç»œæ—¶é—´, å¼€å‘å¤šç”¨! !")]),t._v(" "),s("li",[t._v("Redis "),s("strong",[t._v("ä¸æ”¯æŒäºŒçº§æ•°æ®ç»“æ„")]),t._v("(å¦‚ hash, list) "),s("strong",[t._v("å†…éƒ¨å…ƒç´ çš„è¿‡æœŸåŠŸèƒ½")]),t._v(". å¦‚ä¸èƒ½å¯¹ hash ä¸­æŸä¸ªå…ƒç´ è®¾ç½®è¿‡æœŸ.")])]),t._v(" "),s("blockquote",[s("p",[t._v("è¿ç§»é”®")])]),t._v(" "),s("p",[t._v("æœ‰ä¸‰ç§æ–¹å¼:")]),t._v(" "),s("ul",[s("li",[t._v("move: ä¸å»ºè®®ä½¿ç”¨. ä»…åœ¨å®ä¾‹å†…éƒ¨ç”¨.")]),t._v(" "),s("li",[s("strong",[t._v("dump + restore")]),t._v(": dump ä¼šå°†é”®å€¼åºåˆ—åŒ–, é‡‡ç”¨ RDB æ ¼å¼. restore å°†åºåˆ—åŒ–çš„æ•°æ®è¿˜åŸ.")]),t._v(" "),s("li",[s("strong",[t._v("migrate")]),t._v(": å®é™…å°±æ˜¯å°† dump, restore, del ä¸‰ä¸ªå‘½ä»¤è¿›è¡Œç»„åˆ, ä»è€Œç®€åŒ–äº†æµç¨‹, è€Œä¸”å…·æœ‰åŸå­æ€§. "),s("strong",[t._v("æ¨èä½¿ç”¨")]),t._v(".")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("å‘½ä»¤")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("ä½œç”¨åŸŸ")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("åŸå­æ€§")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("æ”¯æŒå¤šä¸ªé”®")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("move")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Redis å®ä¾‹å†…éƒ¨")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dump + restore")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Redis å®ä¾‹ä¹‹é—´")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("migrate")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Redis å®ä¾‹ä¹‹é—´")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ˜¯")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ˜¯")])])])])]),t._v(" "),s("h6",{attrs:{id:"_2-éå†é”®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-éå†é”®"}},[t._v("#")]),t._v(" (2)éå†é”®")]),t._v(" "),s("p",[t._v("æä¾›äº†ä¸¤ç§éå†é”®çš„æ–¹å¼: "),s("strong",[t._v("keys å’Œ scan")]),t._v(".")]),t._v(" "),s("blockquote",[s("p",[t._v("keyså…¨é‡éå†é”®")])]),t._v(" "),s("p",[t._v("å…¨é‡éå†é”®, ç”¨æ¥åˆ—å‡ºæ‰€æœ‰æ»¡è¶³ç‰¹å®šæ­£åˆ™å­—ç¬¦ä¸²è§„åˆ™çš„ key.")]),t._v(" "),s("p",[t._v("æ³¨æ„: å¦‚æœåŒ…å«"),s("strong",[t._v("å¤§é‡çš„é”®")]),t._v(", å°±å¯èƒ½ä¼šé€ æˆ Redis "),s("strong",[t._v("é˜»å¡")]),t._v("! "),s("strong",[t._v("ç”Ÿäº§ç¯å¢ƒåˆ«ç”¨")]),t._v("!")]),t._v(" "),s("blockquote",[s("p",[t._v("scanæ¸è¿›å¼éå†é”®")])]),t._v(" "),s("p",[t._v("é‡‡ç”¨ scan å‘½ä»¤ä»¥"),s("strong",[t._v("æ¸è¿›å¼")]),t._v("çš„æ–¹å¼éå†é”®, ä»¥"),s("strong",[t._v("è§£å†³ keys æŒ‡ä»¤å¯èƒ½é€ æˆçš„é˜»å¡é—®é¢˜")]),t._v(", æ¯æ¬¡ scan å‘½ä»¤çš„æ—¶é—´"),s("strong",[t._v("å¤æ‚åº¦æ˜¯ O(1)")]),t._v(" . æ¯æ¬¡æ‰§è¡Œ scan å¯ä»¥æƒ³è±¡æˆåªæ‰«æä¸€ä¸ªå­—å…¸ä¸­çš„"),s("strong",[t._v("ä¸€éƒ¨åˆ†é”®")]),t._v(", ç›´åˆ°å°†å­—å…¸ä¸­çš„æ‰€æœ‰é”®éå†å®Œæˆ.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("scan cursor "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("match pattern"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å‚æ•°å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("cursor: æ¸¸æ ‡")]),t._v(", å¿…å¤‡å‚æ•°. ç¬¬ä¸€æ¬¡éå†ä» 0 å¼€å§‹, æ¯æ¬¡ scan éå†å®Œä¼šè¿”å›å½“å‰çš„ "),s("strong",[t._v("cursor")]),t._v(" å€¼, ç›´åˆ°å…¶å€¼ä¸º 0, è¡¨ç¤ºéå†ç»“æŸ.")]),t._v(" "),s("li",[t._v("match pattern: åŒ¹é…æ¨¡å¼(æ­£åˆ™æ¨¡å¼), å¯é€‰.")]),t._v(" "),s("li",[t._v("count number: æ¯æ¬¡è¦éå†çš„é”®çš„ä¸ªæ•°, é»˜è®¤ 10.")])]),t._v(" "),s("p",[t._v("æ³¨æ„: æ¯æ¬¡ scan å®Œæˆéƒ½ä¼šè¿”å›ä¸Šä¸€æ¬¡éå†çš„æ¸¸æ ‡å€¼, ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶"),s("strong",[t._v("æºå¸¦")]),t._v("ä¸Šä»è¿™ä¸ª cursor å¼€å§‹éå†. æ³¨æ„: å¦‚æœ scan è¿‡ç¨‹ä¸­å¦‚æœæœ‰é”®çš„å¢åˆ ç­‰å˜åŒ–, å¯èƒ½ä¼šé€ æˆé”®çš„éå†"),s("strong",[t._v("ä¸å®Œå…¨æˆ–é‡å¤çš„é—®é¢˜")]),t._v(". å¯èƒ½å‡ºç°æ–°å¢çš„é”®å¯èƒ½æ²¡æœ‰éå†åˆ°, éå†å‡ºäº†é‡å¤çš„é”®ç­‰æƒ…å†µ, ä¹Ÿå°±æ˜¯è¯´ scan å¹¶ä¸èƒ½ä¿è¯å®Œæ•´çš„éå†å‡ºæ¥æ‰€æœ‰çš„é”®, è¿™äº›æ˜¯åœ¨å¼€å‘æ—¶éœ€è¦è€ƒè™‘çš„.")]),t._v(" "),s("p",[t._v("æ­¤å¤–è¿˜æœ‰å…¶ä»–é›†åˆç±»å‹çš„éå†æŒ‡ä»¤. å¦‚ "),s("strong",[t._v("hscan, sscan, zscan")]),t._v(" ç­‰æ¥è§£å†³ hgetall, smembers, zrange ç­‰å¯èƒ½å¸¦æ¥çš„é˜»å¡é—®é¢˜.")]),t._v(" "),s("h4",{attrs:{id:"åŸºç¡€æ•°æ®ç»“æ„ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€æ•°æ®ç»“æ„ğŸŒŸ"}},[t._v("#")]),t._v(" åŸºç¡€æ•°æ®ç»“æ„ğŸŒŸ")]),t._v(" "),s("h5",{attrs:{id:"_1-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-string"}},[t._v("#")]),t._v(" 1.String")]),t._v(" "),s("p",[t._v("éå¸¸é‡è¦, å…¶ä»–çš„éƒ½æ˜¯åŸºäºè¿™ä¸ªæ¥çš„. å­—ç¬¦ä¸²ç±»å‹çš„"),s("strong",[t._v("å€¼")]),t._v("å¯ä»¥æ˜¯: "),s("strong",[t._v("ç®€å•å­—ç¬¦ä¸², å¤å¤æ‚å­—ç¬¦ä¸²(JSON, XMLç­‰), æ•°å­—(æ•´æ•°, æµ®ç‚¹æ•°), ç”šè‡³æ˜¯äºŒè¿›åˆ¶(å›¾ç‰‡, è§†é¢‘, éŸ³é¢‘ç­‰)")]),t._v(" , æœ€å¤§ 512M.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522192440962.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"åŸºæœ¬å‘½ä»¤-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å‘½ä»¤-2"}},[t._v("#")]),t._v(" åŸºæœ¬å‘½ä»¤")]),t._v(" "),s("p",[s("strong",[t._v("(1)è®¾ç½®å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" key value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ex seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("px milliseconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("strong",[t._v("ex seconds")]),t._v(": è®¾ç½®"),s("strong",[t._v("ç§’çº§")]),t._v("è¿‡æœŸæ—¶é—´.")]),t._v(" "),s("li",[s("strong",[t._v("px milliseconds")]),t._v(": è®¾ç½®"),s("strong",[t._v("æ¯«ç§’çº§")]),t._v("è¿‡æœŸæ—¶é—´.")]),t._v(" "),s("li",[s("strong",[t._v("nx")]),t._v(": é”®å¿…é¡»"),s("strong",[t._v("ä¸å­˜åœ¨")]),t._v("æ‰å¯ä»¥è®¾ç½®æˆåŠŸ, ç”¨äº"),s("strong",[t._v("æ·»åŠ ")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("xx")]),t._v(": é”®å¿…é¡»"),s("strong",[t._v("å­˜åœ¨")]),t._v("æ‰å¯ä»¥è®¾ç½®æˆåŠŸ, ç”¨äº"),s("strong",[t._v("æ›´æ–°")]),t._v(".")])]),t._v(" "),s("p",[t._v("é™¤ set ä¹‹å¤–, è¿˜æœ‰ä¸¤ä¸ªå‘½ä»¤: "),s("strong",[t._v("setex")]),t._v(", "),s("strong",[t._v("extnx")]),t._v(". å…¶ä½œç”¨ä¸ä¸Šè¿°çš„ ex å’Œ nx é€‰é¡¹ç›¸åŒ.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("setex key seconds value\nsetnx key value\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("blockquote",[s("p",[t._v("setnxçš„åº”ç”¨")])]),t._v(" "),s("p",[t._v("ç”±äº Redis çš„"),s("strong",[t._v("å•çº¿ç¨‹")]),t._v("æœºåˆ¶, å¦‚æœ"),s("strong",[t._v("å¤šä¸ª")]),t._v("å®¢æˆ·ç«¯åŒæ—¶æ‰§è¡Œ setex key seconds value, æ ¹æ® setnx çš„ç‰¹æ€§åˆ™"),s("strong",[t._v("åªæœ‰ä¸€ä¸ª")]),t._v("å®¢æˆ·ç«¯èƒ½å¤Ÿè®¾ç½®æˆåŠŸ, æ‰€ä»¥ setnx å¯ä»¥ä½œä¸º"),s("strong",[t._v("åˆ†å¸ƒå¼é”")]),t._v("çš„ä¸€ç§å®ç°æ–¹æ¡ˆ.")]),t._v(" "),s("p",[s("strong",[t._v("(2)è·å–å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("get key\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é”®ä¸å­˜åœ¨è¿”å›nil")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(3)æ‰¹é‡è®¾ç½®å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mset key value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªå€¼")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(4)æ‰¹é‡è·å–å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mget key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nmget a b c d\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("æ‰¹é‡è®¾ç½®ä¸è·å–å¯ä»¥æé«˜æ•ˆç‡, å› ä¸ºå¦‚æœæ‰§è¡Œ N æ¬¡å•ä¸ª get å‘½ä»¤ä¼šåœ¨ç½‘ç»œä¸­"),s("strong",[t._v("å¾€è¿” N æ¬¡")]),t._v(", è€Œæ‰¹é‡æ“ä½œåªä¼šåœ¨ç½‘ç»œä¸­"),s("strong",[t._v("å¾€è¿” 1 æ¬¡")]),t._v(", å¯ä»¥"),s("strong",[t._v("å‡å°‘ Redis æˆ–ç½‘ç»œé˜»å¡")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("(5)è®¡æ•°")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("incr key\ndecr key\nincrby key increment\ndecrby key decrement\nincrbyfloat key increment\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("å¯ä»¥è‡ªå¢, è‡ªå‡, è®¾ç½®å¢é‡")]),t._v(". Redis ç”±äºå…¶"),s("strong",[t._v("å•çº¿ç¨‹")]),t._v("æ¶æ„, è®¡æ•°çš„æ—¶å€™è´¼æ–¹ä¾¿, éƒ½"),s("strong",[t._v("ä¸éœ€è¦ä½¿ç”¨ CAS æ¥ä¿è¯è®¡æ•°å‡†ç¡®æ€§")]),t._v(". æ¯”å¦‚å¯ä»¥è®°å½•æŸæ–‡ç« , è§†é¢‘è¢«ç‚¹èµçš„æ¬¡æ•°.")]),t._v(" "),s("p",[s("strong",[t._v("(6)å…¶ä»–")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("append key value   \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨å­—ç¬¦ä¸²åé¢è¿½åŠ value, å˜é•¿")]),t._v("\nstrlen key\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å­—ç¬¦ä¸²é•¿åº¦")]),t._v("\ngetset key value\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½®å¹¶è¿”å›åŸå€¼, è¿”å›é”®åŸæ¥çš„å€¼")]),t._v("\ngetrange key start end  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–éƒ¨åˆ†å­—ç¬¦ä¸²")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h6",{attrs:{id:"å†…éƒ¨ç¼–ç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç¼–ç "}},[t._v("#")]),t._v(" å†…éƒ¨ç¼–ç ")]),t._v(" "),s("p",[t._v("Redis ä¼šæ ¹æ®å½“å‰å€¼çš„"),s("strong",[t._v("ç±»å‹å’Œé•¿åº¦")]),t._v("å†³å®šä½¿ç”¨å“ªç§å†…éƒ¨ç¼–ç å®ç°.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("int")]),t._v(": 8 å­—èŠ‚çš„é•¿æ•´å½¢.")]),t._v(" "),s("li",[s("strong",[t._v("embstr")]),t._v(": å°äºç­‰äº 39 ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸².")]),t._v(" "),s("li",[s("strong",[t._v("raw")]),t._v(": å¤§äº 39 ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸².")])]),t._v(" "),s("h6",{attrs:{id:"ä½¿ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯")]),t._v(" "),s("p",[s("strong",[t._v("ç¼“å­˜åŠŸèƒ½")]),t._v(": æ¨èçš„é”®åå®šä¹‰æ–¹å¼: "),s("strong",[t._v("ä¸šåŠ¡å:å¯¹è±¡åğŸ†”[å±æ€§]")]),t._v(" .")]),t._v(" "),s("p",[s("strong",[t._v("è®¡æ•°")]),t._v(": å¿«é€Ÿè®¡æ•°, æŸ¥è¯¢ç¼“å­˜, æ¯”å¦‚å®ç°"),s("strong",[t._v("è§†é¢‘æ’­æ”¾æ•°è®¡æ•°")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("å…±äº« session")]),t._v(": ä½¿ç”¨ Redis å­˜å‚¨å„ä¸ª Web æœåŠ¡å™¨çš„ "),s("strong",[t._v("session")]),t._v(" ä¿¡æ¯, é›†ä¸­ç®¡ç†.")]),t._v(" "),s("p",[s("strong",[t._v("é™é€Ÿ")]),t._v(": é˜²æ­¢çŸ­ä¿¡åŠŸæ¥å£ä¸è¢«é¢‘ç¹è®¿é—®, é™åˆ¶ä¸€åˆ†é’Ÿå†…åªèƒ½è¯·æ±‚ä¸€æ¬¡. é™åˆ¶ä¸€ä¸ª IP åœ°å€åœ¨ä¸€åˆ†é’Ÿå†…çš„è®¿é—®æ¬¡æ•°.")]),t._v(" "),s("h5",{attrs:{id:"_2-hash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-hash"}},[t._v("#")]),t._v(" 2.Hash")]),t._v(" "),s("p",[t._v("ç»“æ„å¦‚ä¸‹, KEY é‡Œé¢çš„ "),s("strong",[t._v("value")]),t._v(" æ‰åŒ…å«"),s("strong",[t._v("çœŸæ­£çš„ key å’Œ value")]),t._v(". å¯ä»¥çœ‹æˆä¸€ä¸ªåŒå±‚çš„ map.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522192945126.png",alt:""}})]),t._v(" "),s("p",[t._v("Hash ç±»å‹çš„"),s("strong",[t._v("å€¼")]),t._v("æœ¬èº«åˆæ˜¯ä¸€ä¸ª"),s("strong",[t._v("é”®å€¼å¯¹ç»“æ„")]),t._v(". æ³¨æ„ä¸šåŠ¡é‡ç‚¹å…³æ³¨ "),s("code",[t._v("Filed : Value")]),t._v("â€‹ å…³ç³».")]),t._v(" "),s("h6",{attrs:{id:"åŸºæœ¬å‘½ä»¤-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å‘½ä»¤-3"}},[t._v("#")]),t._v(" åŸºæœ¬å‘½ä»¤")]),t._v(" "),s("p",[s("strong",[t._v("(1)è®¾ç½®å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hset key field value\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hest user:1 name tom\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(2)è·å–å€¼")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hget key field\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hget user:1 name\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(3)åˆ é™¤field")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hdel key field "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("field "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¯ä»¥æ‰¹é‡åˆ é™¤ field.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hdel user:1 name address class\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(4)è®¡ç®—fieldä¸ªæ•°")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hlen key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(5)æ‰¹é‡è®¾ç½®ä¸è·å–")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hmget key field "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("field "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‰¹é‡è·å–")]),t._v("\nhmset key field value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("field value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‰¹é‡è®¾ç½®")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("(6)åˆ¤æ–­filedæ˜¯å¦å­˜åœ¨")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hexists key field\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(7)å…¶ä»–")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("hkeys key  \t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ‰€æœ‰field")]),t._v("\nhvals key\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ‰€æœ‰value")]),t._v("\nhgetall key\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ‰€æœ‰çš„field-value, å³è¿”å›Map")]),t._v("\nhincrby key field \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è‡ªå¢, ä½œç”¨åœ¨fieldä¸Š")]),t._v("\nhincrbyfloat key field  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è‡ªå¢")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h6",{attrs:{id:"å†…éƒ¨ç¼–ç -2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç¼–ç -2"}},[t._v("#")]),t._v(" å†…éƒ¨ç¼–ç ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ziplist")]),t._v("(å‹ç¼©åˆ—è¡¨): å½“ filed "),s("strong",[t._v("ä¸ªæ•°å°‘")]),t._v("ä¸”æ²¡æœ‰å¤§çš„ value æ—¶ä½¿ç”¨.")]),t._v(" "),s("li",[s("strong",[t._v("hashtable")]),t._v("(å“ˆå¸Œè¡¨): å½“ filed ä¸ªæ•°å¤šæˆ–æœ‰å¤§çš„ value æ—¶ä½¿ç”¨.")])]),t._v(" "),s("p",[t._v("ziplist æ›´åŠ "),s("strong",[t._v("ç´§å‡‘")]),t._v(", åœ¨æ•°æ®é‡è¾ƒå°‘æ—¶å¯ä»¥è¿ç»­å­˜å‚¨å…ƒç´ , æ›´èŠ‚çº¦å†…å­˜.")]),t._v(" "),s("h6",{attrs:{id:"ä½¿ç”¨åœºæ™¯-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯-2"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯")]),t._v(" "),s("p",[s("strong",[t._v("(1)ç¼“å­˜ç”¨æˆ·ä¿¡æ¯")])]),t._v(" "),s("p",[t._v("å®ç°æ–¹å¼:")]),t._v(" "),s("ul",[s("li",[t._v("åºåˆ—åŒ–å­—ç¬¦ä¸²ç±»å‹: å°†ç”¨æˆ·ä¿¡æ¯åºåˆ—å·ä¹‹åç”¨ä¸€ä¸ªé”®ä¿å­˜(éœ€è¦ååºåˆ—åŒ–).")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ hash: åªç”¨ä¸€ä¸ªé”®ä¿å­˜ id, ç”¨æˆ·ä¿¡æ¯ç”¨ field-value ä¿å­˜.")])]),t._v(" "),s("p",[t._v("å¯ä»¥ç”¨äºè®°å½•çš„"),s("strong",[t._v("ç”¨æˆ·ä¿¡æ¯")]),t._v(", æ¯”å¦‚ key æ˜¯ç”¨æˆ·çš„ id, field æ˜¯ç”¨çš„ä¿¡æ¯(å¦‚åå­—, å­¦æ ¡ç­‰), value æ˜¯ä¿¡æ¯çš„å€¼. å¥½å¤„: hash æ˜¯ç´§å‡‘çš„, æœ‰è¿™ä¸ªå€¼æ‰è®¾ç½®, è€Œå…³ç³»å‹æ•°æ®åº“æ˜¯ç¨€ç–çš„.")]),t._v(" "),s("p",[t._v("(2)è´­ç‰©è½¦åœºæ™¯")]),t._v(" "),s("p",[t._v("ä»¥ç”¨æˆ· id ä¸º key, å•†å“ id ä¸º filed, å•†å“æ•°é‡ä¸º value.")]),t._v(" "),s("h6",{attrs:{id:"å†å“ˆå¸Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†å“ˆå¸Œ"}},[t._v("#")]),t._v(" å†å“ˆå¸Œ")]),t._v(" "),s("p",[t._v("Redis ä¸­çš„å­—å…¸ç›¸å½“äº Java ä¸­çš„ "),s("strong",[t._v("HashMap")]),t._v(", å†…éƒ¨å®ç°ä¹Ÿå·®ä¸å¤šç±»ä¼¼, éƒ½æ˜¯é€šè¿‡  "),s("strong",[t._v('"æ•°ç»„ + é“¾è¡¨"')]),t._v("  çš„é“¾åœ°å€æ³•æ¥è§£å†³éƒ¨åˆ† "),s("strong",[t._v("å“ˆå¸Œå†²çª")]),t._v(", åŒæ—¶è¿™æ ·çš„ç»“æ„ä¹Ÿå¸æ”¶äº†ä¸¤ç§ä¸åŒæ•°æ®ç»“æ„çš„ä¼˜ç‚¹.")]),t._v(" "),s("p",[s("strong",[t._v("å®é™…ä¸Š hash ç»“æ„çš„å†…éƒ¨åŒ…å«ä¸¤ä¸ª hashtable")]),t._v(", é€šå¸¸æƒ…å†µä¸‹"),s("strong",[t._v("åªæœ‰ä¸€ä¸ª")]),t._v(" hashtable æ˜¯"),s("strong",[t._v("æœ‰å€¼")]),t._v("çš„, ä½†æ˜¯åœ¨å­—å…¸æ‰©å®¹ç¼©å®¹æ—¶, éœ€è¦åˆ†é…æ–°çš„ hashtable, ç„¶åè¿›è¡Œ"),s("strong",[t._v("æ¸è¿›å¼æ¬è¿")]),t._v(".")]),t._v(" "),s("p",[t._v("å¤§å­—å…¸çš„æ‰©å®¹æ˜¯æ¯”è¾ƒè€—æ—¶é—´çš„, éœ€è¦"),s("strong",[t._v("é‡æ–°ç”³è¯·æ–°çš„æ•°ç»„")]),t._v(", ç„¶åå°†"),s("strong",[t._v("æ—§å­—å…¸")]),t._v("æ‰€æœ‰é“¾è¡¨ä¸­çš„å…ƒç´ é‡æ–°æŒ‚æ¥åˆ°æ–°çš„æ•°ç»„ä¸‹é¢, è¿™æ˜¯ä¸€ä¸ª "),s("strong",[t._v("O(N) çº§åˆ«")]),t._v("çš„æ“ä½œ, ä½œä¸ºå•çº¿ç¨‹çš„ Redis å¾ˆéš¾æ‰¿å—è¿™æ ·è€—æ—¶çš„è¿‡ç¨‹, æ‰€ä»¥ Redis ä½¿ç”¨ "),s("strong",[t._v("æ¸è¿›å¼ rehash")]),t._v(" å°æ­¥æ¬è¿:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/image-20230217001625-ruu5qo1.png",alt:"image"}})]),t._v(" "),s("p",[t._v("æ¸è¿›å¼ rehash ä¼šåœ¨ rehash çš„åŒæ—¶, ä¿ç•™"),s("strong",[t._v("æ–°æ—§ä¸¤ä¸ª hash ç»“æ„")]),t._v(", å¦‚ä¸Šå›¾æ‰€ç¤º. å¦‚æœæ­£åœ¨è¿ç§»é‚£ä¹ˆæŸ¥è¯¢æ—¶ä¼š"),s("strong",[t._v("åŒæ—¶æŸ¥è¯¢ä¸¤ä¸ª hash ç»“æ„")]),t._v(", ç„¶ååœ¨åç»­çš„å®šæ—¶ä»»åŠ¡ä»¥åŠ hash æ“ä½œæŒ‡ä»¤ä¸­, å¾ªåºæ¸è¿›çš„æŠŠæ—§å­—å…¸çš„å†…å®¹è¿ç§»åˆ°æ–°å­—å…¸ä¸­. å½“æ¬è¿å®Œæˆäº†, å°±ä¼šä½¿ç”¨æ–°çš„ hash ç»“æ„å–è€Œä»£ä¹‹.")]),t._v(" "),s("h6",{attrs:{id:"ç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹"}},[t._v("#")]),t._v(" ç¼ºç‚¹")]),t._v(" "),s("p",[s("strong",[t._v("è¿‡æœŸåŠŸèƒ½ä¸èƒ½ä½¿ç”¨åœ¨ field ä¸Š, åªèƒ½ç”¨åˆ° key ä¸Š")]),t._v(".")]),t._v(" "),s("p",[t._v("Redis çš„é›†ç¾¤æ¶æ„ä¸‹ä¸é€‚åˆå¤§è§„æ¨¡çš„ä½¿ç”¨, éœ€è¦æ³¨æ„æŸäº›çƒ­ç‚¹çš„ key è¢«é›†ä¸­åˆ†é…åˆ°æŸä¸ªç»“ç‚¹, å¯¼è‡´ç»“ç‚¹å‹åŠ›å¤§.")]),t._v(" "),s("h5",{attrs:{id:"_3-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-list"}},[t._v("#")]),t._v(" 3.List")]),t._v(" "),s("p",[t._v("åˆ—è¡¨ç”¨äºå­˜å‚¨å¤šä¸ª"),s("strong",[t._v("æœ‰åº")]),t._v("çš„å­—ç¬¦ä¸², æ¯ä¸ªå­—ç¬¦ä¸²ç§°ä¸ºå…ƒç´ . ç”±äºå…ƒç´ æ˜¯"),s("strong",[t._v("æœ‰åº")]),t._v("çš„, æ‰€ä»¥å¯ä»¥é€šè¿‡"),s("strong",[t._v("ç´¢å¼•")]),t._v("æ¥è®¿é—®å…ƒç´ æˆ–è€…è¿›è¡Œ"),s("strong",[t._v("èŒƒå›´è®¿é—®")]),t._v(". å¯ä»¥å……å½“æ ˆä¸é˜Ÿåˆ—çš„è§’è‰².")]),t._v(" "),s("p",[t._v("åˆ—è¡¨ä»å·¦åˆ°å³ç´¢å¼•ä¸º "),s("strong",[t._v("0 ~ N - 1")]),t._v(", ä»å³åˆ°å·¦ä¸º  "),s("strong",[t._v("-1 ~ -N")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522210259629.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"åŸºæœ¬å‘½ä»¤-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å‘½ä»¤-4"}},[t._v("#")]),t._v(" åŸºæœ¬å‘½ä»¤")]),t._v(" "),s("p",[s("strong",[t._v("(1)æ’å…¥å…ƒç´ ")])]),t._v(" "),s("p",[s("strong",[t._v("å·¦å³ä¸¤è¾¹")]),t._v("æ’å…¥å…ƒç´ : æ’å…¥ä¸¤ç«¯.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lpush key value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nrpush key value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("æŒ‡å®šä½ç½®å¤„")]),t._v("æ’å…¥å…ƒç´ : æ‰¾åˆ°"),s("strong",[t._v("ç­‰äº pivot")]),t._v(" çš„å…ƒç´ å¹¶åœ¨å‰æˆ–åæ’å…¥å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("linsert key before"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("after pivot value\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(2)æŸ¥æ‰¾å…ƒç´ ")])]),t._v(" "),s("p",[t._v("è·å–æŒ‡å®šèŒƒå›´å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lrange key start end \nlrange key "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ—å‡ºå…¨éƒ¨å…ƒç´ ")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("è·å–åˆ—è¡¨æŒ‡å®šç´¢å¼•ä¸‹æ ‡çš„å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lindex key index\nlindex name "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æœ€åä¸€ä¸ªå…ƒç´ ")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("è·å–åˆ—è¡¨é•¿åº¦.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("llen key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(3)åˆ é™¤å…ƒç´ ")])]),t._v(" "),s("p",[t._v("å·¦å³ä¸¤è¾¹å¼¹å‡ºåˆ é™¤.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lpop key\nrpop key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("æŒ‰ç…§ç´¢å¼•èŒƒå›´ä¿®å»ºåˆ—è¡¨.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("ltrim key start end\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(4)ä¿®æ”¹å…ƒç´ ")])]),t._v(" "),s("p",[t._v("ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lset key index newValue\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("(5)é˜»å¡å¼¹å‡º")])]),t._v(" "),s("p",[t._v("é˜»å¡å¼å¼¹å‡ºå…ƒç´ . ä»å·¦å³é˜»å¡å¼å¼¹å‡ºå…ƒç´ , å³æ™®é€šå¼¹å‡ºçš„é˜»å¡ç‰ˆæœ¬.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("blpop key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v("\nbrpop key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("key [key...]")]),t._v(" : å¤šä¸ªåˆ—è¡¨çš„é”®. "),s("strong",[t._v("timeout")]),t._v(": é˜»å¡æ—¶é—´.")]),t._v(" "),s("ul",[s("li",[t._v("è‹¥åˆ—è¡¨ä¸ºç©º, timeout = 3, åˆ™å®¢æˆ·ç«¯ç­‰å¾… 3 ç§’åè¿”å›, è‹¥ timeout = 0, åˆ™æ­¤æ—¶å®¢æˆ·ç«¯ä¸€ç›´é˜»å¡ç­‰ä¸‹å». è‹¥ç­‰å¾…æœŸé—´æ’å…¥å…ƒç´ åˆ™ç«‹å³è¿”å›.")]),t._v(" "),s("li",[t._v("åˆ—è¡¨ä¸ä¸ºç©º, ç«‹å³è¿”å›.")])]),t._v(" "),s("blockquote",[s("p",[t._v("ä½¿ç”¨brpopéœ€è¦æ³¨æ„çš„ç‚¹")])]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯å¤šä¸ªé”®, é‚£ä¹ˆ brpop ä¼šä»å·¦åˆ°å³éå†é”®, ä¸€æ—¦æœ‰ä¸€ä¸ªé”®èƒ½å¼¹å‡ºå…ƒç´ , å®¢æˆ·ç«¯ç«‹å³è¿”å›. å¦‚æœå¤šä¸ªå®¢æˆ·ç«¯å¯¹ä¸€ä¸ªåŒä¸€ä¸ªé”®æ‰§è¡Œ brpop, é‚£ä¹ˆæœ€å…ˆæ‰§è¡Œ brpop å‘½ä»¤çš„å®¢æˆ·ç«¯å¯ä»¥å…ˆè·å–åˆ°å¼¹å‡ºå€¼. ç„¶ååé¢çš„ç»§ç»­é˜»å¡.")]),t._v(" "),s("h6",{attrs:{id:"å†…éƒ¨ç¼–ç -3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç¼–ç -3"}},[t._v("#")]),t._v(" å†…éƒ¨ç¼–ç ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ziplist")]),t._v(": "),s("strong",[t._v("å‹ç¼©åˆ—è¡¨")]),t._v(". å…ƒç´ å°‘ä¸”å…ƒç´ é•¿åº¦å°æ—¶ä½¿ç”¨, å‡å°‘å†…å­˜æ¶ˆè€—.")]),t._v(" "),s("li",[s("strong",[t._v("linkedlist")]),t._v(": "),s("strong",[t._v("é“¾è¡¨")]),t._v(". å…ƒç´ å¤šä½¿ç”¨.")])]),t._v(" "),s("h6",{attrs:{id:"ä½¿ç”¨åœºæ™¯-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯-3"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯")]),t._v(" "),s("p",[s("strong",[t._v("(1)æ¶ˆæ¯é˜Ÿåˆ—")])]),t._v(" "),s("p",[t._v("ä½¿ç”¨ "),s("strong",[t._v("lpush + brpop")]),t._v(" å¯ä»¥å®ç°"),s("strong",[t._v("é˜»å¡é˜Ÿåˆ—")]),t._v(', ç”Ÿäº§è€…å®¢æˆ·ç«¯ä½¿ç”¨ lpush ç”Ÿäº§, å¤šä¸ªæ¶ˆè´¹è€…å®¢æˆ·ç«¯ä»ä½¿ç”¨ brpop å‘½ä»¤é˜»å¡å¼ "æŠ¢" åˆ—è¡¨ä¸­çš„å…ƒç´ , å¤šä¸ªå®¢æˆ·ç«¯ä¿è¯äº†æ¶ˆè´¹çš„è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨.')]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("lpush + lpop = Stack")]),t._v("(æ ˆ)")]),t._v(" "),s("li",[s("strong",[t._v("lpush + rpop = Queue")]),t._v("(é˜Ÿåˆ—)")]),t._v(" "),s("li",[t._v("lpush + ltrim = Capped Collection(æœ‰é™é›†åˆ)")]),t._v(" "),s("li",[s("strong",[t._v("lpush + brpop = Message Queue")]),t._v("(æ¶ˆæ¯é˜Ÿåˆ—)")])]),t._v(" "),s("p",[s("strong",[t._v("(2)æ¶ˆæ¯æµç±»çš„åœºæ™¯")])]),t._v(" "),s("p",[t._v("æ¯ä¸ª"),s("strong",[t._v("ç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨")]),t._v("ç”¨ list å­˜å‚¨, ç„¶åå¯ä»¥åˆ†é¡µè·å–åˆ—è¡¨. è¿˜å¯ä»¥åº”ç”¨åˆ°å¾®åš, å¾®ä¿¡å…¬ä¼—å·ç­‰çš„æ¶ˆæ¯æµ.")]),t._v(" "),s("h5",{attrs:{id:"_4-set"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-set"}},[t._v("#")]),t._v(" 4.Set")]),t._v(" "),s("p",[t._v("ç”¨äºä¿å­˜å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ , ä¸åˆ—è¡¨ä¸åŒ, set ä¸­å…ƒç´ "),s("strong",[t._v("ä¸èƒ½é‡å¤")]),t._v(", å¹¶ä¸”é›†åˆä¸­å…ƒç´ æ˜¯"),s("strong",[t._v("æ— åº")]),t._v("çš„. é™¤å¢åˆ æ”¹æŸ¥ä¹‹å¤–è¿˜å¯ä»¥åšå¤šä¸ªé›†åˆçš„"),s("strong",[t._v("äº¤é›†, å¹¶é›†, å·®é›†")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522210816969.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"åŸºæœ¬å‘½ä»¤-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å‘½ä»¤-5"}},[t._v("#")]),t._v(" åŸºæœ¬å‘½ä»¤")]),t._v(" "),s("blockquote",[s("p",[t._v("é›†åˆå†…æ“ä½œ")])]),t._v(" "),s("p",[t._v("æ·»åŠ å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sadd key element "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åˆ é™¤å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("srem key element "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è®¡ç®—å…ƒç´ ä¸ªæ•°: æ˜¯ "),s("strong",[t._v("O(1)")]),t._v("  çš„å‘½ä»¤, ä¸ä¼šéå†é›†åˆçš„å…ƒç´ , è€Œæ˜¯ç›´æ¥ç”¨ Redis çš„å†…éƒ¨è®¡æ•°å˜é‡.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("scard key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­")]),t._v(": æ˜¯åˆ™è¿”å› 1, ä¸æ˜¯è¿”å› 0.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sismember key element\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("éšæœºè¿”å›é›†åˆæ±‡æ€»æŒ‡å®šä¸ªæ•°å…ƒç´ , "),s("strong",[t._v("é»˜è®¤è¿”å›ä¸€ä¸ª, ä¸åˆ é™¤å…ƒç´ ")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("srandmember key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä»é›†åˆ"),s("strong",[t._v("éšæœºå¼¹å‡ºå…ƒç´ ")]),t._v(", å¹¶ä¸”åˆ é™¤è¯¥å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("spop key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("è·å–æ‰€æœ‰å…ƒç´ , ç»“æœæ— åº")]),t._v(". æ˜¯æ¯”è¾ƒé‡çš„æŒ‡ä»¤, å…ƒç´ è¿‡å¤šä¼š"),s("strong",[t._v("é˜»å¡")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("smembers key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("blockquote",[s("p",[t._v("é›†åˆé—´æ“ä½œ")])]),t._v(" "),s("p",[t._v("æ±‚å¤šä¸ªé›†åˆçš„"),s("strong",[t._v("äº¤é›†")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sinter key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ±‚å¤šä¸ªé›†åˆçš„"),s("strong",[t._v("å¹¶é›†")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sunion key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ±‚å¤šä¸ªé›†åˆçš„"),s("strong",[t._v("å·®é›†")]),t._v(". ä»¥ç¬¬ä¸€ä¸ªé›†åˆä¸ºåŸºå‡†, å‡å»åé¢æ‰€æœ‰é›†åˆçš„å¹¶é›†, æœ€åçœ‹ç¬¬ä¸€ä¸ªé›†åˆè¿˜å‰©å¤šå°‘å…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sdiff")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å°†"),s("strong",[t._v("ç»“æœè¿›è¡Œä¿å­˜")]),t._v(". å°†é›†åˆé—´äº¤é›†, å¹¶é›†, å·®é›†çš„ç»“æœä¿å­˜åœ¨ destination key ä¸­.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sinterstore destination key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nsunionstore destination key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nsdiffstore destination key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h6",{attrs:{id:"å†…éƒ¨ç¼–ç -4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç¼–ç -4"}},[t._v("#")]),t._v(" å†…éƒ¨ç¼–ç ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("intset")]),t._v(": å…ƒç´ æ˜¯æ•´æ•°ä¸”ä¸ªæ•°è¾ƒå°‘æ—¶ä½¿ç”¨.")]),t._v(" "),s("li",[s("strong",[t._v("hashtable")]),t._v(": å…ƒç´ è¾ƒå¤šæˆ–ä¸å…¨æ˜¯æ•´æ•°æ—¶ä½¿ç”¨.")])]),t._v(" "),s("h6",{attrs:{id:"ä½¿ç”¨åœºæ™¯-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯-4"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯")]),t._v(" "),s("p",[s("strong",[t._v("(1)æ ‡ç­¾")])]),t._v(" "),s("p",[t._v("é›†åˆç±»å‹çš„å…¸å‹åœºæ™¯æ˜¯"),s("strong",[t._v("æ ‡ç­¾")]),t._v(". æ¯”å¦‚ä¸€ä¸ªç”¨æˆ·çš„å…´è¶£ç‚¹å°±æ˜¯æ ‡ç­¾, ä½¿ç”¨é›†åˆé—´çš„äº¤å¹¶å·®å°±å¯ä»¥ç”¨åœ¨"),s("strong",[t._v("ç¤¾äº¤")]),t._v("ä¸Š, æ¯”å¦‚è®¡ç®—"),s("strong",[t._v("å…±åŒå…´è¶£")]),t._v(".")]),t._v(" "),s("ul",[s("li",[t._v("sadd = Tagging(æ ‡ç­¾)")]),t._v(" "),s("li",[t._v("spop/srandmember = Random item(ç”Ÿæˆéšæœºæ•°, æ¯”å¦‚æŠ½å¥–)")]),t._v(" "),s("li",[t._v("sadd + sinter = Social Graph("),s("strong",[t._v("ç¤¾äº¤éœ€æ±‚")]),t._v(")")])]),t._v(" "),s("p",[t._v("(2)æŠ½å¥–")]),t._v(" "),s("p",[t._v("srandmember å’Œ spop ç­‰å¼¹å‡ºå…ƒç´ çš„å‘½ä»¤å¯ä»¥ç”¨äºæŠ½å¥–çš„åœºæ™¯.")]),t._v(" "),s("p",[t._v("(3)"),s("strong",[t._v("ç¤¾äº¤å…³æ³¨æ¨¡å‹")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" è¯¸è‘›å…³æ³¨çš„äºº: \nzhugeSet -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("guojia, xushu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æ¨è¿‡å…³æ³¨çš„äºº:\nyangguoSet -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("zhuge, baiqi, guojia, xushu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" éƒ­å˜‰å…³æ³¨çš„äºº: \nguojiaSet -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("zhuge, yangguo, baiqi, xushu, xunyu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æˆ‘å’Œæ¨è¿‡å…±åŒå…³æ³¨"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("æ±‚äº¤é›†"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": \nSINTER zhugeSet yangguoSet -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("guojia, xushu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æˆ‘å…³æ³¨çš„äººä¹Ÿå…³æ³¨ä»–"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("æ¨è¿‡"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": \nSISMEMBER guojiaSet yangguo \nSISMEMBER xushuSet yangguo\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æˆ‘å¯èƒ½è®¤è¯†çš„äºº"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ä¸€ç§ç®€å•çš„å®ç°"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": \nSDIFF yangguoSet zhugeSet -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("zhuge, baiqi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h5",{attrs:{id:"_5-zset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-zset"}},[t._v("#")]),t._v(" 5.Zset")]),t._v(" "),s("p",[t._v("Zset åœ¨ "),s("strong",[t._v("Set ç±»å‹")]),t._v("çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ª"),s("strong",[t._v("åˆ†æ•°")]),t._v(", å…¶ç‰¹æ€§ä¸º"),s("strong",[t._v("å…ƒç´ ä¸å¯é‡å¤ä¸”å¤šäº†æ’åºçš„åŠŸèƒ½")]),t._v(". å…ƒç´ ä¸èƒ½é‡å¤ä½†æ˜¯ "),s("strong",[t._v("score å¯ä»¥é‡å¤")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522210935147.png",alt:""}})]),t._v(" "),s("p",[t._v("æ¯”è¾ƒä¸€ä¸‹ åˆ—è¡¨, é›†åˆ, æœ‰åºé›†åˆ.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("æ•°æ®ç»“æ„")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯å¦å…è®¸å…ƒç´ é‡å¤")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯å¦æœ‰åº")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("æœ‰åºå®ç°æ–¹å¼")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("åº”ç”¨åœºæ™¯")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("List")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ç´¢å¼•ä¸‹æ ‡")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ—¶é—´è½´, æ¶ˆæ¯é˜Ÿåˆ—")]),t._v("ç­‰")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Set")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ— ")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ ‡ç­¾, ç¤¾äº¤ç³»ç»Ÿ")]),t._v("ç­‰")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("Zset")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("åˆ†æ•°å€¼")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ’è¡Œæ¦œç³»ç»Ÿ")]),t._v("ç­‰.")])])])]),t._v(" "),s("h6",{attrs:{id:"å‘½ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘½ä»¤"}},[t._v("#")]),t._v(" å‘½ä»¤")]),t._v(" "),s("blockquote",[s("p",[t._v("é›†åˆå†…æ“ä½œ")])]),t._v(" "),s("p",[t._v("æ·»åŠ æˆå‘˜.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zadd key score member "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("score member"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è®¡ç®—æˆå‘˜"),s("strong",[t._v("ä¸ªæ•°")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zcard key\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è®¡ç®—æŸä¸ªæˆå‘˜"),s("strong",[t._v("åˆ†æ•°")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zscore key member\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è®¡ç®—æˆå‘˜"),s("strong",[t._v("æ’å")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zrank key member\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä»ä½åˆ°é«˜æ’å")]),t._v("\nzrevrank key member\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä»é«˜åˆ°ä½æ’å")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("åˆ é™¤æˆå‘˜.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zrem key member "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("member"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("å¢åŠ æˆå‘˜åˆ†æ•°")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zincrby key increment member\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿”å›"),s("strong",[t._v("æŒ‡å®šæ’åèŒƒå›´")]),t._v("çš„æˆå‘˜.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zrange key start end "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("withscores"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä»ä½åˆ°é«˜è¿”å›")]),t._v("\nzrevrank key start end "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("withscores"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä»é«˜åˆ°ä½è¿”å›")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("è¿”å›"),s("strong",[t._v("æŒ‡å®šåˆ†æ•°èŒƒå›´")]),t._v("çš„æˆå‘˜, ä¹Ÿæœ‰æ­£åä¸¤ç§æ–¹å¼.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zrangescore key min max "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("withscores"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("limit offset count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nzrevrankscore key min max "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("withscores"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("limit offset count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("è¿”å›æŒ‡å®šåˆ†æ•°èŒƒå›´æˆå‘˜çš„"),s("strong",[t._v("ä¸ªæ•°")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zcount key min max\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åˆ é™¤æŒ‡å®š"),s("strong",[t._v("æ’åå†…")]),t._v("çš„å‡åºå…ƒç´ .")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zremrangebyrank key start end\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åˆ é™¤æŒ‡å®š"),s("strong",[t._v("åˆ†æ•°èŒƒå›´")]),t._v("çš„æˆå‘˜.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zremrangebyscore key start end\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("blockquote",[s("p",[t._v("é›†åˆé—´æ“ä½œ")])]),t._v(" "),s("p",[t._v("ä¸¤é›†åˆäº¤é›†.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zinterstore destination numkeys key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("weights weight "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("weight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("aggregate "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä¸¤é›†åˆå¹¶é›†. å¦‚æœæ¯ä¸ª key è¡¨ç¤ºä¸€å¤©çš„æœç´¢æ’è¡Œ, é‚£ä¹ˆ zunionstore å¯ä»¥ç”¨äºè®¡ç®—ä¸ƒæ—¥æ€»æœç´¢çš„"),s("strong",[t._v("æ’è¡Œå‰å")]),t._v("çš„åœºæ™¯.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("zunionstore destination numkeys key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("weights weight "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("weight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("aggregate "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h6",{attrs:{id:"å†…éƒ¨ç¼–ç -5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç¼–ç -5"}},[t._v("#")]),t._v(" å†…éƒ¨ç¼–ç ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ziplist")]),t._v(": å‹ç¼©åˆ—è¡¨. å…ƒç´ ä¸ªæ•°è¾ƒå°‘ä¸”å€¼è¾ƒå°æ—¶ç”¨.")]),t._v(" "),s("li",[s("strong",[t._v("skiplist")]),t._v(": "),s("strong",[t._v("è·³è¡¨")]),t._v(". å…ƒç´ ä¸ªæ•°å¤šæˆ–å€¼å¤§æ—¶ç”¨. åé¢è¯¦ç»†ä»‹ç»è·³è¡¨.")])]),t._v(" "),s("h6",{attrs:{id:"ä½¿ç”¨åœºæ™¯-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯-5"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯")]),t._v(" "),s("p",[s("strong",[t._v("(1)æ’è¡Œæ¦œç³»ç»Ÿ")])]),t._v(" "),s("p",[t._v("å…¸å‹åº”ç”¨å°±æ˜¯"),s("strong",[t._v("æ’è¡Œæ¦œç³»ç»Ÿ")]),t._v(". æ¯”å¦‚æŒ‰ç”¨æˆ·ç‚¹èµæ•°, æŒ‰æ’­æ”¾æ•°æ’å. å¯ä»¥è½»æ˜“è·å–æ’è¡Œæ¦œå‰åçš„å†…å®¹.")]),t._v(" "),s("h5",{attrs:{id:"_6-å†…éƒ¨ç¼–ç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å†…éƒ¨ç¼–ç "}},[t._v("#")]),t._v(" 6.å†…éƒ¨ç¼–ç ")]),t._v(" "),s("p",[t._v("å‰é¢ä»‹ç»äº†äº”ç§åŸºæœ¬çš„æ•°æ®ç»“æ„, è¿˜æœ‰ä¸€äº›æ‹“å±•çš„ç»“æ„éƒ½æ˜¯åŸºäºå®ƒä»¬å®ç°çš„. "),s("mark",[s("strong",[t._v("é”®çš„ç±»å‹åªèƒ½ä¸ºå­—ç¬¦ä¸², å€¼æ”¯æŒäº”ç§æ•°æ®ç±»å‹: å­—ç¬¦ä¸², åˆ—è¡¨, é›†åˆ, æ•£åˆ—è¡¨, æœ‰åºé›†åˆ.")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("æ•°æ®ç±»å‹")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥å­˜å‚¨çš„å€¼")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("æ“ä½œ")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("STRING")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å­—ç¬¦ä¸², æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.å¯¹æ•´ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²çš„å…¶ä¸­ä¸€éƒ¨åˆ†æ‰§è¡Œæ“ä½œ. 2.å¯¹æ•´æ•°å’Œæµ®ç‚¹æ•°æ‰§è¡Œè‡ªå¢æˆ–è€…è‡ªå‡æ“ä½œ.")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("LIST")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("åˆ—è¡¨")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.ä»ä¸¤ç«¯"),s("strong",[t._v("å‹å…¥æˆ–è€…å¼¹å‡º")]),t._v("å…ƒç´ . 2.å¯¹å•ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ . 3.è¿›è¡Œä¿®å‰ª, åªä¿ç•™ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ .")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("SET")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ— åº")]),t._v("é›†åˆ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.æ·»åŠ , è·å–, ç§»é™¤å•ä¸ªå…ƒç´ . 2.æ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­. 3.è®¡ç®—äº¤é›†, å¹¶é›†, å·®é›†. 4.ä»é›†åˆé‡Œé¢éšæœºè·å–å…ƒç´ .")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("HASH")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("åŒ…å«"),s("strong",[t._v("é”®å€¼å¯¹")]),t._v("çš„æ— åºæ•£åˆ—è¡¨")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.æ·»åŠ , è·å–, ç§»é™¤å•ä¸ªé”®å€¼å¯¹. 2.è·å–æ‰€æœ‰é”®å€¼å¯¹. 3.æ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨.")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("ZSET")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æœ‰åºé›†åˆ")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.æ·»åŠ , è·å–, åˆ é™¤å…ƒç´ . 2.æ ¹æ®åˆ†å€¼èŒƒå›´æˆ–è€…æˆå‘˜æ¥è·å–å…ƒç´ . 3.è®¡ç®—ä¸€ä¸ªé”®çš„æ’å.")])])])]),t._v(" "),s("p",[t._v("æ¯ä¸€ç§æ•°æ®ç»“æ„éƒ½æœ‰"),s("strong",[t._v("ä¸¤ç§ä»¥ä¸Š")]),t._v("çš„"),s("strong",[t._v("å†…éƒ¨ç¼–ç ")]),t._v("å®ç°.")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡?")])]),t._v(" "),s("p",[s("strong",[t._v("å¯ä»¥æ”¹è¿›å†…éƒ¨ç¼–ç ä½†ä¸å½±å“å¯¹å¤–çš„æ•°æ®ç»“æ„å’Œå‘½ä»¤, å¯ä»¥å¹³æ»‘å‡çº§")]),t._v(". å¤šç§å†…éƒ¨ç¼–ç åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸‹å¯ä»¥"),s("strong",[t._v("å‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿")]),t._v(", æ¯”å¦‚æœ‰çš„æ•°æ®ç»“æ„å¯ä»¥èŠ‚çœå†…å­˜.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("æ•°æ®ç»“æ„")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("å†…éƒ¨ç¼–ç ")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("string")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("raw, int, embstr")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("hash")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("hashtable")]),t._v(", ziplist")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("list")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("linkedlist")]),t._v(", ziplist")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("set")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("hashtable")]),t._v(", intset")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("zset")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("skiplist(è·³è¡¨)")]),t._v(" , ziplist")])])])]),t._v(" "),s("h4",{attrs:{id:"é‡è¦åº•å±‚æ•°æ®ç»“æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‡è¦åº•å±‚æ•°æ®ç»“æ„"}},[t._v("#")]),t._v(" é‡è¦åº•å±‚æ•°æ®ç»“æ„")]),t._v(" "),s("h5",{attrs:{id:"_1-å­—å…¸dictht"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å­—å…¸dictht"}},[t._v("#")]),t._v(" 1.å­—å…¸dictht")]),t._v(" "),s("p",[s("strong",[t._v("dictht")]),t._v(" æ˜¯ä¸€ä¸ª"),s("strong",[t._v("æ•£åˆ—è¡¨")]),t._v("ç»“æ„, ä½¿ç”¨"),s("strong",[t._v("æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çª")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("dictht")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dictEntry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sizemask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" used"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" dictht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("dictEntry")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("union")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("uint64_t")]),t._v(" u64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" s64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("dictEntry")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("next"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" dictEntry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("Redis çš„å­—å…¸ dict ä¸­åŒ…å«"),s("strong",[t._v("ä¸¤ä¸ªå“ˆå¸Œè¡¨ dictht")]),t._v(", è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿"),s("strong",[t._v("è¿›è¡Œ rehash æ“ä½œ")]),t._v(". åœ¨æ‰©å®¹æ—¶, å°†å…¶ä¸­ä¸€ä¸ª dictht ä¸Šçš„é”®å€¼å¯¹ rehash åˆ°å¦ä¸€ä¸ª dictht ä¸Šé¢, å®Œæˆä¹‹å"),s("strong",[t._v("é‡Šæ”¾ç©ºé—´å¹¶äº¤æ¢")]),t._v("ä¸¤ä¸ª dictht çš„è§’è‰².")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("dict")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dictType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("privdata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    dictht ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" rehashidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* rehashing not in progress if rehashidx == -1 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" iterators"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* number of iterators currently running */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" dict"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[s("strong",[t._v("rehash")]),t._v(" æ“ä½œä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆ, è€Œæ˜¯é‡‡ç”¨"),s("strong",[t._v("æ¸è¿›æ–¹å¼")]),t._v(", è¿™æ˜¯ä¸ºäº†é¿å…ä¸€æ¬¡æ€§æ‰§è¡Œè¿‡å¤šçš„ rehash æ“ä½œç»™æœåŠ¡å™¨å¸¦æ¥è¿‡å¤§çš„"),s("strong",[t._v("è´Ÿæ‹…(é˜»å¡)")]),t._v(" .")]),t._v(" "),s("p",[t._v("æ¸è¿›å¼ rehash é€šè¿‡è®°å½• dict çš„ rehashidx å®Œæˆ, å®ƒä» 0 å¼€å§‹, ç„¶åæ¯æ‰§è¡Œä¸€æ¬¡ rehash éƒ½ä¼šé€’å¢. ä¾‹å¦‚åœ¨ä¸€æ¬¡ rehash ä¸­, è¦æŠŠ dict[0] rehash åˆ° dict[1], è¿™ä¸€æ¬¡ä¼šæŠŠ dict[0] ä¸Š table[rehashidx] çš„é”®å€¼å¯¹ rehash åˆ° dict[1] ä¸Š, dict[0] çš„ table[rehashidx] æŒ‡å‘ null, å¹¶ä»¤ rehashidx++.")]),t._v(" "),s("p",[s("strong",[t._v("åœ¨ rehash æœŸé—´")]),t._v(", æ¯æ¬¡å¯¹å­—å…¸æ‰§è¡Œæ·»åŠ , åˆ é™¤, æŸ¥æ‰¾æˆ–è€…æ›´æ–°æ“ä½œæ—¶, éƒ½ä¼š"),s("strong",[t._v("æ‰§è¡Œä¸€æ¬¡æ¸è¿›å¼ rehash")]),t._v(".")]),t._v(" "),s("p",[t._v("é‡‡ç”¨æ¸è¿›å¼ rehash ä¼šå¯¼è‡´å­—å…¸ä¸­çš„æ•°æ®åˆ†æ•£åœ¨"),s("strong",[t._v("ä¸¤ä¸ª")]),t._v(" dictht ä¸Š, å› æ­¤å¯¹å­—å…¸çš„æŸ¥æ‰¾æ“ä½œä¹Ÿéœ€è¦åˆ†åˆ«åˆ°ä¸¤ä¸ª dictht å»æ‰§è¡Œ.")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dictRehash")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dict "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" empty_visits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Max number of empty buckets to visit. */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dictIsRehashing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("used "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dictEntry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("de"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("nextde"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Note that rehashidx can't overflow as we are sure there are more\n         * elements because ht[0].used != 0 */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mark"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("empty_visits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mark"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        de "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Move all the keys in this bucket from the old to the new hash HT */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("de"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("uint64_t")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            nextde "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" de"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("next"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Get the index in the new hash table */")]),t._v("\n            h "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dictHashKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" de"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sizemask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            de"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("next "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" de"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("used"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("used"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            de "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextde"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Check if we already rehashed the whole table... */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("used "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zfree")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_dictReset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("ht"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rehashidx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* More to rehash... */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br")])]),s("h5",{attrs:{id:"_2-redisobjectå¯¹è±¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-redisobjectå¯¹è±¡"}},[t._v("#")]),t._v(" 2.RedisObjectå¯¹è±¡")]),t._v(" "),s("h6",{attrs:{id:"_1-æ¦‚è¿°-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°-2"}},[t._v("#")]),t._v(" (1)æ¦‚è¿°")]),t._v(" "),s("p",[t._v("redisObject æ˜¯ä¸€ä¸ª"),s("strong",[t._v("ç»“æ„ä½“")]),t._v(". Redis å†…éƒ¨"),s("strong",[t._v("ä½¿ç”¨ redisObject å¯¹è±¡æ¥è¡¨ç¤ºæ‰€æœ‰çš„ key å’Œ value")]),t._v(", æ¯æ¬¡åœ¨ Redis æ•°æ®å—ä¸­åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ—¶, ä¸€ä¸ªæ˜¯é”®å¯¹è±¡, ä¸€ä¸ªæ˜¯å€¼å¯¹è±¡. Redis å­˜å‚¨æ•°æ®"),s("strong",[t._v("éƒ½é‡‡ç”¨ redisObject å°è£…")]),t._v(".")]),t._v(" "),s("p",[t._v("redisObject æœ€ä¸»è¦çš„ä¿¡æ¯:")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("redisObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰å¯¹è±¡ä½¿ç”¨çš„æ•°æ®ç±»å‹ ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰å¯¹è±¡å†…éƒ¨ç¼–ç ç±»å‹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸å¯¹è±¡çš„æ•°æ®å†…å®¹ç›¸å…³, å¦‚æœæ˜¯æ•´æ•°, ç›´æ¥å­˜å‚¨æ•°æ®; å¦åˆ™è¡¨ç¤ºæŒ‡å‘æ•°æ®çš„æŒ‡é’ˆ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("ptr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•å½“å‰å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°, ç”¨äºé€šè¿‡å¼•ç”¨æ¬¡æ•°å›æ”¶å†…å­˜")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" refcount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•æœ€åä¸€æ¬¡è¢«ç¨‹åºè®¿é—®çš„æ—¶é—´,ç”¨äºè¾…åŠ© LRU ç®—æ³•å®ç°å†…å­˜å›æ”¶")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" lru"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" robj\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527224418151.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"_2-å†…å­˜å›æ”¶ä¸å…±äº«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å†…å­˜å›æ”¶ä¸å…±äº«"}},[t._v("#")]),t._v(" (2)å†…å­˜å›æ”¶ä¸å…±äº«")]),t._v(" "),s("p",[t._v("å› ä¸º C è¯­è¨€"),s("strong",[t._v("ä¸å…·å¤‡è‡ªåŠ¨å†…å­˜å›æ”¶åŠŸèƒ½")]),t._v(", å½“å°† redisObject å¯¹è±¡ä½œä¸ºæ•°æ®åº“çš„é”®æˆ–å€¼è€Œä¸æ˜¯ä½œä¸ºå‚æ•°å­˜å‚¨æ—¶å…¶ç”Ÿå‘½å‘¨æœŸæ˜¯éå¸¸é•¿çš„, ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, Redis "),s("strong",[t._v("è‡ªå·±æ„å»ºäº†ä¸€ä¸ªå†…å­˜å›æ”¶æœºåˆ¶")]),t._v(", é€šè¿‡ redisobject ç»“æ„ä¸­çš„ "),s("strong",[t._v("refcount")]),t._v(" å®ç°. è¿™ä¸ªå±æ€§ä¼šéšç€å¯¹è±¡çš„"),s("strong",[t._v("ä½¿ç”¨çŠ¶æ€è€Œä¸æ–­å˜åŒ–")]),t._v(". å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼å˜ä¸º 0 æ—¶, å¯¹è±¡æ‰€å ç”¨çš„"),s("strong",[t._v("å†…å­˜å°±ä¼šè¢«é‡Šæ”¾")]),t._v(". refcount å±æ€§é™¤äº†èƒ½å®ç°å†…å­˜å›æ”¶ä»¥å¤–, è¿˜èƒ½å®ç°å†…å­˜å…±äº«(å‚è€ƒ: å…±äº«å¯¹è±¡æ± ).")]),t._v(" "),s("p",[t._v("é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸­, åœ¨æ¡ä»¶å…è®¸æƒ…å†µä¸‹, å»ºè®®å­—ç¬¦ä¸²"),s("strong",[t._v("é•¿åº¦æ§åˆ¶åœ¨ 39 å­—èŠ‚")]),t._v("ä»¥å†…, å‡å°‘"),s("strong",[t._v("åˆ›å»º redisObject")]),t._v(" å†…å­˜åˆ†é…æ¬¡æ•°, ä»è€Œæé«˜æ€§èƒ½.")]),t._v(" "),s("h5",{attrs:{id:"_3-è·³è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-è·³è¡¨"}},[t._v("#")]),t._v(" 3.è·³è¡¨")]),t._v(" "),s("p",[s("strong",[t._v("è·³è¡¨")]),t._v("æ˜¯ "),s("strong",[t._v("zset")]),t._v(" çš„åº•å±‚æ•°æ®ç»“æ„ä¹‹ä¸€. è·³è¡¨æ˜¯åŸºäº"),s("strong",[t._v("å¤šæŒ‡é’ˆæœ‰åºé“¾è¡¨")]),t._v("å®ç°çš„, å¯ä»¥çœ‹æˆå¤šä¸ª"),s("strong",[t._v("æœ‰åºé“¾è¡¨")]),t._v(". åœ¨"),s("strong",[t._v("æŸ¥æ‰¾")]),t._v("æ—¶, ä»"),s("strong",[t._v("ä¸Šå±‚æŒ‡é’ˆ")]),t._v("å¼€å§‹æŸ¥æ‰¾, æ‰¾åˆ°å¯¹åº”çš„åŒºé—´ä¹‹åå†åˆ°"),s("strong",[t._v("ä¸‹ä¸€å±‚")]),t._v("å»æŸ¥æ‰¾. ä¸‹å›¾æ¼”ç¤ºäº†æŸ¥æ‰¾ 22 çš„è¿‡ç¨‹. æ›´å¤šå‚è€ƒ: è·³è¡¨SkipList.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563520325342.png",alt:"1563520325342"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸ºä»€ä¹ˆè¦ç”¨è·³è¡¨è€Œä¸ç”¨å…¶ä»–â€‹æ•°æ®ç»“æ„?")])]),t._v(" "),s("p",[t._v("ç”±äº zset è¦æ”¯æŒ"),s("strong",[t._v("éšæœºçš„æ’å…¥å’Œåˆ é™¤")]),t._v(", æ‰€ä»¥å®ƒ"),s("strong",[t._v("ä¸å®œä½¿ç”¨æ•°ç»„æ¥å®ç°")]),t._v(", å…³äºæ’åºé—®é¢˜, ä¹Ÿå¾ˆå®¹æ˜“å°±æƒ³åˆ°"),s("strong",[t._v("çº¢é»‘æ ‘/å¹³è¡¡æ ‘")]),t._v("è¿™æ ·çš„æ ‘å½¢ç»“æ„, ä¸çº¢é»‘æ ‘ç­‰å¹³è¡¡æ ‘ç›¸æ¯”, è·³è¡¨å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ’å…¥é€Ÿåº¦éå¸¸å¿«é€Ÿ, å› ä¸ºä¸éœ€è¦è¿›è¡Œæ—‹è½¬ç­‰æ“ä½œæ¥ç»´æŠ¤å¹³è¡¡æ€§")]),t._v(".")]),t._v(" "),s("li",[t._v("æ›´å®¹æ˜“å®ç°.")]),t._v(" "),s("li",[t._v("æ”¯æŒ"),s("strong",[t._v("æ— é”æ“ä½œ")]),t._v(".")])]),t._v(" "),s("p",[t._v("åŸºäºä»¥ä¸Šçš„ä¸€äº›è€ƒè™‘, Redis é‡‡ç”¨äº† "),s("strong",[t._v("è·³è·ƒè¡¨")]),t._v(" æ¥å®ç° Zset.")]),t._v(" "),s("h4",{attrs:{id:"redisé«˜çº§åŠŸèƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redisé«˜çº§åŠŸèƒ½"}},[t._v("#")]),t._v(" Redisé«˜çº§åŠŸèƒ½")]),t._v(" "),s("h5",{attrs:{id:"_1-pipelineæµæ°´çº¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-pipelineæµæ°´çº¿"}},[t._v("#")]),t._v(" 1.Pipelineæµæ°´çº¿")]),t._v(" "),s("p",[t._v("æµæ°´çº¿æŠ€æœ¯é‡‡ç”¨å°†"),s("strong",[t._v("å¤šæ¡å‘½ä»¤æ‰“åŒ…")]),t._v("çš„æ–¹å¼å°†å‘½ä»¤å‘é€åˆ° Redis è¿›è¡Œæ‰§è¡Œ, å¹¶å°†"),s("strong",[t._v("å¤šæ¡å‘½ä»¤")]),t._v("çš„æ‰§è¡Œç»“æœä»¥"),s("strong",[t._v("æ‰“åŒ…")]),t._v("çš„æ–¹å¼è¿”å›ç»™å®¢æˆ·ç«¯, è¿™æ ·å¤šæ¡å‘½ä»¤"),s("strong",[t._v("åªåœ¨ç½‘ç»œä¸­ä¼ è¾“ä¸€æ¬¡")]),t._v(", è¿™å°±å¤§å¤§"),s("strong",[t._v("èŠ‚çœäº†ç½‘ç»œä¸­ä¼ è¾“å‘½ä»¤çš„")]),t._v("æ—¶é—´ä¸å¼€é”€.")]),t._v(" "),s("p",[t._v("è®¸å¤šå®¢æˆ·ç«¯å¸¦æœ‰è¿™ä¸ªåŠŸèƒ½, å¦‚ Jedis. å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç½‘ç»œå»¶æ—¶è¶Šå¤§, æ•ˆæœè¶Šæ˜æ˜¾. è€Œä¸”ç»„è£…åçš„å‘½ä»¤æ¯”å•ä¸ªå‘½ä»¤é€ä¸€æ‰§è¡Œè¦å¿«.")]),t._v(" "),s("p",[t._v("éœ€è¦æ³¨æ„åˆ°æ˜¯ç”¨ pipeline æ–¹å¼æ‰“åŒ…å‘½ä»¤å‘é€, Redis "),s("strong",[t._v("å¿…é¡»åœ¨å¤„ç†å®Œæ‰€æœ‰å‘½ä»¤å‰å…ˆç¼“å­˜èµ·æ‰€æœ‰å‘½ä»¤çš„å¤„ç†ç»“æœ")]),t._v(". æ‰“åŒ…çš„å‘½ä»¤è¶Šå¤š, ç¼“å­˜æ¶ˆè€—å†…å­˜ä¹Ÿè¶Šå¤š. æ‰€ä»¥å¹¶ä¸æ˜¯æ‰“åŒ…çš„å‘½ä»¤è¶Šå¤šè¶Šå¥½. å¦‚æœä¸€æ¬¡ Pipeline æ“ä½œæ•°æ®é‡æˆ–å‘½ä»¤å¤ªå¤š, å¯èƒ½å¯¼è‡´"),s("strong",[t._v("é˜»å¡")]),t._v(", å¯ä»¥åˆ†æˆå‡ æ¬¡æ‰§è¡Œ.")]),t._v(" "),s("p",[t._v("pipeline ä¸­å‘é€çš„æ¯ä¸ª command éƒ½ä¼šè¢« server ç«‹å³æ‰§è¡Œ, å¦‚æœæ‰§è¡Œå¤±è´¥, å°†ä¼šåœ¨æ­¤åçš„å“åº”ä¸­å¾—åˆ°ä¿¡æ¯; ä¹Ÿå°±æ˜¯ "),s("mark",[s("strong",[t._v('pipeline å¹¶ä¸æ˜¯è¡¨è¾¾ "æ‰€æœ‰ command éƒ½ä¸€èµ·æˆåŠŸ" çš„è¯­ä¹‰, ç®¡é“ä¸­å‰é¢å‘½ä»¤å¤±è´¥, åé¢å‘½ä»¤ä¸ä¼šæœ‰å½±å“, è€Œæ˜¯ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ç›®å½•, å¹¶å°†æ‰€æœ‰å‘½ä»¤çš„æ‰§è¡Œç»“æœä¸€èµ·è¿”å›, åŒ…æ‹¬æŠ¥é”™çš„ç»“æœ')])]),t._v(".  ****")]),t._v(" "),s("blockquote",[s("p",[t._v("åŸç”Ÿçš„æ‰¹é‡æ“ä½œå‘½ä»¤å¦‚ mget ä¸€æ¬¡ä¹Ÿèƒ½æ‰¹é‡æ“ä½œæ•°æ®, å’Œ Pipeline æœ‰ä»€ä¹ˆä¸åŒ?")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŸç”Ÿæ‰¹é‡")]),t._v("æ“ä½œå‘½ä»¤æ˜¯"),s("strong",[t._v("åŸå­")]),t._v("çš„, "),s("strong",[t._v("Pipeline æ˜¯éåŸå­")]),t._v("çš„.")]),t._v(" "),s("li",[s("strong",[t._v("åŸç”Ÿæ‰¹é‡")]),t._v("å‘½ä»¤æ˜¯"),s("strong",[t._v("ä¸€ä¸ªå‘½ä»¤å¯¹åº”å¤šä¸ª key")]),t._v(", Pipeline åˆ™æ”¯æŒ"),s("strong",[t._v("å¤šä¸ªå‘½ä»¤")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("åŸç”Ÿæ‰¹é‡")]),t._v("å‘½ä»¤æ˜¯ Redis "),s("strong",[t._v("æœåŠ¡ç«¯")]),t._v("æ”¯æŒå®ç°, è€Œ Pipeline ç”±"),s("strong",[t._v("å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒæ”¯æŒ")]),t._v("å®ç°.")])]),t._v(" "),s("blockquote",[s("p",[t._v("Pipelineä½¿ç”¨ç¤ºä¾‹")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pipeline")]),t._v(" pl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jedis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipelined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    pl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("incr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pipelineKey"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿç®¡é“æŠ¥é”™")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// pl.setbit("test", -1, true);')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" results "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("syncAndReturnAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("results"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h5",{attrs:{id:"_2-äº‹åŠ¡ä¸luağŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-äº‹åŠ¡ä¸luağŸŒŸ"}},[t._v("#")]),t._v(" 2.äº‹åŠ¡ä¸LuağŸŒŸ")]),t._v(" "),s("p",[t._v("ä¸ºäº†ä¿è¯å¤šæ¡å‘½ä»¤ç»„åˆçš„"),s("strong",[t._v("åŸå­æ€§")]),t._v(", Redis æä¾›äº†"),s("strong",[t._v("ç®€å•çš„äº‹åŠ¡")]),t._v("åŠŸèƒ½ä»¥åŠ"),s("strong",[t._v("é›†æˆ Lua è„šæœ¬")]),t._v("æ¥è§£å†³.")]),t._v(" "),s("h6",{attrs:{id:"_1-ç®€å•äº‹åŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç®€å•äº‹åŠ¡"}},[t._v("#")]),t._v(" (1)ç®€å•äº‹åŠ¡")]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("Redis äº‹åŠ¡éœ€è¦å°†å¤šä¸ªå‘½ä»¤æ”¾åˆ° multi å’Œ exec å‘½ä»¤ç›´æ¥æ‰§è¡Œ")])]),t._v(". è¿™ä¸¤ä¸ªå‘½ä»¤ç›´æ¥çš„å‘½ä»¤æ˜¯åŸå­æ‰§è¡Œçš„. æ‰§è¡Œ multi å‘½ä»¤å, åé¢çš„å‘½ä»¤å¹¶"),s("strong",[t._v("ä¸ä¼šç«‹å³æ‰§è¡Œ")]),t._v(", è€Œæ˜¯æš‚æ—¶ä¿å­˜èµ·æ¥, ç›´åˆ°æ‰§è¡Œ exec å‘½ä»¤æ‰"),s("strong",[t._v("ç»Ÿä¸€æ‰§è¡Œ")]),t._v(". ä¸€ä¸ªäº‹åŠ¡åŒ…å«"),s("strong",[t._v("å¤šä¸ªå‘½ä»¤")]),t._v(", æœåŠ¡å™¨åœ¨æ‰§è¡Œäº‹åŠ¡æœŸé—´å°±ä¸ä¼šå»æ‰§è¡Œå…¶å®ƒå®¢æˆ·ç«¯çš„å‘½ä»¤è¯·æ±‚.")]),t._v(" "),s("p",[t._v("äº‹åŠ¡ä¸­çš„"),s("strong",[t._v("å¤šä¸ªå‘½ä»¤è¢«ä¸€æ¬¡æ€§å‘é€")]),t._v("ç»™æœåŠ¡å™¨, è€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡å‘é€, è¿™ç§æ–¹å¼è¢«ç§°ä¸º"),s("strong",[t._v("æµæ°´çº¿")]),t._v(", å®ƒå¯ä»¥å‡å°‘å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡æ¬¡æ•°ä»è€Œæå‡æ€§èƒ½.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("å‘½ä»¤")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("å«ä¹‰")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("MULTI")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("è¡¨ç¤º"),s("strong",[t._v("å¼€å§‹æ”¶é›†å‘½ä»¤")]),t._v(", åé¢æ‰€æœ‰å‘½ä»¤éƒ½"),s("strong",[t._v("ä¸æ˜¯é©¬ä¸Šæ‰§è¡Œ")]),t._v(", è€Œæ˜¯åŠ å…¥åˆ°ä¸€ä¸ª"),s("strong",[t._v("é˜Ÿåˆ—")]),t._v("ä¸­")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("EXEC")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("strong",[t._v("æ‰§è¡Œ")]),t._v(" MULTI åé¢å‘½ä»¤"),s("strong",[t._v("é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å‘½ä»¤")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DISCARD")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("å–ä»£ exec å‘½ä»¤, åœæ­¢äº‹åŠ¡åŠŸèƒ½")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("WATCH")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v('"è§‚å¯Ÿ", "ç›‘æ§"ä¸€ä¸ª KEY, åœ¨å½“å‰é˜Ÿåˆ—å¤–çš„å…¶ä»–å‘½ä»¤æ“ä½œè¿™ä¸ª KEY æ—¶, '),s("strong",[t._v("æ”¾å¼ƒæ‰§è¡Œè‡ªå·±")]),t._v("é˜Ÿåˆ—çš„å‘½ä»¤, æ˜¯ä¸€ç§"),s("strong",[t._v("ä¹è§‚é”")]),t._v("çš„ç­–ç•¥")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("UNWATCH")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("æ”¾å¼ƒç›‘æ§ä¸€ä¸ª KEY")])])])]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("ä¹‹æ‰€ä»¥æ˜¯ç®€å•äº‹åŠ¡æ˜¯å› ä¸º Redis åœ¨äº‹åŠ¡å¤±è´¥æ—¶ä¸è¿›è¡Œå›æ»š, è€Œæ˜¯ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å‘½ä»¤")])]),t._v(", è¿™ä¸ä¼ ç»Ÿäº‹åŠ¡å‹æ•°æ®åº“ä¸ä¸€æ ·, ä»¥ä¸‹æ˜¯è¿™ç§åšæ³•çš„ä¼˜ç‚¹: Redis å‘½ä»¤åªä¼šå› ä¸ºé”™è¯¯çš„"),s("strong",[t._v("è¯­æ³•è€Œå¤±è´¥")]),t._v("(å¹¶ä¸”è¿™äº›é—®é¢˜ä¸èƒ½åœ¨å…¥é˜Ÿæ—¶å‘ç°), æˆ–æ˜¯å‘½ä»¤ç”¨åœ¨äº†é”™è¯¯ç±»å‹çš„é”®ä¸Šé¢. ä»å®ç”¨æ€§çš„è§’åº¦æ¥è¯´, "),s("strong",[t._v("å¤±è´¥çš„å‘½ä»¤æ˜¯ç”±ç¼–ç¨‹é”™è¯¯")]),t._v("é€ æˆçš„, è¿™äº›é”™è¯¯åº”è¯¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¢«å‘ç°, è€Œä¸åº”è¯¥å‡ºç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­. å› ä¸ºä¸éœ€è¦å¯¹å›æ»šè¿›è¡Œæ”¯æŒ, æ‰€ä»¥ Redis çš„å†…éƒ¨å¯ä»¥"),s("strong",[t._v("ä¿æŒç®€å•ä¸”å¿«é€Ÿ")]),t._v(".")]),t._v(" "),s("p",[t._v("å› æ­¤éœ€è¦"),s("strong",[t._v("åŠ å¼ºå¯¹ç”Ÿäº§ç¯å¢ƒä¸­çš„é”™è¯¯å¼‚å¸¸å¤„ç†")]),t._v(".")]),t._v(" "),s("p",[t._v("Redis äº‹åŠ¡çš„å‡ ä¸ªç‰¹ç‚¹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å•ç‹¬çš„éš”ç¦»æ“ä½œ")]),t._v(": äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤ä¼šè¢«åºåˆ—åŒ–, æŒ‰é¡ºåºæ‰§è¡Œ, åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤æ‰“æ–­.")]),t._v(" "),s("li",[s("strong",[t._v("æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ")]),t._v(": é˜Ÿåˆ—ä¸­çš„å‘½ä»¤åœ¨äº‹åŠ¡æ²¡æœ‰è¢«æäº¤ä¹‹å‰ä¸ä¼šè¢«å®é™…æ‰§è¡Œ.")]),t._v(" "),s("li",[s("strong",[t._v("ä¸ä¿è¯åŸå­æ€§")]),t._v(": Redis ä¸­çš„ä¸€ä¸ªäº‹åŠ¡ä¸­å¦‚æœå­˜åœ¨å‘½ä»¤æ‰§è¡Œå¤±è´¥, é‚£ä¹ˆå…¶ä»–å‘½ä»¤ä¾ç„¶ä¼šè¢«æ‰§è¡Œ, æ²¡æœ‰å›æ»šæœºåˆ¶.")]),t._v(" "),s("li",[t._v("Redis æ˜¯ä»¥"),s("strong",[t._v("ä¹è§‚é”")]),t._v("çš„ç­–ç•¥æ“ä½œäº‹åŠ¡çš„, å¦‚ä¸Šè¿°çš„ WATCH æŒ‡ä»¤, æ²¡æœ‰æ‚²è§‚é”.")])]),t._v(" "),s("blockquote",[s("p",[t._v("äº‹åŠ¡æ‰§è¡Œå‡ºé”™æ€ä¹ˆåŠ?")])]),t._v(" "),s("p",[t._v("åˆ†ä¸ºä¸¤ç§, ä¸€æ˜¯"),s("strong",[t._v("å‘½ä»¤é”™è¯¯")]),t._v(". å³å‘½ä»¤å†™é”™äº†, è¿™ç§æ—¶å€™"),s("strong",[t._v("ä¸æ‰§è¡Œ")]),t._v("äº‹åŠ¡. ç¬¬äºŒç§æ˜¯"),s("strong",[t._v("è¿è¡Œæ—¶é”™è¯¯")]),t._v(", è¯­æ³•æ­£ç¡®ä½†æ˜¯å‘ç”Ÿä¸€äº›å¼‚å¸¸, è¿™ç§æ—¶å€™å‰é¢ä¹‹å‰çš„å‘½ä»¤æ˜¯ä¸ä¼šå˜åŒ–çš„, Redis "),s("mark",[s("strong",[t._v("ä¸æ”¯æŒå›æ»š")])]),t._v(". éœ€è¦å¼€å‘äººå‘˜è‡ªå·±è§£å†³.")]),t._v(" "),s("h6",{attrs:{id:"_2-é›†æˆluaè„šæœ¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é›†æˆluaè„šæœ¬"}},[t._v("#")]),t._v(" (2)é›†æˆLuaè„šæœ¬")]),t._v(" "),s("p",[t._v("é›†æˆ Lua è„šæœ¬å¯ä»¥"),s("strong",[t._v("è‡ªå·±å®šä¹‰æŒ‡ä»¤")]),t._v(". æ‰§è¡Œ Lua è„šæœ¬ç”¨ "),s("strong",[t._v("eval")]),t._v("(å•æ¬¡è°ƒç”¨è„šæœ¬, æ¯æ¬¡éƒ½ä¼ è¾“åˆ°æœåŠ¡ç«¯) æˆ– "),s("strong",[t._v("evalsha")]),t._v("(è„šæœ¬å­˜åœ¨æœåŠ¡ç«¯, å¤ç”¨) å‘½ä»¤.")]),t._v(" "),s("p",[t._v("Lua è„šæœ¬å‘é€åˆ°æœåŠ¡ç«¯ä¹‹åä¼šè¢«å½“åšä¸€ä¸ª"),s("strong",[t._v("æ™®é€šå‘½ä»¤")]),t._v("æ’é˜Ÿæ‰§è¡Œ.")]),t._v(" "),s("h5",{attrs:{id:"_3-bitmaps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-bitmaps"}},[t._v("#")]),t._v(" 3.Bitmaps")]),t._v(" "),s("p",[t._v("å®ç°"),s("strong",[t._v("å¯¹ä½")]),t._v("çš„æ“ä½œ, å¯ä»¥èŠ‚çº¦å†…å­˜.")]),t._v(" "),s("p",[t._v("Bitmaps æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§"),s("strong",[t._v("å­—ç¬¦ä¸²")]),t._v(", åªä¸è¿‡å¯ä»¥å¯¹å­—ç¬¦ä¸²çš„"),s("strong",[t._v("ä½")]),t._v("è¿›è¡Œæ“ä½œ. å¯ä»¥æŠŠå®ƒæƒ³æˆä¸€ä¸ªä»¥ä½ä¸ºå•ä½çš„æ•°ç»„, æ•°ç»„ä¸­æ¯ä¸ªå•å…ƒ"),s("strong",[t._v("åªèƒ½å­˜å‚¨ 0 æˆ– 1")]),t._v(", æ•°ç»„çš„ä¸‹æ ‡ç§°ä¸º"),s("strong",[t._v("åç§»é‡")]),t._v(".")]),t._v(" "),s("blockquote",[s("p",[t._v("ä½¿ç”¨åœºæ™¯")])]),t._v(" "),s("ul",[s("li",[t._v("å¯ä»¥ç”¨äºç”¨æˆ·"),s("strong",[t._v("ç™»å½•ç»Ÿè®¡")]),t._v(", å¦‚æ´»è·ƒç”¨æˆ·æ•°ç»Ÿè®¡.")]),t._v(" "),s("li",[t._v("ç½‘å€"),s("strong",[t._v("é»‘åå•, ç™½åå•")]),t._v(".")])]),t._v(" "),s("blockquote",[s("p",[t._v("åŸºæœ¬æ“ä½œ")])]),t._v(" "),s("p",[s("strong",[t._v("è®¾ç½®å€¼")]),t._v(": è®¾ç½®é”®çš„ç¬¬ offset ä¸ªä½(ä» 0 ç®—èµ·)çš„å€¼.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("setbit key offset value\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("è·å–å€¼")]),t._v(": è·å– offset å¤„çš„å€¼.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("getbit key offset\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("è·å– 1 çš„ä¸ªæ•°")]),t._v(": è·å– Bitmaps æŒ‡å®šèŒƒå›´å†…å€¼ä¸º 1 çš„ä¸ªæ•°(ä¸ç»™èŒƒå›´åˆ™ä¸ºå…¨éƒ¨).")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("bitcount key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("Bitmaps é—´çš„è¿ç®—")]),t._v(": å¯ä»¥åšå¤šä¸ª Bitmaps ç›´æ¥çš„äº¤é›†, å¹¶é›†, é, å¼‚æˆ–ç­‰æ“ä½œå¹¶å°†ç»“æœæ”¾åœ¨ destkey ä¸­.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("bitop and"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("or"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("not"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("xor destkey key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è®¡ç®— Bitmaps ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º targetBit çš„åç§»é‡.")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("bitops key targetBit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"_4-hyperloglog"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-hyperloglog"}},[t._v("#")]),t._v(" 4.HyperLogLog")]),t._v(" "),s("p",[t._v("HyperLogLog å®é™…ä¹Ÿæ˜¯"),s("strong",[t._v("å­—ç¬¦ä¸²")]),t._v("ç±»å‹. å®ƒæ˜¯ä¸€ç§"),s("strong",[t._v("åŸºæ•°ç®—æ³•")]),t._v(", é€šè¿‡ HyperLogLog å¯ä»¥åˆ©ç”¨"),s("strong",[t._v("æå°çš„å†…å­˜ç©ºé—´å®Œæˆç‹¬ç«‹æ€»æ•°çš„ç»Ÿè®¡")]),t._v(", æ•°æ®é›†å¯ä»¥æ˜¯ "),s("strong",[t._v("IP, Email, ID")]),t._v(" ç­‰.")]),t._v(" "),s("p",[t._v("æä¾›äº†ä¸‰ä¸ªå‘½ä»¤: "),s("strong",[t._v("pfadd, pfcount, pfmerge")]),t._v(".")]),t._v(" "),s("p",[t._v("HyperLogLog ä½¿ç”¨å†…å­˜é‡å°çš„æƒŠäºº, æ‰€ä»¥å­˜åœ¨ä¸€å®šçš„"),s("strong",[t._v("è¯¯å·®ç‡")]),t._v(", å®˜æ–¹ç»™ 0.81% è¯¯å·®.")]),t._v(" "),s("blockquote",[s("p",[t._v("ä½¿ç”¨åœºæ™¯")])]),t._v(" "),s("ul",[s("li",[t._v("åªä¸ºäº†è®¡ç®—"),s("strong",[t._v("ç‹¬ç«‹æ€»æ•°")]),t._v(", ä¸éœ€è¦è·å–å•æ¡æ•°æ®.")]),t._v(" "),s("li",[t._v("èƒ½å¤Ÿå®¹å¿ä¸€å®šçš„è¯¯å·®ç‡.")])]),t._v(" "),s("h5",{attrs:{id:"_5-å‘å¸ƒè®¢é˜…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-å‘å¸ƒè®¢é˜…"}},[t._v("#")]),t._v(" 5.å‘å¸ƒè®¢é˜…")]),t._v(" "),s("p",[t._v("Redis ä¹Ÿæä¾›äº†å‘å¸ƒæ¶ˆæ¯, è®¢é˜…é¢‘é“, å–æ¶ˆè®¢é˜…ä»¥åŠæŒ‰ç…§æ¨¡å¼è®¢é˜…çš„"),s("strong",[t._v("åŸºç¡€")]),t._v("å‘å¸ƒè®¢é˜…åŠŸèƒ½.")]),t._v(" "),s("p",[t._v("ç›¸æ¯”äºä¸“ä¸šçš„æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ, Redis çš„å‘å¸ƒè®¢é˜…ç•¥æ˜¾"),s("strong",[t._v("ç²—ç³™")]),t._v(", ä¾‹å¦‚"),s("strong",[t._v("æ— æ³•å®ç°æ¶ˆæ¯å †ç§¯å’Œå›æº¯")]),t._v(". å¦‚æœèƒ½å®¹å¿çš„åœºæ™¯æ˜¯å¯ä»¥çš„, å› ä¸ºå®ç°ç®€å•. å¯ä»¥ç”¨äºå˜æ›´é€šçŸ¥.")]),t._v(" "),s("h5",{attrs:{id:"_6-geo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-geo"}},[t._v("#")]),t._v(" 6.GEO")]),t._v(" "),s("p",[t._v("Redis æä¾›äº† GEO("),s("strong",[t._v("åœ°ç†ä¿¡æ¯å®šä½")]),t._v(") çš„åŠŸèƒ½, å¯ä»¥æ–¹ä¾¿çš„å­˜æ”¾"),s("strong",[t._v("åœ°ç†ä½ç½®")]),t._v(". å¯ä»¥ç”¨äºå®ç°"),s("strong",[t._v("é™„è¿‘ä½ç½®, æ‘‡ä¸€æ‘‡")]),t._v("è¿™ç§åŸºäºä½ç½®ä¿¡æ¯çš„åŠŸèƒ½. GEO åº•å±‚é‡‡ç”¨ "),s("strong",[t._v("zset")]),t._v(" å®ç°.")]),t._v(" "),s("p",[t._v("GEO å¯ä»¥å­˜å‚¨åœ°ç†ä½ç½®çš„"),s("strong",[t._v("ç²¾åº¦, ç»´åº¦, æˆå‘˜ä¿¡æ¯")]),t._v(". ä½¿ç”¨ GEO å¯ä»¥æ–¹ä¾¿çš„è®¡ç®—ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„"),s("strong",[t._v("è·ç¦»")]),t._v("ä»¥åŠå…¶ä»–ä½ç½®ä¿¡æ¯.")]),t._v(" "),s("p",[t._v("åœ¨ä¸€ä¸ªåœ°å›¾åº”ç”¨ä¸­, è½¦çš„æ•°æ®, é¤é¦†çš„æ•°æ®, äººçš„æ•°æ®å¯èƒ½ä¼šæœ‰ç™¾ä¸‡åƒä¸‡æ¡, å¦‚æœä½¿ç”¨ "),s("strong",[t._v("Redis")]),t._v(" çš„ GEO æ•°æ®ç»“æ„, å®ƒä»¬å°†"),s("strong",[t._v("å…¨éƒ¨æ”¾åœ¨ä¸€ä¸ª")]),t._v(" zset é›†åˆä¸­. åœ¨ "),s("strong",[t._v("Redis")]),t._v(" çš„é›†ç¾¤ä¸­, é›†åˆå¯èƒ½ä¼šä»ä¸€ä¸ªèŠ‚ç‚¹è¿ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹, å¦‚æœå•ä¸ª key çš„æ•°æ®è¿‡å¤§, ä¼šå¯¹é›†ç¾¤çš„è¿ç§»å·¥ä½œé€ æˆè¾ƒå¤§çš„å½±å“, åœ¨é›†ç¾¤ç¯å¢ƒä¸­å•ä¸ª key å¯¹åº”çš„æ•°æ®é‡ä¸å®œè¶…è¿‡ 1M, å¦åˆ™ä¼šå¯¼è‡´é›†ç¾¤è¿ç§»å‡ºç°å¡é¡¿ç°è±¡, å½±å“çº¿ä¸ŠæœåŠ¡çš„æ­£å¸¸è¿è¡Œ.")]),t._v(" "),s("p",[t._v("æ‰€ä»¥å»ºè®® "),s("strong",[t._v("GEO")]),t._v(" æ•°æ®ä½¿ç”¨ "),s("strong",[t._v("å•ç‹¬çš„ Redis å®ä¾‹éƒ¨ç½²")]),t._v(", ä¸ä½¿ç”¨é›†ç¾¤ç¯å¢ƒ.")]),t._v(" "),s("p",[t._v("å¦‚æœæ•°æ®é‡è¿‡äº¿ç”šè‡³æ›´å¤§, å°±éœ€è¦å¯¹ "),s("strong",[t._v("GEO")]),t._v(" æ•°æ®è¿›è¡Œæ‹†åˆ†, æŒ‰å›½å®¶æ‹†åˆ†, æŒ‰çœæ‹†åˆ†, æŒ‰å¸‚æ‹†åˆ†, åœ¨äººå£ç‰¹å¤§åŸå¸‚ç”šè‡³å¯ä»¥æŒ‰åŒºæ‹†åˆ†. è¿™æ ·å°±å¯ä»¥æ˜¾è‘—é™ä½å•ä¸ª zset é›†åˆçš„å¤§å°.")]),t._v(" "),s("h5",{attrs:{id:"_7-äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-äº‹ä»¶"}},[t._v("#")]),t._v(" 7.äº‹ä»¶")]),t._v(" "),s("p",[t._v("Redis æœåŠ¡å™¨æ˜¯ä¸€ä¸ª"),s("strong",[t._v("äº‹ä»¶é©±åŠ¨")]),t._v("ç¨‹åº.")]),t._v(" "),s("h6",{attrs:{id:"_1-æ–‡ä»¶äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ–‡ä»¶äº‹ä»¶"}},[t._v("#")]),t._v(" (1)æ–‡ä»¶äº‹ä»¶")]),t._v(" "),s("p",[s("strong",[t._v("æœåŠ¡å™¨")]),t._v("é€šè¿‡"),s("strong",[t._v("å¥—æ¥å­—")]),t._v("ä¸å®¢æˆ·ç«¯æˆ–å…¶å®ƒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡, "),s("strong",[t._v("æ–‡ä»¶äº‹ä»¶å°±æ˜¯å¯¹å¥—æ¥å­—æ“ä½œçš„æŠ½è±¡")]),t._v(".")]),t._v(" "),s("p",[t._v("Redis åŸºäº "),s("strong",[t._v("Reactor æ¨¡å¼")]),t._v("å¼€å‘äº†è‡ªå·±çš„ç½‘ç»œäº‹ä»¶å¤„ç†å™¨, ä½¿ç”¨ IO "),s("strong",[t._v("å¤šè·¯å¤ç”¨")]),t._v("ç¨‹åºæ¥åŒæ—¶ç›‘å¬å¤šä¸ªå¥—æ¥å­—, å¹¶å°†åˆ°è¾¾çš„äº‹ä»¶ä¼ é€ç»™æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨, åˆ†æ´¾å™¨ä¼šæ ¹æ®å¥—æ¥å­—äº§ç”Ÿçš„"),s("strong",[t._v("äº‹ä»¶ç±»å‹")]),t._v("è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨.")]),t._v(" "),s("h6",{attrs:{id:"_2-æ—¶é—´äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ—¶é—´äº‹ä»¶"}},[t._v("#")]),t._v(" (2)æ—¶é—´äº‹ä»¶")]),t._v(" "),s("p",[t._v("æœåŠ¡å™¨æœ‰ä¸€äº›æ“ä½œéœ€è¦åœ¨"),s("strong",[t._v("ç»™å®šçš„æ—¶é—´ç‚¹")]),t._v("æ‰§è¡Œ, æ—¶é—´äº‹ä»¶æ˜¯å¯¹è¿™ç±»å®šæ—¶æ“ä½œçš„æŠ½è±¡.")]),t._v(" "),s("p",[t._v("æ—¶é—´äº‹ä»¶åˆåˆ†ä¸º:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®šæ—¶äº‹ä»¶")]),t._v(": æ˜¯è®©ä¸€æ®µç¨‹åºåœ¨æŒ‡å®šçš„æ—¶é—´ä¹‹å†…æ‰§è¡Œä¸€æ¬¡.")]),t._v(" "),s("li",[s("strong",[t._v("å‘¨æœŸæ€§äº‹ä»¶")]),t._v(": æ˜¯è®©ä¸€æ®µç¨‹åºæ¯éš”æŒ‡å®šæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡.")])]),t._v(" "),s("p",[t._v("Redis å°†æ‰€æœ‰æ—¶é—´äº‹ä»¶éƒ½æ”¾åœ¨ä¸€ä¸ª"),s("strong",[t._v("æ— åºé“¾è¡¨")]),t._v("ä¸­, é€šè¿‡éå†æ•´ä¸ªé“¾è¡¨æŸ¥æ‰¾å‡ºå·²åˆ°è¾¾çš„æ—¶é—´äº‹ä»¶, å¹¶è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨.")]),t._v(" "),s("h6",{attrs:{id:"_3-äº‹ä»¶çš„è°ƒåº¦ä¸æ‰§è¡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-äº‹ä»¶çš„è°ƒåº¦ä¸æ‰§è¡Œ"}},[t._v("#")]),t._v(" (3)äº‹ä»¶çš„è°ƒåº¦ä¸æ‰§è¡Œ")]),t._v(" "),s("p",[t._v("æœåŠ¡å™¨éœ€è¦"),s("strong",[t._v("ä¸æ–­ç›‘å¬æ–‡ä»¶äº‹ä»¶çš„å¥—æ¥å­—")]),t._v("æ‰èƒ½å¾—åˆ°å¾…å¤„ç†çš„æ–‡ä»¶äº‹ä»¶, ä½†æ˜¯ä¸èƒ½ä¸€ç›´ç›‘å¬, å¦åˆ™æ—¶é—´äº‹ä»¶æ— æ³•åœ¨è§„å®šçš„æ—¶é—´å†…æ‰§è¡Œ, å› æ­¤ç›‘å¬æ—¶é—´åº”è¯¥æ ¹æ®è·ç¦»ç°åœ¨æœ€è¿‘çš„æ—¶é—´äº‹ä»¶æ¥å†³å®š.")]),t._v(" "),s("p",[t._v("äº‹ä»¶è°ƒåº¦ä¸æ‰§è¡Œç”± "),s("strong",[t._v("aeProcessEvents å‡½æ•°")]),t._v("è´Ÿè´£, ä¼ªä»£ç å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("aeProcessEvents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–åˆ°è¾¾æ—¶é—´ç¦»å½“å‰æ—¶é—´æœ€æ¥è¿‘çš„æ—¶é—´äº‹ä»¶")]),t._v("\n    time_event "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" aeSearchNearestTimer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—æœ€æ¥è¿‘çš„æ—¶é—´äº‹ä»¶è·ç¦»åˆ°è¾¾è¿˜æœ‰å¤šå°‘æ¯«ç§’")]),t._v("\n    remaind_ms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time_event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("when "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" unix_ts_now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¦‚æœäº‹ä»¶å·²åˆ°è¾¾, é‚£ä¹ˆ remaind_ms çš„å€¼å¯èƒ½ä¸ºè´Ÿæ•°, å°†å®ƒè®¾ä¸º 0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" remaind_ms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        remaind_ms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ ¹æ®remaind_msçš„å€¼, åˆ›å»ºtimeval")]),t._v("\n    timeval "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_timeval_with_ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remaind_ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é˜»å¡å¹¶ç­‰å¾…æ–‡ä»¶äº‹ä»¶äº§ç”Ÿ, æœ€å¤§é˜»å¡æ—¶é—´ç”±ä¼ å…¥çš„timevalå†³å®š")]),t._v("\n    aeApiPoll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¤„ç†æ‰€æœ‰å·²äº§ç”Ÿçš„æ–‡ä»¶äº‹ä»¶")]),t._v("\n    procesFileEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¤„ç†æ‰€æœ‰å·²åˆ°è¾¾çš„æ—¶é—´äº‹ä»¶")]),t._v("\n    processTimeEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("å°† "),s("strong",[t._v("aeProcessEvents å‡½æ•°")]),t._v("ç½®äºä¸€ä¸ª"),s("strong",[t._v("å¾ªç¯é‡Œé¢")]),t._v(", åŠ ä¸Šåˆå§‹åŒ–å’Œæ¸…ç†å‡½æ•°, å°±æ„æˆäº† Redis æœåŠ¡å™¨çš„"),s("strong",[t._v("ä¸»å‡½æ•°")]),t._v(", ä¼ªä»£ç å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆå§‹åŒ–æœåŠ¡å™¨")]),t._v("\n    init_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¸€ç›´å¤„ç†äº‹ä»¶, ç›´åˆ°æœåŠ¡å™¨å…³é—­ä¸ºæ­¢")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" server_is_not_shutdown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        aeProcessEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœåŠ¡å™¨å…³é—­, æ‰§è¡Œæ¸…ç†æ“ä½œ")]),t._v("\n    clean_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("ä»äº‹ä»¶å¤„ç†çš„è§’åº¦æ¥çœ‹, æœåŠ¡å™¨è¿è¡Œæµç¨‹å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522211928514.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"rediså®¢æˆ·ç«¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rediså®¢æˆ·ç«¯"}},[t._v("#")]),t._v(" Rediså®¢æˆ·ç«¯")]),t._v(" "),s("p",[t._v("Redis ä½¿ç”¨"),s("strong",[t._v("å•çº¿ç¨‹")]),t._v("æ¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„è®¿é—®.")]),t._v(" "),s("h5",{attrs:{id:"_1-å®¢æˆ·ç«¯é€šä¿¡åè®®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®¢æˆ·ç«¯é€šä¿¡åè®®"}},[t._v("#")]),t._v(" 1.å®¢æˆ·ç«¯é€šä¿¡åè®®")]),t._v(" "),s("p",[t._v("å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é€šä¿¡åè®®å»ºç«‹åœ¨ "),s("strong",[t._v("TCP")]),t._v(" è‡³ä¸Š. Redis å®šä¹‰äº† "),s("strong",[t._v("RESP")]),t._v("(Redis åºåˆ—åŒ–åè®®) ç”¨äºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº¤äº’. æœ‰äº†è¿™ä¸ªé€šä¿¡åè®®å„ä¸ªç¼–ç¨‹è¯­è¨€å°±å¯ä»¥è‡ªå·±å®ç°ç›¸åº”çš„ Redis å®¢æˆ·ç«¯.")]),t._v(" "),s("h5",{attrs:{id:"_2-å®¢æˆ·ç«¯ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯ç®¡ç†"}},[t._v("#")]),t._v(" 2.å®¢æˆ·ç«¯ç®¡ç†")]),t._v(" "),s("p",[t._v("Redis æä¾›äº†å®¢æˆ·ç«¯ç›¸å…³çš„ API å¯¹å…¶"),s("strong",[t._v("çŠ¶æ€è¿›è¡Œç›‘æ§å’Œç®¡ç†")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_1-è¾“å…¥ä¸è¾“å‡ºç¼“å†²åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¾“å…¥ä¸è¾“å‡ºç¼“å†²åŒº"}},[t._v("#")]),t._v(" (1)è¾“å…¥ä¸è¾“å‡ºç¼“å†²åŒº")]),t._v(" "),s("p",[s("strong",[t._v("è¾“å…¥ç¼“å†²åŒº")]),t._v(": Redis ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…äº†è¾“å…¥ç¼“å†²åŒº, ä½œç”¨æ˜¯å°†å®¢æˆ·ç«¯"),s("strong",[t._v("å‘é€çš„å‘½ä»¤è¿›è¡Œç¼“å­˜")]),t._v(", ä¹‹å Redis ä¼šé€æ¸"),s("strong",[t._v("æ‹‰å–")]),t._v("æŒ‡ä»¤å¹¶æ‰§è¡Œ. å¦‚æœæœ‰æŒ‡ä»¤æ‰§è¡Œæ—¶é—´è¿‡é•¿, å¯èƒ½å¯¼è‡´è¾“å…¥ç¼“å†²åŒºæŒ‡ä»¤å †ç§¯ä¸¥é‡.")]),t._v(" "),s("p",[s("strong",[t._v("è¾“å‡ºç¼“å†²åŒº")]),t._v(": Redis ä¹Ÿä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…äº†è¾“å‡ºç¼“å†²åŒº, ä½œç”¨æ˜¯"),s("strong",[t._v("ä¿å­˜è¿”å›ç»™å®¢æˆ·ç«¯å‘½ä»¤æ‰§è¡Œçš„ç»“æœ")]),t._v(", ä¸ºä¸å®¢æˆ·ç«¯äº¤äº’è¿”å›ç»“æœæä¾›ç¼“å†². æŒ‰å®¢æˆ·ç«¯ä¸åŒè¾“å‡ºç¼“å†²åŒºè¿˜å¯ä»¥å…·ä½“åˆ†ä¸ºæ™®é€šå®¢æˆ·ç«¯è¾“å‡ºç¼“å†²åŒº, å‘å¸ƒè®¢é˜…è¾“å‡ºç¼“å†²åŒº, å¤åˆ¶è¾“å‡ºç¼“å†²åŒº. å®é™…ä¸Šè¾“å‡ºç¼“å†²åŒºç”±ä¸¤éƒ¨åˆ†ç»„æˆ: "),s("strong",[t._v("å›ºå®šç¼“å†²åŒº(16K) å’ŒåŠ¨æ€ç¼“å†²åŒº")]),t._v(", å›ºå®šç¼“å†²åŒº(ä½¿ç”¨çš„æ˜¯å­—èŠ‚æ•°ç»„) è¿”å›æ¯”è¾ƒå°çš„æ‰§è¡Œç»“æœ, åŠ¨æ€ç¼“å†²åŒº(ä½¿ç”¨çš„æ˜¯åˆ—è¡¨) è¿”å›æ¯”è¾ƒå¤§çš„ç»“æœ. å›ºå®šç¼“å†²åŒºç”¨å°½åˆ™ä½¿ç”¨åŠ¨æ€ç¼“å†²åŒº.")]),t._v(" "),s("h6",{attrs:{id:"_2-å®¢æˆ·ç«¯ç®¡ç†æŒ‡ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯ç®¡ç†æŒ‡ä»¤"}},[t._v("#")]),t._v(" (2)å®¢æˆ·ç«¯ç®¡ç†æŒ‡ä»¤")]),t._v(" "),s("p",[s("strong",[t._v("åˆ—å‡ºä¸ Redis æœåŠ¡å™¨ç›¸è¿æ¥çš„æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯")]),t._v(": è¾“å‡ºæ¯ä¸€è¡Œå°±è¡¨ç¤ºä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥. æ¯ä¸ªè¿æ¥éƒ½æœ‰ä¸€äº›é‡è¦çš„å±æ€§. å¦‚"),s("strong",[t._v("æ ‡è¯†å±æ€§")]),t._v(": id(å”¯ä¸€ ID), addr(å®¢æˆ·ç«¯è¿æ¥ IP ä¸ç«¯å£), fd(socket çš„æ–‡ä»¶æè¿°ç¬¦), name(å®¢æˆ·ç«¯åå­—), "),s("strong",[t._v("è¾“å…¥ç¼“å†²åŒºå±æ€§")]),t._v(": qbuf(è¾“å…¥ç¼“å­˜åŒºæ€»å®¹é‡), qbuf-free(è¾“å…¥ç¼“å­˜åŒºå‰©ä½™å®¹é‡), "),s("strong",[t._v("è¾“å‡ºç¼“å†²åŒºå±æ€§")]),t._v(": obl, oll, omem, "),s("strong",[t._v("å­˜æ´»çŠ¶æ€å±æ€§")]),t._v(": age(å·²è¿æ¥æ—¶é—´), idle(æœ€è¿‘ä¸€æ¬¡ç©ºé—²æ—¶é—´).")]),t._v(" "),s("div",{staticClass:"language-mysql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("client list\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("è·å–å®¢æˆ·ç«¯ä¿¡æ¯")]),t._v(": å¯ä»¥æœ‰æ•ˆçš„å¸®åŠ©å¼€å‘å’Œè¿ç»´æ‰¾åˆ°å®¢æˆ·ç«¯å¯èƒ½å­˜åœ¨çš„é—®é¢˜.")]),t._v(" "),s("div",{staticClass:"language-mysql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("info client\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"_3-jedis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-jedis"}},[t._v("#")]),t._v(" 3.Jedis")]),t._v(" "),s("p",[s("strong",[t._v("Jedis")]),t._v(" æ˜¯ Java å®ç°çš„ Redis å®¢æˆ·ç«¯. åŸºç¡€ä½¿ç”¨æ˜¯ç”¨"),s("strong",[t._v("ç›´è¿")]),t._v("çš„æ–¹å¼, ä½†æœ€å¥½ä½¿ç”¨ "),s("strong",[t._v("Jedis è¿æ¥æ± ")]),t._v("(JedisPool) çš„æ–¹å¼è¿›è¡Œæ“ä½œ, è¿™æ ·å¯ä»¥å‡å°‘è¿æ¥æ—¶åˆ›å»º "),s("strong",[t._v("TCP è¿æ¥")]),t._v("çš„å¼€é”€. JedisPool æ˜¯"),s("strong",[t._v("å•ä¾‹")]),t._v("çš„.")]),t._v(" "),s("p",[t._v("Jedis.close() åœ¨"),s("strong",[t._v("ç›´è¿çŠ¶æ€")]),t._v("ä¸‹æ˜¯"),s("strong",[t._v("å…³é—­è¿æ¥")]),t._v(", å¦‚æœä½¿ç”¨äº†è¿æ¥æ± , åˆ™ä½¿ç”¨å®Œæˆå "),s("strong",[t._v("close æ“ä½œä¸æ˜¯å…³é—­")]),t._v("è¿æ¥, è€Œæ˜¯"),s("strong",[t._v("å½’è¿˜")]),t._v("åˆ°è¿æ¥æ± ä¸­.")]),t._v(" "),s("p",[t._v("Jedis è¿˜å¯ä»¥å®ç° "),s("strong",[t._v("Pipeline")]),t._v(" æ“ä½œå’Œæ‰§è¡Œ "),s("strong",[t._v("Lua è„šæœ¬")]),t._v("(ä¹Ÿæœ‰ eval å’Œ evalsha ä¸¤ä¸ªæ–¹æ³•).")]),t._v(" "),s("p",[t._v("å¼•å…¥ç›¸å…³ä¾èµ–:")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("redis.clients"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jedis"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.9.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("ç¤ºä¾‹ä»£ç :")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JedisSingleTest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JedisPoolConfig")]),t._v(" jedisPoolConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JedisPoolConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        jedisPoolConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxTotal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        jedisPoolConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxIdle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        jedisPoolConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMinIdle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// timeout, è¿™é‡Œæ—¢æ˜¯è¿æ¥è¶…æ—¶åˆæ˜¯è¯»å†™è¶…æ—¶, ä»Jedis 2.8å¼€å§‹æœ‰åŒºåˆ†connectionTimeoutå’ŒsoTimeoutçš„æ„é€ å‡½æ•°")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JedisPool")]),t._v(" jedisPool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JedisPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jedisPoolConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.60"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jedis")]),t._v(" jedis "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»redisè¿æ¥æ± é‡Œæ‹¿å‡ºä¸€ä¸ªè¿æ¥æ‰§è¡Œå‘½ä»¤")]),t._v("\n            jedis "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jedisPool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jedis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"single"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nano"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jedis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"single"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç®¡é“ç¤ºä¾‹")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç®¡é“çš„å‘½ä»¤æ‰§è¡Œæ–¹å¼: cat redis.txt | redis-cli -h 127.0.0.1 -a password - p 6379 --pipe")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* Pipeline pl = jedis.pipelined();\n            for (int i = 0; i < 10; i++) {\n                pl.incr("pipelineKey");\n                pl.set("nano" + i, "nano");\n            }\n            List<Object> results = pl.syncAndReturnAll();\n            System.out.println(results);*/')]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// luaè„šæœ¬æ¨¡æ‹Ÿä¸€ä¸ªå•†å“å‡åº“å­˜çš„åŸå­æ“ä½œ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// luaè„šæœ¬å‘½ä»¤æ‰§è¡Œæ–¹å¼: redis-cli --eval /tmp/test.lua , 10")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/*jedis.set("product_count_10016", "15");  //åˆå§‹åŒ–å•†å“10016çš„åº“å­˜\n            String script = " local count = redis.call(\'get\', KEYS[1]) " +\n                            " local a = tonumber(count) " +\n                            " local b = tonumber(ARGV[1]) " +\n                            " if a >= b then " +\n                            "   redis.call(\'set\', KEYS[1], a-b) " +\n                            "   return 1 " +\n                            " end " +\n                            " return 0 ";\n            Object obj = jedis.eval(script, Arrays.asList("product_count_10016"), Arrays.asList("10"));\n            System.out.println(obj);*/')]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™é‡Œä¸æ˜¯å…³é—­è¿æ¥, åœ¨JedisPoolæ¨¡å¼ä¸‹, Jedisä¼šè¢«å½’è¿˜ç»™èµ„æºæ± . ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jedis "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                jedis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br")])]),s("h4",{attrs:{id:"ä¸€ä¸ªç®€å•çš„è®ºå›ç³»ç»Ÿåº”ç”¨ç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªç®€å•çš„è®ºå›ç³»ç»Ÿåº”ç”¨ç¤ºä¾‹"}},[t._v("#")]),t._v(" ä¸€ä¸ªç®€å•çš„è®ºå›ç³»ç»Ÿåº”ç”¨ç¤ºä¾‹")]),t._v(" "),s("p",[t._v("è¯¥è®ºå›ç³»ç»ŸåŠŸèƒ½å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[t._v("å¯ä»¥å‘å¸ƒæ–‡ç« .")]),t._v(" "),s("li",[t._v("å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œ"),s("strong",[t._v("ç‚¹èµ")]),t._v(".")]),t._v(" "),s("li",[t._v("åœ¨é¦–é¡µå¯ä»¥æŒ‰æ–‡ç« çš„å‘å¸ƒæ—¶é—´æˆ–è€…æ–‡ç« çš„"),s("strong",[t._v("ç‚¹èµæ•°è¿›è¡Œæ’åºæ˜¾ç¤º")]),t._v(".")])]),t._v(" "),s("blockquote",[s("p",[t._v("æ–‡ç« ä¿¡æ¯")])]),t._v(" "),s("p",[t._v("æ–‡ç« åŒ…æ‹¬æ ‡é¢˜, ä½œè€…, èµæ•°ç­‰ä¿¡æ¯, åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­å¾ˆå®¹æ˜“æ„å»ºä¸€å¼ è¡¨æ¥å­˜å‚¨è¿™äº›ä¿¡æ¯, åœ¨ Redis ä¸­å¯ä»¥ä½¿ç”¨ "),s("strong",[t._v("HASH")]),t._v(" æ¥å­˜å‚¨æ¯ç§ä¿¡æ¯ä»¥åŠå…¶å¯¹åº”çš„å€¼çš„æ˜ å°„.")]),t._v(" "),s("p",[t._v("Redis æ²¡æœ‰å…³ç³»å‹æ•°æ®åº“ä¸­çš„"),s("strong",[t._v("è¡¨")]),t._v("è¿™ä¸€æ¦‚å¿µæ¥å°†åŒç§ç±»å‹çš„æ•°æ®å­˜æ”¾åœ¨ä¸€èµ·, è€Œæ˜¯ä½¿ç”¨"),s("strong",[t._v("å‘½åç©ºé—´")]),t._v("çš„æ–¹å¼æ¥å®ç°è¿™ä¸€åŠŸèƒ½. "),s("strong",[t._v("é”®åçš„å‰é¢éƒ¨åˆ†å­˜å‚¨å‘½åç©ºé—´")]),t._v(", åé¢éƒ¨åˆ†çš„å†…å®¹å­˜å‚¨ ID, é€šå¸¸"),s("strong",[t._v("ä½¿ç”¨ : æ¥è¿›è¡Œåˆ†éš”")]),t._v(". ä¾‹å¦‚ä¸‹é¢çš„ HASH çš„é”®åä¸º article:92617, å…¶ä¸­ article ä¸ºå‘½åç©ºé—´, ID ä¸º 92617.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563520443633.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("ç‚¹èµåŠŸèƒ½")])]),t._v(" "),s("p",[t._v("å½“æœ‰ç”¨æˆ·ä¸ºä¸€ç¯‡æ–‡ç« ç‚¹èµæ—¶, é™¤äº†è¦å¯¹è¯¥æ–‡ç« çš„ votes å­—æ®µè¿›è¡ŒåŠ  1 æ“ä½œ, è¿˜å¿…é¡»è®°å½•è¯¥ç”¨æˆ·å·²ç»å¯¹è¯¥æ–‡ç« è¿›è¡Œäº†ç‚¹èµ, é˜²æ­¢ç”¨æˆ·ç‚¹èµæ¬¡æ•°è¶…è¿‡ 1. å¯ä»¥å»ºç«‹æ–‡ç« çš„"),s("strong",[t._v("å·²æŠ•ç¥¨ç”¨æˆ·")]),t._v("é›†åˆæ¥è¿›è¡Œè®°å½•.")]),t._v(" "),s("p",[t._v("ä¸ºäº†èŠ‚çº¦å†…å­˜, è§„å®šä¸€ç¯‡æ–‡ç« å‘å¸ƒæ»¡ä¸€å‘¨ä¹‹å, å°±ä¸èƒ½å†å¯¹å®ƒè¿›è¡ŒæŠ•ç¥¨, è€Œæ–‡ç« çš„å·²æŠ•ç¥¨é›†åˆä¹Ÿä¼šè¢«åˆ é™¤, å¯ä»¥ä¸ºæ–‡ç« çš„å·²æŠ•ç¥¨é›†åˆè®¾ç½®ä¸€ä¸ªä¸€å‘¨çš„"),s("strong",[t._v("è¿‡æœŸæ—¶é—´")]),t._v("å°±èƒ½å®ç°è¿™ä¸ªè§„å®š.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563520458408.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("å¯¹æ–‡ç« è¿›è¡Œæ’åº")])]),t._v(" "),s("p",[t._v("ä¸ºäº†æŒ‰å‘å¸ƒæ—¶é—´å’Œç‚¹èµæ•°è¿›è¡Œæ’åº, å¯ä»¥å»ºç«‹ä¸€ä¸ªæ–‡ç« å‘å¸ƒæ—¶é—´çš„"),s("strong",[t._v("æœ‰åºé›†åˆ")]),t._v("å’Œä¸€ä¸ªæ–‡ç« ç‚¹èµæ•°çš„æœ‰åºé›†åˆ. ä¸‹å›¾ä¸­çš„ score å°±æ˜¯è¿™é‡Œæ‰€è¯´çš„ç‚¹èµæ•°; ä¸‹é¢æ‰€ç¤ºçš„æœ‰åºé›†åˆåˆ†å€¼å¹¶ä¸ç›´æ¥æ˜¯æ—¶é—´å’Œç‚¹èµæ•°, è€Œæ˜¯æ ¹æ®æ—¶é—´å’Œç‚¹èµæ•°é—´æ¥è®¡ç®—å‡ºæ¥çš„.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563520475567.png",alt:""}})]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Redis å‘½ä»¤")]),t._v("åœ¨çº¿æŸ¥è¯¢: "),s("a",{attrs:{href:"http://redisdoc.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://redisdoc.com/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Carlson J L. Redis in Action[J]. Media.johnwiley.com.au, 2013.")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://redisbook.com/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("é»„å¥å®. Redis è®¾è®¡ä¸å®ç° [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2014."),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://redislabs.com/ebook/foreword/",target:"_blank",rel:"noopener noreferrer"}},[t._v("REDIS IN ACTION"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://ticki.github.io/blog/skip-lists-done-right/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Skip Lists: Done Right"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.cnblogs.com/loveincode/p/7411911.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è®ºè¿° Redis å’Œ Memcached çš„å·®å¼‚"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://wiki.jikexueyuan.com/project/redis-guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 3.0 ä¸­æ–‡ç‰ˆ- åˆ†ç‰‡"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.scienjus.com/redis-use-case/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis åº”ç”¨åœºæ™¯"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://redis.io/topics/lru-cache",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using Redis as an LRU cache"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("strong",[t._v("ä¼˜ç§€æ–‡ç« ")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("é˜¿é‡Œäº‘ Redis å¼€å‘è§„èŒƒ - "),s("a",{attrs:{href:"https://www.infoq.cn/article/K7dB5AFKI9mr5Ugbs_px",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.infoq.cn/article/K7dB5AFKI9mr5Ugbs_px"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ä¸ºä»€ä¹ˆè¦é˜²æ­¢ bigkey?  - "),s("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=Mzg2NTEyNzE0OA==&mid=2247483677&idx=1&sn=5c320b46f0e06ce9369a29909d62b401&chksm=ce5f9e9ef928178834021b6f9b939550ac400abae5c31e1933bafca2f16b23d028cc51813aec&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mp.weixin.qq.com/s?__biz=Mzg2NTEyNzE0OA==&mid=2247483677&idx=1&sn=5c320b46f0e06ce9369a29909d62b401&chksm=ce5f9e9ef928178834021b6f9b939550ac400abae5c31e1933bafca2f16b23d028cc51813aec&scene=21#wechat_redirect"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Redisã€å…¥é—¨ã€‘å°±è¿™ä¸€ç¯‡!  - "),s("a",{attrs:{href:"https://www.wmyskxz.com/2018/05/31/redis-ru-men-jiu-zhe-yi-pian/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.wmyskxz.com/2018/05/31/redis-ru-men-jiu-zhe-yi-pian/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹ - "),s("a",{attrs:{href:"http://redisbook.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://redisbook.com/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ã€å®˜æ–¹æ–‡æ¡£ã€‘Redis æ•°æ®ç±»å‹ä»‹ç» - "),s("a",{attrs:{href:"http://www.redis.cn/topics/data-types-intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.redis.cn/topics/data-types-intro.html"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ã€ŠRedis æ·±åº¦å†é™©ã€‹ - "),s("a",{attrs:{href:"https://book.douban.com/subject/30386804/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://book.douban.com/subject/30386804/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("é˜¿é‡Œäº‘ Redis å¼€å‘è§„èŒƒ - "),s("a",{attrs:{href:"https://www.infoq.cn/article/K7dB5AFKI9mr5Ugbs_px",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.infoq.cn/article/K7dB5AFKI9mr5Ugbs_px"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Redis å¿«é€Ÿå…¥é—¨ - æ˜“ç™¾æ•™ç¨‹ - "),s("a",{attrs:{href:"https://www.yiibai.com/redis/redis_quick_guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.yiibai.com/redis/redis_quick_guide.html"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Redisã€å…¥é—¨ã€‘å°±è¿™ä¸€ç¯‡! - "),s("a",{attrs:{href:"https://www.wmyskxz.com/2018/05/31/redis-ru-men-jiu-zhe-yi-pian/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.wmyskxz.com/2018/05/31/redis-ru-men-jiu-zhe-yi-pian/"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("strong",[t._v("Redis")]),t._v("æ•°æ®ç»“æ„æºç åˆ†æ:")]),t._v(" "),s("ul",[s("li",[t._v("Redis æ•°æ®ç»“æ„-å­—ç¬¦ä¸²æºç åˆ†æ: "),s("a",{attrs:{href:"https://my.oschina.net/mengyuankan/blog/1926320",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://my.oschina.net/mengyuankan/blog/1926320"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Redis æ•°æ®ç»“æ„-å­—å…¸æºç åˆ†æ:  "),s("a",{attrs:{href:"https://my.oschina.net/mengyuankan/blog/1929593",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://my.oschina.net/mengyuankan/blog/1929593"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);