(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{472:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_34-redisé›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_34-redisé›†ç¾¤"}},[s._v("#")]),s._v(" 34.Redisé›†ç¾¤")]),s._v(" "),t("h4",{attrs:{id:"é›†ç¾¤æ¶æ„åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤æ¶æ„åŸºç¡€"}},[s._v("#")]),s._v(" é›†ç¾¤æ¶æ„åŸºç¡€")]),s._v(" "),t("h5",{attrs:{id:"_1-é›†ç¾¤æ¶æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é›†ç¾¤æ¶æ„"}},[s._v("#")]),s._v(" 1.é›†ç¾¤æ¶æ„")]),s._v(" "),t("p",[s._v("åœ¨ Redis3.0 ä»¥å‰çš„ç‰ˆæœ¬è¦å®ç°é›†ç¾¤ä¸€èˆ¬æ˜¯å€ŸåŠ©å“¨å…µ Sentinel å·¥å…·æ¥ç›‘æ§ master èŠ‚ç‚¹çš„çŠ¶æ€, å¦‚æœ master èŠ‚ç‚¹å¼‚å¸¸, åˆ™ä¼šåšä¸»ä»åˆ‡æ¢, å°†æŸä¸€å° slave ä½œä¸º master, "),t("strong",[s._v("å“¨å…µçš„é…ç½®ç•¥å¾®å¤æ‚, å¹¶ä¸”æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ç­‰å„æ–¹é¢è¡¨ç°ä¸€èˆ¬, ç‰¹åˆ«æ˜¯åœ¨ä¸»ä»åˆ‡æ¢çš„ç¬é—´å­˜åœ¨è®¿é—®é—ªæ–­çš„æƒ…å†µ, è€Œä¸”å“¨å…µæ¨¡å¼åªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯¹å¤–æä¾›æœåŠ¡, æ²¡æ³•æ”¯æŒå¾ˆé«˜çš„å¹¶å‘, ä¸”å•ä¸ªä¸»èŠ‚ç‚¹å†…å­˜ä¹Ÿä¸å®œè®¾ç½®å¾—è¿‡å¤§, å¦åˆ™ä¼šå¯¼è‡´æŒä¹…åŒ–æ–‡ä»¶è¿‡å¤§, å½±å“æ•°æ®æ¢å¤æˆ–ä¸»ä»åŒæ­¥çš„æ•ˆç‡.")])]),s._v(" "),t("p",[s._v("å› æ­¤æ¼”å˜å‡ºäº† Redis é›†ç¾¤æ¶æ„.")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240106211006-eukxvsd.png",alt:"image"}})]),s._v(" "),t("p",[s._v("Redis Cluster æ˜¯ Redis çš„"),t("strong",[s._v("åˆ†å¸ƒå¼")]),s._v("è§£å†³æ–¹æ¡ˆ. å½“é‡åˆ°å•æœº"),t("strong",[s._v("å†…å­˜, å¹¶å‘, æµé‡ç­‰ç“¶é¢ˆ")]),s._v("æ—¶å¯ä»¥é‡‡ç”¨ cluster æ¶æ„çš„è§£å†³æ–¹æ¡ˆ. Redis é›†ç¾¤æ˜¯ä¸€ä¸ªç”±å¤šä¸ªä¸»ä»èŠ‚ç‚¹ç¾¤ç»„æˆçš„åˆ†å¸ƒå¼æœåŠ¡å™¨ç¾¤, å®ƒå…·æœ‰å¤åˆ¶, é«˜å¯ç”¨å’Œåˆ†ç‰‡ç‰¹æ€§. Redis é›†ç¾¤"),t("strong",[s._v("ä¸éœ€è¦ sentinel å“¨å…µä¹Ÿèƒ½å®ŒæˆèŠ‚ç‚¹ç§»é™¤å’Œæ•…éšœè½¬ç§»çš„åŠŸèƒ½")]),s._v(". éœ€è¦å°†æ¯ä¸ªèŠ‚ç‚¹è®¾ç½®æˆé›†ç¾¤æ¨¡å¼, è¿™ç§é›†ç¾¤æ¨¡å¼æ²¡æœ‰ä¸­å¿ƒèŠ‚ç‚¹, å¯æ°´å¹³æ‰©å±•, æ®å®˜æ–¹æ–‡æ¡£ç§°å¯ä»¥çº¿æ€§æ‰©å±•åˆ°ä¸Šä¸‡ä¸ªèŠ‚ç‚¹(å®˜æ–¹æ¨èä¸è¶…è¿‡ 1000 ä¸ªèŠ‚ç‚¹). Redis é›†ç¾¤çš„æ€§èƒ½å’Œé«˜å¯ç”¨æ€§å‡ä¼˜äºä¹‹å‰ç‰ˆæœ¬çš„å“¨å…µæ¨¡å¼, ä¸”é›†ç¾¤é…ç½®éå¸¸ç®€å•.")]),s._v(" "),t("p",[s._v("é›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ª Redis èŠ‚ç‚¹éƒ½"),t("strong",[s._v("äº’ç›¸ä¸¤ä¸¤ç›¸è¿")]),s._v(", å®¢æˆ·ç«¯ä»»æ„"),t("strong",[s._v("ç›´è¿")]),s._v("åˆ°é›†ç¾¤ä¸­çš„"),t("strong",[s._v("ä»»æ„ä¸€å°")]),s._v(", å°±å¯ä»¥å¯¹å…¶ä»– Redis èŠ‚ç‚¹è¿›è¡Œ"),t("strong",[s._v("è¯»å†™")]),s._v("æ“ä½œ.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523222556276.png",alt:""}})]),s._v(" "),t("blockquote",[t("p",[s._v("é›†ç¾¤çš„ä½œç”¨")])]),s._v(" "),t("p",[s._v("**æ•°æ®åˆ†åŒº: ** æ•°æ®åˆ†åŒº(æˆ–ç§°æ•°æ®åˆ†ç‰‡)æ˜¯é›†ç¾¤æœ€æ ¸å¿ƒçš„åŠŸèƒ½. é›†ç¾¤å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹, ä¸€æ–¹é¢çªç ´äº† Redis å•æœºå†…å­˜å¤§å°çš„é™åˆ¶, "),t("strong",[s._v("å­˜å‚¨å®¹é‡å¤§å¤§å¢åŠ ")]),s._v("; "),t("strong",[s._v("å¦ä¸€æ–¹é¢")]),s._v("æ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½å¯ä»¥å¯¹å¤–æä¾›è¯»æœåŠ¡å’Œå†™æœåŠ¡, "),t("strong",[s._v("å¤§å¤§æé«˜äº†é›†ç¾¤çš„å“åº”èƒ½åŠ›")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("é«˜å¯ç”¨: "),t("strong",[s._v("â€‹"),t("strong",[t("strong",[s._v("é›†ç¾¤æ”¯æŒ")])]),s._v("â€‹")]),s._v("ä¸»ä»å¤åˆ¶")]),s._v("å’Œä¸»èŠ‚ç‚¹çš„"),t("strong",[s._v("è‡ªåŠ¨æ•…éšœè½¬ç§»")]),s._v("(ä¸å“¨å…µç±»ä¼¼), å½“ä»»ä¸€èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶, é›†ç¾¤ä»ç„¶å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡.")]),s._v(" "),t("blockquote",[t("p",[s._v("é›†ç¾¤çš„é™åˆ¶")])]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤ç›¸å¯¹å•æœºåœ¨åŠŸèƒ½ä¸Šå­˜åœ¨ä¸€äº›é™åˆ¶.")]),s._v(" "),t("ul",[t("li",[s._v("å¯¹ "),t("strong",[s._v("key çš„æ‰¹é‡æ“ä½œæ”¯æŒæœ‰é™")]),s._v(". å¦‚ mset, mget, ç›®å‰åªæ”¯æŒå…·æœ‰"),t("strong",[s._v("ç›¸åŒ slot å€¼")]),s._v("çš„ key æ‰§è¡Œæ‰¹é‡æ“ä½œ. å¯¹äºæ˜ å°„ä¸ºä¸åŒ slot å€¼çš„ key ç”±äºæ‰§è¡Œ mget, mget ç­‰æ“ä½œå¯èƒ½å­˜åœ¨äºå¤šä¸ªèŠ‚ç‚¹ä¸Šå› æ­¤ä¸è¢«æ”¯æŒ.")]),s._v(" "),t("li",[t("strong",[s._v("key äº‹åŠ¡æ“ä½œæ”¯æŒæœ‰é™")]),s._v(". åŒç†åªæ”¯æŒå¤š key åœ¨"),t("strong",[s._v("åŒä¸€èŠ‚ç‚¹")]),s._v("ä¸Šçš„äº‹åŠ¡æ“ä½œ, å½“å¤šä¸ª key åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šæ—¶æ— æ³•ä½¿ç”¨äº‹åŠ¡åŠŸèƒ½.")]),s._v(" "),t("li",[s._v("key ä½œä¸ºæ•°æ®åˆ†åŒºçš„æœ€å°ç²’åº¦, å› æ­¤"),t("strong",[s._v("ä¸èƒ½å°†ä¸€ä¸ªå¤§")]),s._v("çš„é”®å€¼å¯¹è±¡å¦‚ hash, list ç­‰æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹.")]),s._v(" "),t("li",[s._v("ä¸æ”¯æŒå¤šæ•°æ®åº“ç©ºé—´. å•æœºä¸‹çš„ Redis å¯ä»¥æ”¯æŒ 16 ä¸ªæ•°æ®åº“, é›†ç¾¤æ¨¡å¼ä¸‹"),t("strong",[s._v("åªèƒ½ä½¿ç”¨ä¸€ä¸ª")]),s._v("æ•°æ®åº“ç©ºé—´, å³ db0.")]),s._v(" "),t("li",[s._v("å¤åˆ¶ç»“æ„"),t("strong",[s._v("åªæ”¯æŒä¸€å±‚")]),s._v(", ä»èŠ‚ç‚¹åªèƒ½å¤åˆ¶ä¸»èŠ‚ç‚¹, ä¸æ”¯æŒåµŒå¥—æ ‘çŠ¶å¤åˆ¶ç»“æ„.")])]),s._v(" "),t("h5",{attrs:{id:"_2-redisé›†ç¾¤æ•°æ®åˆ†åŒºğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-redisé›†ç¾¤æ•°æ®åˆ†åŒºğŸŒŸ"}},[s._v("#")]),s._v(" 2.Redisé›†ç¾¤æ•°æ®åˆ†åŒºğŸŒŸ")]),s._v(" "),t("p",[s._v("å¯¹äºåˆ†å¸ƒå¼å­˜å‚¨æ¥è¯´, æœ‰ä¸åŒçš„æ•°æ®å­˜å‚¨åˆ†åŒºæ–¹å¼, å‚è€ƒ: æ•°æ®åˆ†å¸ƒæ–¹å¼.")]),s._v(" "),t("p",[t("strong",[s._v("Redis Cluster")]),s._v(" å°±æ˜¯"),t("strong",[s._v("é‡‡ç”¨è™šæ‹Ÿæ§½åˆ†åŒº")]),s._v(". æ‰€æœ‰"),t("strong",[s._v("é”®")]),s._v("æ ¹æ®"),t("strong",[s._v("å“ˆå¸Œå‡½æ•°")]),s._v("æ˜ å°„åˆ° "),t("strong",[s._v("0 ~ 16383")]),s._v(" æ•´æ•°æ§½å†…, Cluster é»˜è®¤ä¼šå¯¹ key å€¼ä½¿ç”¨ "),t("strong",[s._v("crc16 ç®—æ³•")]),s._v("è¿›è¡Œ hash å¾—åˆ°ä¸€ä¸ªæ•´æ•°å€¼, ç„¶åç”¨è¿™ä¸ªæ•´æ•°å€¼å¯¹ 16384 è¿›è¡Œå–æ¨¡æ¥å¾—åˆ°å…·ä½“æ§½ä½. è®¡ç®—å…¬å¼: "),t("strong",[s._v("==slot = CRC16(key) & 16383==")]),s._v(". æ¯ä¸€ä¸ªèŠ‚ç‚¹è´Ÿè´£ç»´æŠ¤ä¸€éƒ¨åˆ†"),t("strong",[s._v("æ§½ä»¥åŠæ§½æ‰€æ˜ å°„çš„é”®å€¼æ•°æ®")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523220809355.png",alt:""}})]),s._v(" "),t("p",[s._v("ä¸€ä¸ªé›†ç¾¤ä¸­åˆ†æ§½çš„ä¾‹å­.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523220845778.png",alt:""}})]),s._v(" "),t("p",[s._v("å½“å‰é›†ç¾¤æœ‰ "),t("strong",[s._v("5 ä¸ªèŠ‚ç‚¹")]),s._v(", æ¯ä¸ªèŠ‚ç‚¹å¹³å‡å¤§çº¦è´Ÿè´£ "),t("strong",[s._v("3276")]),s._v(" ä¸ªæ§½. ç”±äºé‡‡ç”¨"),t("strong",[s._v("é«˜è´¨é‡çš„å“ˆå¸Œç®—æ³•")]),s._v(", æ¯ä¸ªæ§½æ‰€æ˜ å°„çš„æ•°æ®é€šå¸¸æ¯”è¾ƒå‡åŒ€, å°†æ•°æ®å¹³å‡åˆ’åˆ†åˆ° 5 ä¸ªèŠ‚ç‚¹è¿›è¡Œ"),t("strong",[s._v("æ•°æ®åˆ†åŒº")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("å½“ Redis Cluster çš„å®¢æˆ·ç«¯æ¥è¿æ¥é›†ç¾¤æ—¶, å®ƒä¹Ÿä¼šå¾—åˆ°ä¸€ä»½é›†ç¾¤çš„æ§½ä½é…ç½®ä¿¡æ¯å¹¶å°†å…¶ç¼“å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°")]),s._v(". è¿™æ ·å½“å®¢æˆ·ç«¯è¦æŸ¥æ‰¾æŸä¸ª key æ—¶, å¯ä»¥ç›´æ¥å®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹. åŒæ—¶å› ä¸ºæ§½ä½çš„ä¿¡æ¯å¯èƒ½ä¼šå­˜åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¸ä¸€è‡´çš„æƒ…å†µ, è¿˜éœ€è¦çº æ­£æœºåˆ¶æ¥å®ç°æ§½ä½ä¿¡æ¯çš„æ ¡éªŒè°ƒæ•´.")]),s._v(" "),t("h4",{attrs:{id:"é›†ç¾¤é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤é…ç½®"}},[s._v("#")]),s._v(" é›†ç¾¤é…ç½®")]),s._v(" "),t("p",[s._v("æ­å»ºé›†ç¾¤çš„ä¸‰ä¸ªæ­¥éª¤:")]),s._v(" "),t("ul",[t("li",[s._v("å‡†å¤‡èŠ‚ç‚¹.")]),s._v(" "),t("li",[s._v("èŠ‚ç‚¹æ¡æ‰‹.")]),s._v(" "),t("li",[s._v("åˆ†é…æ§½.")])]),s._v(" "),t("h5",{attrs:{id:"_1-èŠ‚ç‚¹å‡†å¤‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-èŠ‚ç‚¹å‡†å¤‡"}},[s._v("#")]),s._v(" 1.èŠ‚ç‚¹å‡†å¤‡")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤ä¸€èˆ¬ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆ, èŠ‚ç‚¹æ•°é‡"),t("strong",[s._v("è‡³å°‘ä¸º 6 ä¸ª")]),s._v("æ‰èƒ½ä¿è¯ç»„æˆå®Œæ•´é«˜å¯ç”¨çš„é›†ç¾¤. æ¯ä¸ªèŠ‚ç‚¹éœ€è¦"),t("strong",[s._v('å¼€å¯é…ç½® "cluster-enabled yes"')]),s._v(" , è®© Redis è¿è¡Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹.")]),s._v(" "),t("p",[s._v("å»ºè®®ä¸ºé›†ç¾¤å†…æ‰€æœ‰èŠ‚ç‚¹"),t("strong",[s._v("ç»Ÿä¸€ç›®å½•")]),s._v(", ä¸€èˆ¬åˆ’åˆ†ä¸‰ä¸ªç›®å½•: "),t("strong",[s._v("conf, data, log")]),s._v(", åˆ†åˆ«å­˜æ”¾"),t("strong",[s._v("é…ç½®, æ•°æ®å’Œæ—¥å¿—")]),s._v("ç›¸å…³æ–‡ä»¶. æŠŠ 6 ä¸ªèŠ‚ç‚¹"),t("strong",[s._v("é…ç½®")]),s._v("ç»Ÿä¸€æ”¾åœ¨ conf ç›®å½•ä¸‹, é›†ç¾¤ç›¸å…³é…ç½®å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# èŠ‚ç‚¹ç«¯å£")]),s._v("\nport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å¯é›†ç¾¤æ¨¡å¼")]),s._v("\ncluster-enabled "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# èŠ‚ç‚¹è¶…æ—¶æ—¶é—´, å•ä½æ¯«ç§’")]),s._v("\ncluster-node-timeout "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é›†ç¾¤å†…éƒ¨é…ç½®æ–‡ä»¶")]),s._v("\ncluster-config-file "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nodes-6379.conf"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("å…¶ä»–é…ç½®å’Œ"),t("strong",[s._v("å•æœºæ¨¡å¼ä¸€è‡´")]),s._v("å³å¯, è¿™é‡Œé…ç½®æ–‡ä»¶å‘½åè§„åˆ™ "),t("strong",[s._v("redis-{port}.conf")]),s._v(", å‡†å¤‡å¥½é…ç½®å"),t("strong",[s._v("å¯åŠ¨æ‰€æœ‰èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ redis-server conf/redis-6379.conf\n$ redis-server conf/redis-6380.conf\n$ redis-server conf/redis-6381.conf\n$ redis-server conf/redis-6382.conf\n$ redis-server conf/redis-6383.conf\n$ redis-server conf/redis-6384.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("æ£€æŸ¥"),t("strong",[s._v("èŠ‚ç‚¹æ—¥å¿—")]),s._v("æ˜¯å¦æ­£ç¡®, æ—¥å¿—å†…å®¹å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" log/redis-6379.log\n* No cluster configuration found, I'm cfb28ef1deee4e0fa78da86abe5d24566744411e\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Server started, Redis version 3.0.7")]),s._v("\n* The server is now ready to accept connections on port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("6379 èŠ‚ç‚¹"),t("strong",[s._v("å¯åŠ¨æˆåŠŸ")]),s._v(", ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶å¦‚æœæ²¡æœ‰é›†ç¾¤é…ç½®æ–‡ä»¶, å®ƒä¼š"),t("strong",[s._v("è‡ªåŠ¨åˆ›å»º")]),s._v("ä¸€ä»½.")]),s._v(" "),t("p",[s._v("é›†ç¾¤æ¨¡å¼çš„ Redis é™¤äº†åŸæœ‰çš„é…ç½®æ–‡ä»¶ä¹‹å¤–"),t("strong",[s._v("åˆåŠ äº†ä¸€ä»½é›†ç¾¤é…ç½®æ–‡ä»¶")]),s._v(". å½“é›†ç¾¤å†…èŠ‚ç‚¹ä¿¡æ¯å‘ç”Ÿå˜åŒ–, å¦‚æ·»åŠ èŠ‚ç‚¹, èŠ‚ç‚¹ä¸‹çº¿, æ•…éšœè½¬ç§»ç­‰. èŠ‚ç‚¹ä¼š"),t("strong",[s._v("è‡ªåŠ¨ä¿å­˜")]),s._v("é›†ç¾¤çŠ¶æ€åˆ°é…ç½®æ–‡ä»¶ä¸­. éœ€è¦æ³¨æ„çš„æ˜¯, Redis "),t("strong",[s._v("è‡ªåŠ¨ç»´æŠ¤é›†ç¾¤é…ç½®æ–‡ä»¶")]),s._v(", ä¸è¦æ‰‹åŠ¨ä¿®æ”¹, é˜²æ­¢èŠ‚ç‚¹é‡å¯æ—¶äº§ç”Ÿé›†ç¾¤ä¿¡æ¯é”™ä¹±.")]),s._v(" "),t("p",[s._v("èŠ‚ç‚¹ 6379 é¦–æ¬¡å¯åŠ¨åç”Ÿæˆé›†ç¾¤é…ç½®å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" data/nodes-6379.conf\ncfb28ef1deee4e0fa78da86abe5d24566744411e "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379 myself,master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" connected\nvars currentEpoch "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lastVoteEpoch "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("æ–‡ä»¶å†…å®¹è®°å½•äº†é›†ç¾¤"),t("strong",[s._v("åˆå§‹çŠ¶æ€")]),s._v(", è¿™é‡Œæœ€é‡è¦çš„æ˜¯"),t("strong",[s._v("èŠ‚ç‚¹ ID")]),s._v(", å®ƒæ˜¯ä¸€ä¸ª 40 ä½ 16 è¿›åˆ¶å­—ç¬¦ä¸², ç”¨äº"),t("strong",[s._v("å”¯ä¸€æ ‡è¯†é›†ç¾¤å†…ä¸€ä¸ªèŠ‚ç‚¹")]),s._v(", ä¹‹åå¾ˆå¤šé›†ç¾¤æ“ä½œéƒ½è¦å€ŸåŠ©äºèŠ‚ç‚¹ ID å®Œæˆ. æ³¨æ„: èŠ‚ç‚¹ ID "),t("strong",[s._v("ä¸åŒäºè¿è¡Œ ID")]),s._v(". èŠ‚ç‚¹ ID åœ¨é›†ç¾¤åˆå§‹åŒ–æ—¶"),t("strong",[s._v("åªåˆ›å»ºä¸€æ¬¡")]),s._v(", èŠ‚ç‚¹é‡å¯æ—¶ä¼šåŠ è½½é›†ç¾¤é…ç½®æ–‡ä»¶è¿›è¡Œ"),t("strong",[s._v("é‡ç”¨")]),s._v(", è€Œ Redis çš„"),t("strong",[s._v("è¿è¡Œ ID æ¯æ¬¡é‡å¯éƒ½ä¼šå˜åŒ–")]),s._v(".")]),s._v(" "),t("p",[s._v("åœ¨èŠ‚ç‚¹ 6380 æ‰§è¡Œ "),t("strong",[s._v("cluster nodes")]),s._v(" å‘½ä»¤è·å–é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" cluster nodes\n8e41673d59c9568aa9d29fb174ce733345b3e8f1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 myself,master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" connected\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("æ¯ä¸ªèŠ‚ç‚¹ç›®å‰åªèƒ½è¯†åˆ«å‡º"),t("strong",[s._v("è‡ªå·±")]),s._v("çš„èŠ‚ç‚¹ä¿¡æ¯. å¦‚æœå¯åŠ¨ 6 ä¸ªèŠ‚ç‚¹, ä½†æ¯ä¸ªèŠ‚ç‚¹å½¼æ­¤å¹¶ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨, éœ€è¦é€šè¿‡"),t("strong",[s._v("èŠ‚ç‚¹æ¡æ‰‹")]),s._v("è®© 6 ä¸ªèŠ‚ç‚¹å½¼æ­¤"),t("strong",[s._v("å»ºç«‹è”ç³»")]),s._v("ä»è€Œç»„æˆä¸€ä¸ªé›†ç¾¤.")]),s._v(" "),t("h5",{attrs:{id:"_2-èŠ‚ç‚¹æ¡æ‰‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-èŠ‚ç‚¹æ¡æ‰‹"}},[s._v("#")]),s._v(" 2.èŠ‚ç‚¹æ¡æ‰‹")]),s._v(" "),t("p",[s._v("èŠ‚ç‚¹æ¡æ‰‹æ˜¯æŒ‡ä¸€æ‰¹è¿è¡Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹çš„èŠ‚ç‚¹é€šè¿‡ "),t("strong",[s._v("Gossip åè®®")]),s._v("å½¼æ­¤é€šä¿¡, è¾¾åˆ°æ„ŸçŸ¥å¯¹æ–¹çš„è¿‡ç¨‹. èŠ‚ç‚¹æ¡æ‰‹æ˜¯é›†ç¾¤å½¼æ­¤é€šä¿¡çš„ç¬¬ä¸€æ­¥, ç”±"),t("strong",[s._v("å®¢æˆ·ç«¯")]),s._v("å‘èµ·å‘½ä»¤: "),t("strong",[s._v("cluster meet {ip} {port}")]),s._v(" . ä¸¤ä¸ªç»“ç‚¹ç›´æ¥å…ˆç”¨ "),t("strong",[s._v("meet")]),s._v(" æ¶ˆæ¯è¿›è¡Œæ¡æ‰‹(æˆåŠŸåå›å¤ pong æ¶ˆæ¯), ç„¶åä½¿ç”¨ "),t("strong",[s._v("ping/pong")]),s._v(" æ¶ˆæ¯ç»´æŠ¤"),t("strong",[s._v("æ­£å¸¸é€šä¿¡")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523223000635.png",alt:""}})]),s._v(" "),t("p",[s._v("åªéœ€è¦åœ¨é›†ç¾¤å†…"),t("strong",[s._v("ä»»æ„èŠ‚ç‚¹")]),s._v("ä¸Šæ‰§è¡Œ cluster meet å‘½ä»¤"),t("strong",[s._v("åŠ å…¥æ–°èŠ‚ç‚¹")]),s._v(", æ¡æ‰‹çŠ¶æ€ä¼šé€šè¿‡"),t("strong",[s._v("æ¶ˆæ¯")]),s._v("åœ¨é›†ç¾¤å†…"),t("strong",[s._v("ä¼ æ’­")]),s._v(", è¿™æ ·å…¶ä»–èŠ‚ç‚¹ä¼š"),t("strong",[s._v("è‡ªåŠ¨å‘ç°æ–°èŠ‚ç‚¹å¹¶å‘èµ·æ¡æ‰‹æµç¨‹")]),s._v(".")]),s._v(" "),t("p",[s._v("æœ€åæ‰§è¡Œ cluster nodes å‘½ä»¤ç¡®è®¤ 6 ä¸ªèŠ‚ç‚¹éƒ½å½¼æ­¤æ„ŸçŸ¥å¹¶ç»„æˆé›†ç¾¤:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" cluster nodes\n4fa7eac4080f0b667ffeab9b87841da49b84a6e4 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6384 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468073975551")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" connected\ncfb28ef1deee4e0fa78da86abe5d24566744411e "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379 myself,master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" connected\nbe9485a6a729fc98c5151374bc30277e89a461d8 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6383 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468073978579")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" connected\n40622f9e7adc8ebd77fca0de9edfe691cb8a74fb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6382 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468073980598")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected\n8e41673d59c9568aa9d29fb174ce733345b3e8f1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468073974541")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" connected\n40b8d09d44294d2e23c7c768efc8fcd153446746 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468073979589")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("èŠ‚ç‚¹å»ºç«‹æ¡æ‰‹ä¹‹åé›†ç¾¤"),t("strong",[s._v("è¿˜ä¸èƒ½æ­£å¸¸å·¥ä½œ")]),s._v(", è¿™æ—¶é›†ç¾¤å¤„äº"),t("strong",[s._v("ä¸‹çº¿çŠ¶æ€")]),s._v(", æ‰€æœ‰æ•°æ®è¯»å†™éƒ½è¢«ç¦æ­¢. å› ä¸ºç›®å‰æ‰€æœ‰çš„"),t("strong",[s._v("æ§½")]),s._v("æ²¡æœ‰åˆ†é…åˆ°èŠ‚ç‚¹, å› æ­¤"),t("strong",[s._v("é›†ç¾¤æ— æ³•å®Œæˆæ§½åˆ°èŠ‚ç‚¹çš„æ˜ å°„")]),s._v(". åªæœ‰å½“ 16384 ä¸ªæ§½"),t("strong",[s._v("å…¨éƒ¨åˆ†é…")]),s._v("ç»™èŠ‚ç‚¹å, é›†ç¾¤æ‰è¿›å…¥"),t("strong",[s._v("åœ¨çº¿çŠ¶æ€")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_3-åˆ†é…æ•°æ®æ§½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-åˆ†é…æ•°æ®æ§½"}},[s._v("#")]),s._v(" 3.åˆ†é…æ•°æ®æ§½")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤æŠŠæ‰€æœ‰çš„æ•°æ®æ˜ å°„åˆ° "),t("strong",[s._v("16384 ä¸ªæ§½")]),s._v("ä¸­. æ¯ä¸ª key ä¼šæ˜ å°„ä¸ºä¸€ä¸ª"),t("strong",[s._v("å›ºå®šçš„æ§½")]),s._v(", åªæœ‰å½“èŠ‚ç‚¹åˆ†é…äº†æ§½, æ‰èƒ½å“åº”ä¸è¿™äº›æ§½å…³è”çš„é”®å‘½ä»¤.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523224414128.png",alt:""}})]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤ä¸­å†…ç½®äº† "),t("strong",[s._v("16384")]),s._v(" ä¸ªå“ˆå¸Œæ§½. å½“å®¢æˆ·ç«¯è¿æ¥åˆ° Redis é›†ç¾¤å, ä¼šåŒæ—¶å¾—åˆ°ä¸€ä»½å…³äºè¿™ä¸ª"),t("strong",[s._v("é›†ç¾¤çš„é…ç½®ä¿¡æ¯")]),s._v(", å½“å®¢æˆ·ç«¯å…·ä½“å¯¹æŸä¸€ä¸ª "),t("strong",[s._v("key å€¼")]),s._v("è¿›è¡Œæ“ä½œæ—¶, ä¼šè®¡ç®—å‡ºå®ƒçš„ä¸€ä¸ª "),t("strong",[s._v("Hash å€¼")]),s._v(", ç„¶åæŠŠ"),t("strong",[s._v("ç»“æœå¯¹ 16384 æ±‚ä½™æ•°")]),s._v(", è¿™æ ·æ¯ä¸ª key éƒ½ä¼š"),t("strong",[s._v("å¯¹åº”ä¸€ä¸ªç¼–å·åœ¨ 0-16383 ä¹‹é—´çš„å“ˆå¸Œæ§½")]),s._v(", Redis ä¼šæ ¹æ®èŠ‚ç‚¹æ•°é‡ "),t("strong",[s._v("å¤§è‡´å‡ç­‰")]),s._v(" çš„å°†å“ˆå¸Œæ§½æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹.")]),s._v(" "),t("p",[s._v("é€šè¿‡ "),t("strong",[s._v("cluster addslots")]),s._v(" å‘½ä»¤ä¸ºèŠ‚ç‚¹åˆ†é…æ§½. è¿™é‡Œåˆ©ç”¨ bash ç‰¹æ€§æ‰¹é‡è®¾ç½®æ§½, å‘½ä»¤å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" cluster addslots "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".5461"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n$ redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(" cluster addslots "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5462")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".10922"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n$ redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" cluster addslots "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".16383"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("æŠŠ 16384 ä¸ª slot å¹³å‡åˆ†é…ç»™ 6379, 6380, 6381 "),t("strong",[s._v("ä¸‰ä¸ª")]),s._v("èŠ‚ç‚¹. æ‰§è¡Œ cluster info æŸ¥çœ‹é›†ç¾¤çŠ¶æ€, å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" cluster info\ncluster_state:ok\ncluster_slots_assigned:16384\ncluster_slots_ok:16384\ncluster_slots_pfail:0\ncluster_slots_fail:0\ncluster_known_nodes:6\ncluster_size:3\ncluster_current_epoch:5\ncluster_my_epoch:0\ncluster_stats_messages_sent:4874\ncluster_stats_messages_received:4726\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("å½“å‰é›†ç¾¤çŠ¶æ€æ˜¯ OK, é›†ç¾¤è¿›å…¥"),t("strong",[s._v("åœ¨çº¿çŠ¶æ€")]),s._v(". æ‰€æœ‰çš„æ§½éƒ½å·²ç»åˆ†é…ç»™èŠ‚ç‚¹, æ‰§è¡Œ cluster nodes å‘½ä»¤å¯ä»¥çœ‹åˆ°"),t("strong",[s._v("èŠ‚ç‚¹å’Œæ§½çš„åˆ†é…å…³ç³»")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" cluster nodes\n4fa7eac4080f0b667ffeab9b87841da49b84a6e4 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6384 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468076240123")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" connected\ncfb28ef1deee4e0fa78da86abe5d24566744411e "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379 myself,master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" connected\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-5461\nbe9485a6a729fc98c5151374bc30277e89a461d8 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6383 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468076239622")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" connected\n40622f9e7adc8ebd77fca0de9edfe691cb8a74fb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6382 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468076240628")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected\n8e41673d59c9568aa9d29fb174ce733345b3e8f1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468076237606")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" connected\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5462")]),s._v("-10922\n40b8d09d44294d2e23c7c768efc8fcd153446746 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1468076238612")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v("-16383\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("ç›®å‰è¿˜æœ‰ä¸‰ä¸ªèŠ‚ç‚¹"),t("strong",[s._v("æ²¡æœ‰ä½¿ç”¨")]),s._v(", ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„é›†ç¾¤, æ¯ä¸ªè´Ÿè´£"),t("strong",[s._v("å¤„ç†æ§½çš„èŠ‚ç‚¹åº”è¯¥å…·æœ‰ä»èŠ‚ç‚¹")]),s._v(", ä¿è¯å½“å®ƒå‡ºç°æ•…éšœæ—¶å¯ä»¥"),t("strong",[s._v("è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»")]),s._v(". é›†ç¾¤æ¨¡å¼ä¸‹, Reids èŠ‚ç‚¹è§’è‰²åˆ†ä¸º"),t("strong",[s._v("ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹")]),s._v(". é¦–æ¬¡å¯åŠ¨çš„èŠ‚ç‚¹å’Œ"),t("strong",[s._v("è¢«åˆ†é…æ§½çš„èŠ‚ç‚¹éƒ½æ˜¯ä¸»èŠ‚ç‚¹")]),s._v(", ä»èŠ‚ç‚¹è´Ÿè´£"),t("strong",[s._v("å¤åˆ¶")]),s._v("ä¸»èŠ‚ç‚¹æ§½ä¿¡æ¯å’Œç›¸å…³çš„æ•°æ®.")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ "),t("strong",[s._v("cluster replicate {nodeId}")]),s._v("  å‘½ä»¤è®©ä¸€ä¸ªèŠ‚ç‚¹æˆä¸º"),t("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(". å…¶ä¸­å‘½ä»¤æ‰§è¡Œå¿…é¡»åœ¨å¯¹åº”çš„"),t("strong",[s._v("ä»èŠ‚ç‚¹ä¸Š")]),s._v("æ‰§è¡Œ, nodeId æ˜¯è¦å¤åˆ¶ä¸»èŠ‚ç‚¹çš„èŠ‚ç‚¹ ID, å‘½ä»¤å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("cluster replicate cfb28ef1deee4e0fa78da86abe5d24566744411e\nOK\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v("cluster replicate 8e41673d59c9568aa9d29fb174ce733345b3e8f1\nOK\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v(">")]),s._v("cluster replicate 40b8d09d44294d2e23c7c768efc8fcd153446746\nOK\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("Redis é›†ç¾¤æ¨¡å¼ä¸‹çš„ä¸»ä»å¤åˆ¶ä½¿ç”¨äº†ä¹‹å‰ä»‹ç»çš„ Redis å¤åˆ¶æµç¨‹, ä¾ç„¶"),t("strong",[s._v("æ”¯æŒå…¨é‡å’Œéƒ¨åˆ†å¤åˆ¶. "),t("strong",[s._v("â€‹"),t("strong",[t("strong",[s._v("å¤åˆ¶å®Œæˆå, æ•´ä¸ªé›†ç¾¤çš„")])]),s._v("â€‹")]),s._v("ç»“æ„")]),s._v("å¦‚ä¸‹å›¾æ‰€ç¤º.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523224624184.png",alt:""}})]),s._v(" "),t("p",[s._v("ä¸Šè¿°å³ä¾ç…§ Redis åè®®"),t("strong",[s._v("æ‰‹åŠ¨å»ºç«‹")]),s._v("ä¸€ä¸ªé›†ç¾¤. å®ƒç”± 6 ä¸ªèŠ‚ç‚¹æ„æˆ, 3 ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£å¤„ç†æ§½å’Œç›¸å…³æ•°æ®, 3 ä¸ªä»èŠ‚ç‚¹è´Ÿè´£æ•…éšœè½¬ç§». æ‰‹åŠ¨æ¯”è¾ƒå¤æ‚, Redis å®˜æ–¹æä¾›äº† "),t("strong",[s._v("redis-trib.rb")]),s._v(" å·¥å…·æ–¹ä¾¿å¿«é€Ÿæ­å»ºé›†ç¾¤, ç”¨è¿™ä¸ªå·¥å…·éœ€è¦å®‰è£… Ruby ç¯å¢ƒ.")]),s._v(" "),t("h5",{attrs:{id:"_4-é›†ç¾¤æ­å»ºå®Œæ•´ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-é›†ç¾¤æ­å»ºå®Œæ•´ç¤ºä¾‹"}},[s._v("#")]),s._v(" 4.é›†ç¾¤æ­å»ºå®Œæ•´ç¤ºä¾‹")]),s._v(" "),t("p",[t("strong",[s._v("(1)ç¬¬ä¸€æ­¥: åˆ›å»ºé›†ç¾¤èŠ‚ç‚¹é…ç½®æ–‡ä»¶")])]),s._v(" "),t("p",[s._v("åˆ›å»ºä¸€ä¸ªåä¸º "),t("strong",[s._v("redis-cluster")]),s._v(" çš„ç›®å½•:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ~/Desktop/redis-cluster\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ç„¶ååˆ›å»º"),t("strong",[s._v("å…­ä¸ª")]),s._v("é…ç½®æ–‡ä»¶, åˆ†åˆ«å‘½åä¸º: "),t("strong",[s._v("redis_7000.conf/redis_7001.conf.....redis_7005.conf")]),s._v(", ç„¶åæ ¹æ®ä¸åŒçš„ç«¯å£å·ä¿®æ”¹å¯¹åº”çš„ç«¯å£å€¼å°±å¥½äº†:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åå°æ‰§è¡Œ")]),s._v("\ndaemonize "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç«¯å£å·")]),s._v("\nport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸ºæ¯ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹æŒ‡å®šä¸€ä¸ª pid_file")]),s._v("\npidfile ~/Desktop/redis-cluster/redis_7000.pid\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¯åŠ¨é›†ç¾¤æ¨¡å¼")]),s._v("\ncluster-enabled "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¯ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶, è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸èƒ½æ‰‹åŠ¨ç¼–è¾‘çš„. ç¡®ä¿æ¯ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ä¸é€š")]),s._v("\ncluster-config-file nodes-7000.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é›†ç¾¤èŠ‚ç‚¹çš„è¶…æ—¶æ—¶é—´, å•ä½: ms, è¶…æ—¶åé›†ç¾¤ä¼šè®¤ä¸ºè¯¥èŠ‚ç‚¹å¤±è´¥")]),s._v("\ncluster-node-timeout "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æœ€åå°† appendonly æ”¹æˆ yes(AOF æŒä¹…åŒ–)")]),s._v("\nappendonly "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("è®°å¾—æŠŠå¯¹åº”ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­"),t("strong",[s._v("æ ¹ç«¯å£å¯¹åº”çš„é…ç½®éƒ½ä¿®æ”¹æ‰")]),s._v("(port/ pidfile/ cluster-config-file).")]),s._v(" "),t("p",[t("strong",[s._v("(2)ç¬¬äºŒæ­¥: åˆ†åˆ«å¯åŠ¨6ä¸ªRediså®ä¾‹")])]),s._v(" "),t("p",[s._v("æ ¹æ® 6 ä¸ªé…ç½®æ–‡ä»¶å¯åŠ¨ 6 ä¸ª Redis å®ä¾‹.")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ redis-server ~/redis-cluster/redis_7000.conf\n$ redis-server ~/redis-cluster/redis_7001.conf\n$ redis-server ~/redis-cluster/redis_7002.conf\n$ redis-server ~/redis-cluster/redis_7003.conf\n$ redis-server ~/redis-cluster/redis_7004.conf\n$ redis-server ~/redis-cluster/redis_7005.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("æ‰§è¡Œ "),t("strong",[s._v("ps -ef | grep redis")]),s._v(" æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/7896890-452c3152054c36f1.png",alt:""}})]),s._v(" "),t("p",[s._v("å¯ä»¥çœ‹åˆ° 6 ä¸ª Redis èŠ‚ç‚¹éƒ½ä»¥é›†ç¾¤æ–¹å¼æˆåŠŸå¯åŠ¨, "),t("strong",[s._v("ä½†ç°åœ¨æ¯ä¸ªèŠ‚ç‚¹è¿˜å¤„äºç‹¬ç«‹çš„çŠ¶æ€")]),s._v(", ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æ¯ä¸€ä¸ªéƒ½å„è‡ªæˆäº†ä¸€ä¸ªé›†ç¾¤, è¿˜æ²¡æœ‰äº’ç›¸è”ç³»èµ·æ¥, éœ€è¦æ‰‹åŠ¨åœ°æŠŠå®ƒä»¬ä¹‹é—´å»ºç«‹èµ·è”ç³».")]),s._v(" "),t("p",[t("strong",[s._v("(3)ç¬¬ä¸‰æ­¥: å»ºç«‹é›†ç¾¤")])]),s._v(" "),t("p",[s._v("æ‰§è¡Œä¸‹åˆ—å‘½ä»¤:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cluster")]),s._v(" create --cluster-replicas "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7000 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7001 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7002 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7003 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7004 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7005\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™é‡Œ  "),t("strong",[s._v("--replicas 1")]),s._v(" çš„æ„æ€æ˜¯: å¸Œæœ›ä¸ºé›†ç¾¤ä¸­çš„"),t("strong",[s._v("æ¯ä¸ªä¸»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªä»èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),t("p",[s._v("è§‚å¯Ÿè¾“å‡º:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/7896890-d5ab644e76e9cc87.png",alt:""}})]),s._v(" "),t("p",[s._v("çœ‹åˆ°  "),t("strong",[s._v("[OK]")]),s._v("  å°±è¡¨ç¤ºé›†ç¾¤å·²ç»æ­å»ºæˆåŠŸäº†, è¿™é‡ŒæˆåŠŸåˆ›å»ºäº†"),t("strong",[s._v("ä¸‰ä¸»ä¸‰ä»")]),s._v("çš„é›†ç¾¤.")]),s._v(" "),t("p",[t("strong",[s._v("(4)ç¬¬å››æ­¥: éªŒè¯é›†ç¾¤")])]),s._v(" "),t("p",[s._v("å…ˆä½¿ç”¨ "),t("strong",[s._v("redis-cli")]),s._v(" ä»»æ„è¿æ¥ä¸€ä¸ªèŠ‚ç‚¹:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis-cli "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("-c è¡¨ç¤ºé›†ç¾¤æ¨¡å¼; -h æŒ‡å®š ip åœ°å€; -p æŒ‡å®šç«¯å£.")])])]),s._v(" "),t("p",[s._v('ç„¶åéšä¾¿ "set" ä¸€äº›å€¼è§‚å¯Ÿæ§åˆ¶å°è¾“å…¥:')]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:700"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" SET name wmyskxz\n-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5798")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7001\nOK\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("å¯ä»¥çœ‹åˆ° Redis è‡ªåŠ¨è¿›è¡Œäº† "),t("strong",[s._v("Redirected æ“ä½œ")]),s._v("è·³è½¬åˆ°äº† 7001 è¿™ä¸ªå®ä¾‹ä¸Š.")]),s._v(" "),t("p",[s._v("å†ä½¿ç”¨ "),t("strong",[s._v("cluster info(æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯) å’Œ cluster nodes")]),s._v("(æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨) æ¥åˆ†åˆ«çœ‹çœ‹(ä»»æ„èŠ‚ç‚¹è¾“å…¥å‡å¯):")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:700"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" CLUSTER INFO\ncluster_state:ok\ncluster_slots_assigned:16384\ncluster_slots_ok:16384\ncluster_slots_pfail:0\ncluster_slots_fail:0\ncluster_known_nodes:6\ncluster_size:3\ncluster_current_epoch:6\ncluster_my_epoch:2\ncluster_stats_messages_ping_sent:1365\ncluster_stats_messages_pong_sent:1358\ncluster_stats_messages_meet_sent:4\ncluster_stats_messages_sent:2727\ncluster_stats_messages_ping_received:1357\ncluster_stats_messages_pong_received:1369\ncluster_stats_messages_meet_received:1\ncluster_stats_messages_received:2727\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:700"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" CLUSTER NODES\n56a04742f36c6e84968cae871cd438935081e86f "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7003@17003 slave 4ec8c022e9d546c9b51deb9d85f6cf867bf73db6 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428884000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" connected\n4ec8c022e9d546c9b51deb9d85f6cf867bf73db6 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7000@17000 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428884000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" connected "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-5460\ne2539c4398b8258d3f9ffa714bd778da107cb2cd "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7005@17005 slave a3406db9ae7144d17eb7df5bffe8b70bb5dd06b8 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428885222")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" connected\nd31cd1f423ab1e1849cac01ae927e4b6950f55d9 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7004@17004 slave 236cefaa9cdc295bc60a5bd1aed6a7152d4f384d "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428884209")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" connected\n236cefaa9cdc295bc60a5bd1aed6a7152d4f384d "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7001@17001 myself,master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428882000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v("-10922\na3406db9ae7144d17eb7df5bffe8b70bb5dd06b8 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7002@17002 master - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1584428884000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v("-16383\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h4",{attrs:{id:"é›†ç¾¤å®¢æˆ·ç«¯æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤å®¢æˆ·ç«¯æ“ä½œ"}},[s._v("#")]),s._v(" é›†ç¾¤å®¢æˆ·ç«¯æ“ä½œ")]),s._v(" "),t("h5",{attrs:{id:"_1-javaæ“ä½œé›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-javaæ“ä½œé›†ç¾¤"}},[s._v("#")]),s._v(" 1.Javaæ“ä½œé›†ç¾¤")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ Jedis æ“ä½œé›†ç¾¤çš„ç¤ºä¾‹ä»£ç :")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisClusterTest")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPoolConfig")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPoolConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMaxTotal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMaxIdle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMinIdle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" jedisClusterNode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.61"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.62"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.63"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.61"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8004")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.62"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.63"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8006")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),s._v(" jedisCluster "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// connectionTimeout: æŒ‡çš„æ˜¯è¿æ¥ä¸€ä¸ªurlçš„è¿æ¥ç­‰å¾…æ—¶é—´")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// soTimeout: æŒ‡çš„æ˜¯è¿æ¥ä¸Šä¸€ä¸ªurl, è·å–responseçš„è¿”å›ç­‰å¾…æ—¶é—´")]),s._v("\n            jedisCluster "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisClusterNode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zhuge"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisCluster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zhuge"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisCluster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisCluster "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                jedisCluster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("p",[s._v("Spring Boot æ“ä½œé›†ç¾¤, å¼•å…¥ä¾èµ–:")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-data-redis"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.commons"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("commons-pool2"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("é¡¹ç›®é…ç½®:")]),s._v(" "),t("div",{staticClass:"language-YML line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("database")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.0.61"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("192.168.0.62"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("192.168.0.63"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8003")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("192.168.0.61"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8004")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("192.168.0.62"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("192.168.0.63"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8006")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("lettuce")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pool")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-idle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("min-idle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-wait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("ç¤ºä¾‹ä»£ç :")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Logger")]),s._v(" logger "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoggerFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexController")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisTemplate")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/test-cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nano"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"666"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nano"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h4",{attrs:{id:"ç»“ç‚¹é€šä¿¡ä¸gossipåè®®ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“ç‚¹é€šä¿¡ä¸gossipåè®®ğŸŒŸ"}},[s._v("#")]),s._v(" ç»“ç‚¹é€šä¿¡ä¸Gossipåè®®ğŸŒŸ")]),s._v(" "),t("h5",{attrs:{id:"_1-gossipåè®®ä¸èŠ‚ç‚¹é—´é€šä¿¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-gossipåè®®ä¸èŠ‚ç‚¹é—´é€šä¿¡"}},[s._v("#")]),s._v(" 1.Gossipåè®®ä¸èŠ‚ç‚¹é—´é€šä¿¡")]),s._v(" "),t("p",[s._v("åœ¨åˆ†å¸ƒå¼å­˜å‚¨ä¸­éœ€è¦æä¾›ç»´æŠ¤"),t("strong",[s._v("èŠ‚ç‚¹å…ƒæ•°æ®ä¿¡æ¯")]),s._v("çš„æœºåˆ¶, æ‰€è°“"),t("strong",[s._v("å…ƒæ•°æ®")]),s._v("æ˜¯æŒ‡: èŠ‚ç‚¹è´Ÿè´£å“ªäº›æ•°æ®, æ˜¯å¦å‡ºç°æ•…éšœç­‰çŠ¶æ€ä¿¡æ¯. å¸¸è§çš„å…ƒæ•°æ®ç»´æŠ¤æ–¹å¼åˆ†ä¸º: "),t("strong",[s._v("é›†ä¸­å¼å’Œ P2P æ–¹å¼")]),s._v(".")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤é‡‡ç”¨ P2P çš„ "),t("strong",[s._v("Gossip(æµè¨€)åè®®")]),s._v(", Gossip åè®®å·¥ä½œåŸç†å°±æ˜¯"),t("strong",[s._v("èŠ‚ç‚¹å½¼æ­¤ä¸æ–­é€šä¿¡äº¤æ¢ä¿¡æ¯, ä¸€æ®µæ—¶é—´åæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä¼šçŸ¥é“é›†ç¾¤å®Œæ•´çš„ä¿¡æ¯, è¿™ç§æ–¹å¼ç±»ä¼¼æµè¨€ä¼ æ’­")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523225023888.png",alt:""}})]),s._v(" "),t("p",[s._v("Gossip é€šä¿¡è¿‡ç¨‹ç¤ºæ„å›¾:")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240106223814-j0jibue.png",alt:"image"}})]),s._v(" "),t("p",[s._v("Gossip åè®®çš„ä¼˜ç‚¹åœ¨äºå…ƒæ•°æ®çš„æ›´æ–°æ¯”è¾ƒåˆ†æ•£, ä¸æ˜¯é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹, æ›´æ–°è¯·æ±‚ä¼šé™†é™†ç»­ç»­, æ‰“åˆ°æ‰€æœ‰èŠ‚ç‚¹ä¸Šå»æ›´æ–°, æœ‰ä¸€å®šçš„å»¶æ—¶, é™ä½äº†å‹åŠ›; ç¼ºç‚¹åœ¨äºå…ƒæ•°æ®æ›´æ–°æœ‰å»¶æ—¶å¯èƒ½å¯¼è‡´é›†ç¾¤çš„ä¸€äº›æ“ä½œä¼šæœ‰ä¸€äº›æ»å.")]),s._v(" "),t("p",[s._v("é€šä¿¡è¿‡ç¨‹è¯´æ˜:")]),s._v(" "),t("ul",[t("li",[s._v("é›†ç¾¤ä¸­çš„"),t("strong",[s._v("æ¯ä¸ªèŠ‚ç‚¹")]),s._v("éƒ½ä¼šå•ç‹¬å¼€è¾Ÿä¸€ä¸ª "),t("strong",[s._v("TCP")]),s._v(" é€šé“, ç”¨äºèŠ‚ç‚¹ä¹‹é—´å½¼æ­¤é€šä¿¡, é€šä¿¡ç«¯å£å·åœ¨åŸºç¡€ç«¯å£ä¸ŠåŠ  "),t("strong",[s._v("10000")]),s._v(".")]),s._v(" "),t("li",[s._v("æ¯ä¸ªèŠ‚ç‚¹åœ¨"),t("strong",[s._v("å›ºå®šå‘¨æœŸ")]),s._v("å†…é€šè¿‡ç‰¹å®šè§„åˆ™é€‰æ‹©å‡ ä¸ªèŠ‚ç‚¹å‘é€ "),t("strong",[s._v("ping æ¶ˆæ¯")]),s._v(".")]),s._v(" "),t("li",[s._v("æ¥æ”¶åˆ° ping æ¶ˆæ¯çš„èŠ‚ç‚¹ç”¨ "),t("strong",[s._v("pong æ¶ˆæ¯")]),s._v("ä½œä¸ºå“åº”.")])]),s._v(" "),t("p",[s._v("é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹é€šè¿‡ä¸€å®šè§„åˆ™æŒ‘é€‰è¦é€šä¿¡çš„èŠ‚ç‚¹, æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½çŸ¥é“å…¨éƒ¨èŠ‚ç‚¹, ä¹Ÿå¯èƒ½ä»…çŸ¥é“éƒ¨åˆ†èŠ‚ç‚¹, åªè¦è¿™äº›èŠ‚ç‚¹å½¼æ­¤å¯ä»¥æ­£å¸¸é€šä¿¡, "),t("strong",[s._v("æœ€ç»ˆå®ƒä»¬ä¼šè¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€. "),t("strong",[s._v("â€‹"),t("strong",[t("strong",[s._v("å½“èŠ‚ç‚¹å‡ºæ•…éšœ, æ–°èŠ‚ç‚¹åŠ å…¥, ä¸»ä»è§’è‰²å˜åŒ–, æ§½ä¿¡æ¯å˜æ›´ç­‰äº‹ä»¶å‘ç”Ÿæ—¶, é€šè¿‡")])]),s._v("â€‹")]),s._v("ä¸æ–­çš„ ping/pong æ¶ˆæ¯é€šä¿¡")]),s._v(", ç»è¿‡ä¸€æ®µæ—¶é—´åæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä¼šçŸ¥é“"),t("strong",[s._v("æ•´ä¸ªé›†ç¾¤å…¨éƒ¨èŠ‚ç‚¹çš„æœ€æ–°çŠ¶æ€")]),s._v(", ä»è€Œè¾¾åˆ°"),t("strong",[s._v("é›†ç¾¤çŠ¶æ€åŒæ­¥")]),s._v("çš„ç›®çš„.")]),s._v(" "),t("blockquote",[t("p",[s._v("ç½‘ç»œæŠ–åŠ¨")])]),s._v(" "),t("p",[s._v("çœŸå®ä¸–ç•Œçš„æœºæˆ¿ç½‘ç»œç»å¸¸ä¼šå‘ç”Ÿå„ç§å„æ ·çš„é—®é¢˜. æ¯”å¦‚ç½‘ç»œæŠ–åŠ¨å°±æ˜¯å¸¸è§çš„ä¸€ç§ç°è±¡, çªç„¶ä¹‹é—´éƒ¨åˆ†è¿æ¥å˜å¾—ä¸å¯è®¿é—®, ç„¶åå¾ˆå¿«åˆæ¢å¤æ­£å¸¸. ä¸ºè§£å†³è¿™ç§é—®é¢˜, Redis Cluster æä¾›äº†ä¸€ç§é€‰é¡¹ "),t("strong",[s._v("cluster-node-timeout")]),s._v(", è¡¨ç¤ºå½“æŸä¸ªèŠ‚ç‚¹æŒç»­ timeout çš„æ—¶é—´å¤±è”æ—¶, æ‰å¯ä»¥è®¤å®šè¯¥èŠ‚ç‚¹å‡ºç°æ•…éšœ, éœ€è¦è¿›è¡Œä¸»ä»åˆ‡æ¢. å¦‚æœæ²¡æœ‰è¿™ä¸ªé€‰é¡¹, ç½‘ç»œæŠ–åŠ¨å¯èƒ½ä¼šå¯¼è‡´ä¸»ä»é¢‘ç¹åˆ‡æ¢(æ•°æ®çš„é‡æ–°å¤åˆ¶).")]),s._v(" "),t("blockquote",[t("p",[s._v("é›†ç¾¤è„‘è£‚æ•°æ®ä¸¢å¤±é—®é¢˜")])]),s._v(" "),t("p",[s._v("ç½‘ç»œæŠ–åŠ¨å¯èƒ½å¯¼è‡´è„‘è£‚é—®é¢˜. Redis é›†ç¾¤æ²¡æœ‰è¿‡åŠæœºåˆ¶ä¼šæœ‰è„‘è£‚é—®é¢˜, ç½‘ç»œåˆ†åŒºå¯¼è‡´è„‘è£‚åå¤šä¸ªä¸»èŠ‚ç‚¹å¯¹å¤–æä¾›å†™æœåŠ¡, ä¸€æ—¦ç½‘ç»œåˆ†åŒºæ¢å¤, ä¼šå°†å…¶ä¸­ä¸€ä¸ªä¸»èŠ‚ç‚¹å˜ä¸ºä»èŠ‚ç‚¹, è¿™æ—¶ä¼šæœ‰å¤§é‡æ•°æ®ä¸¢å¤±.")]),s._v(" "),t("p",[s._v("è§„é¿æ–¹æ³•å¯ä»¥åœ¨ Redis é…ç½®é‡ŒåŠ ä¸Šå‚æ•°(è¿™ç§æ–¹æ³•ä¸å¯èƒ½ç™¾åˆ†ç™¾é¿å…æ•°æ®ä¸¢å¤±, å‚è€ƒé›†ç¾¤ leader é€‰ä¸¾æœºåˆ¶):")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("min"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("replicas"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("write "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("min-replicas-to-write")]),s._v(" å‚æ•°æŒ‡çš„æ˜¯å†™æ•°æ®æˆåŠŸæœ€å°‘åŒæ­¥çš„ slave æ•°é‡, è¿™ä¸ªæ•°é‡å¯ä»¥æ¨¡ä»¿å¤§äºåŠæ•°æœºåˆ¶é…ç½®, æ¯”å¦‚é›†ç¾¤æ€»å…±ä¸‰ä¸ªèŠ‚ç‚¹å¯ä»¥é…ç½® 1, åŠ ä¸Š leader å°±æ˜¯ 2, è¶…è¿‡äº†åŠæ•°. è¿™ä¸ªé…ç½®åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå½±å“é›†ç¾¤çš„å¯ç”¨æ€§, æ¯”å¦‚ slave è¦æ˜¯å°‘äº 1 ä¸ª, è¿™ä¸ªé›†ç¾¤å°±ç®— leader æ­£å¸¸ä¹Ÿä¸èƒ½æä¾›æœåŠ¡äº†, éœ€è¦å…·ä½“åœºæ™¯æƒè¡¡é€‰æ‹©.")]),s._v(" "),t("h5",{attrs:{id:"_2-gossipæ¶ˆæ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-gossipæ¶ˆæ¯"}},[s._v("#")]),s._v(" 2.Gossipæ¶ˆæ¯")]),s._v(" "),t("p",[s._v("Gossip åè®®çš„ä¸»è¦èŒè´£å°±æ˜¯"),t("strong",[s._v("ä¿¡æ¯äº¤æ¢")]),s._v(". ä¿¡æ¯äº¤æ¢çš„è½½ä½“å°±æ˜¯èŠ‚ç‚¹å½¼æ­¤å‘é€çš„ Gossip æ¶ˆæ¯. å¸¸ç”¨çš„ Gossip æ¶ˆæ¯ç±»å‹å¯åˆ†ä¸º: "),t("strong",[s._v("ping æ¶ˆæ¯, pong æ¶ˆæ¯, meet æ¶ˆæ¯, fail æ¶ˆæ¯")]),s._v("ç­‰.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523225127890.png",alt:""}})]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("meet æ¶ˆæ¯")]),s._v(": ç”¨äºé€šçŸ¥"),t("strong",[s._v("æ–°èŠ‚ç‚¹")]),s._v("åŠ å…¥. æŸä¸ªèŠ‚ç‚¹å‘é€ meet ç»™æ–°åŠ å…¥çš„èŠ‚ç‚¹, è®©æ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä¸­, ç„¶åæ–°èŠ‚ç‚¹å°±ä¼šå¼€å§‹ä¸å…¶ä»–èŠ‚ç‚¹è¿›è¡Œé€šä¿¡.")]),s._v(" "),t("li",[t("strong",[s._v("ping æ¶ˆæ¯")]),s._v(": ç”¨äºæ£€æµ‹èŠ‚ç‚¹"),t("strong",[s._v("æ˜¯å¦åœ¨çº¿å’Œäº¤æ¢å½¼æ­¤çŠ¶æ€")]),s._v("ä¿¡æ¯. ping æ¶ˆæ¯å‘é€"),t("strong",[s._v("å°è£…")]),s._v("äº†è‡ªèº«èŠ‚ç‚¹å’Œéƒ¨åˆ†å…¶ä»–èŠ‚ç‚¹çš„çŠ¶æ€æ•°æ®.")]),s._v(" "),t("li",[t("strong",[s._v("pong æ¶ˆæ¯")]),s._v(": å½“æ¥æ”¶åˆ° ping, meet æ¶ˆæ¯æ—¶, ä½œä¸ºå“åº”"),t("strong",[s._v("æ¶ˆæ¯å›å¤")]),s._v("ç»™å‘é€æ–¹ç¡®è®¤æ¶ˆæ¯æ­£å¸¸é€šä¿¡. ä¹Ÿå¯ä»¥ç”¨äºä¿¡æ¯å¹¿æ’­å’Œæ›´æ–°.")]),s._v(" "),t("li",[t("strong",[s._v("fail æ¶ˆæ¯")]),s._v(": å½“èŠ‚ç‚¹åˆ¤å®šé›†ç¾¤å†…å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸‹çº¿æ—¶, ä¼šå‘é›†ç¾¤å†…å¹¿æ’­ä¸€ä¸ª fail æ¶ˆæ¯.")])]),s._v(" "),t("p",[s._v("æ‰€æœ‰çš„æ¶ˆæ¯æ ¼å¼åˆ’åˆ†ä¸º: "),t("strong",[s._v("æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“")]),s._v(". æ¶ˆæ¯å¤´åŒ…å«å‘é€èŠ‚ç‚¹è‡ªèº«çŠ¶æ€æ•°æ®, æ¥æ”¶èŠ‚ç‚¹æ ¹æ®æ¶ˆæ¯å¤´å°±å¯ä»¥è·å–åˆ°å‘é€èŠ‚ç‚¹çš„ç›¸å…³æ•°æ®.")]),s._v(" "),t("p",[s._v("é›†ç¾¤å†…æ‰€æœ‰çš„æ¶ˆæ¯éƒ½"),t("strong",[s._v("é‡‡ç”¨ç›¸åŒçš„æ¶ˆæ¯å¤´ç»“æ„")]),s._v(" clusterMsg, æ˜¯ä¸€ä¸ª"),t("strong",[s._v("ç»“æ„ä½“")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" clusterMsgData "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** ping,meet,pongæ¶ˆæ¯ä½“ */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** gossipæ¶ˆæ¯ç»“æ„æ•°ç»„ */")]),s._v("\n        clusterMsgDataGossip gossip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" ping"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** FAILæ¶ˆæ¯ä½“ */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        clusterMsgDataFail about"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" fail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("strong",[s._v("æ¶ˆæ¯ä½“")]),s._v(" clusterMsgData å®šä¹‰å‘é€æ¶ˆæ¯çš„"),t("strong",[s._v("æ•°æ®")]),s._v(". é€šè¿‡æ¶ˆæ¯å¤´åˆ¤æ–­æ¶ˆæ¯ç±»å‹å’ŒçŠ¶æ€, é€šè¿‡æ¶ˆæ¯ä½“ä¼ é€æ•°æ®.")]),s._v(" "),t("h4",{attrs:{id:"é›†ç¾¤ä¼¸ç¼©ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤ä¼¸ç¼©ğŸŒŸ"}},[s._v("#")]),s._v(" é›†ç¾¤ä¼¸ç¼©ğŸŒŸ")]),s._v(" "),t("p",[s._v("é›†ç¾¤ä¼¸ç¼©çš„åŸç†å¯ä»¥æŠ½è±¡ä¸º"),t("strong",[s._v("æ§½å’Œå¯¹åº”æ•°æ®åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„çµæ´»ç§»åŠ¨")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_1-é›†ç¾¤æ‰©å®¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é›†ç¾¤æ‰©å®¹"}},[s._v("#")]),s._v(" 1.é›†ç¾¤æ‰©å®¹")]),s._v(" "),t("p",[t("strong",[s._v("é›†ç¾¤æ‰©å®¹")]),s._v("å³éœ€è¦æŠŠå½“å‰çš„èŠ‚ç‚¹çš„"),t("strong",[s._v("æ§½å’Œæ•°æ®åˆ†ä¸€äº›ç»™æ–°çš„èŠ‚ç‚¹")]),s._v("(è¿›è¡Œç§»åŠ¨). è¿‡ç¨‹å¦‚ä¸‹:")]),s._v(" "),t("ul",[t("li",[s._v("å‡†å¤‡æ–°èŠ‚ç‚¹.")]),s._v(" "),t("li",[s._v("åŠ å…¥é›†ç¾¤.")]),s._v(" "),t("li",[s._v("è¿ç§»æ§½å’Œæ•°æ®.")]),s._v(" "),t("li",[s._v("æ·»åŠ ä»èŠ‚ç‚¹.")])]),s._v(" "),t("p",[s._v("æ–°èŠ‚ç‚¹çš„é…ç½®å»ºè®®å’Œé›†ç¾¤å†…çš„èŠ‚ç‚¹é…ç½®ä¿æŒä¸€è‡´, é…ç½®åå¯åŠ¨æ–°èŠ‚ç‚¹å³å¯. æ–°èŠ‚ç‚¹é‡‡ç”¨ "),t("strong",[s._v("cluster meet å‘½ä»¤")]),s._v("åŠ å…¥åˆ°é›†ç¾¤ä¸­. ä¸€æ—¦ä¸é›†ç¾¤ä»»æ„ä¸€ä¸ªå»ºç«‹è”ç³», å„ä¸ªèŠ‚ç‚¹æœ€ç»ˆéƒ½ä¼šæ„ŸçŸ¥.")]),s._v(" "),t("p",[t("strong",[s._v("æ–°åŠ å…¥çš„èŠ‚ç‚¹æ²¡æœ‰åˆ†é…æ§½ä¹Ÿæ˜¯æ— æ³•è¿›è¡Œè¯»å†™çš„")]),s._v(". éœ€è¦è¿ç§»æ§½å’Œæ•°æ®, ç¡®å®šå“ªäº›æ§½éœ€è¦è¿ç§»åˆ°æ–°çš„èŠ‚ç‚¹, ä¿è¯è¿ç§»ä¹‹åå„ä¸ªèŠ‚ç‚¹æ§½çš„æ•°é‡"),t("strong",[s._v("å‡åŒ€")]),s._v(". æ•°æ®è¿ç§»æ˜¯"),t("strong",[s._v("é€ä¸ªæ§½")]),s._v("è¿›è¡Œçš„.")]),s._v(" "),t("p",[s._v("è¿ç§»è¿‡ç¨‹å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1. å¯¹ç›®æ ‡èŠ‚ç‚¹å‘é€ cluster setslot {slot} importing {sourceNodeId} å‘½ä»¤, è®©ç›®æ ‡èŠ‚ç‚¹å‡†å¤‡å¯¼å…¥æ§½çš„æ•°æ®. \n2. å¯¹æºèŠ‚ç‚¹å‘é€ cluster setslot {slot} migrating {targetNodeId} å‘½ä»¤, è®©æºèŠ‚ç‚¹å‡†å¤‡è¿å‡ºæ§½çš„æ•°æ®. \n3. æºèŠ‚ç‚¹å¾ªç¯æ‰§è¡Œ cluster getkeysinslot {slot} {count} å‘½ä»¤, æ¯æ¬¡è·å– count ä¸ªå±äºæ§½çš„é”®. \n4. åœ¨æºèŠ‚ç‚¹ä¸Šæ‰§è¡Œ migrate {targetIp} {targetPort} key 0 {timeout} å‘½ä»¤æŠŠæŒ‡å®š key è¿ç§». \n5. é‡å¤æ‰§è¡Œæ­¥éª¤ 3-4 ç›´åˆ°æ§½ä¸‹æ‰€æœ‰çš„é”®æ•°æ®è¿ç§»åˆ°ç›®æ ‡èŠ‚ç‚¹. \n6. å‘é›†ç¾¤å†…æ‰€æœ‰ä¸»èŠ‚ç‚¹å‘é€ cluster setslot {slot} node {targetNodeId} å‘½ä»¤, é€šçŸ¥æ§½åˆ†é…ç»™ç›®æ ‡èŠ‚ç‚¹. \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("å›¾ç¤ºå¦‚ä¸‹:")]),s._v(" "),t("p",[s._v("â€‹"),t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220523230141253.png",alt:""}})]),s._v(" "),t("p",[s._v("å¯ä»¥ä½¿ç”¨ redis-trib å·¥å…·çš„ "),t("strong",[s._v("reshard")]),s._v(" å‘½ä»¤ç®€åŒ–æ•°æ®è¿ç§»çš„å·¥ä½œé‡. ç”±äºæ§½ç”¨äº "),t("strong",[s._v("hash è¿ç®—")]),s._v("æœ¬èº«é¡ºåºæ²¡æœ‰æ„ä¹‰, æ‰€ä»¥"),t("strong",[s._v("æ— éœ€å¼ºåˆ¶è¦æ±‚èŠ‚ç‚¹è´Ÿè´£æ§½çš„é¡ºåºæ€§")]),s._v(", ä¹Ÿå°±æ˜¯ä¸€ä¸ªç»“ç‚¹ä¸Šæ§½ä¸ä¸€å®šæ˜¯è¿ç»­çš„. æ•°æ®è¿ç§»å®Œä¹‹å, é›†ç¾¤åˆå¤šäº†ä¸€ä¸ªä¸»èŠ‚ç‚¹, æ­¤æ—¶åº”è¯¥å†ç»™è¿™ä¸ªç»“ç‚¹"),t("strong",[s._v("é…å¤‡ä¸€ä¸ªä»èŠ‚ç‚¹")]),s._v(". æ­¤æ—¶æ‰©å®¹å®Œæˆ.")]),s._v(" "),t("h5",{attrs:{id:"_2-é›†ç¾¤æ”¶ç¼©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é›†ç¾¤æ”¶ç¼©"}},[s._v("#")]),s._v(" 2.é›†ç¾¤æ”¶ç¼©")]),s._v(" "),t("p",[s._v("é›†ç¾¤æ”¶ç¼©å³å°†é›†ç¾¤ä¸­çš„èŠ‚ç‚¹"),t("strong",[s._v("å®‰å…¨ä¸‹çº¿")]),s._v(". å¦‚æœä¸‹çº¿çš„ç»“ç‚¹åˆ†é…æœ‰æ§½, éœ€è¦"),t("strong",[s._v("å°†æ§½å’Œæ•°æ®è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹")]),s._v(", ä¿è¯ä¸‹çº¿åæ•°æ®å®Œæ•´æ€§. éœ€è¦å°†è¿™ä¸ªä¸‹çº¿èŠ‚ç‚¹çš„"),t("strong",[s._v("æ§½å‡åŒ€åˆ†é…åˆ°å…¶ä»–èŠ‚ç‚¹")]),s._v(". ä¹Ÿå¯ä»¥ä½¿ç”¨ "),t("strong",[s._v("reshard")]),s._v(" å‘½ä»¤è¿›è¡Œè¿ç§», reshard è¿ç§»çš„ç›®æ ‡èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ª, æ‰€ä»¥ä¸‹å›¾éœ€è¦æ‰§è¡Œ 3 æ¬¡å‘½ä»¤.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223057254.png",alt:""}})]),s._v(" "),t("p",[s._v("å¦‚æœä¸‹çº¿çš„ç»“ç‚¹"),t("strong",[s._v("æ²¡æœ‰è´Ÿè´£æ§½æˆ–æœ¬èº«æ˜¯ä»èŠ‚ç‚¹")]),s._v(", åˆ™å¯ä»¥é€šè¿‡ "),t("strong",[s._v("cluster forget {downNodeId}")]),s._v("  é€šçŸ¥é›†ç¾¤å†…å…¶ä»–èŠ‚ç‚¹"),t("strong",[s._v("å¿˜è®°")]),s._v("è¿™ä¸ªä¸‹çº¿ç»“ç‚¹, è¿™æ ·å…¶ä»–èŠ‚ç‚¹å°±ä¸å†ä¸è¿™ä¸ªç»“ç‚¹è¿›è¡Œ Gossip é€šä¿¡, ä¹‹åå³å¯æ­£å¸¸å…³é—­.")]),s._v(" "),t("p",[s._v("å¦‚æœä¸‹çº¿ä¸»èŠ‚ç‚¹ä½†"),t("strong",[s._v("ä¸ä¸‹çº¿ä»èŠ‚ç‚¹")]),s._v(", åˆ™éœ€è¦æŠŠè¿™ä¸ªå­˜ç•™çš„ä»èŠ‚ç‚¹"),t("strong",[s._v("æŒ‡å‘")]),s._v("å…¶ä»–èŠ‚ç‚¹. å¦‚æœä¸»ä»èŠ‚ç‚¹"),t("strong",[s._v("éƒ½ä¸‹çº¿")]),s._v(", å»ºè®®å…ˆä¸‹çº¿ä»èŠ‚ç‚¹å†ä¸‹çº¿ä¸»èŠ‚ç‚¹, é˜²æ­¢ä¸å¿…è¦çš„"),t("strong",[s._v("å…¨é‡å¤åˆ¶")]),s._v(".")]),s._v(" "),t("h4",{attrs:{id:"è¯·æ±‚è·¯ç”±ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚è·¯ç”±ğŸŒŸ"}},[s._v("#")]),s._v(" è¯·æ±‚è·¯ç”±ğŸŒŸ")]),s._v(" "),t("p",[s._v("ä¸å®¢æˆ·ç«¯é€šä¿¡æ—¶, Redis é›†ç¾¤ä¸ºäº†è¿½æ±‚æ€§èƒ½æœ€å¤§åŒ–, "),t("strong",[s._v("æ²¡æœ‰é‡‡ç”¨ä»£ç†")]),s._v("çš„æ–¹å¼, è€Œæ˜¯é‡‡ç”¨"),t("strong",[s._v("å®¢æˆ·ç«¯ç›´è¿èŠ‚ç‚¹")]),s._v("çš„æ–¹å¼è¿›è¡Œ.")]),s._v(" "),t("h5",{attrs:{id:"_1-è¯·æ±‚é‡å®šå‘moved"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¯·æ±‚é‡å®šå‘moved"}},[s._v("#")]),s._v(" 1.è¯·æ±‚é‡å®šå‘MOVED")]),s._v(" "),t("blockquote",[t("p",[s._v("è·³è½¬é‡å®šä½")])]),s._v(" "),t("p",[s._v("å½“å®¢æˆ·ç«¯å‘ä¸€ä¸ªé”™è¯¯çš„èŠ‚ç‚¹å‘å‡ºäº†æŒ‡ä»¤, è¯¥èŠ‚ç‚¹ä¼šå‘ç°æŒ‡ä»¤çš„ key æ‰€åœ¨çš„æ§½ä½å¹¶ä¸å½’è‡ªå·±ç®¡ç†, è¿™æ—¶å®ƒä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç‰¹æ®Šçš„è·³è½¬æŒ‡ä»¤å¹¶æºå¸¦ç›®æ ‡æ“ä½œçš„èŠ‚ç‚¹åœ°å€, å‘Šè¯‰å®¢æˆ·ç«¯å»è¿è¿™ä¸ªèŠ‚ç‚¹å»è·å–æ•°æ®. å®¢æˆ·ç«¯æ”¶åˆ°æŒ‡ä»¤åé™¤äº†è·³è½¬åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ä¸Šå»æ“ä½œ, è¿˜ä¼šåŒæ­¥æ›´æ–°çº æ­£æœ¬åœ°çš„æ§½ä½æ˜ å°„è¡¨ç¼“å­˜, åç»­æ‰€æœ‰ key å°†ä½¿ç”¨æ–°çš„æ§½ä½æ˜ å°„è¡¨.")]),s._v(" "),t("p",[s._v("åœ¨é›†ç¾¤æ¨¡å¼ä¸‹, "),t("strong",[s._v("Redis æ¥æ”¶ä»»ä½•é”®ç›¸å…³å‘½ä»¤æ—¶é¦–å…ˆè®¡ç®—é”®å¯¹åº”çš„æ§½, å†æ ¹æ®æ§½æ‰¾å‡ºæ‰€å¯¹åº”çš„èŠ‚ç‚¹, å¦‚æœèŠ‚ç‚¹æ˜¯è‡ªèº«(æ§½å‘½ä¸­), åˆ™å¤„ç†é”®å‘½ä»¤; å¦åˆ™å›å¤ MOVED é‡å®šå‘é”™è¯¯, å‘Šè¯‰å®¢æˆ·ç«¯è¯·æ±‚æ­£ç¡®çš„èŠ‚ç‚¹. è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ MOVED é‡å®šå‘.")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223213996.png",alt:""}})]),s._v(" "),t("p",[s._v("å¯ä»¥å€ŸåŠ© "),t("strong",[s._v("cluster keyslot {key}")]),s._v("  å‘½ä»¤è¿”å› key å¯¹åº”çš„"),t("strong",[s._v("æ§½")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223250869.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("è¿”å›çš„é‡å®šå‘ä¿¡æ¯åŒ…å«äº†é”®æ‰€å¯¹åº”çš„æ§½å’Œè´Ÿè´£è¯¥æ§½çš„èŠ‚ç‚¹åœ°å€. "),t("strong",[s._v("â€‹"),t("strong",[t("strong",[s._v("æ ¹æ®è¿™äº›ä¿¡æ¯å®¢æˆ·ç«¯å¯ä»¥")])]),s._v("â€‹")]),s._v("é‡æ–°å‘èµ·è¯·æ±‚")]),s._v(". æ³¨æ„: é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å¯¹äºä¸å±äºå®ƒçš„é”®æ“ä½œ"),t("strong",[s._v("åªå›å¤é‡å®šå‘å“åº”, ä¸ä¼šè¿›è¡Œå‘½ä»¤è½¬å‘")]),s._v(".")]),s._v(" "),t("p",[s._v("Redis æ§½è®¡ç®—æ˜¯æ ¹æ®é”®çš„æœ‰æ•ˆéƒ¨åˆ†ä½¿ç”¨ "),t("strong",[s._v("CRC16 å‡½æ•°è®¡ç®—å‡ºæ•£åˆ—å€¼")]),s._v(", ç„¶åå¯¹ 16384 "),t("strong",[s._v("å–æ¨¡")]),s._v(", å¯ä»¥å¾—åˆ°"),t("strong",[s._v("æ˜ å°„çš„æ§½")]),s._v(". è®¡ç®—å‡ºé”®å¯¹åº”çš„æ§½ä¹‹å, éœ€è¦æŸ¥æ‰¾æ§½å¯¹åº”çš„èŠ‚ç‚¹. é›†ç¾¤å†…é€šè¿‡"),t("strong",[s._v("æ¶ˆæ¯äº¤æ¢")]),s._v("æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šçŸ¥é“"),t("strong",[s._v("æ‰€æœ‰èŠ‚ç‚¹çš„æ§½ä¿¡æ¯")]),s._v(", å†…éƒ¨"),t("strong",[s._v("ä¿å­˜")]),s._v("åœ¨ "),t("strong",[s._v("clusterState")]),s._v(" ç»“æ„ä¸­.")]),s._v(" "),t("p",[s._v("æ ¹æ® MOVED é‡å®šå‘æœºåˆ¶, å®¢æˆ·ç«¯å¯ä»¥éšæœºè¿æ¥é›†ç¾¤å†…"),t("strong",[s._v("ä»»ä¸€èŠ‚ç‚¹")]),s._v("è·å–é”®çš„ä¿¡æ¯.")]),s._v(" "),t("h5",{attrs:{id:"_2-aské‡å®šå‘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-aské‡å®šå‘"}},[s._v("#")]),s._v(" 2.ASKé‡å®šå‘")]),s._v(" "),t("p",[s._v("å¦‚æœå½“é”®"),t("strong",[s._v("æ­£åœ¨è¿ç§»")]),s._v("çš„æ—¶å€™é›†ç¾¤æ”¶åˆ°å¯¹é”®çš„æ“ä½œå‘½ä»¤, å¦‚æœæ•°æ®"),t("strong",[s._v("éƒ½åœ¨")]),s._v("åŸæ¥çš„èŠ‚ç‚¹, åˆ™ç›´æ¥æ‰§è¡Œå¹¶è¿”å›. ç„¶è€Œæ­¤æ—¶å¯èƒ½ä¸€éƒ¨åˆ†é”®åœ¨æ—§çš„èŠ‚ç‚¹ä¸Š, è€Œ"),t("strong",[s._v("å¦ä¸€éƒ¨åˆ†æ•°æ®å·²ç»è¿ç§»åˆ°æ–°çš„èŠ‚ç‚¹")]),s._v("ä¸Š, è¿™æ—¶å€™é›†ç¾¤å°±ä¼šå›å¤ "),t("strong",[s._v("ASK é‡å®šå‘å¼‚å¸¸")]),s._v(". å®¢æˆ·ç«¯è§£æè¿™ä¸ªå¼‚å¸¸ä¿¡æ¯å¹¶å†æ¬¡å‘èµ·è¯·æ±‚.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223441500.png",alt:""}})]),s._v(" "),t("p",[s._v("æ‰§è¡Œæµç¨‹å¦‚ä¸‹:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223519148.png",alt:""}})]),s._v(" "),t("p",[s._v("æ³¨æ„åœ¨é›†ç¾¤ä¸‹è¿›è¡Œ"),t("strong",[s._v("é”®è¿ç§»æ—¶")]),s._v("å¦‚æœä½¿ç”¨ "),t("strong",[s._v("mget, mset ç­‰æ‰¹é‡æ“ä½œ")]),s._v("æ—¶, slot è¿ç§»æ•°æ®æœŸé—´ç”±äºé”®åˆ—è¡¨"),t("strong",[s._v("æ— æ³•ä¿è¯åœ¨åŒä¸€ç»“ç‚¹")]),s._v(", å¯èƒ½å¯¼è‡´"),t("strong",[s._v("å¤§é‡é”™è¯¯")]),s._v(". è™½ç„¶é›†ç¾¤ç¯å¢ƒä¸‹ä¼˜å…ˆä½¿ç”¨ Pipeline æ–¹å¼è¿›è¡Œæ‰¹é‡æ“ä½œ, ä½†æ˜¯ Pipeline ä¾ç„¶æ— æ³•è§£å†³ä¸Šè¿°é—®é¢˜. æ‰€ä»¥è¿ç§»é”®çš„æ—¶å€™åˆ«è¿›è¡Œæ‰¹é‡æ“ä½œ!")]),s._v(" "),t("blockquote",[t("p",[s._v("ASKé‡å®šå‘å’ŒMOVEDé‡å®šå‘çš„åŒºåˆ«?")])]),s._v(" "),t("p",[s._v("ä¸¤è€…éƒ½æ˜¯å¯¹å®¢æˆ·ç«¯çš„é‡å®šå‘æ§åˆ¶, ä½†æ˜¯æœ‰æœ¬è´¨åŒºåˆ«.")]),s._v(" "),t("p",[t("strong",[s._v("ASK é‡å®šå‘")]),s._v(": å‘è¯´æ˜é›†ç¾¤"),t("strong",[s._v("æ­£åœ¨è¿›è¡Œ slot æ•°æ®è¿ç§»")]),s._v(", å®¢æˆ·ç«¯æ— æ³•çŸ¥é“ä»€ä¹ˆæ—¶å€™è¿ç§»å®Œæˆ, å› æ­¤åªèƒ½"),t("strong",[s._v("ä¸´æ—¶æ€§çš„é‡å®šå‘")]),s._v(", å®¢æˆ·ç«¯ä¹Ÿ"),t("strong",[s._v("ä¸ä¼šæ›´æ–° slots ç¼“å­˜")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("MOVED é‡å®šå‘")]),s._v(": è¯´æ˜é”®å¯¹åº”çš„æ§½å·²ç»"),t("strong",[s._v("æ˜ç¡®è¿ç§»åˆ°äº†")]),s._v("æ–°çš„èŠ‚ç‚¹, ç±»ä¼¼äº"),t("strong",[s._v("æ°¸ä¹…é‡å®šå‘")]),s._v(", å®¢æˆ·ç«¯éœ€è¦"),t("strong",[s._v("æ›´æ–° slots ç¼“å­˜")]),s._v(".")]),s._v(" "),t("h4",{attrs:{id:"æ•…éšœè½¬ç§»ğŸŒŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•…éšœè½¬ç§»ğŸŒŸ"}},[s._v("#")]),s._v(" æ•…éšœè½¬ç§»ğŸŒŸ")]),s._v(" "),t("p",[s._v("å¯¹äºå®ç°æ•…éšœè½¬ç§»æ¥è¯´, "),t("strong",[s._v("Redis é›†ç¾¤è‡ªèº«å®ç°äº†é«˜å¯ç”¨, ä¸éœ€è¦ Sentinel")]),s._v(", ä½†æ˜¯æœºåˆ¶ç±»ä¼¼äº Redis Sentinel.")]),s._v(" "),t("h5",{attrs:{id:"_1-æ•…éšœå‘ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•…éšœå‘ç°"}},[s._v("#")]),s._v(" 1.æ•…éšœå‘ç°")]),s._v(" "),t("p",[s._v("é›†ç¾¤é—´é€šè¿‡ "),t("strong",[s._v("ping/pong")]),s._v(" æ¶ˆæ¯å®ç°ç»“ç‚¹é€šä¿¡, æ¶ˆæ¯ä¸ä½†å¯ä»¥ä¼ æ’­èŠ‚ç‚¹æ§½ä¿¡æ¯, è¿˜èƒ½ä¼ æ’­å…¶ä»–"),t("strong",[s._v("çŠ¶æ€ä¿¡æ¯")]),s._v(", æ¯”å¦‚: ä¸»ä»çŠ¶æ€, èŠ‚ç‚¹æ•…éšœç­‰. "),t("strong",[s._v("æ•…éšœå‘ç°ä¹Ÿæ˜¯åŸºäºæ¶ˆæ¯ä¼ æ’­æœºåˆ¶")]),s._v("å®ç°çš„, ä¹Ÿæ˜¯åˆ†ä¸º"),t("strong",[s._v("ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿")]),s._v(". èŠ‚ç‚¹çš„çŠ¶æ€ä½¿ç”¨ "),t("strong",[s._v("clusterState")]),s._v(" ç»“æ„ä½“çš„ "),t("strong",[s._v("flags å±æ€§")]),s._v("è¿›è¡Œå®šä¹‰.")]),s._v(" "),t("h6",{attrs:{id:"_1-ä¸»è§‚ä¸‹çº¿"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸»è§‚ä¸‹çº¿"}},[s._v("#")]),s._v(" (1)ä¸»è§‚ä¸‹çº¿")]),s._v(" "),t("p",[s._v("é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå®šæœŸç»™å…¶ä»–èŠ‚ç‚¹å‘é€ ping æ¶ˆæ¯, æ¥æ”¶èŠ‚ç‚¹å›å¤ pong è¿›è¡Œå“åº”. å¦‚æœå“åº”è¶…æ—¶, åˆ™å‘é€èŠ‚ç‚¹è®¤ä¸ºå¯¹æ–¹å­˜åœ¨æ•…éšœ, æ ‡è®°ä¸º"),t("strong",[s._v("ä¸»è§‚ä¸‹çº¿çŠ¶æ€")]),s._v("(pfail çŠ¶æ€). ä¸»è§‚ä¸‹çº¿æ˜¯"),t("strong",[s._v("ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("å¯¹äºå¦ä¸€ä¸ªèŠ‚ç‚¹ä¸å¯ç”¨çš„åˆ¤æ–­, ä»…ä»£è¡¨è¿™ä¸€ä¸ªèŠ‚ç‚¹çš„æ„è§, å¯èƒ½å­˜åœ¨"),t("strong",[s._v("è¯¯åˆ¤")]),s._v(".")]),s._v(" "),t("h6",{attrs:{id:"_2-å®¢è§‚ä¸‹çº¿"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢è§‚ä¸‹çº¿"}},[s._v("#")]),s._v(" (2)å®¢è§‚ä¸‹çº¿")]),s._v(" "),t("p",[s._v("å½“æŸä¸ªèŠ‚ç‚¹è®¤ä¸ºä¸€ä¸ªèŠ‚ç‚¹ä¸å¯ç”¨æ—¶, ä¼šå¾—åˆ°ä¸»è§‚ä¸‹çº¿çš„ç»“è®º, ç„¶åç›¸åº”çš„èŠ‚ç‚¹çŠ¶æ€ä¼šéšæ¶ˆæ¯åœ¨é›†ç¾¤å†…ä¼ æ’­. å®¢è§‚ä¸‹çº¿åˆ™æ˜¯éœ€è¦"),t("strong",[s._v("å¤šä¸ª")]),s._v("èŠ‚ç‚¹"),t("strong",[s._v("è¾¾æˆå…±è¯†")]),s._v(", éƒ½è®¤ä¸ºä¸€ä¸ªèŠ‚ç‚¹ä¸å¯ç”¨. "),t("strong",[s._v("å½“åŠæ•°ä»¥ä¸ŠæŒæœ‰æ§½çš„ä¸»èŠ‚ç‚¹éƒ½æ ‡è®°æŸä¸ªç»“ç‚¹æ˜¯ä¸»è§‚ä¸‹çº¿æ—¶, è§¦å‘å®¢è§‚ä¸‹çº¿æµç¨‹")]),s._v(". æ³¨æ„åªæ˜¯ä¸»èŠ‚ç‚¹å‚ä¸å†³ç­–. æ¯ä¸ªèŠ‚ç‚¹æ”¶åˆ°çš„å…¶ä»–èŠ‚ç‚¹å‘é€çš„"),t("strong",[s._v("ä¸»è§‚ä¸‹çº¿ä¿¡æ¯")]),s._v("æ˜¯å…·æœ‰"),t("strong",[s._v("æœ‰æ•ˆæœŸ")]),s._v("çš„, å¦‚æœæ—¶é—´è¿‡é•¿, ä¸»è§‚ä¸‹çº¿ä¿¡æ¯ä¼šè¿‡æœŸ.")]),s._v(" "),t("p",[s._v("é›†ç¾¤ä¸­çš„èŠ‚ç‚¹"),t("strong",[s._v("æ¯æ¬¡")]),s._v("æ”¶åˆ°å…¶ä»–èŠ‚ç‚¹çš„ä¸»è§‚ä¸‹çº¿çŠ¶æ€ä¿¡æ¯æ—¶, "),t("strong",[s._v("éƒ½ä¼šå°è¯•è§¦å‘å®¢è§‚ä¸‹çº¿")]),s._v(". é¦–å…ˆä¼šè®¡ç®—æœ‰æ•ˆçš„ä¸»è§‚ä¸‹çº¿æŠ¥å‘Šæ•°é‡, å¦‚æœæ•°é‡å¤§äºæ§½èŠ‚ç‚¹çš„"),t("strong",[s._v("ä¸€åŠ")]),s._v(", åˆ™æ›´æ–°ä¸º"),t("strong",[s._v("å®¢è§‚ä¸‹çº¿")]),s._v(", åŒæ—¶å‘é›†ç¾¤å¹¿æ’­ä¸‹çº¿èŠ‚ç‚¹çš„ fail æ¶ˆæ¯.")]),s._v(" "),t("p",[s._v("å¹¿æ’­ä¸‹çº¿èŠ‚ç‚¹çš„ fail æ¶ˆæ¯å¯ä»¥é€šçŸ¥é›†ç¾¤å†…æ‰€æœ‰çš„èŠ‚ç‚¹"),t("strong",[s._v("æ ‡è®°æ•…éšœèŠ‚ç‚¹ä¸ºå®¢è§‚ä¸‹çº¿çŠ¶æ€")]),s._v("å¹¶ç«‹å³ç”Ÿæ•ˆ, åŒæ—¶é€šçŸ¥æ•…éšœèŠ‚ç‚¹çš„"),t("strong",[s._v("ä»èŠ‚ç‚¹è§¦å‘æ•…éšœè½¬ç§»æµç¨‹")]),s._v("(å¦‚æœæ•…éšœçš„å°±æ˜¯ä»èŠ‚ç‚¹å°±ä¸éœ€è¦äº†). å¦‚æœä¸å¯ç”¨çš„èŠ‚ç‚¹æŒæœ‰æ§½, åˆ™éœ€è¦è¿›è¡Œ"),t("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v(".")]),s._v(" "),t("h5",{attrs:{id:"_2-ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœè½¬ç§»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœè½¬ç§»"}},[s._v("#")]),s._v(" 2.ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœè½¬ç§»")]),s._v(" "),t("p",[s._v("æ•…éšœèŠ‚ç‚¹å®¢è§‚ä¸‹çº¿å, å¦‚æœ"),t("strong",[s._v("æ˜¯æŒæœ‰æ§½çš„ä¸»èŠ‚ç‚¹, åˆ™éœ€è¦åœ¨å®ƒçš„ä»èŠ‚ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªæ›¿æ¢å®ƒ")]),s._v(", å®ç°é›†ç¾¤çš„é«˜å¯ç”¨.")]),s._v(" "),t("p",[s._v("è¿‡ç¨‹å¦‚ä¸‹:")]),s._v(" "),t("p",[t("strong",[s._v("(1) èµ„æ ¼æ£€æŸ¥.")]),s._v(" "),t("strong",[t("strong",[s._v("æ¯ä¸ªä»èŠ‚ç‚¹")])]),s._v("â€‹"),t("strong",[s._v("éƒ½è¦")]),s._v("æ£€æŸ¥æœ€åä¸ä¸»èŠ‚ç‚¹ç›´æ¥çš„æ–­çº¿æ—¶é—´, å¦‚æœè¿‡é•¿åˆ™ä¸å…·æœ‰èµ„æ ¼. å¯èƒ½å­˜åœ¨å¤šä¸ªæœ‰èµ„æ ¼æˆä¸ºä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹.")]),s._v(" "),t("p",[t("strong",[s._v("(2) è®¾ç½®é€‰ä¸¾æ—¶é—´. "),t("strong",[s._v("â€‹"),t("strong",[t("strong",[s._v("æ¯ä¸ªä»èŠ‚ç‚¹éƒ½ä¼šè§¦å‘é€‰ä¸¾æ¥é€‰æ‹©")])]),s._v("â€‹")]),s._v("è‡ªå·±ä½œä¸ºä¸»èŠ‚ç‚¹")]),s._v(". ä½†æ˜¯é€‰è°? å½“ä»èŠ‚ç‚¹ç¬¦åˆæ•…éšœè½¬ç§»èµ„æ ¼å, "),t("strong",[s._v("æ›´æ–°")]),s._v("è§¦å‘æ•…éšœé€‰ä¸¾çš„æ—¶é—´, åªæœ‰è¾¾åˆ°æ—¶é—´åæ‰èƒ½è§¦å‘é€‰ä¸¾. æ¯ä¸ª"),t("strong",[s._v("ä»èŠ‚ç‚¹è¿›è¡Œé€‰ä¸¾çš„æ—¶é—´æ˜¯ä¸ä¸€æ ·")]),s._v("çš„, è¿™ä¸ªè§¦å‘æ—¶é—´è®°å½•åœ¨ clusterState ç»“æ„ä½“ä¸­. è¿™é‡Œé‡‡ç”¨"),t("strong",[s._v("å»¶è¿Ÿè§¦å‘æœºåˆ¶")]),s._v(". "),t("strong",[s._v("å¤åˆ¶åç§»é‡è¶Šå¤§çš„ä»èŠ‚ç‚¹çš„è§¦å‘é€‰ä¸¾çš„æ—¶é—´è¶Šæ—©, å› ä¸ºå®ƒçš„æ•°æ®å®Œæ•´æ€§æœ€é«˜.")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220527223721040.png",alt:""}})]),s._v(" "),t("p",[s._v("æ‰€ä»¥ä»èŠ‚ç‚¹ä¸­"),t("strong",[s._v("å¤åˆ¶åç§»é‡æœ€å¤§")]),s._v("çš„èŠ‚ç‚¹å°†"),t("strong",[s._v("æå‰è§¦å‘é€‰ä¸¾")]),s._v(", å®ƒæˆä¸ºä¸»èŠ‚ç‚¹çš„å‡ ç‡ä¹Ÿ"),t("strong",[s._v("æ›´å¤§")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("(3) å‘èµ·é€‰ä¸¾")]),s._v(". å½“ä»èŠ‚ç‚¹å®šæ—¶ä»»åŠ¡ç›‘æµ‹åˆ°è¾¾æ•…éšœé€‰ä¸¾æ—¶é—´åˆ°è¾¾ä¹‹å, å‘èµ·é€‰ä¸¾æµç¨‹, å³æ›´æ–°é…ç½®çºªå…ƒå’Œå¹¿æ’­é€‰ä¸¾æ¶ˆæ¯.")]),s._v(" "),t("p",[t("strong",[s._v("(4) é€‰ä¸¾æŠ•ç¥¨")]),s._v(". æŒæœ‰æ§½çš„ä¸»èŠ‚ç‚¹æ‰ä¼šå¤„ç†é€‰ä¸¾æ¶ˆæ¯, æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰"),t("strong",[s._v("ä¸€ç¥¨")]),s._v(".")]),s._v(" "),t("p",[t("strong",[s._v("(5) æ›¿æ¢ä¸»èŠ‚ç‚¹")]),s._v(". é€‰ä¸¾æˆåŠŸçš„ä»èŠ‚ç‚¹è§¦å‘æ›¿æ¢ä¸»èŠ‚ç‚¹æ“ä½œ. å½“å‰ä»èŠ‚ç‚¹å–æ¶ˆå¤åˆ¶å˜æˆä¸»èŠ‚ç‚¹. ä¹‹åè‡ªå·±æ¥ç®¡åŸæ¥ä¸»èŠ‚ç‚¹è´Ÿè´£çš„æ§½. ç„¶åå‘é›†ç¾¤"),t("strong",[s._v("å¹¿æ’­")]),s._v("è‡ªå·±æˆä¸ºä¸»èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯.")]),s._v(" "),t("p",[s._v("æ•´ä¸ªæ•…éšœè½¬ç§»è¿‡ç¨‹ä¹Ÿä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—, å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹æ•…éšœåœºæ™¯, å¥½å¥½çœ‹çœ‹æ—¥å¿—.")]),s._v(" "),t("blockquote",[t("p",[s._v("Redisé›†ç¾¤ä¸ºä»€ä¹ˆè‡³å°‘éœ€è¦ä¸‰ä¸ªmasterèŠ‚ç‚¹, å¹¶ä¸”æ¨èèŠ‚ç‚¹æ•°ä¸ºå¥‡æ•°?")])]),s._v(" "),t("p",[s._v("å› ä¸ºæ–° master çš„é€‰ä¸¾éœ€è¦å¤§äºåŠæ•°çš„é›†ç¾¤ master èŠ‚ç‚¹åŒæ„æ‰èƒ½é€‰ä¸¾æˆåŠŸ, å¦‚æœåªæœ‰ä¸¤ä¸ª master èŠ‚ç‚¹, å½“å…¶ä¸­ä¸€ä¸ªæŒ‚äº†, æ˜¯è¾¾ä¸åˆ°é€‰ä¸¾æ–° master çš„æ¡ä»¶çš„.")]),s._v(" "),t("p",[s._v("å¥‡æ•°ä¸ª master èŠ‚ç‚¹å¯ä»¥åœ¨æ»¡è¶³é€‰ä¸¾è¯¥æ¡ä»¶çš„åŸºç¡€ä¸ŠèŠ‚çœä¸€ä¸ªèŠ‚ç‚¹, æ¯”å¦‚ä¸‰ä¸ª master èŠ‚ç‚¹å’Œå››ä¸ª master èŠ‚ç‚¹çš„é›†ç¾¤ç›¸æ¯”, å¤§å®¶å¦‚æœéƒ½æŒ‚äº†ä¸€ä¸ª master èŠ‚ç‚¹éƒ½èƒ½é€‰ä¸¾æ–° master èŠ‚ç‚¹, å¦‚æœéƒ½æŒ‚äº†ä¸¤ä¸ª master èŠ‚ç‚¹éƒ½æ²¡æ³•é€‰ä¸¾æ–° master èŠ‚ç‚¹äº†, æ‰€ä»¥å¥‡æ•°çš„ master èŠ‚ç‚¹æ›´å¤šçš„æ˜¯ä»èŠ‚çœæœºå™¨èµ„æºè§’åº¦å‡ºå‘è¯´çš„.")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("p",[s._v("â€")]),s._v(" "),t("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[s._v("ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹")])])])}),[],!1,null,null,null);t.default=e.exports}}]);