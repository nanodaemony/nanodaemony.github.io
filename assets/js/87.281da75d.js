(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{404:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_41-åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–ğŸŒ¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_41-åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–ğŸŒ¼"}},[s._v("#")]),s._v(" 41.åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–ğŸŒ¼")]),s._v(" "),a("p",[s._v("æœ¬èŠ‚å¯¹åº”ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹çš„ç¬¬åä¸€ç« ")]),s._v(" "),a("p",[s._v("ä»è®¡ç®—æœºç¨‹åºå‡ºç°çš„ç¬¬ä¸€å¤©èµ·, å¯¹æ•ˆç‡çš„è¿½é€å°±æ˜¯ç¨‹åºå‘˜å¤©ç”Ÿçš„åšå®šä¿¡ä»°, è¿™ä¸ªè¿‡ç¨‹çŠ¹å¦‚ä¸€åœºæ²¡æœ‰ç»ˆç‚¹, æ°¸ä¸åœæ­‡çš„  F1 æ–¹ç¨‹å¼ç«èµ›, ç¨‹åºå‘˜æ˜¯è½¦æ‰‹, æŠ€æœ¯å¹³å°åˆ™æ˜¯åœ¨èµ›é“ä¸Šé£é©°çš„èµ›è½¦.")]),s._v(" "),a("h4",{attrs:{id:"æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[s._v("#")]),s._v(" æ¦‚è¿°")]),s._v(" "),a("p",[s._v("å¦‚æœæŠŠå­—èŠ‚ç çœ‹ä½œæ˜¯ç¨‹åºè¯­è¨€çš„ä¸€ç§"),a("strong",[s._v("ä¸­é—´è¡¨ç¤ºå½¢å¼")]),s._v("(Intermediate Representation, IR)çš„è¯, é‚£ç¼–è¯‘å™¨æ— è®ºåœ¨ä½•æ—¶, åœ¨ä½•ç§çŠ¶æ€ä¸‹"),a("mark",[a("strong",[s._v("æŠŠ Class æ–‡ä»¶è½¬æ¢æˆä¸æœ¬åœ°åŸºç¡€è®¾æ–½(ç¡¬ä»¶æŒ‡ä»¤é›†, æ“ä½œç³»ç»Ÿ)ç›¸å…³çš„äºŒè¿›åˆ¶æœºå™¨ç , å®ƒéƒ½å¯ä»¥è§†ä¸ºæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹çš„åç«¯")])]),s._v('. å¦‚æœè¯»è€…é˜…è¯»è¿‡æœ¬ä¹¦çš„ç¬¬ 2 ç‰ˆ, å¯èƒ½ä¼šå‘ç°æœ¬ç« çš„æ ‡é¢˜å·²ç»ä» "è¿è¡ŒæœŸç¼–è¯‘ä¸ä¼˜åŒ–" æ‚„ç„¶æ”¹æˆäº† "åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–", è¿™æ˜¯å› ä¸ºåœ¨ 2012 å¹´çš„ Java ä¸–ç•Œé‡Œ, è™½ç„¶æå‰ç¼–è¯‘(Ahead Of Time, AOT)æ—©å·²æœ‰æ‰€åº”ç”¨, ä½†ç›¸å¯¹è€Œè¨€, '),a("strong",[s._v("å³æ—¶ç¼–è¯‘")]),s._v('(Just In Time, JIT)æ‰æ˜¯å ç»å¯¹ä¸»æµçš„ç¼–è¯‘å½¢å¼. ä¸è¿‡, æœ€è¿‘å‡ å¹´ç¼–è¯‘æŠ€æœ¯å‘å±•å‡ºç°äº†ä¸€äº›å¾®å¦™çš„å˜åŒ–, æå‰ç¼–è¯‘ä¸ä»…é€æ¸è¢«ä¸»æµ JDK æ‰€æ”¯æŒ, è€Œä¸”åœ¨ Java ç¼–è¯‘æŠ€æœ¯çš„å‰æ²¿ç ”ç©¶ä¸­åˆé‡æ–°æˆäº†ä¸€ä¸ªçƒ­é—¨çš„è¯é¢˜, æ‰€ä»¥å†ç»§ç»­åªæ "'),a("strong",[s._v("è¿è¡ŒæœŸ")]),s._v('" å’Œ "'),a("strong",[s._v("å³æ—¶ç¼–è¯‘")]),s._v('" å°±æ˜¾å¾—ä¸å¤Ÿå…¨é¢äº†, åœ¨æœ¬ç« ä¸­å®ƒä»¬ä¸¤è€…éƒ½æ˜¯ä¸»è§’.')]),s._v(" "),a("p",[s._v("æ— è®ºæ˜¯æå‰ç¼–è¯‘å™¨æŠ‘æˆ–å³æ—¶ç¼–è¯‘å™¨, éƒ½ä¸æ˜¯ Java è™šæ‹Ÿæœºå¿…éœ€çš„ç»„æˆéƒ¨åˆ†, ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­ä»æ¥æ²¡æœ‰è§„å®šè¿‡è™šæ‹Ÿæœºå†…éƒ¨å¿…é¡»è¦åŒ…å«è¿™äº›ç¼–è¯‘å™¨, æ›´æ²¡æœ‰é™å®šæˆ–æŒ‡å¯¼è¿™äº›ç¼–è¯‘å™¨åº”è¯¥å¦‚ä½•å»å®ç°. ä½†æ˜¯, "),a("strong",[s._v("åç«¯ç¼–è¯‘å™¨ç¼–è¯‘æ€§èƒ½çš„å¥½å, ä»£ç ä¼˜åŒ–è´¨é‡çš„é«˜ä½å´æ˜¯è¡¡é‡ä¸€æ¬¾å•†ç”¨è™šæ‹Ÿæœºä¼˜ç§€ä¸å¦çš„å…³é”®æŒ‡æ ‡ä¹‹ä¸€")]),s._v(", å®ƒä»¬ä¹Ÿæ˜¯å•†ä¸š Java è™šæ‹Ÿæœºä¸­çš„æ ¸å¿ƒ, æ˜¯æœ€èƒ½ä½“ç°æŠ€æœ¯æ°´å¹³ä¸ä»·å€¼çš„åŠŸèƒ½. æœ¬ç« å°†èµ°è¿› Java è™šæ‹Ÿæœºçš„å†…éƒ¨, "),a("strong",[s._v("æ¢ç´¢åç«¯ç¼–è¯‘å™¨çš„è¿ä½œè¿‡ç¨‹å’ŒåŸç†")]),s._v(".")]),s._v(" "),a("p",[s._v("æ—¢ç„¶ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹æ²¡æœ‰å…·ä½“çš„çº¦æŸè§„åˆ™å»é™åˆ¶åç«¯ç¼–è¯‘å™¨åº”è¯¥å¦‚ä½•å®ç°, é‚£è¿™éƒ¨åˆ†åŠŸèƒ½å°±å®Œå…¨æ˜¯ä¸è™šæ‹Ÿæœºå…·ä½“å®ç°ç›¸å…³çš„å†…å®¹, å¦‚æ— ç‰¹æ®Šè¯´æ˜, æœ¬ç« ä¸­æ‰€æåŠçš„å³æ—¶ç¼–è¯‘å™¨éƒ½æ˜¯ç‰¹æŒ‡ "),a("mark",[a("strong",[s._v("HotSpot è™šæ‹Ÿæœºå†…ç½®çš„å³æ—¶ç¼–è¯‘å™¨")])]),s._v(", è™šæ‹Ÿæœºä¹Ÿæ˜¯ç‰¹æŒ‡ HotSpot è™šæ‹Ÿæœº. ä¸è¿‡, æœ¬ç« è™½ç„¶æœ‰å¤§é‡çš„å†…å®¹æ¶‰åŠäº†ç‰¹å®šçš„è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨çš„å®ç°å±‚é¢, ä½†ä¸»æµ Java è™šæ‹Ÿæœºä¸­åç«¯ç¼–è¯‘å™¨çš„è¡Œä¸ºä¼šæœ‰å¾ˆå¤šç›¸ä¼¼ç›¸é€šä¹‹å¤„, å› æ­¤å¯¹å…¶ä»–è™šæ‹Ÿæœºæ¥è¯´ä¹Ÿå…·å¤‡ä¸€å®šçš„ç±»æ¯”å‚è€ƒä»·å€¼.")]),s._v(" "),a("h4",{attrs:{id:"ä»£ç æ‰§è¡Œæ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç æ‰§è¡Œæ¨¡å¼"}},[s._v("#")]),s._v(" ä»£ç æ‰§è¡Œæ¨¡å¼")]),s._v(" "),a("p",[s._v("è™šæ‹Ÿæœºæ‰§è¡Œä»£ç çš„å‡ ç§æ¨¡å¼:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("è§£é‡Šæ¨¡å¼")]),s._v("(Interpreted Mode): "),a("strong",[s._v("åªä½¿ç”¨è§£é‡Šå™¨")]),s._v("(-Xint å¼ºåˆ¶ JVM ä½¿ç”¨"),a("strong",[s._v("è§£é‡Šæ¨¡å¼")]),s._v("), æ‰§è¡Œä¸€è¡Œ JVM "),a("strong",[s._v("å­—èŠ‚ç ")]),s._v("å°±ç¼–è¯‘ä¸€è¡Œä¸ºæœºå™¨ç .")]),s._v(" "),a("li",[a("strong",[s._v("ç¼–è¯‘æ¨¡å¼")]),s._v("(Compiled Mode): "),a("strong",[s._v("åªä½¿ç”¨ç¼–è¯‘å™¨")]),s._v("(-Xcomp JVM ä½¿ç”¨ç¼–è¯‘æ¨¡å¼), å…ˆå°†æ‰€æœ‰ JVM å­—èŠ‚ç "),a("strong",[s._v("ä¸€æ¬¡ç¼–è¯‘")]),s._v("ä¸ºæœºå™¨ç , ç„¶åä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰æœºå™¨ç .")]),s._v(" "),a("li",[a("strong",[s._v("æ··åˆæ¨¡å¼")]),s._v("(Mixed Mode): ä¾ç„¶ä½¿ç”¨"),a("strong",[s._v("è§£é‡Šæ¨¡å¼")]),s._v('æ‰§è¡Œä»£ç , ä½†æ˜¯å¯¹äºä¸€äº› "'),a("strong",[s._v("çƒ­ç‚¹")]),s._v('" ä»£ç é‡‡ç”¨'),a("strong",[s._v("ç¼–è¯‘æ¨¡å¼")]),s._v("æ‰§è¡Œ. JVM ä¸€èˆ¬é‡‡ç”¨"),a("strong",[s._v("æ··åˆæ¨¡å¼")]),s._v("æ‰§è¡Œä»£ç .")])]),s._v(" "),a("p",[a("strong",[s._v("è§£é‡Šæ¨¡å¼å¯åŠ¨å¿«")]),s._v(", å¯¹äºåªéœ€è¦æ‰§è¡Œéƒ¨åˆ†ä»£ç , å¹¶ä¸”å¤§å¤šæ•°ä»£ç "),a("strong",[s._v("åªä¼šæ‰§è¡Œä¸€æ¬¡")]),s._v("çš„æƒ…å†µæ¯”è¾ƒé€‚åˆ; "),a("strong",[s._v("ç¼–è¯‘æ¨¡å¼å¯åŠ¨æ…¢")]),s._v(", ä½†æ˜¯åæœŸ"),a("strong",[s._v("æ‰§è¡Œé€Ÿåº¦å¿«")]),s._v(", è€Œä¸”æ¯”è¾ƒå ç”¨å†…å­˜, å› ä¸ºæœºå™¨ç çš„æ•°é‡è‡³å°‘æ˜¯ JVM å­—èŠ‚ç çš„åå€ä»¥ä¸Š, è¿™ç§æ¨¡å¼é€‚åˆä»£ç å¯èƒ½ä¼šè¢«åå¤æ‰§è¡Œçš„åœºæ™¯; "),a("strong",[s._v('æ··åˆæ¨¡å¼æ˜¯ JVM é»˜è®¤é‡‡ç”¨çš„æ‰§è¡Œä»£ç æ–¹å¼, ä¸€å¼€å§‹è¿˜æ˜¯è§£é‡Šæ‰§è¡Œ, ä½†æ˜¯å¯¹äºå°‘éƒ¨åˆ† "çƒ­ç‚¹" ä»£ç ä¼šé‡‡ç”¨ç¼–è¯‘æ¨¡å¼æ‰§è¡Œ, è¿™äº›çƒ­ç‚¹ä»£ç å¯¹åº”çš„æœºå™¨ç ä¼šè¢«ç¼“å­˜èµ·æ¥, ä¸‹æ¬¡å†æ‰§è¡Œæ— éœ€å†ç¼–è¯‘, è¿™å°±æ˜¯å¸¸è§çš„ JIT')]),s._v("(Just In Time Compiler)"),a("strong",[s._v("å³æ—¶ç¼–è¯‘æŠ€æœ¯")]),s._v(". åœ¨"),a("strong",[s._v("å³æ—¶ç¼–è¯‘è¿‡ç¨‹")]),s._v("ä¸­ JVM å¯èƒ½ä¼šå¯¹çš„ä»£ç æœ€ä¸€äº›"),a("strong",[s._v("ä¼˜åŒ–")]),s._v(", æ¯”å¦‚"),a("strong",[s._v("å¯¹è±¡é€ƒé€¸åˆ†æ")]),s._v("ç­‰.")]),s._v(" "),a("p",[s._v("Java ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™, ä¸»è¦å°±æ˜¯æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤, ä¸€èˆ¬è¿™äº›æŒ‡ä»¤ä¼šæŒ‰ç…§é¡ºåºè§£é‡Šæ‰§è¡Œ, è¿™ç§å°±æ˜¯è§£é‡Šæ‰§è¡Œ. ä½†æ˜¯é‚£äº›è¢«é¢‘ç¹è°ƒç”¨çš„ä»£ç , æ¯”å¦‚è°ƒç”¨æ¬¡æ•°å¾ˆé«˜æˆ–è€…åœ¨ for å¾ªç¯é‡Œçš„é‚£äº›ä»£ç ,å¦‚æœæŒ‰ç…§è§£é‡Šæ‰§è¡Œ, æ•ˆç‡æ˜¯éå¸¸ä½çš„. è¿™äº›ä»£ç ç§°ä¸ºçƒ­ç‚¹ä»£ç . ä¸ºäº†æé«˜çƒ­ç‚¹ä»£ç çš„æ‰§è¡Œæ•ˆç‡, åœ¨è¿è¡Œæ—¶, è™šæ‹Ÿæœºå°†ä¼šæŠŠè¿™äº›ä»£ç ç¼–è¯‘æˆä¸æœ¬åœ°å¹³å°ç›¸å…³çš„æœºå™¨ç , å¹¶è¿›è¡Œå„ç§å±‚æ¬¡çš„ä¼˜åŒ–. å®Œæˆè¿™ä¸ªä»»åŠ¡çš„ç¼–è¯‘å™¨, å°±ç§°ä¸ºå³æ—¶ç¼–è¯‘å™¨(Just In Time Compiler), ç®€ç§° JIT ç¼–è¯‘å™¨.")]),s._v(" "),a("h4",{attrs:{id:"å³æ—¶ç¼–è¯‘å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å³æ—¶ç¼–è¯‘å™¨"}},[s._v("#")]),s._v(" å³æ—¶ç¼–è¯‘å™¨")]),s._v(" "),a("blockquote",[a("p",[s._v("å³æ—¶ç¼–è¯‘å™¨å®šä¹‰")])]),s._v(" "),a("p",[s._v("ç›®å‰ä¸»æµçš„ä¸¤æ¬¾å•†ç”¨ Java è™šæ‹Ÿæœº(HotSpot, OpenJ9)é‡Œ, Java ç¨‹åº"),a("mark",[a("strong",[s._v('æœ€åˆéƒ½æ˜¯é€šè¿‡è§£é‡Šå™¨(Interpreter)è¿›è¡Œè§£é‡Šæ‰§è¡Œçš„, å½“è™šæ‹Ÿæœºå‘ç°æŸä¸ªæ–¹æ³•æˆ–ä»£ç å—çš„è¿è¡Œç‰¹åˆ«é¢‘ç¹, å°±ä¼šæŠŠè¿™äº›ä»£ç è®¤å®šä¸º "çƒ­ç‚¹ä»£ç "(Hot Spot Code), ä¸ºäº†æé«˜çƒ­ç‚¹ä»£ç çš„æ‰§è¡Œæ•ˆç‡, åœ¨è¿è¡Œæ—¶, è™šæ‹Ÿæœºå°†ä¼šæŠŠè¿™äº›ä»£ç ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç , å¹¶ä»¥å„ç§æ‰‹æ®µå°½å¯èƒ½åœ°è¿›è¡Œä»£ç ä¼˜åŒ–, è¿è¡Œæ—¶å®Œæˆè¿™ä¸ªä»»åŠ¡çš„åç«¯ç¼–è¯‘å™¨è¢«ç§°ä¸ºå³æ—¶ç¼–è¯‘å™¨(JIT, Just In Time)')])]),s._v(" .")]),s._v(" "),a("p",[s._v("æœ¬èŠ‚å°†ä¼šäº†è§£ HotSpot è™šæ‹Ÿæœºå†…çš„"),a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨")]),s._v("çš„è¿ä½œè¿‡ç¨‹, æ­¤å¤–è¿˜å°†è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("ä¸ºä½• HotSpot è™šæ‹Ÿæœºè¦ä½¿ç”¨")]),s._v("â€‹"),a("mark",[a("strong",[s._v("è§£é‡Šå™¨ä¸å³æ—¶ç¼–è¯‘å™¨å¹¶å­˜")])]),s._v("â€‹"),a("strong",[s._v("çš„æ¶æ„?")])]),s._v(" "),a("li",[a("strong",[s._v("ä¸ºä½• HotSpot è™šæ‹Ÿæœºè¦å®ç°ä¸¤ä¸ª(æˆ–ä¸‰ä¸ª)ä¸åŒçš„å³æ—¶ç¼–è¯‘å™¨?")])]),s._v(" "),a("li",[a("strong",[s._v("ç¨‹åºä½•æ—¶ä½¿ç”¨è§£é‡Šå™¨æ‰§è¡Œ? ä½•æ—¶ä½¿ç”¨ç¼–è¯‘å™¨æ‰§è¡Œ?")])]),s._v(" "),a("li",[a("strong",[s._v("å“ªäº›ç¨‹åºä»£ç ä¼šè¢«ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ? å¦‚ä½•ç¼–è¯‘æœ¬åœ°ä»£ç ?")])]),s._v(" "),a("li",[a("strong",[s._v("å¦‚ä½•ä»å¤–éƒ¨è§‚å¯Ÿåˆ°å³æ—¶ç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹å’Œç¼–è¯‘ç»“æœ?")])])]),s._v(" "),a("h5",{attrs:{id:"_2-å³æ—¶ç¼–è¯‘å™¨å®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å³æ—¶ç¼–è¯‘å™¨å®ç°"}},[s._v("#")]),s._v(" 2.å³æ—¶ç¼–è¯‘å™¨å®ç°")]),s._v(" "),a("p",[s._v("åœ¨ JDK1.8 çš„ HotSpot è™šæ‹Ÿæœºä¸­, å†…ç½®äº†ä¸¤ä¸ª JIT, åˆ†åˆ«ä¸º C1 ç¼–è¯‘å™¨å’Œ C2 ç¼–è¯‘å™¨.")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/%E7%A8%8B%E5%BA%8F%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96-%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91%E5%99%A8.png",alt:"https://www.processon.com/diagraming/642d0c4a6dd8285b4b706e70"}})]),s._v(" "),a("blockquote",[a("p",[s._v("C1ç¼–è¯‘å™¨")])]),s._v(" "),a("p",[s._v("C1 ç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªç®€å•å¿«é€Ÿçš„ç¼–è¯‘å™¨, ä¸»è¦çš„å…³æ³¨ç‚¹åœ¨äºå±€éƒ¨æ€§çš„ä¼˜åŒ–, é€‚ç”¨äºæ‰§è¡Œæ—¶é—´è¾ƒçŸ­æˆ–å¯¹å¯åŠ¨æ€§èƒ½æœ‰è¦æ±‚çš„ç¨‹åº, ä¾‹å¦‚, GUI åº”ç”¨å¯¹ç•Œé¢å¯åŠ¨é€Ÿåº¦å°±æœ‰ä¸€å®šè¦æ±‚, C1 ä¹Ÿè¢«ç§°ä¸º "),a("strong",[s._v("Client Compiler")]),s._v(".")]),s._v(" "),a("p",[s._v("C1 ç¼–è¯‘å™¨å‡ ä¹ä¸ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–.")]),s._v(" "),a("blockquote",[a("p",[s._v("C2ç¼–è¯‘å™¨")])]),s._v(" "),a("p",[s._v("C2 ç¼–è¯‘å™¨æ˜¯ä¸º"),a("strong",[s._v("é•¿æœŸè¿è¡Œçš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºåšæ€§èƒ½è°ƒä¼˜çš„ç¼–è¯‘å™¨")]),s._v(", é€‚ç”¨äºæ‰§è¡Œæ—¶é—´è¾ƒé•¿æˆ–å¯¹å³°å€¼æ€§èƒ½æœ‰è¦æ±‚çš„ç¨‹åº. æ ¹æ®å„è‡ªçš„é€‚é…æ€§, è¿™ç§å³æ—¶ç¼–è¯‘ä¹Ÿè¢«ç§°ä¸º "),a("strong",[s._v("Server Compiler")]),s._v(".")]),s._v(" "),a("blockquote",[a("p",[s._v("Graalç¼–è¯‘å™¨")])]),s._v(" "),a("p",[s._v("C2 ç¼–è¯‘å™¨ä»£ç å·²è¶…çº§å¤æ‚, æ— äººèƒ½ç»´æŠ¤! æ‰€ä»¥æ‰ä¼šå¼€å‘ Graal ç¼–è¯‘å™¨ç”¨ä»¥å–ä»£ C2(ä» JDK 10å¼€å§‹). å‚è€ƒ: å®æˆ˜:æ·±å…¥ç†è§£Graalç¼–è¯‘å™¨.")]),s._v(" "),a("h5",{attrs:{id:"_2-è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨"}},[s._v("#")]),s._v(" 2.è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨")]),s._v(" "),a("p",[s._v("å°½ç®¡å¹¶ä¸æ˜¯æ‰€æœ‰çš„ Java è™šæ‹Ÿæœºéƒ½é‡‡ç”¨è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨å¹¶å­˜çš„è¿è¡Œæ¶æ„, ä½†ç›®å‰ä¸»æµçš„å•†ç”¨ Java è™šæ‹Ÿæœº, è­¬å¦‚ HotSpot, OpenJ9 ç­‰, å†…éƒ¨éƒ½"),a("mark",[a("strong",[s._v("åŒæ—¶åŒ…å«è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨")])]),s._v(", è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨ä¸¤è€…å„æœ‰ä¼˜åŠ¿: "),a("mark",[a("strong",[s._v("å½“ç¨‹åºéœ€è¦è¿…é€Ÿå¯åŠ¨å’Œæ‰§è¡Œçš„æ—¶å€™, è§£é‡Šå™¨å¯ä»¥é¦–å…ˆå‘æŒ¥ä½œç”¨, çœå»ç¼–è¯‘çš„æ—¶é—´, ç«‹å³è¿è¡Œ. å½“ç¨‹åºå¯åŠ¨å, éšç€æ—¶é—´çš„æ¨ç§», ç¼–è¯‘å™¨é€æ¸å‘æŒ¥ä½œç”¨, æŠŠè¶Šæ¥è¶Šå¤šçš„ä»£ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç , è¿™æ ·å¯ä»¥å‡å°‘è§£é‡Šå™¨çš„ä¸­é—´æŸè€—, è·å¾—æ›´é«˜çš„æ‰§è¡Œæ•ˆç‡. å½“ç¨‹åºè¿è¡Œç¯å¢ƒä¸­å†…å­˜èµ„æºé™åˆ¶è¾ƒå¤§, å¯ä»¥ä½¿ç”¨è§£é‡Šæ‰§è¡ŒèŠ‚çº¦å†…å­˜, åä¹‹å¯ä»¥ä½¿ç”¨ç¼–è¯‘æ‰§è¡Œæ¥æå‡æ•ˆç‡")])]),s._v('. åŒæ—¶, è§£é‡Šå™¨è¿˜å¯ä»¥ä½œä¸ºç¼–è¯‘å™¨æ¿€è¿›ä¼˜åŒ–æ—¶åå¤‡çš„ "é€ƒç”Ÿé—¨"(å¦‚æœæƒ…å†µå…è®¸, HotSpot è™šæ‹Ÿæœºä¸­ä¹Ÿä¼šé‡‡ç”¨ä¸è¿›è¡Œæ¿€è¿›ä¼˜åŒ–çš„å®¢æˆ·ç«¯ç¼–è¯‘å™¨å……å½“ "é€ƒç”Ÿé—¨" çš„è§’è‰²), è®©ç¼–è¯‘å™¨æ ¹æ®æ¦‚ç‡é€‰æ‹©ä¸€äº›ä¸èƒ½ä¿è¯æ‰€æœ‰æƒ…å†µéƒ½æ­£ç¡®, ä½†å¤§å¤šæ•°æ—¶å€™éƒ½èƒ½æå‡è¿è¡Œé€Ÿåº¦çš„ä¼˜åŒ–æ‰‹æ®µ, å½“æ¿€è¿›ä¼˜åŒ–çš„å‡è®¾ä¸æˆç«‹, å¦‚åŠ è½½äº†æ–°ç±»ä»¥å, ç±»å‹ç»§æ‰¿ç»“æ„å‡ºç°å˜åŒ–, å‡ºç° "ç½•è§é™·é˜±"(Uncommon Trap)æ—¶å¯ä»¥é€šè¿‡é€†ä¼˜åŒ–(Deoptimization)'),a("strong",[s._v("é€€å›åˆ°è§£é‡ŠçŠ¶æ€ç»§ç»­æ‰§è¡Œ")]),s._v(", å› æ­¤åœ¨æ•´ä¸ª Java è™šæ‹Ÿæœºæ‰§è¡Œæ¶æ„é‡Œ, "),a("strong",[s._v("è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨ç»å¸¸æ˜¯ç›¸è¾…ç›¸æˆåœ°é…åˆå·¥ä½œ")]),s._v(", å…¶äº¤äº’å…³ç³»å¦‚å›¾ 11-1 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/image-20240720103441-8itz7vj.png",alt:"image",title:"å›¾11-1 é‡Šå™¨ä¸ç¼–è¯‘å™¨çš„äº¤äº’"}})]),s._v(" "),a("p",[s._v("**HotSpot è™šæ‹Ÿæœºä¸­å†…ç½®äº†ä¸¤ä¸ª(æˆ–ä¸‰ä¸ª)**â€‹"),a("mark",[a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨")])]),s._v('â€‹ **, å…¶ä¸­æœ‰ä¸¤ä¸ªç¼–è¯‘å™¨å­˜åœ¨å·²ä¹…, åˆ†åˆ«è¢«ç§°ä¸º "**â€‹'),a("mark",[a("strong",[s._v("å®¢æˆ·ç«¯ç¼–è¯‘å™¨")])]),s._v('â€‹ **"(Client Compiler)å’Œ "**â€‹'),a("mark",[a("strong",[s._v("æœåŠ¡ç«¯ç¼–è¯‘å™¨")])]),s._v("â€‹ "),a("strong",[s._v('"(Server Compiler), æˆ–è€…ç®€ç§°ä¸º')]),s._v(" "),a("mark",[a("strong",[s._v("C1 ç¼–è¯‘å™¨å’Œ C2 ç¼–è¯‘å™¨")])]),s._v("â€‹ "),a("strong",[s._v(", ç¬¬ä¸‰ä¸ªæ˜¯åœ¨ JDK 10 æ—¶æ‰å‡ºç°çš„, é•¿æœŸç›®æ ‡æ˜¯ä»£æ›¿ C2 çš„")]),s._v(" "),a("mark",[a("strong",[s._v("Graal ç¼–è¯‘å™¨")])]),s._v("â€‹ "),a("strong",[s._v(". Graal ç¼–è¯‘å™¨ç›®å‰è¿˜å¤„äºå®éªŒçŠ¶æ€, æœ¬ç« å°†å®‰æ’å‡ºä¸“é—¨çš„å°èŠ‚å¯¹å®ƒè®²è§£ä¸å®æˆ˜, åœ¨æœ¬èŠ‚é‡Œå°†é‡ç‚¹å…³æ³¨ä¼ ç»Ÿçš„ C1, C2 ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹")]),s._v(".")]),s._v(" "),a("p",[s._v("åœ¨åˆ†å±‚ç¼–è¯‘(Tiered Compilation)çš„å·¥ä½œæ¨¡å¼å‡ºç°ä»¥å‰, HotSpot è™šæ‹Ÿæœºé€šå¸¸æ˜¯"),a("strong",[s._v("é‡‡ç”¨è§£é‡Šå™¨ä¸å…¶ä¸­ä¸€ä¸ªç¼–è¯‘å™¨ç›´æ¥æ­é…çš„æ–¹å¼å·¥ä½œ")]),s._v(', ç¨‹åºä½¿ç”¨å“ªä¸ªç¼–è¯‘å™¨, åªå–å†³äºè™šæ‹Ÿæœºè¿è¡Œçš„æ¨¡å¼, HotSpot è™šæ‹Ÿæœºä¼šæ ¹æ®è‡ªèº«ç‰ˆæœ¬ä¸å®¿ä¸»æœºå™¨çš„ç¡¬ä»¶æ€§èƒ½è‡ªåŠ¨é€‰æ‹©è¿è¡Œæ¨¡å¼, ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ "'),a("code",[s._v("-client")]),s._v('â€‹" æˆ– "'),a("code",[s._v("-server")]),s._v('â€‹" å‚æ•°å»å¼ºåˆ¶æŒ‡å®šè™šæ‹Ÿæœºè¿è¡Œåœ¨å®¢æˆ·ç«¯æ¨¡å¼è¿˜æ˜¯æœåŠ¡ç«¯æ¨¡å¼.')]),s._v(" "),a("p",[s._v("æ— è®ºé‡‡ç”¨çš„ç¼–è¯‘å™¨æ˜¯å®¢æˆ·ç«¯ç¼–è¯‘å™¨è¿˜æ˜¯æœåŠ¡ç«¯ç¼–è¯‘å™¨, "),a("strong",[s._v('è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨æ­é…ä½¿ç”¨çš„æ–¹å¼åœ¨è™šæ‹Ÿæœºä¸­è¢«ç§°ä¸º "æ··åˆæ¨¡å¼"(Mixed Mode)')]),s._v(' , ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•° "'),a("code",[s._v("-Xint")]),s._v('â€‹" å¼ºåˆ¶è™šæ‹Ÿæœºè¿è¡Œäº "è§£é‡Šæ¨¡å¼"(Interpreted Mode), è¿™æ—¶å€™ç¼–è¯‘å™¨å®Œå…¨ä¸ä»‹å…¥å·¥ä½œ, å…¨éƒ¨ä»£ç éƒ½ä½¿ç”¨è§£é‡Šæ–¹å¼æ‰§è¡Œ. å¦å¤–, ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•° "'),a("code",[s._v("-Xcomp")]),s._v('â€‹" å¼ºåˆ¶è™šæ‹Ÿæœºè¿è¡Œäº "ç¼–è¯‘æ¨¡å¼"(Compiled Mode), è¿™æ—¶å€™å°†'),a("strong",[s._v("ä¼˜å…ˆé‡‡ç”¨ç¼–è¯‘æ–¹å¼")]),s._v('æ‰§è¡Œç¨‹åº, ä½†æ˜¯è§£é‡Šå™¨ä»ç„¶è¦åœ¨ç¼–è¯‘æ— æ³•è¿›è¡Œçš„æƒ…å†µä¸‹ä»‹å…¥æ‰§è¡Œè¿‡ç¨‹. å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºçš„ "'),a("code",[s._v("-version")]),s._v('â€‹" å‘½ä»¤çš„è¾“å‡ºç»“æœæ˜¾ç¤ºå‡ºè¿™ä¸‰ç§æ¨¡å¼, å†…å®¹å¦‚ä»£ç æ¸…å• 11-1 æ‰€ç¤º, è¯·è¯»è€…æ³¨æ„é»‘ä½“å­—éƒ¨åˆ†.')]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-1 è™šæ‹Ÿæœºæ‰§è¡Œæ¨¡å¼")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11.0.3"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-04-16 LTS\nJava"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SE Runtime Environment "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nJava HotSpot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS, mixed mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xint")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11.0.3"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-04-16 LTS\nJava"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SE Runtime Environment "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nJava HotSpot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS, interpreted mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xcomp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11.0.3"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-04-16 LTS\nJava"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SE Runtime Environment "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nJava HotSpot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".3+12-LTS, compiled mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("strong",[s._v("ç”±äºå³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æœ¬åœ°ä»£ç éœ€è¦å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´, é€šå¸¸è¦ç¼–è¯‘å‡ºä¼˜åŒ–ç¨‹åº¦è¶Šé«˜çš„ä»£ç , æ‰€èŠ±è´¹çš„æ—¶é—´ä¾¿ä¼šè¶Šé•¿")]),s._v("; è€Œä¸”æƒ³è¦ç¼–è¯‘å‡ºä¼˜åŒ–ç¨‹åº¦æ›´é«˜çš„ä»£ç , è§£é‡Šå™¨å¯èƒ½è¿˜è¦æ›¿ç¼–è¯‘å™¨æ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯, è¿™å¯¹è§£é‡Šæ‰§è¡Œé˜¶æ®µçš„é€Ÿåº¦ä¹Ÿæœ‰æ‰€å½±å“. ä¸ºäº†åœ¨"),a("strong",[s._v("ç¨‹åºå¯åŠ¨å“åº”é€Ÿåº¦ä¸è¿è¡Œæ•ˆç‡ä¹‹é—´è¾¾åˆ°æœ€ä½³å¹³è¡¡")]),s._v(", HotSpot è™šæ‹Ÿæœºåœ¨ç¼–è¯‘å­ç³»ç»Ÿä¸­åŠ å…¥äº†"),a("strong",[s._v("åˆ†å±‚ç¼–è¯‘")]),s._v("çš„åŠŸèƒ½, åˆ†å±‚ç¼–è¯‘çš„æ¦‚å¿µå…¶å®å¾ˆæ—©å°±å·²ç»æå‡º, ä½†ç›´åˆ° JDK 6 æ—¶æœŸæ‰è¢«åˆæ­¥å®ç°, åæ¥ä¸€ç›´å¤„äºæ”¹è¿›é˜¶æ®µ, æœ€ç»ˆåœ¨ JDK 7 çš„æœåŠ¡ç«¯æ¨¡å¼è™šæ‹Ÿæœºä¸­ä½œä¸ºé»˜è®¤ç¼–è¯‘ç­–ç•¥è¢«å¼€å¯. "),a("mark",[a("strong",[s._v("åˆ†å±‚ç¼–è¯‘æ ¹æ®ç¼–è¯‘å™¨ç¼–è¯‘, ä¼˜åŒ–çš„è§„æ¨¡ä¸è€—æ—¶, åˆ’åˆ†å‡ºä¸åŒçš„ç¼–è¯‘å±‚æ¬¡")])]),s._v(", å…¶ä¸­åŒ…æ‹¬:")]),s._v(" "),a("ul",[a("li",[s._v("ç¬¬ 0 å±‚. "),a("strong",[s._v("ç¨‹åºçº¯è§£é‡Šæ‰§è¡Œ")]),s._v(", å¹¶ä¸”è§£é‡Šå™¨ä¸å¼€å¯æ€§èƒ½ç›‘æ§åŠŸèƒ½(Profiling).")]),s._v(" "),a("li",[s._v("ç¬¬ 1 å±‚. "),a("strong",[s._v("ä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç æ¥è¿è¡Œ")]),s._v(", è¿›è¡Œç®€å•å¯é çš„ç¨³å®šä¼˜åŒ–, ä¸å¼€å¯æ€§èƒ½ç›‘æ§åŠŸèƒ½.")]),s._v(" "),a("li",[s._v("ç¬¬ 2 å±‚. ä»ç„¶ä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œ, ä»…å¼€å¯æ–¹æ³•åŠå›è¾¹æ¬¡æ•°ç»Ÿè®¡ç­‰æœ‰é™çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½.")]),s._v(" "),a("li",[s._v("ç¬¬ 3 å±‚. ä»ç„¶ä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œ, å¼€å¯å…¨éƒ¨æ€§èƒ½ç›‘æ§, é™¤äº†ç¬¬ 2 å±‚çš„ç»Ÿè®¡ä¿¡æ¯å¤–, è¿˜ä¼šæ”¶é›†å¦‚åˆ†æ”¯è·³è½¬, è™šæ–¹æ³•è°ƒç”¨ç‰ˆæœ¬ç­‰å…¨éƒ¨çš„ç»Ÿè®¡ä¿¡æ¯.")]),s._v(" "),a("li",[s._v("ç¬¬ 4 å±‚. "),a("strong",[s._v("ä½¿ç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç , ç›¸æ¯”èµ·å®¢æˆ·ç«¯ç¼–è¯‘å™¨, æœåŠ¡ç«¯ç¼–è¯‘å™¨ä¼šå¯ç”¨æ›´å¤šç¼–è¯‘è€—æ—¶æ›´é•¿çš„ä¼˜åŒ–, è¿˜ä¼šæ ¹æ®æ€§èƒ½ç›‘æ§ä¿¡æ¯è¿›è¡Œä¸€äº›ä¸å¯é çš„æ¿€è¿›ä¼˜åŒ–")]),s._v(".")])]),s._v(" "),a("p",[s._v("ä»¥ä¸Šå±‚æ¬¡å¹¶ä¸æ˜¯å›ºå®šä¸å˜çš„, æ ¹æ®ä¸åŒçš„è¿è¡Œå‚æ•°å’Œç‰ˆæœ¬, è™šæ‹Ÿæœºå¯ä»¥è°ƒæ•´åˆ†å±‚çš„æ•°é‡. å„å±‚æ¬¡ç¼–è¯‘ä¹‹é—´çš„äº¤äº’, è½¬æ¢å…³ç³»å¦‚å›¾ 11-2 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00197-20240302133505-wp87tce.jpg",alt:"",title:"å›¾11-2ã€€åˆ†å±‚ç¼–è¯‘çš„äº¤äº’å…³ç³»"}})]),s._v(" "),a("p",[a("strong",[s._v("å®æ–½åˆ†å±‚ç¼–è¯‘å, è§£é‡Šå™¨, å®¢æˆ·ç«¯ç¼–è¯‘å™¨å’ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨å°±ä¼šåŒæ—¶å·¥ä½œ, çƒ­ç‚¹ä»£ç éƒ½å¯èƒ½ä¼šè¢«å¤šæ¬¡ç¼–è¯‘, ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨è·å–æ›´é«˜çš„ç¼–è¯‘é€Ÿåº¦, ç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨æ¥è·å–æ›´å¥½çš„ç¼–è¯‘è´¨é‡, åœ¨è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ä¹Ÿæ— é¡»é¢å¤–æ‰¿æ‹…æ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯çš„ä»»åŠ¡, è€Œåœ¨æœåŠ¡ç«¯ç¼–è¯‘å™¨é‡‡ç”¨é«˜å¤æ‚åº¦çš„ä¼˜åŒ–ç®—æ³•æ—¶, å®¢æˆ·ç«¯ç¼–è¯‘å™¨å¯å…ˆé‡‡ç”¨ç®€å•ä¼˜åŒ–æ¥ä¸ºå®ƒäº‰å–æ›´å¤šçš„ç¼–è¯‘æ—¶é—´")]),s._v(".")]),s._v(" "),a("h5",{attrs:{id:"_3-ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶"}},[s._v("#")]),s._v(" 3.ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶")]),s._v(" "),a("h6",{attrs:{id:"_1-çƒ­ç‚¹ä»£ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-çƒ­ç‚¹ä»£ç "}},[s._v("#")]),s._v(" (1)çƒ­ç‚¹ä»£ç ")]),s._v(" "),a("p",[s._v('åœ¨æœ¬ç« æ¦‚è¿°ä¸­æåˆ°äº†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šè¢«å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘çš„ç›®æ ‡æ˜¯ "'),a("strong",[s._v("çƒ­ç‚¹ä»£ç ")]),s._v('", è¿™é‡Œæ‰€æŒ‡çš„çƒ­ç‚¹ä»£ç ä¸»è¦æœ‰ä¸¤ç±», åŒ…æ‹¬:')]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("è¢«å¤šæ¬¡è°ƒç”¨çš„æ–¹æ³•")]),s._v(".")]),s._v(" "),a("li",[a("strong",[s._v("è¢«å¤šæ¬¡æ‰§è¡Œçš„å¾ªç¯ä½“")]),s._v(".")])]),s._v(" "),a("p",[s._v('å‰è€…å¾ˆå¥½ç†è§£, ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨å¾—å¤šäº†, æ–¹æ³•ä½“å†…ä»£ç æ‰§è¡Œçš„æ¬¡æ•°è‡ªç„¶å°±å¤š, å®ƒæˆä¸º "çƒ­ç‚¹ä»£ç " æ˜¯ç†æ‰€å½“ç„¶çš„. è€Œåè€…åˆ™æ˜¯ä¸ºäº†è§£å†³å½“ä¸€ä¸ªæ–¹æ³•åªè¢«è°ƒç”¨è¿‡ä¸€æ¬¡æˆ–å°‘é‡çš„å‡ æ¬¡, ä½†æ˜¯æ–¹æ³•ä½“å†…éƒ¨å­˜åœ¨å¾ªç¯æ¬¡æ•°è¾ƒå¤šçš„å¾ªç¯ä½“, è¿™æ ·å¾ªç¯ä½“çš„ä»£ç ä¹Ÿè¢«é‡å¤æ‰§è¡Œå¤šæ¬¡, å› æ­¤è¿™äº›ä»£ç ä¹Ÿåº”è¯¥è®¤ä¸ºæ˜¯ "çƒ­ç‚¹ä»£ç ".')]),s._v(" "),a("p",[a("strong",[s._v("å¯¹äºè¿™ä¸¤ç§æƒ…å†µ, ç¼–è¯‘çš„ç›®æ ‡å¯¹è±¡éƒ½æ˜¯æ•´ä¸ªæ–¹æ³•ä½“")]),s._v(", è€Œä¸ä¼šæ˜¯å•ç‹¬çš„å¾ªç¯ä½“. ç¬¬ä¸€ç§æƒ…å†µ, ç”±äºæ˜¯ä¾é æ–¹æ³•è°ƒç”¨è§¦å‘çš„ç¼–è¯‘, é‚£ç¼–è¯‘å™¨ç†æ‰€å½“ç„¶åœ°ä¼šä»¥æ•´ä¸ªæ–¹æ³•ä½œä¸ºç¼–è¯‘å¯¹è±¡, è¿™ç§ç¼–è¯‘ä¹Ÿæ˜¯è™šæ‹Ÿæœºä¸­æ ‡å‡†çš„å³æ—¶ç¼–è¯‘æ–¹å¼. è€Œå¯¹äºåä¸€ç§æƒ…å†µ, å°½ç®¡ç¼–è¯‘åŠ¨ä½œæ˜¯ç”±å¾ªç¯ä½“æ‰€è§¦å‘çš„, çƒ­ç‚¹åªæ˜¯æ–¹æ³•çš„ä¸€éƒ¨åˆ†, ä½†ç¼–è¯‘å™¨ä¾ç„¶å¿…é¡»ä»¥"),a("strong",[s._v("æ•´ä¸ªæ–¹æ³•ä½œä¸ºç¼–è¯‘å¯¹è±¡")]),s._v(', åªæ˜¯æ‰§è¡Œå…¥å£(ä»æ–¹æ³•ç¬¬å‡ æ¡å­—èŠ‚ç æŒ‡ä»¤å¼€å§‹æ‰§è¡Œ)ä¼šç¨æœ‰ä¸åŒ, ç¼–è¯‘æ—¶ä¼šä¼ å…¥æ‰§è¡Œå…¥å£ç‚¹å­—èŠ‚ç åºå·(Byte Code Index, BCI). è¿™ç§ç¼–è¯‘æ–¹å¼å› ä¸ºç¼–è¯‘å‘ç”Ÿåœ¨æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­, å› æ­¤è¢«å¾ˆå½¢è±¡åœ°ç§°ä¸º "'),a("strong",[s._v("æ ˆä¸Šæ›¿æ¢")]),s._v('"(On Stack Replacement, OSR), å³æ–¹æ³•çš„æ ˆå¸§è¿˜åœ¨æ ˆä¸Š, æ–¹æ³•å°±è¢«æ›¿æ¢äº†.')]),s._v(" "),a("p",[s._v('è¯»è€…å¯èƒ½è¿˜ä¼šæœ‰ç–‘é—®, åœ¨ä¸Šé¢çš„æè¿°é‡Œ, æ— è®ºæ˜¯ "å¤šæ¬¡æ‰§è¡Œçš„æ–¹æ³•", è¿˜æ˜¯ "å¤šæ¬¡æ‰§è¡Œçš„ä»£ç å—", æ‰€è°“ "å¤šæ¬¡" åªå®šæ€§ä¸å®šé‡, å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“ä¸¥è°¨çš„ç”¨è¯­, '),a("strong",[s._v('é‚£åˆ°åº•å¤šå°‘æ¬¡æ‰ç®— "å¤šæ¬¡" å‘¢')]),s._v("? è¿˜æœ‰ä¸€ä¸ªé—®é¢˜, å°±æ˜¯ Java è™šæ‹Ÿæœºæ˜¯å¦‚ä½•ç»Ÿè®¡æŸä¸ªæ–¹æ³•æˆ–æŸæ®µä»£ç è¢«æ‰§è¡Œè¿‡å¤šå°‘æ¬¡çš„å‘¢? è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜, ä¹Ÿå°±è§£ç­”äº†"),a("strong",[s._v("å³æ—¶ç¼–è¯‘è¢«è§¦å‘çš„æ¡ä»¶")]),s._v(".")]),s._v(" "),a("h6",{attrs:{id:"_2-çƒ­ç‚¹æ¢æµ‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-çƒ­ç‚¹æ¢æµ‹"}},[s._v("#")]),s._v(" (2)çƒ­ç‚¹æ¢æµ‹")]),s._v(" "),a("blockquote",[a("p",[s._v("çƒ­ç‚¹æ¢æµ‹-å¦‚ä½•è¿›è¡Œçƒ­ç‚¹ä»£ç åˆ¤æ–­? å•¥æ—¶å€™è§¦å‘?")])]),s._v(" "),a("p",[a("strong",[s._v("è¦çŸ¥é“æŸæ®µä»£ç æ˜¯ä¸æ˜¯çƒ­ç‚¹ä»£ç , æ˜¯ä¸æ˜¯éœ€è¦è§¦å‘å³æ—¶ç¼–è¯‘")]),s._v(', è¿™ä¸ªè¡Œä¸ºç§°ä¸º "'),a("mark",[a("strong",[s._v("çƒ­ç‚¹æ¢æµ‹")])]),s._v('"(Hot Spot Code Detection), å…¶å®'),a("strong",[s._v("è¿›è¡Œçƒ­ç‚¹æ¢æµ‹å¹¶ä¸ä¸€å®šè¦çŸ¥é“æ–¹æ³•å…·ä½“è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡")]),s._v(", ç›®å‰ä¸»æµçš„çƒ­ç‚¹æ¢æµ‹åˆ¤å®šæ–¹å¼æœ‰ä¸¤ç§, åˆ†åˆ«æ˜¯:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹")]),s._v(". é‡‡ç”¨è¿™ç§æ–¹æ³•çš„è™šæ‹Ÿæœºä¼šå‘¨æœŸæ€§åœ°æ£€æŸ¥å„ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆé¡¶, å¦‚æœå‘ç°æŸä¸ª(æˆ–æŸäº›)æ–¹æ³•"),a("strong",[s._v("ç»å¸¸å‡ºç°åœ¨æ ˆé¡¶")]),s._v(', é‚£è¿™ä¸ªæ–¹æ³•å°±æ˜¯ "çƒ­ç‚¹æ–¹æ³•". åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹çš„å¥½å¤„æ˜¯å®ç°ç®€å•é«˜æ•ˆ, è¿˜å¯ä»¥å¾ˆå®¹æ˜“åœ°è·å–æ–¹æ³•è°ƒç”¨å…³ç³»(å°†è°ƒç”¨å †æ ˆå±•å¼€å³å¯), ç¼ºç‚¹æ˜¯å¾ˆéš¾ç²¾ç¡®åœ°ç¡®è®¤ä¸€ä¸ªæ–¹æ³•çš„çƒ­åº¦, å®¹æ˜“å› ä¸ºå—åˆ°çº¿ç¨‹é˜»å¡æˆ–åˆ«çš„å¤–ç•Œå› ç´ çš„å½±å“è€Œæ‰°ä¹±çƒ­ç‚¹æ¢æµ‹.')]),s._v(" "),a("li",[a("strong",[s._v("åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹")]),s._v(". é‡‡ç”¨è¿™ç§æ–¹æ³•çš„è™šæ‹Ÿæœºä¼š"),a("strong",[s._v("ä¸ºæ¯ä¸ªæ–¹æ³•(ç”šè‡³æ˜¯ä»£ç å—)å»ºç«‹è®¡æ•°å™¨")]),s._v(', ç»Ÿè®¡æ–¹æ³•çš„æ‰§è¡Œæ¬¡æ•°, å¦‚æœæ‰§è¡Œæ¬¡æ•°è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼å°±è®¤ä¸ºå®ƒæ˜¯ "çƒ­ç‚¹æ–¹æ³•". è¿™ç§ç»Ÿè®¡æ–¹æ³•å®ç°èµ·æ¥è¦éº»çƒ¦ä¸€äº›, éœ€è¦ä¸ºæ¯ä¸ªæ–¹æ³•å»ºç«‹å¹¶ç»´æŠ¤è®¡æ•°å™¨, è€Œä¸”ä¸èƒ½ç›´æ¥è·å–åˆ°æ–¹æ³•çš„è°ƒç”¨å…³ç³». ä½†æ˜¯å®ƒçš„ç»Ÿè®¡ç»“æœç›¸å¯¹æ¥è¯´æ›´åŠ ç²¾ç¡®ä¸¥è°¨.')])]),s._v(" "),a("p",[s._v("è¿™ä¸¤ç§æ¢æµ‹æ‰‹æ®µåœ¨å•†ç”¨ Java è™šæ‹Ÿæœºä¸­éƒ½æœ‰ä½¿ç”¨åˆ°, è­¬å¦‚ J9 ç”¨è¿‡ç¬¬ä¸€ç§é‡‡æ ·çƒ­ç‚¹æ¢æµ‹, è€Œ"),a("strong",[s._v("åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹æ–¹æ³•")]),s._v(", ä¸ºäº†å®ç°çƒ­ç‚¹è®¡æ•°, HotSpot ä¸ºæ¯ä¸ªæ–¹æ³•å‡†å¤‡äº†ä¸¤ç±»è®¡æ•°å™¨: "),a("mark",[a("strong",[s._v("æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨")])]),s._v("(Invocation Counter)å’Œ"),a("mark",[a("strong",[s._v("å›è¾¹è®¡æ•°å™¨")])]),s._v('(Back Edge Counter, "å›è¾¹" çš„æ„æ€å°±æ˜¯æŒ‡åœ¨å¾ªç¯è¾¹ç•Œå¾€å›è·³è½¬). å½“è™šæ‹Ÿæœºè¿è¡Œå‚æ•°ç¡®å®šçš„å‰æä¸‹, '),a("strong",[s._v("è¿™ä¸¤ä¸ªè®¡æ•°å™¨éƒ½æœ‰ä¸€ä¸ªæ˜ç¡®çš„é˜ˆå€¼, è®¡æ•°å™¨é˜ˆå€¼ä¸€æ—¦æº¢å‡º, å°±ä¼šè§¦å‘å³æ—¶ç¼–è¯‘")]),s._v(".")]),s._v(" "),a("h6",{attrs:{id:"_3-æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨"}},[s._v("#")]),s._v(" (3)æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨")]),s._v(" "),a("p",[s._v("é¦–å…ˆæ¥çœ‹çœ‹"),a("mark",[a("strong",[s._v("æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨")])]),s._v(". é¡¾åæ€ä¹‰, "),a("strong",[s._v("è¿™ä¸ªè®¡æ•°å™¨å°±æ˜¯ç”¨äºç»Ÿè®¡æ–¹æ³•è¢«è°ƒç”¨çš„æ¬¡æ•°")]),s._v(", å®ƒçš„é»˜è®¤é˜ˆå€¼åœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹æ˜¯ 1500 æ¬¡, åœ¨"),a("strong",[s._v("æœåŠ¡ç«¯æ¨¡å¼ä¸‹æ˜¯ 10000 æ¬¡")]),s._v(", è¿™ä¸ªé˜ˆå€¼å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºå‚æ•° "),a("code",[s._v("-XX: CompileThreshold")]),s._v("â€‹ æ¥äººä¸ºè®¾å®š. "),a("strong",[s._v("å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶, è™šæ‹Ÿæœºä¼šå…ˆæ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦å­˜åœ¨è¢«å³æ—¶ç¼–è¯‘è¿‡çš„ç‰ˆæœ¬, å¦‚æœå­˜åœ¨, åˆ™ä¼˜å…ˆä½¿ç”¨ç¼–è¯‘åçš„æœ¬åœ°ä»£ç æ¥æ‰§è¡Œ")]),s._v(". å¦‚æœä¸å­˜åœ¨å·²è¢«ç¼–è¯‘è¿‡çš„ç‰ˆæœ¬, åˆ™å°†è¯¥æ–¹æ³•çš„è°ƒç”¨è®¡æ•°å™¨å€¼åŠ ä¸€, ç„¶ååˆ¤æ–­æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ä¸å›è¾¹è®¡æ•°å™¨å€¼ä¹‹å’Œæ˜¯å¦è¶…è¿‡æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨çš„é˜ˆå€¼. "),a("strong",[s._v("ä¸€æ—¦å·²è¶…è¿‡é˜ˆå€¼çš„è¯, å°†ä¼šå‘å³æ—¶ç¼–è¯‘å™¨æäº¤ä¸€ä¸ªè¯¥æ–¹æ³•çš„ä»£ç ç¼–è¯‘è¯·æ±‚")]),s._v(".")]),s._v(" "),a("p",[s._v("å¦‚æœæ²¡æœ‰åšè¿‡ä»»ä½•è®¾ç½®, æ‰§è¡Œå¼•æ“é»˜è®¤ä¸ä¼šåŒæ­¥ç­‰å¾…ç¼–è¯‘è¯·æ±‚å®Œæˆ, è€Œæ˜¯ç»§ç»­è¿›å…¥è§£é‡Šå™¨æŒ‰ç…§è§£é‡Šæ–¹å¼æ‰§è¡Œå­—èŠ‚ç , ç›´åˆ°æäº¤çš„è¯·æ±‚è¢«å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘å®Œæˆ. "),a("strong",[s._v("å½“ç¼–è¯‘å·¥ä½œå®Œæˆå, è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å…¥å£åœ°å€å°±ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æ”¹å†™æˆæ–°å€¼, ä¸‹ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶å°±ä¼šä½¿ç”¨å·²ç¼–è¯‘çš„ç‰ˆæœ¬äº†")]),s._v(", æ•´ä¸ªå³æ—¶ç¼–è¯‘çš„äº¤äº’è¿‡ç¨‹å¦‚å›¾ 11-3 æ‰€ç¤º.")]),s._v(" "),a("p",[s._v("åœ¨é»˜è®¤è®¾ç½®ä¸‹, æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ç»Ÿè®¡çš„å¹¶ä¸æ˜¯æ–¹æ³•è¢«è°ƒç”¨çš„ç»å¯¹æ¬¡æ•°, è€Œæ˜¯ä¸€ä¸ªç›¸å¯¹çš„"),a("strong",[s._v("æ‰§è¡Œé¢‘ç‡")]),s._v(", å³ä¸€æ®µæ—¶é—´ä¹‹å†…æ–¹æ³•è¢«è°ƒç”¨çš„æ¬¡æ•°. å½“è¶…è¿‡ä¸€å®šçš„æ—¶é—´é™åº¦, å¦‚æœæ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ä»ç„¶ä¸è¶³ä»¥è®©å®ƒæäº¤ç»™å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘, é‚£è¯¥æ–¹æ³•çš„è°ƒç”¨è®¡æ•°å™¨å°±ä¼šè¢«"),a("strong",[s._v("å‡å°‘ä¸€åŠ")]),s._v(", è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º"),a("strong",[s._v("æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨çƒ­åº¦çš„è¡°å‡")]),s._v("(Counter Decay), è€Œè¿™æ®µæ—¶é—´å°±ç§°ä¸ºæ­¤æ–¹æ³•ç»Ÿè®¡çš„"),a("strong",[s._v("åŠè¡°å‘¨æœŸ")]),s._v("(Counter Half Life Time), è¿›è¡Œçƒ­åº¦è¡°å‡çš„åŠ¨ä½œæ˜¯åœ¨è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶é¡ºä¾¿è¿›è¡Œçš„, å¯ä»¥ä½¿ç”¨è™šæ‹Ÿæœºå‚æ•° "),a("code",[s._v("-XX: -UseCounterDecay")]),s._v("â€‹ æ¥å…³é—­çƒ­åº¦è¡°å‡, "),a("strong",[s._v("è®©æ–¹æ³•è®¡æ•°å™¨ç»Ÿè®¡æ–¹æ³•è°ƒç”¨çš„ç»å¯¹æ¬¡æ•°, è¿™æ ·åªè¦ç³»ç»Ÿè¿è¡Œæ—¶é—´è¶³å¤Ÿé•¿, ç¨‹åºä¸­ç»å¤§éƒ¨åˆ†æ–¹æ³•éƒ½ä¼šè¢«ç¼–è¯‘æˆæœ¬åœ°ä»£ç ")]),s._v(". å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨ "),a("code",[s._v("-XX: CounterHalfLifeTime")]),s._v("â€‹ å‚æ•°è®¾ç½®åŠè¡°å‘¨æœŸçš„æ—¶é—´, å•ä½æ˜¯ç§’.")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522155456984.png",alt:"",title:"å›¾11-3 æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨è§¦å‘å³æ—¶ç¼–è¯‘"}})]),s._v(" "),a("p",[s._v("â€")]),s._v(" "),a("h6",{attrs:{id:"_4-å›è¾¹è®¡æ•°å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-å›è¾¹è®¡æ•°å™¨"}},[s._v("#")]),s._v(" (4)å›è¾¹è®¡æ•°å™¨")]),s._v(" "),a("p",[s._v("å†æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªè®¡æ•°å™¨â€”â€”"),a("mark",[a("strong",[s._v("å›è¾¹è®¡æ•°å™¨")])]),s._v(", å®ƒçš„ä½œç”¨æ˜¯"),a("mark",[a("strong",[s._v("ç»Ÿè®¡ä¸€ä¸ªæ–¹æ³•ä¸­å¾ªç¯ä½“ä»£ç æ‰§è¡Œçš„æ¬¡æ•°")])]),s._v(", åœ¨å­—èŠ‚ç ä¸­"),a("strong",[s._v('é‡åˆ°æ§åˆ¶æµå‘åè·³è½¬çš„æŒ‡ä»¤å°±ç§°ä¸º "å›è¾¹(Back Edge)"')]),s._v(" , å¾ˆæ˜¾ç„¶å»ºç«‹å›è¾¹è®¡æ•°å™¨ç»Ÿè®¡çš„ç›®çš„æ˜¯ä¸ºäº†è§¦å‘æ ˆä¸Šçš„æ›¿æ¢ç¼–è¯‘.")]),s._v(" "),a("p",[s._v("å…³äºå›è¾¹è®¡æ•°å™¨çš„é˜ˆå€¼, è™½ç„¶ HotSpot è™šæ‹Ÿæœºä¹Ÿæä¾›äº†ä¸€ä¸ªç±»ä¼¼äºæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨é˜ˆå€¼ "),a("code",[s._v("-XX: CompileThreshold")]),s._v("â€‹ çš„å‚æ•° "),a("code",[s._v("-XX: BackEdgeThreshold")]),s._v("â€‹ ä¾›ç”¨æˆ·è®¾ç½®, ä½†æ˜¯å½“å‰çš„ HotSpot è™šæ‹Ÿæœºå®é™…ä¸Šå¹¶æœªä½¿ç”¨æ­¤å‚æ•°, è€Œå¿…é¡»è®¾ç½®å¦å¤–ä¸€ä¸ªå‚æ•° "),a("code",[s._v("-XX: OnStackReplacePercentage")]),s._v("â€‹ æ¥é—´æ¥è°ƒæ•´å›è¾¹è®¡æ•°å™¨çš„é˜ˆå€¼, å…¶è®¡ç®—å…¬å¼æœ‰å¦‚ä¸‹ä¸¤ç§.")]),s._v(" "),a("ul",[a("li",[s._v("è™šæ‹Ÿæœºè¿è¡Œåœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹, å›è¾¹è®¡æ•°å™¨é˜ˆå€¼è®¡ç®—å…¬å¼ä¸º: æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨é˜ˆå€¼("),a("code",[s._v("-XX: CompileThreshold")]),s._v("â€‹)ä¹˜ä»¥ OSR æ¯”ç‡("),a("code",[s._v("-XX: OnStackReplacePercentage")]),s._v("â€‹)é™¤ä»¥ 100. å…¶ä¸­ "),a("code",[s._v("-XX: OnStackReplacePercentage")]),s._v("â€‹ é»˜è®¤å€¼ä¸º 933, å¦‚æœéƒ½å–é»˜è®¤å€¼, é‚£å®¢æˆ·ç«¯æ¨¡å¼è™šæ‹Ÿæœºçš„å›è¾¹è®¡æ•°å™¨çš„é˜ˆå€¼ä¸º13995.")]),s._v(" "),a("li",[s._v("è™šæ‹Ÿæœºè¿è¡Œåœ¨æœåŠ¡ç«¯æ¨¡å¼ä¸‹, å›è¾¹è®¡æ•°å™¨é˜ˆå€¼çš„è®¡ç®—å…¬å¼ä¸º: æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨é˜ˆå€¼("),a("code",[s._v("-XX: CompileThreshold")]),s._v("â€‹)ä¹˜ä»¥(OSR æ¯”ç‡("),a("code",[s._v("-XX: OnStackReplacePercentage")]),s._v("â€‹)å‡å»è§£é‡Šå™¨ç›‘æ§æ¯”ç‡("),a("code",[s._v("-XX: InterpreterProfilePercentage")]),s._v("â€‹)çš„å·®å€¼)é™¤ä»¥ 100. å…¶ä¸­ "),a("code",[s._v("-XX: OnStack ReplacePercentage")]),s._v("â€‹ é»˜è®¤å€¼ä¸º 140, "),a("code",[s._v("-XX: InterpreterProfilePercentage")]),s._v("â€‹ é»˜è®¤å€¼ä¸º 33, å¦‚æœéƒ½å–é»˜è®¤å€¼, é‚£æœåŠ¡ç«¯æ¨¡å¼è™šæ‹Ÿæœºå›è¾¹è®¡æ•°å™¨çš„é˜ˆå€¼ä¸º 10700.")])]),s._v(" "),a("p",[a("strong",[s._v("å½“è§£é‡Šå™¨é‡åˆ°ä¸€æ¡å›è¾¹æŒ‡ä»¤æ—¶, ä¼šå…ˆæŸ¥æ‰¾å°†è¦æ‰§è¡Œçš„ä»£ç ç‰‡æ®µæ˜¯å¦æœ‰å·²ç»ç¼–è¯‘å¥½çš„ç‰ˆæœ¬, å¦‚æœæœ‰çš„è¯, å®ƒå°†ä¼šä¼˜å…ˆæ‰§è¡Œå·²ç¼–è¯‘çš„ä»£ç , å¦åˆ™å°±æŠŠå›è¾¹è®¡æ•°å™¨çš„å€¼åŠ ä¸€, ç„¶ååˆ¤æ–­æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ä¸å›è¾¹è®¡æ•°å™¨å€¼ä¹‹å’Œæ˜¯å¦è¶…è¿‡å›è¾¹è®¡æ•°å™¨çš„é˜ˆå€¼")]),s._v(". å½“è¶…è¿‡é˜ˆå€¼çš„æ—¶å€™, å°†ä¼šæäº¤ä¸€ä¸ªæ ˆä¸Šæ›¿æ¢ç¼–è¯‘è¯·æ±‚, å¹¶ä¸”æŠŠå›è¾¹è®¡æ•°å™¨çš„å€¼ç¨å¾®é™ä½ä¸€äº›, ä»¥ä¾¿ç»§ç»­åœ¨è§£é‡Šå™¨ä¸­æ‰§è¡Œå¾ªç¯, ç­‰å¾…ç¼–è¯‘å™¨è¾“å‡ºç¼–è¯‘ç»“æœ, æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹å¦‚å›¾ 11-4 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522155952582.png",alt:"",title:"å›¾11-4 å›è¾¹è®¡æ•°å™¨è§¦å‘å³æ—¶ç¼–è¯‘"}})]),s._v(" "),a("p",[s._v("ä¸æ–¹æ³•è®¡æ•°å™¨ä¸åŒ, "),a("strong",[s._v("å›è¾¹è®¡æ•°å™¨æ²¡æœ‰è®¡æ•°çƒ­åº¦è¡°å‡çš„è¿‡ç¨‹, å› æ­¤è¿™ä¸ªè®¡æ•°å™¨ç»Ÿè®¡çš„å°±æ˜¯è¯¥æ–¹æ³•å¾ªç¯æ‰§è¡Œçš„ç»å¯¹æ¬¡æ•°")]),s._v(". å½“è®¡æ•°å™¨æº¢å‡ºçš„æ—¶å€™, å®ƒè¿˜ä¼šæŠŠæ–¹æ³•è®¡æ•°å™¨çš„å€¼ä¹Ÿè°ƒæ•´åˆ°æº¢å‡ºçŠ¶æ€, è¿™æ ·ä¸‹æ¬¡å†è¿›å…¥è¯¥æ–¹æ³•çš„æ—¶å€™å°±ä¼šæ‰§è¡Œæ ‡å‡†ç¼–è¯‘è¿‡ç¨‹.")]),s._v(" "),a("p",[s._v("æœ€åè¿˜è¦æé†’ä¸€ç‚¹, å›¾ 11-2 å’Œå›¾ 11-3 éƒ½ä»…ä»…æ˜¯"),a("strong",[s._v("æè¿°äº†å®¢æˆ·ç«¯æ¨¡å¼è™šæ‹Ÿæœºçš„å³æ—¶ç¼–è¯‘æ–¹å¼, å¯¹äºæœåŠ¡ç«¯æ¨¡å¼è™šæ‹Ÿæœºæ¥è¯´, æ‰§è¡Œæƒ…å†µä¼šæ¯”ä¸Šé¢æè¿°è¿˜è¦å¤æ‚ä¸€äº›")]),s._v(". ä»ç†è®ºä¸Šäº†è§£è¿‡ç¼–è¯‘å¯¹è±¡å’Œç¼–è¯‘è§¦å‘æ¡ä»¶å, è¿˜å¯ä»¥ä» HotSpot è™šæ‹Ÿæœºçš„æºç ä¸­ç®€å•è§‚å¯Ÿä¸€ä¸‹è¿™ä¸¤ä¸ªè®¡æ•°å™¨, åœ¨ MehtodOop.hpp(ä¸€ä¸ª methodOop å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ª Java æ–¹æ³•)ä¸­, å®šä¹‰äº† Java æ–¹æ³•åœ¨è™šæ‹Ÿæœºä¸­çš„å†…å­˜å¸ƒå±€, å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | header                                               |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | klass                                                |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | constMethodOop                 (oop)                 |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | constants                      (oop)                 |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | methodData                     (oop)                 |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | interp_invocation_count                              |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | access_flags                                         |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | vtable_index                                         |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | result_index (C++ interpreter only)                  |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | method_size             | max_stack                  |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | max_locals              | size_of_parameters         |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |intrinsic_id|   flags    |  throwout_count            |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | num_breakpoints         |  (unused)                  |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | invocation_counter                                   |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | backedge_counter                                     |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |           prev_time (tiered only, 64 bit wide)       |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |                                                      |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |                  rate (tiered)                       |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | code                           (pointer)             |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | i2i                            (pointer)             |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | adapter                        (pointer)             |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | from_compiled_entry            (pointer)             |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | from_interpreted_entry         (pointer)             |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | native_function       (present only if native)       |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// | signature_handler     (present only if native)       |")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// |------------------------------------------------------|")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br")])]),a("p",[s._v("åœ¨è¿™æ®µæ³¨é‡Šæ‰€æè¿°çš„"),a("strong",[s._v("æ–¹æ³•å†…å­˜å¸ƒå±€")]),s._v("é‡Œ, æ¯ä¸€è¡Œè¡¨ç¤ºå ç”¨ 32 ä¸ªæ¯”ç‰¹, ä»ä¸­å¯ä»¥æ¸…æ¥šçœ‹åˆ°"),a("strong",[s._v("æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨å’Œå›è¾¹è®¡æ•°å™¨æ‰€åœ¨çš„ä½ç½®å’Œæ•°æ®å®½åº¦")]),s._v(", å¦å¤–è¿˜æœ‰ from_compiled_entry å’Œ from_interpreted_entry ä¸¤ä¸ªæ–¹æ³•å…¥å£æ‰€å¤„çš„ä½ç½®.")]),s._v(" "),a("h5",{attrs:{id:"_4-ç¼–è¯‘è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç¼–è¯‘è¿‡ç¨‹"}},[s._v("#")]),s._v(" 4.ç¼–è¯‘è¿‡ç¨‹")]),s._v(" "),a("p",[s._v("åœ¨é»˜è®¤æ¡ä»¶ä¸‹, æ— è®ºæ˜¯æ–¹æ³•è°ƒç”¨äº§ç”Ÿçš„æ ‡å‡†ç¼–è¯‘è¯·æ±‚, è¿˜æ˜¯æ ˆä¸Šæ›¿æ¢ç¼–è¯‘è¯·æ±‚, è™šæ‹Ÿæœºåœ¨ç¼–è¯‘å™¨è¿˜æœªå®Œæˆç¼–è¯‘ä¹‹å‰, éƒ½ä»ç„¶å°†"),a("strong",[s._v("æŒ‰ç…§è§£é‡Šæ–¹å¼ç»§ç»­æ‰§è¡Œä»£ç , è€Œç¼–è¯‘åŠ¨ä½œåˆ™åœ¨åå°çš„ç¼–è¯‘çº¿ç¨‹ä¸­è¿›è¡Œ")]),s._v(". ç”¨æˆ·å¯ä»¥é€šè¿‡å‚æ•° "),a("code",[s._v("-XX: -BackgroundCompilation")]),s._v("â€‹ æ¥ç¦æ­¢åå°ç¼–è¯‘, åå°ç¼–è¯‘è¢«ç¦æ­¢å, å½“è¾¾åˆ°è§¦å‘å³æ—¶ç¼–è¯‘çš„æ¡ä»¶æ—¶, æ‰§è¡Œçº¿ç¨‹å‘è™šæ‹Ÿæœºæäº¤ç¼–è¯‘è¯·æ±‚ä»¥åå°†ä¼šä¸€ç›´é˜»å¡ç­‰å¾…, ç›´åˆ°ç¼–è¯‘è¿‡ç¨‹å®Œæˆå†å¼€å§‹æ‰§è¡Œç¼–è¯‘å™¨è¾“å‡ºçš„æœ¬åœ°ä»£ç .")]),s._v(" "),a("p",[s._v("é‚£åœ¨åå°æ‰§è¡Œç¼–è¯‘çš„è¿‡ç¨‹ä¸­, ç¼–è¯‘å™¨å…·ä½“ä¼šåšä»€ä¹ˆäº‹æƒ…å‘¢? æœåŠ¡ç«¯ç¼–è¯‘å™¨å’Œå®¢æˆ·ç«¯ç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹æ˜¯æœ‰æ‰€å·®åˆ«çš„. å¯¹äºå®¢æˆ·ç«¯ç¼–è¯‘å™¨æ¥è¯´, å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•å¿«é€Ÿçš„ä¸‰æ®µå¼ç¼–è¯‘å™¨, ä¸»è¦çš„å…³æ³¨ç‚¹åœ¨äºå±€éƒ¨æ€§çš„ä¼˜åŒ–, è€Œæ”¾å¼ƒäº†è®¸å¤šè€—æ—¶è¾ƒé•¿çš„å…¨å±€ä¼˜åŒ–æ‰‹æ®µ.")]),s._v(" "),a("p",[s._v("åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µ, "),a("strong",[s._v("ä¸€ä¸ªå¹³å°ç‹¬ç«‹çš„å‰ç«¯å°†å­—èŠ‚ç æ„é€ æˆä¸€ç§é«˜çº§ä¸­é—´ä»£ç è¡¨ç¤º")]),s._v("(High-Level Intermediate Representation, HIR, å³ä¸ç›®æ ‡æœºå™¨æŒ‡ä»¤é›†æ— å…³çš„ä¸­é—´è¡¨ç¤º). HIR ä½¿ç”¨é™æ€å•åˆ†é…(Static Single Assignment, SSA)çš„å½¢å¼æ¥ä»£è¡¨ä»£ç å€¼, è¿™å¯ä»¥ä½¿å¾—ä¸€äº›åœ¨ HIR çš„æ„é€ è¿‡ç¨‹ä¹‹ä¸­å’Œä¹‹åè¿›è¡Œçš„ä¼˜åŒ–åŠ¨ä½œæ›´å®¹æ˜“å®ç°. åœ¨æ­¤ä¹‹å‰ç¼–è¯‘å™¨å·²ç»ä¼šåœ¨å­—èŠ‚ç ä¸Šå®Œæˆä¸€éƒ¨åˆ†åŸºç¡€ä¼˜åŒ–, å¦‚æ–¹æ³•å†…è”, å¸¸é‡ä¼ æ’­ç­‰ä¼˜åŒ–å°†ä¼šåœ¨å­—èŠ‚ç è¢«æ„é€ æˆ HIR ä¹‹å‰å®Œæˆ.")]),s._v(" "),a("p",[s._v("åœ¨ç¬¬äºŒä¸ªé˜¶æ®µ, "),a("strong",[s._v("ä¸€ä¸ªå¹³å°ç›¸å…³çš„åç«¯ä» HIR ä¸­äº§ç”Ÿä½çº§ä¸­é—´ä»£ç è¡¨ç¤º")]),s._v("(Low-Level Intermediate Representation, LIR, å³ä¸ç›®æ ‡æœºå™¨æŒ‡ä»¤é›†ç›¸å…³çš„ä¸­é—´è¡¨ç¤º), è€Œåœ¨æ­¤ä¹‹å‰ä¼šåœ¨ HIR ä¸Šå®Œæˆå¦å¤–ä¸€äº›ä¼˜åŒ–, å¦‚ç©ºå€¼æ£€æŸ¥æ¶ˆé™¤, èŒƒå›´æ£€æŸ¥æ¶ˆé™¤ç­‰, ä»¥ä¾¿è®© HIR è¾¾åˆ°æ›´é«˜æ•ˆçš„ä»£ç è¡¨ç¤ºå½¢å¼.")]),s._v(" "),a("p",[s._v("æœ€åçš„é˜¶æ®µæ˜¯"),a("strong",[s._v("åœ¨å¹³å°ç›¸å…³çš„åç«¯ä½¿ç”¨çº¿æ€§æ‰«æç®—æ³•")]),s._v("åœ¨ LIR ä¸Šåˆ†é…å¯„å­˜å™¨, å¹¶åœ¨ LIR ä¸Šåšçª¥å­”(Peephole)ä¼˜åŒ–, "),a("strong",[s._v("ç„¶åäº§ç”Ÿæœºå™¨ä»£ç ")]),s._v(". å®¢æˆ·ç«¯ç¼–è¯‘å™¨å¤§è‡´çš„æ‰§è¡Œè¿‡ç¨‹å¦‚å›¾ 11-5 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00200-20240302133505-sg70m74.jpg",alt:"",title:"å›¾11-5 Client Compiler æ¶æ„"}})]),s._v(" "),a("p",[s._v("è€Œ"),a("strong",[s._v("æœåŠ¡ç«¯ç¼–è¯‘å™¨åˆ™æ˜¯ä¸“é—¨é¢å‘æœåŠ¡ç«¯çš„å…¸å‹åº”ç”¨åœºæ™¯, å¹¶ä¸ºæœåŠ¡ç«¯çš„æ€§èƒ½é…ç½®é’ˆå¯¹æ€§è°ƒæ•´è¿‡çš„ç¼–è¯‘å™¨, ä¹Ÿæ˜¯ä¸€ä¸ªèƒ½å®¹å¿å¾ˆé«˜ä¼˜åŒ–å¤æ‚åº¦çš„é«˜çº§ç¼–è¯‘å™¨")]),s._v(", å‡ ä¹èƒ½è¾¾åˆ° GNU C++ ç¼–è¯‘å™¨ä½¿ç”¨ "),a("code",[s._v("-O2")]),s._v("â€‹ å‚æ•°æ—¶çš„ä¼˜åŒ–å¼ºåº¦. å®ƒä¼šæ‰§è¡Œå¤§éƒ¨åˆ†ç»å…¸çš„ä¼˜åŒ–åŠ¨ä½œ, å¦‚: "),a("mark",[a("strong",[s._v("æ— ç”¨ä»£ç æ¶ˆé™¤(Dead Code Elimination), å¾ªç¯å±•å¼€(Loop Unrolling), å¾ªç¯è¡¨è¾¾å¼å¤–æ(Loop Expression Hoisting), æ¶ˆé™¤å…¬å…±å­è¡¨è¾¾å¼(Common Subexpression Elimination), å¸¸é‡ä¼ æ’­(Constant Propagation), åŸºæœ¬å—é‡æ’åº(Basic Block Reordering)")])]),s._v(" ç­‰, è¿˜ä¼šå®æ–½ä¸€äº›ä¸ Java è¯­è¨€ç‰¹æ€§å¯†åˆ‡ç›¸å…³çš„ä¼˜åŒ–æŠ€æœ¯, å¦‚èŒƒå›´æ£€æŸ¥æ¶ˆé™¤(Range Check Elimination), ç©ºå€¼æ£€æŸ¥æ¶ˆé™¤(Null Check Elimination, ä¸è¿‡å¹¶éæ‰€æœ‰çš„ç©ºå€¼æ£€æŸ¥æ¶ˆé™¤éƒ½æ˜¯ä¾èµ–ç¼–è¯‘å™¨ä¼˜åŒ–çš„, æœ‰ä¸€äº›æ˜¯ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨ä¼˜åŒ–äº†)ç­‰. å¦å¤–, è¿˜å¯èƒ½æ ¹æ®è§£é‡Šå™¨æˆ–å®¢æˆ·ç«¯ç¼–è¯‘å™¨æä¾›çš„æ€§èƒ½ç›‘æ§ä¿¡æ¯, è¿›è¡Œä¸€äº›ä¸ç¨³å®šçš„é¢„æµ‹æ€§æ¿€è¿›ä¼˜åŒ–, å¦‚å®ˆæŠ¤å†…è”(Guarded Inlining), åˆ†æ”¯é¢‘ç‡é¢„æµ‹(Branch Frequency Prediction)ç­‰, æœ¬ç« çš„ä¸‹åŠéƒ¨åˆ†å°†ä¼šæŒ‘é€‰ä¸Šè¿°çš„ä¸€éƒ¨åˆ†ä¼˜åŒ–æ‰‹æ®µè¿›è¡Œåˆ†æè®²è§£, åœ¨æ­¤å°±å…ˆä¸åšå±•å¼€.")]),s._v(" "),a("p",[a("strong",[s._v("æœåŠ¡ç«¯ç¼–è¯‘é‡‡ç”¨çš„å¯„å­˜å™¨åˆ†é…å™¨æ˜¯ä¸€ä¸ªå…¨å±€å›¾ç€è‰²åˆ†é…å™¨, å®ƒå¯ä»¥å……åˆ†åˆ©ç”¨æŸäº›å¤„ç†å™¨æ¶æ„(å¦‚ RISC)ä¸Šçš„å¤§å¯„å­˜å™¨é›†åˆ")]),s._v(". ä»¥å³æ—¶ç¼–è¯‘çš„æ ‡å‡†æ¥çœ‹, æœåŠ¡ç«¯ç¼–è¯‘å™¨æ— ç–‘æ˜¯æ¯”è¾ƒç¼“æ…¢çš„, ä½†å®ƒçš„ç¼–è¯‘é€Ÿåº¦ä¾ç„¶è¿œè¿œè¶…è¿‡ä¼ ç»Ÿçš„é™æ€ä¼˜åŒ–ç¼–è¯‘å™¨, è€Œä¸”å®ƒç›¸å¯¹äºå®¢æˆ·ç«¯ç¼–è¯‘å™¨ç¼–è¯‘è¾“å‡ºçš„ä»£ç è´¨é‡æœ‰å¾ˆå¤§æé«˜, å¯ä»¥å¤§å¹…å‡å°‘æœ¬åœ°ä»£ç çš„æ‰§è¡Œæ—¶é—´, ä»è€ŒæŠµæ¶ˆæ‰é¢å¤–çš„ç¼–è¯‘æ—¶é—´å¼€é”€, æ‰€ä»¥ä¹Ÿæœ‰å¾ˆå¤šéæœåŠ¡ç«¯çš„åº”ç”¨é€‰æ‹©ä½¿ç”¨æœåŠ¡ç«¯æ¨¡å¼çš„ HotSpot è™šæ‹Ÿæœºæ¥è¿è¡Œ.")]),s._v(" "),a("p",[s._v("åœ¨æœ¬èŠ‚ä¸­å‡ºç°äº†è®¸å¤šç¼–è¯‘åŸç†å’Œä»£ç ä¼˜åŒ–ä¸­çš„æ¦‚å¿µåè¯, æ²¡æœ‰è¿™æ–¹é¢åŸºç¡€çš„è¯»è€…, å¯èƒ½é˜…è¯»èµ·æ¥ä¼šæ„Ÿè§‰åˆ°å¾ˆæŠ½è±¡, å¾ˆç†è®ºåŒ–. æœ‰è¿™ç§æ„Ÿè§‰å¹¶ä¸å¥‡æ€ª, ä¸€æ–¹é¢, å³æ—¶ç¼–è¯‘è¿‡ç¨‹æœ¬æ¥å°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºä¸­æœ€èƒ½ä½“ç°æŠ€æœ¯æ°´å¹³ä¹Ÿæ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†, å¾ˆéš¾åœ¨å‡ é¡µçº¸çš„ç¯‡å¹…ä¸­ä»‹ç»å¾—é¢é¢ä¿±åˆ°; å¦ä¸€æ–¹é¢, è¿™ä¸ªè¿‡ç¨‹å¯¹ Java å¼€å‘è€…æ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„, ç¨‹åºå‘˜å¹³æ—¶æ— æ³•æ„ŸçŸ¥å®ƒçš„å­˜åœ¨.")]),s._v(" "),a("h4",{attrs:{id:"æå‰ç¼–è¯‘å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æå‰ç¼–è¯‘å™¨"}},[s._v("#")]),s._v(" æå‰ç¼–è¯‘å™¨")]),s._v(" "),a("p",[s._v("æå‰ç¼–è¯‘åœ¨ Java æŠ€æœ¯ä½“ç³»ä¸­å¹¶ä¸æ˜¯æ–°äº‹ç‰©. 1996 å¹´ JDK 1.0 å‘å¸ƒ, Java æœ‰äº†æ­£å¼çš„è¿è¡Œç¯å¢ƒ, ç¬¬ä¸€ä¸ªå¯ä»¥ä½¿ç”¨å¤–æŒ‚å³æ—¶ç¼–è¯‘å™¨çš„ Java ç‰ˆæœ¬æ˜¯ JDK 1.0.2, è€Œ Java æå‰ç¼–è¯‘å™¨çš„è¯ç”Ÿå¹¶æ²¡æœ‰æ¯”è¿™æ™šå¤šå°‘. ä»…å‡ ä¸ªæœˆå, IBM å…¬å¸å°±æ¨å‡ºäº†ç¬¬ä¸€æ¬¾ç”¨äº Java è¯­è¨€çš„æå‰ç¼–è¯‘å™¨(IBM High Performance Compiler for Java). åœ¨1998å¹´, GNU ç»„ç»‡å…¬å¸ƒäº†è‘—åçš„ GCC å®¶æ—(GNU Compiler Collection)çš„æ–°æˆå‘˜ GNU Compiler for Java(GCJ, 2018 å¹´ä» GCC å®¶æ—ä¸­é™¤å), è¿™ä¹Ÿæ˜¯ä¸€æ¬¾ Java çš„æå‰ç¼–è¯‘å™¨, è€Œä¸”æ›¾ç»è¢«å¹¿æ³›åº”ç”¨. åœ¨ OpenJDK æµè¡Œèµ·æ¥ä¹‹å‰, å„ç§ Linux å‘è¡Œç‰ˆå¸¦çš„ Java å®ç°é€šå¸¸å°±æ˜¯ GCJ.")]),s._v(" "),a("p",[s._v('ä½†æ˜¯æå‰ç¼–è¯‘å¾ˆå¿«åˆåœ¨ Java ä¸–ç•Œé‡Œæ²‰å¯‚äº†ä¸‹æ¥, å› ä¸ºå½“æ—¶ Java çš„ä¸€ä¸ªæ ¸å¿ƒä¼˜åŠ¿æ˜¯å¹³å°ä¸­ç«‹æ€§, å…¶å®£ä¼ å£å·æ˜¯ "ä¸€æ¬¡ç¼–è¯‘, åˆ°å¤„è¿è¡Œ", è¿™ä¸å¹³å°ç›¸å…³çš„æå‰ç¼–è¯‘åœ¨ç†å¿µä¸Šå°±æ˜¯ç›´æ¥å†²çªçš„. GCJ å‡ºç°ä¹‹ååœ¨é•¿è¾¾ 15 å¹´çš„æ—¶é—´é‡Œ, æå‰ç¼–è¯‘è¿™æ¡æ•…äº‹çº¿ä¸ŠåŸºæœ¬å°±å†æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ–°é—»å’Œè¿›å±•äº†. ç±»ä¼¼çš„çŠ¶å†µä¸€ç›´æŒç»­è‡³ 2013 å¹´, ç›´åˆ°åœ¨ Android çš„ä¸–ç•Œé‡Œ, å‰‘èµ°åé”‹ä½¿ç”¨æå‰ç¼–è¯‘çš„ ART(Android Runtime)æ¨ªç©ºå‡ºä¸–. ART ä¸€è¯ç”Ÿé©¬ä¸Šå°±æŠŠä½¿ç”¨å³æ—¶ç¼–è¯‘çš„ Dalvik è™šæ‹ŸæœºæŒ‰åœ¨åœ°ä¸Šä½¿åŠ²è¹‚èº, ä»…ç»è¿‡ Android 4.4 ä¸€ä¸ªç‰ˆæœ¬çš„çŸ­æš‚äº¤é”‹ä¹‹å, ART å°±è¿…é€Ÿç»ˆç»“äº† Dalvik çš„æ€§å‘½, æŠŠå®ƒä» Android ç³»ç»Ÿé‡Œæ‰«åœ°å‡ºé—¨.')]),s._v(" "),a("p",[s._v('å°½ç®¡ Android å¹¶ä¸èƒ½ç›´æ¥ç­‰åŒäº Java, ä½†ä¸¤è€…æ¯•ç«Ÿæœ‰ç€æ·±åšæ¸Šæº, æå‰ç¼–è¯‘åœ¨ Android ä¸Šçš„é©å‘½ä¸å´›èµ·ä¹Ÿéœ‡æ’¼åˆ°äº† Java ä¸–ç•Œ. åœ¨æŸäº›é¢†åŸŸ, æŸäº›äººçœ¼é‡Œ, åªè¦èƒ½è·å¾—æ›´å¥½çš„æ‰§è¡Œæ€§èƒ½, ä»€ä¹ˆå¹³å°ä¸­ç«‹æ€§, å­—èŠ‚è†¨èƒ€, ä¸€åˆ‡çš†å¯èˆå¼ƒ, å”¯ä¸€çš„é—®é¢˜å°±åªæœ‰ "'),a("strong",[s._v("æå‰ç¼–è¯‘çœŸçš„ä¼šæ˜¯è·å¾—æ›´é«˜æ€§èƒ½çš„é“¶å¼¹å—")]),s._v('?"')]),s._v(" "),a("h5",{attrs:{id:"_1-æå‰ç¼–è¯‘çš„ä¼˜åŠ£å¾—å¤±"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æå‰ç¼–è¯‘çš„ä¼˜åŠ£å¾—å¤±"}},[s._v("#")]),s._v(" 1.æå‰ç¼–è¯‘çš„ä¼˜åŠ£å¾—å¤±")]),s._v(" "),a("p",[s._v("æœ¬èŠ‚å¸Œæœ›åŒæ—¶å‘è¯»è€…å±•ç¤ºå‡ºä¸€æšç¡¬å¸çš„ä¸¤é¢, è§£é‡Šæ¸…æ¥š"),a("strong",[s._v("æå‰ç¼–è¯‘ç›¸å¯¹äºå³æ—¶ç¼–è¯‘æœ‰ä»€ä¹ˆä¼˜åŠ¿, åˆæœ‰ä»€ä¹ˆä¸è¶³")]),s._v(", è¿˜æœ‰å³æ—¶ç¼–è¯‘å™¨æœ‰æ²¡æœ‰åŠæ³•å¾—åˆ°è¿™äº›ä¼˜åŠ¿, éœ€è¦ä»˜å‡ºå“ªäº›åŠªåŠ›ç­‰.")]),s._v(" "),a("p",[s._v("ç°åœ¨æå‰ç¼–è¯‘äº§å“å’Œå¯¹å…¶çš„ç ”ç©¶æœ‰ç€ä¸¤æ¡æ˜æ˜¾çš„åˆ†æ”¯, ä¸€æ¡åˆ†æ”¯æ˜¯åšä¸ä¼ ç»Ÿ C, C++ ç¼–è¯‘å™¨ç±»ä¼¼çš„, åœ¨ç¨‹åºè¿è¡Œä¹‹å‰"),a("strong",[s._v("æŠŠç¨‹åºä»£ç ç¼–è¯‘æˆæœºå™¨ç çš„é™æ€ç¿»è¯‘å·¥ä½œ")]),s._v("; å¦å¤–ä¸€æ¡åˆ†æ”¯æ˜¯"),a("strong",[s._v("æŠŠåŸæœ¬å³æ—¶ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶è¦åšçš„ç¼–è¯‘å·¥ä½œæå‰åšå¥½å¹¶ä¿å­˜ä¸‹æ¥, ä¸‹æ¬¡è¿è¡Œåˆ°è¿™äº›ä»£ç (è­¬å¦‚å…¬å…±åº“ä»£ç åœ¨è¢«åŒä¸€å°æœºå™¨å…¶ä»– Java è¿›ç¨‹ä½¿ç”¨)æ—¶ç›´æ¥æŠŠå®ƒåŠ è½½è¿›æ¥ä½¿ç”¨")]),s._v(".")]),s._v(" "),a("p",[s._v("å…ˆæ¥è¯´ç¬¬ä¸€æ¡, è¿™æ˜¯ä¼ ç»Ÿçš„æå‰ç¼–è¯‘åº”ç”¨å½¢å¼, å®ƒåœ¨ Java ä¸­å­˜åœ¨çš„ä»·å€¼ç›´æŒ‡å³æ—¶ç¼–è¯‘çš„æœ€å¤§å¼±ç‚¹: "),a("strong",[s._v("å³æ—¶ç¼–è¯‘è¦å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´å’Œè¿ç®—èµ„æº")]),s._v(". å³ä½¿ç°åœ¨å…ˆè¿›çš„å³æ—¶ç¼–è¯‘å™¨å·²ç»è¶³å¤Ÿå¿«, ä»¥è‡³äºèƒ½å¤Ÿå®¹å¿ç›¸å½“é«˜çš„ä¼˜åŒ–å¤æ‚åº¦äº†; å³ä½¿ç°åœ¨å…ˆè¿›çš„å³æ—¶ç¼–è¯‘å™¨æ¶æ„æœ‰äº†åˆ†å±‚ç¼–è¯‘çš„æ”¯æŒ, å¯ä»¥å…ˆç”¨å¿«é€Ÿä½†ä½è´¨é‡çš„å³æ—¶ç¼–è¯‘å™¨ä¸ºé«˜è´¨é‡çš„å³æ—¶ç¼–è¯‘å™¨äº‰å–å‡ºæ›´å¤šç¼–è¯‘æ—¶é—´, ä½†æ— è®ºå¦‚ä½•, å³æ—¶ç¼–è¯‘æ¶ˆè€—çš„æ—¶é—´éƒ½æ˜¯åŸæœ¬å¯ç”¨äºç¨‹åºè¿è¡Œçš„æ—¶é—´, æ¶ˆè€—çš„è¿ç®—èµ„æºéƒ½æ˜¯åŸæœ¬å¯ç”¨äºç¨‹åºè¿è¡Œçš„èµ„æº, è¿™ä¸ªçº¦æŸä»æœªå‡å¼±, æ›´ä¸ä¼šæ¶ˆå¤±, å§‹ç»ˆæ˜¯æ‚¬åœ¨å³æ—¶ç¼–è¯‘å¤´é¡¶çš„è¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘.")]),s._v(" "),a("p",[s._v('è¿™é‡Œä¸¾ä¸ªæ›´å…·ä½“çš„ä¾‹å­æ¥å¸®åŠ©ç†è§£è¿™ç§çº¦æŸ: åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æœ€è€—æ—¶çš„ä¼˜åŒ–æªæ–½ä¹‹ä¸€æ˜¯é€šè¿‡ "'),a("strong",[s._v("è¿‡ç¨‹é—´åˆ†æ")]),s._v('"(Inter-Procedural Analysis, IPA, ä¹Ÿç»å¸¸è¢«ç§°ä¸ºå…¨ç¨‹åºåˆ†æ, å³ Whole Program Analysis)æ¥è·å¾—è¯¸å¦‚æŸä¸ªç¨‹åºç‚¹ä¸ŠæŸä¸ªå˜é‡çš„å€¼æ˜¯å¦ä¸€å®šä¸ºå¸¸é‡, æŸæ®µä»£ç å—æ˜¯å¦æ°¸è¿œä¸å¯èƒ½è¢«ä½¿ç”¨, åœ¨æŸä¸ªç‚¹è°ƒç”¨çš„æŸä¸ªè™šæ–¹æ³•æ˜¯å¦åªèƒ½æœ‰å•ä¸€ç‰ˆæœ¬ç­‰çš„åˆ†æç»“è®º. è¿™äº›ä¿¡æ¯å¯¹ç”Ÿæˆé«˜è´¨é‡çš„ä¼˜åŒ–ä»£ç æœ‰ç€æä¸ºå·¨å¤§çš„ä»·å€¼, ä½†æ˜¯è¦ç²¾ç¡®(è­¬å¦‚å¯¹æµæ•æ„Ÿ, å¯¹è·¯å¾„æ•æ„Ÿ, å¯¹ä¸Šä¸‹æ–‡æ•æ„Ÿ, å¯¹å­—æ®µæ•æ„Ÿ)å¾—åˆ°è¿™äº›ä¿¡æ¯, å¿…é¡»åœ¨å…¨ç¨‹åºèŒƒå›´å†…åšå¤§é‡æè€—æ—¶çš„è®¡ç®—å·¥ä½œ, ç›®å‰æ‰€æœ‰å¸¸è§çš„ Java è™šæ‹Ÿæœºå¯¹è¿‡ç¨‹é—´åˆ†æçš„æ”¯æŒéƒ½ç›¸å½“æœ‰é™, è¦ä¹ˆå€ŸåŠ©å¤§è§„æ¨¡çš„æ–¹æ³•å†…è”æ¥æ‰“é€šæ–¹æ³•é—´çš„éš”é˜‚, ä»¥è¿‡ç¨‹å†…åˆ†æ(Intra-Procedural Analysis, åªè€ƒè™‘è¿‡ç¨‹å†…éƒ¨è¯­å¥, ä¸è€ƒè™‘è¿‡ç¨‹è°ƒç”¨çš„åˆ†æ)æ¥æ¨¡æ‹Ÿè¿‡ç¨‹é—´åˆ†æçš„éƒ¨åˆ†æ•ˆæœ; è¦ä¹ˆå€ŸåŠ©å¯å‡è®¾çš„æ¿€è¿›ä¼˜åŒ–, ä¸æ±‚å¾—åˆ°ç²¾ç¡®çš„ç»“æœ, åªæ±‚æŒ‰ç…§æœ€å¯èƒ½çš„çŠ¶å†µæ¥ä¼˜åŒ–, æœ‰é—®é¢˜å†é€€å›æ¥è§£ææ‰§è¡Œ. ä½†å¦‚æœæ˜¯åœ¨ç¨‹åºè¿è¡Œä¹‹å‰è¿›è¡Œçš„é™æ€ç¼–è¯‘, è¿™äº›è€—æ—¶çš„ä¼˜åŒ–å°±å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°è¿›è¡Œäº†, è­¬å¦‚ Graal VM ä¸­çš„ Substrate VM, åœ¨åˆ›å»ºæœ¬åœ°é•œåƒçš„æ—¶å€™, å°±ä¼šé‡‡å–è®¸å¤šåŸæœ¬åœ¨ HotSpot å³æ—¶ç¼–è¯‘ä¸­å¹¶ä¸ä¼šåšçš„å…¨ç¨‹åºä¼˜åŒ–æªæ–½ä»¥è·å¾—æ›´å¥½çš„è¿è¡Œæ—¶æ€§èƒ½, åæ­£åšé•œåƒé˜¶æ®µæ…¢ä¸€ç‚¹å¹¶æ²¡æœ‰ä»€ä¹ˆå¤§å½±å“. åŒç†, è¿™ä¹Ÿæ˜¯ ART æ‰“è´¥ Dalvik çš„ä¸»è¦æ­¦å™¨ä¹‹ä¸€, è¿å‰¯ä½œç”¨ä¹Ÿæ˜¯ç›¸ä¼¼çš„. åœ¨ Android 5.0 å’Œ 6.0 ç‰ˆæœ¬, å®‰è£…ä¸€ä¸ªç¨å¾®å¤§ä¸€ç‚¹çš„ Android åº”ç”¨éƒ½æ˜¯æŒ‰åˆ†é’Ÿæ¥è®¡æ—¶çš„, ä»¥è‡³äºä» Android 7.0 ç‰ˆæœ¬èµ·é‡æ–°å¯ç”¨äº†è§£é‡Šæ‰§è¡Œå’Œå³æ—¶ç¼–è¯‘(ä½†è¿™å·²ä¸ Dalvik æ— å…³, å®ƒå½»åº•å‡‰é€äº†), ç­‰ç©ºé—²æ—¶ç³»ç»Ÿå†åœ¨åå°è‡ªåŠ¨è¿›è¡Œæå‰ç¼–è¯‘.')]),s._v(" "),a("p",[a("strong",[s._v("å…³äºæå‰ç¼–è¯‘çš„ç¬¬äºŒæ¡è·¯å¾„, æœ¬è´¨æ˜¯ç»™å³æ—¶ç¼–è¯‘å™¨åšç¼“å­˜åŠ é€Ÿ, å»æ”¹å–„ Java ç¨‹åºçš„å¯åŠ¨æ—¶é—´, ä»¥åŠéœ€è¦ä¸€æ®µæ—¶é—´é¢„çƒ­åæ‰èƒ½åˆ°è¾¾æœ€é«˜æ€§èƒ½çš„é—®é¢˜")]),s._v(". è¿™ç§æå‰ç¼–è¯‘è¢«ç§°ä¸ºåŠ¨æ€æå‰ç¼–è¯‘(Dynamic AOT)æˆ–è€…ç´¢æ€§å°±å¤§å¤§æ–¹æ–¹åœ°ç›´æ¥å«å³æ—¶ç¼–è¯‘ç¼“å­˜(JIT Caching). åœ¨ç›®å‰çš„ Java æŠ€æœ¯ä½“ç³»é‡Œ, è¿™æ¡è·¯å¾„çš„æå‰ç¼–è¯‘å·²ç»å®Œå…¨è¢«ä¸»æµçš„å•†ç”¨ JDK æ”¯æŒ. åœ¨å•†ä¸šåº”ç”¨ä¸­, è¿™æ¡è·¯å¾„æœ€æ—©å‡ºç°åœ¨ JDK 6 ç‰ˆæœ¬çš„ IBM J9 è™šæ‹Ÿæœºä¸Š, é‚£æ—¶å€™åœ¨å®ƒçš„ CDS(Class Data Sharing)åŠŸèƒ½çš„ç¼“å­˜ä¸­å°±æœ‰ä¸€å—æ˜¯å³æ—¶ç¼–è¯‘ç¼“å­˜. ä¸è¿‡è¿™ä¸ªç¼“å­˜å’Œ CDS ç¼“å­˜ä¸€æ ·æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆçš„, ç›´æ¥æ¥æºäº J9 çš„å³æ—¶ç¼–è¯‘å™¨, è€Œä¸”ä¸ºäº†è¿›ç¨‹å…¼å®¹æ€§, å¾ˆå¤šæ¿€è¿›ä¼˜åŒ–éƒ½ä¸èƒ½è‚†æ„è¿ç”¨, æ‰€ä»¥ç¼–è¯‘è¾“å‡ºçš„ä»£ç è´¨é‡åè€Œè¦ä½äºå³æ—¶ç¼–è¯‘å™¨. çœŸæ­£å¼•èµ·ä¸šç•Œæ™®éå…³æ³¨çš„æ˜¯ OpenJDK/OracleJDK 9 ä¸­æ‰€å¸¦çš„ Jaotc æå‰ç¼–è¯‘å™¨, è¿™æ˜¯ä¸€ä¸ªåŸºäº Graal ç¼–è¯‘å™¨å®ç°çš„æ–°å·¥å…·, ç›®çš„æ˜¯è®©ç”¨æˆ·å¯ä»¥é’ˆå¯¹ç›®æ ‡æœºå™¨, ä¸ºåº”ç”¨ç¨‹åºè¿›è¡Œæå‰ç¼–è¯‘. HotSpot è¿è¡Œæ—¶å¯ä»¥ç›´æ¥åŠ è½½è¿™äº›ç¼–è¯‘çš„ç»“æœ, å®ç°åŠ å¿«ç¨‹åºå¯åŠ¨é€Ÿåº¦, å‡å°‘ç¨‹åºè¾¾åˆ°å…¨é€Ÿè¿è¡ŒçŠ¶æ€æ‰€éœ€æ—¶é—´çš„ç›®çš„. è¿™é‡Œé¢ç¡®å®æœ‰æ¯”è¾ƒå¤§çš„ä¼˜åŒ–ä»·å€¼, è¯•æƒ³ä¸€ä¸‹, å„ç§ Java åº”ç”¨æœ€èµ·ç ä¼šç”¨åˆ° Java çš„æ ‡å‡†ç±»åº“, å¦‚ java.base ç­‰æ¨¡å—, å¦‚æœèƒ½å¤Ÿå°†è¿™ä¸ªç±»åº“æå‰ç¼–è¯‘å¥½, å¹¶è¿›è¡Œæ¯”è¾ƒé«˜è´¨é‡çš„ä¼˜åŒ–, æ˜¾ç„¶èƒ½å¤ŸèŠ‚çº¦ä¸å°‘åº”ç”¨è¿è¡Œæ—¶çš„ç¼–è¯‘æˆæœ¬. å…³äºè¿™ç‚¹, å°†åœ¨ä¸‹ä¸€èŠ‚åšä¸€ä¸ªç®€å•çš„å®æˆ˜ç»ƒä¹ , è€Œåœ¨æ­¤è¦è¯´æ˜çš„æ˜¯, è¿™çš„ç¡®æ˜¯å¾ˆå¥½çš„æƒ³æ³•, ä½†å®é™…åº”ç”¨èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“, åŸå› æ˜¯è¿™ç§æå‰ç¼–è¯‘æ–¹å¼ä¸ä»…è¦å’Œç›®æ ‡æœºå™¨ç›¸å…³, ç”šè‡³è¿˜å¿…é¡»ä¸ HotSpot è™šæ‹Ÿæœºçš„è¿è¡Œæ—¶å‚æ•°ç»‘å®š. è­¬å¦‚è™šæ‹Ÿæœºè¿è¡Œæ—¶é‡‡ç”¨äº†ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨, è¿™åŸæœ¬å°±éœ€è¦å³æ—¶ç¼–è¯‘å­ç³»ç»Ÿçš„é…åˆ(å…¸å‹çš„å¦‚ç”Ÿæˆå†…å­˜å±éšœä»£ç )æ‰èƒ½æ­£ç¡®å·¥ä½œ, è¦åšæå‰ç¼–è¯‘çš„è¯, è‡ªç„¶ä¹Ÿè¦æŠŠè¿™äº›é…åˆçš„å·¥ä½œå¹³ç§»è¿‡å». è‡³äºå‰é¢æåˆ°è¿‡çš„æå‰ç¼–è¯‘ç ´åå¹³å°ä¸­ç«‹æ€§, å­—èŠ‚è†¨èƒ€ç­‰ç¼ºç‚¹å½“ç„¶è¿˜å­˜åœ¨, è¿™é‡Œå°±ä¸é‡å¤äº†. å°½ç®¡è¿˜æœ‰è®¸å¤šå›°éš¾, ä½†æå‰ç¼–è¯‘æ— ç–‘å·²ç»æˆä¸ºä¸€ç§æé™æ¦¨å–æ€§èƒ½(å¯åŠ¨, å“åº”é€Ÿåº¦)çš„æ‰‹æ®µ, ä¸”è¢«å®˜æ–¹ JDK å…³æ³¨, ç›¸ä¿¡æ—¥åä¼šæ›´åŠ çµæ´», æ›´åŠ å®¹æ˜“ä½¿ç”¨, å°±å¦‚å·²ç»ç›¸å½“æˆç†Ÿçš„ CDS(AppCDS éœ€è¦ç”¨æˆ·å‚ä¸)åŠŸèƒ½é‚£æ ·, å‡ ä¹ä¸éœ€è¦ç”¨æˆ·ä»‹å…¥, å¯è‡ªåŠ¨å®Œæˆ.")]),s._v(" "),a("p",[s._v("æœ€åè¿˜è¦æ€è€ƒä¸€ä¸ªé—®é¢˜: "),a("strong",[s._v("æå‰ç¼–è¯‘çš„ä»£ç è¾“å‡ºè´¨é‡, ä¸€å®šä¼šæ¯”å³æ—¶ç¼–è¯‘æ›´é«˜å—")]),s._v("? æå‰ç¼–è¯‘å› ä¸ºæ²¡æœ‰æ‰§è¡Œæ—¶é—´å’Œèµ„æºé™åˆ¶çš„å‹åŠ›, èƒ½å¤Ÿæ¯«æ— é¡¾å¿Œåœ°ä½¿ç”¨"),a("strong",[s._v("é‡è´Ÿè½½")]),s._v("çš„ä¼˜åŒ–æ‰‹æ®µ, è¿™å½“ç„¶æ˜¯ä¸€ä¸ªæå¤§çš„ä¼˜åŠ¿, ä½†å³æ—¶ç¼–è¯‘éš¾é“å°±æ²¡æœ‰èƒ½ä¸å…¶ç«äº‰çš„å¼ºé¡¹äº†å—? å½“ç„¶æ˜¯æœ‰çš„, å°½ç®¡å³æ—¶ç¼–è¯‘åœ¨æ—¶é—´å’Œè¿ç®—èµ„æºæ–¹é¢çš„åŠ£åŠ¿æ˜¯æ— æ³•å¿½è§†çš„, ä½†å…¶ä¾ç„¶æœ‰è‡ªå·±çš„ä¼˜åŠ¿. æ¥ä¸‹æ¥ä¾¿è¦å¼€å§‹å³æ—¶ç¼–è¯‘å™¨çš„ç»åœ°åå‡»äº†, ç¬”è€…å°†ç®€è¦"),a("strong",[s._v("ä»‹ç»ä¸‰ç§å³æ—¶ç¼–è¯‘å™¨ç›¸å¯¹äºæå‰ç¼–è¯‘å™¨çš„å¤©ç„¶ä¼˜åŠ¿")]),s._v(".")]),s._v(" "),a("blockquote",[a("p",[s._v("å³æ—¶ç¼–è¯‘å™¨ç›¸å¯¹äºæå‰ç¼–è¯‘å™¨çš„å¤©ç„¶ä¼˜åŠ¿")])]),s._v(" "),a("p",[s._v("é¦–å…ˆ, æ˜¯"),a("strong",[s._v("æ€§èƒ½åˆ†æåˆ¶å¯¼ä¼˜åŒ–")]),s._v(". ä¸Šä¸€èŠ‚ä»‹ç» HotSpot çš„å³æ—¶ç¼–è¯‘å™¨æ—¶å°±å¤šæ¬¡æåŠåœ¨è§£é‡Šå™¨æˆ–è€…å®¢æˆ·ç«¯ç¼–è¯‘å™¨è¿è¡Œè¿‡ç¨‹ä¸­, ä¼šä¸æ–­æ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯, è­¬å¦‚æŸä¸ªç¨‹åºç‚¹æŠ½è±¡ç±»é€šå¸¸ä¼šæ˜¯ä»€ä¹ˆå®é™…ç±»å‹, æ¡ä»¶åˆ¤æ–­é€šå¸¸ä¼šèµ°å“ªæ¡åˆ†æ”¯, æ–¹æ³•è°ƒç”¨é€šå¸¸ä¼šé€‰æ‹©å“ªä¸ªç‰ˆæœ¬, å¾ªç¯é€šå¸¸ä¼šè¿›è¡Œå¤šå°‘æ¬¡ç­‰, è¿™äº›æ•°æ®ä¸€èˆ¬åœ¨"),a("strong",[s._v("é™æ€åˆ†ææ—¶æ˜¯æ— æ³•å¾—åˆ°")]),s._v("çš„, æˆ–è€…ä¸å¯èƒ½å­˜åœ¨ç¡®å®šä¸”å”¯ä¸€çš„è§£, æœ€å¤šåªèƒ½ä¾ç…§ä¸€äº›å¯å‘æ€§çš„æ¡ä»¶å»è¿›è¡ŒçŒœæµ‹. ä½†åœ¨åŠ¨æ€è¿è¡Œæ—¶å´èƒ½çœ‹å‡ºå®ƒä»¬å…·æœ‰éå¸¸æ˜æ˜¾çš„åå¥½æ€§. å¦‚æœä¸€ä¸ªæ¡ä»¶åˆ†æ”¯çš„æŸä¸€æ¡è·¯å¾„æ‰§è¡Œç‰¹åˆ«é¢‘ç¹, è€Œå…¶ä»–è·¯å¾„é²œæœ‰é—®æ´¥, é‚£å°±å¯ä»¥æŠŠçƒ­çš„ä»£ç é›†ä¸­æ”¾åˆ°ä¸€èµ·, é›†ä¸­ä¼˜åŒ–å’Œåˆ†é…æ›´å¥½çš„èµ„æº(åˆ†æ”¯é¢„æµ‹, å¯„å­˜å™¨, ç¼“å­˜ç­‰)ç»™å®ƒ.")]),s._v(" "),a("p",[s._v("å…¶æ¬¡, æ˜¯"),a("strong",[s._v("æ¿€è¿›é¢„æµ‹æ€§ä¼˜åŒ–")]),s._v(", è¿™ä¹Ÿå·²ç»æˆä¸ºå¾ˆå¤šå³æ—¶ç¼–è¯‘ä¼˜åŒ–æªæ–½çš„åŸºç¡€. é™æ€ä¼˜åŒ–æ— è®ºå¦‚ä½•éƒ½å¿…é¡»ä¿è¯ä¼˜åŒ–åæ‰€æœ‰çš„ç¨‹åºå¤–éƒ¨å¯è§å½±å“(ä¸ä»…ä»…æ˜¯æ‰§è¡Œç»“æœ)ä¸ä¼˜åŒ–å‰æ˜¯ç­‰æ•ˆçš„, ä¸ç„¶ä¼˜åŒ–ä¹‹åä¼šå¯¼è‡´ç¨‹åºæŠ¥é”™æˆ–è€…ç»“æœä¸å¯¹, è‹¥å‡ºç°è¿™ç§æƒ…å†µ, åˆ™é€Ÿåº¦å†å¿«ä¹Ÿæ˜¯æ²¡æœ‰ä»·å€¼çš„. ç„¶è€Œ, ç›¸å¯¹äºæå‰ç¼–è¯‘æ¥è¯´, å³æ—¶ç¼–è¯‘çš„ç­–ç•¥å°±å¯ä»¥ä¸å¿…è¿™æ ·ä¿å®ˆ, å¦‚æœæ€§èƒ½ç›‘æ§ä¿¡æ¯èƒ½å¤Ÿæ”¯æŒå®ƒåšå‡ºä¸€äº›æ­£ç¡®çš„å¯èƒ½æ€§å¾ˆå¤§ä½†æ— æ³•ä¿è¯ç»å¯¹æ­£ç¡®çš„é¢„æµ‹åˆ¤æ–­, å°±å·²ç»å¯ä»¥å¤§èƒ†åœ°æŒ‰ç…§é«˜æ¦‚ç‡çš„å‡è®¾è¿›è¡Œä¼˜åŒ–, ä¸‡ä¸€çœŸçš„èµ°åˆ°ç½•è§åˆ†æ”¯ä¸Š, å¤§ä¸äº†é€€å›åˆ°ä½çº§ç¼–è¯‘å™¨ç”šè‡³è§£é‡Šå™¨ä¸Šå»æ‰§è¡Œ, å¹¶ä¸ä¼šå‡ºç°æ— æ³•æŒ½æ•‘çš„åæœ. åªè¦å‡ºé”™æ¦‚ç‡è¶³å¤Ÿä½, è¿™æ ·çš„ä¼˜åŒ–å¾€å¾€èƒ½å¤Ÿå¤§å¹…åº¦é™ä½ç›®æ ‡ç¨‹åºçš„å¤æ‚åº¦, è¾“å‡ºè¿è¡Œé€Ÿåº¦éå¸¸é«˜çš„ä»£ç . è­¬å¦‚åœ¨ Java è¯­è¨€ä¸­, é»˜è®¤æ–¹æ³•éƒ½æ˜¯è™šæ–¹æ³•è°ƒç”¨, éƒ¨åˆ† C, C++ ç¨‹åºå‘˜(ç”šè‡³ä¸€äº›è€æ—§æ•™æ)ä¼šè¯´è™šæ–¹æ³•æ˜¯ä¸èƒ½å†…è”çš„, ä½†å¦‚æœ Java è™šæ‹ŸæœºçœŸçš„é‡åˆ°è™šæ–¹æ³•å°±å»æŸ¥è™šè¡¨è€Œä¸åšå†…è”çš„è¯, Java æŠ€æœ¯å¯èƒ½å°±å·²ç»å› æ€§èƒ½é—®é¢˜è€Œè¢«æ·˜æ±°å¾ˆå¤šå¹´äº†. å®é™…ä¸Šè™šæ‹Ÿæœºä¼šé€šè¿‡ç±»ç»§æ‰¿å…³ç³»åˆ†æç­‰ä¸€ç³»åˆ—æ¿€è¿›çš„çŒœæµ‹å»åšå»è™šæ‹ŸåŒ–(Devitalization), ä»¥ä¿è¯ç»å¤§éƒ¨åˆ†æœ‰å†…è”ä»·å€¼çš„è™šæ–¹æ³•éƒ½å¯ä»¥é¡ºåˆ©å†…è”. å†…è”æ˜¯æœ€åŸºç¡€çš„ä¸€é¡¹ä¼˜åŒ–æªæ–½, æœ¬ç« ç¨åè¿˜ä¼šå¯¹ä¸“é—¨çš„ Java è™šæ‹Ÿæœºå…·ä½“å¦‚ä½•åšè™šæ–¹æ³•å†…è”è¿›è¡Œè¯¦ç»†è®²è§£.")]),s._v(" "),a("p",[s._v("æœ€å, æ˜¯"),a("strong",[s._v("é“¾æ¥æ—¶ä¼˜åŒ–")]),s._v(", Java è¯­è¨€å¤©ç”Ÿå°±æ˜¯åŠ¨æ€é“¾æ¥çš„, ä¸€ä¸ªä¸ª Class æ–‡ä»¶åœ¨è¿è¡ŒæœŸè¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜å½“ä¸­, ç„¶ååœ¨å³æ—¶ç¼–è¯‘å™¨é‡Œäº§ç”Ÿä¼˜åŒ–åçš„æœ¬åœ°ä»£ç , è¿™ç±»äº‹æƒ…åœ¨ Java ç¨‹åºå‘˜çœ¼é‡Œçœ‹èµ·æ¥æ¯«æ— è¿å’Œä¹‹å¤„. ä½†å¦‚æœç±»ä¼¼çš„åœºæ™¯å‡ºç°åœ¨ä½¿ç”¨æå‰ç¼–è¯‘çš„è¯­è¨€å’Œç¨‹åºä¸Š, è­¬å¦‚ C, C++çš„ç¨‹åºè¦è°ƒç”¨æŸä¸ªåŠ¨æ€é“¾æ¥åº“çš„æŸä¸ªæ–¹æ³•, å°±ä¼šå‡ºç°å¾ˆæ˜æ˜¾çš„è¾¹ç•Œéš”é˜‚, è¿˜éš¾ä»¥ä¼˜åŒ–. è¿™æ˜¯å› ä¸ºä¸»ç¨‹åºä¸åŠ¨æ€é“¾æ¥åº“çš„ä»£ç åœ¨å®ƒä»¬ç¼–è¯‘æ—¶æ˜¯å®Œå…¨ç‹¬ç«‹çš„, ä¸¤è€…å„è‡ªç¼–è¯‘, ä¼˜åŒ–è‡ªå·±çš„ä»£ç . è¿™äº›ä»£ç çš„ä½œè€…, ç¼–è¯‘çš„æ—¶é—´, ä»¥åŠç¼–è¯‘å™¨ç”šè‡³å¾ˆå¯èƒ½éƒ½æ˜¯ä¸åŒçš„, å½“å‡ºç°è·¨é“¾æ¥åº“è¾¹ç•Œçš„è°ƒç”¨æ—¶, é‚£äº›ç†è®ºä¸Šåº”è¯¥è¦åšçš„ä¼˜åŒ–--è­¬å¦‚åšå¯¹è°ƒç”¨æ–¹æ³•çš„å†…è”, å°±ä¼šæ‰§è¡Œèµ·æ¥ç›¸å½“çš„å›°éš¾. å¦‚æœåˆšæ‰è¯´çš„è™šæ–¹æ³•å†…è”è®© C, C++ ç¨‹åºå‘˜ç†è§£è¿˜ç®—æ¯”è¾ƒèƒ½å¤Ÿæ¥å—çš„è¯(å…¶å® C++ ç¼–è¯‘å™¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æŠ€å·§æ¥åšåˆ°è™šæ–¹æ³•å†…è”), é‚£è¿™ç§è·¨è¶ŠåŠ¨æ€é“¾æ¥åº“çš„æ–¹æ³•å†…è”åœ¨ä»–ä»¬çœ¼é‡Œå¯èƒ½å°±è¿‘ä¹äºç¦»ç»å›é“äº†(ä½†å®é™…ä¸Šä¾ç„¶æ˜¯å¯è¡Œçš„).")]),s._v(" "),a("p",[s._v("ç»è¿‡ä»¥ä¸Šçš„è®¨è®º, è¯»è€…åº”è¯¥èƒ½å¤Ÿç†è§£æå‰ç¼–è¯‘å™¨çš„ä»·å€¼ä¸ä¼˜åŠ¿æ‰€åœ¨äº†, ä½†å¿½ç•¥å…·ä½“çš„åº”ç”¨åœºæ™¯å°±è¯´å®ƒæ˜¯ä¸‡èƒ½çš„é“¶å¼¹, é‚£è‚¯å®šæ˜¯æœ‰å¤±åé¢‡çš„, æå‰ç¼–è¯‘æœ‰å®ƒçš„åº”ç”¨åœºæ™¯, ä¹Ÿæœ‰å®ƒçš„å¼±é¡¹ä¸ä¸è¶³, ç›¸ä¿¡æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…, "),a("strong",[s._v("å³æ—¶ç¼–è¯‘å’Œæå‰ç¼–è¯‘éƒ½ä¼šæ˜¯ Java åç«¯ç¼–è¯‘æŠ€æœ¯çš„å…±åŒä¸»è§’")]),s._v(".")]),s._v(" "),a("h5",{attrs:{id:"_2-å®æˆ˜-jaotcçš„æå‰ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®æˆ˜-jaotcçš„æå‰ç¼–è¯‘"}},[s._v("#")]),s._v(" 2.å®æˆ˜:Jaotcçš„æå‰ç¼–è¯‘")]),s._v(" "),a("p",[s._v("JDK 9 å¼•å…¥äº†ç”¨äº"),a("strong",[s._v("æ”¯æŒå¯¹ Class æ–‡ä»¶å’Œæ¨¡å—è¿›è¡Œæå‰ç¼–è¯‘çš„å·¥å…· Jaotc, ä»¥å‡å°‘ç¨‹åºçš„å¯åŠ¨æ—¶é—´å’Œåˆ°è¾¾å…¨é€Ÿæ€§èƒ½çš„é¢„çƒ­æ—¶é—´")]),s._v(", ä½†ç”±äºè¿™é¡¹åŠŸèƒ½å¿…é¡»é’ˆå¯¹ç‰¹å®šç‰©ç†æœºå™¨å’Œç›®æ ‡è™šæ‹Ÿæœºçš„è¿è¡Œå‚æ•°æ¥ä½¿ç”¨, åŠ ä¹‹é™åˆ¶å¤ªå¤š, Java å¼€å‘äººå‘˜å¯¹æ­¤äº†è§£, ä½¿ç”¨æ™®éæ¯”è¾ƒå°‘, æœ¬èŠ‚"),a("strong",[s._v("å°†ç”¨ Jaotc æ¥ç¼–è¯‘ Java SE çš„åŸºç¡€åº“")]),s._v("(java.base æ¨¡å—), ä»¥æ”¹å–„æœ¬æœº Java ç¯å¢ƒçš„æ‰§è¡Œæ•ˆç‡.")]),s._v(" "),a("p",[s._v("é¦–å…ˆé€šè¿‡ä¸€æ®µæµ‹è¯•ä»£ç (ä»€ä¹ˆä»£ç éƒ½å¯ä»¥, æœ€ç®€å•çš„ HelloWorld éƒ½å¯ä»¥, å†…å®¹å°±ä¸è´´äº†)æ¥æ¼”ç¤º Jaotc çš„åŸºæœ¬ä½¿ç”¨è¿‡ç¨‹, æ“ä½œå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ javac HelloWorld.java\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" HelloWorld\nHello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n$ jaotc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--output")]),s._v(" libHelloWorld.so HelloWorld.class\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("é€šè¿‡ä»¥ä¸Šå‘½ä»¤, å°±ç”Ÿæˆäº†ä¸€ä¸ª"),a("strong",[s._v("åä¸º libHelloWorld.so çš„åº“")]),s._v(", å¯ä»¥ä½¿ç”¨ Linux çš„ ldd å‘½ä»¤æ¥ç¡®è®¤è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªé™æ€é“¾æ¥åº“, ä½¿ç”¨ mn å‘½ä»¤æ¥ç¡®è®¤å…¶ä¸­æ˜¯å¦åŒ…å«äº† HelloWorld çš„æ„é€ å‡½æ•°å’Œ main() æ–¹æ³•çš„å…¥å£ä¿¡æ¯, æ“ä½œå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ ldd libHelloWorld.so\nstatically linked\n\n$ nm libHelloWorld.so\nâ€¦â€¦\n0000000000002a20 t HelloWorld.()V\n0000000000002b20 t HelloWorld.main([Ljava/lang/String;)V\nâ€¦â€¦\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("ç°åœ¨å°±å¯ä»¥"),a("strong",[s._v("ä½¿ç”¨è¿™ä¸ªé™æ€é“¾æ¥åº“è€Œä¸æ˜¯ Class æ–‡ä»¶æ¥è¾“å‡º HelloWorld äº†")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("java -XX:AOTLibrary=./libHelloWorld.so HelloWorld\nHello World!\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æå‰ç¼–è¯‘ä¸€ä¸ª HelloWorld åªå…·å¤‡æ¼”ç¤ºä»·å€¼, ä¸‹ä¸€æ­¥æ¥åšæ›´æœ‰å®ç”¨æ„ä¹‰çš„äº‹æƒ…: "),a("strong",[s._v("æŠŠ java.base æ¨¡å—ç¼–è¯‘æˆç±»ä¼¼çš„é™æ€é“¾æ¥åº“")]),s._v('. java.base åŒ…å«çš„ä»£ç æ•°é‡åºå¤§, è™½ç„¶å…¶ä¸­ç»å¤§éƒ¨åˆ†å†…å®¹ç°åœ¨éƒ½èƒ½è¢« Jaotc çš„æå‰ç¼–è¯‘æ‰€æ”¯æŒäº†, ä½†æ€»è¿˜æœ‰é‚£ä¹ˆå‡ ä¸ª "åˆºå¤´" ä¼šå¯¼è‡´ç¼–è¯‘å¼‚å¸¸. å› æ­¤è¦å»ºç«‹ä¸€ä¸ªç¼–è¯‘å‘½ä»¤æ–‡ä»¶æ¥'),a("strong",[s._v("æ’é™¤")]),s._v("è¿™äº›ç›®å‰è¿˜ä¸æ”¯æŒæå‰ç¼–è¯‘çš„æ–¹æ³•, ä¸‹é¢å°†æ­¤æ–‡ä»¶å–åä¸º java.base-list.txt, å…¶å…·ä½“å†…å®¹å¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jaotc: java.lang.StackOverflowError")]),s._v("\nexclude sun.util.resources.LocaleNames.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources.TimeZoneNames.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources.cldr.LocaleNames.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("*.LocaleNames_.*.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("*.LocaleNames_.*_.*.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("*.TimeZoneNames_.*.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.util.resources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("*.TimeZoneNames_.*_.*.getContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# java.lang.Error: Trampoline must not be defined by the bootstrap classloader")]),s._v("\nexclude sun.reflect.misc.Trampoline."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("clinit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\nexclude sun.reflect.misc.Trampoline.invoke"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ljava/lang/reflect/Method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Ljava/lang/Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JVM asserts")]),s._v("\nexclude com.sun.crypto.provider.AESWrapCipher.engineUnwrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("BLjava/lang/String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Ljava/security/Key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nexclude sun.security.ssl.*\nexclude sun.net.RegisteredDomain."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("clinit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Huge methods")]),s._v("\nexclude jdk.internal.module.SystemModules.descriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/module/ModuleDescriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("ç„¶åå°±å¯ä»¥å¼€å§‹è¿›è¡Œæå‰ç¼–è¯‘äº†, ä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("jaotc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("J")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UseCompressedOops")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("J")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UseG1GC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("J")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Xmx4g")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("compile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tiered "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("info "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("compile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("commands java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("output libjava"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("coop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("base")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ä¸Šé¢ Jaotc ç”¨äº† -J å‚æ•°ä¼ é€’ä¸ç›®æ ‡è™šæ‹Ÿæœºç›¸å…³çš„è¿è¡Œæ—¶å‚æ•°, è¿™äº›è¿è¡Œæ—¶ä¿¡æ¯ä¸ç¼–è¯‘çš„ç»“æœæ˜¯ç›´æ¥ç›¸å…³çš„, ç¼–è¯‘åçš„é™æ€é“¾æ¥åº“åªèƒ½æ”¯æŒè¿è¡Œåœ¨ç›¸åŒå‚æ•°çš„è™šæ‹Ÿæœºä¹‹ä¸Š, å¦‚æœéœ€è¦æ”¯æŒå¤šç§è™šæ‹Ÿæœºè¿è¡Œå‚æ•°(è­¬å¦‚é‡‡ç”¨ä¸åŒåƒåœ¾æ”¶é›†å™¨, æ˜¯å¦å¼€å¯å‹ç¼©æŒ‡é’ˆç­‰)çš„è¯, å¯ä»¥èŠ±ç‚¹æ—¶é—´ä¸ºæ¯ä¸€ç§å¯èƒ½ç”¨åˆ°çš„å‚æ•°ç»„åˆç¼–è¯‘å‡ºå¯¹åº”çš„é™æ€é“¾æ¥åº“. æ­¤å¤–, ç”±äº Jaotc æ˜¯åŸºäº Graal ç¼–è¯‘å™¨å¼€å‘çš„, æ‰€ä»¥ç°åœ¨ ZGC å’Œ Shenandoah æ”¶é›†å™¨è¿˜ä¸æ”¯æŒ Graal ç¼–è¯‘å™¨, è‡ªç„¶å®ƒä»¬åœ¨ Jaotc ä¸Šä¹Ÿæ˜¯æ— æ³•ä½¿ç”¨çš„. äº‹å®ä¸Š, "),a("strong",[s._v("ç›®å‰ Jaotc åªæ”¯æŒ G1 å’Œ Parallel(PS+PS Old)ä¸¤ç§åƒåœ¾æ”¶é›†å™¨")]),s._v(". ä½¿ç”¨ Jaotc ç¼–è¯‘ java.base æ¨¡å—çš„è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ jaotc -J-XX:+UseCompressedOops -J-XX:+UseG1GC -J-Xmx4g --compile-for-tiered "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--info")]),s._v(" --compile-commands java.base-list.txt "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--output")]),s._v(" libjava.base-coop.so "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--module")]),s._v(" java.base\nCompiling libjava.base-coop.so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6177")]),s._v(" classes found "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("335")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("55845")]),s._v(" methods total, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49575")]),s._v(" methods to compile "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1037")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCompiling with "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" threads\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49575")]),s._v(" methods compiled, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" methods failed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("138821")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nParsing compiled code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("906")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nProcessing metadata "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10867")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPreparing stubs binary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPreparing compiled binary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCreating binary: libjava.base-coop.o "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2719")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCreating shared library: libjava.base-coop.so "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5812")]),s._v(" ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nTotal time: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163609")]),s._v(" ms\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("åœ¨æµ‹è¯•çš„ i7-8750H, 32GB å†…å­˜çš„ç¬”è®°æœ¬ä¸Š, ç¼–è¯‘ JDK 11 çš„ java.base å¤§çº¦èŠ±äº†ä¸‰åˆ†é’Ÿçš„æ—¶é—´, ç”Ÿæˆçš„ libjava.base-coop.o åº“å¤§å°ä¸º 366MB. JDK 9 åˆšåˆšå‘å¸ƒæ—¶, ç¬”è€…åšè¿‡ç›¸åŒçš„ç¼–è¯‘, å½“æ—¶è€—æ—¶é«˜è¾¾ååˆ†é’Ÿ. ç¼–è¯‘å®Œæˆå, å°±å¯ä»¥ä½¿ç”¨æå‰ç¼–è¯‘ç‰ˆæœ¬çš„ java.base æ¨¡å—æ¥è¿è¡Œ Java ç¨‹åºäº†, æ–¹æ³•ä¸å‰é¢è¿è¡Œ HelloWorld æ˜¯ä¸€æ ·çš„, ç”¨ "),a("code",[s._v("-XX: AOTLibrary")]),s._v("â€‹ æ¥æŒ‡å®šé“¾æ¥åº“ä½ç½®å³å¯, è­¬å¦‚:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("java -XX:AOTLibrary=java_base/libjava.base-coop.so,./libHelloWorld.so HelloWorld\nHello World!\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("è¿˜å¯ä»¥ä½¿ç”¨ "),a("code",[s._v("-XX: +PrintAOT")]),s._v("â€‹ å‚æ•°æ¥ç¡®è®¤å“ªäº›æ–¹æ³•ä½¿ç”¨äº†æå‰ç¼–è¯‘çš„ç‰ˆæœ¬, ä»è¾“å‡ºä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°, å¦‚æœä¸ä½¿ç”¨æå‰ç¼–è¯‘ç‰ˆæœ¬çš„ java.base æ¨¡å—, å°±åªæœ‰ HelloWord çš„æ„é€ å‡½æ•°å’Œ main() æ–¹æ³•æ˜¯æå‰ç¼–è¯‘ç‰ˆæœ¬çš„:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+PrintAOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:AOTLibrary")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./libHelloWorld.so HelloWorld\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     loaded    ./libHelloWorld.so  aot library\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("105")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     aot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   HelloWorld."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("105")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     aot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   HelloWorld.main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ljava/lang/String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\nHello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ä½†å¦‚æœåŠ å…¥ libjava.base-coop.so, é‚£ä½¿ç”¨åˆ°çš„å‡ ä¹æ‰€æœ‰çš„æ ‡å‡† Java SE API éƒ½æ˜¯è¢«æå‰ç¼–è¯‘å¥½çš„, è¾“å‡ºå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:AOTLibrary")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("java_base/libjava.base-coop.so,./libHelloWorld.so HelloWorld\nHello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     loaded    java_base/libjava.base-coop.so  aot library\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     loaded    ./libHelloWorld.so  aot library\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Found  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Z  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("  java_base/libjava.base-coop.so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". // çœç•¥å…¶ä»–è¾“å‡º\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Found  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("J  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("  java_base/libjava.base-coop.so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     aot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   java.lang.Object."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     aot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   java.lang.Object.finalize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". // çœç•¥å…¶ä»–è¾“å‡º\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("ç›®å‰çŠ¶æ€çš„ Jaotc è¿˜æœ‰è®¸å¤šéœ€è¦å®Œå–„çš„åœ°æ–¹, ä»"),a("strong",[s._v("éš¾ä»¥ç›´æ¥ç¼–è¯‘ SpringBoot, MyBatis è¿™äº›å¸¸è§çš„ç¬¬ä¸‰æ–¹å·¥å…·åº“")]),s._v(", ç”šè‡³åœ¨ä¼—å¤š Java æ ‡å‡†æ¨¡å—ä¸­, èƒ½æ¯”è¾ƒé¡ºåˆ©ç¼–è¯‘çš„ä¹Ÿåªæœ‰ java.base æ¨¡å—è€Œå·². ä¸è¿‡éšç€ Graal ç¼–è¯‘å™¨çš„é€æ¸æˆç†Ÿ, ç›¸ä¿¡ Jaotc å‰é€”è¿˜æ˜¯å¯æœŸçš„.")]),s._v(" "),a("p",[s._v('æ­¤å¤–, æœ¬ä¹¦è™½ç„¶é€‰æ‹© Jaotc æ¥è¿›è¡Œå®æˆ˜, ä½†åŒæ ·æœ‰å‘å±•æ½œåŠ›çš„ Substrate VM ä¹Ÿä¸åº”è¢«å¿½è§†. Jaotc åšçš„æå‰ç¼–è¯‘å±äºæœ¬èŠ‚å¼€å¤´æ‰€è¯´çš„ "ç¬¬äºŒæ¡åˆ†æ”¯", å³åšå³æ—¶ç¼–è¯‘çš„ç¼“å­˜; è€Œ Substrate VM åˆ™æ˜¯é€‰æ‹©çš„ "ç¬¬ä¸€æ¡åˆ†æ”¯", åšçš„æ˜¯ä¼ ç»Ÿçš„é™æ€æå‰ç¼–è¯‘.')]),s._v(" "),a("h4",{attrs:{id:"ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯"}},[s._v("#")]),s._v(" ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯")]),s._v(" "),a("p",[s._v("ç»è¿‡å‰é¢å¯¹å³æ—¶ç¼–è¯‘, æå‰ç¼–è¯‘çš„è®²è§£, è¯»è€…åº”è¯¥å·²ç»å»ºç«‹èµ·ä¸€ä¸ªè®¤çŸ¥: "),a("strong",[s._v("ç¼–è¯‘å™¨çš„ç›®æ ‡è™½ç„¶æ˜¯åšç”±ç¨‹åºä»£ç ç¿»è¯‘ä¸ºæœ¬åœ°æœºå™¨ç çš„å·¥ä½œ, ä½†å…¶å®éš¾ç‚¹å¹¶ä¸åœ¨äºèƒ½ä¸èƒ½æˆåŠŸç¿»è¯‘å‡ºæœºå™¨ç ,")]),s._v(" "),a("mark",[a("strong",[s._v("è¾“å‡ºä»£ç ä¼˜åŒ–è´¨é‡çš„é«˜ä½æ‰æ˜¯å†³å®šç¼–è¯‘å™¨ä¼˜ç§€ä¸å¦çš„å…³é”®")])]),s._v(". åœ¨æœ¬ç« ä¹‹å‰çš„å†…å®¹é‡Œå‡ºç°è¿‡è®¸å¤šä¼˜åŒ–æªæ–½çš„ä¸“ä¸šåè¯, æœ‰ä¸€äº›æ˜¯ç¼–è¯‘åŸç†ä¸­çš„åŸºç¡€çŸ¥è¯†, è­¬å¦‚æ–¹æ³•å†…è”, åªè¦æ˜¯è®¡ç®—æœºä¸“ä¸šæ¯•ä¸šçš„è¯»è€…è‡³å°‘éƒ½æœ‰åˆæ­¥çš„æ¦‚å¿µ; ä½†ä¹Ÿæœ‰ä¸€äº›ä¸“ä¸šæ€§æ¯”è¾ƒå¼ºçš„åè¯, è­¬å¦‚é€ƒé€¸åˆ†æ, å¯èƒ½ä¸å°‘è¯»è€…åªå¬åå­—å¾ˆéš¾æƒ³è±¡å‡ºæ¥è¿™ä¸ªä¼˜åŒ–ä¼šåšä»€ä¹ˆäº‹æƒ…. æœ¬èŠ‚å°†ä»‹ç»å‡ ç§ HotSpot è™šæ‹Ÿæœºçš„"),a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨åœ¨ç”Ÿæˆä»£ç æ—¶é‡‡ç”¨çš„ä»£ç ä¼˜åŒ–æŠ€æœ¯")]),s._v(", ä»¥å°è§å¤§, è§å¾®çŸ¥è‘—, è®©è¯»è€…å¯¹ç¼–è¯‘å™¨ä»£ç ä¼˜åŒ–æœ‰æ•´ä½“ç†è§£.")]),s._v(" "),a("h5",{attrs:{id:"_1-ä¼˜åŒ–æŠ€æœ¯æ¦‚è§ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¼˜åŒ–æŠ€æœ¯æ¦‚è§ˆ"}},[s._v("#")]),s._v(" 1.ä¼˜åŒ–æŠ€æœ¯æ¦‚è§ˆ")]),s._v(" "),a("p",[s._v("OpenJDK çš„å®˜æ–¹ Wiki ä¸Š, HotSpot è™šæ‹Ÿæœºè®¾è®¡å›¢é˜Ÿåˆ—å‡ºäº†ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå…¨é¢çš„, "),a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨ä¸­é‡‡ç”¨çš„ä¼˜åŒ–æŠ€æœ¯")]),s._v("åˆ—è¡¨, å¦‚è¡¨ 11-1 æ‰€ç¤º, å…¶ä¸­æœ‰ä¸å°‘ç»å…¸ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ‰‹æ®µ, ä¹Ÿæœ‰è®¸å¤šé’ˆå¯¹ Java è¯­è¨€, æˆ–è€…è¯´é’ˆå¯¹è¿è¡Œåœ¨ Java è™šæ‹Ÿæœºä¸Šçš„æ‰€æœ‰è¯­è¨€è¿›è¡Œçš„ä¼˜åŒ–. æœ¬èŠ‚å…ˆå¯¹è¿™äº›æŠ€æœ¯è¿›è¡Œæ¦‚è§ˆ, åœ¨åé¢å‡ èŠ‚ä¸­, å°†æŒ‘é€‰è‹¥å¹²æœ€é‡è¦æˆ–æœ€å…¸å‹çš„ä¼˜åŒ–, ä¸è¯»è€…ä¸€èµ·çœ‹çœ‹ä¼˜åŒ–å‰åçš„ä»£ç å‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–.")]),s._v(" "),a("blockquote",[a("p",[s._v("è¡¨11-1 å³æ—¶ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ä¸€è§ˆ")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00205-20240302133505-6fkyul3.jpg",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00206-20240302133505-ynn2tj9.jpg",alt:""}})]),s._v(" "),a("p",[s._v('ä¸Šè¿°çš„ä¼˜åŒ–æŠ€æœ¯çœ‹èµ·æ¥å¾ˆå¤š, è€Œä¸”åå­—çœ‹èµ·æ¥å¤§å¤šæ˜¾å¾—æœ‰ç‚¹ "é«˜æ·±è«æµ‹", å®é™…ä¸Šè¦å®ç°è¿™äº›ä¼˜åŒ–ç¡®å®æœ‰ä¸å°çš„éš¾åº¦, ä½†å¤§éƒ¨åˆ†ä¼˜åŒ–æŠ€æœ¯ç†è§£èµ·æ¥éƒ½å¹¶ä¸å›°éš¾, ä¸ºäº†æ¶ˆé™¤è¯»è€…å¯¹è¿™äº›ä¼˜åŒ–æŠ€æœ¯çš„é™Œç”Ÿæ„Ÿ, ç¬”è€…ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­: é€šè¿‡å¤§å®¶ç†Ÿæ‚‰çš„ Java ä»£ç å˜åŒ–æ¥å±•ç¤ºå…¶ä¸­å‡ ç§ä¼˜åŒ–æŠ€æœ¯æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„. ä¸è¿‡é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ç‚¹, '),a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨å¯¹è¿™äº›ä»£ç ä¼˜åŒ–å˜æ¢æ˜¯å»ºç«‹åœ¨ä»£ç çš„ä¸­é—´è¡¨ç¤ºæˆ–è€…æ˜¯æœºå™¨ç ä¹‹ä¸Šçš„, ç»ä¸æ˜¯ç›´æ¥åœ¨ Java æºç ä¸Šå»åšçš„")]),s._v(", è¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿è®²è§£, ä½¿ç”¨äº† Java è¯­è¨€çš„è¯­æ³•æ¥è¡¨ç¤ºè¿™äº›ä¼˜åŒ–æŠ€æœ¯æ‰€å‘æŒ¥çš„ä½œç”¨.")]),s._v(" "),a("p",[s._v("ç¬¬ä¸€æ­¥, ä»åŸå§‹ä»£ç å¼€å§‹, å¦‚ä»£ç æ¸…å• 11-6 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-6 ä¼˜åŒ–å‰çš„åŸå§‹ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("B")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...do stuff...")]),s._v("\n    z "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" z"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("ä»£ç æ¸…å• 11-6 æ‰€ç¤ºçš„å†…å®¹å·²ç»éå¸¸ç®€åŒ–äº†, ä½†æ˜¯ä»æœ‰ä¸å°‘ä¼˜åŒ–çš„ç©ºé—´. é¦–å…ˆ, ç¬¬ä¸€ä¸ªè¦è¿›è¡Œçš„ä¼˜åŒ–æ˜¯"),a("mark",[a("strong",[s._v("æ–¹æ³•å†…è”")])]),s._v(", å®ƒçš„ä¸»è¦ç›®çš„æœ‰ä¸¤ä¸ª: "),a("strong",[s._v("ä¸€æ˜¯å»é™¤æ–¹æ³•è°ƒç”¨çš„æˆæœ¬(å¦‚æŸ¥æ‰¾æ–¹æ³•ç‰ˆæœ¬, å»ºç«‹æ ˆå¸§ç­‰); äºŒæ˜¯ä¸ºå…¶ä»–ä¼˜åŒ–å»ºç«‹è‰¯å¥½çš„åŸºç¡€")]),s._v(". æ–¹æ³•å†…è”è†¨èƒ€ä¹‹åå¯ä»¥ä¾¿äºåœ¨æ›´å¤§èŒƒå›´ä¸Šè¿›è¡Œåç»­çš„ä¼˜åŒ–æ‰‹æ®µ, å¯ä»¥è·å–æ›´å¥½çš„ä¼˜åŒ–æ•ˆæœ. å› æ­¤å„ç§ç¼–è¯‘å™¨"),a("strong",[s._v("ä¸€èˆ¬éƒ½ä¼šæŠŠå†…è”ä¼˜åŒ–æ”¾åœ¨ä¼˜åŒ–åºåˆ—æœ€é å‰çš„ä½ç½®")]),s._v(". å†…è”åçš„ä»£ç å¦‚ä»£ç æ¸…å• 11-7 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-7 å†…è”åçš„ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...do stuff...")]),s._v("\n    z "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œå†è®¿é—®bæ˜¯å†—ä½™çš„")]),s._v("\n    sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" z"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ç¬¬äºŒæ­¥è¿›è¡Œ"),a("mark",[a("strong",[s._v("å†—ä½™è®¿é—®æ¶ˆé™¤")])]),s._v('(Redundant Loads Elimination), å‡è®¾ä»£ç ä¸­é—´æ³¨é‡Šæ‰çš„ "...do stuff..." æ‰€ä»£è¡¨çš„æ“ä½œä¸ä¼šæ”¹å˜ b.value çš„å€¼, é‚£ä¹ˆå°±å¯ä»¥æŠŠ "'),a("code",[s._v("z = b.value")]),s._v('â€‹" æ›¿æ¢ä¸º "'),a("code",[s._v("z = y")]),s._v('â€‹", å› ä¸ºä¸Šä¸€å¥ "'),a("code",[s._v("y = b.value")]),s._v('â€‹" å·²ç»ä¿è¯äº†å˜é‡ y ä¸ b.value æ˜¯ä¸€è‡´çš„, è¿™æ ·å°±å¯ä»¥ä¸å†å»è®¿é—®å¯¹è±¡ b çš„å±€éƒ¨å˜é‡äº†. å¦‚æœæŠŠ '),a("code",[s._v("b.value")]),s._v("â€‹ çœ‹ä½œä¸€ä¸ªè¡¨è¾¾å¼, é‚£ä¹ˆä¹Ÿå¯ä»¥æŠŠè¿™é¡¹ä¼˜åŒ–çœ‹ä½œä¸€ç§"),a("strong",[s._v("å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤")]),s._v("(Common Subexpression Elimination), ä¼˜åŒ–åçš„ä»£ç å¦‚ä»£ç æ¸…å• 11-8 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-8 å†—ä½™å­˜å‚¨æ¶ˆé™¤åçš„ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...do stuff...")]),s._v("\n    z "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" z"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ç¬¬ä¸‰æ­¥è¿›è¡Œ"),a("mark",[a("strong",[s._v("å¤å†™ä¼ æ’­")])]),s._v("(Copy Propagation), å› ä¸ºè¿™æ®µç¨‹åºçš„é€»è¾‘ä¹‹ä¸­æ²¡æœ‰å¿…è¦ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„å˜é‡ z, å®ƒä¸å˜é‡ y æ˜¯å®Œå…¨ç›¸ç­‰çš„, å› æ­¤å¯ä»¥"),a("strong",[s._v("ä½¿ç”¨ y æ¥ä»£æ›¿ z")]),s._v(". å¤å†™ä¼ æ’­ä¹‹åçš„ç¨‹åºå¦‚ä»£ç æ¸…å• 11-9 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-9 å¤å†™ä¼ æ’­çš„ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...do stuff...")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ç¬¬å››æ­¥è¿›è¡Œ"),a("mark",[a("strong",[s._v("æ— ç”¨ä»£ç æ¶ˆé™¤")])]),s._v("(Dead Code Elimination), æ— ç”¨ä»£ç å¯èƒ½æ˜¯"),a("strong",[s._v("æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç ")]),s._v(', ä¹Ÿå¯èƒ½æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ä»£ç . å› æ­¤å®ƒåˆè¢«å¾ˆå½¢è±¡åœ°ç§°ä¸º "Dead Code", åœ¨ä»£ç æ¸…å• 11-9 ä¸­, "'),a("code",[s._v("y = y")]),s._v('â€‹" æ˜¯æ²¡æœ‰æ„ä¹‰çš„, æŠŠå®ƒæ¶ˆé™¤åçš„ç¨‹åºå¦‚ä»£ç æ¸…å• 11-10 æ‰€ç¤º.')]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-10 è¿›è¡Œæ— ç”¨ä»£ç æ¶ˆé™¤çš„ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...do stuff...")]),s._v("\n    sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ç»è¿‡å››æ¬¡ä¼˜åŒ–ä¹‹å, ä»£ç æ¸…å• 11-10 æ‰€ç¤ºä»£ç ä¸ä»£ç æ¸…å• 11-6 æ‰€ç¤ºä»£ç æ‰€è¾¾åˆ°çš„"),a("strong",[s._v("æ•ˆæœæ˜¯ä¸€è‡´")]),s._v("çš„, ä½†æ˜¯å‰è€…æ¯”åè€…çœç•¥äº†è®¸å¤šè¯­å¥, ä½“ç°åœ¨å­—èŠ‚ç å’Œæœºå™¨ç æŒ‡ä»¤ä¸Šçš„å·®è·ä¼šæ›´å¤§, æ‰§è¡Œæ•ˆç‡çš„å·®è·ä¹Ÿä¼šæ›´é«˜. ç¼–è¯‘å™¨çš„è¿™äº›ä¼˜åŒ–æŠ€æœ¯å®ç°èµ·æ¥ä¹Ÿè®¸ç¡®å®å¤æ‚, ä½†å®Œå…¨ä¸éœ€è¦æœ‰ä»»ä½•çš„ææƒ§å¿ƒç†.")]),s._v(" "),a("p",[s._v("æ¥ä¸‹æ¥æŒ‘é€‰äº†å››é¡¹æœ‰ä»£è¡¨æ€§çš„ä¼˜åŒ–æŠ€æœ¯, ä¸å¤§å®¶ä¸€èµ·è§‚å¯Ÿå®ƒä»¬æ˜¯å¦‚ä½•è¿ä½œçš„. å®ƒä»¬åˆ†åˆ«æ˜¯:")]),s._v(" "),a("ul",[a("li",[s._v("æœ€é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€: "),a("strong",[s._v("æ–¹æ³•å†…è”")]),s._v(".")]),s._v(" "),a("li",[s._v("æœ€å‰æ²¿çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€: "),a("strong",[s._v("é€ƒé€¸åˆ†æ")]),s._v(".")]),s._v(" "),a("li",[s._v("è¯­è¨€æ— å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€: "),a("strong",[s._v("å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤")]),s._v(".")]),s._v(" "),a("li",[s._v("è¯­è¨€ç›¸å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€: "),a("strong",[s._v("æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤")]),s._v(".")])]),s._v(" "),a("h5",{attrs:{id:"_2-æ–¹æ³•å†…è”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ–¹æ³•å†…è”"}},[s._v("#")]),s._v(" 2.æ–¹æ³•å†…è”")]),s._v(" "),a("p",[s._v('åœ¨å‰é¢çš„è®²è§£ä¸­, å¤šæ¬¡æåˆ°æ–¹æ³•å†…è”, è¯´å®ƒæ˜¯ç¼–è¯‘å™¨æœ€é‡è¦çš„ä¼˜åŒ–æ‰‹æ®µ, ç”šè‡³éƒ½å¯ä»¥ä¸åŠ ä¸Š "ä¹‹ä¸€". '),a("strong",[s._v("å†…è”è¢«ä¸šå†…æˆç§°ä¸ºä¼˜åŒ–ä¹‹æ¯, å› ä¸ºé™¤äº†æ¶ˆé™¤æ–¹æ³•è°ƒç”¨çš„æˆæœ¬ä¹‹å¤–, å®ƒæ›´é‡è¦çš„æ„ä¹‰æ˜¯ä¸ºå…¶ä»–ä¼˜åŒ–æ‰‹æ®µå»ºç«‹è‰¯å¥½çš„åŸºç¡€")]),s._v(", ä»£ç æ¸…å• 11-11 æ‰€ç¤ºçš„ç®€å•ä¾‹å­å°±æ­ç¤ºäº†å†…è”å¯¹å…¶ä»–ä¼˜åŒ–æ‰‹æ®µçš„å·¨å¤§ä»·å€¼: "),a("mark",[a("strong",[s._v("æ²¡æœ‰å†…è”, å¤šæ•°å…¶ä»–ä¼˜åŒ–éƒ½æ— æ³•æœ‰æ•ˆè¿›è¡Œ")])]),s._v('. ä¾‹å­é‡Œ testInline() æ–¹æ³•çš„å†…éƒ¨å…¨éƒ¨æ˜¯æ— ç”¨çš„ä»£ç , ä½†å¦‚æœä¸åšå†…è”, åç»­å³ä½¿è¿›è¡Œäº†æ— ç”¨ä»£ç æ¶ˆé™¤çš„ä¼˜åŒ–, ä¹Ÿæ— æ³•å‘ç°ä»»ä½• "Dead Code" çš„å­˜åœ¨. å¦‚æœåˆ†å¼€æ¥çœ‹, foo() å’Œ testInline() ä¸¤ä¸ªæ–¹æ³•é‡Œé¢çš„æ“ä½œéƒ½æœ‰å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„.')]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-11 æœªä½œä»»ä½•ä¼˜åŒ–çš„å­—èŠ‚ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"do something"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("testInline")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("mark",[a("strong",[s._v('æ–¹æ³•å†…è”çš„ä¼˜åŒ–è¡Œä¸ºç†è§£èµ·æ¥æ˜¯æ²¡æœ‰ä»»ä½•å›°éš¾çš„, ä¸è¿‡å°±æ˜¯æŠŠç›®æ ‡æ–¹æ³•çš„ä»£ç åŸå°ä¸åŠ¨åœ° "å¤åˆ¶" åˆ°å‘èµ·è°ƒç”¨çš„æ–¹æ³•ä¹‹ä¸­, é¿å…å‘ç”ŸçœŸå®çš„æ–¹æ³•è°ƒç”¨è€Œå·². ä½†å®é™…ä¸Š Java è™šæ‹Ÿæœºä¸­çš„å†…è”è¿‡ç¨‹å´è¿œæ²¡æœ‰æƒ³è±¡ä¸­å®¹æ˜“, ç”šè‡³å¦‚æœä¸æ˜¯å³æ—¶ç¼–è¯‘å™¨åšäº†ä¸€äº›ç‰¹æ®Šçš„åŠªåŠ›, æŒ‰ç…§ç»å…¸ç¼–è¯‘åŸç†çš„ä¼˜åŒ–ç†è®º, å¤§å¤šæ•°çš„ Java æ–¹æ³•éƒ½æ— æ³•è¿›è¡Œå†…è”.')])])]),s._v(" "),a("p",[s._v("æ— æ³•å†…è”çš„åŸå› å…¶å®åœ¨ç¬¬ 8 ç« ä¸­è®²è§£ Java æ–¹æ³•è§£æå’Œåˆ†æ´¾è°ƒç”¨çš„æ—¶å€™å°±å·²ç»è§£é‡Šè¿‡: "),a("strong",[s._v("åªæœ‰ä½¿ç”¨ invokespecial æŒ‡ä»¤è°ƒç”¨çš„ç§æœ‰æ–¹æ³•, å®ä¾‹æ„é€ å™¨, çˆ¶ç±»æ–¹æ³•å’Œä½¿ç”¨ invokestatic æŒ‡ä»¤è°ƒç”¨çš„é™æ€æ–¹æ³•æ‰ä¼šåœ¨ç¼–è¯‘æœŸè¿›è¡Œè§£æ")]),s._v(". é™¤äº†ä¸Šè¿°å››ç§æ–¹æ³•ä¹‹å¤–(æœ€å¤šå†é™¤å»è¢« final ä¿®é¥°çš„æ–¹æ³•è¿™ç§ç‰¹æ®Šæƒ…å†µ, å°½ç®¡å®ƒä½¿ç”¨ invokevirtual æŒ‡ä»¤è°ƒç”¨, ä½†ä¹Ÿæ˜¯éè™šæ–¹æ³•, ã€ŠJava è¯­è¨€è§„èŒƒã€‹ä¸­æ˜ç¡®è¯´æ˜äº†è¿™ç‚¹), å…¶ä»–çš„ Java æ–¹æ³•è°ƒç”¨éƒ½å¿…é¡»åœ¨è¿è¡Œæ—¶è¿›è¡Œæ–¹æ³•æ¥æ”¶è€…çš„å¤šæ€é€‰æ‹©, å®ƒä»¬éƒ½æœ‰å¯èƒ½å­˜åœ¨å¤šäºä¸€ä¸ªç‰ˆæœ¬çš„æ–¹æ³•æ¥æ”¶è€…, ç®€è€Œè¨€ä¹‹, Java è¯­è¨€ä¸­é»˜è®¤çš„å®ä¾‹æ–¹æ³•æ˜¯"),a("strong",[s._v("è™šæ–¹æ³•")]),s._v(".")]),s._v(" "),a("p",[a("mark",[a("strong",[s._v("å¯¹äºä¸€ä¸ªè™šæ–¹æ³•, ç¼–è¯‘å™¨é™æ€åœ°å»åšå†…è”çš„æ—¶å€™å¾ˆéš¾ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªä¸ªæ–¹æ³•ç‰ˆæœ¬")])]),s._v(", ä»¥å°†ä»£ç æ¸…å• 11-7 ä¸­æ‰€ç¤º b.get() ç›´æ¥å†…è”ä¸º b.value ä¸ºä¾‹, "),a("strong",[s._v("å¦‚æœä¸ä¾èµ–ä¸Šä¸‹æ–‡, æ˜¯æ— æ³•ç¡®å®š b çš„å®é™…ç±»å‹æ˜¯ä»€ä¹ˆçš„")]),s._v(". å‡å¦‚æœ‰ ParentB å’Œ SubB æ˜¯ä¸¤ä¸ªå…·æœ‰ç»§æ‰¿å…³ç³»çš„çˆ¶å­ç±»å‹, å¹¶ä¸”å­ç±»é‡å†™äº†çˆ¶ç±»çš„ get() æ–¹æ³•, é‚£ä¹ˆ b.get() æ˜¯æ‰§è¡Œçˆ¶ç±»çš„ get() æ–¹æ³•è¿˜æ˜¯å­ç±»çš„ get() æ–¹æ³•, "),a("strong",[s._v("è¿™åº”è¯¥æ˜¯æ ¹æ®å®é™…ç±»å‹åŠ¨æ€åˆ†æ´¾çš„, è€Œå®é™…ç±»å‹å¿…é¡»åœ¨å®é™…è¿è¡Œåˆ°è¿™ä¸€è¡Œä»£ç æ—¶æ‰èƒ½ç¡®å®š, ç¼–è¯‘å™¨å¾ˆéš¾åœ¨ç¼–è¯‘æ—¶å¾—å‡ºç»å¯¹å‡†ç¡®çš„ç»“è®º")]),s._v(". æ›´ç³Ÿç³•çš„æƒ…å†µæ˜¯, "),a("strong",[s._v("ç”±äº Java æå€¡ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼è¿›è¡Œç¼–ç¨‹, è€Œ Java å¯¹è±¡çš„æ–¹æ³•é»˜è®¤å°±æ˜¯è™šæ–¹æ³•, å¯ä»¥è¯´ Java é—´æ¥é¼“åŠ±äº†ç¨‹åºå‘˜ä½¿ç”¨å¤§é‡çš„è™šæ–¹æ³•æ¥å®ç°ç¨‹åºé€»è¾‘. æ ¹æ®ä¸Šé¢çš„åˆ†æå¯çŸ¥,")]),s._v(" "),a("mark",[a("strong",[s._v('å†…è”ä¸è™šæ–¹æ³•ä¹‹é—´ä¼šäº§ç”Ÿ "çŸ›ç›¾"')])]),s._v(" , é‚£æ˜¯ä¸æ˜¯ä¸ºäº†æé«˜æ‰§è¡Œæ€§èƒ½, å°±åº”è¯¥é»˜è®¤ç»™æ¯ä¸ªæ–¹æ³•éƒ½ä½¿ç”¨ final å…³é”®å­—å»ä¿®é¥°å‘¢? C å’Œ C++ è¯­è¨€çš„ç¡®æ˜¯è¿™æ ·åšçš„, é»˜è®¤çš„æ–¹æ³•æ˜¯éè™šæ–¹æ³•, å¦‚æœéœ€è¦ç”¨åˆ°å¤šæ€, å°±ç”¨ virtual å…³é”®å­—æ¥ä¿®é¥°, "),a("strong",[s._v("ä½† Java é€‰æ‹©äº†åœ¨è™šæ‹Ÿæœºä¸­è§£å†³è¿™ä¸ªé—®é¢˜")]),s._v(".")]),s._v(" "),a("p",[a("strong",[s._v("ä¸ºäº†è§£å†³è™šæ–¹æ³•çš„å†…è”é—®é¢˜, Java è™šæ‹Ÿæœºé¦–å…ˆå¼•å…¥äº†ä¸€ç§åä¸ºç±»å‹ç»§æ‰¿å…³ç³»åˆ†æ(Class Hierarchy Analysis,")]),s._v(" "),a("mark",[a("strong",[s._v("CHA")])]),s._v("â€‹ "),a("strong",[s._v(")çš„æŠ€æœ¯, è¿™æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºèŒƒå›´å†…çš„ç±»å‹åˆ†ææŠ€æœ¯, ç”¨äºç¡®å®šåœ¨ç›®å‰å·²åŠ è½½çš„ç±»ä¸­, æŸä¸ªæ¥å£æ˜¯å¦æœ‰å¤šäºä¸€ç§çš„å®ç°, æŸä¸ªç±»æ˜¯å¦å­˜åœ¨å­ç±», æŸä¸ªå­ç±»æ˜¯å¦è¦†ç›–äº†çˆ¶ç±»çš„æŸä¸ªè™šæ–¹æ³•ç­‰ä¿¡æ¯")]),s._v(". è¿™æ ·ç¼–è¯‘å™¨åœ¨è¿›è¡Œå†…è”æ—¶å°±ä¼šåˆ†ä¸åŒæƒ…å†µé‡‡å–ä¸åŒçš„å¤„ç†: "),a("mark",[a("strong",[s._v('å¦‚æœæ˜¯éè™šæ–¹æ³•, é‚£ä¹ˆç›´æ¥è¿›è¡Œå†…è”å°±å¯ä»¥äº†, è¿™ç§çš„å†…è”æ˜¯æœ‰ç™¾åˆ†ç™¾å®‰å…¨ä¿éšœçš„; å¦‚æœé‡åˆ°è™šæ–¹æ³•, åˆ™ä¼šå‘ CHA æŸ¥è¯¢æ­¤æ–¹æ³•åœ¨å½“å‰ç¨‹åºçŠ¶æ€ä¸‹æ˜¯å¦çœŸçš„æœ‰å¤šä¸ªç›®æ ‡ç‰ˆæœ¬å¯ä¾›é€‰æ‹©, å¦‚æœæŸ¥è¯¢åˆ°åªæœ‰ä¸€ä¸ªç‰ˆæœ¬, é‚£å°±å¯ä»¥å‡è®¾ "åº”ç”¨ç¨‹åºçš„å…¨è²Œå°±æ˜¯ç°åœ¨è¿è¡Œçš„è¿™ä¸ªæ ·å­" æ¥è¿›è¡Œå†…è”, è¿™ç§å†…è”è¢«ç§°ä¸ºå®ˆæŠ¤å†…è”')])]),s._v('. ä¸è¿‡ç”±äº Java ç¨‹åºæ˜¯åŠ¨æ€è¿æ¥çš„, è¯´ä¸å‡†ä»€ä¹ˆæ—¶å€™å°±ä¼šåŠ è½½åˆ°æ–°çš„ç±»å‹ä»è€Œæ”¹å˜ CHA ç»“è®º, å› æ­¤è¿™ç§å†…è”å±äºæ¿€è¿›é¢„æµ‹æ€§ä¼˜åŒ–, å¿…é¡»é¢„ç•™å¥½ "é€ƒç”Ÿé—¨", å³å½“å‡è®¾æ¡ä»¶ä¸æˆç«‹æ—¶çš„ "é€€è·¯"(Slow Path). å‡å¦‚åœ¨ç¨‹åºçš„åç»­æ‰§è¡Œè¿‡ç¨‹ä¸­, è™šæ‹Ÿæœºä¸€ç›´æ²¡æœ‰åŠ è½½åˆ°ä¼šä»¤è¿™ä¸ªæ–¹æ³•çš„æ¥æ”¶è€…çš„ç»§æ‰¿å…³ç³»å‘ç”Ÿå˜åŒ–çš„ç±», é‚£è¿™ä¸ªå†…è”ä¼˜åŒ–çš„ä»£ç å°±å¯ä»¥ä¸€ç›´ä½¿ç”¨ä¸‹å». å¦‚æœåŠ è½½äº†å¯¼è‡´ç»§æ‰¿å…³ç³»å‘ç”Ÿå˜åŒ–çš„æ–°ç±», é‚£ä¹ˆå°±å¿…é¡»æŠ›å¼ƒå·²ç»ç¼–è¯‘çš„ä»£ç , é€€å›åˆ°è§£é‡ŠçŠ¶æ€è¿›è¡Œæ‰§è¡Œ, æˆ–è€…é‡æ–°è¿›è¡Œç¼–è¯‘.')]),s._v(" "),a("p",[s._v("å‡å¦‚å‘ CHA æŸ¥è¯¢å‡ºæ¥çš„ç»“æœæ˜¯è¯¥æ–¹æ³•ç¡®å®"),a("strong",[s._v("æœ‰å¤šä¸ªç‰ˆæœ¬çš„ç›®æ ‡æ–¹æ³•å¯ä¾›é€‰æ‹©")]),s._v(", é‚£å³æ—¶ç¼–è¯‘å™¨è¿˜å°†è¿›è¡Œæœ€åä¸€æ¬¡åŠªåŠ›, ä½¿ç”¨å†…è”ç¼“å­˜(Inline Cache)çš„æ–¹å¼æ¥ç¼©å‡æ–¹æ³•è°ƒç”¨çš„å¼€é”€. è¿™ç§çŠ¶æ€ä¸‹æ–¹æ³•è°ƒç”¨æ˜¯çœŸæ­£å‘ç”Ÿäº†çš„, ä½†æ˜¯æ¯”èµ·ç›´æ¥æŸ¥è™šæ–¹æ³•è¡¨è¿˜æ˜¯è¦å¿«ä¸€äº›. å†…è”ç¼“å­˜æ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸å…¥å£ä¹‹å‰çš„ç¼“å­˜, å®ƒçš„å·¥ä½œåŸç†å¤§è‡´ä¸º: "),a("strong",[s._v("åœ¨æœªå‘ç”Ÿæ–¹æ³•è°ƒç”¨ä¹‹å‰, å†…è”ç¼“å­˜çŠ¶æ€ä¸ºç©º, å½“ç¬¬ä¸€æ¬¡è°ƒç”¨å‘ç”Ÿå, ç¼“å­˜è®°å½•ä¸‹æ–¹æ³•æ¥æ”¶è€…çš„ç‰ˆæœ¬ä¿¡æ¯, å¹¶ä¸”æ¯æ¬¡è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶éƒ½æ¯”è¾ƒæ¥æ”¶è€…çš„ç‰ˆæœ¬")]),s._v(". å¦‚æœä»¥åè¿›æ¥çš„æ¯æ¬¡è°ƒç”¨çš„æ–¹æ³•æ¥æ”¶è€…ç‰ˆæœ¬éƒ½æ˜¯ä¸€æ ·çš„, é‚£ä¹ˆè¿™æ—¶å®ƒå°±æ˜¯ä¸€ç§å•æ€å†…è”ç¼“å­˜(Monomorphic Inline Cache). é€šè¿‡è¯¥ç¼“å­˜æ¥è°ƒç”¨, æ¯”ç”¨ä¸å†…è”çš„éè™šæ–¹æ³•è°ƒç”¨, ä»…å¤šäº†ä¸€æ¬¡ç±»å‹åˆ¤æ–­çš„å¼€é”€è€Œå·². ä½†å¦‚æœçœŸçš„å‡ºç°æ–¹æ³•æ¥æ”¶è€…ä¸ä¸€è‡´çš„æƒ…å†µ, å°±è¯´æ˜ç¨‹åºç”¨åˆ°äº†è™šæ–¹æ³•çš„å¤šæ€ç‰¹æ€§, è¿™æ—¶å€™ä¼šé€€åŒ–æˆè¶…å¤šæ€å†…è”ç¼“å­˜(Megamorphic Inline Cache), å…¶å¼€é”€ç›¸å½“äºçœŸæ­£æŸ¥æ‰¾è™šæ–¹æ³•è¡¨æ¥è¿›è¡Œæ–¹æ³•åˆ†æ´¾.")]),s._v(" "),a("p",[s._v("æ‰€ä»¥è¯´, "),a("strong",[s._v("åœ¨å¤šæ•°æƒ…å†µä¸‹ Java è™šæ‹Ÿæœºè¿›è¡Œçš„æ–¹æ³•å†…è”éƒ½æ˜¯ä¸€ç§æ¿€è¿›ä¼˜åŒ–")]),s._v('. äº‹å®ä¸Š, æ¿€è¿›ä¼˜åŒ–çš„åº”ç”¨åœ¨é«˜æ€§èƒ½çš„ Java è™šæ‹Ÿæœºä¸­æ¯”æ¯”çš†æ˜¯, æä¸ºå¸¸è§. é™¤äº†æ–¹æ³•å†…è”ä¹‹å¤–, å¯¹äºå‡ºç°æ¦‚ç‡å¾ˆå°(é€šè¿‡ç»éªŒæ•°æ®æˆ–è§£é‡Šå™¨æ”¶é›†åˆ°çš„æ€§èƒ½ç›‘æ§ä¿¡æ¯ç¡®å®šæ¦‚ç‡å¤§å°)çš„éšå¼å¼‚å¸¸, ä½¿ç”¨æ¦‚ç‡å¾ˆå°çš„åˆ†æ”¯ç­‰éƒ½å¯ä»¥è¢«æ¿€è¿›ä¼˜åŒ– "ç§»é™¤", å¦‚æœçœŸçš„å‡ºç°äº†å°æ¦‚ç‡äº‹ä»¶, è¿™æ—¶æ‰ä¼šä» "é€ƒç”Ÿé—¨" å›åˆ°è§£é‡ŠçŠ¶æ€é‡æ–°æ‰§è¡Œ.')]),s._v(" "),a("h5",{attrs:{id:"_3-é€ƒé€¸åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-é€ƒé€¸åˆ†æ"}},[s._v("#")]),s._v(" 3.é€ƒé€¸åˆ†æ")]),s._v(" "),a("p",[a("strong",[s._v("é€ƒé€¸åˆ†æ(Escape Analysis)æ˜¯ç›®å‰ Java è™šæ‹Ÿæœºä¸­æ¯”è¾ƒå‰æ²¿çš„ä¼˜åŒ–æŠ€æœ¯")]),s._v(", å®ƒä¸ç±»å‹ç»§æ‰¿å…³ç³»åˆ†æä¸€æ ·, å¹¶ä¸æ˜¯ç›´æ¥ä¼˜åŒ–ä»£ç çš„æ‰‹æ®µ, è€Œæ˜¯ä¸ºå…¶ä»–ä¼˜åŒ–æªæ–½æä¾›ä¾æ®çš„åˆ†ææŠ€æœ¯.")]),s._v(" "),a("p",[s._v("é€ƒé€¸åˆ†æçš„åŸºæœ¬åŸç†æ˜¯: "),a("strong",[s._v("åˆ†æå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸ, å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•é‡Œé¢è¢«å®šä¹‰å, å®ƒå¯èƒ½è¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨, ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–æ–¹æ³•ä¸­, è¿™ç§ç§°ä¸º")]),s._v("â€‹"),a("mark",[a("strong",[s._v("æ–¹æ³•é€ƒé€¸")])]),s._v("â€‹ "),a("strong",[s._v("; ç”šè‡³è¿˜æœ‰å¯èƒ½è¢«å¤–éƒ¨çº¿ç¨‹è®¿é—®åˆ°, è­¬å¦‚èµ‹å€¼ç»™å¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹ä¸­è®¿é—®çš„å®ä¾‹å˜é‡, è¿™ç§ç§°ä¸º")]),s._v("â€‹"),a("mark",[a("strong",[s._v("çº¿ç¨‹é€ƒé€¸")])]),s._v("â€‹ "),a("strong",[s._v("; ä»ä¸é€ƒé€¸, æ–¹æ³•é€ƒé€¸åˆ°çº¿ç¨‹é€ƒé€¸, ç§°ä¸ºå¯¹è±¡ç”±ä½åˆ°é«˜çš„ä¸åŒé€ƒé€¸ç¨‹åº¦")]),s._v(".")]),s._v(" "),a("p",[a("mark",[a("strong",[s._v("å¦‚æœèƒ½è¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸åˆ°æ–¹æ³•æˆ–çº¿ç¨‹ä¹‹å¤–(æ¢å¥è¯è¯´æ˜¯åˆ«çš„æ–¹æ³•æˆ–çº¿ç¨‹æ— æ³•é€šè¿‡ä»»ä½•é€”å¾„è®¿é—®åˆ°è¿™ä¸ªå¯¹è±¡), æˆ–è€…é€ƒé€¸ç¨‹åº¦æ¯”è¾ƒä½(åªé€ƒé€¸å‡ºæ–¹æ³•è€Œä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹), åˆ™å¯èƒ½ä¸ºè¿™ä¸ªå¯¹è±¡å®ä¾‹é‡‡å–ä¸åŒç¨‹åº¦çš„ä¼˜åŒ–")])]),s._v(", å¦‚:")]),s._v(" "),a("ul",[a("li",[a("mark",[a("strong",[s._v("æ ˆä¸Šåˆ†é…")])]),s._v(": åœ¨ Java è™šæ‹Ÿæœºä¸­, Java å †ä¸Šåˆ†é…åˆ›å»ºå¯¹è±¡çš„å†…å­˜ç©ºé—´å‡ ä¹æ˜¯ Java ç¨‹åºå‘˜éƒ½çŸ¥é“çš„å¸¸è¯†, Java å †ä¸­çš„å¯¹è±¡å¯¹äºå„ä¸ªçº¿ç¨‹éƒ½æ˜¯å…±äº«å’Œå¯è§çš„, åªè¦æŒæœ‰è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨, å°±å¯ä»¥è®¿é—®åˆ°å †ä¸­å­˜å‚¨çš„å¯¹è±¡æ•°æ®. è™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å­ç³»ç»Ÿä¼šå›æ”¶å †ä¸­ä¸å†ä½¿ç”¨çš„å¯¹è±¡, ä½†å›æ”¶åŠ¨ä½œæ— è®ºæ˜¯æ ‡è®°ç­›é€‰å‡ºå¯å›æ”¶å¯¹è±¡, è¿˜æ˜¯å›æ”¶å’Œæ•´ç†å†…å­˜, éƒ½éœ€è¦è€—è´¹å¤§é‡èµ„æº. "),a("strong",[s._v("å¦‚æœç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ä¹‹å¤–, é‚£è®©è¿™ä¸ªå¯¹è±¡åœ¨æ ˆä¸Šåˆ†é…å†…å­˜å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„ä¸»æ„, å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å°±å¯ä»¥éšæ ˆå¸§å‡ºæ ˆè€Œé”€æ¯")]),s._v(". åœ¨ä¸€èˆ¬åº”ç”¨ä¸­, å®Œå…¨ä¸ä¼šé€ƒé€¸çš„å±€éƒ¨å¯¹è±¡å’Œä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹çš„å¯¹è±¡æ‰€å çš„æ¯”ä¾‹æ˜¯å¾ˆå¤§çš„, å¦‚æœèƒ½ä½¿ç”¨æ ˆä¸Šåˆ†é…, é‚£å¤§é‡çš„å¯¹è±¡å°±ä¼šéšç€æ–¹æ³•çš„ç»“æŸè€Œè‡ªåŠ¨é”€æ¯äº†, åƒåœ¾æ”¶é›†å­ç³»ç»Ÿçš„å‹åŠ›å°†ä¼šä¸‹é™å¾ˆå¤š. "),a("strong",[s._v("æ ˆä¸Šåˆ†é…å¯ä»¥æ”¯æŒæ–¹æ³•é€ƒé€¸, ä½†ä¸èƒ½æ”¯æŒçº¿ç¨‹é€ƒé€¸")]),s._v(".")]),s._v(" "),a("li",[a("mark",[a("strong",[s._v("æ ‡é‡æ›¿æ¢")])]),s._v(": è‹¥ä¸€ä¸ªæ•°æ®å·²ç»æ— æ³•å†åˆ†è§£æˆæ›´å°çš„æ•°æ®æ¥è¡¨ç¤ºäº†, Java è™šæ‹Ÿæœºä¸­çš„åŸå§‹æ•°æ®ç±»å‹(int, long ç­‰æ•°å€¼ç±»å‹åŠ reference ç±»å‹ç­‰)éƒ½ä¸èƒ½å†è¿›ä¸€æ­¥åˆ†è§£äº†, é‚£ä¹ˆè¿™äº›æ•°æ®å°±å¯ä»¥è¢«ç§°ä¸º"),a("strong",[s._v("æ ‡é‡")]),s._v(". ç›¸å¯¹çš„, å¦‚æœä¸€ä¸ªæ•°æ®å¯ä»¥ç»§ç»­åˆ†è§£, é‚£å®ƒå°±è¢«ç§°ä¸º"),a("strong",[s._v("èšåˆé‡")]),s._v("(Aggregate), Java ä¸­çš„å¯¹è±¡å°±æ˜¯å…¸å‹çš„èšåˆé‡. "),a("strong",[s._v("å¦‚æœæŠŠä¸€ä¸ªå¯¹è±¡æ‹†æ•£, æ ¹æ®ç¨‹åºè®¿é—®çš„æƒ…å†µ, å°†å…¶ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¢å¤ä¸ºåŸå§‹ç±»å‹æ¥è®¿é—®, è¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºæ ‡é‡æ›¿æ¢. å‡å¦‚é€ƒé€¸åˆ†æèƒ½å¤Ÿè¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«æ–¹æ³•å¤–éƒ¨è®¿é—®, å¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£, é‚£ä¹ˆç¨‹åºçœŸæ­£æ‰§è¡Œçš„æ—¶å€™å°†å¯èƒ½ä¸å»åˆ›å»ºè¿™ä¸ªå¯¹è±¡, è€Œæ”¹ä¸ºç›´æ¥åˆ›å»ºå®ƒçš„è‹¥å¹²ä¸ªè¢«è¿™ä¸ªæ–¹æ³•ä½¿ç”¨çš„æˆå‘˜å˜é‡æ¥ä»£æ›¿")]),s._v(". å°†å¯¹è±¡æ‹†åˆ†å, é™¤äº†å¯ä»¥è®©å¯¹è±¡çš„æˆå‘˜å˜é‡åœ¨æ ˆä¸Š(æ ˆä¸Šå­˜å‚¨çš„æ•°æ®, å¾ˆå¤§æœºä¼šè¢«è™šæ‹Ÿæœºåˆ†é…è‡³ç‰©ç†æœºå™¨çš„é«˜é€Ÿå¯„å­˜å™¨ä¸­å­˜å‚¨)åˆ†é…å’Œè¯»å†™ä¹‹å¤–, è¿˜å¯ä»¥ä¸ºåç»­è¿›ä¸€æ­¥çš„ä¼˜åŒ–æ‰‹æ®µåˆ›å»ºæ¡ä»¶. æ ‡é‡æ›¿æ¢å¯ä»¥è§†ä½œæ ˆä¸Šåˆ†é…çš„ä¸€ç§ç‰¹ä¾‹, å®ç°æ›´ç®€å•(ä¸ç”¨è€ƒè™‘æ•´ä¸ªå¯¹è±¡å®Œæ•´ç»“æ„çš„åˆ†é…), ä½†å¯¹é€ƒé€¸ç¨‹åº¦çš„è¦æ±‚æ›´é«˜, å®ƒä¸å…è®¸å¯¹è±¡é€ƒé€¸å‡ºæ–¹æ³•èŒƒå›´å†….")]),s._v(" "),a("li",[a("mark",[a("strong",[s._v("åŒæ­¥æ¶ˆé™¤")])]),s._v(": "),a("strong",[s._v("çº¿ç¨‹åŒæ­¥æœ¬èº«æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹, å¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹, æ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®, é‚£ä¹ˆè¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šå°±ä¸ä¼šæœ‰ç«äº‰, å¯¹è¿™ä¸ªå˜é‡å®æ–½çš„åŒæ­¥æªæ–½ä¹Ÿå°±å¯ä»¥å®‰å…¨åœ°æ¶ˆé™¤æ‰")]),s._v(".")])]),s._v(" "),a("p",[s._v("ç›´åˆ° JDK 6, HotSpot æ‰å¼€å§‹æ”¯æŒåˆæ­¥çš„é€ƒé€¸åˆ†æ, è€Œä¸”è¿™é¡¹ä¼˜åŒ–æŠ€æœ¯å°šæœªè¶³å¤Ÿæˆç†Ÿ, ä»æœ‰å¾ˆå¤§çš„æ”¹è¿›ä½™åœ°. ä¸æˆç†Ÿçš„åŸå› ä¸»è¦æ˜¯"),a("strong",[s._v("é€ƒé€¸åˆ†æçš„è®¡ç®—æˆæœ¬éå¸¸é«˜, ç”šè‡³ä¸èƒ½ä¿è¯é€ƒé€¸åˆ†æå¸¦æ¥çš„æ€§èƒ½æ”¶ç›Šä¼šé«˜äºå®ƒçš„æ¶ˆè€—")]),s._v(". å¦‚æœè¦ç™¾åˆ†ä¹‹ç™¾å‡†ç¡®åœ°åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¼šé€ƒé€¸, éœ€è¦è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„æ•°æ®æµæ•æ„Ÿçš„è¿‡ç¨‹é—´åˆ†æ, æ‰èƒ½ç¡®å®šç¨‹åºå„ä¸ªåˆ†æ”¯æ‰§è¡Œæ—¶å¯¹æ­¤å¯¹è±¡çš„å½±å“. å‰é¢ä»‹ç»å³æ—¶ç¼–è¯‘, æå‰ç¼–è¯‘ä¼˜åŠ£åŠ¿æ—¶æåˆ°äº†è¿‡ç¨‹é—´åˆ†æè¿™ç§å¤§å‹åŠ›çš„åˆ†æç®—æ³•æ­£æ˜¯å³æ—¶ç¼–è¯‘çš„å¼±é¡¹. å¯ä»¥è¯•æƒ³ä¸€ä¸‹, å¦‚æœé€ƒé€¸åˆ†æå®Œæ¯•åå‘ç°å‡ ä¹æ‰¾ä¸åˆ°å‡ ä¸ªä¸é€ƒé€¸çš„å¯¹è±¡, é‚£è¿™äº›è¿è¡ŒæœŸè€—ç”¨çš„æ—¶é—´å°±ç™½ç™½æµªè´¹äº†, æ‰€ä»¥ç›®å‰è™šæ‹Ÿæœºåªèƒ½é‡‡ç”¨ä¸é‚£ä¹ˆå‡†ç¡®, ä½†æ—¶é—´å‹åŠ›ç›¸å¯¹è¾ƒå°çš„ç®—æ³•æ¥å®Œæˆåˆ†æ.")]),s._v(" "),a("p",[s._v("C å’Œ C++ è¯­è¨€é‡Œé¢åŸç”Ÿå°±æ”¯æŒäº†æ ˆä¸Šåˆ†é…(ä¸ä½¿ç”¨ new æ“ä½œç¬¦å³å¯), è€Œ "),a("code",[s._v("C#")]),s._v("â€‹ ä¹Ÿæ”¯æŒå€¼ç±»å‹, å¯ä»¥å¾ˆè‡ªç„¶åœ°åšåˆ°æ ‡é‡æ›¿æ¢(ä½†å¹¶ä¸ä¼šå¯¹å¼•ç”¨ç±»å‹åšè¿™ç§ä¼˜åŒ–). åœ¨çµæ´»è¿ç”¨æ ˆå†…å­˜æ–¹é¢, ç¡®å®æ˜¯ Java çš„ä¸€ä¸ªå¼±é¡¹. åœ¨ç°åœ¨ä»å¤„äºå®éªŒé˜¶æ®µçš„ Valhalla é¡¹ç›®é‡Œ, è®¾è®¡äº†æ–°çš„ inline å…³é”®å­—ç”¨äºå®šä¹‰ Java çš„å†…è”ç±»å‹, ç›®çš„æ˜¯å®ç°ä¸ "),a("code",[s._v("C#")]),s._v("â€‹ ä¸­å€¼ç±»å‹ç›¸å¯¹æ ‡çš„åŠŸèƒ½. æœ‰äº†è¿™ä¸ªæ ‡è¯†ä¸çº¦æŸ, ä»¥åé€ƒé€¸åˆ†æåšèµ·æ¥å°±ä¼šç®€å•å¾ˆå¤š.")]),s._v(" "),a("blockquote",[a("p",[s._v("æ ˆå†…åˆ†é…ç¤ºä¾‹")])]),s._v(" "),a("p",[s._v("å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰å, å®ƒå¯èƒ½è¢«"),a("strong",[s._v("å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨")]),s._v(", ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°"),a("strong",[s._v("ä¼ é€’")]),s._v("åˆ°å…¶ä»–åœ°æ–¹ä¸­.")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Lucy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// TODOä¿å­˜åˆ°æ•°æ®åº“")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Lucy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// TODOä¿å­˜åˆ°æ•°æ®åº“")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("test1 æ–¹æ³•ä¸­çš„ user å¯¹è±¡"),a("strong",[s._v("è¢«è¿”å›")]),s._v("äº†, è¿™ä¸ªå¯¹è±¡çš„"),a("strong",[s._v("ä½œç”¨åŸŸèŒƒå›´ä¸ç¡®å®š")]),s._v(", è€Œ Test2 ä¸­ User å¯¹è±¡ä»…åœ¨è¿™ä¸ªæ–¹æ³•å†…æœ‰æ•ˆè€Œä¸ä¼šé€ƒé€¸, æ–¹æ³•ç»“æŸä¹Ÿå°±å¯ä»¥è®¤ä¸ºæ˜¯"),a("strong",[s._v("æ— æ•ˆ")]),s._v("å¯¹è±¡äº†, æ‰€ä»¥è¿™é‡Œ JVM "),a("strong",[s._v("å¯èƒ½")]),s._v("ç›´æ¥æŠŠ User è¿™ä¸ª"),a("strong",[s._v("å¯¹è±¡åˆ†é…åˆ°æ ˆå†…å­˜ä¸­(æ–¹æ³•å¯¹åº”çš„æ ˆå¸§)"),a("strong",[s._v("â€‹"),a("strong",[a("strong",[s._v("ä¸Š, è€Œ")])]),s._v("â€‹")]),s._v("ä¸æ˜¯åˆ†é…åˆ°å †")]),s._v("ä¸­, æ ˆå¸§å¯ä»¥éšç€æ–¹æ³•çš„è°ƒç”¨è€Œè¢«"),a("strong",[s._v("é”€æ¯")]),s._v(", è¿™ä¸ªå¯¹è±¡ä¹Ÿè¢«éšä¹‹é”€æ¯äº†; å¦‚æœåˆ†é…åˆ°å †ä¸Š, æ— ç”¨çš„å¯¹è±¡è¿˜è¦ç­‰ç€ GC å»æ¸…ç†, è¿™æ ·å°±å¯ä»¥èŠ‚çœä¸€éƒ¨åˆ†å †ç©ºé—´. å½“ç„¶å¦‚æœå¯¹è±¡æ¯”è¾ƒå¤§, æˆ–è€…æ ˆç©ºé—´ä¸å¤Ÿ, å³ä½¿å¯¹è±¡ä¸ä¼šé€ƒé€¸å¯èƒ½ä¹Ÿä¼šæ”¾åˆ°å †ä¸­å».")]),s._v(" "),a("p",[s._v("æ‰€ä»¥è¿™é‡Œä¹Ÿç»Ÿä¸€èƒ½çœ‹å‡º: "),a("strong",[s._v("æ–°å¯¹è±¡å¯èƒ½åˆ†é…åˆ°å †ä¸­, ä¹Ÿå¯èƒ½åˆ†é…åˆ°æ ˆä¸­.")])]),s._v(" "),a("blockquote",[a("p",[s._v("é€ƒé€¸åˆ†æä¸ä¼˜åŒ–ç»¼åˆç¤ºä¾‹")])]),s._v(" "),a("p",[s._v("ä¸‹é¢å°†é€šè¿‡ä¸€ç³»åˆ— Java ä¼ªä»£ç çš„å˜åŒ–è¿‡ç¨‹æ¥"),a("strong",[s._v("æ¨¡æ‹Ÿé€ƒé€¸åˆ†ææ˜¯å¦‚ä½•å·¥ä½œ")]),s._v("çš„, å‘è¯»è€…å±•ç¤ºé€ƒé€¸åˆ†æèƒ½å¤Ÿå®ç°çš„æ•ˆæœ. åˆå§‹ä»£ç å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®Œå…¨æœªä¼˜åŒ–çš„ä»£ç ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" xx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Point")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getX")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("æ­¤å¤„çœç•¥äº† Point ç±»çš„ä»£ç , è¿™å°±æ˜¯ä¸€ä¸ªåŒ…å« x å’Œ y åæ ‡çš„ POJO ç±»å‹, åº”è¯¥å¾ˆå®¹æ˜“æƒ³è±¡å®ƒçš„æ ·å­.")]),s._v(" "),a("p",[s._v("ç¬¬ä¸€æ­¥, å°† Point çš„æ„é€ å‡½æ•°å’Œ getX() æ–¹æ³•è¿›è¡Œ"),a("strong",[s._v("å†…è”ä¼˜åŒ–")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¥éª¤1: æ„é€ å‡½æ•°å†…è”åçš„æ ·å­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" xx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Point")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("point_memory_alloc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨å †ä¸­åˆ†é… P å¯¹è±¡çš„ç¤ºæ„æ–¹æ³•")]),s._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Point æ„é€ å‡½æ•°è¢«å†…è”åçš„æ ·å­")]),s._v("\n    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Point::getX()è¢«å†…è”åçš„æ ·å­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("ç¬¬äºŒæ­¥, ç»è¿‡"),a("strong",[s._v("é€ƒé€¸åˆ†æ")]),s._v(", å‘ç°åœ¨æ•´ä¸ª test() æ–¹æ³•çš„èŒƒå›´å†… Point å¯¹è±¡å®ä¾‹ä¸ä¼šå‘ç”Ÿä»»ä½•ç¨‹åº¦çš„é€ƒé€¸, è¿™æ ·å¯ä»¥å¯¹å®ƒè¿›è¡Œ"),a("strong",[s._v("æ ‡é‡æ›¿æ¢ä¼˜åŒ–")]),s._v(", æŠŠå…¶å†…éƒ¨çš„ x å’Œ y "),a("strong",[s._v("ç›´æ¥ç½®æ¢")]),s._v("å‡ºæ¥, åˆ†è§£ä¸º test() æ–¹æ³•å†…çš„"),a("strong",[s._v("å±€éƒ¨å˜é‡")]),s._v(", ä»è€Œ"),a("strong",[s._v("é¿å… Point å¯¹è±¡å®ä¾‹è¢«å®é™…åˆ›å»º")]),s._v(", ä¼˜åŒ–åçš„ç»“æœå¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¥éª¤2: æ ‡é‡æ›¿æ¢åçš„æ ·å­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" xx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ‡é‡æ›¿æ¢å°±åä¸ä¼šåˆ›å»ºPointå¯¹è±¡äº†")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" px "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("ç¬¬ä¸‰æ­¥, é€šè¿‡"),a("strong",[s._v("æ•°æ®æµåˆ†æ")]),s._v(", å‘ç° py çš„å€¼å…¶å®å¯¹æ–¹æ³•ä¸ä¼šé€ æˆä»»ä½•å½±å“, é‚£å°±å¯ä»¥æ”¾å¿ƒåœ°"),a("strong",[s._v("å»åšæ— æ•ˆä»£ç æ¶ˆé™¤")]),s._v("å¾—åˆ°æœ€ç»ˆä¼˜åŒ–ç»“æœ, å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¥éª¤3: åšæ— æ•ˆä»£ç æ¶ˆé™¤åçš„æ ·å­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("ä»æµ‹è¯•ç»“æœæ¥çœ‹, å®æ–½é€ƒé€¸åˆ†æåçš„ç¨‹åºåœ¨ MicroBenchmarks ä¸­å¾€å¾€èƒ½å¾—åˆ°ä¸é”™çš„æˆç»©, ä½†æ˜¯åœ¨å®é™…çš„åº”ç”¨ç¨‹åºä¸­, å°¤å…¶æ˜¯å¤§å‹ç¨‹åºä¸­åè€Œå‘ç°å®æ–½é€ƒé€¸åˆ†æå¯èƒ½å‡ºç°æ•ˆæœä¸ç¨³å®šçš„æƒ…å†µ, æˆ–åˆ†æè¿‡ç¨‹è€—æ—¶ä½†å´æ— æ³•æœ‰æ•ˆåˆ¤åˆ«å‡ºéé€ƒé€¸å¯¹è±¡è€Œå¯¼è‡´æ€§èƒ½(å³æ—¶ç¼–è¯‘çš„æ”¶ç›Š)ä¸‹é™, æ‰€ä»¥æ›¾ç»åœ¨å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´é‡Œ, å³ä½¿æ˜¯æœåŠ¡ç«¯ç¼–è¯‘å™¨, ä¹Ÿé»˜è®¤ä¸å¼€å¯é€ƒé€¸åˆ†æ, ç”šè‡³åœ¨æŸäº›ç‰ˆæœ¬(å¦‚ JDK 6 Update 18)ä¸­è¿˜æ›¾ç»å®Œå…¨ç¦æ­¢äº†è¿™é¡¹ä¼˜åŒ–, ä¸€ç›´åˆ° JDK 7 æ—¶è¿™é¡¹ä¼˜åŒ–"),a("strong",[s._v("æ‰æˆä¸ºæœåŠ¡ç«¯ç¼–è¯‘å™¨é»˜è®¤å¼€å¯çš„é€‰é¡¹")]),s._v(". å¦‚æœæœ‰éœ€è¦, æˆ–è€…ç¡®è®¤å¯¹ç¨‹åºè¿è¡Œæœ‰ç›Š, ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•° "),a("code",[s._v("-XX: +DoEscapeAnalysis")]),s._v("â€‹ æ¥æ‰‹åŠ¨å¼€å¯é€ƒé€¸åˆ†æ, å¼€å¯ä¹‹åå¯ä»¥é€šè¿‡å‚æ•° "),a("code",[s._v("-XX: +PrintEscapeAnalysis")]),s._v("â€‹ æ¥æŸ¥çœ‹åˆ†æç»“æœ. æœ‰äº†é€ƒé€¸åˆ†ææ”¯æŒä¹‹å, ç”¨æˆ·å¯ä»¥ä½¿ç”¨å‚æ•° "),a("code",[s._v("-XX: +EliminateAllocations")]),s._v("â€‹ æ¥"),a("strong",[s._v("å¼€å¯æ ‡é‡æ›¿æ¢")]),s._v(", ä½¿ç”¨ "),a("code",[s._v("+XX: +EliminateLocks")]),s._v("â€‹ æ¥"),a("strong",[s._v("å¼€å¯åŒæ­¥æ¶ˆé™¤")]),s._v(", ä½¿ç”¨å‚æ•° "),a("code",[s._v("-XX: +PrintEliminateAllocations")]),s._v("â€‹ "),a("strong",[s._v("æŸ¥çœ‹æ ‡é‡çš„æ›¿æ¢æƒ…å†µ")]),s._v(".")]),s._v(" "),a("p",[s._v("å°½ç®¡ç›®å‰é€ƒé€¸åˆ†ææŠ€æœ¯ä»åœ¨å‘å±•ä¹‹ä¸­, æœªå®Œå…¨æˆç†Ÿ, ä½†å®ƒæ˜¯å³æ—¶ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯çš„ä¸€ä¸ªé‡è¦å‰è¿›æ–¹å‘, åœ¨æ—¥åçš„ Java è™šæ‹Ÿæœºä¸­, é€ƒé€¸åˆ†ææŠ€æœ¯è‚¯å®šä¼šæ”¯æ’‘èµ·ä¸€ç³»åˆ—æ›´å®ç”¨, æœ‰æ•ˆçš„ä¼˜åŒ–æŠ€æœ¯.")]),s._v(" "),a("h5",{attrs:{id:"_4-å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤"}},[s._v("#")]),s._v(" 4.å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤")]),s._v(" "),a("p",[s._v("å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤æ˜¯ä¸€é¡¹éå¸¸ç»å…¸çš„, æ™®éåº”ç”¨äºå„ç§ç¼–è¯‘å™¨çš„ä¼˜åŒ–æŠ€æœ¯, å®ƒçš„å«ä¹‰æ˜¯: "),a("strong",[s._v("å¦‚æœä¸€ä¸ªè¡¨è¾¾å¼ E ä¹‹å‰å·²ç»è¢«è®¡ç®—è¿‡äº†, å¹¶ä¸”ä»å…ˆå‰çš„è®¡ç®—åˆ°ç°åœ¨ E ä¸­æ‰€æœ‰å˜é‡çš„å€¼éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–, é‚£ä¹ˆ E çš„è¿™æ¬¡å‡ºç°å°±ç§°ä¸ºå…¬å…±å­è¡¨è¾¾å¼")]),s._v(". å¯¹äºè¿™ç§è¡¨è¾¾å¼, æ²¡æœ‰å¿…è¦èŠ±æ—¶é—´å†å¯¹å®ƒé‡æ–°è¿›è¡Œè®¡ç®—, åªéœ€è¦ç›´æ¥ç”¨å‰é¢è®¡ç®—è¿‡çš„è¡¨è¾¾å¼ç»“æœä»£æ›¿ E. å¦‚æœè¿™ç§ä¼˜åŒ–ä»…é™äº"),a("strong",[s._v("ç¨‹åºåŸºæœ¬å—")]),s._v("å†…, ä¾¿å¯ç§°ä¸º"),a("strong",[s._v("å±€éƒ¨å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤")]),s._v(", å¦‚æœè¿™ç§ä¼˜åŒ–çš„èŒƒå›´æ¶µç›–äº†å¤šä¸ªåŸºæœ¬å—, é‚£å°±ç§°ä¸º"),a("strong",[s._v("å…¨å±€å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤")]),s._v(". ä¸‹é¢ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜å®ƒçš„ä¼˜åŒ–è¿‡ç¨‹, å‡è®¾å­˜åœ¨å¦‚ä¸‹ä»£ç :")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å¦‚æœè¿™æ®µä»£ç äº¤ç»™ Javac ç¼–è¯‘å™¨åˆ™ä¸ä¼šè¿›è¡Œä»»ä½•ä¼˜åŒ–, é‚£ç”Ÿæˆçš„ä»£ç å°†å¦‚ä»£ç æ¸…å• 11-12 æ‰€ç¤º, æ˜¯å®Œå…¨éµç…§ Java æºç çš„å†™æ³•"),a("strong",[s._v("ç›´è¯‘")]),s._v("è€Œæˆçš„.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-12 Javacç¼–è¯‘çš„æœªä½œä»»ä½•ä¼˜åŒ–çš„å­—èŠ‚ç ")])]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[s._v("iload_2       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// b")]),s._v("\nimul          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®— b*c")]),s._v("\nbipush "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¨å…¥12")]),s._v("\nimul          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®—(c * b) * 12")]),s._v("\niload_1       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// a")]),s._v("\niadd          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®—(c * b) * 12 + a")]),s._v("\niload_1       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// a")]),s._v("\niload_2       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// b")]),s._v("\niload_3       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// c")]),s._v("\nimul          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®— b * c")]),s._v("\niadd          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®— a + b * c")]),s._v("\niadd          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¡ç®—(c * b) * 12 + a + a + b * c")]),s._v("\nistore "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("å½“è¿™æ®µä»£ç "),a("strong",[s._v("è¿›å…¥è™šæ‹Ÿæœºå³æ—¶ç¼–è¯‘å™¨å")]),s._v(", å®ƒå°†è¿›è¡Œå¦‚ä¸‹ä¼˜åŒ–: ç¼–è¯‘å™¨æ£€æµ‹åˆ° "),a("code",[s._v("c * b")]),s._v("â€‹ ä¸ "),a("code",[s._v("b * c")]),s._v("â€‹ æ˜¯ä¸€æ ·çš„è¡¨è¾¾å¼, è€Œä¸”åœ¨è®¡ç®—æœŸé—´ b ä¸ c çš„å€¼æ˜¯"),a("strong",[s._v("ä¸å˜")]),s._v("çš„.")]),s._v(" "),a("p",[s._v("å› æ­¤è¿™æ¡è¡¨è¾¾å¼å°±å¯èƒ½è¢«è§†ä¸º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¿™æ—¶å€™ç¼–è¯‘å™¨è¿˜å¯èƒ½(å–å†³äºå“ªç§è™šæ‹Ÿæœºçš„ç¼–è¯‘å™¨ä»¥åŠå…·ä½“çš„ä¸Šä¸‹æ–‡è€Œå®š)è¿›è¡Œå¦å¤–ä¸€ç§ä¼˜åŒ–--"),a("strong",[s._v("ä»£æ•°åŒ–ç®€")]),s._v("(Algebraic Simplification), åœ¨ E æœ¬æ¥å°±æœ‰ä¹˜æ³•è¿ç®—çš„å‰æä¸‹, æŠŠè¡¨è¾¾å¼å˜ä¸º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¡¨è¾¾å¼è¿›è¡Œå˜æ¢ä¹‹å, å†è®¡ç®—èµ·æ¥å°±å¯ä»¥èŠ‚çœä¸€äº›æ—¶é—´äº†.")]),s._v(" "),a("h5",{attrs:{id:"_5-æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤"}},[s._v("#")]),s._v(" 5.æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤")]),s._v(" "),a("p",[a("strong",[s._v("æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤")]),s._v("æ˜¯å³æ—¶ç¼–è¯‘å™¨ä¸­çš„ä¸€é¡¹è¯­è¨€ç›¸å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯. Java æ˜¯ä¸€é—¨åŠ¨æ€å®‰å…¨çš„è¯­è¨€, å¯¹æ•°ç»„çš„è¯»å†™è®¿é—®ä¹Ÿä¸åƒ C, C++ é‚£æ ·å®è´¨ä¸Šå°±æ˜¯è£¸æŒ‡é’ˆæ“ä½œ. å¦‚æœæœ‰ä¸€ä¸ªæ•°ç»„ "),a("code",[s._v("foo[]")]),s._v("â€‹, åœ¨ Java è¯­è¨€ä¸­è®¿é—®æ•°ç»„å…ƒç´  "),a("code",[s._v("foo[i]")]),s._v("â€‹ çš„æ—¶å€™ç³»ç»Ÿå°†ä¼š"),a("strong",[s._v("è‡ªåŠ¨è¿›è¡Œä¸Šä¸‹ç•Œçš„èŒƒå›´æ£€æŸ¥")]),s._v(', å³ i å¿…é¡»æ»¡è¶³ "'),a("code",[s._v("i >= 0 && i < foo.length")]),s._v('â€‹" çš„è®¿é—®æ¡ä»¶, å¦åˆ™å°†æŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸: java.lang.ArrayIndexOutOfBoundsException. è¿™å¯¹è½¯ä»¶å¼€å‘è€…æ¥è¯´æ˜¯ä¸€ä»¶å¾ˆå‹å¥½çš„äº‹æƒ…, å³ä½¿ç¨‹åºå‘˜æ²¡æœ‰ä¸“é—¨ç¼–å†™é˜²å¾¡ä»£ç , ä¹Ÿèƒ½å¤Ÿé¿å…å¤§å¤šæ•°çš„æº¢å‡ºæ”»å‡». '),a("strong",[s._v("ä½†æ˜¯å¯¹äºè™šæ‹Ÿæœºçš„æ‰§è¡Œå­ç³»ç»Ÿæ¥è¯´, æ¯æ¬¡æ•°ç»„å…ƒç´ çš„è¯»å†™éƒ½å¸¦æœ‰ä¸€æ¬¡éšå«çš„æ¡ä»¶åˆ¤å®šæ“ä½œ, å¯¹äºæ‹¥æœ‰å¤§é‡æ•°ç»„è®¿é—®çš„ç¨‹åºä»£ç , è¿™å¿…å®šæ˜¯ä¸€ç§æ€§èƒ½è´Ÿæ‹…")]),s._v(".")]),s._v(" "),a("p",[s._v('æ— è®ºå¦‚ä½•, ä¸ºäº†å®‰å…¨, æ•°ç»„è¾¹ç•Œæ£€æŸ¥è‚¯å®šæ˜¯è¦åšçš„, ä½†æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ˜¯ä¸æ˜¯å¿…é¡»åœ¨è¿è¡ŒæœŸé—´ä¸€æ¬¡ä¸æ¼åœ°è¿›è¡Œåˆ™æ˜¯å¯ä»¥ "å•†é‡" çš„äº‹æƒ…. ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç®€å•çš„æƒ…å†µ: æ•°ç»„ä¸‹æ ‡æ˜¯ä¸€ä¸ªå¸¸é‡, å¦‚ '),a("code",[s._v("foo[3]")]),s._v('â€‹, åªè¦åœ¨ç¼–è¯‘æœŸæ ¹æ®æ•°æ®æµåˆ†ææ¥ç¡®å®š foo.length çš„å€¼, å¹¶åˆ¤æ–­ä¸‹æ ‡ "3" æ²¡æœ‰è¶Šç•Œ, æ‰§è¡Œçš„æ—¶å€™å°±æ— é¡»åˆ¤æ–­äº†. æ›´åŠ å¸¸è§çš„æƒ…å†µæ˜¯, æ•°ç»„è®¿é—®å‘ç”Ÿåœ¨å¾ªç¯ä¹‹ä¸­, å¹¶ä¸”ä½¿ç”¨å¾ªç¯å˜é‡æ¥è¿›è¡Œæ•°ç»„çš„è®¿é—®. å¦‚æœç¼–è¯‘å™¨åªè¦é€šè¿‡æ•°æ®æµåˆ†æå°±å¯ä»¥åˆ¤å®šå¾ªç¯å˜é‡çš„å–å€¼èŒƒå›´æ°¸è¿œåœ¨åŒºé—´ '),a("code",[s._v("[0, foo.length)")]),s._v("â€‹ ä¹‹å†…, é‚£ä¹ˆåœ¨å¾ªç¯ä¸­å°±å¯ä»¥æŠŠæ•´ä¸ªæ•°ç»„çš„ä¸Šä¸‹ç•Œæ£€æŸ¥æ¶ˆé™¤æ‰, è¿™å¯ä»¥èŠ‚çœå¾ˆå¤šæ¬¡çš„æ¡ä»¶åˆ¤æ–­æ“ä½œ.")]),s._v(" "),a("p",[s._v('æŠŠè¿™ä¸ªæ•°ç»„è¾¹ç•Œæ£€æŸ¥çš„ä¾‹å­æ”¾åœ¨æ›´é«˜çš„è§†è§’æ¥çœ‹, å¤§é‡çš„å®‰å…¨æ£€æŸ¥ä½¿ç¼–å†™ Java ç¨‹åºæ¯”ç¼–å†™ C å’Œ C++ ç¨‹åºå®¹æ˜“äº†å¾ˆå¤š, æ¯”å¦‚: æ•°ç»„è¶Šç•Œä¼šå¾—åˆ° ArrayIndexOutOfBoundsException å¼‚å¸¸; ç©ºæŒ‡é’ˆè®¿é—®ä¼šå¾—åˆ° NullPointException å¼‚å¸¸; é™¤æ•°ä¸ºé›¶ä¼šå¾—åˆ° ArithmeticException å¼‚å¸¸... ä½†è¿™äº›å®‰å…¨æ£€æŸ¥ä¹Ÿå¯¼è‡´å‡ºç°ç›¸åŒçš„ç¨‹åº, ä»è€Œä½¿ Java æ¯” C å’Œ C++ è¦åšæ›´å¤šçš„äº‹æƒ…(å„ç§æ£€æŸ¥åˆ¤æ–­), è¿™äº›äº‹æƒ…å°±ä¼šå¯¼è‡´ä¸€äº›éšå¼å¼€é”€, å¦‚æœä¸å¤„ç†å¥½å®ƒä»¬, å°±å¾ˆå¯èƒ½æˆä¸ºä¸€é¡¹ "Java è¯­è¨€å¤©ç”Ÿå°±æ¯”è¾ƒæ…¢" çš„åŸç½ª. ä¸ºäº†æ¶ˆé™¤è¿™äº›'),a("strong",[s._v("éšå¼å¼€é”€")]),s._v(", é™¤äº†å¦‚æ•°ç»„è¾¹ç•Œæ£€æŸ¥ä¼˜åŒ–è¿™ç§å°½å¯èƒ½æŠŠè¿è¡ŒæœŸæ£€æŸ¥æå‰åˆ°ç¼–è¯‘æœŸå®Œæˆçš„æ€è·¯ä¹‹å¤–, è¿˜æœ‰ä¸€ç§é¿å¼€çš„å¤„ç†æ€è·¯---éšå¼å¼‚å¸¸å¤„ç†, Java ä¸­ç©ºæŒ‡é’ˆæ£€æŸ¥å’Œç®—æœ¯è¿ç®—ä¸­é™¤æ•°ä¸ºé›¶çš„æ£€æŸ¥éƒ½é‡‡ç”¨äº†è¿™ç§æ–¹æ¡ˆ. ä¸¾ä¸ªä¾‹å­, ç¨‹åºä¸­è®¿é—®ä¸€ä¸ªå¯¹è±¡(å‡è®¾å¯¹è±¡å« foo)çš„æŸä¸ªå±æ€§(å‡è®¾å±æ€§å« value), é‚£ä»¥ Java ä¼ªä»£ç æ¥è¡¨ç¤ºè™šæ‹Ÿæœºè®¿é—® foo.value çš„è¿‡ç¨‹ä¸º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NullPointException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("åœ¨ä½¿ç”¨éšå¼å¼‚å¸¸ä¼˜åŒ–ä¹‹å, è™šæ‹Ÿæœºä¼šæŠŠä¸Šé¢çš„ä¼ªä»£ç æ‰€è¡¨ç¤ºçš„è®¿é—®è¿‡ç¨‹å˜ä¸ºå¦‚ä¸‹ä¼ªä»£ç :")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("segment_fault"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uncommon_trap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("è™šæ‹Ÿæœºä¼šæ³¨å†Œä¸€ä¸ª Segment Fault ä¿¡å·çš„"),a("strong",[s._v("å¼‚å¸¸å¤„ç†å™¨")]),s._v("(ä¼ªä»£ç ä¸­çš„ uncommon_trap(), åŠ¡å¿…æ³¨æ„è¿™é‡Œæ˜¯æŒ‡è¿›ç¨‹å±‚é¢çš„å¼‚å¸¸å¤„ç†å™¨, å¹¶éçœŸçš„ Java çš„ try-catch è¯­å¥çš„å¼‚å¸¸å¤„ç†å™¨), è¿™æ ·å½“ foo ä¸ä¸ºç©ºçš„æ—¶å€™, å¯¹ value çš„è®¿é—®æ˜¯ä¸ä¼šæœ‰ä»»ä½•é¢å¤–å¯¹ foo åˆ¤ç©ºçš„å¼€é”€çš„, è€Œä»£ä»·å°±æ˜¯å½“ foo çœŸçš„ä¸ºç©ºæ—¶, å¿…é¡»è½¬åˆ°å¼‚å¸¸å¤„ç†å™¨ä¸­æ¢å¤ä¸­æ–­å¹¶æŠ›å‡º NullPointException å¼‚å¸¸. è¿›å…¥å¼‚å¸¸å¤„ç†å™¨çš„è¿‡ç¨‹æ¶‰åŠè¿›ç¨‹ä»"),a("strong",[s._v("ç”¨æˆ·æ€è½¬åˆ°å†…æ ¸æ€")]),s._v("ä¸­å¤„ç†çš„è¿‡ç¨‹, ç»“æŸåä¼šå†å›åˆ°ç”¨æˆ·æ€, é€Ÿåº¦è¿œæ¯”ä¸€æ¬¡åˆ¤ç©ºæ£€æŸ¥è¦æ…¢å¾—å¤š. å½“ foo æå°‘ä¸ºç©ºçš„æ—¶å€™, éšå¼å¼‚å¸¸ä¼˜åŒ–æ˜¯å€¼å¾—çš„, ä½†å‡å¦‚ foo ç»å¸¸ä¸ºç©º, è¿™æ ·çš„ä¼˜åŒ–åè€Œä¼šè®©ç¨‹åºæ›´æ…¢. å¹¸å¥½ HotSpot è™šæ‹Ÿæœºè¶³å¤Ÿèªæ˜, å®ƒä¼šæ ¹æ®è¿è¡ŒæœŸæ”¶é›†åˆ°çš„æ€§èƒ½ç›‘æ§ä¿¡æ¯è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆ.")]),s._v(" "),a("p",[s._v("ä¸è¯­è¨€ç›¸å…³çš„å…¶ä»–æ¶ˆé™¤æ“ä½œè¿˜æœ‰ä¸å°‘, å¦‚è‡ªåŠ¨è£…ç®±æ¶ˆé™¤(Autobox Elimination), å®‰å…¨ç‚¹æ¶ˆé™¤(Safepoint Elimination), æ¶ˆé™¤åå°„(Dereflection)ç­‰, è¿™é‡Œå°±ä¸å†ä¸€ä¸€ä»‹ç»äº†.")]),s._v(" "),a("h4",{attrs:{id:"å®æˆ˜-æ·±å…¥ç†è§£graalç¼–è¯‘å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜-æ·±å…¥ç†è§£graalç¼–è¯‘å™¨"}},[s._v("#")]),s._v(" å®æˆ˜:æ·±å…¥ç†è§£Graalç¼–è¯‘å™¨")]),s._v(" "),a("p",[s._v("ä» JDK 10 èµ·, HotSpot å°±åŒæ—¶æ‹¥æœ‰ä¸‰æ¬¾ä¸åŒçš„å³æ—¶ç¼–è¯‘å™¨. æ­¤å‰å·²ç»ä»‹ç»äº†ç»å…¸çš„å®¢æˆ·ç«¯ç¼–è¯‘å™¨å’ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨, æœ¬èŠ‚å°†æŠŠç›®å…‰èšç„¦åˆ° HotSpot å³æ—¶ç¼–è¯‘å™¨ä»¥åŠæå‰ç¼–è¯‘å™¨å…±åŒçš„æœ€æ–°æˆæœ--"),a("strong",[s._v("Graal ç¼–è¯‘å™¨")]),s._v("èº«ä¸Š.")]),s._v(" "),a("h5",{attrs:{id:"_1-å†å²èƒŒæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å†å²èƒŒæ™¯"}},[s._v("#")]),s._v(" 1.å†å²èƒŒæ™¯")]),s._v(" "),a("p",[s._v("å‰é¢è¯´è¿‡ Graal è™šæ‹Ÿæœºä»¥åŠ Graal ç¼–è¯‘å™¨ä»åœ¨å®éªŒå®¤ä¸­å°šæœªå•†ç”¨, ä½†æœªæ¥å…¶æœ‰æœ›ä»£æ›¿æˆ–æˆä¸º HotSpot ä¸‹ä¸€ä»£æŠ€æœ¯åŸºç¡€. Oracle Labs å¸Œæœ›å®ƒæœ€ç»ˆèƒ½å¤Ÿæˆä¸ºä¸€æ¬¾é«˜ç¼–è¯‘æ•ˆç‡, é«˜è¾“å‡ºè´¨é‡, "),a("strong",[s._v("æ”¯æŒæå‰ç¼–è¯‘å’Œå³æ—¶ç¼–è¯‘, åŒæ—¶æ”¯æŒåº”ç”¨äºåŒ…æ‹¬ HotSpot åœ¨å†…çš„ä¸åŒè™šæ‹Ÿæœºçš„ç¼–è¯‘å™¨")]),s._v(". ç”±äºè¿™ä¸ªç¼–è¯‘å™¨ä½¿ç”¨ Java ç¼–å†™, ä»£ç æ¸…æ™°, åˆç»§æ‰¿äº†è®¸å¤šæ¥è‡ª HotSpot çš„æœåŠ¡ç«¯ç¼–è¯‘å™¨çš„é«˜è´¨é‡ä¼˜åŒ–æŠ€æœ¯, æ‰€ä»¥æ— è®ºæ˜¯ç§‘æŠ€ä¼ä¸šè¿˜æ˜¯é«˜æ ¡ç ”ç©¶é™¢, éƒ½æ„¿æ„åœ¨å®ƒä¸Šé¢ç ”ç©¶å’Œå¼€å‘æ–°ç¼–è¯‘æŠ€æœ¯. HotSpot æœåŠ¡ç«¯ç¼–è¯‘å™¨çš„åˆ›é€ è€… Cliff Click è‡ªå·±å°±å¯¹ Graal ç¼–è¯‘å™¨ååˆ†æ¨å´‡, å¹¶ä¸”å…¬å¼€è¡¨ç¤ºå†ä¹Ÿä¸ä¼šç”¨ C, C++ å»ç¼–å†™è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨äº†.")]),s._v(" "),a("p",[s._v("Graal ç¼–è¯‘å™¨åœ¨ JDK 9 æ—¶ä»¥ Jaotc æå‰ç¼–è¯‘å·¥å…·çš„å½¢å¼é¦–æ¬¡åŠ å…¥åˆ°å®˜æ–¹çš„ JDK ä¸­, ä» JDK 10 èµ·, "),a("mark",[a("strong",[s._v("Graal ç¼–è¯‘å™¨å¯ä»¥æ›¿æ¢æœåŠ¡ç«¯ç¼–è¯‘å™¨, æˆä¸º HotSpot åˆ†å±‚ç¼–è¯‘ä¸­æœ€é¡¶å±‚çš„å³æ—¶ç¼–è¯‘å™¨")])]),s._v(". è¿™ç§å¯æ›¿æ¢çš„å³æ—¶ç¼–è¯‘å™¨æ¶æ„çš„å®ç°, å¾—ç›Šäº HotSpot "),a("strong",[s._v("ç¼–è¯‘å™¨æ¥å£")]),s._v("çš„å‡ºç°.")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/%E7%A8%8B%E5%BA%8F%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96-%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91%E5%99%A8.png",alt:"https://www.processon.com/diagraming/642d0c4a6dd8285b4b706e70"}})]),s._v(" "),a("p",[s._v("æ—©æœŸçš„ Graal æ›¾ç»åŒ C1 åŠ C2 ä¸€æ ·, ä¸ HotSpot çš„åä½œæ˜¯ç´§è€¦åˆçš„, è¿™æ„å‘³ç€æ¯æ¬¡ç¼–è¯‘ Graal å‡éœ€é‡æ–°ç¼–è¯‘æ•´ä¸ª HotSpot. JDK 9 æ—¶å‘å¸ƒçš„ JEP 243: "),a("strong",[s._v("Java è™šæ‹Ÿæœºç¼–è¯‘å™¨æ¥å£")]),s._v("(Java-Level JVM Compiler Interface, JVMCI)ä½¿å¾— Graal å¯ä»¥ä» HotSpot çš„ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥. JVMCI ä¸»è¦æä¾›å¦‚ä¸‹ä¸‰ç§åŠŸèƒ½:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("å“åº” HotSpot çš„ç¼–è¯‘è¯·æ±‚")]),s._v(", å¹¶å°†è¯¥è¯·æ±‚åˆ†å‘ç»™ Java å®ç°çš„å³æ—¶ç¼–è¯‘å™¨.")]),s._v(" "),a("li",[s._v("å…è®¸ç¼–è¯‘å™¨è®¿é—® HotSpot ä¸­ä¸å³æ—¶ç¼–è¯‘ç›¸å…³çš„æ•°æ®ç»“æ„, åŒ…æ‹¬ç±», å­—æ®µ, æ–¹æ³•åŠå…¶æ€§èƒ½ç›‘æ§æ•°æ®ç­‰, å¹¶æä¾›äº†ä¸€ç»„è¿™äº›æ•°æ®ç»“æ„åœ¨ Java è¯­è¨€å±‚é¢çš„æŠ½è±¡è¡¨ç¤º.")]),s._v(" "),a("li",[s._v("æä¾› HotSpot ä»£ç ç¼“å­˜(Code Cache)çš„ Java ç«¯æŠ½è±¡è¡¨ç¤º, å…è®¸ç¼–è¯‘å™¨éƒ¨ç½²ç¼–è¯‘å®Œæˆçš„äºŒè¿›åˆ¶æœºå™¨ç .")])]),s._v(" "),a("p",[s._v("ç»¼åˆåˆ©ç”¨ä¸Šè¿°ä¸‰é¡¹åŠŸèƒ½, "),a("strong",[s._v("å°±å¯ä»¥æŠŠä¸€ä¸ªåœ¨ HotSpot è™šæ‹Ÿæœºå¤–éƒ¨çš„, ç”¨ Java è¯­è¨€å®ç°çš„å³æ—¶ç¼–è¯‘å™¨(ä¸å±€é™äº Graal)é›†æˆåˆ° HotSpot ä¸­, å“åº” HotSpot å‘å‡ºçš„æœ€é¡¶å±‚çš„ç¼–è¯‘è¯·æ±‚, å¹¶å°†ç¼–è¯‘åçš„äºŒè¿›åˆ¶ä»£ç éƒ¨ç½²åˆ° HotSpot çš„ä»£ç ç¼“å­˜ä¸­")]),s._v(". æ­¤å¤–, å•ç‹¬ä½¿ç”¨ä¸Šè¿°ç¬¬ä¸‰é¡¹åŠŸèƒ½, åˆå¯ä»¥ç»•å¼€ HotSpot çš„å³æ—¶ç¼–è¯‘ç³»ç»Ÿ, è®©è¯¥ç¼–è¯‘å™¨ç›´æ¥ä¸ºåº”ç”¨çš„ç±»åº“ç¼–è¯‘å‡ºäºŒè¿›åˆ¶æœºå™¨ç , å°†è¯¥ç¼–è¯‘å™¨å½“ä½œä¸€ä¸ªæå‰ç¼–è¯‘å™¨å»ä½¿ç”¨(å¦‚ Jaotc).")]),s._v(" "),a("p",[s._v("Graal å’Œ JVMCI çš„å‡ºç°, ä¸ºä¸ç›´æ¥ä»äº‹ Java è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨å¼€å‘, ä½†å¯¹ Java è™šæ‹ŸæœºæŠ€æœ¯å……æ»¡å¥½å¥‡å¿ƒçš„è¯»è€…ä»¬æä¾›ä¸€æ¡çª¥æ¢å’Œå°è¯•ç¼–è¯‘å™¨æŠ€æœ¯çš„è‰¯å¥½é€”å¾„, ç°åœ¨å°±å°†å¼€å§‹"),a("strong",[s._v("åŸºäº Graal æ¥å®æˆ˜ HotSpot è™šæ‹Ÿæœºçš„å³æ—¶ç¼–è¯‘ä¸ä»£ç ä¼˜åŒ–è¿‡ç¨‹")]),s._v(".")]),s._v(" "),a("h5",{attrs:{id:"_2-æ„å»ºç¼–è¯‘è°ƒè¯•ç¯å¢ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ„å»ºç¼–è¯‘è°ƒè¯•ç¯å¢ƒ"}},[s._v("#")]),s._v(" 2.æ„å»ºç¼–è¯‘è°ƒè¯•ç¯å¢ƒ")]),s._v(" "),a("p",[s._v("ç”±äº Graal ç¼–è¯‘å™¨è¦åŒæ—¶æ”¯æŒ Graal VM ä¸‹çš„å„ç§å­é¡¹ç›®, å¦‚ Truffle, Substrate VM ç­‰, è¿˜è¦æ”¯æŒä½œä¸º HotSpot å’Œ Maxine è™šæ‹Ÿæœºçš„å³æ—¶ç¼–è¯‘å™¨, æ‰€ä»¥åªç”¨ Maven æˆ– Gradle çš„è¯, é…ç½®ç®¡ç†è¿‡ç¨‹ä¼šç›¸å½“å¤æ‚. ä¸ºäº†é™ä½ä»£ç ç®¡ç†, ä¾èµ–é¡¹ç®¡ç†, ç¼–è¯‘å’Œæµ‹è¯•ç­‰ç¯èŠ‚çš„å¤æ‚åº¦, Graal å›¢é˜Ÿä¸“é—¨ç”¨ Python å†™äº†ä¸€ä¸ªåä¸º mx çš„å°å·¥å…·æ¥è‡ªåŠ¨åŒ–åšå¥½è¿™äº›äº‹æƒ…. è¦æ„å»º Graal çš„è°ƒè¯•ç¯å¢ƒ, ç¬¬ä¸€æ­¥è¦å…ˆæŠŠ"),a("strong",[s._v("æ„å»ºå·¥å…· mx")]),s._v(" å®‰è£…å¥½, è¿™éå¸¸ç®€å•, è¿›è¡Œå¦‚ä¸‹æ“ä½œå³å¯:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ git clone https://github.com/graalvm/mx.git\n$ export PATH=`pwd`/mx:$PATH\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æ—¢ç„¶ Graal ç¼–è¯‘å™¨æ˜¯ä»¥ Java ä»£ç ç¼–å†™çš„, é‚£ç¬¬äºŒæ­¥è‡ªç„¶æ˜¯"),a("strong",[s._v("è¦æ‰¾ä¸€ä¸ªåˆé€‚çš„ JDK æ¥ç¼–è¯‘")]),s._v(". è€ƒè™‘åˆ° Graal VM é¡¹ç›®æ˜¯åŸºäº OpenJDK 8 å¼€å‘çš„, è€Œ JVMCI æ¥å£åˆåœ¨ JDK 9 ä»¥åæ‰ä¼šæä¾›, æ‰€ä»¥ Graal å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªå¸¦æœ‰ JVMCI åŠŸèƒ½çš„ OpenJDK 8 ç‰ˆæœ¬, å¯ä»¥é€‰æ‹©è¿™ä¸ªç‰ˆæœ¬çš„ JDK 8 æ¥è¿›è¡Œç¼–è¯‘. å½“è¯»è€…åªå…³æ³¨ Graal ç¼–è¯‘å™¨åœ¨ HotSpot ä¸Šçš„åº”ç”¨è€Œä¸æƒ³æ¶‰åŠ Graal VM å…¶ä»–æ–¹é¢æ—¶, å¯ç›´æ¥é‡‡ç”¨ JDK 9 åŠä¹‹åçš„æ ‡å‡† Open/OracleJDK. åœ¨æœ¬æ¬¡å®æˆ˜ä¸­, ç¬”è€…æœºå™¨ä¸Šä½¿ç”¨çš„æ˜¯å¸¦ JVMCI çš„ OpenJDK 8, å¯¹äºä¸å…¶ä»– JDK ç‰ˆæœ¬æœ‰å·®åˆ«çš„æ­¥éª¤, ä¼šç‰¹åˆ«è¯´æ˜. é€‰æ‹©å¥½ JDK ç‰ˆæœ¬å, è®¾ç½® JAVA_HOME ç¯å¢ƒå˜é‡å³å¯, è¿™æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­å”¯ä¸€éœ€è¦æ‰‹å·¥å¤„ç†çš„ä¾èµ–:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export JAVA_HOME=/usr/lib/jvm/oraclejdk1.8.0_212-jvmci-20-b01\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ç¬¬ä¸‰æ­¥æ˜¯"),a("strong",[s._v("è·å– Graal ç¼–è¯‘å™¨ä»£ç ")]),s._v(", ç¼–è¯‘å™¨éƒ¨åˆ†çš„ä»£ç æ˜¯ä¸æ•´ä¸ª Graal VM æ”¾åœ¨ä¸€å—çš„, æŠŠ Graal VM å¤åˆ¶ä¸‹æ¥, å¤§çº¦æœ‰ 700MB, æ“ä½œå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ git clone https://github.com/graalvm/graal.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å…¶ä»–ç›®å½•ä¸­å­˜æ”¾ç€ Truffle, Substrate VM ç­‰å…¶ä»–é¡¹ç›®, è¿™äº›åœ¨æœ¬æ¬¡å®æˆ˜ä¸­ä¸ä¼šæ¶‰åŠ. è¿›å…¥ compiler å­ç›®å½•, "),a("strong",[s._v("ä½¿ç”¨ mx æ„å»º Graal ç¼–è¯‘å™¨")]),s._v(", æ“ä½œå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cd graal/compiler\n$ mx build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("ç”±äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹éœ€è¦çš„ä¾èµ–é¡¹éƒ½å¯ä»¥è‡ªåŠ¨å¤„ç†, éœ€è¦æ‰‹åŠ¨å¤„ç†çš„åªæœ‰ OpenJDK ä¸€ä¸ª, æ‰€ä»¥ç¼–è¯‘ä¸€èˆ¬ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜, å¤§æ¦‚ä¸¤ä¸‰åˆ†é’Ÿç¼–è¯‘å³å¯å®Œæˆ. æ­¤æ—¶å…¶å®å·²ç»å¯ä»¥"),a("strong",[s._v("ä¿®æ”¹, è°ƒè¯• Graal ç¼–è¯‘å™¨")]),s._v("äº†, ä½†å†™ Java ä»£ç ä¸åŒäº C, C++, åº”è¯¥æ²¡æœ‰äººä¼šç›´æ¥ç”¨ VIM å»åš Java å¼€å‘è°ƒè¯•, è¿˜æ˜¯éœ€è¦ä¸€ä¸ª IDE æ¥æ”¯æŒæœ¬æ¬¡å®æˆ˜çš„. mx å·¥å…·èƒ½å¤Ÿæ”¯æŒ Eclipse, Intellij IDEA å’Œ NetBeans ä¸‰ç§ä¸»æµçš„ Java IDE é¡¹ç›®çš„åˆ›å»º, ç”±äº Graal å›¢é˜Ÿä¸­ä½¿ç”¨ Eclipse å å¤šæ•°, æ”¯æŒä¹Ÿæœ€å¥½, æ‰€ä»¥ä¹Ÿé€‰æ‹© Eclipse æ¥è¿›è¡Œæœ¬æ¬¡å®æˆ˜, åˆ›å»º Eclipse é¡¹ç›®çš„æ“ä½œå¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cd graal/compiler\n$ mx eclipseinit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æ— è®ºä½¿ç”¨å“ªç§ IDE, éƒ½éœ€è¦æŠŠ IDE é…ç½®ä¸­ä½¿ç”¨çš„ Java å †ä¿®æ”¹åˆ° 2GB æˆ–ä»¥ä¸Š, æ‰èƒ½ä¿è¯ Graal åœ¨ IDE ä¸­çš„ç¼–è¯‘æ„å»ºèƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œ. è®¾ç½®å®Œæˆå, åœ¨ Eclipse ä¸­é€‰æ‹© File->Open Projects from File System, å†é€‰æ‹© Graal é¡¹ç›®çš„æ ¹ç›®å½•, å°†ä¼šå¯¼å…¥æ•´ä¸ª Graal VM, å¯¼å…¥çš„å·¥ç¨‹å¦‚å›¾ 11-10 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00207-20240302133505-jn5qmxj.jpg",alt:"",title:"å›¾11-10ã€€Graal VM é¡¹ç›®(éƒ¨åˆ†å·¥ç¨‹)"}})]),s._v(" "),a("p",[s._v('å¦‚æœé‡‡ç”¨çš„æ˜¯ JDK 8, é‚£ä¹ˆè¦è®°å¾—åœ¨ Eclipse ä¸­ä¹Ÿå¿…é¡»å°†é‚£ä¸ªå¸¦æœ‰ JVMCI åŠŸèƒ½çš„ç‰¹æ®Š JDK 8 ç”¨ä½œ Eclipse é‡Œé¢ "Java SE-1.8" çš„ç¯å¢ƒé…ç½®(Windows->Preferences->Java->Install JREs->Execution Environments->Java SE-1.8), æ­¤å¤–, è¿˜éœ€è¦æ‰‹å·¥å°†ä»¥å…¶ä»–ç‰ˆæœ¬å·ç»“å°¾çš„å·¥ç¨‹å…³é—­, è­¬å¦‚å›¾ 11-11 æ‰€ç¤º. è¿™å¯¹äºé‡‡ç”¨å…¶ä»–ç‰ˆæœ¬ JDK æ¥ç¼–è¯‘çš„è¯»è€…ä¹Ÿæ˜¯ä¸€æ ·çš„.')]),s._v(" "),a("p",[s._v("åˆ°æ­¤ä¸ºæ­¢, æ•´ä¸ªç¼–è¯‘, è°ƒè¯•ç¯å¢ƒå°±å·²ç»æ„å»ºå®Œæ¯•, ä¸‹é¢å¯ä»¥å¼€å§‹æ¢ç´¢ "),a("strong",[s._v("Graal å·¥ä½œåŸç†")]),s._v("çš„å†…å®¹äº†.")]),s._v(" "),a("h5",{attrs:{id:"_3-jvmciç¼–è¯‘å™¨æ¥å£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-jvmciç¼–è¯‘å™¨æ¥å£"}},[s._v("#")]),s._v(" 3.JVMCIç¼–è¯‘å™¨æ¥å£")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00208-20240302133505-72jxneh.jpg",alt:"",title:"å›¾11-11ã€€æ‰‹åŠ¨å…³é—­å…¶ä»–ç‰ˆæœ¬çš„å·¥ç¨‹"}})]),s._v(" "),a("p",[s._v("ç°åœ¨è¯·æ€è€ƒä¸€ä¸‹, å¦‚æœè®©æ‚¨æ¥è®¾è®¡ JVMCI ç¼–è¯‘å™¨æ¥å£, å®ƒåº”è¯¥æ˜¯æ€æ ·çš„? æ—¢ç„¶ JVMCI é¢å‘çš„æ˜¯ Java è¯­è¨€çš„ç¼–è¯‘å™¨æ¥å£, é‚£å®ƒè‡³å°‘åœ¨å½¢å¼ä¸Šæ˜¯ä¸æˆ‘ä»¬å·²ç»è§è¿‡æ— æ•°æ¬¡çš„ Java æ¥å£æ˜¯ä¸€æ ·çš„. æ¥è€ƒè™‘"),a("strong",[s._v("å³æ—¶ç¼–è¯‘å™¨çš„è¾“å…¥æ˜¯ä»€ä¹ˆ")]),s._v(". ç­”æ¡ˆå½“ç„¶æ˜¯"),a("strong",[s._v("è¦ç¼–è¯‘çš„æ–¹æ³•çš„å­—èŠ‚ç ")]),s._v('. æ—¢ç„¶å«å­—èŠ‚ç , é¡¾åæ€ä¹‰å®ƒå°±åº”è¯¥æ˜¯ "'),a("strong",[s._v("ç”¨ä¸€ä¸ªå­—èŠ‚æ•°ç»„è¡¨ç¤ºçš„ä»£ç ")]),s._v('". é‚£æ¥ä¸‹æ¥å®ƒè¾“å‡ºä»€ä¹ˆ? è¿™ä¹Ÿå¾ˆç®€å•, '),a("strong",[s._v('å³æ—¶ç¼–è¯‘å™¨åº”è¯¥è¾“å‡ºä¸æ–¹æ³•å¯¹åº”çš„äºŒè¿›åˆ¶æœºå™¨ç , äºŒè¿›åˆ¶æœºå™¨ç ä¹Ÿåº”è¯¥æ˜¯ "ç”¨ä¸€ä¸ªå­—èŠ‚æ•°ç»„è¡¨ç¤ºçš„ä»£ç "')]),s._v(" . è¿™æ ·çš„è¯, JVMCI æ¥å£å°±åº”è¯¥çœ‹èµ·æ¥ç±»ä¼¼äºä¸‹é¢è¿™ç§æ ·å­:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JVMCICompiler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compileMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bytecode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("äº‹å®ä¸Š JVMCI æ¥å£åªæ¯”ä¸Šé¢è¿™ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹ç‚¹, å› ä¸ºå…¶è¾“å…¥é™¤äº†å­—èŠ‚ç å¤–, HotSpot è¿˜ä¼šå‘ç¼–è¯‘å™¨æä¾›å„ç§è¯¥æ–¹æ³•çš„ç›¸å…³ä¿¡æ¯, è­¬å¦‚å±€éƒ¨å˜é‡è¡¨ä¸­å˜é‡æ§½çš„ä¸ªæ•°, æ“ä½œæ•°æ ˆçš„æœ€å¤§æ·±åº¦, è¿˜æœ‰åˆ†å±‚ç¼–è¯‘åœ¨åº•å±‚æ”¶é›†åˆ°çš„ç»Ÿè®¡ä¿¡æ¯ç­‰. å› æ­¤ JVMCI æ¥å£çš„æ ¸å¿ƒå†…å®¹å®é™…å°±æ˜¯ä»£ç æ¸…å• 11-13 æ€»æ‰€ç¤ºçš„è¿™äº›.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-13 JVMCI æ¥å£")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JVMCICompiler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compileMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompilationRequest")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompilationRequest")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JavaMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JavaMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMaxLocals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMaxStackSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProfilingInfo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProfilingInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// çœç•¥å…¶ä»–æ–¹æ³•")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("æˆ‘ä»¬åœ¨ Eclipse ä¸­æ‰¾åˆ° JVMCICompiler æ¥å£, é€šè¿‡ç»§æ‰¿å…³ç³»åˆ†æ, å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æœ‰ä¸€ä¸ªå®ç°ç±» "),a("strong",[s._v("HotSpotGraalCompiler")]),s._v(" å®ç°äº† JVMCI, å¦‚å›¾ 11-12 æ‰€ç¤º, è¿™ä¸ªå°±æ˜¯è¦åˆ†æçš„ä»£ç çš„å…¥å£.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00209-20240302133505-4cmhikx.jpg",alt:"",title:"å›¾11-12ã€€JVMCI æ¥å£çš„ç»§æ‰¿å…³ç³»"}})]),s._v(" "),a("p",[s._v("ä¸ºäº†åç»­è°ƒè¯•æ–¹ä¾¿, å…ˆå‡†å¤‡ä¸€æ®µç®€å•çš„ä»£ç , å¹¶è®©å®ƒ"),a("strong",[s._v("è§¦å‘ HotSpot çš„å³æ—¶ç¼–è¯‘")]),s._v(", ä»¥ä¾¿è·Ÿè¸ªè§‚å¯Ÿç¼–è¯‘å™¨æ˜¯å¦‚ä½•å·¥ä½œå¯¹çš„. å…·ä½“ä»£ç å¦‚æ¸…å• 11-14 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-14 è§¦å‘å³æ—¶ç¼–è¯‘çš„ç¤ºä¾‹ä»£ç ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Demo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("workload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("workload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("ç”±äºå­˜åœ¨æ— é™å¾ªç¯, workload() æ–¹æ³•è‚¯å®šå¾ˆå¿«å°±ä¼šè¢«è™šæ‹Ÿæœºå‘ç°"),a("strong",[s._v("æ˜¯çƒ­ç‚¹ä»£ç å› è€Œè¿›è¡Œç¼–è¯‘")]),s._v(". å®é™…ä¸Šé™¤äº† workload() æ–¹æ³•ä»¥å¤–, è¿™æ®µç®€å•çš„ä»£ç è¿˜ä¼šå¯¼è‡´ç›¸å½“å¤šçš„å…¶ä»–æ–¹æ³•çš„ç¼–è¯‘, å› ä¸ºä¸€ä¸ªæœ€ç®€å•çš„ Java ç±»çš„åŠ è½½å’Œè¿è¡Œä¹Ÿä¼šè§¦å‘æ•°ç™¾ä¸ªç±»çš„åŠ è½½. ä¸ºäº†é¿å…å¹²æ‰°ä¿¡æ¯å¤ªå¤š, ç¬”è€…åŠ å…¥äº†å‚æ•° "),a("code",[s._v("-XX: CompileOnly")]),s._v("â€‹ æ¥é™åˆ¶åªå…è®¸ workload() æ–¹æ³•è¢«ç¼–è¯‘. å…ˆé‡‡ç”¨ä»¥ä¸‹å‘½ä»¤, ç”¨æ ‡å‡†çš„æœåŠ¡ç«¯ç¼–è¯‘å™¨æ¥è¿è¡Œæ¸…å• 11-14 ä¸­æ‰€ç¤ºçš„ç¨‹åº.")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ javac Demo.java\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+PrintCompilation")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:CompileOnly")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Demo::workload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  Demo\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("193")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("       Demo::workload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("199")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       Demo::workload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("199")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("       Demo::workload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   made not entrant\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v('ä¸Šé¢æ˜¾ç¤º wordload() æ–¹æ³•ç¡®å®è¢«åˆ†å±‚ç¼–è¯‘äº†å¤šæ¬¡, "made not entrant" çš„è¾“å‡ºå°±è¡¨ç¤ºäº†æ–¹æ³•çš„æŸä¸ªå·²ç¼–è¯‘ç‰ˆæœ¬è¢«ä¸¢å¼ƒè¿‡. ä»è¿™æ®µä¿¡æ¯ä¸­æ¸…æ¥šçœ‹åˆ°, åˆ†å±‚ç¼–è¯‘æœºåˆ¶åŠæœ€é¡¶å±‚çš„æœåŠ¡ç«¯ç¼–è¯‘éƒ½å·²ç»æ­£å¸¸å·¥ä½œäº†, ä¸‹ä¸€æ­¥å°±æ˜¯ç”¨åœ¨ Eclipse ä¸­çš„ '),a("strong",[s._v("Graal ç¼–è¯‘å™¨ä»£æ›¿ HotSpot çš„æœåŠ¡ç«¯ç¼–è¯‘å™¨")]),s._v(".")]),s._v(" "),a("p",[s._v("ä¸ºç®€å•èµ·è§, ç¬”è€…åŠ ä¸Š "),a("code",[s._v("-XX: -TieredCompilation")]),s._v("â€‹ å…³é—­åˆ†å±‚ç¼–è¯‘, è®©è™šæ‹Ÿæœºåªé‡‡ç”¨æœ‰ä¸€ä¸ª JVMCI ç¼–è¯‘å™¨è€Œä¸æ˜¯ç”±å®¢æˆ·ç«¯ç¼–è¯‘å™¨å’Œ JVMCI æ··åˆåˆ†å±‚. ç„¶åä½¿ç”¨å‚æ•° "),a("code",[s._v("-XX: +EnableJVMCI")]),s._v("â€‹, "),a("code",[s._v("-XX: +UseJVMCICompiler")]),s._v("â€‹ æ¥å¯ç”¨ JVMCI æ¥å£å’Œ JVMCI ç¼–è¯‘å™¨. ç”±äºè¿™äº›ç›®å‰å°šå±å®éªŒé˜¶æ®µçš„åŠŸèƒ½, éœ€è¦å†ä½¿ç”¨ "),a("code",[s._v("-XX: +UnlockExperimentalVMOptions")]),s._v("â€‹ å‚æ•°è¿›è¡Œè§£é”. æœ€åä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€ä¸ªé—®é¢˜, "),a("strong",[s._v("å¦‚ä½•è®© HotSpot æ‰¾åˆ° Graal ç¼–è¯‘å™¨çš„ä½ç½®")]),s._v("å‘¢?")]),s._v(" "),a("p",[s._v("å¦‚æœé‡‡ç”¨ç‰¹æ®Šç‰ˆçš„ JDK 8, é‚£è™šæ‹Ÿæœºå°†ä¼šè‡ªåŠ¨å»æŸ¥æ‰¾ "),a("code",[s._v("JAVA_HOME/jre/lib/jvmci")]),s._v("â€‹ ç›®å½•. å‡å¦‚è¿™ä¸ªç›®å½•ä¸å­˜åœ¨, é‚£å°±ä¼šä» "),a("code",[s._v("-Djvmci.class.path.append")]),s._v("â€‹ å‚æ•°ä¸­æœç´¢. å®ƒæŸ¥æ‰¾çš„ç›®æ ‡, å³ Graal ç¼–è¯‘å™¨çš„ JAR åŒ…, åˆšæ‰å·²ç»é€šè¿‡ mx build å‘½ä»¤æˆåŠŸç¼–è¯‘å‡ºæ¥, æ‰€ä»¥åœ¨ JDK 8 ä¸‹ä½¿ç”¨çš„å¯åŠ¨å‚æ•°å¦‚ä»£ç æ¸…å• 11-15 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-15 JDK8çš„è¿è¡Œé…ç½®")])]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-Djvmci.class.path.append=~/graal/compiler/mxbuild/dists/jdk1.8/graal.jar:~/graal/sdk/mxbuild/dists/jdk1.8/graal-sdk.jar\n-XX:+UnlockExperimentalVMOptions\n-XX:+EnableJVMCI\n-XX:+UseJVMCICompiler\n-XX:-TieredCompilation\n-XX:+PrintCompilation\n-XX:CompileOnly=Demo::workload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("å¦‚æœé‡‡ç”¨ JDK 9 æˆ–ä»¥ä¸Šç‰ˆæœ¬, é‚£åŸæœ¬çš„ Graal ç¼–è¯‘å™¨æ˜¯å®ç°åœ¨ jdk.internal.vm.compiler æ¨¡å—ä¸­çš„, åªè¦ç”¨ "),a("code",[s._v("--upgrade-module-path")]),s._v("â€‹ å‚æ•°æŒ‡å®šè¿™ä¸ªæ¨¡å—çš„å‡çº§åŒ…å³å¯, å…·ä½“å¦‚ä»£ç æ¸…å• 11-16 æ‰€ç¤º.")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-16 JDK 9æˆ–ä»¥ä¸Šç‰ˆæœ¬çš„è¿è¡Œé…ç½®")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("--module-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("/graal/sdk/mxbuild/dists/jdk11/graal.jar\n--upgrade-module-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("graal/compiler/mxbuild/dists/jdk11/jdk.internal.vm.compiler.jar\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+UnlockExperimentalVMOptions")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+EnableJVMCI")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+UseJVMCICompiler")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:-TieredCompilation")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:+PrintCompilation")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XX:CompileOnly")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Demo::workload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("é€šè¿‡ä¸Šè¿°å‚æ•°, HotSpot å°±èƒ½é¡ºåˆ©æ‰¾åˆ°å¹¶åº”ç”¨ç¼–è¯‘çš„ Graal ç¼–è¯‘å™¨äº†. ä¸ºäº†ç¡®è®¤æ•ˆæœ, å¯¹ HotSpotGraalCompiler ç±»çš„ compileMethod() æ–¹æ³•åšä¸€ä¸ªç®€å•æ”¹åŠ¨, "),a("strong",[s._v("è¾“å‡ºç¼–è¯‘çš„æ–¹æ³•åç§°å’Œç¼–è¯‘è€—æ—¶")]),s._v(", å…·ä½“å¦‚ä¸‹:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompilationRequestResult")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compileMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompilationRequest")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" time "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompilationRequestResult")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compileMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" graalRuntime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"compile method:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"time used:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("åœ¨ Eclipse é‡Œé¢è¿è¡Œè¿™æ®µä»£ç , ä¸éœ€è¦é‡æ–°è¿è¡Œ mx build, é©¬ä¸Šå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºçš„è¾“å‡ºç»“æœ:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("97    1             Demo::workload (4 bytes)\n......\ncompile method:workload\ntime used:4081\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h5",{attrs:{id:"_4-ä»£ç ä¸­é—´è¡¨ç¤º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä»£ç ä¸­é—´è¡¨ç¤º"}},[s._v("#")]),s._v(" 4.ä»£ç ä¸­é—´è¡¨ç¤º")]),s._v(" "),a("p",[s._v("Graal ç¼–è¯‘å™¨åœ¨è®¾è®¡ä¹‹åˆå°±åˆ»æ„é‡‡ç”¨äº†ä¸ HotSpot æœåŠ¡ç«¯ç¼–è¯‘å™¨ä¸€è‡´(ç•¥æœ‰å·®å¼‚ä½†å·²ç»éå¸¸æ¥è¿‘)çš„ä¸­é—´è¡¨ç¤ºå½¢å¼, ä¹Ÿå³æ˜¯è¢«ç§°ä¸º "),a("strong",[s._v("Sea-of-Nodes çš„ä¸­é—´è¡¨ç¤º")]),s._v(", æˆ–è€…ä¸å…¶ç­‰ä»·çš„è¢«ç§°ä¸º"),a("strong",[s._v("ç†æƒ³å›¾")]),s._v("(Ideal Graph, åœ¨ä»£ç ä¸­ç§°ä¸º Structured Graph)çš„ç¨‹åºä¾èµ–å›¾(Program Dependence Graph, PDG)å½¢å¼. åœ¨ 11.2 èŠ‚å³æ—¶ç¼–è¯‘å™¨çš„å®æˆ˜ä¸­, å·²ç»é€šè¿‡å¯è§†åŒ–å·¥å…· Ideal Graph Visualizer çœ‹åˆ°è¿‡åœ¨ç†æƒ³å›¾ä¸Šç¿»è¯‘å’Œä¼˜åŒ–è¾“å…¥ä»£ç çš„æ•´ä½“è¿‡ç¨‹, ä»ç¼–è¯‘å™¨å†…éƒ¨æ¥çœ‹å³: "),a("strong",[s._v("å­—èŠ‚ç  â†’ ç†æƒ³å›¾ â†’ ä¼˜åŒ– â†’ æœºå™¨ç ")]),s._v("(ä»¥ Mach Node Graph è¡¨ç¤º)çš„è½¬å˜è¿‡ç¨‹. åœ¨é‚£ä¸ªå®æˆ˜é‡Œé¢, ç€é‡åˆ†æçš„æ˜¯ç†æƒ³å›¾è½¬æ¢ä¼˜åŒ–çš„æ•´ä½“è¿‡ç¨‹, å¯¹äºå¤šæ•°è¯»è€…, å°¤å…¶æ˜¯ä¸ç†Ÿæ‚‰ç¼–è¯‘åŸç†ä¸ç¼–è¯‘å™¨è®¾è®¡çš„è¯»è€…, å¯èƒ½ä¼šä¸å¤ªå®¹æ˜“è¯»æ‡‚æ¯ä¸ªé˜¶æ®µæ‰€è¦åšçš„å·¥ä½œ. åœ¨æœ¬èŠ‚é‡Œé¢, ä»¥ä¾‹å­å’Œå¯¹ç…§ Graal æºç çš„å½¢å¼, è¯¦ç»†è®²è§£è¾“å…¥ä»£ç ä¸ç†æƒ³å›¾çš„è½¬åŒ–å¯¹åº”å…³ç³», ä»¥ä¾¿è¯»è€…ç†è§£ Graal æ˜¯å¦‚ä½•åŸºäºç†æƒ³å›¾å»ä¼˜åŒ–ä»£ç çš„.")]),s._v(" "),a("p",[a("strong",[s._v("ç†æƒ³å›¾æ˜¯ä¸€ç§æœ‰å‘å›¾, ç”¨èŠ‚ç‚¹æ¥è¡¨ç¤ºç¨‹åºä¸­çš„å…ƒç´ , è­¬å¦‚å˜é‡, æ“ä½œç¬¦, æ–¹æ³•, å­—æ®µç­‰, è€Œç”¨è¾¹æ¥è¡¨ç¤ºæ•°æ®æˆ–è€…æ§åˆ¶æµ")]),s._v(". å…ˆä»æœ€ç®€å•çš„ä¾‹å­å‡ºå‘. è­¬å¦‚æœ‰ä¸€ä¸ªè¡¨è¾¾å¼: "),a("code",[s._v("x + y")]),s._v("â€‹, åœ¨ç†æƒ³å›¾ä¸­å¯ä»¥è¡¨ç¤ºä¸º x, y ä¸¤ä¸ªèŠ‚ç‚¹çš„æ•°æ®æµæµå…¥åŠ æ³•æ“ä½œç¬¦, è¡¨ç¤ºç›¸åŠ æ“ä½œè¯»å–äº† x, y çš„å€¼, æµå‡ºçš„ä¾¿åˆ™è¡¨ç¤ºæ•°æ®æµçš„æµå‘, å³ç›¸åŠ çš„ç»“æœä¼šåœ¨å“ªé‡Œè¢«ä½¿ç”¨, å¦‚å›¾ 11-13 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00210-20240302133505-2xhxgdb.jpg",alt:"",title:"å›¾11-13ã€€æ„é€ ç†æƒ³å›¾(1)"}})]),s._v(" "),a("p",[s._v("è¿™å¾ˆå®¹æ˜“æ¥å—å§? é‚£æŠŠä¾‹å­ç¨å¾®å¤æ‚åŒ–ä¸€äº›, æŠŠè¡¨è¾¾å¼ "),a("code",[s._v("x + y")]),s._v("â€‹ å˜ä¸º "),a("code",[s._v("getX() + getY()")]),s._v("â€‹, ä»æ˜¯ç”¨ç†æƒ³å›¾è¡¨è¾¾å…¶è®¡ç®—è¿‡ç¨‹, è¿™æ—¶å€™é™¤äº†æ•°æ®æµå‘ä¹‹å¤–, è¿˜å¿…é¡»è¦è€ƒè™‘"),a("strong",[s._v("æ–¹æ³•è°ƒç”¨çš„é¡ºåº")]),s._v(". åœ¨ç†æƒ³å›¾ä¸­ç”¨å¦å¤–ä¸€æ¡è¾¹æ¥è¡¨ç¤ºæ–¹æ³•çš„è°ƒç”¨(ä¸ºäº†ä¾¿äºåŒºåˆ†, æ•°æ®æµç¬”è€…ä½¿ç”¨è“è‰²çº¿(ä»¥è™šçº¿è¡¨ç¤º), æ§åˆ¶æµä½¿ç”¨çº¢è‰²çº¿(ä»¥å®çº¿è¡¨ç¤º)), è¯´æ˜ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯å…ˆè°ƒç”¨ getX() æ–¹æ³•, å†è°ƒç”¨ getY() æ–¹æ³•, å¦‚å›¾ 11-14 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00211-20240302133505-qif47hf.jpg",alt:"",title:"å›¾11-14ã€€æ„é€ ç†æƒ³å›¾(2)"}})]),s._v(" "),a("p",[s._v("ä»¥ä¸Šè¿™äº›ç®€å•çš„å‰ç½®çŸ¥è¯†å°±å·²ç»è¶³ä»¥æ”¯æ’‘æœ¬æ¬¡å®æˆ˜çš„è¿›è¡Œäº†, "),a("strong",[s._v("ç†æƒ³å›¾æœ¬è´¨ä¸Šå°±æ˜¯è¿™ç§å°†æ•°æ®æµå›¾å’Œæ§åˆ¶æµå›¾ä»¥æŸç§æ–¹å¼åˆå¹¶åˆ°ä¸€èµ·, ç”¨ä¸€ç§è¾¹æ¥è¡¨ç¤ºæ•°æ®æµå‘, å¦ä¸€ç§è¾¹æ¥è¡¨ç¤ºæ§åˆ¶æµå‘çš„å›¾å½¢è¡¨ç¤º")]),s._v(".")]),s._v(" "),a("p",[s._v("ç°åœ¨åœ¨ä»£ç æ¸…å• 11-15 æˆ–è€…ä»£ç æ¸…å• 11-16 æ‰€ç¤ºçš„åŸºç¡€ä¸Šå†å¢åŠ ä¸€ä¸ªå‚æ•° "),a("code",[s._v("-Dgraal.Dump")]),s._v("â€‹, è¦æ±‚ Graal ç¼–è¯‘å™¨æŠŠæ„é€ çš„ç†æƒ³å›¾è¾“å‡ºå‡ºæ¥, åŠ å…¥åç¼–è¯‘æ—¶å°†ä¼šäº§ç”Ÿç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡º, æç¤ºäº†ç”Ÿæˆçš„ç†æƒ³å›¾çš„å­˜å‚¨ä½ç½®:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[Use -Dgraal.LogFile=<path> to redirect Graal log output to a file.]\nDumping IGV graphs in /home/icyfenix/develop/eclipse-workspace/A_GraalTest/graal_dumps/2019.08.18.16.51.23.073\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("å¯ä»¥ä½¿ç”¨ mx igv å‘½ä»¤æ¥è·å¾—èƒ½å¤Ÿæ”¯æŒ Graal ç¼–è¯‘å™¨ç”Ÿæˆçš„ç†æƒ³å›¾æ ¼å¼çš„æ–°ç‰ˆæœ¬çš„ Ideal Graph Visualizer å·¥å…·, ä»¥ä¸‹é¢è¿™æ®µç®€å•ä»£ç çš„ç†æƒ³å›¾çš„è¡¨ç¤ºä¸ºä¾‹å­:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("average")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("åœ¨ Ideal Graph Visualizer å·¥å…·ä¸­, å°†æ˜¾ç¤ºå›¾ 11-15 æ‰€ç¤ºçš„æ ·å¼çš„ç†æƒ³å›¾.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00212-20240302133505-hxuawd5.jpg",alt:"",title:"å›¾11-15ã€€æ„é€ ç†æƒ³å›¾(3)"}})]),s._v(" "),a("p",[s._v("ä¸å›¾ 11-11 å’Œå›¾ 11-12 æ‰€ç¤ºç›¸æ¯”, è™½ç„¶æ²¡æœ‰äº†ç®­å¤´, ä½†æ˜¯èŠ‚ç‚¹ä¸Šåˆ—æ˜äº†ä»£è¡¨æ‰§è¡Œé¡ºåºçš„åºå·, ä»ç„¶æ˜¯è“è‰²çº¿è¡¨ç¤ºæ•°æ®æµ, çº¢è‰²çº¿è¡¨ç¤ºæ§åˆ¶æµ. ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°å‚æ•° 0(è®°ä½œ P(0))å’Œå‚æ•° 1(è®°ä½œ P(1))æ˜¯å¦‚ä½•é€å…¥åŠ æ³•æ“ä½œçš„, ç„¶åç»“æœæ˜¯å¦‚ä½•å’Œå¸¸é‡ 2(è®°ä½œ C(2))ä¸€èµ·é€å…¥é™¤æ³•æ“ä½œçš„.")]),s._v(" "),a("p",[s._v("å†ä¸‹ä¸€æ­¥å°±ä¼šå¼€å§‹æ¥è§¦çœŸå®çš„ä»£ç ç¼–è¯‘å’Œä¼˜åŒ–äº†. å‰é¢ä»‹ç»ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯æ—¶æåˆ°è¿‡å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤, é‚£å°±æ¥è®¾è®¡ä»£ç æ¸…å• 11-17 æ‰€ç¤ºçš„ä¸¤æ®µä»£ç .")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»£ç æ¸…å•11-17 å…¬å…±å­è¡¨è¾¾å¼è¢«æ¶ˆé™¤çš„åº”ç”¨èŒƒå›´")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»¥ä¸‹ä»£ç çš„å…¬å…±å­è¡¨è¾¾å¼èƒ½å¤Ÿè¢«æ¶ˆé™¤")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("workload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»¥ä¸‹ä»£ç çš„å…¬å…±å­è¡¨è¾¾å¼æ˜¯ä¸å¯ä»¥è¢«æ¶ˆé™¤çš„")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("workload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("å¯¹äºç¬¬ä¸€æ®µä»£ç , "),a("code",[s._v("a + b")]),s._v("â€‹ æ˜¯å…¬å…±å­è¡¨è¾¾å¼, å¯ä»¥é€šè¿‡ä¼˜åŒ–ä½¿å…¶åªè®¡ç®—ä¸€æ¬¡è€Œä¸ä¼šæœ‰ä»»ä½•çš„å‰¯ä½œç”¨. ä½†æ˜¯å¯¹äºç¬¬äºŒæ®µä»£ç , ç”±äº getA() å’Œ getB() æ–¹æ³•å†…éƒ¨æ‰€è•´å«çš„æ“ä½œæ˜¯ä¸ç¡®å®šçš„, å®ƒæ˜¯å¦è¢«è°ƒç”¨, è°ƒç”¨æ¬¡æ•°çš„ä¸åŒéƒ½å¯èƒ½ä¼šäº§ç”Ÿä¸åŒè¿”å›å€¼æˆ–è€…å…¶ä»–å½±å“ç¨‹åºçŠ¶æ€çš„å‰¯ä½œç”¨(è­¬å¦‚æ”¹å˜æŸä¸ªå…¨å±€çš„çŠ¶æ€å˜é‡), è¿™ç§ä»£ç åªèƒ½å†…è”äº† getA() å’Œ getB() æ–¹æ³•ä¹‹åæ‰èƒ½è€ƒè™‘æ›´è¿›ä¸€æ­¥çš„ä¼˜åŒ–æªæ–½, ä»ç„¶ä¿æŒå‡½æ•°è°ƒç”¨çš„æƒ…å†µä¸‹æ˜¯æ— æ³•åšå…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤çš„. å¯ä»¥ä» Graal ç”Ÿæˆçš„ç†æƒ³å›¾ä¸­æ¸…æ™°åœ°çœ‹åˆ°è¿™ä¸€ç‚¹, å¯¹äºç¬¬ä¸€æ®µä»£ç , ç”Ÿæˆçš„ç†æƒ³å›¾å¦‚å›¾ 11-16 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00213-20240302133505-xjiq330.jpg",alt:"",title:"å›¾11-16ã€€æ„é€ ç†æƒ³å›¾(4)"}})]),s._v(" "),a("p",[s._v("ä»å›¾ 11-16 æ‰€ç¤ºä¸­å¯ä»¥çœ‹åˆ°, å‚æ•° 1, 2 çš„åŠ æ³•æ“ä½œåªè¿›è¡Œäº†ä¸€æ¬¡, ç„¶ååŒæ—¶æµå‡ºäº†ä¸¤æ¡æ•°æ®æµæŒ‡å‘ä¹˜æ³•æ“ä½œçš„è¾“å…¥ä¸­. è€Œå¦‚æœæ˜¯ç¬¬äºŒæ®µä»£ç , åˆ™ç”Ÿæˆçš„ç†æƒ³å›¾å¦‚å›¾ 11-17 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00214-20240302133505-2jr8j52.jpg",alt:"",title:"å›¾11-17ã€€æ„é€ ç†æƒ³å›¾(5)"}})]),s._v(" "),a("p",[s._v("ä»å›¾ä¸­ä»£è¡¨æ§åˆ¶æµçš„çº¢è‰²è¾¹(ä»¥å®çº¿è¡¨ç¤º)å¯ä»¥çœ‹å‡º, å››æ¬¡æ–¹æ³•è°ƒç”¨å…¨éƒ¨æ‰§è¡Œäº†, ä»£è¡¨æ•°æ®æµçš„è“è‰²è¾¹(ä»¥è™šçº¿è¡¨ç¤º)ä¹Ÿæ˜ç¡®çœ‹åˆ°äº†ä¸¤ä¸ªç‹¬ç«‹åŠ æ³•æ“ä½œèŠ‚ç‚¹, ç”±æ­¤çœ‹å‡ºè¿™ä¸ªç‰ˆæœ¬æ˜¯ä¸ä¼šæŠŠå®ƒå½“ä½œå…¬å…±å­è¡¨è¾¾å¼æ¥æ¶ˆé™¤çš„.")]),s._v(" "),a("h5",{attrs:{id:"_5-ä»£ç ä¼˜åŒ–ä¸ç”Ÿæˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä»£ç ä¼˜åŒ–ä¸ç”Ÿæˆ"}},[s._v("#")]),s._v(" 5.ä»£ç ä¼˜åŒ–ä¸ç”Ÿæˆ")]),s._v(" "),a("p",[s._v("ç›¸ä¿¡è¯»è€…ç°åœ¨å·²ç»èƒ½å¤ŸåŸºæœ¬çœ‹æ˜ç™½ Graal ç†æƒ³å›¾çš„ä¸­é—´è¡¨ç¤ºäº†, é‚£å¯¹åº”åˆ°ä»£ç ä¸Š, "),a("strong",[s._v("Graal ç¼–è¯‘å™¨æ˜¯å¦‚ä½•ä»å­—èŠ‚ç ç”Ÿæˆç†æƒ³å›¾")]),s._v("? åˆå¦‚ä½•åœ¨ç†æƒ³å›¾åŸºç¡€ä¸Šè¿›è¡Œä»£ç ä¼˜åŒ–çš„å‘¢? è¿™æ—¶å€™å°±å……åˆ†ä½“ç°å‡ºäº† Graal ç¼–è¯‘å™¨åœ¨ä½¿ç”¨ Java ç¼–å†™æ—¶å¯¹æ™®é€š Java ç¨‹åºå‘˜æ¥è¯´å…·æœ‰çš„ä¾¿æ·æ€§äº†, åœ¨ Outline è§†å›¾ä¸­æ‰¾åˆ°åˆ›å»ºç†æƒ³å›¾çš„æ–¹æ³•æ˜¯ greateGraph(), å¯ä»¥ä» Call Hierarchy è§†å›¾ä¸­è½»æ˜“åœ°æ‰¾åˆ°ä» JVMCI çš„å…¥å£æ–¹æ³• compileMethod() åˆ° greateGraph() ä¹‹é—´çš„è°ƒç”¨å…³ç³», å¦‚å›¾ 11-18 æ‰€ç¤º.")]),s._v(" "),a("p",[s._v("greateGraph() æ–¹æ³•çš„ä»£ç ä¹Ÿå¾ˆæ¸…æ™°, é‡Œé¢è°ƒç”¨äº† "),a("code",[s._v("StructuredGraph::Builder()")]),s._v("â€‹ æ„é€ å™¨æ¥åˆ›å»ºç†æƒ³å›¾. è¿™é‡Œè¦å…³æ³¨çš„å…³é”®ç‚¹æœ‰ä¸¤ä¸ª:")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00215-20240302133505-hlsjrht.jpg",alt:"",title:"å›¾11-18ã€€æ„é€ ç†æƒ³å›¾çš„æ–¹æ³•"}})]),s._v(" "),a("p",[s._v("ç¬¬ä¸€æ˜¯ç†æƒ³å›¾æœ¬èº«çš„æ•°æ®ç»“æ„. å®ƒæ˜¯ä¸€ç»„ä¸ä¸ºç©ºçš„èŠ‚ç‚¹çš„é›†åˆ, å®ƒçš„èŠ‚ç‚¹éƒ½æ˜¯ç”¨ ValueNode çš„ä¸åŒç±»å‹çš„å­ç±»èŠ‚ç‚¹æ¥è¡¨ç¤ºçš„. ä»ç„¶ä»¥ x+y è¡¨è¾¾å¼ä¸ºä¾‹, è­¬å¦‚å…¶ä¸­çš„åŠ æ³•æ“ä½œ, å°±ç”± AddNode èŠ‚ç‚¹æ¥è¡¨ç¤º, ä»å›¾ 11-19 æ‰€ç¤ºçš„ Type Hierarchy è§†å›¾ä¸­å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°åŠ æ³•æ“ä½œæ˜¯äºŒå…ƒç®—æœ¯æ“ä½œèŠ‚ç‚¹("),a("code",[s._v("BinaryArithmeticNode<OP>")]),s._v("â€‹)çš„ä¸€ç§, è€ŒäºŒå…ƒç®—æœ¯æ“ä½œèŠ‚ç‚¹åˆæ˜¯äºŒå…ƒæ“ä½œç¬¦(BinaryNode)çš„ä¸€ç§, ä»¥æ­¤ç±»æ¨ç›´åˆ°æ‰€æœ‰æ“ä½œç¬¦çš„å…±åŒçˆ¶ç±» ValueNode(è¡¨ç¤ºå¯ä»¥è¿”å›æ•°æ®çš„èŠ‚ç‚¹).")]),s._v(" "),a("p",[s._v("ç¬¬äºŒå°±æ˜¯å¦‚ä½•ä»å­—èŠ‚ç è½¬æ¢åˆ°ç†æƒ³å›¾. è¯¥è¿‡ç¨‹è¢«å°è£…åœ¨ BytecodeParser ç±»ä¸­, è¿™ä¸ªè§£æå™¨å¯ä»¥æŒ‰ç…§å­—èŠ‚ç è§£é‡Šå™¨çš„æ€è·¯å»ç†è§£å®ƒ. å¦‚æœè¿™çœŸçš„æ˜¯ä¸€ä¸ªå­—èŠ‚ç è§£é‡Šå™¨, æ‰§è¡Œä¸€ä¸ªæ•´æ•°åŠ æ³•æ“ä½œ, æŒ‰ç…§ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹æ‰€å®šä¹‰çš„ iadd æ“ä½œç çš„è§„åˆ™, åº”è¯¥ä»æ ˆå¸§ä¸­å‡ºæ ˆä¸¤ä¸ªæ“ä½œæ•°, ç„¶åç›¸åŠ , å†å°†ç»“æœå…¥æ ˆ. è€Œä» "),a("code",[s._v("BytecodeParser::genArithmeticOp()")]),s._v("â€‹ æ–¹æ³•ä¸Šå¯ä»¥çœ‹åˆ°, å…¶å®ç°ä¸è§„åˆ™æè¿°æ²¡æœ‰ä»€ä¹ˆå·®å¼‚, å¦‚å›¾ 11-20 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00216-20240302133505-0bcqd61.jpg",alt:"",title:"å›¾11-19ã€€èŠ‚ç‚¹ç»§æ‰¿å…³ç³»"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00217-20240302133505-fe36g0c.jpg",alt:"",title:"å›¾11-20ã€€å­—èŠ‚ç è§£æå™¨å®ç°çš„ iadd æ“ä½œç "}})]),s._v(" "),a("p",[s._v("å…¶ä¸­, genIntegerAdd() æ–¹æ³•ä¸­å°±åªæœ‰ä¸€è¡Œä»£ç , å³è°ƒç”¨ AddNode èŠ‚ç‚¹çš„ create() æ–¹æ³•, å°†ä¸¤ä¸ªæ“ä½œæ•°ä½œä¸ºå‚æ•°ä¼ å…¥, åˆ›å»ºå‡º AddNode èŠ‚ç‚¹, å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("genIntegerAdd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AddNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NodeView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("æ¯ä¸€ä¸ªç†æƒ³å›¾çš„èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå…±åŒçš„ä¸»è¦æ“ä½œ, ä¸€ä¸ªæ˜¯è§„èŒƒåŒ–(Canonicalisation), å¦ä¸€ä¸ªæ˜¯ç”Ÿæˆæœºå™¨ç (Generation). ç”Ÿæˆæœºå™¨ç é¡¾åæ€ä¹‰, å°±ä¸å¿…è§£é‡Šäº†, è§„èŒƒåŒ–åˆ™æ˜¯æŒ‡å¦‚ä½•ç¼©å‡ç†æƒ³å›¾çš„è§„æ¨¡, ä¹Ÿå³åœ¨ç†æƒ³å›¾çš„åŸºç¡€ä¸Šä¼˜åŒ–ä»£ç æ‰€è¦é‡‡å–çš„æªæ–½. è¿™ä¸¤ä¸ªæ“ä½œå¯¹åº”äº†ç¼–è¯‘å™¨ä¸¤é¡¹æœ€æ ¹æœ¬çš„ä»»åŠ¡: "),a("strong",[s._v("ä»£ç ä¼˜åŒ–ä¸ä»£ç ç¿»è¯‘")]),s._v(".")]),s._v(" "),a("p",[s._v("AddNode èŠ‚ç‚¹çš„è§„èŒƒåŒ–æ˜¯å®ç°åœ¨ canonical() æ–¹æ³•ä¸­çš„, æœºå™¨ç ç”Ÿæˆåˆ™æ˜¯å®ç°åœ¨ generate() æ–¹æ³•ä¸­çš„, ä» AddNode çš„åˆ›å»ºæ–¹æ³•ä¸Šå¯ä»¥çœ‹åˆ°, åœ¨èŠ‚ç‚¹åˆ›å»ºæ—¶ä¼šè°ƒç”¨ canonical() æ–¹æ³•å°è¯•è¿›è¡Œè§„èŒƒåŒ–ç¼©å‡å›¾çš„è§„æ¨¡, å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueNode")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NodeView")]),s._v(" view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BinaryOp")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" op "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArithmeticOpTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("forStamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAdd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Stamp")]),s._v(" stamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foldStamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConstantNode")]),s._v(" tryConstantFold "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tryConstantFold")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tryConstantFold "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" tryConstantFold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isConstant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isConstant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("canonical")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("canonical")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("ä» AddNode çš„ canonical() æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ä¸ºäº†ç¼©å‡ç†æƒ³å›¾çš„è§„æ¨¡è€Œåšçš„ç›¸å½“å¤šçš„åŠªåŠ›, å³ä½¿åªæ˜¯ä¸¤ä¸ªæ•´æ•°ç›¸åŠ é‚£ä¹ˆç®€å•çš„æ“ä½œ, ä¹Ÿå°è¯•è¿‡äº†å¸¸é‡æŠ˜å (å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸ºå¸¸é‡, åˆ™ç›´æ¥è¿”å›ä¸€ä¸ªå¸¸é‡èŠ‚ç‚¹), ç®—æœ¯èšåˆ(èšåˆæ ‘çš„å¸¸é‡å­èŠ‚ç‚¹, è­¬å¦‚å°† "),a("code",[s._v("(a + 1) + 2")]),s._v("â€‹ èšåˆä¸º "),a("code",[s._v("a + 3")]),s._v("â€‹), ç¬¦å·åˆå¹¶(èšåˆæ ‘çš„ç›¸åç¬¦å·å­èŠ‚ç‚¹, è­¬å¦‚å°† "),a("code",[s._v("(a - b) + b")]),s._v("â€‹ æˆ–è€… "),a("code",[s._v("b + (a - b)")]),s._v("â€‹ ç›´æ¥åˆå¹¶ä¸º a)ç­‰å¤šç§ä¼˜åŒ–, canonical() æ–¹æ³•çš„å†…å®¹è¾ƒå¤š, è¯·è¯»è€…è‡ªè¡Œå‚è€ƒæºç , ä¸ºèŠ‚çœç‰ˆé¢è¿™é‡Œå°±ä¸è´´å‡ºäº†.")]),s._v(" "),a("p",[s._v("å¯¹ç†æƒ³å›¾çš„è§„èŒƒåŒ–å¹¶ä¸å±€é™äºå•ä¸ªæ“ä½œç çš„å±€éƒ¨èŒƒå›´ä¹‹å†…, å¾ˆå¤šçš„ä¼˜åŒ–éƒ½æ˜¯è¦ç«‹è¶³äºå…¨å±€æ¥è¿›è¡Œçš„, è¿™ç±»æ“ä½œåœ¨ CanonicalizerPhase ç±»ä¸­å®Œæˆ. ä»ç„¶ä»¥ä¸Šä¸€èŠ‚çš„å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ä¸ºä¾‹, è¿™å°±æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„ä¼˜åŒ–, å®ç°åœ¨ "),a("code",[s._v("CanonicalizerPhase::tryGlobalValueNumbering()")]),s._v("â€‹ æ–¹æ³•ä¸­, å…¶é€»è¾‘çœ‹èµ·æ¥å·²ç»éå¸¸æ¸…æ™°äº†: å¦‚æœç†æƒ³å›¾ä¸­å‘ç°äº†å¯ä»¥è¿›è¡Œæ¶ˆé™¤çš„ç®—æœ¯å­è¡¨è¾¾å¼, é‚£å°±æ‰¾å‡ºé‡å¤çš„èŠ‚ç‚¹, ç„¶åæ›¿æ¢, åˆ é™¤. å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tryGlobalValueNumbering")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NodeClass")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" nodeClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nodeClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("valueNumberable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),s._v(" newNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("graph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("findDuplicate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("assert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FixedNode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" newNode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FixedNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("replaceAtUsagesAndDelete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COUNTER_GLOBAL_VALUE_NUMBERING_HITS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GVN applied and new node is %1s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("è‡³äºä»£ç ç”Ÿæˆ, Graal å¹¶ä¸æ˜¯ç›´æ¥ç”±ç†æƒ³å›¾è½¬æ¢åˆ°æœºå™¨ç , è€Œæ˜¯å’Œå…¶ä»–ç¼–è¯‘å™¨ä¸€æ ·, ä¼šå…ˆç”Ÿæˆä½çº§ä¸­é—´è¡¨ç¤º(LIR, ä¸å…·ä½“æœºå™¨æŒ‡ä»¤é›†ç›¸å…³çš„ä¸­é—´è¡¨ç¤º), ç„¶åå†ç”± HotSpot ç»Ÿä¸€åç«¯æ¥äº§ç”Ÿæœºå™¨ç . è­¬å¦‚æ¶‰åŠç®—æœ¯è¿ç®—åŠ æ³•çš„æ“ä½œ, å°±åœ¨ ArithmeticLIRGeneratorTool æ¥å£çš„ emitAdd() æ–¹æ³•é‡Œå®Œæˆ. ä»ä½çº§ä¸­é—´è¡¨ç¤ºçš„å®ç°ç±»ä¸Š, å¯ä»¥çœ‹åˆ° Graal ç¼–è¯‘å™¨èƒ½å¤Ÿæ”¯æŒçš„ç›®æ ‡å¹³å°, ç›®å‰å®ƒåªæä¾›äº†ä¸‰ç§ç›®æ ‡å¹³å°çš„æŒ‡ä»¤é›†(SPARC, x86-AMD64, ARMv8-AArch64)çš„ä½çº§ä¸­é—´è¡¨ç¤º, æ‰€ä»¥ç°åœ¨ Graal ç¼–è¯‘å™¨ä¹Ÿå°±åªèƒ½æ”¯æŒè¿™å‡ ç§ç›®æ ‡å¹³å°, å¦‚å›¾ 11-21 æ‰€ç¤º.")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Image00218-20240302133505-2dkeawe.jpg",alt:"",title:"å›¾11-21ã€€Graal æ”¯æŒçš„ç›®æ ‡å¹³å°ç”Ÿæˆå™¨"}})]),s._v(" "),a("p",[s._v("ä¸ºäº†éªŒè¯ä»£ç é˜…è¯»çš„æˆæœ, ç°åœ¨æ¥å¯¹ AddNode çš„ä»£ç ç”Ÿæˆåšä¸€äº›å°æ”¹åŠ¨, å°†åŸæœ¬ç”ŸæˆåŠ æ³•æ±‡ç¼–æŒ‡ä»¤ä¿®æ”¹ä¸ºç”Ÿæˆå‡æ³•æ±‡ç¼–æŒ‡ä»¤, å³æŒ‰å¦‚ä¸‹æ–¹å¼ä¿®æ”¹ "),a("code",[s._v("AddNode::generate()")]),s._v("â€‹ æ–¹æ³•:")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AddNode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("generate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" gen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("emitSub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("op1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" op2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŸæ¥è¿™ä¸ªæ–¹æ³•æ˜¯ emitAdd()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ç„¶ååœ¨è™šæ‹Ÿæœºè¿è¡Œå‚æ•°ä¸­åŠ ä¸Š "),a("code",[s._v("-XX: +PrintAssembly")]),s._v("â€‹ å‚æ•°, å› ä¸ºä»ä½çº§ä¸­é—´è¡¨ç¤ºåˆ°çœŸæ­£æœºå™¨ç çš„è½¬æ¢æ˜¯ç”± HotSpot ç»Ÿä¸€è´Ÿè´£çš„, æ‰€ä»¥ 11.2 èŠ‚ä¸­ç”¨åˆ°çš„ HSDIS æ’ä»¶ä»ç„¶èƒ½å‘æŒ¥ä½œç”¨, å¸®åŠ©è¾“å‡ºæ±‡ç¼–ä»£ç . ä»è¾“å‡ºçš„æ±‡ç¼–ä¸­å¯ä»¥çœ‹åˆ°, åœ¨æ²¡æœ‰ä¿®æ”¹ä¹‹å‰, AddNode èŠ‚ç‚¹è¾“å‡ºçš„æ±‡ç¼–ä»£ç å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("0x000000010f71cda0: nopl   0x0(%rax,%rax,1)\n0x000000010f71cda5: add    %edx,%esi     ;*iadd {reexecute=0 rethrow=0 return_oop=0}\n                                         ; - Demo::workload@2 (line 10)\n\n0x000000010f71cda7: mov    %esi,%eax     ;*ireturn {reexecute=0 rethrow=0 return_oop=0}\n                                         ; - Demo::workload@3 (line 10)\n\n0x000000010f71cda9: test   %eax,-0xcba8da9(%rip)        # 0x0000000102b74006\n                                         ;   {poll_return}\n0x000000010f71cdaf: vzeroupper\n0x000000010f71cdb2: retq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("è€Œè¢«ä¿®æ”¹å, ç¼–è¯‘çš„ç»“æœå·²ç»å˜ä¸º:")]),s._v(" "),a("div",{staticClass:"language-ziti1 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("0x0000000107f451a0: nopl   0x0(%rax,%rax,1)\n0x0000000107f451a5: sub    %edx,%esi          ;*iadd {reexecute=0 rethrow=0 return_oop=0}\n                                              ; - Demo::workload@2 (line 10)\n\n0x0000000107f451a7: mov    %esi,%eax          ;*ireturn {reexecute=0 rethrow=0 return_oop=0}\n                                              ; - Demo::workload@3 (line 10)\n\n0x0000000107f451a9: test   %eax,-0x1db81a9(%rip)        # 0x000000010618d006\n                                              ;   {poll_return}\n0x0000000107f451af: vzeroupper\n0x0000000107f451b2: retq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("è¿™é‡Œçš„ä¿®æ”¹ç¡®å®ä¿ƒä½¿ Graal ç¼–è¯‘å™¨äº§ç”Ÿäº†ä¸åŒçš„æ±‡ç¼–ä»£ç , è¿™ä¹Ÿå°è¯äº†ä»£ç åˆ†æçš„æ€è·¯æ˜¯æ­£ç¡®çš„. å†™åˆ°è¿™é‡Œ, ç¬”è€…å¿ä¸ä½æ„Ÿæ…¨, Graal ç¼–è¯‘å™¨çš„å‡ºç°å¯¹å­¦ä¹ å’Œç ”ç©¶è™šæ‹Ÿæœºä»£ç ç¼–è¯‘æŠ€æœ¯å®åœ¨æœ‰ç€ä¸å¯ä¼°é‡çš„ä»·å€¼. åœ¨æœ¬ä¹¦ç¬¬ 2 ç‰ˆç¼–å†™æ—¶, åªæœ‰ C++ ç¼–å†™çš„å¤æ‚æ— æ¯”çš„æœåŠ¡ç«¯ç¼–è¯‘å™¨, è¦è¿›è¡Œç±»ä¼¼çš„å®æˆ˜æ˜¯éå¸¸å›°éš¾çš„, å³ä½¿å‹‰å¼ºå†™å‡ºæ¥, ä¹Ÿä¼šå› ä¸ºè¿‡åº¦çƒ¦çè€Œå¤±å»é˜…è¯»ä»·å€¼.")]),s._v(" "),a("p",[s._v("â€")]),s._v(" "),a("h4",{attrs:{id:"æœ¬ç« å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬ç« å°ç»“"}},[s._v("#")]),s._v(" æœ¬ç« å°ç»“")]),s._v(" "),a("p",[s._v("æœ¬ç« å­¦ä¹ äº†ä¸æå‰ç¼–è¯‘å’Œå³æ—¶ç¼–è¯‘å™¨ä¸¤å¤§åç«¯ç¼–è¯‘å™¨ç›¸å…³çš„çŸ¥è¯†, äº†è§£äº†æå‰ç¼–è¯‘å™¨é‡æ–°å…´èµ·çš„åŸå› åŠå…¶ä¼˜åŠ£åŠ¿; è¿˜æœ‰ä¸å³æ—¶ç¼–è¯‘å™¨ç›¸å…³çš„çƒ­ç‚¹æ¢æµ‹æ–¹æ³•, ç¼–è¯‘è§¦å‘æ¡ä»¶åŠå¦‚ä½•ä»è™šæ‹Ÿæœºå¤–éƒ¨è§‚å¯Ÿå’Œåˆ†æå³æ—¶ç¼–è¯‘çš„æ•°æ®å’Œç»“æœ; è¿˜é€‰æ‹©äº†å‡ ç§å¸¸è§çš„ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯è¿›è¡Œè®²è§£, å¯¹ Java ç¼–è¯‘å™¨çš„æ·±å…¥äº†è§£, æœ‰åŠ©äºåœ¨å·¥ä½œä¸­åˆ†è¾¨å“ªäº›ä»£ç æ˜¯ç¼–è¯‘å™¨å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†çš„, å“ªäº›ä»£ç éœ€è¦è‡ªå·±è°ƒèŠ‚ä»¥ä¾¿æ›´é€‚åˆç¼–è¯‘å™¨çš„ä¼˜åŒ–.")]),s._v(" "),a("p",[s._v("â€")]),s._v(" "),a("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/baronzhang/p/11108322.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº(ç¨‹åºç¼–è¯‘ä¸ä»£ç ä¼˜åŒ–)https://www.cnblogs.com/baronzhang/p/11108322.html"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("â€")]),s._v(" "),a("p",[s._v("â€")])])}),[],!1,null,null,null);a.default=e.exports}}]);