(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{498:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_520-oauth2-0å®æˆ˜è¯¾-æå®¢æ—¶é—´-ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_520-oauth2-0å®æˆ˜è¯¾-æå®¢æ—¶é—´-ğŸŒŸ"}},[t._v("#")]),t._v(" 520.OAuth2.0å®æˆ˜è¯¾(æå®¢æ—¶é—´)ğŸŒŸ")]),t._v(" "),s("h3",{attrs:{id:"å¼€ç¯‡è¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼€ç¯‡è¯"}},[t._v("#")]),t._v(" å¼€ç¯‡è¯")]),t._v(" "),s("h4",{attrs:{id:"ä¸ºä»€ä¹ˆè¦å­¦oauth2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦å­¦oauth2-0"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦å­¦OAuth2.0")]),t._v(" "),s("p",[t._v("è¶Šæ¥è¶Šå¤šçš„ç¬¬ä¸‰æ–¹åº”ç”¨éƒ½åœ¨å‘ç”¨æˆ·æä¾›ä½¿ç”¨å¾®ä¿¡ç™»å½•çš„è§£å†³æ–¹æ¡ˆ, æ¥å‡å°‘ç”¨æˆ·æ³¨å†Œçš„ç¹çæ“ä½œ. è€Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„èƒŒååŸç†, ä¹Ÿæ˜¯è¿™é—¨è¯¾è¦è®²åˆ°çš„ OAuth 2.0 æŠ€æœ¯.")]),t._v(" "),s("h5",{attrs:{id:"_1-oauth-2-0æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-oauth-2-0æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1.OAuth 2.0æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("p",[t._v('é‚£ OAuth 2.0 åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢? å…ˆä»å­—é¢ä¸Šæ¥åˆ†æä¸‹. OAuth 2.0 ä¸€è¯ä¸­çš„ "Auth" è¡¨ç¤º "æˆæƒ", å­—æ¯ "O" æ˜¯ Open çš„ç®€ç§°, è¡¨ç¤º "å¼€æ”¾" , è¿åœ¨ä¸€èµ·å°±è¡¨ç¤º "'),s("strong",[t._v("å¼€æ”¾æˆæƒ")]),t._v('". è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨ OAuth çš„åœºæ™¯, é€šå¸¸å‘ç”Ÿåœ¨'),s("strong",[t._v("å¼€æ”¾å¹³å°")]),t._v("çš„ç¯å¢ƒä¸‹.")]),t._v(" "),s("p",[t._v("OAuth 2.0 ä¹‹å‰è¿˜æœ‰ OAuth 1.0. è¿™é‡Œè¯´ä¸‹è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„ OAuth æœ‰ä»€ä¹ˆåŒºåˆ«.")]),t._v(" "),s("p",[t._v('åœ¨ OAuth 1.0 çš„æ—¶å€™, å®ƒæœ‰ä¸ª "å¾ˆå¤§çš„æ„¿æœ›" å°±æ˜¯æƒ³ç”¨ä¸€å¥—æˆæƒæœºåˆ¶æ¥åº”å¯¹ç°å®ä¸­çš„æ‰€æœ‰åœºæ™¯, æ¯”å¦‚ Web åº”ç”¨åœºæ™¯, ç§»åŠ¨ App åº”ç”¨åœºæ™¯, å®˜æ–¹åº”ç”¨åœºæ™¯ç­‰ç­‰, ä½†æ˜¯è¿™äº›åœºæ™¯å¹¶ä¸æ˜¯å®Œå…¨ç›¸åŒçš„. æ¯”å¦‚å®˜æ–¹åº”ç”¨åœºæ™¯, ä½ è¯´è¿˜éœ€è¦è®©ç”¨æˆ·æ¥æˆæƒå—? å¦‚æœéœ€è¦, å§‹ç»ˆä½¿ç”¨ä¸€å¥—æˆæƒæœºåˆ¶ç»™ç”¨æˆ·å¸¦æ¥çš„ä½“éªŒ, æ˜¯å¥½è¿˜æ˜¯åå‘¢?')]),t._v(" "),s("p",[t._v("åˆ°äº† OAuth 2.0 çš„æ—¶å€™, å°±è§£å†³äº† OAuth 1.0 é¢ä¸´çš„è¿™ç§å°´å°¬. "),s("strong",[t._v("OAuth 2.0 ä¸å†å±€é™äºä¸€ç§æˆæƒæœºåˆ¶, å®ƒæ‰©å……äº†æˆæƒè®¸å¯æœºåˆ¶ç±»å‹, æœ‰äº†æˆæƒç è®¸å¯æœºåˆ¶, å®¢æˆ·ç«¯å‡­æ®æœºåˆ¶, èµ„æºæ‹¥æœ‰è€…å‡­æ®æœºåˆ¶å’Œéšå¼è®¸å¯æœºåˆ¶. è¿™æ ·çš„ OAuth æœºåˆ¶å°±èƒ½å¤Ÿå¾ˆçµæ´»åœ°é€‚åº”ç°å®ä¸­çš„å„ç§åœºæ™¯, æ¯”å¦‚ç§»åŠ¨åº”ç”¨çš„åœºæ™¯, å®˜æ–¹åº”ç”¨çš„åœºæ™¯, ç­‰ç­‰")]),t._v(".")]),t._v(" "),s("p",[t._v("æ­¤å¤–, OAuth 1.0 çš„å¼Šç«¯è¿˜åŒ…æ‹¬å®‰å…¨ä¸Šçš„å›ºåŒ–æ”»å‡»ç­‰é—®é¢˜, å› æ­¤ OAuth 1.0 ç°åœ¨å·²ç»æ˜¯åºŸå¼ƒçŠ¶æ€äº†. æ‰€ä»¥ç›´æ¥ä½¿ç”¨ OAuth 2.0 å°±å¯ä»¥äº†.")]),t._v(" "),s("h5",{attrs:{id:"_2-è¿™é—¨è¯¾æ˜¯æ€ä¹ˆè®¾è®¡çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¿™é—¨è¯¾æ˜¯æ€ä¹ˆè®¾è®¡çš„"}},[t._v("#")]),t._v(" 2.è¿™é—¨è¯¾æ˜¯æ€ä¹ˆè®¾è®¡çš„")]),t._v(" "),s("p",[t._v("æœ¬é—¨è¯¾åˆ†ä¸ºåŸºç¡€ç¯‡å’Œè¿›é˜¶ç¯‡ä¸¤å¤§æ¨¡å—, æ¯ä¸ªæ¨¡å—éƒ½ä¼šå®‰æ’ä¸€äº›å®è·µå†…å®¹.")]),t._v(" "),s("p",[t._v("**ç¬¬ä¸€éƒ¨åˆ†æ˜¯åŸºç¡€ç¯‡, å°±æ˜¯ä½ å¿…é¡»è¦æŒæ¡çš„ OAuth 2.0 çš„åŸºç¡€çŸ¥è¯†. ** è¿™ä¸€æ¨¡å—ä¼šç»†è‡´åœ°è®²è§£æˆæƒç è®¸å¯(Authorization Code)ç±»å‹çš„æµç¨‹, åŒ…æ‹¬ OAuth 2.0 å†…éƒ¨ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ–¹å¼, ä»¥åŠæˆæƒæœåŠ¡, å®¢æˆ·ç«¯(ç¬¬ä¸‰æ–¹è½¯ä»¶), å—ä¿æŠ¤èµ„æºæœåŠ¡è¿™ä¸‰ä¸ªç»„ä»¶çš„åŸç†.")]),t._v(" "),s("p",[t._v("åœ¨æ­¤åŸºç¡€ä¸Š, è¿˜ä¼šè®²è§£å…¶ä»–ä¸‰ç§å¸¸è§è®¸å¯ç±»å‹, åˆ†åˆ«æ˜¯"),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯(Resource Owner Password Credentials), éšå¼è®¸å¯(Implicit), å®¢æˆ·ç«¯å‡­æ®è®¸å¯(Client Credentials)çš„åŸç†")]),t._v(", ä»¥åŠå¦‚ä½•é€‰æ‹©é€‚åˆè‡ªå·±å®é™…åœºæ™¯çš„æˆæƒç±»å‹. è¿™æ ·å°±èƒ½æŒæ¡æ•´ä¸ª OAuth 2.0 ä¸­æ‰€æœ‰è®¸å¯ç±»å‹çš„è¿è½¬æœºåˆ¶äº†, å¹¶ä¸”èƒ½å¤Ÿä»å®¹åœ°åœ¨å®é™…å·¥ä½œç¯å¢ƒä¸­ä½¿ç”¨å®ƒä»¬.")]),t._v(" "),s("p",[t._v('åœ¨è®²è¿°è¿™äº›åŸºç¡€å†…å®¹çš„æ—¶å€™, ä¼šç”¨ä¸€ä¸ªå°æ˜ä½¿ç”¨ç¬¬ä¸‰æ–¹"å°å…”æ‰“å•è½¯ä»¶"æ¥æ‰“å°è‡ªå·±åœ¨äº¬ä¸œåº—é“ºçš„è®¢å•æ•°æ®çš„ä¾‹å­, æ¥è´¯ç©¿å§‹ç»ˆ.')]),t._v(" "),s("p",[t._v("å­¦å®ŒåŸºç¡€ç¯‡çš„å†…å®¹, å°±å¯ä»¥æŠŠ OAuth 2.0 ç”¨åˆ°å®é™…çš„å·¥ä½œåœºæ™¯äº†.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬äºŒéƒ¨åˆ†è¿›é˜¶ç¯‡çš„å†…å®¹, ä¼šä¾§é‡è®²ä¸€äº› OAuth 2.0 æ›´é«˜çº§çš„ç”¨æ³•")]),t._v(", ä¹Ÿå°±æ˜¯å¦‚ä½•æ›´å®‰å…¨åœ°ç”¨, æ‰©å±•åœ°ç”¨ OAuth 2.0.")]),t._v(" "),s("p",[t._v("è¿™éƒ¨åˆ†å†…å®¹ä¼šåŒ…æ‹¬å¦‚ä½•åœ¨ç§»åŠ¨ App ä¸­ä½¿ç”¨ OAuth 2.0, å› ä½¿ç”¨ä¸å½“è€Œå¯¼è‡´çš„ OAuth 2.0 å®‰å…¨æ¼æ´æœ‰å“ªäº›, ä»¥åŠå¦‚ä½•åˆ©ç”¨ OAuth 2.0 å®ç°ä¸€ä¸ª OpenID Connect ç”¨æˆ·èº«ä»½è®¤è¯åè®®.")]),t._v(" "),s("p",[s("strong",[t._v("åŒæ—¶åœ¨ "),s("strong",[t._v("â€‹")])]),t._v("**GitHub **"),s("strong",[s("strong",[t._v("â€‹")]),t._v("ä¸Šå‡†å¤‡äº†ä¸€ä»½éå¸¸ç®€å•, å¯è½åœ°çš„")]),t._v("é€šè¿‡ Java è¯­è¨€æ¥å®ç°çš„ä»£ç . å¯è½åœ°çš„åœ°æ–¹åœ¨äº, è™½ç„¶å®ƒæ˜¯ä¸€ä»½ç®€å•çš„ä»£ç , ä½†å®ƒä¸ä»…æŠŠæ•´ä¸ª OAuth 2.0 çš„ç»„ä»¶éƒ½è·‘é€šäº†, è¿˜åŒ…å«äº†å®è·µä¸€ä¸ª OIDC åè®®çš„å…·ä½“å®ç°.")]),t._v(" "),s("p",[t._v("è¿™é‡Œæ€»ç»“ä¸€ä¸‹ OAuth 2.0 çš„çŸ¥è¯†ä½“ç³»å›¾, å…ˆäº†è§£ä¸‹æ•´ä¸ªè¯¾ç¨‹çš„çŸ¥è¯†ç»“æ„.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/5ed84a0129be0e3b3e8934b2b6327f51-20230729094013-thwpm8f.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"åŸºç¡€ç¯‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€ç¯‡"}},[t._v("#")]),t._v(" åŸºç¡€ç¯‡")]),t._v(" "),s("h4",{attrs:{id:"oauth-2-0æ˜¯è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oauth-2-0æ˜¯è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" OAuth 2.0æ˜¯è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³ä»€ä¹ˆé—®é¢˜")]),t._v(" "),s("p",[t._v("å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨æå®¢æ—¶é—´ App çš„æ—¶å€™, ä½ æ˜¯ç›´æ¥ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹å¸å·(æ¯”å¦‚å¾®ä¿¡, å¾®åš)ç™»å½•, è¿˜æ˜¯é€‰æ‹©äº†é‡æ–°æ³¨å†Œæ–°ç”¨æˆ·? å¦‚æœä½ é€‰æ‹©äº†é‡æ–°æ³¨å†Œç”¨æˆ·, é‚£ä½ è¿˜å¾—ä¸Šä¼ å¤´åƒ, è¾“å…¥ç”¨æˆ·åç­‰ä¿¡æ¯. ä½†å¦‚æœä½ é€‰æ‹©äº†ä½¿ç”¨ç¬¬ä¸‰æ–¹å¸å·å¾®ä¿¡æ¥ç™»å½•, é‚£æå®¢æ—¶é—´ä¼šç›´æ¥ä½¿ç”¨ä½ å¾®ä¿¡çš„è¿™äº›ä¿¡æ¯ä½œä¸ºåŸºç¡€ä¿¡æ¯, ä½ å°±èƒ½çœå¿ƒå¾ˆå¤š.")]),t._v(" "),s("p",[t._v("è¿™æ˜¯æ€ä¹ˆå®ç°çš„? å¾®ä¿¡æŠŠæˆ‘çš„ä¸ªäººä¿¡æ¯ç»™äº†æå®¢æ—¶é—´, å®ƒåˆæ˜¯æ€ä¹ˆä¿è¯æˆ‘çš„æ•°æ®å®‰å…¨çš„å‘¢?")]),t._v(" "),s("p",[t._v("å…¶å®, å¾®ä¿¡è¿™ä¸€ç³»åˆ—æˆæƒèƒŒåçš„åŸç†éƒ½å¯ä»¥å½’åˆ°ä¸€ä¸ªè¯ä¸Š, é‚£å°±æ˜¯ OAuth 2.0. ä¸‹é¢å°±æ¥çœ‹çœ‹ OAuth 2.0 åˆ°åº•æ˜¯ä»€ä¹ˆ, èƒ½å¹²ä»€ä¹ˆä»¥åŠå®ƒæ˜¯æ€ä¹ˆå¹²çš„.")]),t._v(" "),s("h5",{attrs:{id:"_1-oauth-2-0æ˜¯ä»€ä¹ˆ-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-oauth-2-0æ˜¯ä»€ä¹ˆ-2"}},[t._v("#")]),t._v(" 1.OAuth 2.0æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("p",[t._v("ç”¨ä¸€å¥è¯æ€»ç»“æ¥è¯´, "),s("strong",[t._v("OAuth 2.0 å°±æ˜¯ä¸€ç§æˆæƒåè®®")]),t._v(".")]),t._v(" "),s("p",[t._v('é‚£å¦‚ä½•ç†è§£è¿™é‡Œçš„ "æˆæƒ" å‘¢?')]),t._v(" "),s("p",[t._v('ä¸¾ä¸ªå’±ä»¬ç”Ÿæ´»ä¸­çš„ä¾‹å­. å‡å¦‚ä½ æ˜¯ä¸€åé”€å”®äººå‘˜, ä½ æƒ³å»ç™¾åº¦æ‹œè®¿ä½ çš„å¤§å®¢æˆ·ç‹æ€». åˆ°äº†ç™¾åº¦çš„å¤§æ¥¼ä¹‹å, ä¿å®‰æ‹¦ä½äº†ä½ , é—®ä½ è¦å·¥ç‰Œ. ä½ è¯´: "ä¿å®‰å¤§å“¥å•Š, æˆ‘æ˜¯æ¥æ‹œè®¿ç‹æ€»çš„, å“ªé‡Œæœ‰ä»€ä¹ˆå·¥ç‰Œ". ä¿å®‰å¤§å“¥è¯´: "é‚£ä½ è¦å»å‰å°åšä¸ªç™»è®°". ç„¶åä½ å°±èµ¶ç´§æ¥åˆ°å‰å°, å‰å°é—®ä½ æ˜¯ä¸æ˜¯åšäº†ç™»è®°. ä½ è¯´ç‹æ€»ç§˜ä¹¦æ˜¨å¤©æœ‰è¦ä½ çš„æ‰‹æœºå·, è¯´æ˜¯å·²ç»åšè¿‡é¢„çº¦. å°å§å§ç¡®è®¤ä¹‹åå¾€ä½ çš„æ‰‹æœºå‘äº†ä¸ªéªŒè¯ç , ä½ æŠŠéªŒè¯ç å‘Šè¯‰äº†å‰å°å°å§å§ä¹‹å, å¥¹ç»™äº†ä½ ä¸€å¼ é—¨ç¦å¡, äºæ˜¯ä½ å°±å¯ä»¥å¼€å¿ƒåœ°å»è§ç‹æ€»äº†.')]),t._v(" "),s("p",[t._v("è¿™ä¸ªä¾‹å­é‡Œé¢å°±æœ‰ä¸€æ¬¡æˆæƒ. æœ¬æ¥ä½ æ˜¯æ²¡æœ‰æƒé™è¿›å…¥ç™¾åº¦å¤§æ¥¼çš„, ä½†æ˜¯ç»è¿‡å‰å°å°å§å§ä¸€ç³»åˆ—çš„éªŒè¯ä¹‹å, å¥¹å‘ç°ä½ ç¡®å®æ˜¯æ¥æ‹œè®¿å®¢æˆ·çš„, äºæ˜¯ç»™äº†ä½ ä¸€å¼ ä¸´æ—¶å·¥ç‰Œ. "),s("strong",[t._v("è¿™æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯æˆæƒ")]),t._v(".")]),t._v(" "),s("p",[t._v('å†ä¸¾ä¸€ä¸ªç”µå•†çš„åœºæ™¯. å‡å¦‚ä½ æ˜¯ä¸€ä¸ªå–å®¶, åœ¨äº¬ä¸œå•†åŸå¼€äº†ä¸€ä¸ªåº—é“º, æ—¥å¸¸è¿è¥ä¸­ä½ è¦å°†è®¢å•æ‰“å°å‡ºæ¥ä»¥ä¾¿ç»™ç”¨æˆ·å‘è´§. ä½†æ‰“å°è¿™äº‹å„¿ä¹ŸæŒºç¹ççš„, ä¹‹å‰ä½ æ€»æ˜¯æ‰‹å·¥æ“ä½œ, åæ¥å‘ç°æœ‰ä¸ªå«"å°å…”"çš„ç¬¬ä¸‰æ–¹è½¯ä»¶, å®ƒå¯ä»¥å¸®ä½ é«˜æ•ˆç‡åœ°å¤„ç†è¿™äº‹. é‚£å°å…”æ˜¯æ€ä¹ˆè®¿é—®åˆ°è¿™äº›è®¢å•æ•°æ®çš„å‘¢? å…¶å®æ˜¯è¿™æ ·, '),s("strong",[t._v("äº¬ä¸œå•†åŸæä¾›äº†å¼€æ”¾å¹³å°, å°å…”é€šè¿‡äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„ API å°±èƒ½è®¿é—®åˆ°ç”¨æˆ·çš„è®¢å•æ•°æ®. åªè¦ä½ åœ¨è½¯ä»¶é‡Œç‚¹å‡»åŒæ„, å°å…”å°±å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ, é€šè¿‡è®¿é—®ä»¤ç‰Œæ¥è·å–åˆ°ä½ çš„è®¢å•æ•°æ®å¸®ä½ å¹²æ´»å„¿äº†")]),t._v(". è¿™é‡Œä¹Ÿæ˜¯æœ‰ä¸€æ¬¡æˆæƒ. ä½ è¦æ˜¯ä¸åŒæ„, å¹³å°è‚¯å®šä¸æ•¢æŠŠè¿™äº›æ•°æ®ç»™åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶.")]),t._v(" "),s("h5",{attrs:{id:"_2-ä¸ºä»€ä¹ˆç”¨oauth-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸ºä»€ä¹ˆç”¨oauth-2-0"}},[t._v("#")]),t._v(" 2.ä¸ºä»€ä¹ˆç”¨OAuth 2.0")]),t._v(" "),s("p",[t._v("åŸºäºä¸Šé¢ä¸¤ç§åœºæ™¯çš„è§£å†³æ–¹æ¡ˆ, å…³äºæˆæƒ"),s("strong",[t._v("æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ¡ˆå°±æ˜¯æä¾›é’¥åŒ™")]),t._v(". æ¯”å¦‚, ä½ è¦å»ç™¾åº¦æ‹œè®¿ç‹æ€», é‚£å‰å°å°å§å§å°±ç»™ä½ å¼ ç™¾åº¦çš„å·¥ç‰Œ; å°å…”è¦è·å–ä½ çš„è®¢å•ä¿¡æ¯, é‚£ä½ å°±æŠŠä½ çš„ç”¨æˆ·åå’Œå¯†ç ç»™å®ƒ. ä½†ç¨å¾®æœ‰äº›å®‰å…¨æ„è¯†, éƒ½ä¸ä¼šè¿™æ ·åš.")]),t._v(" "),s("p",[t._v("å› ä¸ºä½ æœ‰äº†ç™¾åº¦å·¥ç‰Œ, é‚£ä»¥åéƒ½å¯ä»¥éšæ—¶è‡ªç”±åœ°è¿›å‡ºäº†, è¿™æ˜¾ç„¶ä¸æ˜¯ç™¾åº¦æƒ³è¦çš„. æ‰€ä»¥ç™¾åº¦æœ‰ä¸€å¥—å®Œæ•´çš„æœºåˆ¶, é€šè¿‡ç»™ä½ ä¸€å¼ ä¸´æ—¶å·¥ç‰Œ, å®ç°åœ¨ä¿è¯å®‰å…¨çš„æƒ…å†µä¸‹, è¿˜èƒ½è®©ä½ å»å¤§æ¥¼é‡Œé¢è§åˆ°ç‹æ€». ç›¸åº”åœ°, å°å…”è½¯ä»¶è¯·æ±‚è®¿é—®ä½ çš„è®¢å•æ•°æ®çš„è¿‡ç¨‹, ä¹Ÿä¼šæ¶‰åŠè¿™æ ·ä¸€å¥—æˆæƒæœºåˆ¶, é‚£"),s("strong",[t._v("å°±æ˜¯ OAuth 2.0. å®ƒé€šè¿‡ç»™å°å…”è½¯ä»¶ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ, è€Œä¸æ˜¯è®©å°å…”è½¯ä»¶æ‹¿ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç , å»è·å–ä½ çš„è®¢å•æ•°æ®å¸®ä½ å¹²æ´»å„¿")]),t._v(".")]),t._v(" "),s("p",[t._v("åœ¨å¦‚ä»Šçš„äº’è”ç½‘ä¸–ç•Œé‡Œç”¨åˆ° OAuth 2.0 çš„åœ°æ–¹éå¸¸å¤š, åªæ˜¯å› ä¸ºå®ƒéšè—äº†å®ç°ç»†èŠ‚, éœ€è¦æˆ‘ä»¬å¤šåšåˆ†ææ‰èƒ½å‘ç°å®ƒ. æ¯”å¦‚, "),s("strong",[t._v("å½“ä½¿ç”¨å¾®ä¿¡ç™»å½•å…¶ä»–ç½‘ç«™æˆ–è€… App çš„æ—¶å€™, å½“å¼€å§‹ä½¿ç”¨æŸä¸ªå°ç¨‹åºçš„æ—¶å€™, éƒ½åœ¨æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ç”¨åˆ°äº† OAuth 2.0")]),t._v(".")]),t._v(" "),s("p",[t._v("é‚£æ€»ç»“æ¥è¯´, "),s("mark",[s("strong",[t._v("OAuth 2.0 è¿™ç§æˆæƒåè®®, å°±æ˜¯ä¿è¯ç¬¬ä¸‰æ–¹(è½¯ä»¶)åªæœ‰åœ¨è·å¾—æˆæƒä¹‹å, æ‰å¯ä»¥è¿›ä¸€æ­¥è®¿é—®æˆæƒè€…çš„æ•°æ®")])]),t._v(". å› æ­¤, å¸¸å¸¸è¿˜ä¼šå¬åˆ°ä¸€ç§è¯´æ³•, OAuth 2.0 æ˜¯ä¸€ç§å®‰å…¨åè®®. å…¶å®è¿™ç§è¯´æ³•ä¹Ÿæ˜¯æ­£ç¡®çš„.")]),t._v(" "),s("p",[s("strong",[t._v("ç°åœ¨è®¿é—®æˆæƒè€…çš„æ•°æ®ä¸»è¦æ˜¯é€šè¿‡ Web API, æ‰€ä»¥å‡¡æ˜¯è¦ä¿æŠ¤è¿™ç§å¯¹å¤–çš„ API æ—¶, éƒ½éœ€è¦è¿™æ ·æˆæƒçš„æ–¹å¼")]),t._v(". è€Œ OAuth 2.0 çš„è¿™ç§é¢å‘è®¿é—®ä»¤ç‰Œçš„æœºåˆ¶, æ˜¯å†åˆé€‚ä¸è¿‡çš„æ–¹æ³•äº†. åŒæ—¶, è¿™æ ·çš„ Web API è¿˜åœ¨æŒç»­å¢åŠ , æ‰€ä»¥ OAuth 2.0 æ˜¯ç›®å‰ Web ä¸Šé‡è¦çš„å®‰å…¨æ‰‹æ®µä¹‹ä¸€äº†.")]),t._v(" "),s("h5",{attrs:{id:"_3-oauth-2-0æ˜¯æ€æ ·è¿è½¬çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-oauth-2-0æ˜¯æ€æ ·è¿è½¬çš„"}},[t._v("#")]),t._v(" 3.OAuth 2.0æ˜¯æ€æ ·è¿è½¬çš„")]),t._v(" "),s("p",[t._v("è¿™é‡Œè¿˜æ˜¯æ¥çœ‹ä¸Šé¢æåˆ°çš„å°å…”æ‰“å•è½¯ä»¶çš„ä¾‹å­. å‡å¦‚å°æ˜åœ¨äº¬ä¸œä¸Šé¢å¼€äº†ä¸€ä¸ªåº—é“º, å°æ˜è¦ç®¡ç†ä»–çš„åº—é“ºé‡Œé¢çš„è®¢å•, äºæ˜¯é€‰æ‹©äº†ä½¿ç”¨å°å…”è½¯ä»¶.")]),t._v(" "),s("p",[t._v('ç°åœ¨æŠŠ"å°æ˜", "å°å…”è½¯ä»¶", "äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°" æ”¾åˆ°ä¸€ä¸ªå¯¹è¯é‡Œé¢, çœ‹çœ‹ä»–ä»¬æ˜¯æ€ä¹ˆæ²Ÿé€šçš„.')]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å°æ˜")]),t._v(": ä½ å¥½, å°å…”è½¯ä»¶. æˆ‘æ­£åœ¨ Google æµè§ˆå™¨ä¸Šé¢, éœ€è¦è®¿é—®ä½ æ¥å¸®æˆ‘å¤„ç†æˆ‘åœ¨äº¬ä¸œå•†åŸåº—é“ºçš„è®¢å•.")]),t._v(" "),s("li",[s("strong",[t._v("å°å…”è½¯ä»¶")]),t._v(": å¥½çš„, å°æ˜, æˆ‘éœ€è¦ä½ ç»™æˆ‘æˆæƒ. ç°åœ¨æˆ‘æŠŠä½ å¼•å¯¼åˆ°äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ä¸Š, ä½ åœ¨é‚£é‡Œç»™æˆ‘æˆæƒå§.")]),t._v(" "),s("li",[s("strong",[t._v("äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°")]),t._v(": ä½ å¥½, å°æ˜. æˆ‘æ”¶åˆ°äº†å°å…”è½¯ä»¶è·³è½¬è¿‡æ¥çš„è¯·æ±‚, ç°åœ¨å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªæˆæƒé¡µé¢. ä½ ç™»å½•å¹¶ç¡®è®¤å, ç‚¹å‡»æˆæƒé¡µé¢ä¸Šé¢çš„æˆæƒæŒ‰é’®å³å¯.")]),t._v(" "),s("li",[s("strong",[t._v("å°æ˜")]),t._v(": å¥½çš„, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°. æˆ‘çœ‹åˆ°äº†è¿™ä¸ªæˆæƒé¡µé¢, å·²ç»ç‚¹æˆæƒæŒ‰é’®å•¦ğŸ˜„")]),t._v(" "),s("li",[s("strong",[t._v("äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°")]),t._v(": ä½ å¥½, å°å…”æ‰“å•è½¯ä»¶. æˆ‘æ”¶åˆ°äº†å°æ˜çš„æˆæƒ, ç°åœ¨è¦ç»™ä½ ç”Ÿæˆä¸€ä¸ªæˆæƒç  code å€¼, æˆ‘é€šè¿‡æµè§ˆå™¨é‡å®šå‘åˆ°ä½ çš„å›è°ƒ URL åœ°å€ä¸Šé¢äº†.")]),t._v(" "),s("li",[s("strong",[t._v("å°å…”è½¯ä»¶")]),t._v(": å¥½çš„, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°. æˆ‘ç°åœ¨ä»æµè§ˆå™¨ä¸Šæ‹¿åˆ°äº†æˆæƒç , ç°åœ¨å°±ç”¨è¿™ä¸ªæˆæƒç æ¥è¯·æ±‚ä½ , è¯·ç»™æˆ‘ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ access_token å§.")]),t._v(" "),s("li",[s("strong",[t._v("äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°")]),t._v(": å¥½çš„, å°å…”æ‰“å•è½¯ä»¶, è®¿é—®ä»¤ç‰Œå·²ç»å‘é€ç»™ä½ äº†.")]),t._v(" "),s("li",[s("strong",[t._v("å°å…”æ‰“å•è½¯ä»¶")]),t._v(": å¤ªå¥½äº†, æˆ‘ç°åœ¨å°±å¯ä»¥ä½¿ç”¨è®¿é—®ä»¤ç‰Œæ¥è·å–å°æ˜åº—é“ºçš„è®¢å•äº†.")]),t._v(" "),s("li",[s("strong",[t._v("å°æ˜")]),t._v(": æˆ‘å·²ç»èƒ½å¤Ÿçœ‹åˆ°æˆ‘çš„è®¢å•äº†, ç°åœ¨å°±å¼€å§‹æ‰“å•æ“ä½œäº†.")])]),t._v(" "),s("p",[t._v("ä¸‹é¢å†ç”¨ä¸€å¼ å›¾æ¥æè¿°æ•´ä¸ªè¿‡ç¨‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/e0c79756feceac5b52794e3ea08f2440-20230729094013-9o4csg7.png",alt:"",title:"å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶æ‰“å°è®¢å•çš„æ•´ä½“æµç¨‹"}})]),t._v(" "),s("p",[t._v('å†åˆ†æä¸‹è¿™ä¸ªæµç¨‹, ä¸éš¾å‘ç°å°å…”è½¯ä»¶æœ€ç»ˆçš„ç›®çš„, æ˜¯è¦è·å–ä¸€ä¸ªå«åš "'),s("strong",[t._v("è®¿é—®ä»¤ç‰Œ")]),t._v('" çš„ä¸œè¥¿. ä»æœ€åä¸€æ­¥ä¹Ÿèƒ½å¤Ÿçœ‹å‡ºæ¥, åœ¨å°å…”è½¯ä»¶è·å–åˆ°'),s("strong",[t._v("è®¿é—®ä»¤ç‰Œ")]),t._v('ä¹‹å, æ‰æœ‰è¶³å¤Ÿçš„ "èƒ½åŠ›" å»è¯·æ±‚å°æ˜çš„åº—é“ºçš„è®¢å•, ä¹Ÿå°±æ˜¯æ‰èƒ½å¤Ÿå¸®åŠ©å°æ˜æ‰“å°è®¢å•.')]),t._v(" "),s("p",[t._v('é‚£ä¹ˆå°å…”è½¯ä»¶æ˜¯æ€ä¹ˆè·å–è®¿é—®ä»¤ç‰Œçš„å€¼çš„å‘¢? å¯ä»¥å‘ç°è¿˜æœ‰ä¸€ä¸ªå«åš "'),s("strong",[t._v("æˆæƒç ")]),t._v('" çš„ä¸œè¥¿, ä¹Ÿå°±æ˜¯è¯´å°å…”è½¯ä»¶æ˜¯æ‹¿'),s("mark",[s("strong",[t._v("æˆæƒç æ¢å–çš„è®¿é—®ä»¤ç‰Œ")])]),t._v(".")]),t._v(" "),s("p",[t._v("å°å…”è½¯ä»¶åˆæ˜¯æ€ä¹ˆæ‹¿åˆ°"),s("strong",[t._v("æˆæƒç ")]),t._v("çš„å‘¢? ä»å›¾ä¸­æµç¨‹åˆšå¼€å§‹çš„é‚£ä¸€æ­¥å°±ä¼šå‘ç°, æ˜¯åœ¨"),s("strong",[t._v("å°æ˜æˆæƒä¹‹å, æ‰äº§ç”Ÿçš„æˆæƒç ")]),t._v(", ä¸Šé¢æµç¨‹ä¸­åç»­çš„ä¸€åˆ‡åŠ¨ä½œ, å®é™…ä¸Šéƒ½æ˜¯åœ¨å°æ˜å¯¹å°å…”è½¯ä»¶æˆæƒå‘ç”Ÿä»¥åæ‰äº§ç”Ÿçš„. å…¶ä¸­ä¸»è¦çš„åŠ¨ä½œ, å°±æ˜¯"),s("mark",[s("strong",[t._v("ç”Ÿæˆæˆæƒç  -> ç”Ÿæˆè®¿é—®ä»¤ç‰Œ -> ä½¿ç”¨è®¿é—®ä»¤ç‰Œ")])]),t._v(".")]),t._v(" "),s("p",[s("mark",[t._v("å…¶å® ")]),t._v("â€‹"),s("mark",[t._v("**OAuth 2.0 æˆæƒçš„æ ¸å¿ƒå°±æ˜¯é¢å‘è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨è®¿é—®ä»¤ç‰Œ, **")]),t._v("â€‹"),s("mark",[t._v("è€Œä¸”ä¸ç®¡æ˜¯å“ªç§ç±»å‹çš„æˆæƒæµç¨‹éƒ½æ˜¯è¿™æ ·")]),t._v(". è¦è®°ä½è¿™å¥è¯, å®ƒæ˜¯æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒ.")]),t._v(" "),s("p",[t._v("åœ¨å°å…”è½¯ä»¶è¿™ä¸ªä¾‹å­ä¸­å‘¢, "),s("mark",[s("strong",[t._v("ä½¿ç”¨çš„å°±æ˜¯æˆæƒç è®¸å¯(Authorization Code)ç±»å‹. å®ƒæ˜¯ OAuth 2.0 ä¸­æœ€ç»å…¸, æœ€å®Œå¤‡, æœ€å®‰å…¨, åº”ç”¨æœ€å¹¿æ³›çš„è®¸å¯ç±»å‹")])]),t._v(". é™¤äº†æˆæƒç è®¸å¯ç±»å‹å¤–, OAuth 2.0 é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯, è¿˜æœ‰ 3 ç§åŸºç¡€çš„è®¸å¯ç±»å‹, åˆ†åˆ«æ˜¯"),s("strong",[t._v("éšå¼è®¸å¯")]),t._v("(Implicit), "),s("strong",[t._v("å®¢æˆ·ç«¯å‡­æ®è®¸å¯")]),t._v("(Client Credentials), "),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯")]),t._v("(Resource Owner Password Credentials). ç›¸å¯¹è€Œè¨€, è¿™ 3 ç§æˆæƒè®¸å¯ç±»å‹çš„æµç¨‹, åœ¨æµç¨‹å¤æ‚åº¦å’Œå®‰å…¨æ€§ä¸Šéƒ½æœ‰æ‰€å‡å¼±. å› æ­¤æœ¬è¯¾ç¨‹ä¼šé¢‘ç¹ç”¨"),s("strong",[t._v("æˆæƒç è®¸å¯ç±»å‹")]),t._v("æ¥ä¸¾ä¾‹.")]),t._v(" "),s("h5",{attrs:{id:"_4-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€»ç»“"}},[t._v("#")]),t._v(" 4.æ€»ç»“")]),t._v(" "),s("p",[t._v("æ€»ç»“æ¥è¯´, éœ€è¦è®°ä½ä»¥ä¸‹è¿™ 3 ä¸ªå…³é”®ç‚¹:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("OAuth 2.0 çš„æ ¸å¿ƒæ˜¯æˆæƒè®¸å¯, æ›´è¿›ä¸€æ­¥è¯´å°±æ˜¯ä»¤ç‰Œæœºåˆ¶")]),t._v(". ä¹Ÿå°±æ˜¯è¯´, åƒå°å…”è½¯ä»¶è¿™æ ·çš„ç¬¬ä¸‰æ–¹è½¯ä»¶åªæœ‰æ‹¿åˆ°äº†äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°é¢å‘çš„è®¿é—®ä»¤ç‰Œ, ä¹Ÿå°±æ˜¯å¾—åˆ°äº†æˆæƒè®¸å¯, ç„¶åæ‰å¯ä»¥"),s("strong",[t._v("ä»£è¡¨")]),t._v("ç”¨æˆ·è®¿é—®ä»–ä»¬çš„æ•°æ®.")]),t._v(" "),s("li",[t._v("äº’è”ç½‘ä¸­æ‰€æœ‰çš„å—ä¿æŠ¤èµ„æº, å‡ ä¹éƒ½æ˜¯ä»¥ Web API çš„å½¢å¼æ¥æä¾›è®¿é—®çš„, æ¯”å¦‚ App è¦è·å–ç”¨æˆ·çš„å¤´åƒ, æ˜µç§°, å°å…”è½¯ä»¶è¦è·å–ç”¨æˆ·çš„åº—é“ºè®¢å•, å› æ­¤ OAuth 2.0 ä¸å®‰å…¨ç›¸å…³, æ˜¯ç”¨æ¥ä¿æŠ¤ Web API çš„. å¦å¤–, ç¬¬ä¸‰æ–¹è½¯ä»¶é€šè¿‡ OAuth 2.0 å–å¾—è®¿é—®æƒé™ä¹‹å, ç”¨æˆ·ä¾¿æŠŠè¿™äº›æƒé™"),s("strong",[t._v("å§”æ‰˜")]),t._v("ç»™äº†ç¬¬ä¸‰æ–¹è½¯ä»¶, å› æ­¤è¯´ OAuth 2.0 æ˜¯ä¸€ç§å§”æ‰˜åè®®, ä¹Ÿæ²¡é—®é¢˜.")]),t._v(" "),s("li",[t._v("ä¹Ÿæ­£å› ä¸ºåƒå°å…”è¿™æ ·çš„ç¬¬ä¸‰æ–¹è½¯ä»¶, æ¯æ¬¡éƒ½æ˜¯ç”¨è®¿é—®ä»¤ç‰Œè€Œä¸æ˜¯ç”¨æˆ·åå’Œå¯†ç æ¥è¯·æ±‚ç”¨æˆ·çš„æ•°æ®, æ‰å¤§å¤§å‡å°‘äº†å®‰å…¨é£é™©ä¸Šçš„æ”»å‡»é¢. ä¸ç„¶, å¦‚æœæ¯æ¬¡éƒ½å¸¦ç€ç”¨æˆ·åå’Œå¯†ç æ¥è®¿é—®æ•°é‡ä¼—å¤šçš„ Web API , æ˜¯ä¸æ˜¯å¢åŠ äº†è¿™ä¸ªæ”»å‡»é¢â€? å› æ­¤,  "),s("strong",[t._v("OAuth 2.0 çš„æ ¸å¿ƒ, å°±æ˜¯é¢å‘è®¿é—®ä»¤ç‰Œå’Œä½¿ç”¨è®¿é—®ä»¤ç‰Œ")]),t._v(".")])]),t._v(" "),s("h4",{attrs:{id:"æˆæƒç è®¸å¯ç±»å‹ä¸­-ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰æˆæƒç ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒç è®¸å¯ç±»å‹ä¸­-ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰æˆæƒç ğŸŒŸ"}},[t._v("#")]),t._v(" æˆæƒç è®¸å¯ç±»å‹ä¸­, ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰æˆæƒç ğŸŒŸ")]),t._v(" "),s("p",[t._v("å‰ä¸€è®²æåˆ°äº† OAuth 2.0 çš„æˆæƒç è®¸å¯ç±»å‹, åœ¨å°å…”æ‰“å•è½¯ä»¶çš„ä¾‹å­é‡Œé¢, å°å…”æœ€ç»ˆæ˜¯é€šè¿‡"),s("strong",[t._v("è®¿é—®ä»¤ç‰Œ")]),t._v("è¯·æ±‚åˆ°å°æ˜çš„åº—é“ºé‡Œçš„è®¢å•æ•°æ®. åŒæ—¶è¿˜æåˆ°äº†, è¿™ä¸ª"),s("strong",[t._v("è®¿é—®ä»¤ç‰Œæ˜¯é€šè¿‡æˆæƒç æ¢æ¥çš„")]),t._v(".")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œä¼°è®¡ä½ ä¼šé—®äº†, ä¸ºä»€ä¹ˆè¦ç”¨æˆæƒç æ¥æ¢ä»¤ç‰Œ? ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥é¢å‘è®¿é—®ä»¤ç‰Œå‘¢?")]),t._v(" "),s("h5",{attrs:{id:"_1-ä¸ºä»€ä¹ˆéœ€è¦æˆæƒç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸ºä»€ä¹ˆéœ€è¦æˆæƒç "}},[t._v("#")]),t._v(" 1.ä¸ºä»€ä¹ˆéœ€è¦æˆæƒç ")]),t._v(" "),s("p",[t._v("åœ¨ OAuth 2.0 çš„ä½“ç³»é‡Œé¢æœ‰ "),s("strong",[t._v("4 ç§è§’è‰²")]),t._v(", æŒ‰ç…§å®˜æ–¹çš„ç§°å‘¼å®ƒä»¬åˆ†åˆ«æ˜¯"),s("mark",[s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…, å®¢æˆ·ç«¯, æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æº")])]),t._v(". ä¸è¿‡, è¿™é‡Œçš„"),s("strong",[t._v("å®¢æˆ·ç«¯")]),t._v(", æˆ‘æ›´æ„¿æ„ç§°å…¶ä¸º"),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶")]),t._v(", è€Œä¸”æœ¬è¯¾ç¨‹ä¸­éƒ½æ˜¯ä»¥ç¬¬ä¸‰æ–¹è½¯ä»¶åœ¨ä¸¾ä¾‹å­. æ‰€ä»¥åç»­çš„è®²è§£ä¸­ä¼šç»Ÿä¸€æŠŠå®ƒç§°ä¸º"),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶")]),t._v(". æ‰€ä»¥åœ¨çœ‹å®˜æ–¹èµ„æ–™çš„æ—¶å€™, å¯ä»¥è‡ªå·±å¯¹åº”ä¸‹.")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯æ‹¿å°å…”è½¯ä»¶æ¥ä¸¾ä¾‹å­, å°†å®˜æ–¹çš„ç§°å‘¼è½¬æ¢ä¸€ä¸‹, å¯¹åº”å…³ç³»å°±æ˜¯:")]),t._v(" "),s("ul",[s("li",[s("mark",[s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…: å°æ˜")])])]),t._v(" "),s("li",[s("mark",[s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶: å°å…”è½¯ä»¶")])])]),t._v(" "),s("li",[s("mark",[s("strong",[t._v("æˆæƒæœåŠ¡: äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡")])])]),t._v(" "),s("li",[s("mark",[s("strong",[t._v("å—ä¿æŠ¤èµ„æº: å°æ˜åº—é“ºåœ¨äº¬ä¸œä¸Šé¢çš„è®¢å•")])])])]),t._v(" "),s("p",[s("strong",[t._v("OAuth è¯ç”Ÿä¹‹åˆå°±æ˜¯ä¸ºäº†è§£å†³ Web æµè§ˆå™¨åœºæ™¯ä¸‹çš„æˆæƒé—®é¢˜")]),t._v(", æ‰€ä»¥åŸºäºæµè§ˆå™¨çš„åœºæ™¯, åœ¨å‰é¢å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶æ‰“å°è®¢å•çš„æ•´ä½“æµç¨‹çš„åŸºç¡€ä¸Š, ç”»äº†ä¸€ä¸ª"),s("strong",[t._v("æˆæƒç è®¸å¯ç±»å‹")]),t._v("çš„åºåˆ—å›¾.")]),t._v(" "),s("p",[t._v("è¿™æ¬¡ä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°è¡¨è¿°æˆæƒç è®¸å¯æµç¨‹, è¿™é‡ŒæŠŠå°å…”è½¯ä»¶çš„å‰ç«¯å’Œåç«¯åˆ†å¼€å±•ç¤º, å¹¶æŠŠäº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„ç³»ç»ŸæŒ‰ç…§ OAuth 2.0 çš„ç»„ä»¶æ‹†åˆ†æˆäº†"),s("strong",[t._v("æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v(". å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/af72a19755be9dae945f63b9793b4610-20230729094013-3l00xls.png",alt:"",title:"ä»¥å°å…”è½¯ä»¶ä¸ºä¾‹, æˆæƒç è®¸å¯ç±»å‹çš„åºåˆ—å›¾"}})]),t._v(" "),s("p",[t._v("ä»å›¾ä¸­çœ‹åˆ°, åœ¨ç¬¬ 4 æ­¥"),s("strong",[t._v("æˆæƒæœåŠ¡ç”Ÿæˆäº†æˆæƒç  code")]),t._v(", æŒ‰ç…§ä¸€å¼€å§‹æå‡ºæ¥çš„é—®é¢˜, å¦‚æœä¸è¦æˆæƒç , è¿™ä¸€æ­¥å®é™…ä¸Šå°±å¯ä»¥ç›´æ¥è¿”å›è®¿é—®ä»¤ç‰Œ access_token äº†.")]),t._v(" "),s("p",[t._v("æŒ‰ç€è¿™ä¸ªæ²¡æœ‰æˆæƒç çš„æ€è·¯ç»§ç»­æƒ³, å¦‚æœè¿™é‡Œç›´æ¥è¿”å›è®¿é—®ä»¤ç‰Œ, é‚£è‚¯å®šä¸èƒ½ä½¿ç”¨é‡å®šå‘çš„æ–¹å¼. å› ä¸º"),s("strong",[t._v("è¿™æ ·ä¼šæŠŠå®‰å…¨ä¿å¯†æ€§è¦æ±‚æé«˜çš„è®¿é—®ä»¤ç‰Œæš´éœ²åœ¨æµè§ˆå™¨ä¸Š")]),t._v(", ä»è€Œå°†ä¼šé¢ä¸´è®¿é—®ä»¤ç‰Œå¤±çªƒçš„å®‰å…¨é£é™©. æ˜¾ç„¶è¿™æ˜¯ä¸èƒ½è¢«å…è®¸çš„.")]),t._v(" "),s("p",[t._v("ä¹Ÿå°±æ˜¯è¯´, "),s("strong",[t._v("å¦‚æœæ²¡æœ‰æˆæƒç çš„è¯, å°±åªèƒ½æŠŠè®¿é—®ä»¤ç‰Œå‘é€ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”çš„åç«¯æœåŠ¡")]),t._v(". æŒ‰ç…§è¿™æ ·çš„é€»è¾‘, ä¸Šé¢çš„æµç¨‹å›¾å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/11dbe0c38bb01e3af606c8a7f070054c-20230729094013-tq28m6a.png",alt:"",title:"å¦‚æœæ²¡æœ‰æˆæƒç , ç›´æ¥æŠŠè®¿é—®ä»¤ç‰Œå‘é€ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”çš„åç«¯æœåŠ¡"}})]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, çœ‹èµ·æ¥å¤©è¡£æ— ç¼. å°æ˜è®¿é—®å°å…”è½¯ä»¶, å°å…”è½¯ä»¶è¯´è¦æ‰“å•ä½ å¾—ç»™æˆ‘æˆæƒ, ä¸ç„¶äº¬ä¸œä¸å¹², ç„¶åå°å…”è½¯ä»¶å°±å¼•å¯¼å°æ˜è·³è½¬åˆ°äº†äº¬ä¸œçš„æˆæƒæœåŠ¡. åˆ°æˆæƒæœåŠ¡ä¹‹å, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°éªŒè¯äº†å°å…”çš„åˆæ³•æ€§ä»¥åŠå°æ˜çš„ç™»å½•çŠ¶æ€å, ç”Ÿæˆäº†æˆæƒé¡µé¢. ç´§æ¥ç€, å°æ˜èµ¶ç´§ç‚¹å‡»åŒæ„æˆæƒ, è¿™æ—¶å€™, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çŸ¥é“å¯ä»¥æŠŠå°æ˜çš„è®¢å•æ•°æ®ç»™å°å…”è½¯ä»¶.")]),t._v(" "),s("p",[t._v("äºæ˜¯, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°æ²¡å«ç³Š, èµ¶ç´§ç”Ÿæˆè®¿é—®ä»¤ç‰Œ access_token, å¹¶ä¸”é€šè¿‡åç«¯æœåŠ¡çš„æ–¹å¼è¿”å›ç»™äº†å°å…”è½¯ä»¶. è¿™æ—¶å€™, å°å…”è½¯ä»¶å°±èƒ½æ­£å¸¸å·¥ä½œäº†.")]),t._v(" "),s("p",[t._v("ä½†è¿™æ ·é—®é¢˜å°±æ¥äº†, ä»€ä¹ˆé—®é¢˜å‘¢?")]),t._v(" "),s("p",[s("mark",[s("strong",[t._v('å½“å°æ˜è¢«æµè§ˆå™¨é‡å®šå‘åˆ°æˆæƒæœåŠ¡ä¸Šä¹‹å, å°æ˜è·Ÿå°å…”è½¯ä»¶ä¹‹é—´çš„ "è¿æ¥" å°±æ–­äº†, ç›¸å½“äºæ­¤æ—¶æ­¤åˆ»å°æ˜è·ŸæˆæƒæœåŠ¡å»ºç«‹äº† "è¿æ¥" å, å°†ä¸€ç›´ "åœç•™åœ¨æˆæƒæœåŠ¡çš„é¡µé¢ä¸Š"')])]),t._v(' . å¯ä»¥**çœ‹åˆ°å›¾ 2 ä¸­é—®å·å¤„çš„æ—¶åºä¸Š, å°æ˜å†ä¹Ÿæ²¡æœ‰é‡æ–° "è¿æ¥" åˆ°å°å…”è½¯ä»¶. **')]),t._v(" "),s("p",[t._v("ä½†æ˜¯è¿™ä¸ªæ—¶å€™"),s("strong",[t._v("å°å…”è½¯ä»¶å·²ç»æ‹¿åˆ°äº†å°æ˜æˆæƒä¹‹åçš„è®¿é—®ä»¤ç‰Œ, ä¹Ÿä½¿ç”¨è®¿é—®ä»¤ç‰Œè·å–åˆ°äº†å°æ˜åº—é“ºé‡Œçš„è®¢å•æ•°æ®")]),t._v('. è¿™æ—¶, è€ƒè™‘"å°æ˜çš„æ„Ÿå—", å°å…”è½¯ä»¶åº”è¯¥è¦'),s("strong",[t._v("é€šçŸ¥")]),t._v('åˆ°å°æ˜, ä½†æ˜¯å¦‚ä½•åšå‘¢? ç°åœ¨"è¿æ¥æ–­äº†", è¿™äº‹å„¿ææ€•å°±æ²¡é‚£ä¹ˆå®¹æ˜“äº†.')]),t._v(" "),s("p",[t._v("æ‰€ä»¥ä¸ºäº†è®©å°å…”è½¯ä»¶èƒ½å¾ˆå®¹æ˜“åœ°é€šçŸ¥åˆ°å°æ˜, "),s("strong",[t._v('è¿˜å¿…é¡»è®©å°æ˜è·Ÿå°å…”è½¯ä»¶é‡æ–°å»ºç«‹èµ· "è¿æ¥"')]),t._v(" . è¿™å°±æ˜¯å‰é¢çœ‹åˆ°çš„ç¬¬äºŒæ¬¡é‡å®šå‘, "),s("mark",[s("strong",[t._v("å°æ˜æˆæƒä¹‹å, åˆé‡æ–°é‡å®šå‘å›åˆ°äº†å°å…”è½¯ä»¶çš„åœ°å€")])]),t._v("ä¸Š, è¿™æ ·"),s("strong",[t._v('å°æ˜å°±è·Ÿå°å…”è½¯ä»¶æœ‰äº†æ–°çš„ "è¿æ¥"')]),t._v(" .")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, å°±èƒ½ç†è§£åœ¨æˆæƒç è®¸å¯çš„æµç¨‹ä¸­, ä¸ºä»€ä¹ˆéœ€è¦ä¸¤æ¬¡é‡å®šå‘äº†å§.")]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("ä¸ºäº†é‡æ–°å»ºç«‹èµ·è¿™æ ·çš„ä¸€æ¬¡è¿æ¥, åˆä¸èƒ½è®©è®¿é—®ä»¤ç‰Œæš´éœ²å‡ºå», å°±æœ‰äº†è¿™æ ·ä¸€ä¸ªä¸´æ—¶çš„, é—´æ¥çš„å‡­è¯: æˆæƒç ")])]),t._v(". å› ä¸ºå°å…”è½¯ä»¶æœ€ç»ˆè¦æ‹¿åˆ°çš„æ˜¯å®‰å…¨ä¿å¯†æ€§è¦æ±‚æé«˜çš„è®¿é—®ä»¤ç‰Œ, å¹¶ä¸æ˜¯æˆæƒç , è€Œ"),s("mark",[s("strong",[t._v("æˆæƒç æ˜¯å¯ä»¥æš´éœ²åœ¨æµè§ˆå™¨ä¸Šé¢çš„")])]),t._v('. è¿™æ ·æœ‰äº†æˆæƒç çš„å‚ä¸, è®¿é—®ä»¤ç‰Œå¯ä»¥åœ¨åç«¯æœåŠ¡ä¹‹é—´ä¼ è¾“, åŒæ—¶è¿˜å¯ä»¥é‡æ–°å»ºç«‹å°æ˜ä¸å°å…”è½¯ä»¶ä¹‹é—´çš„"è¿æ¥". è¿™æ ·é€šè¿‡ä¸€ä¸ªæˆæƒç , æ—¢ç…§é¡¾åˆ°äº†å°æ˜çš„ä½“éªŒ, åˆç…§é¡¾äº†é€šä¿¡çš„å®‰å…¨.')]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦æœ‰æˆæƒç çš„åŸå› .")]),t._v(" "),s("p",[t._v("é‚£åœ¨æ‰§è¡Œæˆæƒç æµç¨‹çš„æ—¶å€™, æˆæƒç å’Œè®¿é—®ä»¤ç‰Œåœ¨å°å…”è½¯ä»¶å’ŒæˆæƒæœåŠ¡ä¹‹é—´åˆ°åº•æ˜¯æ€ä¹ˆæµè½¬çš„å‘¢? è¦å›ç­”è¿™ä¸ªé—®é¢˜, å°±éœ€è¦ç»§ç»­åˆ†æä¸€ä¸‹"),s("strong",[t._v("æˆæƒç è®¸å¯ç±»å‹çš„é€šä¿¡è¿‡ç¨‹")]),t._v("äº†.")]),t._v(" "),s("h5",{attrs:{id:"_2-æˆæƒç è®¸å¯ç±»å‹çš„é€šä¿¡è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æˆæƒç è®¸å¯ç±»å‹çš„é€šä¿¡è¿‡ç¨‹"}},[t._v("#")]),t._v(" 2.æˆæƒç è®¸å¯ç±»å‹çš„é€šä¿¡è¿‡ç¨‹")]),t._v(" "),s("p",[t._v("å‰é¢çš„é€šä¿¡è¿‡ç¨‹ä¸­æ ‡è¯†å‡ºæ¥çš„æ­¥éª¤å°±æœ‰ 9 ä¸ª, ä¸€æ­¥æ­¥åœ°å»åˆ†æçœ‹ä¼¼ä¼šå¾ˆå¤æ‚, æ‰€ä»¥è¿™é‡Œç”¨å¦ä¸€ä¸ªç»´åº¦æ¥åˆ†æä»¥ä¾¿äºç†è§£, ä¹Ÿå°±æ˜¯"),s("strong",[t._v("ä»ç›´æ¥é€šä¿¡å’Œé—´æ¥é€šä¿¡")]),t._v("çš„ç»´åº¦æ¥åˆ†æ. "),s("mark",[s("strong",[t._v("è¿™é‡Œæ‰€è°“çš„é—´æ¥é€šä¿¡å°±æ˜¯æŒ‡è·å–æˆæƒç çš„äº¤äº’, è€Œç›´æ¥é€šä¿¡å°±æ˜¯æŒ‡é€šè¿‡æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œçš„äº¤äº’")])]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å°±ä¸€èµ·åˆ†æä¸‹, çœ‹çœ‹å“ªäº›æ˜¯é—´æ¥é€šä¿¡, å“ªäº›æ˜¯ç›´æ¥é€šä¿¡.")]),t._v(" "),s("h6",{attrs:{id:"_1-é—´æ¥é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é—´æ¥é€šä¿¡"}},[t._v("#")]),t._v(" (1)é—´æ¥é€šä¿¡")]),t._v(" "),s("p",[t._v('å…ˆåˆ†æä¸‹ä¸ºä»€ä¹ˆæ˜¯"é—´æ¥".')]),t._v(" "),s("p",[t._v("æŠŠå›¾ 1 ä¸­è·å–æˆæƒç  code çš„æµç¨‹ç»†åŒ–, å¹¶æ¢ä¸ªè§’åº¦æ¥çœ‹ä¸€çœ‹, ä¹Ÿå°±æ˜¯å°†"),s("strong",[t._v("æµè§ˆå™¨")]),t._v("è¿™ä¸ªä»£ç†æ”¾åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”å’ŒæˆæƒæœåŠ¡ä¸­é—´. äºæ˜¯æœ‰ä¸‹é¢è¿™å¼ æµç¨‹å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/81c35e80d035b0e93018b56fe91da41b-20230729094013-b7wb9uq.png",alt:"",title:"è·å–æˆæƒç çš„äº¤äº’è¿‡ç¨‹"}})]),t._v(" "),s("p",[t._v("è¿™ä¸ªè¿‡ç¨‹, ä»¿ä½›æœ‰è¿™æ ·çš„ä¸€æ®µå¯¹è¯.")]),t._v(" "),s("ul",[s("li",[t._v("å°æ˜: ä½ å¥½, å°å…”è½¯ä»¶, æˆ‘è¦è®¿é—®ä½ äº†.")]),t._v(" "),s("li",[t._v("å°å…”è½¯ä»¶: å¥½çš„, æˆ‘æŠŠä½ å¼•åˆ°æˆæƒæœåŠ¡é‚£é‡Œ, æˆ‘éœ€è¦æˆæƒæœåŠ¡ç»™æˆ‘ä¸€ä¸ªæˆæƒç .")]),t._v(" "),s("li",[t._v("æˆæƒæœåŠ¡: å°å…”è½¯ä»¶, "),s("strong",[t._v("æˆ‘æŠŠæˆæƒç å‘ç»™æµè§ˆå™¨äº†")]),t._v(".")]),t._v(" "),s("li",[t._v("å°å…”è½¯ä»¶: å¥½çš„, æˆ‘ä»æµè§ˆå™¨æ‹¿åˆ°äº†æˆæƒç .")])]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°, ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”å’ŒæˆæƒæœåŠ¡ä¹‹é—´, å¹¶æ²¡æœ‰å‘ç”Ÿç›´æ¥çš„é€šä¿¡, è€Œæ˜¯"),s("strong",[t._v('é€šè¿‡æµè§ˆå™¨è¿™ä¸ª"ä¸­é—´äºº" æ¥ "æ­çº¿" çš„')]),t._v(". å› æ­¤, å¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªé—´æ¥é€šä¿¡çš„æ–¹å¼.")]),t._v(" "),s("h6",{attrs:{id:"_2-ç›´æ¥é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç›´æ¥é€šä¿¡"}},[t._v("#")]),t._v(" (2)ç›´æ¥é€šä¿¡")]),t._v(" "),s("p",[t._v('å†åˆ†æä¸‹, æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œçš„äº¤äº’, ä¸ºä»€ä¹ˆæ˜¯"ç›´æ¥"çš„. å†æŠŠå‰é¢å›¾ä¸­è·å–è®¿é—®ä»¤ç‰Œçš„æµç¨‹ç»†åŒ–, å°±å¾—åˆ°äº†ä¸‹é¢çš„å›¾ç¤º:')]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/15fc1bbe4c69630141be2a5d0394b7a6-20230729094013-yyyuukz.png",alt:"",title:"æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œçš„äº¤äº’è¿‡ç¨‹"}})]),t._v(" "),s("p",[t._v("ç›¸æ¯”è·å–æˆæƒç è¿‡ç¨‹çš„é—´æ¥é€šä¿¡, è·å–è®¿é—®ä»¤ç‰Œçš„ç›´æ¥é€šä¿¡å°±æ¯”è¾ƒå®¹æ˜“ç†è§£äº†, å°±æ˜¯"),s("mark",[s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”è·å–åˆ°æˆæƒç  code å€¼å, å‘æˆæƒæœåŠ¡å‘èµ·è·å–è®¿é—®ä»¤ç‰Œ access_token çš„é€šä¿¡è¯·æ±‚. è¿™ä¸ªè¯·æ±‚æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶æœåŠ¡å™¨è·ŸæˆæƒæœåŠ¡çš„æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡, éƒ½æ˜¯åœ¨åç«¯æœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”, å› æ­¤ä¹Ÿå«ä½œåç«¯é€šä¿¡")])]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_3-ä¸¤ä¸ª-ä¸€ä¼™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸¤ä¸ª-ä¸€ä¼™"}},[t._v("#")]),t._v(' (3)ä¸¤ä¸ª"ä¸€ä¼™"')]),t._v(" "),s("p",[t._v('äº†è§£äº†ä¸Šé¢çš„é€šä¿¡æ–¹å¼ä¹‹å, å¯ä»¥çœ‹åˆ° OAuth 2.0 ä¸­çš„ 4 ä¸ªè§’è‰²æ˜¯ "ä¸¤ä¸¤ç«™é˜Ÿ" çš„: '),s("mark",[s("strong",[t._v('èµ„æºæ‹¥æœ‰è€…å’Œç¬¬ä¸‰æ–¹è½¯ä»¶"ç«™åœ¨ä¸€èµ·", å› ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶è¦ä»£è¡¨èµ„æºæ‹¥æœ‰è€…å»è®¿é—®å—ä¿æŠ¤èµ„æº; æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æº"ç«™åœ¨ä¸€èµ·", å› ä¸ºæˆæƒæœåŠ¡è´Ÿè´£é¢å‘è®¿é—®ä»¤ç‰Œ, å—ä¿æŠ¤èµ„æºè´Ÿè´£æ¥æ”¶å¹¶éªŒè¯è®¿é—®ä»¤ç‰Œ')])]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/ff47ce9c357c6b5259cfc893fba9b7c4-20230729094013-9sszdik.png",alt:"",title:'OAuth 2.0 ä¸­çš„4ä¸ªè§’è‰²æ˜¯"ä¸¤ä¸¤ç«™é˜Ÿ"'}})]),t._v(" "),s("h5",{attrs:{id:"_3-ä¸€å®šè¦æœ‰æµè§ˆå™¨å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸€å®šè¦æœ‰æµè§ˆå™¨å—"}},[t._v("#")]),t._v(" 3.ä¸€å®šè¦æœ‰æµè§ˆå™¨å—?")]),t._v(" "),s("p",[t._v("å‰é¢ä»‹ç»æˆæƒç æµç¨‹çš„æ—¶å€™éƒ½æ˜¯ä»¥æµè§ˆå™¨å‚ä¸çš„åœºæ™¯æ¥è®²çš„, é‚£ä¹ˆæµè§ˆå™¨ä¸€å®šè¦å‚ä¸åˆ°è¿™ä¸ªæµç¨‹ä¸­å—? å…¶å®, "),s("strong",[t._v("æˆæƒç è®¸å¯æµç¨‹, ä¸ä¸€å®šè¦æœ‰æµè§ˆå™¨çš„å‚ä¸")]),t._v(". æ¥ä¸‹æ¥å°±ç»§ç»­åˆ†æä¸‹å…¶ä¸­çš„é€»è¾‘.")]),t._v(" "),s("p",[t._v('OAuth 2.0 å‘å±•ä¹‹åˆ, å¼€æ”¾ç”Ÿæ€ç¯å¢ƒç›¸å¯¹å•è–„, ä»¥æµè§ˆå™¨ä¸ºä»£ç†çš„ Web åº”ç”¨å±…å¤š, æˆæƒç è®¸å¯ç±»å‹ "ç†æ‰€å½“ç„¶" åœ°è¢«åº”ç”¨åˆ°äº†é€šè¿‡æµè§ˆå™¨æ‰èƒ½è®¿é—®çš„ Web åº”ç”¨ä¸­.')]),t._v(" "),s("p",[t._v("ä½†å®é™…ä¸Š, "),s("mark",[s("strong",[t._v("OAuth 2.0 æ˜¯ä¸€ä¸ªæˆæƒç†å¿µ, æˆ–è€…è¯´æ˜¯ä¸€ç§æˆæƒæ€ç»´")])]),t._v(". å®ƒçš„æˆæƒç æ¨¡å¼çš„æ€ç»´å¯ä»¥ç§»æ¤åˆ°å¾ˆå¤šåœºæ™¯ä¸­, æ¯”å¦‚å¾®ä¿¡å°ç¨‹åº. åœ¨å¼€å‘å¾®ä¿¡å°ç¨‹åºåº”ç”¨æ—¶, é€šè¿‡æˆæƒç æ¨¡å¼è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯, å®˜æ–¹æ–‡æ¡£çš„åœ°å€ç¤ºä¾‹ä¸­ç»™å‡ºçš„ "),s("strong",[t._v("grant_type=authorization_code")]),t._v(", å°±"),s("strong",[t._v("æ²¡æœ‰")]),t._v("ç”¨åˆ°æµè§ˆå™¨.")]),t._v(" "),s("p",[t._v("æ ¹æ®å¾®ä¿¡å®˜æ–¹æ–‡æ¡£æè¿°, "),s("strong",[t._v("å¼€å‘è€…è·å–ç”¨æˆ·ç™»å½•æ€ä¿¡æ¯çš„è¿‡ç¨‹æ­£æ˜¯ä¸€ä¸ªæˆæƒç çš„è®¸å¯æµç¨‹")]),t._v(":")]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆ, å¼€å‘è€…é€šè¿‡ wx.login(Object object) æ–¹æ³•"),s("strong",[t._v("è·å–åˆ°ç™»å½•å‡­è¯ code å€¼")]),t._v(", è¿™ä¸€æ­¥çš„æµç¨‹æ˜¯åœ¨"),s("strong",[t._v("å°ç¨‹åºå†…éƒ¨é€šè¿‡è°ƒç”¨å¾®ä¿¡æä¾›çš„ SDK å®ç°")]),t._v(";")]),t._v(" "),s("li",[t._v("ç„¶å, "),s("strong",[t._v("å†é€šè¿‡è¯¥ code å€¼æ¢å–ç”¨æˆ·çš„ session_key ç­‰ä¿¡æ¯")]),t._v(", ä¹Ÿå°±æ˜¯å®˜æ–¹æ–‡æ¡£çš„ auth.code2Session() æ–¹æ³•, åŒæ—¶"),s("strong",[t._v("è¯¥æ–¹æ³•ä¹Ÿæ˜¯è¢«å¼ºçƒˆå»ºè®®é€šè¿‡å¼€å‘è€…çš„åç«¯æœåŠ¡æ¥è°ƒç”¨")]),t._v("çš„.")])]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°, "),s("strong",[t._v("è¿™ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°æµè§ˆå™¨, ä½†ç¡®å®æŒ‰ç…§æˆæƒç è®¸å¯çš„æ€æƒ³èµ°äº†ä¸€ä¸ªå®Œæ•´çš„æˆæƒç è®¸å¯æµç¨‹")]),t._v(". ä¹Ÿå°±æ˜¯è¯´, "),s("mark",[s("strong",[t._v("å…ˆé€šè¿‡å°ç¨‹åºå‰ç«¯è·å–åˆ° code å€¼, å†é€šè¿‡å°ç¨‹åºçš„åç«¯æœåŠ¡ä½¿ç”¨ code å€¼æ¢å– session_key ç­‰ä¿¡æ¯, åªä¸è¿‡æ˜¯è®¿é—®ä»¤ç‰Œ access_token çš„å€¼è¢«æ¢æˆäº† session_key")])]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("GET https://api.weixin.qq.com/sns/jscode2session?appid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("APPID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("secret")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SECRET"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("js_code")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("JSCODE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("grant_type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("authorization_code\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿™æ•´ä¸ªè¿‡ç¨‹ä½“ç°çš„å°±æ˜¯æˆæƒç è®¸å¯æµç¨‹çš„æ€æƒ³.")]),t._v(" "),s("h5",{attrs:{id:"_4-æ€»ç»“-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€»ç»“-2"}},[t._v("#")]),t._v(" 4.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚ä»ä¸ºä»€ä¹ˆéœ€è¦æˆæƒç è¿™ä¸ªé—®é¢˜å¼€å§‹è®²èµ·, å¹¶é€šè¿‡æˆæƒç æŠŠæˆæƒç è®¸å¯æµç¨‹æ•´ä½“çš„é€šä¿¡è¿‡ç¨‹ä¸²äº†ä¸€é, æåˆ°äº†æˆæƒç è¿™ç§æ–¹å¼è§£å†³çš„é—®é¢˜, ä¹Ÿæåˆ°äº†æˆæƒç æµç¨‹çš„é€šä¿¡æ–¹å¼. éœ€è¦ä½ è®°ä½ä»¥ä¸‹ä¸¤ç‚¹.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æˆæƒç è®¸å¯æµç¨‹æœ‰ä¸¤ç§é€šä¿¡æ–¹å¼")]),t._v(". ä¸€ç§æ˜¯å‰ç«¯é€šä¿¡, å› ä¸ºå®ƒé€šè¿‡æµè§ˆå™¨ä¿ƒæˆäº†æˆæƒç çš„äº¤äº’æµç¨‹, æ¯”å¦‚äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡ç”Ÿæˆæˆæƒç å‘é€åˆ°æµè§ˆå™¨, ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”ä»æµè§ˆå™¨è·å–æˆæƒç . "),s("strong",[t._v("æ­£å› ä¸ºè·å–æˆæƒç çš„æ—¶å€™å°å…”è½¯ä»¶å’ŒæˆæƒæœåŠ¡å¹¶æ²¡æœ‰å‘ç”Ÿç›´æ¥çš„è”ç³», ä¹Ÿå«åšé—´æ¥é€šä¿¡")]),t._v(". å¦å¤–ä¸€ç§æ˜¯åç«¯é€šä¿¡, åœ¨å°å…”è½¯ä»¶è·å–åˆ°æˆæƒç ä¹‹å, "),s("strong",[t._v("åœ¨åç«¯æœåŠ¡ç›´æ¥å‘èµ·æ¢å–è®¿é—®ä»¤ç‰Œçš„è¯·æ±‚, ä¹Ÿå«åšç›´æ¥é€šä¿¡.")])]),t._v(" "),s("li",[t._v("åœ¨ OAuth 2.0 ä¸­, "),s("strong",[t._v("è®¿é—®ä»¤ç‰Œè¢«è¦æ±‚æœ‰æé«˜çš„å®‰å…¨ä¿å¯†æ€§")]),t._v(", å› æ­¤ä¸èƒ½è®©å®ƒæš´éœ²åœ¨æµè§ˆå™¨ä¸Šé¢, åªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹è½¯ä»¶(æ¯”å¦‚å°å…”)çš„åç«¯æœåŠ¡æ¥è·å–å’Œä½¿ç”¨, ä»¥æœ€å¤§é™åº¦åœ°ä¿éšœè®¿é—®ä»¤ç‰Œçš„å®‰å…¨æ€§. æ­£å› ä¸ºè®¿é—®ä»¤ç‰Œçš„è¿™ç§å®‰å…¨è¦æ±‚ç‰¹æ€§, å½“éœ€è¦å‰ç«¯é€šä¿¡, æ¯”å¦‚æµè§ˆå™¨ä¸Šé¢çš„æµè½¬çš„æ—¶å€™, OAuth 2.0 æ‰åˆæä¾›äº†ä¸€ä¸ª"),s("mark",[s("strong",[t._v("ä¸´æ—¶çš„å‡­è¯: æˆæƒç ")])]),t._v(". "),s("strong",[t._v("é€šè¿‡æˆæƒç çš„æ–¹å¼, å¯ä»¥è®©ç”¨æˆ·å°æ˜åœ¨æˆæƒæœåŠ¡ä¸Šç»™å°å…”æˆæƒä¹‹å, è¿˜èƒ½é‡æ–°å›åˆ°å°å…”çš„æ“ä½œé¡µé¢ä¸Š")]),t._v(". è¿™æ ·åœ¨ä¿éšœå®‰å…¨æ€§çš„æƒ…å†µä¸‹, æå‡äº†å°æ˜åœ¨å°å…”ä¸Šçš„ä½“éªŒ.")])]),t._v(" "),s("p",[t._v("ä»æˆæƒç è®¸å¯æµç¨‹ä¸­å°±å¯ä»¥çœ‹å‡ºæ¥, å®ƒå®Œç¾åœ°å°† OAuth 2.0 çš„ 4 ä¸ªè§’è‰²ç»„ç»‡äº†èµ·æ¥, å¹¶ä¿è¯äº†å®ƒä»¬ä¹‹é—´çš„é¡ºç•…é€šä¿¡. "),s("mark",[s("strong",[t._v("å®ƒæå‡ºçš„è¿™ç§ç»“æ„å’Œæ€æƒ³éƒ½å¯ä»¥è¢«è¿ç§»åˆ°å…¶ä»–ç¯å¢ƒæˆ–è€…åè®®ä¸Š, æ¯”å¦‚åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨æˆæƒç è®¸å¯")])]),t._v("â€‹ **. **")]),t._v(" "),s("p",[t._v("ä¸è¿‡, ä¹Ÿæ­£æ˜¯å› ä¸ºæœ‰äº†æˆæƒç çš„å‚ä¸, æ‰ä½¿å¾—æˆæƒç è®¸å¯è¦æ¯”å…¶ä»–æˆæƒè®¸å¯ç±»å‹, åœ¨æˆæƒçš„æµç¨‹ä¸Šå¤šå‡ºäº†å¥½å¤šæ­¥éª¤, "),s("mark",[s("strong",[t._v("è®©æˆæƒç è®¸å¯ç±»å‹æˆä¸ºäº† OAuth 2.0 ä½“ç³»ä¸­è¿„ä»Šæµç¨‹æœ€å®Œå¤‡, å®‰å…¨æ€§æœ€é«˜çš„æˆæƒæµç¨‹")])]),t._v(". åœ¨æ¥ä¸‹æ¥çš„ä¸¤è®²è¿˜ä¼šé‡ç‚¹è®²è§£æˆæƒç è®¸å¯ç±»å‹ä¸‹çš„æˆæƒæœåŠ¡.")]),t._v(" "),s("h4",{attrs:{id:"æˆæƒæœåŠ¡-æˆæƒç å’Œè®¿é—®ä»¤ç‰Œçš„é¢å‘æµç¨‹æ˜¯æ€æ ·çš„-ğŸŒŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒæœåŠ¡-æˆæƒç å’Œè®¿é—®ä»¤ç‰Œçš„é¢å‘æµç¨‹æ˜¯æ€æ ·çš„-ğŸŒŸ"}},[t._v("#")]),t._v(" æˆæƒæœåŠ¡-æˆæƒç å’Œè®¿é—®ä»¤ç‰Œçš„é¢å‘æµç¨‹æ˜¯æ€æ ·çš„?ğŸŒŸ")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥çš„ä¸‰è®²ä¼šç€é‡è®²è§£å…³äº"),s("strong",[t._v("æˆæƒæœåŠ¡çš„å·¥ä½œæµç¨‹")]),t._v(", æˆæƒè¿‡ç¨‹ä¸­çš„ä»¤ç‰Œ, ä»¥åŠå¦‚ä½•æ¥å…¥ OAuth 2.0. è¿™æ ·ä¸€æ¥å°±å¯ä»¥åƒé€æˆæƒç è®¸å¯è¿™ä¸€æœ€ç»å…¸, æœ€å®Œå¤‡, æœ€å¸¸ç”¨çš„æˆæƒæµç¨‹äº†, ä»¥åå†å¤„ç†æˆæƒç›¸å…³çš„é€»è¾‘å°±æ›´å¾—å¿ƒåº”æ‰‹äº†.")]),t._v(" "),s("p",[t._v('åœ¨ä»‹ç»æˆæƒç è®¸å¯ç±»å‹æ—¶, æåˆ°äº†å¾ˆå¤šæ¬¡ "æˆæƒæœåŠ¡". ä¸€å¥è¯æ¦‚æ‹¬, '),s("mark",[s("strong",[t._v("æˆæƒæœåŠ¡å°±æ˜¯è´Ÿè´£é¢å‘è®¿é—®ä»¤ç‰Œçš„æœåŠ¡. æ›´è¿›ä¸€æ­¥åœ°è®², OAuth 2.0 çš„æ ¸å¿ƒæ˜¯æˆæƒæœåŠ¡, è€ŒæˆæƒæœåŠ¡çš„æ ¸å¿ƒå°±æ˜¯ä»¤ç‰Œ")])]),t._v(".")]),t._v(" "),s("p",[t._v('ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢? å½“ç¬¬ä¸‰æ–¹è½¯ä»¶æ¯”å¦‚å°å…”, è¦æƒ³è·å–å°æ˜åœ¨äº¬ä¸œåº—é“ºçš„è®¢å•, å°±å¿…é¡»å…ˆä»äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡é‚£é‡Œè·å–è®¿é—®ä»¤ç‰Œ, è¿›è€Œé€šè¿‡è®¿é—®ä»¤ç‰Œæ¥ "'),s("strong",[t._v("ä»£è¡¨")]),t._v('" å°æ˜å»è¯·æ±‚å°æ˜çš„è®¢å•æ•°æ®. è¿™ä¸æ°æ°å°±æ˜¯æ•´ä¸ª OAuth 2.0 æˆæƒä½“ç³»çš„æ ¸å¿ƒå—?')]),t._v(" "),s("p",[t._v("é‚£ä¹ˆ, "),s("strong",[t._v("æˆæƒæœåŠ¡åˆ°åº•æ˜¯æ€ä¹ˆç”Ÿæˆè®¿é—®ä»¤ç‰Œ")]),t._v("çš„, è¿™å…¶ä¸­åŒ…å«äº†å“ªäº›æ“ä½œå‘¢? è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯, è®¿é—®ä»¤ç‰Œè¿‡æœŸäº†è€Œç”¨æˆ·åˆä¸åœ¨åœºçš„æƒ…å†µä¸‹, åˆ"),s("strong",[t._v("å¦‚ä½•é‡æ–°ç”Ÿæˆè®¿é—®ä»¤ç‰Œ")]),t._v("å‘¢?")]),t._v(" "),s("p",[t._v("å¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜, å°±ä»¥æˆæƒç è®¸å¯ç±»å‹ä¸ºä¾‹, ä¸€èµ·æ·±å…¥æ¢ç´¢ä¸‹æˆæƒæœåŠ¡è¿™ä¸ªæ ¸å¿ƒç»„ä»¶å§.")]),t._v(" "),s("h5",{attrs:{id:"_1-æˆæƒæœåŠ¡çš„å·¥ä½œè¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æˆæƒæœåŠ¡çš„å·¥ä½œè¿‡ç¨‹"}},[t._v("#")]),t._v(" 1.æˆæƒæœåŠ¡çš„å·¥ä½œè¿‡ç¨‹")]),t._v(" "),s("p",[t._v("å¼€å§‹ä¹‹å‰å…ˆå›æƒ³ä¸‹å°æ˜ç»™å°å…”è½¯ä»¶æˆæƒè®¢å•æ•°æ®çš„æ•´ä¸ªæµç¨‹.")]),t._v(" "),s("p",[t._v('å°å…”è½¯ä»¶å…ˆè¦è®©å°æ˜å»äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°é‚£é‡Œç»™å®ƒæˆæƒæ•°æ®, é‚£è¿™é‡Œæ˜¯ä¸æ˜¯ä½ è§‰å¾—å¾ˆå¥‡æ€ª? ä½ æ€»ä¸èƒ½è¯´, "å˜¿, äº¬ä¸œ, ä½ æŠŠæ•°æ®ç»™å°å…”ç”¨å§", é‚£äº¬ä¸œè‚¯å®šä¼šå›å¤è¯´, "å°æ˜, å°å…”æ˜¯è°å•Š, æ²¡åœ¨å’±å®¶å¤‡è¿‡æ¡ˆ, æˆ‘ä¸èƒ½ç»™ä»–, ä¸‡ä¸€æ˜¯éª—å­å‘¢?", æ‰€ä»¥æˆæƒçš„'),s("strong",[t._v("ç¬¬ä¸€æ­¥å¾—ç¡®ä¿è¢«æˆæƒçš„ç¬¬ä¸‰æ–¹æ˜¯åˆæ³•çš„")]),t._v(".")]),t._v(" "),s("p",[s("mark",[s("strong",[t._v('æ‰€ä»¥, æˆæƒè¿™ä¸ªå¤§åŠ¨ä½œçš„å‰æ, è‚¯å®šæ˜¯å°å…”è¦å»å¼€æ”¾å¹³å°é‚£é‡Œ"å¤‡æ¡ˆ", ä¹Ÿå°±æ˜¯æ³¨å†Œ. æ³¨å†Œå®Œå, äº¬ä¸œæ‰çŸ¥é“å°å…”æ˜¯è°. äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°å°±ä¼šç»™å°å…”è½¯ä»¶ app_id å’Œ app_secret ç­‰ä¿¡æ¯, ä»¥æ–¹ä¾¿åé¢æˆæƒæ—¶çš„å„ç§èº«ä»½æ ¡éªŒ.')])])]),t._v(" "),s("p",[t._v("åŒæ—¶, æ³¨å†Œçš„æ—¶å€™, "),s("mark",[s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶ä¹Ÿä¼šè¯·æ±‚å—ä¿æŠ¤èµ„æºçš„å¯è®¿é—®èŒƒå›´")])]),t._v(". æ¯”å¦‚, å°å…”èƒ½å¦è·å–å°æ˜åº—é“º 3 ä¸ªæœˆä»¥å‰çš„è®¢å•, èƒ½å¦è·å–æ¯æ¡è®¢å•çš„æ‰€æœ‰å­—æ®µä¿¡æ¯ç­‰ç­‰. "),s("mark",[s("strong",[t._v("è¿™ä¸ªæƒé™èŒƒå›´, å°±æ˜¯ scope")])]),t._v(". åé¢è¿˜ä¼šè¯¦ç»†è®²è¿°èŒƒå›´æ§åˆ¶.")]),t._v(" "),s("p",[t._v("å…³äºæ³¨å†Œåçš„æ•°æ®å­˜å‚¨, ä½¿ç”¨å¦‚ä¸‹ Java ä»£ç æ¥æ¨¡æ‹Ÿ:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ¨¡æ‹Ÿç¬¬ä¸‰æ–¹è½¯ä»¶æ³¨å†Œä¹‹åçš„æ•°æ®åº“å­˜å‚¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" appMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nappMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPID_RABBIT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nappMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRET_RABBIT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nappMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_uri"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080/AppServlet-ch03"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nappMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scope"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nickname address pic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("å¤‡å®Œæ¡ˆä¹‹å, æ¥ç€ç»§ç»­å‰è¿›. å°æ˜è¿‡æ¥è®©å¹³å°æŠŠä»–çš„è®¢å•æ•°æ®ç»™å°å…”, å¹³å°å’”å’”ä¸€æŸ¥, å¯¹äº†ä¸‹æš—å·, "),s("strong",[t._v("å‘ç°å°å…”æ˜¯åˆæ³•çš„")]),t._v(", äºæ˜¯å°±è¦æ¨è¿›ä¸‹ä¸€æ­¥äº†.")]),t._v(" "),s("p",[t._v("å‰é¢è®²è¿‡, åœ¨æˆæƒç è®¸å¯ç±»å‹ä¸­, "),s("mark",[s("strong",[t._v("æˆæƒæœåŠ¡çš„å·¥ä½œ, å¯ä»¥åˆ’åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†, ä¸€ä¸ªæ˜¯é¢å‘æˆæƒç  code, ä¸€ä¸ªæ˜¯é¢å‘è®¿é—®ä»¤ç‰Œ access_token")])]),t._v(". ä¸ºäº†æ›´èƒ½è¡¨è¾¾æˆæƒç å’Œè®¿é—®ä»¤ç‰Œçš„å­˜åœ¨, è¿™é‡Œåœ¨å›¾ä¸­ç”¨æ·±è‰²å°†å…¶æ ‡æ³¨äº†å‡ºæ¥:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/35d4f9a24a9243bc22b912b5a9890987-20230729094013-5o25q4a.png",alt:""}})]),t._v(" "),s("p",[t._v("å…ˆçœ‹çœ‹é¢å‘æˆæƒç  code çš„æµç¨‹.")]),t._v(" "),s("h6",{attrs:{id:"_1-è¿‡ç¨‹ä¸€-é¢å‘æˆæƒç code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¿‡ç¨‹ä¸€-é¢å‘æˆæƒç code"}},[t._v("#")]),t._v(" (1)è¿‡ç¨‹ä¸€:é¢å‘æˆæƒç code")]),t._v(" "),s("p",[t._v("åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, æˆæƒæœåŠ¡éœ€è¦å®Œæˆä¸¤éƒ¨åˆ†å·¥ä½œ, åˆ†åˆ«æ˜¯"),s("strong",[t._v("å‡†å¤‡å·¥ä½œ")]),t._v("å’Œ"),s("strong",[t._v("ç”Ÿæˆæˆæƒç  code")]),t._v(".")]),t._v(" "),s("p",[t._v('è¿™ä¸ª"å‡†å¤‡"éƒ½åŒ…æ‹¬å“ªäº›å·¥ä½œ? å¯ä»¥æƒ³åˆ°, å°æ˜åœ¨ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”æ‰“å•è½¯ä»¶è¿›è¡Œæˆæƒçš„æ—¶å€™, ä¼šçœ‹åˆ°'),s("strong",[t._v("æˆæƒé¡µé¢ä¸Šæœ‰ä¸€ä¸ªæˆæƒæŒ‰é’®, ä½†æ˜¯æˆæƒæœåŠ¡åœ¨å°æ˜çœ‹åˆ°è¿™ä¸ªæˆæƒæŒ‰é’®ä¹‹å‰, å®é™…ä¸Šå·²ç»åšäº†ä¸€ç³»åˆ—åŠ¨ä½œ")]),t._v(".")]),t._v(" "),s("p",[t._v("è¿™äº›åŠ¨ä½œ, å°±æ˜¯"),s("strong",[t._v("æ‰€è°“çš„")]),t._v("â€‹"),s("mark",[s("strong",[t._v("å‡†å¤‡å·¥ä½œ, åŒ…æ‹¬éªŒè¯åŸºæœ¬ä¿¡æ¯, éªŒè¯æƒé™èŒƒå›´(ç¬¬ä¸€æ¬¡)å’Œç”Ÿæˆæˆæƒè¯·æ±‚é¡µé¢")])]),t._v("è¿™ä¸‰æ­¥. ä¸‹é¢å…·ä½“åˆ†æä¸‹.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬ä¸€æ­¥, éªŒè¯åŸºæœ¬ä¿¡æ¯.")])]),t._v(" "),s("p",[t._v("**éªŒè¯åŸºæœ¬ä¿¡æ¯, åŒ…æ‹¬å¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”åˆæ³•æ€§å’Œå›è°ƒåœ°å€åˆæ³•æ€§çš„æ ¡éªŒ. **")]),t._v(" "),s("p",[t._v("åœ¨ Web æµè§ˆå™¨ç¯å¢ƒä¸‹, é¢å‘ code çš„æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹, éƒ½æ˜¯"),s("strong",[t._v("æµè§ˆå™¨é€šè¿‡å‰ç«¯é€šä¿¡æ¥å®Œæˆ")]),t._v(", è¿™å°±æ„å‘³ç€æ‰€æœ‰ä¿¡æ¯éƒ½æœ‰è¢«å†’å……çš„é£é™©. å› æ­¤, "),s("strong",[t._v("æˆæƒæœåŠ¡å¿…é¡»å¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å­˜åœ¨æ€§åšåˆ¤æ–­")]),t._v(".")]),t._v(" "),s("p",[t._v("åŒæ ·, "),s("strong",[t._v("å›è°ƒåœ°å€ä¹Ÿæ˜¯å¯ä»¥è¢«ä¼ªé€ ")]),t._v("çš„. æ¯”å¦‚, ä¸æ³•åˆ†å­å°†å…¶ä¼ªè£…æˆé’“é±¼é¡µé¢, æˆ–è€…æ˜¯å¸¦æœ‰æ¶æ„æ”»å‡»æ€§çš„è½¯ä»¶ä¸‹è½½é¡µé¢. å› æ­¤ä»å®‰å…¨ä¸Šè€ƒè™‘, "),s("strong",[t._v("æˆæƒæœåŠ¡éœ€è¦å¯¹å›è°ƒåœ°å€åšåŸºæœ¬çš„æ ¡éªŒ")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("appMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_uri"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›è°ƒåœ°å€ä¸å­˜åœ¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("åœ¨æˆæƒæœåŠ¡çš„ç¨‹åºä¸­, è¿™ä¸¤æ­¥éªŒè¯é€šè¿‡å, å°±ä¼šç”Ÿæˆæˆ–è€…å“åº”ä¸€ä¸ªé¡µé¢("),s("strong",[t._v("å±äºæˆæƒæœåŠ¡å™¨ä¸Šçš„é¡µé¢")]),t._v("), ä»¥æç¤ºå°æ˜è¿›è¡Œæˆæƒ.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬äºŒæ­¥, éªŒè¯æƒé™èŒƒå›´(ç¬¬ä¸€æ¬¡).")])]),t._v(" "),s("p",[t._v("æ—¢ç„¶æ˜¯"),s("strong",[t._v("æˆæƒ, å°±ä¼šæ¶‰åŠèŒƒå›´")]),t._v(". æ¯”å¦‚, ä½¿ç”¨å¾®ä¿¡ç™»å½•ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æ—¶å€™, ä¼šçœ‹åˆ°å¾®ä¿¡æç¤ºæˆ‘ä»¬, ç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥è·å¾—ä½ çš„æ˜µç§°, å¤´åƒ, æ€§åˆ«, åœ°ç†ä½ç½®ç­‰. å¦‚æœä¸æƒ³è®©ç¬¬ä¸‰æ–¹è½¯ä»¶è·å–ä½ çš„æŸä¸ªä¿¡æ¯, é‚£ä¹ˆå¯ä»¥ä¸é€‰æ‹©è¿™ä¸€é¡¹. åŒæ ·åœ¨å°å…”ä¸­ä¹Ÿæ˜¯ä¸€æ ·, å½“å°æ˜ä¸ºå°å…”è¿›è¡Œæˆæƒçš„æ—¶å€™, ä¹Ÿå¯ä»¥é€‰æ‹©ç»™å°å…”çš„"),s("strong",[t._v("æƒé™èŒƒå›´")]),t._v(", æ¯”å¦‚æ˜¯å¦æˆäºˆå°å…”è·å– 3 ä¸ªæœˆä»¥å‰çš„è®¢å•çš„è®¿é—®æƒé™.")]),t._v(" "),s("p",[t._v("è¿™å°±æ„å‘³ç€, éœ€è¦å¯¹å°å…”ä¼ è¿‡æ¥çš„ "),s("strong",[t._v("scope å‚æ•°, ä¸å°å…”æ³¨å†Œæ—¶ç”³è¯·çš„æƒé™èŒƒå›´åšæ¯”å¯¹")]),t._v(". å¦‚æœè¯·æ±‚è¿‡æ¥çš„æƒé™èŒƒå›´å¤§äºæ³¨å†Œæ—¶çš„èŒƒå›´, å°±éœ€è¦ä½œå‡ºè¶Šæƒæç¤º. **è®°ä½, æ­¤åˆ»æ˜¯ç¬¬ä¸€æ¬¡æƒé™æ ¡éªŒ. **")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" scope "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scope"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkScope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¶…å‡ºæ³¨å†Œçš„æƒé™èŒƒå›´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬ä¸‰æ­¥, ç”Ÿæˆæˆæƒè¯·æ±‚é¡µé¢.")])]),t._v(" "),s("p",[t._v("è¿™ä¸ªæˆæƒè¯·æ±‚é¡µé¢å°±æ˜¯"),s("mark",[s("strong",[t._v("æˆæƒæœåŠ¡")])]),t._v("â€‹"),s("mark",[t._v("ä¸Šçš„é¡µé¢")]),t._v(", è¿™é‡Œå¯ä»¥"),s("mark",[s("strong",[t._v("ç†è§£ä¸ºé‡å®šå‘åˆ°äº†æˆæƒæœåŠ¡å®˜æ–¹çš„æˆæƒé¡µé¢, æ¯”å¦‚æ˜¯è·³è½¬åˆ°äº†äº¬ä¸œæˆæƒæœåŠ¡çš„é¡µé¢, æ³¨æ„è¿™ä¸ªé¡µé¢é€šå¸¸éœ€è¦æå‰ç™»å½•äº¬ä¸œè´¦å·, ä¸ç„¶ä¼šè¦æ±‚å…ˆç™»å½•")])]),t._v(". å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/8fc31128f7f7884e25f7e54920fdd3af-20230729094013-fn8j5f5.png",alt:""}})]),t._v(" "),s("p",[t._v("é¡µé¢ä¸Šæ˜¾ç¤ºäº†å°å…”æ³¨å†Œæ—¶ç”³è¯·çš„ today, history ä¸¤ç§æƒé™, å°æ˜å¯ä»¥é€‰æ‹©ç¼©å°è¿™ä¸ªæƒé™èŒƒå›´, æ¯”å¦‚ä»…æˆäºˆè·å– today ä¿¡æ¯çš„æƒé™.")]),t._v(" "),s("p",[t._v('è‡³æ­¤, é¢å‘æˆæƒç  code çš„å‡†å¤‡å·¥ä½œå°±å®Œæˆäº†. éœ€è¦æ³¨æ„è¿™é‡Œä¸€ç›´å¼ºè°ƒè¯´è¿™ä¹Ÿæ˜¯å‡†å¤‡å·¥ä½œ, å› ä¸ºå½“ç”¨æˆ·ç‚¹å‡»æˆæƒæŒ‰é’® "approve" å, æ‰ä¼š'),s("strong",[t._v("ç”Ÿæˆæˆæƒç  code å€¼å’Œè®¿é—®ä»¤ç‰Œ acces_token å€¼")]),t._v(', "ä¸€åˆ‡æ‰çœŸæ­£å¼€å§‹".')]),t._v(" "),s("p",[t._v("è¿™é‡Œéœ€è¦è¯´æ˜ä¸‹: åœ¨ä¸Šé¢çš„å‡†å¤‡è¿‡ç¨‹ä¸­, "),s("mark",[s("strong",[t._v("å¿½ç•¥äº†å°æ˜ç™»å½•çš„è¿‡ç¨‹, ä½†åªæœ‰ç”¨æˆ·ç™»å½•äº†æ‰å¯ä»¥å¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶è¿›è¡Œæˆæƒ, æˆæƒæœåŠ¡æ‰èƒ½å¤Ÿè·å¾—ç”¨æˆ·ä¿¡æ¯å¹¶æœ€ç»ˆç”Ÿæˆ code å’Œ app_id(ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åº”ç”¨æ ‡è¯†) + user(èµ„æºæ‹¥æœ‰è€…æ ‡è¯†)ä¹‹é—´çš„å¯¹åº”å…³ç³»")])]),t._v(".")]),t._v(" "),s("p",[t._v('å°æ˜ç‚¹å‡» "approve" æŒ‰é’®ä¹‹å, ç”Ÿæˆæˆæƒç  code çš„æµç¨‹å°±æ­£å¼å¼€å§‹äº†, ä¸»è¦åŒ…æ‹¬'),s("mark",[s("strong",[t._v("éªŒè¯æƒé™èŒƒå›´(ç¬¬äºŒæ¬¡), å¤„ç†æˆæƒè¯·æ±‚ç”Ÿæˆæˆæƒç  code å’Œé‡å®šå‘è‡³ç¬¬ä¸‰æ–¹è½¯ä»¶è¿™ä¸‰å¤§æ­¥")])]),t._v(". æ¥ä¸‹æ¥, ä¸€èµ·åˆ†æä¸‹è¿™ä¸‰æ­¥.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬å››æ­¥, éªŒè¯æƒé™èŒƒå›´(ç¬¬äºŒæ¬¡).")])]),t._v(" "),s("p",[t._v("åœ¨æ­¥éª¤äºŒä¸­, ç”Ÿæˆæˆæƒé¡µé¢ä¹‹å‰æˆæƒæœåŠ¡è¿›è¡Œçš„ç¬¬ä¸€æ¬¡æ ¡éªŒ, æ˜¯å¯¹æ¯”å°å…”è¯·æ±‚è¿‡æ¥çš„æƒé™èŒƒå›´ scope å’Œæ³¨å†Œæ—¶çš„æƒé™åšçš„æ¯”å¯¹. è¿™é‡Œçš„ç¬¬äºŒæ¬¡éªŒè¯æƒé™èŒƒå›´, "),s("strong",[t._v("æ˜¯ç”¨å°æ˜è¿›è¡Œæˆæƒä¹‹åçš„æƒé™, å†æ¬¡ä¸å°å…”è½¯ä»¶æ³¨å†Œçš„æƒé™åšæ ¡éªŒ")]),t._v(".")]),t._v(" "),s("p",[t._v("é‚£è¿™é‡Œä¸ºä»€ä¹ˆåˆè¦æ ¡éªŒä¸€æ¬¡å‘¢? å› ä¸ºè¿™ç›¸å½“äºä¸€æ¬¡ç”¨æˆ·çš„"),s("strong",[t._v("è¾“å…¥æƒé™")]),t._v(". å°æ˜é€‰æ‹©äº†ä¸€å®šçš„æƒé™èŒƒå›´ç»™åˆ°æˆæƒæœåŠ¡, å¯¹äºæƒé™çš„æ ¡éªŒè¦é‡è§†å¯¹å¾…, å‡¡æ˜¯è¾“å…¥æ€§æ•°æ®éƒ½ä¼šæ¶‰åŠåˆ°åˆæ³•æ€§æ£€æŸ¥. å¦å¤–, è¿™ä¹Ÿæ˜¯è¦æ±‚å…»æˆä¸€ç§"),s("strong",[t._v("åœ¨æœåŠ¡ç«¯å¯¹è¾“å…¥æ•°æ®çš„è¯·æ±‚, éƒ½å°½å¯èƒ½åšä¸€æ¬¡åˆæ³•æ€§æ ¡éªŒçš„å¥½ä¹ æƒ¯")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" rscope "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameterValues")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rscope"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkScope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rscope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¶…å‡ºæ³¨å†Œçš„æƒé™èŒƒå›´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬äº”æ­¥, å¤„ç†æˆæƒè¯·æ±‚, ç”Ÿæˆæˆæƒç  code.")])]),t._v(" "),s("p",[t._v("å½“å°æ˜åŒæ„æˆæƒä¹‹å, "),s("strong",[t._v("æˆæƒæœåŠ¡ä¼šæ ¡éªŒå“åº”ç±»å‹ response_type çš„å€¼")]),t._v(". "),s("strong",[t._v("response_type æœ‰ code å’Œ token ä¸¤ç§ç±»å‹çš„å€¼")]),t._v(". åœ¨è¿™é‡Œ, æ˜¯ç”¨æˆæƒç æµç¨‹æ¥ä¸¾ä¾‹çš„, å› æ­¤ä»£ç è¦éªŒè¯ response_type çš„å€¼æ˜¯å¦ä¸º code.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" responseType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"response_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responseType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("mark",[s("strong",[t._v("åœ¨æˆæƒæœåŠ¡ä¸­, éœ€è¦å°†ç”Ÿæˆçš„æˆæƒç  code å€¼ä¸ app_id, user è¿›è¡Œå…³ç³»æ˜ å°„")])]),t._v(". ä¹Ÿå°±æ˜¯è¯´, ä¸€ä¸ªæˆæƒç  code, è¡¨ç¤ºæŸä¸€ä¸ªç”¨æˆ·ç»™æŸä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶è¿›è¡Œæˆæƒ, æ¯”å¦‚å°æ˜ç»™å°å…”è½¯ä»¶è¿›è¡Œçš„æˆæƒ. "),s("mark",[s("strong",[t._v("åŒæ—¶éœ€è¦å°† code å€¼å’Œè¿™ç§æ˜ å°„å…³ç³»ä¿å­˜èµ·æ¥, ä»¥ä¾¿åœ¨ç”Ÿæˆè®¿é—®ä»¤ç‰Œ access_token æ—¶ä½¿ç”¨")])]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿç™»å½•ç”¨æˆ·ä¸ºUSERTEST")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" strb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    codeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("åœ¨ç”Ÿæˆäº†æˆæƒç  code ä¹‹å, ä¹ŸæŒ‰ç…§ä¸Šé¢æ‰€è¿°ç»‘å®šäº†å“åº”çš„æ˜ å°„å…³ç³». ä¹‹å‰è®²åˆ°"),s("strong",[t._v("æˆæƒç æ˜¯ä¸´æ—¶çš„ä¸€æ¬¡æ€§å‡­è¯")]),t._v(". å› æ­¤, è¿˜éœ€è¦ä¸º code è®¾ç½®ä¸€ä¸ª"),s("strong",[t._v("æœ‰æ•ˆæœŸ")]),t._v(".")]),t._v(" "),s("p",[t._v("OAuth 2.0 è§„èŒƒå»ºè®®æˆæƒç  code å€¼æœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿ, å¹¶ä¸”"),s("mark",[s("strong",[t._v("ä¸€ä¸ªæˆæƒç  code åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡")])]),t._v(". ä¸è¿‡æ ¹æ®ç»éªŒå‘¢, åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ code çš„æœ‰æ•ˆæœŸä¸€èˆ¬ä¸ä¼šè¶…è¿‡ 5 åˆ†é’Ÿ. å…³äºæˆæƒç  code ç›¸å…³çš„å®‰å…¨æ–¹é¢çš„å†…å®¹, åé¢è¿˜ä¼šè¯¦ç»†è®²è¿°.")]),t._v(" "),s("p",[t._v("åŒæ—¶, æˆæƒæœåŠ¡è¿˜éœ€è¦"),s("strong",[t._v("å°†ç”Ÿæˆçš„æˆæƒç  code è·Ÿå·²ç»æˆæƒçš„æƒé™èŒƒå›´ rscope è¿›è¡Œç»‘å®šå¹¶å­˜å‚¨")]),t._v(", ä»¥ä¾¿åç»­é¢å‘è®¿é—®ä»¤ç‰Œæ—¶, èƒ½å¤Ÿé€šè¿‡ code å€¼å–å‡ºæˆæƒèŒƒå›´å¹¶ä¸è®¿é—®ä»¤ç‰Œç»‘å®š. å› ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶æœ€ç»ˆæ˜¯é€šè¿‡è®¿é—®ä»¤ç‰Œæ¥è¯·æ±‚å—ä¿æŠ¤èµ„æºçš„.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" codeScopeMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆæƒèŒƒå›´ä¸æˆæƒç åšç»‘å®š")]),t._v("\ncodeScopeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rscope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬å…­æ­¥, é‡å®šå‘è‡³ç¬¬ä¸‰æ–¹è½¯ä»¶.")])]),t._v(" "),s("p",[s("strong",[t._v("ç”Ÿæˆæˆæƒç  code å€¼ä¹‹å, æˆæƒæœåŠ¡éœ€è¦å°†è¯¥ code å€¼å‘ŠçŸ¥ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”")]),t._v(". å‰é¢æåˆ°, é¢å‘æˆæƒç  code æ˜¯é€šè¿‡"),s("strong",[t._v("å‰ç«¯é€šä¿¡")]),t._v("å®Œæˆçš„, å› æ­¤è¿™é‡Œé‡‡ç”¨"),s("strong",[t._v("é‡å®šå‘")]),t._v("çš„æ–¹å¼. è¿™ä¸€æ­¥çš„é‡å®šå‘, ä¹Ÿæ˜¯ä¸Šä¸€èŠ‚æåˆ°çš„"),s("strong",[t._v("ç¬¬äºŒæ¬¡é‡å®šå‘")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å›è°ƒåœ°å€, å¹¶é‡å®šå‘åˆ°è¯¥åœ°å€")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" toAppUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLParamsUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆæƒç æµç¨‹çš„ç¬¬äºŒæ¬¡é‡å®šå‘")]),t._v("\nresponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRedirect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toAppUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("åˆ°æ­¤, "),s("strong",[t._v("é¢å‘æˆæƒç  code çš„æµç¨‹å…¨éƒ¨å®Œæˆ")]),t._v(". å½“å°å…”è·å–åˆ°æˆæƒç  code å€¼ä»¥å, å°±å¯ä»¥å¼€å§‹è¯·æ±‚è®¿é—®ä»¤ç‰Œ access_token çš„å€¼äº†, ä¹Ÿå°±æ˜¯å³å°†å¼€å§‹çš„è¿‡ç¨‹äºŒ.")]),t._v(" "),s("h6",{attrs:{id:"_2-è¿‡ç¨‹äºŒ-é¢å‘è®¿é—®ä»¤ç‰Œaccess-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¿‡ç¨‹äºŒ-é¢å‘è®¿é—®ä»¤ç‰Œaccess-token"}},[t._v("#")]),t._v(" (2)è¿‡ç¨‹äºŒ: é¢å‘è®¿é—®ä»¤ç‰Œaccess_token")]),t._v(" "),s("p",[t._v("å‰é¢åœ¨è¿‡ç¨‹ä¸€ä¸­ä»‹ç»äº†æˆæƒç  code çš„ç”Ÿæˆæµç¨‹, ä½†å°å…”æœ€ç»ˆæ˜¯è¦è·å–åˆ°è®¿é—®ä»¤ç‰Œ access_token, æ‰å¯ä»¥å»è¯·æ±‚å—ä¿æŠ¤èµ„æº. è€Œ"),s("strong",[t._v("æˆæƒç åªæ˜¯ä¸€ä¸ªæ¢å–è®¿é—®ä»¤ç‰Œ access_token çš„ä¸´æ—¶å‡­è¯")]),t._v(".")]),t._v(" "),s("p",[t._v("å½“å°å…”æ‹¿ç€æˆæƒç  code æ¥è¯·æ±‚çš„æ—¶å€™, æˆæƒæœåŠ¡éœ€è¦ä¸ºä¹‹ç”Ÿæˆæœ€ç»ˆçš„è¯·æ±‚è®¿é—®ä»¤ç‰Œ. "),s("mark",[s("strong",[t._v("è¿™ä¸ªè¿‡ç¨‹ä¸»è¦åŒ…æ‹¬éªŒè¯ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”æ˜¯å¦å­˜åœ¨, éªŒè¯ code å€¼æ˜¯å¦åˆæ³•å’Œç”Ÿæˆ access_token å€¼è¿™ä¸‰å¤§æ­¥")])]),t._v(". æ¥ä¸‹æ¥ä¸€èµ·åˆ†æä¸‹æ¯ä¸€æ­¥.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬ä¸€æ­¥, éªŒè¯ç¬¬ä¸‰æ–¹è½¯ä»¶æ˜¯å¦å­˜åœ¨.")])]),t._v(" "),s("p",[t._v("æ­¤æ—¶, æ¥æ”¶åˆ°çš„ grant_type çš„ç±»å‹ä¸º "),s("strong",[t._v("authorization_code")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" grantType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grant_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization_code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grantType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("ç”±äºé¢å‘è®¿é—®ä»¤ç‰Œæ˜¯é€šè¿‡"),s("strong",[t._v("åç«¯é€šä¿¡")]),t._v("å®Œæˆçš„, æ‰€ä»¥è¿™é‡Œé™¤äº†è¦"),s("strong",[t._v("æ ¡éªŒ app_id å¤–, è¿˜è¦æ ¡éªŒ app_secret")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("appMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app_idä¸å­˜åœ¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("appMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app_secretä¸åˆæ³•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬äºŒæ­¥, éªŒè¯æˆæƒç  code å€¼æ˜¯å¦åˆæ³•.")])]),t._v(" "),s("p",[t._v("æˆæƒæœåŠ¡åœ¨é¢å‘æˆæƒç  code çš„é˜¶æ®µå·²ç»å°† "),s("strong",[t._v("code å€¼å­˜å‚¨")]),t._v("äº†èµ·æ¥, æ­¤æ—¶å¯¹æ¯”ä» request ä¸­æ¥æ”¶åˆ°çš„ code å€¼å’Œä»å­˜å‚¨ä¸­å–å‡ºæ¥çš„ code å€¼. æœ¬ç¤ºä¾‹ä¸­, code å€¼å¯¹åº”çš„ key æ˜¯ app_id å’Œ user çš„ç»„åˆå€¼.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éªŒè¯codeå€¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isExistCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// codeä¸å­˜åœ¨")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆæƒç ä¸€æ—¦è¢«ä½¿ç”¨, é¡»ç«‹å³ä½œåºŸ")]),t._v("\ncodeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("è¿™é‡Œä¸€å®šè¦è®°ä½, "),s("mark",[s("strong",[t._v("ç¡®è®¤è¿‡æˆæƒç  code å€¼æœ‰æ•ˆä»¥å, åº”è¯¥ç«‹åˆ»ä»å­˜å‚¨ä¸­åˆ é™¤å½“å‰çš„ code å€¼")])]),t._v(", ä»¥é˜²æ­¢ç¬¬ä¸‰æ–¹è½¯ä»¶æ¶æ„ä½¿ç”¨ä¸€ä¸ªå¤±çªƒçš„æˆæƒç  code å€¼æ¥è¯·æ±‚æˆæƒæœåŠ¡.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬ä¸‰æ­¥, ç”Ÿæˆè®¿é—®ä»¤ç‰Œ access_token å€¼.")])]),t._v(" "),s("p",[t._v("å…³äºæŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥ç”Ÿæˆè®¿é—®ä»¤ç‰Œ access_token çš„å€¼, OAuth 2.0 è§„èŒƒä¸­å¹¶æ²¡æœ‰æ˜ç¡®è§„å®š, ä½†å¿…é¡»ç¬¦åˆä¸‰ä¸ªåŸåˆ™: "),s("mark",[s("strong",[t._v("å”¯ä¸€æ€§, ä¸è¿ç»­æ€§, ä¸å¯çŒœæ€§")])]),t._v(". æœ¬ç¤ºä¾‹æ˜¯ä½¿ç”¨ UUID æ¥ä½œä¸º access_token çš„.")]),t._v(" "),s("p",[t._v("å’Œæˆæƒç  code å€¼ä¸€æ ·, "),s("strong",[t._v("éœ€è¦å°†è®¿é—®ä»¤ç‰Œ access_token å€¼å­˜å‚¨èµ·æ¥, å¹¶å°†å…¶ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åº”ç”¨æ ‡è¯† app_id å’Œèµ„æºæ‹¥æœ‰è€…æ ‡è¯† user è¿›è¡Œå…³ç³»æ˜ å°„")]),t._v(". ä¹Ÿå°±æ˜¯è¯´, "),s("mark",[s("strong",[t._v("ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ access_token è¡¨ç¤ºæŸä¸€ä¸ªç”¨æˆ·ç»™æŸä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶è¿›è¡Œæˆæƒ")])]),t._v(".")]),t._v(" "),s("p",[t._v("åŒæ—¶, "),s("mark",[s("strong",[t._v("æˆæƒæœåŠ¡è¿˜éœ€è¦å°†æˆæƒèŒƒå›´è·Ÿè®¿é—®ä»¤ç‰Œ access_token åšç»‘å®š")])]),t._v(". æœ€å, è¿˜éœ€è¦ä¸ºè¯¥è®¿é—®ä»¤ç‰Œè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ expires_in, æ¯”å¦‚ 1 å¤©.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" tokenScopeMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆè®¿é—®ä»¤ç‰Œaccess_tokençš„å€¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆæƒèŒƒå›´ä¸è®¿é—®ä»¤ç‰Œç»‘å®š")]),t._v("\ntokenScopeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("codeScopeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆè®¿é—®ä»¤ç‰Œçš„æ–¹æ³•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" expires_in "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1å¤©æ—¶é—´è¿‡æœŸ")]),t._v("\n    tokenMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" expires_in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("æ­£å› ä¸º OAuth 2.0 è§„èŒƒæ²¡æœ‰çº¦æŸè®¿é—®ä»¤ç‰Œå†…å®¹çš„ç”Ÿæˆè§„åˆ™, æ‰€ä»¥æœ‰æ›´é«˜çš„è‡ªç”±åº¦. æ—¢å¯ä»¥åƒ Demo ä¸­é‚£æ ·ç”Ÿæˆä¸€ä¸ª UUID å½¢å¼çš„æ•°æ®å­˜å‚¨èµ·æ¥, è®©æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æºå…±äº«è¯¥æ•°æ®; ä¹Ÿå¯ä»¥å°†ä¸€äº›å¿…è¦çš„ä¿¡æ¯é€šè¿‡ç»“æ„åŒ–çš„å¤„ç†æ”¾å…¥ä»¤ç‰Œæœ¬èº«. "),s("mark",[s("strong",[t._v("å°†åŒ…å«äº†ä¸€äº›ä¿¡æ¯çš„ä»¤ç‰Œ, ç§°ä¸ºç»“æ„åŒ–ä»¤ç‰Œ, ç®€ç§° JWT")])]),t._v(".")]),t._v(" "),s("p",[t._v("è‡³æ­¤, æˆæƒç è®¸å¯ç±»å‹ä¸‹æˆæƒæœåŠ¡çš„ä¸¤å¤§ä¸»è¦è¿‡ç¨‹, ä¹Ÿå°±æ˜¯"),s("strong",[t._v("é¢å‘æˆæƒç å’Œé¢å‘è®¿é—®ä»¤ç‰Œ")]),t._v("çš„æµç¨‹, å°±è®²å®Œäº†.")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥, åœ¨é˜…è¯»åˆ«äººçš„æˆæƒæµç¨‹ä»£ç , æˆ–è€…æ˜¯ä½¿ç”¨è¯¸å¦‚é€šè¿‡å¾®ä¿¡ç™»å½•çš„ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æ—¶å€™, å°±ä¼šæ˜ç™½èƒŒåçš„åŸç†äº†. åŒæ—¶, åœ¨è‡ªå·±æ­å»ºä¸€ä¸ªæˆæƒæœåŠ¡æµç¨‹æ—¶, ä¹Ÿä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹. "),s("strong",[t._v("è¿™ä¸€åˆ‡çš„åŸå› , éƒ½åœ¨äºé¢å‘æˆæƒç å’Œé¢å‘è®¿é—®ä»¤ç‰Œ, å°±æ˜¯æˆæƒæœåŠ¡çš„æ ¸å¿ƒ")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_2-åˆ·æ–°ä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-åˆ·æ–°ä»¤ç‰Œ"}},[t._v("#")]),t._v(" 2.åˆ·æ–°ä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, åº”è¯¥è¿˜ä¼šæ³¨æ„åˆ°ä¸€ä¸ªé—®é¢˜, åœ¨ç”Ÿæˆè®¿é—®ä»¤ç‰Œçš„æ—¶å€™, è¿˜ç»™å®ƒé™„åŠ äº†ä¸€ä¸ªè¿‡æœŸæ—¶é—´ expires_in, è¿™æ„å‘³ç€è®¿é—®ä»¤ç‰Œä¼šåœ¨ä¸€å®šçš„æ—¶é—´åå¤±æ•ˆ. "),s("strong",[t._v("è®¿é—®ä»¤ç‰Œå¤±æ•ˆ, å°±æ„å‘³ç€èµ„æºæ‹¥æœ‰è€…ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æˆæƒå¤±æ•ˆäº†")]),t._v(", ç¬¬ä¸‰æ–¹è½¯ä»¶æ— æ³•ç»§ç»­è®¿é—®èµ„æºæ‹¥æœ‰è€…çš„å—ä¿æŠ¤èµ„æºäº†.")]),t._v(" "),s("p",[t._v("è¿™æ—¶, å¦‚æœè¿˜æƒ³ç»§ç»­ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶, å°±åªèƒ½"),s("strong",[t._v("é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®")]),t._v(", æ¯”å¦‚å°æ˜ç»™å°å…”è½¯ä»¶æˆæƒä»¥å, æ­£åœ¨æ„‰å¿«åœ°å¤„ç†ä»–åº—é“ºçš„è®¢å•æ•°æ®, ç»“æœæ²¡è¿‡å¤šä¹…, çªç„¶é—´å°å…”è½¯ä»¶å†æ¬¡è®©å°æ˜è¿›è¡Œæˆæƒ. æ­¤åˆ», å¯ä»¥æ›¿å°æ˜æ„Ÿå—ä¸€ä¸‹ä»–çš„å¿ƒæƒ….")]),t._v(" "),s("p",[t._v("æ˜¾ç„¶, è¿™æ ·çš„ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•. ä¸ºæ­¤, "),s("strong",[t._v("OAuth 2.0 ä¸­å¼•å…¥äº†åˆ·æ–°ä»¤ç‰Œçš„æ¦‚å¿µ, ä¹Ÿå°±æ˜¯åˆ·æ–°è®¿é—®ä»¤ç‰Œ access_token çš„å€¼")]),t._v(". è¿™å°±æ„å‘³ç€, æœ‰äº†åˆ·æ–°ä»¤ç‰Œ, ç”¨æˆ·åœ¨ä¸€å®šæœŸé™å†…æ— éœ€é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®, å°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶.")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥çœ‹çœ‹åˆ·æ–°ä»¤ç‰Œçš„å·¥ä½œåŸç†.")]),t._v(" "),s("p",[s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œä¹Ÿæ˜¯ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶ä½¿ç”¨")]),t._v("çš„, åŒæ ·éœ€è¦éµå¾ª"),s("strong",[t._v("å…ˆé¢å‘å†ä½¿ç”¨")]),t._v("çš„åŸåˆ™. å› æ­¤è¿˜æ˜¯ä»"),s("strong",[t._v("é¢å‘å’Œä½¿ç”¨ä¸¤ä¸ªç¯èŠ‚")]),t._v("æ¥å­¦ä¹ åˆ·æ–°ä»¤ç‰Œ. ä¸è¿‡, è¿™ä¸ªé¢å‘å’Œä½¿ç”¨æµç¨‹å’Œè®¿é—®ä»¤ç‰Œæœ‰äº›æ˜¯ç›¸åŒçš„, è¿™é‡Œåªè®²è¿°å…¶ä¸­çš„åŒºåˆ«.")]),t._v(" "),s("h6",{attrs:{id:"_1-é¢å‘åˆ·æ–°ä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¢å‘åˆ·æ–°ä»¤ç‰Œ"}},[t._v("#")]),t._v(" (1)é¢å‘åˆ·æ–°ä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("ä¸‹é¢çœ‹çœ‹åˆ·æ–°ä»¤ç‰Œæ˜¯å¦‚ä½•é¢å‘çš„.")]),t._v(" "),s("p",[t._v("å…¶å®, "),s("strong",[t._v("é¢å‘åˆ·æ–°ä»¤ç‰Œå’Œé¢å‘è®¿é—®ä»¤ç‰Œæ˜¯ä¸€èµ·å®ç°çš„")]),t._v(", éƒ½æ˜¯åœ¨è¿‡ç¨‹äºŒçš„æ­¥éª¤ä¸‰ç”Ÿæˆè®¿é—®ä»¤ç‰Œ access_token ä¸­ç”Ÿæˆçš„. ä¹Ÿå°±æ˜¯è¯´, "),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶å¾—åˆ°ä¸€ä¸ªè®¿é—®ä»¤ç‰Œçš„åŒæ—¶, ä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œ")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" refreshTokenMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆåˆ·æ–°ä»¤ç‰Œrefresh_tokençš„å€¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" refreshToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateRefreshToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateRefreshToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" refreshToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    refreshTokenMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refreshToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" refreshToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[s("strong",[t._v("ä¸ºä»€ä¹ˆè¦ä¸€èµ·ç”Ÿæˆè®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œå‘¢?")])]),t._v(" "),s("p",[t._v("å…¶å®, è¿™å°±å›åˆ°äº†åˆ·æ–°ä»¤ç‰Œçš„ä½œç”¨ä¸Šäº†. åˆ·æ–°ä»¤ç‰Œå­˜åœ¨çš„åˆè¡·æ˜¯, åœ¨è®¿é—®ä»¤ç‰Œå¤±æ•ˆçš„æƒ…å†µä¸‹, ä¸ºäº†ä¸è®©ç”¨æˆ·é¢‘ç¹æ‰‹åŠ¨æˆæƒ, ç”¨æ¥é€šè¿‡ç³»ç»Ÿé‡æ–°è¯·æ±‚"),s("strong",[t._v("ç”Ÿæˆä¸€ä¸ªæ–°çš„è®¿é—®ä»¤ç‰Œ")]),t._v(". é‚£ä¹ˆ, "),s("mark",[s("strong",[t._v('å¦‚æœè®¿é—®ä»¤ç‰Œå¤±æ•ˆäº†, è€Œ"èº«è¾¹"åˆæ²¡æœ‰ä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œå¯ç”¨, å²‚ä¸æ˜¯åˆè¦éº»çƒ¦ç”¨æˆ·è¿›è¡Œæ‰‹åŠ¨æˆæƒäº†. æ‰€ä»¥, å®ƒå¿…é¡»å¾—å’Œè®¿é—®ä»¤ç‰Œä¸€èµ·ç”Ÿæˆ')])]),t._v(".")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, å°±è§£å†³äº†åˆ·æ–°ä»¤ç‰Œçš„"),s("strong",[t._v("é¢å‘é—®é¢˜")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_2-ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ"}},[t._v("#")]),t._v(" (2)ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("è¯´åˆ°åˆ·æ–°ä»¤ç‰Œçš„ä½¿ç”¨, éœ€è¦å…ˆæ˜ç™½ä¸€ç‚¹. åœ¨ OAuth 2.0 è§„èŒƒä¸­, "),s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆæƒè®¸å¯ç±»å‹, æ˜¯åµŒå…¥åœ¨æˆæƒç è®¸å¯ç±»å‹ä¸‹çš„ä¸€ç§ç‰¹æ®Šè®¸å¯ç±»å‹")]),t._v(". åœ¨æˆæƒæœåŠ¡çš„ä»£ç é‡Œ, å½“æ¥æ”¶åˆ°è¿™ç§æˆæƒè®¸å¯è¯·æ±‚çš„æ—¶å€™, ä¼š"),s("strong",[t._v("å…ˆæ¯”è¾ƒ grant_type å’Œ refresh_token çš„å€¼")]),t._v(", ç„¶ååšä¸‹ä¸€æ­¥å¤„ç†.")]),t._v(" "),s("p",[t._v("è¿™å…¶ä¸­çš„æµç¨‹ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸¤å¤§æ­¥éª¤.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬ä¸€æ­¥, æ¥æ”¶åˆ·æ–°ä»¤ç‰Œè¯·æ±‚, éªŒè¯åŸºæœ¬ä¿¡æ¯.")])]),t._v(" "),s("p",[t._v("æ­¤æ—¶è¯·æ±‚ä¸­çš„ grant_type å€¼ä¸º refresh_token.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" grantType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grant_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"refresh_token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grantType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("å’Œé¢å‘è®¿é—®ä»¤ç‰Œå‰çš„éªŒè¯æµç¨‹ä¸€æ ·, è¿™é‡Œä¹Ÿéœ€è¦éªŒè¯ç¬¬ä¸‰æ–¹è½¯ä»¶æ˜¯å¦å­˜åœ¨. éœ€è¦æ³¨æ„çš„æ˜¯, è¿™é‡Œ"),s("strong",[t._v("éœ€è¦åŒæ—¶éªŒè¯åˆ·æ–°ä»¤ç‰Œæ˜¯å¦å­˜åœ¨, ç›®çš„å°±æ˜¯è¦ä¿è¯ä¼ è¿‡æ¥çš„åˆ·æ–°ä»¤ç‰Œçš„åˆæ³•æ€§")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" refresh_token "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"refresh_token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("refreshTokenMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("containsKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refresh_token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯¥refresh_tokenå€¼ä¸å­˜åœ¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("å¦å¤–, è¿˜éœ€è¦éªŒè¯åˆ·æ–°ä»¤ç‰Œæ˜¯å¦å±äºè¯¥ç¬¬ä¸‰æ–¹è½¯ä»¶. æˆæƒæœåŠ¡æ˜¯å°†é¢å‘çš„åˆ·æ–°ä»¤ç‰Œä¸ç¬¬ä¸‰æ–¹è½¯ä»¶, å½“æ—¶çš„æˆæƒç”¨æˆ·ç»‘å®šåœ¨ä¸€èµ·çš„, å› æ­¤è¿™é‡Œéœ€è¦åˆ¤æ–­è¯¥åˆ·æ–°ä»¤ç‰Œçš„å½’å±åˆæ³•æ€§.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" refreshTokenMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"refresh_token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("appStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯¥refresh_tokenå€¼ä¸æ˜¯é¢å‘ç»™è¯¥ç¬¬ä¸‰æ–¹è½¯ä»¶çš„")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[s("mark",[t._v("**éœ€è¦æ³¨æ„, ä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œè¢«ä½¿ç”¨ä»¥å, æˆæƒæœåŠ¡éœ€è¦å°†å…¶åºŸå¼ƒ, å¹¶é‡æ–°é¢å‘ä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œ. **")])]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬äºŒæ­¥, é‡æ–°ç”Ÿæˆè®¿é—®ä»¤ç‰Œ.")])]),t._v(" "),s("p",[t._v("ç”Ÿæˆè®¿é—®ä»¤ç‰Œçš„å¤„ç†æµç¨‹, ä¸é¢å‘è®¿é—®ä»¤ç‰Œç¯èŠ‚çš„ç”Ÿæˆæµç¨‹æ˜¯ä¸€è‡´çš„. æˆæƒæœåŠ¡ä¼šå°†æ–°çš„è®¿é—®ä»¤ç‰Œå’Œæ–°çš„åˆ·æ–°ä»¤ç‰Œ, ä¸€èµ·è¿”å›ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶. è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†.")]),t._v(" "),s("h5",{attrs:{id:"_3-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ€»ç»“"}},[t._v("#")]),t._v(" 3.æ€»ç»“")]),t._v(" "),s("p",[t._v('æœ¬èŠ‚è®²äº†æˆæƒç è®¸å¯ç±»å‹ä¸‹æˆæƒæœåŠ¡çš„å·¥ä½œåŸç†. æˆæƒæœåŠ¡å¯ä»¥è¯´æ˜¯æ•´ä¸ª OAuth 2.0 ä½“ç³»ä¸­çš„ "çµé­‚" ç»„ä»¶, ä»»ä½•ä¸€ç§è®¸å¯ç±»å‹éƒ½ç¦»ä¸å¼€å®ƒçš„æ”¯æŒ, å®ƒä¹Ÿæ˜¯æœ€å¤æ‚çš„ç»„ä»¶.')]),t._v(" "),s("p",[t._v("è¿™æ˜¯å› ä¸ºå®ƒå°†å¤æ‚æ€§å°½å¯èƒ½åœ°æ½åœ¨äº†è‡ªå·±èº«ä¸Š, æ‰ä½¿å¾—è¯¸å¦‚å°å…”è¿™æ ·çš„ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥å…¥ OAuth 2.0 çš„æ—¶å€™æ›´åŠ ä¾¿æ·. é‚£å…³äºå¦‚ä½•å¿«é€Ÿåœ°æ¥å…¥ OAuth 2.0, åé¢ä¼šè¯¦ç»†å±•å¼€.")]),t._v(" "),s("p",[t._v("æ€»ç»“æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ 3 ç‚¹.")]),t._v(" "),s("ul",[s("li",[t._v("æˆæƒæœåŠ¡çš„æ ¸å¿ƒå°±æ˜¯, "),s("strong",[t._v("å…ˆé¢å‘æˆæƒç  code å€¼, å†é¢å‘è®¿é—®ä»¤ç‰Œ access_token å€¼")]),t._v(".")]),t._v(" "),s("li",[t._v("åœ¨é¢å‘è®¿é—®ä»¤ç‰Œçš„"),s("strong",[t._v("åŒæ—¶è¿˜ä¼šé¢å‘åˆ·æ–°ä»¤ç‰Œ refresh_token å€¼, è¿™ç§æœºåˆ¶å¯ä»¥åœ¨æ— é¡»ç”¨æˆ·å‚ä¸çš„æƒ…å†µä¸‹ç”¨äºç”Ÿæˆæ–°çš„è®¿é—®ä»¤ç‰Œ")]),t._v(". æ­£å¦‚å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶çš„ä¾‹å­, å½“è®¿é—®ä»¤ç‰Œè¿‡æœŸçš„æ—¶å€™, åˆ·æ–°ä»¤ç‰Œçš„å­˜åœ¨å¯ä»¥å¤§å¤§æé«˜å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶çš„ä½“éªŒ.")]),t._v(" "),s("li",[t._v("æˆæƒè¿˜è¦æœ‰æˆæƒèŒƒå›´, **ä¸èƒ½è®©ç¬¬ä¸‰æ–¹è½¯ä»¶è·å¾—æ¯”æ³¨å†Œæ—¶æƒé™èŒƒå›´è¿˜å¤§çš„æˆæƒ, ä¹Ÿä¸èƒ½è·å¾—è¶…å‡ºäº†ç”¨æˆ·æˆæƒçš„æƒé™èŒƒå›´, å§‹ç»ˆç¡®ä¿æœ€å°æƒé™å®‰å…¨åŸåˆ™. ** æ¯”å¦‚, å°æ˜åªä¸ºå°å…”è½¯ä»¶æˆäºˆäº†è·å–å½“å¤©è®¢å•çš„æƒé™, é‚£ä¹ˆå°å…”è½¯ä»¶å°±ä¸èƒ½è®¿é—®å°æ˜åº—é“ºé‡Œé¢çš„å†å²è®¢å•æ•°æ®.")])]),t._v(" "),s("p",[t._v("å¯ä»¥å‚è€ƒå¯¹æ¯”ä¸€ä¸‹å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£å…³äºç¬¬ä¸‰æ–¹ç™»å½•çš„æµç¨‹:"),s("a",{attrs:{href:"https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"åœ¨oauth-2-0ä¸­ä½¿ç”¨jwtç»“æ„åŒ–ä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨oauth-2-0ä¸­ä½¿ç”¨jwtç»“æ„åŒ–ä»¤ç‰Œ"}},[t._v("#")]),t._v(" åœ¨OAuth 2.0ä¸­ä½¿ç”¨JWTç»“æ„åŒ–ä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("å‰ä¸€èŠ‚è®²åˆ°äº†æˆæƒæœåŠ¡çš„æ ¸å¿ƒå°±æ˜¯"),s("strong",[t._v("é¢å‘è®¿é—®ä»¤ç‰Œ")]),t._v(", è€Œ OAuth 2.0 è§„èŒƒ"),s("strong",[t._v("å¹¶æ²¡æœ‰çº¦æŸè®¿é—®ä»¤ç‰Œå†…å®¹çš„ç”Ÿæˆè§„åˆ™, åªè¦ç¬¦åˆå”¯ä¸€æ€§, ä¸è¿ç»­æ€§, ä¸å¯çŒœæ€§")]),t._v("å°±å¤Ÿäº†. è¿™å°±æ„å‘³ç€å¯ä»¥çµæ´»é€‰æ‹©ä»¤ç‰Œçš„å½¢å¼, æ—¢å¯ä»¥æ˜¯æ²¡æœ‰å†…éƒ¨ç»“æ„ä¸”ä¸åŒ…å«ä»»ä½•ä¿¡æ¯å«ä¹‰çš„éšæœºå­—ç¬¦ä¸², ä¹Ÿå¯ä»¥æ˜¯å…·æœ‰"),s("strong",[t._v("å†…éƒ¨ç»“æ„ä¸”åŒ…å«æœ‰ä¿¡æ¯å«ä¹‰")]),t._v("çš„å­—ç¬¦ä¸².")]),t._v(" "),s("p",[t._v("éšæœºå­—ç¬¦ä¸²è¿™æ ·çš„æ–¹å¼å°±ä¸å†ä»‹ç»äº†, ä¹‹å‰è¯¾ç¨‹ä¸­ç”Ÿæˆä»¤ç‰Œçš„æ–¹å¼éƒ½æ˜¯é»˜è®¤ä¸€ä¸ªéšæœºå­—ç¬¦ä¸². è€Œåœ¨ç»“æ„åŒ–ä»¤ç‰Œè¿™æ–¹é¢, ç›®å‰ç”¨å¾—æœ€å¤šçš„å°±æ˜¯ "),s("strong",[t._v("JWT ä»¤ç‰Œ")]),t._v("äº†.")]),t._v(" "),s("h5",{attrs:{id:"_1-jwtç»“æ„åŒ–ä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-jwtç»“æ„åŒ–ä»¤ç‰Œ"}},[t._v("#")]),t._v(" 1.JWTç»“æ„åŒ–ä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("å…³äºä»€ä¹ˆæ˜¯ JWT, å®˜æ–¹å®šä¹‰æ˜¯è¿™æ ·æè¿°çš„:")]),t._v(" "),s("blockquote",[s("p",[t._v("JSON Web Token(JWT)æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†(RFC 7519), å®ƒå®šä¹‰äº†ä¸€ç§ç´§å‡‘çš„, è‡ªåŒ…å«çš„æ–¹å¼, ç”¨äºä½œä¸º JSON å¯¹è±¡åœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯.")])]),t._v(" "),s("p",[t._v("è¿™ä¸ªå®šä¹‰æ˜¯ä¸æ˜¯å¾ˆè´¹è§£? ç®€å•ç†è§£ä¸‹, "),s("mark",[s("strong",[t._v("JWT å°±æ˜¯ç”¨ä¸€ç§ç»“æ„åŒ–å°è£…çš„æ–¹å¼æ¥ç”Ÿæˆ token çš„æŠ€æœ¯. ç»“æ„åŒ–åçš„ token å¯ä»¥è¢«èµ‹äºˆéå¸¸ä¸°å¯Œçš„å«ä¹‰, è¿™ä¹Ÿæ˜¯å®ƒä¸åŸå…ˆæ¯«æ— æ„ä¹‰çš„, éšæœºçš„å­—ç¬¦ä¸²å½¢å¼ token çš„æœ€å¤§åŒºåˆ«")])]),t._v(".")]),t._v(" "),s("p",[t._v('ç»“æ„åŒ–ä¹‹å, ä»¤ç‰Œæœ¬èº«å°±å¯ä»¥è¢« "å¡è¿›" ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯, æ¯”å¦‚å°æ˜ä¸ºå°å…”è½¯ä»¶è¿›è¡Œäº†æˆæƒçš„ä¿¡æ¯, æˆæƒçš„èŒƒå›´ä¿¡æ¯ç­‰. æˆ–è€…å¯ä»¥å½¢è±¡åœ°å°†å…¶ç†è§£ä¸ºè¿™æ˜¯ä¸€ç§ "è‡ªç¼–ç " çš„èƒ½åŠ›, è€Œè¿™äº›æ°æ°æ˜¯æ— ç»“æ„åŒ–ä»¤ç‰Œæ‰€ä¸å…·å¤‡çš„.')]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("JWT è¿™ç§ç»“æ„åŒ–ä½“å¯ä»¥åˆ†ä¸º HEADER(å¤´éƒ¨), PAYLOAD(æ•°æ®ä½“)å’Œ SIGNATURE(ç­¾å)ä¸‰éƒ¨åˆ†.")])]),t._v("  ç»è¿‡ç­¾åä¹‹åçš„ JWT çš„æ•´ä½“ç»“æ„, æ˜¯è¢«"),s("strong",[t._v("å¥ç‚¹ç¬¦å·")]),t._v("åˆ†å‰²çš„ä¸‰æ®µå†…å®¹, ç»“æ„ä¸º "),s("mark",[s("strong",[t._v("header.payload.signature")])]),t._v(". æ¯”å¦‚ä¸‹é¢è¿™ä¸ªç¤ºä¾‹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eyJzdWIiOiJVU0VSVEVTVCIsImV4cCI6MTU4NDEwNTc5MDcwMywiaWF0IjoxNTg0MTA1OTQ4MzcyfQ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("HbleXbvJ_2SW8ry30cXOBGR9FW4oSWBd3PWaWKsEXE\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("**æ³¨æ„: JWT å†…éƒ¨æ²¡æœ‰æ¢è¡Œ, è¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤ºæ–¹ä¾¿, æ‰å°†å…¶ç”¨ä¸‰è¡Œæ¥è¡¨ç¤º. **")]),t._v(" "),s("p",[t._v("å¯ä»¥æŠŠ JWT ä»¤ç‰Œæ”¾åˆ° https://jwt.io/ ç½‘ç«™çš„åœ¨çº¿æ ¡éªŒå·¥å…·ä¸­è¿›è¡Œæ ¡éªŒ, å°±å¯ä»¥çœ‹åˆ°è§£ç ä¹‹åçš„æ•°æ®:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/1d29b5136d73705e87e89c0b91973358-20230729094013-p0un4m8.png",alt:"",title:"ç”±åœ¨çº¿æ ¡éªŒå·¥å…·è§£ç åçš„JWTä»¤ç‰Œ"}})]),t._v(" "),s("p",[t._v("è§£æåå‘ˆç°å‡ºæ¥çš„å°±æ˜¯ç»“æ„åŒ–çš„å†…å®¹äº†. æ¥ä¸‹æ¥å…·ä½“è¯´è¯´ JWT çš„è¿™ä¸‰éƒ¨åˆ†.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("HEADER")]),t._v(" è¡¨ç¤ºè£…è½½"),s("strong",[t._v("ä»¤ç‰Œç±»å‹å’Œç®—æ³•")]),t._v("ç­‰ä¿¡æ¯, æ˜¯ JWT çš„å¤´éƒ¨. å…¶ä¸­, typ è¡¨ç¤ºç¬¬äºŒéƒ¨åˆ† PAYLOAD æ˜¯ JWT ç±»å‹, alg è¡¨ç¤ºä½¿ç”¨ HS256 å¯¹ç§°ç­¾åçš„ç®—æ³•.")]),t._v(" "),s("li",[s("strong",[t._v("PAYLOAD")]),t._v(" è¡¨ç¤ºæ˜¯ JWT çš„"),s("strong",[t._v("æ•°æ®ä½“")]),t._v(", ä»£è¡¨äº†ä¸€ç»„æ•°æ®. å…¶ä¸­, sub(ä»¤ç‰Œçš„ä¸»ä½“, ä¸€èˆ¬è®¾ä¸ºèµ„æºæ‹¥æœ‰è€…çš„å”¯ä¸€æ ‡è¯†), exp(ä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´æˆ³), iat(ä»¤ç‰Œé¢å‘çš„æ—¶é—´æˆ³)æ˜¯ JWT è§„èŒƒæ€§çš„å£°æ˜, ä»£è¡¨çš„æ˜¯å¸¸è§„æ€§æ“ä½œ. æ›´å¤šçš„é€šç”¨å£°æ˜, å¯ä»¥å‚è€ƒ RFC 7519 å¼€æ”¾æ ‡å‡†. ä¸è¿‡, åœ¨ä¸€ä¸ª JWT å†…å¯ä»¥åŒ…å«ä¸€åˆ‡åˆæ³•çš„ JSON æ ¼å¼çš„æ•°æ®, ä¹Ÿå°±æ˜¯è¯´, PAYLOAD è¡¨ç¤ºçš„ä¸€ç»„æ•°æ®å…è®¸è‡ªå®šä¹‰å£°æ˜.")]),t._v(" "),s("li",[s("strong",[t._v("SIGNATURE")]),t._v(" è¡¨ç¤ºå¯¹ JWT ä¿¡æ¯çš„"),s("strong",[t._v("ç­¾å")]),t._v('. å®ƒæœ‰ä»€ä¹ˆä½œç”¨å‘¢? æˆ‘ä»¬å¯èƒ½è®¤ä¸º, æœ‰äº† HEADER å’Œ PAYLOAD ä¸¤éƒ¨åˆ†å†…å®¹å, å°±å¯ä»¥è®©ä»¤ç‰Œæºå¸¦ä¿¡æ¯äº†, ä¼¼ä¹å°±å¯ä»¥åœ¨ç½‘ç»œä¸­ä¼ è¾“äº†, ä½†æ˜¯åœ¨ç½‘ç»œä¸­ä¼ è¾“è¿™æ ·çš„ä¿¡æ¯ä½“æ˜¯ä¸å®‰å…¨çš„, å› ä¸ºæ•°æ®åœ¨"è£¸å¥”"å•Š. æ‰€ä»¥, è¿˜éœ€è¦å¯¹å…¶è¿›è¡ŒåŠ å¯†ç­¾åå¤„ç†, '),s("strong",[t._v("è€Œ SIGNATURE å°±æ˜¯å¯¹ä¿¡æ¯çš„ç­¾åç»“æœ, å½“å—ä¿æŠ¤èµ„æºæ¥æ”¶åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ç­¾ååéœ€è¦éªŒè¯ä»¤ç‰Œçš„ç­¾åæ˜¯å¦åˆæ³•")]),t._v(".")])]),t._v(" "),s("p",[t._v('ç°åœ¨çŸ¥é“äº† JWT çš„ç»“æ„ä»¥åŠæ¯éƒ¨åˆ†çš„å«ä¹‰, é‚£ä¹ˆå…·ä½“åˆ° OAuth 2.0 çš„æˆæƒæµç¨‹ä¸­, JWT ä»¤ç‰Œæ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„å‘¢? åœ¨è®²å¦‚ä½•ä½¿ç”¨ä¹‹å‰å‘¢, å…ˆè¯´è¯´ "'),s("strong",[t._v("ä»¤ç‰Œå†…æ£€")]),t._v('".')]),t._v(" "),s("h5",{attrs:{id:"_2-ä»¤ç‰Œå†…æ£€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä»¤ç‰Œå†…æ£€"}},[t._v("#")]),t._v(" 2.ä»¤ç‰Œå†…æ£€")]),t._v(" "),s("p",[t._v("ä»€ä¹ˆæ˜¯ä»¤ç‰Œå†…æ£€å‘¢? "),s("strong",[t._v("æˆæƒæœåŠ¡é¢å‘ä»¤ç‰Œ, å—ä¿æŠ¤èµ„æºæœåŠ¡å°±è¦éªŒè¯ä»¤ç‰Œ")]),t._v('. å‰é¢è®²è¿‡, æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡, å®ƒä¿©æ˜¯"ä¸€ä¼™çš„". **å—ä¿æŠ¤èµ„æºæ¥è°ƒç”¨æˆæƒæœåŠ¡æä¾›çš„æ£€éªŒä»¤ç‰Œçš„æœåŠ¡, è¿™ç§æ ¡éªŒä»¤ç‰Œçš„æ–¹å¼ç§°ä¸ºä»¤ç‰Œå†…æ£€. **')]),t._v(" "),s("p",[t._v('æœ‰æ—¶å€™æˆæƒæœåŠ¡ä¾èµ–ä¸€ä¸ªæ•°æ®åº“, ç„¶åå—ä¿æŠ¤èµ„æºæœåŠ¡ä¹Ÿä¾èµ–è¿™ä¸ªæ•°æ®åº“, ä¹Ÿå°±æ˜¯ "å…±äº«æ•°æ®åº“". ä¸è¿‡, åœ¨å¦‚ä»Šå¾®æœåŠ¡çš„ç¯å¢ƒä¸‹, ä¸åŒçš„ç³»ç»Ÿä¹‹é—´æ˜¯ä¾é '),s("strong",[t._v("æœåŠ¡")]),t._v("è€Œ"),s("strong",[t._v("ä¸æ˜¯æ•°æ®åº“")]),t._v("æ¥é€šä¿¡äº†, æ¯”å¦‚æˆæƒæœåŠ¡ç»™å—ä¿æŠ¤èµ„æºæœåŠ¡æä¾›ä¸€ä¸ª RPC æœåŠ¡. å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/e2a4f6ac061bcfb8be47e0e6b552d7ef-20230729094013-babz1qs.png",alt:"",title:"æˆæƒæœåŠ¡æä¾›æ¥å£æœåŠ¡, ä¾›å—ä¿æŠ¤èµ„æºæ ¡éªŒä»¤ç‰Œ"}})]),t._v(" "),s("p",[t._v("é‚£ä¹ˆ, åœ¨æœ‰äº† JWT ä»¤ç‰Œä¹‹å, å°±å¤šäº†ä¸€ç§é€‰æ‹©, "),s("strong",[t._v("å› ä¸º JWT ä»¤ç‰Œæœ¬èº«å°±åŒ…å«äº†ä¹‹å‰æ‰€è¦ä¾èµ–æ•°æ®åº“æˆ–è€…ä¾èµ– RPC æœåŠ¡æ‰èƒ½æ‹¿åˆ°çš„ä¿¡æ¯, æ¯”å¦‚ä¸Šé¢æåˆ°çš„å“ªä¸ªç”¨æˆ·ä¸ºå“ªä¸ªè½¯ä»¶è¿›è¡Œäº†æˆæƒç­‰ä¿¡æ¯")]),t._v(". è¿™æ ·å°±ä¸éœ€è¦å†è°ƒä¸€æ¬¡ RPC æ¥å£äº†.")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å°±çœ‹çœ‹æœ‰äº† JWT ä»¤ç‰Œä¹‹å, æ•´ä½“çš„"),s("strong",[t._v("å†…æ£€æµç¨‹")]),t._v("ä¼šå˜æˆä»€ä¹ˆæ ·å­.")]),t._v(" "),s("h5",{attrs:{id:"_3-jwtæ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-jwtæ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„"}},[t._v("#")]),t._v(" 3.JWTæ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„?")]),t._v(" "),s("p",[t._v("æœ‰äº† JWT ä»¤ç‰Œä¹‹åçš„é€šä¿¡æ–¹å¼, å°±å¦‚ä¸‹å›¾æ‰€ç¤ºäº†, "),s("mark",[s("strong",[t._v('æˆæƒæœåŠ¡"æ‰”å‡º"ä¸€ä¸ªä»¤ç‰Œ, å—ä¿æŠ¤èµ„æºæœåŠ¡"æ¥ä½"è¿™ä¸ªä»¤ç‰Œ, ç„¶åè‡ªå·±å¼€å§‹è§£æä»¤ç‰Œæœ¬èº«æ‰€åŒ…å«çš„ä¿¡æ¯å°±å¯ä»¥äº†, è€Œä¸éœ€è¦å†å»æŸ¥è¯¢æ•°æ®åº“æˆ–è€…è¯·æ±‚ RPC æœåŠ¡')])]),t._v(". è¿™æ ·ä¹Ÿå®ç°äº†ä¸Šé¢è¯´çš„ä»¤ç‰Œå†…æ£€.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/1f2c92b9948a6271c26bc23544096daf-20230729094013-kbsyqik.png",alt:"",title:"å—ä¿æŠ¤èµ„æºæœåŠ¡å¯ç›´æ¥è§£æJWTä»¤ç‰Œ"}})]),t._v(" "),s("p",[t._v("ä¸ºäº†æ›´èƒ½çªå‡º JWT ä»¤ç‰Œçš„ä½ç½®, ä¸Šå›¾ç®€åŒ–äº†é€»è¾‘å…³ç³». å®é™…ä¸Š, "),s("strong",[t._v("æˆæƒæœåŠ¡é¢å‘äº† JWT ä»¤ç‰Œåç»™åˆ°äº†å°å…”è½¯ä»¶, å°å…”è½¯ä»¶æ‹¿ç€ JWT ä»¤ç‰Œæ¥è¯·æ±‚å—ä¿æŠ¤èµ„æºæœåŠ¡, ä¹Ÿå°±æ˜¯å°æ˜åœ¨äº¬ä¸œåº—é“ºçš„è®¢å•. å¾ˆæ˜¾ç„¶, JWT ä»¤ç‰Œéœ€è¦åœ¨å…¬ç½‘ä¸Šåšä¼ è¾“. æ‰€ä»¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­, JWT ä»¤ç‰Œéœ€è¦è¿›è¡Œ Base64 ç¼–ç ä»¥é˜²æ­¢ä¹±ç , åŒæ—¶è¿˜éœ€è¦è¿›è¡Œç­¾ååŠåŠ å¯†å¤„ç†æ¥é˜²æ­¢æ•°æ®ä¿¡æ¯æ³„éœ²")]),t._v(".")]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯è‡ªå·±å¤„ç†è¿™äº›ç¼–ç , åŠ å¯†ç­‰å·¥ä½œçš„è¯, å°±ä¼šå¢åŠ é¢å¤–çš„ç¼–ç è´Ÿæ‹…. å¥½åœ¨å¯ä»¥å€ŸåŠ©ä¸€äº›å¼€æºçš„å·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å¤„ç†è¿™äº›å·¥ä½œ. æ¯”å¦‚ä¸‹é¢çš„ Demo ä¸­, ç»™å‡ºäº†å¼€æº JJWT(Java JWT)çš„ä½¿ç”¨æ–¹æ³•.")]),t._v(" "),s("p",[t._v("JJWT æ˜¯ç›®å‰ Java å¼€æºçš„, æ¯”è¾ƒæ–¹ä¾¿çš„ JWT å·¥å…·, å°è£…äº† Base64URL ç¼–ç å’Œå¯¹ç§° HMAC, éå¯¹ç§° RSA çš„ä¸€ç³»åˆ—ç­¾åç®—æ³•. ä½¿ç”¨ JJWT, æˆ‘ä»¬åªå…³æ³¨ä¸Šå±‚çš„ä¸šåŠ¡é€»è¾‘å®ç°, è€Œæ— éœ€å…³æ³¨ç¼–è§£ç å’Œç­¾åç®—æ³•çš„å…·ä½“å®ç°, è¿™ç±»å¼€æºå·¥å…·å¯ä»¥åšåˆ°å¼€ç®±å³ç”¨.")]),t._v(" "),s("p",[t._v("è¿™ä¸ª Demo çš„ä»£ç å¦‚ä¸‹, ä½¿ç”¨ JJWT å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”Ÿæˆä¸€ä¸ª"),s("strong",[t._v("ç»è¿‡ç­¾åçš„ JWT ä»¤ç‰Œ, ä»¥åŠè§£æä¸€ä¸ª JWT ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sharedTokenSecret"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hellooauthhellooauthhellooauthhellooauth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯†é’¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Key")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecretKeySpec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sharedTokenSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HS256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJcaName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”ŸæˆJWTä»¤ç‰Œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" jwts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeaderParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headerMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setClaims")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("signWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HS256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compact")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æJWTä»¤ç‰Œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jws")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" claimsJws "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parserBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSigningKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseClaimsJws")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jwts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwsHeader")]),t._v(" header "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" claimsJws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),t._v(" body "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" claimsJws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("ä½¿ç”¨ JJWT è§£æ JWT ä»¤ç‰Œæ—¶åŒ…å«äº†éªŒè¯ç­¾åçš„åŠ¨ä½œ, å¦‚æœç­¾åä¸æ­£ç¡®å°±ä¼šæŠ›å‡ºå¼‚å¸¸ä¿¡æ¯. å¯ä»¥å€ŸåŠ©è¿™ä¸€ç‚¹æ¥å¯¹ç­¾ååšæ ¡éªŒ, ä»è€Œåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ²¡æœ‰è¢«ä¼ªé€ è¿‡çš„, åˆæ³•çš„ JWT ä»¤ç‰Œ.")]),t._v(" "),s("p",[t._v("å¼‚å¸¸ä¿¡æ¯, ä¸€èˆ¬æ˜¯å¦‚ä¸‹çš„æ ·å­:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JWT")]),t._v(" signature does not match locally computed signature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JWT")]),t._v(" validity cannot be asserted and should not be trusted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä»¥ä¸Šå°±æ˜¯å€ŸåŠ©å¼€æºå·¥å…·, å°† JWT ä»¤ç‰Œåº”ç”¨åˆ°æˆæƒæœåŠ¡æµç¨‹ä¸­çš„æ–¹æ³•äº†.")]),t._v(" "),s("h5",{attrs:{id:"_4-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwtä»¤ç‰Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwtä»¤ç‰Œ"}},[t._v("#")]),t._v(" 4.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨JWTä»¤ç‰Œ")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, ä½ æ˜¯ä¸æ˜¯ä¸€ç›´éƒ½æœ‰ä¸€ä¸ªç–‘é—®: "),s("strong",[t._v("ä¸ºä»€ä¹ˆè¦ç»•è¿™ä¹ˆå¤§ä¸€ä¸ªå¼¯å­, ä½¿ç”¨ JWT, è€Œä¸æ˜¯ä½¿ç”¨æ²¡æœ‰å•¥å†…éƒ¨ç»“æ„, ä¹Ÿä¸åŒ…å«ä»»ä½•ä¿¡æ¯çš„éšæœºå­—ç¬¦ä¸²å‘¢? JWT åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„")]),t._v("?")]),t._v(" "),s("p",[t._v("è¿™é‡Œå°±æ€»ç»“ä¸‹ä½¿ç”¨ "),s("mark",[s("strong",[t._v("JWT æ ¼å¼ä»¤ç‰Œçš„ä¸‰å¤§å¥½å¤„")])]),t._v(".")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v('JWT çš„æ ¸å¿ƒæ€æƒ³, å°±æ˜¯ç”¨è®¡ç®—ä»£æ›¿å­˜å‚¨, æœ‰äº› "æ—¶é—´æ¢ç©ºé—´" çš„æ„Ÿè§‰')]),t._v('. å½“ç„¶, è¿™ç§ç»è¿‡è®¡ç®—å¹¶ç»“æ„åŒ–å°è£…çš„æ–¹å¼, ä¹Ÿå‡å°‘äº† "å…±äº«æ•°æ®åº“" å› è¿œç¨‹è°ƒç”¨è€Œå¸¦æ¥çš„ç½‘ç»œä¼ è¾“æ¶ˆè€—, æ‰€ä»¥ä¹Ÿæœ‰å¯èƒ½æ˜¯èŠ‚çœæ—¶é—´çš„.')]),t._v(" "),s("li",[s("strong",[t._v("ç¬¬äºŒä¸ªå¥½å¤„ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦ç‰¹æ€§, ä¹Ÿå°±æ˜¯åŠ å¯†")]),t._v(". å› ä¸º JWT ä»¤ç‰Œå†…éƒ¨å·²ç»åŒ…å«äº†é‡è¦çš„ä¿¡æ¯, æ‰€ä»¥åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­éƒ½å¿…é¡»è¢«è¦æ±‚æ˜¯å¯†æ–‡ä¼ è¾“çš„, "),s("strong",[t._v("è¿™æ ·è¢«å¼ºåˆ¶è¦æ±‚äº†åŠ å¯†ä¹Ÿå°±ä¿éšœäº†ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§")]),t._v(". è¿™é‡Œçš„åŠ å¯†ç®—æ³•, æ—¢å¯ä»¥æ˜¯å¯¹ç§°åŠ å¯†, ä¹Ÿå¯ä»¥æ˜¯éå¯¹ç§°åŠ å¯†.")]),t._v(" "),s("li",[s("strong",[t._v("ä½¿ç”¨ JWT æ ¼å¼çš„ä»¤ç‰Œ, æœ‰åŠ©äºå¢å¼ºç³»ç»Ÿçš„å¯ç”¨æ€§å’Œå¯ä¼¸ç¼©æ€§")]),t._v('. è¿™ä¸€ç‚¹è¦æ€ä¹ˆç†è§£å‘¢? å‰é¢è®²åˆ°äº†, è¿™ç§ JWT æ ¼å¼çš„ä»¤ç‰Œ, é€šè¿‡ "è‡ªç¼–ç " çš„æ–¹å¼åŒ…å«äº†èº«ä»½éªŒè¯éœ€è¦çš„ä¿¡æ¯, ä¸å†éœ€è¦æœåŠ¡ç«¯è¿›è¡Œé¢å¤–çš„å­˜å‚¨, æ‰€ä»¥æ¯æ¬¡çš„è¯·æ±‚éƒ½æ˜¯'),s("strong",[t._v("æ— çŠ¶æ€ä¼šè¯")]),t._v(". è¿™å°±ç¬¦åˆäº†å°½å¯èƒ½éµå¾ªæ— çŠ¶æ€æ¶æ„è®¾è®¡çš„åŸåˆ™, ä¹Ÿå°±æ˜¯å¢å¼ºäº†ç³»ç»Ÿçš„"),s("strong",[t._v("å¯ç”¨æ€§å’Œä¼¸ç¼©æ€§")]),t._v(".")])]),t._v(" "),s("p",[t._v("ä½†ä¸‡ç‰©çš†æœ‰ä¸¤é¢æ€§, "),s("mark",[s("strong",[t._v("JWT ä»¤ç‰Œä¹Ÿæœ‰ç¼ºç‚¹")])]),t._v(".")]),t._v(" "),s("p",[t._v('JWT æ ¼å¼ä»¤ç‰Œçš„æœ€å¤§é—®é¢˜åœ¨äº "è¦†æ°´éš¾æ”¶", ä¹Ÿå°±æ˜¯è¯´, '),s("strong",[t._v("æ²¡åŠæ³•åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¿®æ”¹ä»¤ç‰ŒçŠ¶æ€")]),t._v(".")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯å€ŸåŠ©å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶ä¾‹å­æ¥è¯´æ˜. å°æ˜åœ¨ä½¿ç”¨å°å…”è½¯ä»¶çš„æ—¶å€™, æ˜¯ä¸æ˜¯æœ‰å¯èƒ½å› ä¸ºæŸç§åŸå› ä¿®æ”¹äº†åœ¨äº¬ä¸œçš„å¯†ç , æˆ–è€…æ˜¯ä¸æ˜¯æœ‰å¯èƒ½çªç„¶å–æ¶ˆäº†ç»™å°å…”çš„æˆæƒ? è¿™æ—¶å€™, ä»¤ç‰Œçš„çŠ¶æ€æ˜¯ä¸æ˜¯å°±è¦æœ‰ç›¸åº”çš„å˜æ›´, å°†åŸæ¥å¯¹åº”çš„ä»¤ç‰Œç½®ä¸ºæ— æ•ˆ.")]),t._v(" "),s("p",[s("strong",[t._v('ä½†ä½¿ç”¨ JWT æ ¼å¼ä»¤ç‰Œæ—¶, æ¯æ¬¡é¢å‘çš„ä»¤ç‰Œéƒ½ä¸ä¼šåœ¨æœåŠ¡ç«¯å­˜å‚¨, è¿™æ ·è¦æ”¹å˜ä»¤ç‰ŒçŠ¶æ€çš„æ—¶å€™, å°±æ— èƒ½ä¸ºåŠ›äº†. å› ä¸ºæœåŠ¡ç«¯å¹¶æ²¡æœ‰å­˜å‚¨è¿™ä¸ª JWT æ ¼å¼çš„ä»¤ç‰Œ. è¿™å°±æ„å‘³ç€, JWT ä»¤ç‰Œåœ¨æœ‰æ•ˆæœŸå†…, æ˜¯å¯ä»¥"æ¨ªè¡Œæ— æ­¢"çš„.')])]),t._v(" "),s("p",[t._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, å¯ä»¥æŠŠ JWT ä»¤ç‰Œå­˜å‚¨åˆ°è¿œç¨‹çš„åˆ†å¸ƒå¼å†…å­˜æ•°æ®åº“ä¸­å—? æ˜¾ç„¶ä¸èƒ½, å› ä¸ºè¿™ä¼šè¿èƒŒ JWT çš„åˆè¡·(å°†ä¿¡æ¯é€šè¿‡ç»“æ„åŒ–çš„æ–¹å¼å­˜å…¥ä»¤ç‰Œæœ¬èº«). å› æ­¤é€šå¸¸ä¼šæœ‰ä¸¤ç§åšæ³•:")]),t._v(" "),s("ol",[s("li",[t._v("å°†æ¯æ¬¡ç”Ÿæˆ JWT ä»¤ç‰Œæ—¶çš„"),s("strong",[t._v("ç§˜é’¥ç²’åº¦ç¼©å°åˆ°ç”¨æˆ·çº§åˆ«")]),t._v(", ä¹Ÿå°±æ˜¯ä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªç§˜é’¥. è¿™æ ·å½“ç”¨æˆ·å–æ¶ˆæˆæƒæˆ–è€…ä¿®æ”¹å¯†ç å, å°±å¯ä»¥è®©è¿™ä¸ªå¯†é’¥ä¸€èµ·ä¿®æ”¹. ä¸€èˆ¬æƒ…å†µä¸‹, è¿™ç§æ–¹æ¡ˆéœ€è¦é…å¥—ä¸€ä¸ªå•ç‹¬çš„å¯†é’¥ç®¡ç†æœåŠ¡.")]),t._v(" "),s("li",[t._v("åœ¨ä¸æä¾›ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆæˆæƒçš„ç¯å¢ƒé‡Œé¢, å¦‚æœåªè€ƒè™‘åˆ°ä¿®æ”¹å¯†ç çš„æƒ…å†µ, é‚£ä¹ˆå°±å¯ä»¥"),s("strong",[t._v("æŠŠç”¨æˆ·å¯†ç ä½œä¸º JWT çš„å¯†é’¥")]),t._v(". å½“ç„¶è¿™ä¹Ÿæ˜¯ç”¨æˆ·ç²’åº¦çº§åˆ«çš„. è¿™æ ·ä¸€æ¥, ç”¨æˆ·ä¿®æ”¹å¯†ç ä¹Ÿå°±ç›¸å½“äºä¿®æ”¹äº†å¯†é’¥.")])]),t._v(" "),s("h5",{attrs:{id:"_5-ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" 5.ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("p",[t._v("ä¸Šé¢è®²äº† JWT ä»¤ç‰Œæœ‰æ•ˆæœŸçš„é—®é¢˜, è®²åˆ°äº†å®ƒçš„å¤±æ•ˆå¤„ç†, å¦å¤–å‰é¢ä¹Ÿæåˆ°, æˆæƒæœåŠ¡é¢å‘è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, éƒ½ä¼šè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´, å…¶å®è¿™éƒ½å±äº"),s("strong",[t._v("ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ")]),t._v("çš„ç®¡ç†é—®é¢˜. æ¥ä¸‹æ¥è®²ä¸€è®²ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ.")]),t._v(" "),s("p",[t._v("**ä¸‡ç‰©çš†æœ‰å‘¨æœŸ, è¿™æ˜¯è‡ªç„¶è§„å¾‹, ä»¤ç‰Œä¹Ÿä¸ä¾‹å¤–, æ— è®ºæ˜¯ JWT ç»“æ„åŒ–ä»¤ç‰Œè¿˜æ˜¯æ™®é€šçš„ä»¤ç‰Œ. å®ƒä»¬éƒ½æœ‰æœ‰æ•ˆæœŸ, åªä¸è¿‡, JWT ä»¤ç‰Œå¯ä»¥æŠŠæœ‰æ•ˆæœŸçš„ä¿¡æ¯å­˜å‚¨åœ¨æœ¬èº«çš„ç»“æ„ä½“ä¸­. **")]),t._v(" "),s("p",[t._v("å…·ä½“åˆ° OAuth 2.0 çš„ä»¤ç‰Œç”Ÿå‘½å‘¨æœŸ, é€šå¸¸ä¼šæœ‰ä¸‰ç§æƒ…å†µ.")]),t._v(" "),s("ol",[s("li",[t._v("ç¬¬ä¸€ç§æƒ…å†µæ˜¯ä»¤ç‰Œçš„"),s("strong",[t._v("è‡ªç„¶è¿‡æœŸ")]),t._v("è¿‡ç¨‹, è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„æƒ…å†µ. è¿™ä¸ªè¿‡ç¨‹æ˜¯, ä»æˆæƒæœåŠ¡åˆ›å»ºä¸€ä¸ªä»¤ç‰Œå¼€å§‹, åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶ä½¿ç”¨ä»¤ç‰Œ, å†åˆ°å—ä¿æŠ¤èµ„æºæœåŠ¡éªŒè¯ä»¤ç‰Œ, æœ€åå†åˆ°ä»¤ç‰Œå¤±æ•ˆ. åŒæ—¶è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¸æ’é™¤ä¸»åŠ¨é”€æ¯ä»¤ç‰Œçš„äº‹æƒ…å‘ç”Ÿ, æ¯”å¦‚ä»¤ç‰Œè¢«æ³„éœ², æˆæƒæœåŠ¡å¯ä»¥åšä¸»è®©ä»¤ç‰Œå¤±æ•ˆ.")]),t._v(" "),s("li",[t._v("ç”Ÿå‘½å‘¨æœŸçš„ç¬¬äºŒç§æƒ…å†µ, ä¹Ÿå°±æ˜¯ä¸Šä¸€è®²æåˆ°çš„, è®¿é—®ä»¤ç‰Œå¤±æ•ˆä¹‹åå¯ä»¥ä½¿ç”¨"),s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œ")]),t._v("è¯·æ±‚æ–°çš„è®¿é—®ä»¤ç‰Œæ¥ä»£æ›¿å¤±æ•ˆçš„è®¿é—®ä»¤ç‰Œ, ä»¥æå‡ç”¨æˆ·ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ä½“éªŒ.")]),t._v(" "),s("li",[t._v("ç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸‰ç§æƒ…å†µ, å°±æ˜¯è®©ç¬¬ä¸‰æ–¹è½¯ä»¶æ¯”å¦‚å°å…”, "),s("strong",[t._v("ä¸»åŠ¨å‘èµ·ä»¤ç‰Œå¤±æ•ˆçš„è¯·æ±‚")]),t._v(', ç„¶åæˆæƒæœåŠ¡æ”¶åˆ°è¯·æ±‚ä¹‹åè®©ä»¤ç‰Œç«‹å³å¤±æ•ˆ. æƒ³ä¸€ä¸‹, ä»€ä¹ˆæƒ…å†µä¸‹ä¼šéœ€è¦è¿™ç§æœºåˆ¶, ä¹Ÿå°±æ˜¯æƒ³ä¸€ä¸‹ç¬¬ä¸‰æ–¹è½¯ä»¶è¿™æ ·åšçš„ "åŠ¨æœº", æ¯•ç«Ÿä¸€èˆ¬æƒ…å†µä¸‹ "æˆ‘ä»¬å¾ˆéš¾æ”¾å¼ƒå·²ç»æ‹¥æœ‰çš„äº‹ç‰©". æ¯”å¦‚æœ‰äº›æ—¶å€™, ç”¨æˆ·å’Œç¬¬ä¸‰æ–¹è½¯ä»¶ä¹‹é—´å­˜åœ¨ä¸€ç§è®¢è´­å…³ç³», æ¯”å¦‚å°æ˜è´­ä¹°äº†å°å…”è½¯ä»¶, é‚£ä¹ˆåœ¨è®¢è´­æ—¶é•¿åˆ°æœŸæˆ–è€…é€€è®¢, ä¸”å°æ˜æˆæƒçš„ token è¿˜æ²¡æœ‰åˆ°æœŸçš„æƒ…å†µä¸‹, å°±éœ€è¦æœ‰è¿™æ ·çš„ä¸€ç§'),s("strong",[t._v("ä»¤ç‰Œæ’¤å›åè®®")]),t._v(", æ¥æ”¯æŒå°å…”è½¯ä»¶ä¸»åŠ¨å‘èµ·ä»¤ç‰Œå¤±æ•ˆçš„è¯·æ±‚. ä½œä¸ºå¹³å°ä¸€æ–¹æ¯”å¦‚äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°, ä¹Ÿå»ºè®®æœ‰è´£ä»»çš„ç¬¬ä¸‰æ–¹è½¯ä»¶æ¯”å¦‚å°å…”è½¯ä»¶, éµå®ˆè¿™æ ·çš„ä¸€ç§ä»¤ç‰Œæ’¤å›åè®®.")])]),t._v(" "),s("p",[t._v("è¿™é‡Œå°†ä»¥ä¸Šä¸‰ç§æƒ…å†µæ•´ç†æˆäº†ä¸€ä»½åºåˆ—å›¾, ä»¥ä¾¿äºç†è§£. åŒæ—¶, ä¸ºäº†çªå‡ºä»¤ç‰Œ, è¿™é‡Œå°†è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ, ç‰¹æ„ç”¨æ·±é¢œè‰²æ ‡è¯†å‡ºæ¥, å¹¶å•ç‹¬ä½œä¸ºä¸¤ä¸ªè§’è‰²æ”¾è¿›äº†æ•´ä¸ªåºåˆ—å›¾ä¸­.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/59347c37af1baa004bad02551b683036-20230729094013-io586cr.png",alt:"",title:"ä»¤ç‰Œç”Ÿå‘½å‘¨æœŸ"}})]),t._v(" "),s("h5",{attrs:{id:"_6-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-æ€»ç»“"}},[t._v("#")]),t._v(" 6.æ€»ç»“")]),t._v(" "),s("p",[t._v("OAuth 2.0 çš„æ ¸å¿ƒæ˜¯æˆæƒæœåŠ¡, æ›´è¿›ä¸€æ­¥è®²æ˜¯ä»¤ç‰Œ, **æ²¡æœ‰ä»¤ç‰Œå°±æ²¡æœ‰ OAuth, **ä»¤ç‰Œè¡¨ç¤ºçš„æ˜¯æˆæƒè¡Œä¸ºä¹‹åçš„ç»“æœ.")]),t._v(" "),s("p",[t._v('ä¸€èˆ¬æƒ…å†µä¸‹ä»¤ç‰Œå¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥è¯´æ˜¯ä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸², æ˜¯ä¸é€æ˜çš„. ä»¤ç‰Œå¯ä»¥æ˜¯ä¸€ä¸ªæ— æ„ä¹‰çš„å­—ç¬¦ä¸². ä½†å¤§å®¶ "ä¸ç”˜äº" è¿™æ ·çš„æ»¡è¶³, äºæ˜¯å¼€å§‹æ¢ç´¢æ–°çš„ç”Ÿæˆä»¤ç‰Œçš„æ–¹å¼, ä¹Ÿå°±æœ‰äº† JWT ä»¤ç‰Œ, è¿™æ ·ä¸€æ¥æ—¢ä¸éœ€è¦é€šè¿‡å…±äº«æ•°æ®åº“, ä¹Ÿä¸éœ€è¦é€šè¿‡æˆæƒæœåŠ¡æä¾›æ¥å£çš„æ–¹å¼æ¥åšä»¤ç‰Œæ ¡éªŒäº†. è¿™å°±ç›¸å½“äºé€šè¿‡ JWT è¿™ç§ç»“æ„åŒ–çš„æ–¹å¼, åœ¨åšä»¤ç‰Œæ ¡éªŒçš„æ—¶å€™å¤šäº†ä¸€ç§é€‰æ‹©.')]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹å‡ ç‚¹å†…å®¹:")]),t._v(" "),s("ul",[s("li",[t._v("JWT ä»¤ç‰Œæ˜¯ä¸€ç§ç»“æ„åŒ–, ä¿¡æ¯åŒ–ä»¤ç‰Œ, "),s("strong",[t._v("ç»“æ„åŒ–å¯ä»¥ç»„ç»‡ç”¨æˆ·çš„æˆæƒä¿¡æ¯, ä¿¡æ¯åŒ–å°±æ˜¯ä»¤ç‰Œæœ¬èº«åŒ…å«äº†æˆæƒä¿¡æ¯")]),t._v(".")]),t._v(" "),s("li",[t._v("è™½ç„¶æœ¬èŠ‚é‡ç‚¹æ˜¯ JWT ä»¤ç‰Œ, ä½†ä¸è®ºæ˜¯ç»“æ„åŒ–çš„ä»¤ç‰Œè¿˜æ˜¯éç»“æ„åŒ–çš„ä»¤ç‰Œ, å¯¹äºç¬¬ä¸‰æ–¹è½¯ä»¶æ¥è®², å®ƒéƒ½ä¸å…³å¿ƒ, å› ä¸º"),s("strong",[t._v("ä»¤ç‰Œåœ¨ OAuth 2.0 ç³»ç»Ÿä¸­å¯¹äºç¬¬ä¸‰æ–¹è½¯ä»¶éƒ½æ˜¯ä¸é€æ˜çš„")]),t._v(". éœ€è¦"),s("strong",[t._v("å…³å¿ƒä»¤ç‰Œçš„, æ˜¯æˆæƒæœåŠ¡å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v(".")]),t._v(" "),s("li",[t._v("éœ€è¦æ³¨æ„ JWT ä»¤ç‰Œçš„å¤±æ•ˆé—®é¢˜. åœ¨ä½¿ç”¨äº† JWT ä»¤ç‰Œä¹‹å, è¿œç¨‹çš„æœåŠ¡ç«¯ä¸Šé¢æ˜¯"),s("strong",[t._v("ä¸å­˜å‚¨")]),t._v("çš„, å› ä¸ºä¸å†æœ‰è¿™ä¸ªå¿…è¦, JWT ä»¤ç‰Œæœ¬èº«å°±åŒ…å«äº†ä¿¡æ¯. é‚£ä¹ˆ, å¦‚ä½•æ¥æ§åˆ¶å®ƒçš„æœ‰æ•ˆæ€§é—®é¢˜å‘¢? æœ¬è®²ç»™å‡ºäº†ä¸¤ç§å»ºè®®, **ä¸€ç§æ˜¯å»ºç«‹ä¸€ä¸ªç§˜é’¥ç®¡ç†ç³»ç»Ÿ, å°†ç”Ÿæˆç§˜é’¥çš„ç²’åº¦ç¼©å°åˆ°ç”¨æˆ·çº§åˆ«, å¦å¤–ä¸€ç§æ˜¯ç›´æ¥å°†ç”¨æˆ·å¯†ç å½“ä½œå¯†é’¥. **")])]),t._v(" "),s("h4",{attrs:{id:"å¦‚ä½•å®‰å…¨å¿«é€Ÿåœ°æ¥å…¥oauth-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å®‰å…¨å¿«é€Ÿåœ°æ¥å…¥oauth-2-0"}},[t._v("#")]),t._v(" å¦‚ä½•å®‰å…¨å¿«é€Ÿåœ°æ¥å…¥OAuth 2.0")]),t._v(" "),s("p",[t._v("å‰é¢è®²æˆæƒæœåŠ¡çš„æµç¨‹çš„æ—¶å€™æåˆ°, "),s("strong",[t._v("æˆæƒæœåŠ¡å°† OAuth 2.0 çš„å¤æ‚æ€§éƒ½æ½åœ¨äº†è‡ªå·±èº«ä¸Š")]),t._v(", è¿™ä¹Ÿæ˜¯æˆæƒæœåŠ¡ä¸ºä»€ä¹ˆæ˜¯ OAuth 2.0 ä½“ç³»çš„æ ¸å¿ƒçš„åŸå› ä¹‹ä¸€.")]),t._v(" "),s("p",[t._v("è™½ç„¶æˆæƒæœåŠ¡åšäº†å¤§éƒ¨åˆ†å·¥ä½œ, ä½†æ˜¯åœ¨ OAuth 2.0 çš„ä½“ç³»é‡Œé¢, é™¤äº†èµ„æºæ‹¥æœ‰è€…æ˜¯ä½œä¸ºç”¨æˆ·å‚ä¸, è¿˜æœ‰å¦å¤–ä¸¤ä¸ªç³»ç»Ÿè§’è‰², ä¹Ÿå°±æ˜¯"),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v(". æœ¬èŠ‚å°±ç«™åœ¨è¿™ä¸¤ä¸ªè§’è‰²çš„è§’åº¦, çœ‹çœ‹å®ƒä»¬åº”è¯¥åšå“ªäº›å·¥ä½œ, æ‰èƒ½æ¥å…¥åˆ° OAuth 2.0 çš„ä½“ç³»é‡Œé¢.")]),t._v(" "),s("p",[t._v("ç°åœ¨å°±æ¥çœ‹çœ‹, ä½œä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶çš„å°å…”å’Œäº¬ä¸œçš„å—ä¿æŠ¤èµ„æºæœåŠ¡, å…·ä½“éœ€è¦ç€é‡å¤„ç†å“ªäº›å·¥ä½œ.")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨: å¦å¤–è¯´æ˜ä¸€ç‚¹, ä¸ºäº†è„±æ•çš„éœ€è¦, åœ¨ä¸‹é¢çš„è®²è¿°ä¸­, åªæ˜¯æŠŠäº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ä½œä¸ºä¸€ä¸ªè§’è‰²ä½¿ç”¨, ä»¥ä¾¿æœ‰åœºæ™¯æ„Ÿ, æ¥å¸®åŠ©ä½ ç†è§£.")])]),t._v(" "),s("h5",{attrs:{id:"_1-æ„å»ºç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ„å»ºç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨"}},[t._v("#")]),t._v(" 1.æ„å»ºç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨")]),t._v(" "),s("p",[t._v("å…ˆæ¥æ€è€ƒä¸€ä¸‹: å¦‚æœè¦åŸºäºäº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°æ„å»ºä¸€ä¸ªå°å…”æ‰“å•è½¯ä»¶çš„åº”ç”¨, å°å…”è½¯ä»¶çš„ç ”å‘äººå‘˜åº”è¯¥åšå“ªäº›å·¥ä½œ?")]),t._v(" "),s("p",[t._v("æ˜¯ä¸æ˜¯è¦åˆ°äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ç”³è¯·æ³¨å†Œä¸ºå¼€å‘è€…, åœ¨æˆä¸ºå¼€å‘è€…ä»¥åå†åˆ›å»ºä¸€ä¸ªåº”ç”¨, ä¹‹åå°±å¼€å§‹å¼€å‘äº†, å¯¹å§? æ²¡é”™, ä¸€å®šæ˜¯è¿™æ ·çš„æµç¨‹. é‚£ä¹ˆ, å¼€å‘ç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨çš„è¿‡ç¨‹ä¸­, éœ€è¦é‡ç‚¹å…³æ³¨å“ªäº›å†…å®¹å‘¢?")]),t._v(" "),s("p",[t._v("å…ˆæ€»ç»“ä¸‹, è¿™äº›å†…å®¹åŒ…æ‹¬ 4 éƒ¨åˆ†, åˆ†åˆ«æ˜¯: "),s("mark",[s("strong",[t._v("æ³¨å†Œä¿¡æ¯, å¼•å¯¼æˆæƒ, ä½¿ç”¨è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ")])]),t._v("â€‹ **. **")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/dbfc29d49cabc571e0b3c0266d9867f3-20230729094013-17zey4l.png",alt:"",title:"å¼€å‘ç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨åº”è¯¥å…³æ³¨çš„å†…å®¹"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬ä¸€ç‚¹: æ³¨å†Œä¿¡æ¯.")])]),t._v(" "),s("p",[t._v("é¦–å…ˆ, å°å…”è½¯ä»¶åªæœ‰å…ˆæœ‰äº†èº«ä»½, æ‰å¯ä»¥å‚ä¸åˆ° OAuth 2.0 çš„æµç¨‹ä¸­å». ä¹Ÿå°±æ˜¯è¯´, å°å…”è½¯ä»¶éœ€è¦"),s("strong",[t._v("å…ˆæ‹¥æœ‰è‡ªå·±çš„ app_id å’Œ app_serect ç­‰ä¿¡æ¯, åŒæ—¶è¿˜è¦å¡«å†™è‡ªå·±çš„å›è°ƒåœ°å€ redirect_uri, ç”³è¯·æƒé™")]),t._v("ç­‰ä¿¡æ¯.")]),t._v(" "),s("p",[t._v("è¿™ç§æ–¹å¼çš„æ³¨å†Œæœ‰æ—¶å€™ä¹Ÿç§°ä¸º"),s("strong",[t._v("é™æ€æ³¨å†Œ")]),t._v(", ä¹Ÿå°±æ˜¯å°å…”è½¯ä»¶çš„ç ”å‘äººå‘˜æå‰ç™»å½•åˆ°äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œ, ä»¥ä¾¿åç»­ä½¿ç”¨è¿™äº›æ³¨å†Œçš„ç›¸å…³ä¿¡æ¯æ¥è¯·æ±‚è®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¬¬äºŒç‚¹: å¼•å¯¼æˆæƒ.")])]),t._v(" "),s("p",[t._v("å½“ç”¨æˆ·éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶, æ¥æ“ä½œå…¶åœ¨å—ä¿æŠ¤èµ„æºä¸Šçš„æ•°æ®, "),s("strong",[t._v("å°±éœ€è¦ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥å¼•å¯¼æˆæƒ")]),t._v(". æ¯”å¦‚å°æ˜è¦ä½¿ç”¨å°å…”æ‰“å•è½¯ä»¶æ¥å¯¹åº—é“ºé‡Œé¢çš„è®¢å•å‘è´§æ‰“å°, é‚£å°æ˜"),s("strong",[t._v("é¦–å…ˆè®¿é—®çš„ä¸€å®šæ˜¯å°å…”è½¯ä»¶")]),t._v("(åŸåˆ™ä¸Šæ˜¯ç›´æ¥è®¿é—®ç¬¬ä¸‰æ–¹è½¯ä»¶, ä¸è¿‡åœ¨åé¢è®²åˆ°æœåŠ¡å¸‚åœºè¿™ç§åœºæ™¯çš„æ—¶å€™, ä¼šæœ‰ç¨å¾®ä¸åŒ), ä¸ä¼šæ˜¯æˆæƒæœåŠ¡, æ›´ä¸ä¼šæ˜¯å—ä¿æŠ¤èµ„æºæœåŠ¡.")]),t._v(" "),s("p",[t._v('ä½†æ˜¯å°å…”è½¯ä»¶éœ€è¦å°æ˜çš„æˆæƒ, åªæœ‰æˆæƒæœåŠ¡æ‰èƒ½å…è®¸å°æ˜è¿™æ ·åš. æ‰€ä»¥å‘¢, å°å…”è½¯ä»¶éœ€è¦ "é…åˆ" å°æ˜åšçš„ç¬¬ä¸€ä»¶äº‹å„¿, å°±æ˜¯'),s("strong",[t._v("å°†å°æ˜å¼•å¯¼è‡³æˆæƒæœåŠ¡")]),t._v(", å¦‚ä¸‹é¢ä»£ç æ‰€ç¤º.")]),t._v(" "),s("p",[t._v("é‚£å»åšä»€ä¹ˆå‘¢? å…¶å®å°±æ˜¯"),s("strong",[t._v("è®©ç”¨æˆ·ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶æˆæƒ, å¾—åˆ°äº†æˆæƒä¹‹å, ç¬¬ä¸‰æ–¹è½¯ä»¶æ‰å¯ä»¥ä»£è¡¨ç”¨æˆ·å»è®¿é—®æ•°æ®")]),t._v(". ä¹Ÿå°±æ˜¯è¯´, å°å…”æ‰“å•è½¯ä»¶è·å¾—æˆæƒä¹‹å, æ‰èƒ½å¤Ÿä»£è¡¨å°æ˜å¤„ç†å…¶åœ¨äº¬ä¸œåº—é“ºä¸Šçš„è®¢å•æ•°æ®.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å®šå‘åˆ°æˆæƒé¡µ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" oauthUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8081/OauthServlet-ch03?reqType=oauth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRedirect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toOauthUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬ä¸‰ç‚¹: ä½¿ç”¨è®¿é—®ä»¤ç‰Œ.")])]),t._v(" "),s("p",[s("strong",[t._v("æ‹¿åˆ°ä»¤ç‰Œåå»ä½¿ç”¨ä»¤ç‰Œ, æ‰æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æœ€ç»ˆç›®çš„")]),t._v(". ç„¶åçœ‹çœ‹å¦‚ä½•ä½¿ç”¨ä»¤ç‰Œ. ç›®å‰ OAuth 2.0 çš„ä»¤ç‰Œåªæ”¯æŒä¸€ç§ç±»å‹, é‚£å°±æ˜¯ "),s("mark",[s("strong",[t._v("bearer ä»¤ç‰Œ")])]),t._v(", ä¹Ÿå°±æ˜¯ä¹‹å‰è®²åˆ°çš„å¯ä»¥æ˜¯"),s("strong",[t._v("ä»»æ„å­—ç¬¦ä¸²æ ¼å¼çš„ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("p",[t._v("å®˜æ–¹è§„èŒƒç»™å‡ºçš„ä½¿ç”¨è®¿é—®ä»¤ç‰Œè¯·æ±‚çš„æ–¹å¼, æœ‰ä¸‰ç§, åˆ†åˆ«æ˜¯:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Form-Encoded Body Parameter")]),t._v("(è¡¨å•å‚æ•°)")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Content")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" application"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("www"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("form"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("urlencoded\n\naccess_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("b1a64d5c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5e0")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("a70"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9711")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("af6568a61fb\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("URI Query Parameter")]),t._v("(URI æŸ¥è¯¢å‚æ•°)")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("access_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("b1a64d5c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5e0")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("a70"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9711")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("af6568a61fb "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[s("strong",[t._v("Authorization Request Header Field")]),t._v("(æˆæƒè¯·æ±‚å¤´éƒ¨å­—æ®µ)")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authorization")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bearer")]),t._v(" b1a64d5c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5e0")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("a70"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9711")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("af6568a61fb\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("ä¹Ÿå°±æ˜¯è¯´, è¿™ä¸‰ç§æ–¹å¼éƒ½å¯ä»¥è¯·æ±‚åˆ°å—ä¿æŠ¤èµ„æºæœåŠ¡. é‚£é‡‡ç”¨å“ªç§æ–¹å¼æœ€åˆé€‚å‘¢?")]),t._v(" "),s("p",[t._v("æ ¹æ® OAuth 2.0 çš„å®˜æ–¹å»ºè®®, ç³»ç»Ÿåœ¨æ¥å…¥ OAuth 2.0 ä¹‹å‰ä¿¡æ¯ä¼ é€’çš„è¯·æ±‚è½½ä½“æ˜¯ JSON æ ¼å¼çš„, é‚£ä¹ˆå¦‚æœç»§ç»­é‡‡ç”¨è¡¨å•å‚æ•°æäº¤çš„æ–¹å¼, ä»¤ç‰Œå°±æ— æ³•åŠ å…¥è¿›å»äº†, å› ä¸ºæ ¼å¼ä¸ç¬¦. å¦‚æœè¿™æ—¶é‡‡ç”¨å‚æ•°ä¼ é€’çš„æ–¹å¼å‘¢, æ•´ä¸ª URI ä¼šè¢«æ•´ä½“å¤åˆ¶, å®‰å…¨æ€§æ˜¯æœ€å·®çš„. è€Œè¯·æ±‚å¤´éƒ¨å­—æ®µçš„æ–¹å¼å°±æ²¡æœ‰ä¸Šè¿°çš„è¿™äº›é—®é¢˜, å› æ­¤"),s("mark",[s("strong",[t._v("å®˜æ–¹çš„å»ºè®®æ˜¯é‡‡ç”¨ Authorization çš„æ–¹å¼æ¥ä¼ é€’ä»¤ç‰Œ")])]),t._v(".")]),t._v(" "),s("p",[t._v("ä½†æ˜¯"),s("mark",[s("strong",[t._v("å»ºè®®é‡‡ç”¨è¡¨å•æäº¤, ä¹Ÿå°±æ˜¯ POST çš„æ–¹å¼æ¥æäº¤ä»¤ç‰Œ")])]),t._v("â€‹ **, ** ç±»ä¼¼å¦‚ä¸‹ä»£ç æ‰€ç¤º. åŸå› æ˜¯è¿™æ ·çš„, ä»å®˜æ–¹çš„å»ºè®®ä¸­ä¹Ÿå¯ä»¥çœ‹å‡º, å®ƒæŒ‡çš„æ˜¯åœ¨æ¥å…¥ OAuth 2.0 ä¹‹å‰, å¦‚æœå·²ç»é‡‡ç”¨äº† JSON æ•°æ®æ ¼å¼è¯·æ±‚ä½“çš„æƒ…å†µä¸‹, ä¸å»ºè®®ä½¿ç”¨è¡¨å•æäº¤. ä½†å¦‚æœåˆšå¼€å§‹çš„æ—¶å€™, åªè¦ä¸‰æ–¹è½¯ä»¶å’Œå¹³å°ä¹‹é—´çº¦æŸå¥½äº†, å¤§å®¶ä¸€è‡´é‡‡ç”¨è¡¨å•æäº¤, å°±æ²¡æœ‰ä»»ä½•é—®é¢˜äº†. "),s("strong",[t._v("å› ä¸ºè¡¨å•æäº¤çš„æ–¹å¼åœ¨ä¿è¯å®‰å…¨ä¼ è¾“çš„åŒæ—¶, è¿˜ä¸éœ€è¦å»é¢å¤–å¤„ç† Authorization å¤´éƒ¨ä¿¡æ¯")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" protectedURl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8082/ProtectedServlet-ch03"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" paramsMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nparamsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPID_RABBIT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparamsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRET_RABBIT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparamsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("protectedURl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("paramsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("blockquote",[s("p",[t._v("ç¬¬å››ç‚¹: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ.")])]),t._v(" "),s("p",[t._v("åœ¨è®²æˆæƒæœåŠ¡çš„æ—¶å€™æåˆ°è¿‡, å¦‚æœè®¿é—®ä»¤ç‰Œè¿‡æœŸäº†, å°å…”è½¯ä»¶æ€»ä¸èƒ½ç«‹é©¬æç¤ºå¹¶è®©å°æ˜é‡æ–°æˆæƒä¸€æ¬¡, å¦åˆ™å°æ˜çš„ä½“éªŒå°†ä¼šéå¸¸ä¸å¥½. ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å‘¢, å°±ç”¨åˆ°äº†"),s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("p",[t._v("ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œçš„æ–¹å¼è·Ÿä½¿ç”¨è®¿é—®ä»¤ç‰Œæ˜¯ä¸€æ ·çš„, å…·ä½“å¯ä»¥å‚ç…§ä¸Šé¢è®²çš„è®¿é—®ä»¤ç‰Œçš„æ–¹å¼. å…³äºåˆ·æ–°ä»¤ç‰Œçš„ä½¿ç”¨, "),s("strong",[t._v("æœ€éœ€è¦å…³å¿ƒçš„æ˜¯ä»€ä¹ˆæ—¶å€™ä¼šæ¥å†³å®šä½¿ç”¨åˆ·æ–°ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("p",[t._v("åœ¨å°å…”æ‰“å•è½¯ä»¶æ”¶åˆ°è®¿é—®ä»¤ç‰Œçš„åŒæ—¶, ä¹Ÿä¼šæ”¶åˆ°è®¿é—®ä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´ expires_in. ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç¬¬ä¸‰æ–¹åº”ç”¨, "),s("strong",[t._v("åº”è¯¥å°† expires_in å€¼ä¿å­˜ä¸‹æ¥å¹¶å®šæ—¶æ£€æµ‹")]),t._v("; å¦‚æœ"),s("strong",[t._v("å‘ç° expires_in å³å°†è¿‡æœŸ, åˆ™éœ€è¦åˆ©ç”¨ refresh_token å»é‡æ–°è¯·æ±‚æˆæƒæœåŠ¡, ä»¥ä¾¿è·å–æ–°çš„, æœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("p",[t._v("è¿™ç§"),s("strong",[t._v("å®šæ—¶æ£€æµ‹")]),t._v('çš„æ–¹æ³•å¯ä»¥æå‰å‘ç°è®¿é—®ä»¤ç‰Œæ˜¯å¦å³å°†è¿‡æœŸ. æ­¤å¤–, è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯"ç°åœº"å‘ç°. ä¹Ÿå°±æ˜¯è¯´, æ¯”å¦‚å°å…”è½¯ä»¶è®¿é—®å°æ˜åº—é“ºè®¢å•çš„æ—¶å€™, çªç„¶æ”¶åˆ°ä¸€ä¸ªè®¿é—®ä»¤ç‰Œå¤±æ•ˆçš„å“åº”, æ­¤æ—¶å°å…”è½¯ä»¶ç«‹å³ä½¿ç”¨ refresh_token æ¥è¯·æ±‚ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ, ä»¥ä¾¿ç»§ç»­ä»£è¡¨å°æ˜ä½¿ç”¨ä»–çš„æ•°æ®.')]),t._v(" "),s("p",[t._v('ç»¼åˆæ¥çœ‹çš„è¯, å®šæ—¶æ£€æµ‹çš„æ–¹å¼, éœ€è¦é¢å¤–å¼€å‘ä¸€ä¸ªå®šæ—¶ä»»åŠ¡; è€Œ"ç°åœº"å‘ç°, å°±æ²¡æœ‰è¿™ç§é¢å¤–çš„å·¥ä½œé‡. å…·ä½“é‡‡ç”¨å“ªä¸€ç§æ–¹å¼, å¯ä»¥ç»“åˆè‡ªå·±çš„å®é™…æƒ…å†µ. ä¸è¿‡è¿˜æ˜¯'),s("strong",[t._v('å»ºè®®é‡‡ç”¨å®šæ—¶æ£€æµ‹è¿™ç§æ–¹å¼, å› ä¸ºå®ƒå¯ä»¥å¸¦æ¥"æå‰é‡"')]),t._v(" , ä»¥ä¾¿è®©æœ‰æ›´å¥½çš„ä¸»åŠ¨æ€§, è€Œç°åœºå‘ç°å°±æœ‰ç‚¹è¢«åŠ¨äº†.")]),t._v(" "),s("p",[t._v("è¦å†æ¬¡æ³¨æ„çš„æ˜¯, "),s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œæ˜¯ä¸€æ¬¡æ€§çš„, ä½¿ç”¨ä¹‹åå°±ä¼šå¤±æ•ˆ")]),t._v(", ä½†æ˜¯å®ƒçš„"),s("strong",[t._v("æœ‰æ•ˆæœŸä¼šæ¯”è®¿é—®ä»¤ç‰Œè¦é•¿")]),t._v(". è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šæƒ³åˆ°, "),s("mark",[s("strong",[t._v("å¦‚æœåˆ·æ–°ä»¤ç‰Œä¹Ÿè¿‡æœŸäº†æ€ä¹ˆåŠ? åœ¨è¿™ç§æƒ…å†µä¸‹, å°±éœ€è¦å°†åˆ·æ–°ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œéƒ½æ”¾å¼ƒ, ç›¸å½“äºå›åˆ°äº†ç³»ç»Ÿçš„åˆå§‹çŠ¶æ€, åªèƒ½è®©ç”¨æˆ·å°æ˜é‡æ–°æˆæƒäº†")])]),t._v(".")]),t._v(" "),s("p",[t._v("æ€»ç»“ä¸‹, åœ¨æ„å»ºç¬¬ä¸‰æ–¹åº”ç”¨æ—¶, éœ€è¦é‡ç‚¹å…³æ³¨çš„å°±æ˜¯"),s("strong",[t._v("æ³¨å†Œ, æˆæƒ, è®¿é—®ä»¤ç‰Œ, åˆ·æ–°ä»¤ç‰Œ")]),t._v(". åªè¦æŒæ¡äº†è¿™å››éƒ¨åˆ†å†…å®¹, åœ¨ç±»ä¼¼äº¬ä¸œè¿™æ ·çš„å¼€æ”¾å¹³å°ä¸Šå¼€å‘å°å…”è½¯ä»¶, å°±ä¸å†æ˜¯ä»€ä¹ˆå›°éš¾çš„äº‹æƒ…äº†.")]),t._v(" "),s("h5",{attrs:{id:"_2-æœåŠ¡å¸‚åœºä¸­çš„ç¬¬ä¸‰æ–¹åº”ç”¨è½¯ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æœåŠ¡å¸‚åœºä¸­çš„ç¬¬ä¸‰æ–¹åº”ç”¨è½¯ä»¶"}},[t._v("#")]),t._v(" 2.æœåŠ¡å¸‚åœºä¸­çš„ç¬¬ä¸‰æ–¹åº”ç”¨è½¯ä»¶")]),t._v(" "),s("p",[t._v('åœ¨æ„å»ºç¬¬ä¸‰æ–¹åº”ç”¨çš„å¼•å¯¼æˆæƒæ—¶, å‰é¢è¯´ç”¨æˆ·ç¬¬ä¸€æ¬¡"è§¦æ‘¸"åˆ°çš„ä¸€å®šæ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶, ä½†è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„. è¿™ä¸ªä¸ç»å¯¹, å°±å‘ç”Ÿåœ¨æœåŠ¡å¸‚åœºè¿™æ ·çš„åœºæ™¯é‡Œ.')]),t._v(" "),s("p",[t._v('é‚£ä»€ä¹ˆæ˜¯æœåŠ¡å¸‚åœºå‘¢? å°±æ˜¯ä½ å¼€å‘çš„è½¯ä»¶, æ¯”å¦‚å°å…”æ‰“å•è½¯ä»¶, åº—é“ºè£…ä¿®è½¯ä»¶ç­‰, éƒ½å‘å¸ƒåˆ°è¿™æ ·ä¸€ä¸ªå¸‚åœºé‡Œé¢å”®å–. è¿™æ ·, å½“ç”¨æˆ·è´­ä¹°äº†è¿™äº›è½¯ä»¶ä¹‹å, å°±å¯ä»¥åœ¨æœåŠ¡å¸‚åœºé‡Œé¢çœ‹åˆ°æœ‰ä¸ª"ç«‹å³ä½¿ç”¨"çš„æŒ‰é’®. ç‚¹å‡»è¿™ä¸ªæŒ‰é’®, ç”¨æˆ·å°±å¯ä»¥ç›´æ¥è®¿é—®è‡ªå·±è´­ä¹°çš„ç¬¬ä¸‰æ–¹è½¯ä»¶äº†.')]),t._v(" "),s("p",[t._v('æ¯”å¦‚, äº¬ä¸œçš„äº¬éº¦æœåŠ¡å¸‚åœºé‡Œæœ‰ä¸ª"æˆ‘çš„æœåŠ¡"ç›®å½•, é‡Œé¢å°±å­˜æ”¾äº†æˆ‘è´­ä¹°çš„æ‰“å•è½¯ä»¶. å°æ˜å°±å¯ä»¥ç›´æ¥ç‚¹å‡»"ç«‹å³ä½¿ç”¨", ç»§è€Œè¿›å…¥å°å…”æ‰“å•è½¯ä»¶, å¦‚ä¸‹å›¾æ‰€ç¤º.')]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/369a2bf869bb81ea611fec44ce3916c1-20230729094013-jc5f3vi.png",alt:""}}),t._v("â€‹é‚£ä¹ˆ, è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, "),s("strong",[t._v("ä½œä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æ¥æ„å»ºç¬¬ä¸‰æ–¹è½¯ä»¶çš„æ—¶å€™, åœ¨æˆæƒç ç¯èŠ‚é™¤äº†è¦æ¥æ”¶æˆæƒç  code å€¼ä¹‹å¤–, è¿˜è¦æ¥æ”¶ç”¨æˆ·çš„è®¢è´­ç›¸å…³ä¿¡æ¯, æ¯”å¦‚æœåŠ¡çš„ç‰ˆæœ¬å·, æœåŠ¡ä»£ç æ ‡è¯†ç­‰ä¿¡æ¯")]),t._v(".")]),t._v(" "),s("p",[t._v("ä»¥ä¸Šå°±æ˜¯å…³äºæ„å»ºç¬¬ä¸‰æ–¹è½¯ä»¶æ—¶éœ€è¦æ³¨æ„çš„ä¸€äº›ç»†èŠ‚é—®é¢˜äº†.")]),t._v(" "),s("h5",{attrs:{id:"_3-æ„å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ„å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡"}},[t._v("#")]),t._v(" 3.æ„å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å†è°ˆè°ˆæ„å»º"),s("strong",[t._v("å—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v("çš„æ—¶å€™, åˆéœ€è¦é‡ç‚¹å¤„ç†å“ªäº›å·¥ä½œ.")]),t._v(" "),s("p",[t._v("å…ˆæƒ³ä¸€æƒ³, å®é™…ä¸Šåœ¨æ•´ä¸ªå¼€æ”¾æˆæƒçš„ç¯å¢ƒä¸­, "),s("mark",[s("strong",[t._v("å—ä¿æŠ¤èµ„æºæœ€ç»ˆæŒ‡çš„è¿˜æ˜¯ Web API")])]),t._v(", æ¯”å¦‚è®¿é—®å¤´åƒçš„ API, è®¿é—®æ˜µç§°çš„ API. å¯¹åº”åˆ°æ‰“å•è½¯ä»¶ä¸­, å—ä¿æŠ¤èµ„æºå°±æ˜¯è®¢å•æŸ¥è¯¢ API, æ‰¹é‡æŸ¥è¯¢ API ç­‰.")]),t._v(" "),s("p",[t._v("åœ¨äº’è”ç½‘ä¸Šçš„ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡, åŸºæœ¬éƒ½æ˜¯ä»¥ Web API ä¸ºè½½ä½“çš„å½¢å¼è¿›è¡Œ. å› æ­¤, "),s("strong",[t._v("å½“è¯´å—ä¿æŠ¤èµ„æºè¢«æˆæƒæœåŠ¡ä¿æŠ¤ç€æ—¶, å®é™…ä¸Šè¯´çš„æ˜¯æˆæƒæœåŠ¡æœ€ç»ˆä¿æŠ¤çš„æ˜¯è¿™äº› Web API")]),t._v(". åœ¨æ„å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡çš„æ—¶å€™, é™¤äº†åŸºæœ¬çš„è¦æ£€æŸ¥ä»¤ç‰Œçš„åˆæ³•æ€§, è¿˜éœ€è¦åšäº›ä»€ä¹ˆå‘¢? **æœ€é‡è¦çš„å°±æ˜¯æƒé™èŒƒå›´äº†. **")]),t._v(" "),s("p",[t._v("åœ¨å¤„ç†å—ä¿æŠ¤èµ„æºæœåŠ¡ä¸­çš„é€»è¾‘çš„æ—¶å€™, "),s("strong",[t._v("æ ¡éªŒæƒé™çš„å¤„ç†ä¼šå æ®å¾ˆå¤§çš„æ¯”é‡")]),t._v(". å› ä¸ºè®¿é—®ä»¤ç‰Œæ¥çš„æ—¶å€™, è‚¯å®šè¦å¤šçœ‹çœ‹ä»¤ç‰Œåˆ°åº•èƒ½æ“ä½œå“ªäº›åŠŸèƒ½, åˆèƒ½è®¿é—®å“ªäº›æ•°æ®. æŠŠè¿™äº›æƒé™çš„ç±»åˆ«æ€»ç»“å½’çº³ä¸‹æ¥, æœ€å¸¸è§çš„å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç±».")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/e220e72c930e21602e5fb5f96a94dac8-20230729094013-nhn0yia.png",alt:"",title:"3ç±»æƒé™ç±»åˆ«"}})]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å…·ä½“è¯´è¯´è¿™äº›æƒé™æ˜¯å¦‚ä½•ä½¿ç”¨çš„.")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸åŒçš„æƒé™å¯¹åº”ä¸åŒçš„æ“ä½œ.")])]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„æ“ä½œ, å…¶å®å¯¹åº”çš„æ˜¯ "),s("strong",[t._v("Web API")]),t._v(", æ¯”å¦‚ç›®å‰äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°æä¾›æœ‰æŸ¥è¯¢å•†å“ API, æ–°å¢å•†å“ API, åˆ é™¤å•†å“ API è¿™ä¸‰ç§. å¦‚æœå°å…”è½¯ä»¶è¯·æ±‚è¿‡æ¥çš„ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ access_token çš„ scope æƒé™èŒƒå›´åªå¯¹åº”äº†æŸ¥è¯¢å•†å“ API, æ–°å¢å•†å“ API, é‚£ä¹ˆåŒ…å«è¿™ä¸ª access_token å€¼çš„è¯·æ±‚, å°±ä¸èƒ½æ‰§è¡Œåˆ é™¤å•†å“ API çš„æ“ä½œ.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸åŒçš„æƒé™å¯¹åº”ä¸åŒçš„æ“ä½œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" scope "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OauthServlet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tokenScopeMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringBuffer")]),t._v(" sbuf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    sbuf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sbuf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryGoods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sbuf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addGoods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sbuf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"del"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delGoods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("blockquote",[s("p",[t._v("ä¸åŒçš„æƒé™å¯¹åº”ä¸åŒçš„æ•°æ®.")])]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„æ•°æ®, å°±æ˜¯"),s("strong",[t._v("æŒ‡æŸä¸€ä¸ª API é‡ŒåŒ…å«çš„å±æ€§å­—æ®µä¿¡æ¯")]),t._v(". æ¯”å¦‚, æœ‰ä¸€ä¸ªæŸ¥è¯¢å°æ˜ä¿¡æ¯çš„ API, è¿”å›çš„ä¿¡æ¯åŒ…æ‹¬ Contact(email, phone, qq), Like(Basketball, Swimming), Personal Data(sex, age, nickname). å¦‚æœå°å…”è½¯ä»¶è¯·æ±‚è¿‡æ¥çš„ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ access_token çš„ scope æƒé™èŒƒå›´åªå¯¹åº”äº† Personal Data, é‚£ä¹ˆåŒ…å«è¯¥ access_token å€¼çš„è¯·æ±‚å°±ä¸èƒ½è·å–åˆ° Contact å’Œ Like çš„ä¿¡æ¯, å…³äºè¿™éƒ¨åˆ†çš„ä»£ç , å®é™…è·Ÿä¸åŒæƒé™å¯¹åº”ä¸åŒæ“ä½œçš„ä»£ç ç±»ä¼¼.")]),t._v(" "),s("p",[t._v('çœ‹åˆ°è¿™é‡Œå°±å¯ä»¥æ˜ç™½, è¿™ç§æƒé™èŒƒå›´çš„ç²’åº¦è¦æ¯”"ä¸åŒçš„æƒé™å¯¹åº”ä¸åŒçš„æ“ä½œ"çš„ç²’åº¦è¦å°. è¿™æ­£æ˜¯éµå¾ªäº†æœ€å°æƒé™èŒƒå›´åŸåˆ™.')]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸åŒçš„ç”¨æˆ·å¯¹åº”ä¸åŒçš„æ•°æ®.")])]),t._v(" "),s("p",[t._v("è¿™ç§æƒé™æ˜¯ä»€ä¹ˆæ„æ€å‘¢? å…¶å®, è¿™ç§æƒé™å®é™…ä¸Š"),s("strong",[t._v("åªæ˜¯æ¢äº†ä¸€ç§ç»´åº¦")]),t._v(", å°†å…¶å®šä½åˆ°äº†ç”¨æˆ·ä¸Šé¢.")]),t._v(" "),s("p",[t._v('ä¸€äº›åŸºç¡€ç±»ä¿¡æ¯, æ¯”å¦‚è·å–åœ°ç†ä½ç½®, è·å–å¤©æ°”é¢„æŠ¥ç­‰, ä¸ä¼šå¸¦æœ‰ç”¨æˆ·å½’å±å±æ€§, ä¹Ÿå°±æ˜¯è¯´è¿™äº›ä¿¡æ¯å¹¶ä¸å½’å±äºæŸä¸ªç”¨æˆ·, æ˜¯ä¸€ç±»å…¬æœ‰ä¿¡æ¯. å¯¹äºè¿™æ ·çš„ä¿¡æ¯, å¹³å°æä¾›å‡ºå»çš„ API æ¥å£éƒ½æ˜¯ "ä¸­æ€§" çš„, æ²¡æœ‰ç”¨æˆ·å±æ€§.')]),t._v(" "),s("p",[t._v("ä½†æ˜¯æ›´å¤šçš„åœºæ™¯å´æ˜¯åŸºäºç”¨æˆ·å±æ€§çš„. è¿˜æ˜¯ä»¥å°å…”æ‰“å•è½¯ä»¶ä¸ºä¾‹, å•†å®¶æ¯æ¬¡æ‰“å°ç‰©æµé¢å•çš„æ—¶å€™, å°å…”æ‰“å•è½¯ä»¶éƒ½è¦çŸ¥é“æ˜¯å“ªä¸ªå•†å®¶çš„è®¢å•. è¿™ç§æƒ…å†µä¸‹, å•†å®¶ä¸ºå°å…”è½¯ä»¶æˆæƒ, å°å…”è½¯ä»¶è·å–çš„ access_token å®é™…ä¸Šå°±"),s("strong",[t._v("åŒ…å«äº†å•†å®¶è¿™ä¸ªç”¨æˆ·å±æ€§")]),t._v(".")]),t._v(" "),s("p",[t._v("äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„å—ä¿æŠ¤èµ„æºæœåŠ¡æ¯æ¬¡æ¥æ”¶åˆ°å°å…”è½¯ä»¶çš„è¯·æ±‚æ—¶, éƒ½ä¼šæ ¹æ®è¯¥è¯·æ±‚ä¸­ access_token çš„å€¼æ‰¾åˆ°å¯¹åº”çš„å•†å®¶ ID, ç»§è€Œæ ¹æ®å•†å®¶ ID æŸ¥è¯¢åˆ°å•†å®¶çš„è®¢å•ä¿¡æ¯, ä¹Ÿå°±æ˜¯ä¸åŒçš„å•†å®¶å¯¹åº”ä¸åŒçš„è®¢å•æ•°æ®.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸åŒçš„ç”¨æˆ·å¯¹åº”ä¸åŒçš„æ•°æ®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OauthServlet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tokenMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryOrders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("åœ¨ä¸Šé¢è®²ä¸‰ç§æƒé™çš„æ—¶å€™, ä¸¾çš„ä¾‹å­å®é™…ä¸Šéƒ½å±äºä¸€ä¸ªç³»ç»Ÿæä¾›äº†æŸ¥è¯¢, æ·»åŠ , åˆ é™¤è¿™æ ·çš„æ‰€æœ‰æœåŠ¡. æ­¤æ—¶ä½ å¯èƒ½ä¼šæƒ³åˆ°, ç°åœ¨çš„ç³»ç»Ÿä¸å·²ç»æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒäº†ä¹ˆ, "),s("strong",[t._v("å¦‚æœæœ‰å¾ˆå¤šä¸ªå—ä¿æŠ¤èµ„æºæœåŠ¡, æ¯”å¦‚æä¾›ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢çš„ç”¨æˆ·èµ„æºæœåŠ¡, æä¾›å•†å“æŸ¥è¯¢çš„å•†å“èµ„æºæœåŠ¡, æä¾›è®¢å•æŸ¥è¯¢çš„è®¢å•èµ„æºæœåŠ¡, é‚£ä¹ˆæ¯ä¸ªå—ä¿æŠ¤èµ„æºæœåŠ¡å²‚ä¸æ˜¯éƒ½è¦æŠŠä¸Šè¿°çš„æƒé™èŒƒå›´æ ¡éªŒæ‰§è¡Œä¸€éå—, è¿™æ ·ä¸å°±ä¼šæœ‰å¤§é‡çš„é‡å¤å·¥ä½œäº§ç”Ÿä¹ˆ")]),t._v("?")]),t._v(" "),s("p",[t._v("ç¡®å®ä¼šæœ‰è¿™ç§æƒ…å†µ. "),s("mark",[s("strong",[t._v("ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µ, åº”è¯¥æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ç½‘å…³å±‚æ¥å¤„ç†è¿™æ ·çš„æ ¡éªŒ, æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šç»è¿‡ API GATEWAY è·³è½¬åˆ°ä¸åŒçš„å—ä¿æŠ¤èµ„æºæœåŠ¡")])]),t._v(". è¿™æ ·å°±ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªå—ä¿æŠ¤èµ„æºæœåŠ¡ä¸Šéƒ½åšä¸€éæƒé™æ ¡éªŒçš„å·¥ä½œäº†, è€Œåªéœ€è¦"),s("strong",[t._v("åœ¨ API GATEWAY è¿™ä¸€å±‚åšæƒé™æ ¡éªŒ")]),t._v("å°±å¯ä»¥äº†. ç³»ç»Ÿç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/8c2f08d40d91f589bacd8417017cfa32-20230729094013-lygo1yw.png",alt:"",title:"ç”±ç»Ÿä¸€çš„ç½‘å…³å±‚å¤„ç†æƒé™æ ¡éªŒ"}})]),t._v(" "),s("h5",{attrs:{id:"_4-æ€»ç»“-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€»ç»“-3"}},[t._v("#")]),t._v(" 4.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚å¼€å§‹çš„æ—¶å€™, æåˆ° OAuth 2.0 çš„å¤æ‚æ€§å®é™…ä¸Šéƒ½ç»™äº†æˆæƒæœåŠ¡æ¥æ‰¿æ‹…, æ¥ç€ä»ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œå—ä¿æŠ¤èµ„æºçš„è§’åº¦, åˆ†åˆ«ä»‹ç»äº†è¿™ä¸¤éƒ¨åˆ†ç³»ç»Ÿåœ¨æ¥å…¥ OAuth 2.0 çš„æ—¶å€™åº”è¯¥æ³¨æ„å“ªäº›æ–¹é¢.")]),t._v(" "),s("p",[t._v("æ€»ç»“ä¸‹æ¥æœ¬èŠ‚è®°ä½ä»¥ä¸‹ä¸¤ç‚¹.")]),t._v(" "),s("ul",[s("li",[t._v("å¯¹äºç¬¬ä¸‰æ–¹è½¯ä»¶, æ¯”å¦‚å°å…”æ‰“å•è½¯ä»¶æ¥è®², "),s("strong",[t._v("å®ƒçš„ä¸»è¦ç›®çš„å°±æ˜¯è·å–è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨è®¿é—®ä»¤ç‰Œ")]),t._v(", è¿™å½“ç„¶ä¹Ÿæ˜¯æ•´ä¸ª OAuth 2.0 çš„ç›®çš„, å°±æ˜¯è®©ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥åšè¿™ä¸¤ä»¶äº‹. åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦å¼ºè°ƒçš„æ˜¯, ç¬¬ä¸‰æ–¹è½¯ä»¶åœ¨ä½¿ç”¨è®¿é—®ä»¤ç‰Œçš„æ—¶å€™æœ‰ä¸‰ç§æ–¹å¼, å»ºè®®åœ¨å¹³å°å’Œç¬¬ä¸‰æ–¹è½¯ä»¶çº¦å®šå¥½çš„å‰æä¸‹, "),s("strong",[t._v("ä¼˜å…ˆé‡‡ç”¨ Post è¡¨å•æäº¤çš„æ–¹å¼")]),t._v(".")]),t._v(" "),s("li",[t._v("å—ä¿æŠ¤èµ„æºç³»ç»Ÿ, æ¯”å¦‚å°å…”è½¯ä»¶è¦è®¿é—®å¼€æ”¾å¹³å°çš„è®¢å•æ•°æ®æœåŠ¡, å®ƒéœ€è¦æ³¨æ„çš„æ˜¯æƒé™çš„é—®é¢˜, è¿™ä¸ªæƒé™èŒƒå›´ä¸»è¦åŒ…æ‹¬, "),s("strong",[t._v("ä¸åŒçš„æƒé™ä¼šæœ‰ä¸åŒçš„æ“ä½œ, ä¸åŒçš„æƒé™ä¹Ÿä¼šå¯¹åº”ä¸åŒçš„æ•°æ®, ä¸åŒçš„ç”¨æˆ·ä¹Ÿä¼šå¯¹åº”ä¸åŒçš„æ•°æ®")]),t._v(".")])]),t._v(" "),s("h4",{attrs:{id:"é™¤äº†æˆæƒç è®¸å¯ç±»å‹-oauth-2-0è¿˜æ”¯æŒä»€ä¹ˆæˆæƒæµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é™¤äº†æˆæƒç è®¸å¯ç±»å‹-oauth-2-0è¿˜æ”¯æŒä»€ä¹ˆæˆæƒæµç¨‹"}},[t._v("#")]),t._v(" é™¤äº†æˆæƒç è®¸å¯ç±»å‹, OAuth 2.0è¿˜æ”¯æŒä»€ä¹ˆæˆæƒæµç¨‹")]),t._v(" "),s("p",[s("strong",[t._v("æˆæƒç è®¸å¯çš„æµç¨‹æœ€å®Œå¤‡, æœ€å®‰å…¨æ²¡é”™å„¿, ä½†å®ƒé€‚åˆæ‰€æœ‰çš„æˆæƒåœºæ™¯å—? åœ¨æœ‰äº›åœºæ™¯ä¸‹ä½¿ç”¨æˆæƒç è®¸å¯æˆæƒ, æ˜¯ä¸æ˜¯è¿‡äºå¤æ‚äº†, æ˜¯ä¸æ˜¯æ ¹æœ¬å°±æ²¡å¿…è¦è¿™æ ·?")])]),t._v(" "),s("p",[t._v("æ¯”å¦‚, å°å…”æ‰“å•è½¯ä»¶æ˜¯äº¬ä¸œ"),s("strong",[t._v("å®˜æ–¹å¼€å‘")]),t._v("çš„ä¸€æ¬¾è½¯ä»¶, é‚£ä¹ˆå°æ˜åœ¨ä½¿ç”¨å°å…”çš„æ—¶å€™, è¿˜éœ€è¦å°å…”å†èµ°ä¸€éæˆæƒç è®¸å¯ç±»å‹çš„æµç¨‹å—? ä¼°è®¡ä½ ä¹ŸçŒœåˆ°ç­”æ¡ˆäº†, è‚¯å®šæ˜¯ä¸éœ€è¦äº†.")]),t._v(" "),s("p",[t._v("æˆæƒç è®¸å¯æµç¨‹ä¸­é€šè¿‡æˆæƒç è¿™ç§ä¸´æ—¶çš„ä¸­é—´å€¼, è®©å°æ˜è¿™æ ·çš„ç”¨æˆ·å‚ä¸è¿›æ¥, ä»è€Œè®©å°å…”è½¯ä»¶å’Œäº¬ä¸œä¹‹é—´å»ºç«‹è”ç³», è¿›è€Œè®©å°å…”ä»£è¡¨å°æ˜å»è®¿é—®ä»–åœ¨äº¬ä¸œåº—é“ºçš„è®¢å•æ•°æ®.")]),t._v(" "),s("p",[t._v('ç°åœ¨å°å…”è¢«"æ‹›å®‰"äº†, æ˜¯äº¬ä¸œè‡ªå®¶çš„äº†, '),s("strong",[t._v('æ˜¯è¢«äº¬ä¸œå……åˆ†ä¿¡ä»»çš„, æ²¡æœ‰"ç¬¬ä¸‰æ–¹è½¯ä»¶"çš„æ¦‚å¿µ')]),t._v("äº†. åŒæ—¶å°æ˜ä¹Ÿæ˜¯äº¬ä¸œåº—é“ºçš„å•†å®¶, ä¹Ÿå°±æ˜¯è¯´è½¯ä»¶å’Œç”¨æˆ·éƒ½æ˜¯äº¬ä¸œçš„èµ„äº§. è¿™æ—¶æ˜¾ç„¶æ²¡æœ‰å¿…è¦å†ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹è¿›è¡Œæˆæƒäº†. ä½†æ˜¯å°å…”ä¾ç„¶è¦é€šè¿‡äº’è”ç½‘è®¿é—®è®¢å•æ•°æ®çš„ Web API, æ¥æä¾›ä¸ºå°æ˜æ‰“å•çš„åŠŸèƒ½.")]),t._v(" "),s("p",[t._v("äºæ˜¯, ä¸ºäº†ä¿æŠ¤è¿™äº›åœºæ™¯ä¸‹çš„ Web API, åˆä¸ºäº†è®© OAuth 2.0 æ›´å¥½åœ°é€‚åº”ç°å®ä¸–ç•Œçš„æ›´å¤šåœºæ™¯, æ¥è§£å†³æ¯”å¦‚ä¸Šè¿°å°å…”è½¯ä»¶è¿™æ ·çš„æ¡ˆä¾‹, OAuth 2.0 ä½“ç³»ä¸­è¿˜æä¾›äº†"),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_1-èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯"}},[t._v("#")]),t._v(" 1.èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯")]),t._v(" "),s("p",[t._v('ä»"èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯"è¿™ä¸ªå‘½åå°±å¯ä»¥å¤§æ¦‚ç†è§£å®ƒçš„å«ä¹‰. '),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…çš„å‡­æ®, å°±æ˜¯ç”¨æˆ·çš„å‡­æ®, å°±æ˜¯ç”¨æˆ·åå’Œå¯†ç ")]),t._v(". å¯è§, è¿™æ˜¯æœ€ç³Ÿç³•çš„ä¸€ç§æ–¹å¼. é‚£ä¸ºä»€ä¹ˆ OAuth 2.0 è¿˜æ”¯æŒè¿™ç§è®¸å¯ç±»å‹, è€Œä¸”ç¼–å…¥äº† OAuth 2.0 çš„è§„èŒƒå‘¢?")]),t._v(" "),s("p",[t._v('å…ˆæ¥æ€è€ƒä¸€ä¸‹. æ­£å¦‚ä¸Šé¢æåˆ°çš„, å°å…”æ­¤æ—¶å°±æ˜¯äº¬ä¸œå®˜æ–¹å‡ºå“çš„ä¸€æ¬¾è½¯ä»¶, å°æ˜ä¹Ÿæ˜¯äº¬ä¸œçš„ç”¨æˆ·, é‚£ä¹ˆå°æ˜å…¶å®æ˜¯å¯ä»¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ¥ç›´æ¥ä½¿ç”¨å°å…”è¿™æ¬¾è½¯ä»¶çš„. åŸå› å¾ˆç®€å•, é‚£å°±æ˜¯è¿™é‡Œä¸å†æœ‰"ç¬¬ä¸‰æ–¹"çš„æ¦‚å¿µäº†.')]),t._v(" "),s("p",[s("strong",[t._v("ä½†å¦‚æœæ¯æ¬¡å°å…”éƒ½æ˜¯æ‹¿ç€å°æ˜çš„ç”¨æˆ·åå’Œå¯†ç æ¥é€šè¿‡è°ƒç”¨ Web API çš„æ–¹å¼, æ¥è®¿é—®å°æ˜åº—é“ºçš„è®¢å•æ•°æ®, ç”šè‡³è¿˜æœ‰å•†å“ä¿¡æ¯ç­‰, åœ¨è°ƒç”¨è¿™ä¹ˆå¤š API çš„æƒ…å†µä¸‹, æ— ç–‘å¢åŠ äº†ç”¨æˆ·åå’Œå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯çš„æ”»å‡»é¢.")])]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯ä½¿ç”¨äº† "),s("strong",[t._v("token")]),t._v(" æ¥ä»£æ›¿è¿™äº›æ•æ„Ÿä¿¡æ¯, ä¸å°±èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šä¿æŠ¤æ•æ„Ÿä¿¡æ¯æ•°æ®äº†å—? è¿™æ ·å°å…”è½¯ä»¶"),s("strong",[t._v("åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ç”¨æˆ·åå’Œå¯†ç æ•°æ®æ¥æ¢å›ä¸€ä¸ª token, è¿›è€Œé€šè¿‡ token æ¥è®¿é—®å°æ˜åº—é“ºçš„æ•°æ®, ä»¥åå°±ä¸ä¼šå†ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç äº†")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥ä¸€èµ·çœ‹ä¸‹è¿™ç§è®¸å¯ç±»å‹çš„æµç¨‹, å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/7a045aa15e99de851a951b46d7255b95-20230729094013-plignrr.png",alt:"",title:"èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹çš„æµç¨‹"}})]),t._v(" "),s("p",[t._v("æ­¥éª¤ 1: å½“ç”¨æˆ·è®¿é—®ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”æ—¶, ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç . "),s("strong",[t._v("ç´¢è¦ç”¨æˆ·åå’Œå¯†ç , å°±æ˜¯èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹çš„ç‰¹ç‚¹")]),t._v(".")]),t._v(" "),s("p",[t._v("æ­¥éª¤ 2: "),s("strong",[t._v("è¿™é‡Œçš„ grant_type çš„å€¼ä¸º password")]),t._v(", å‘Šè¯‰"),s("strong",[t._v("æˆæƒæœåŠ¡ä½¿ç”¨èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯å‡­æ®çš„æ–¹å¼")]),t._v("å»è¯·æ±‚è®¿é—®.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grant_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPIDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRETTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NAMETEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PASSWORDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oauthURl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("æ­¥éª¤ 3: "),s("strong",[t._v("æˆæƒæœåŠ¡åœ¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç ä¹‹å, ç”Ÿæˆ access_token çš„å€¼å¹¶è¿”å›ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grantType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appSecret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRETTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret is not available"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERNAMETEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username is not available"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PASSWORDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password is not available"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç”Ÿæˆè®¿é—®ä»¤ç‰Œaccess_tokençš„å€¼")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("å› æ­¤, "),s("strong",[t._v("å¦‚æœè½¯ä»¶æ˜¯å®˜æ–¹å‡ºå“çš„, åˆè¦ä½¿ç”¨ OAuth 2.0 æ¥ä¿æŠ¤ Web API, é‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹")]),t._v(".")]),t._v(" "),s("p",[t._v("é™¤äº†èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹å¤–, OAuth 2.0 ä½“ç³»é’ˆå¯¹ç°å®çš„ç¯å¢ƒè¿˜æä¾›äº†"),s("strong",[t._v("å®¢æˆ·ç«¯å‡­æ®è®¸å¯å’Œéšå¼è®¸å¯ç±»å‹")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_2-å®¢æˆ·ç«¯å‡­æ®è®¸å¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯å‡­æ®è®¸å¯"}},[t._v("#")]),t._v(" 2.å®¢æˆ·ç«¯å‡­æ®è®¸å¯")]),t._v(" "),s("p",[t._v("å¦‚æœ"),s("strong",[t._v("æ²¡æœ‰æ˜ç¡®çš„èµ„æºæ‹¥æœ‰è€…")]),t._v(", æ¢å¥è¯è¯´å°±æ˜¯, å°å…”è½¯ä»¶è®¿é—®äº†ä¸€ä¸ª"),s("strong",[t._v("ä¸éœ€è¦ç”¨æˆ·å°æ˜æˆæƒçš„æ•°æ®")]),t._v(", æ¯”å¦‚è·å–äº¬ä¸œ LOGO çš„å›¾ç‰‡åœ°å€, è¿™ä¸ª LOGO ä¿¡æ¯ä¸å±äºä»»ä½•ä¸€ä¸ªç¬¬ä¸‰æ–¹ç”¨æˆ·, å†æ¯”å¦‚å…¶å®ƒç±»å‹çš„ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥è®¿é—®å¹³å°æä¾›çš„çœä»½ä¿¡æ¯, çœä»½ä¿¡æ¯ä¹Ÿä¸å±äºä»»ä½•ä¸€ä¸ªç¬¬ä¸‰æ–¹ç”¨æˆ·.")]),t._v(" "),s("p",[t._v("æ­¤æ—¶, "),s("mark",[t._v("åœ¨æˆæƒæµç¨‹ä¸­, å°±")]),t._v("â€‹"),s("mark",[s("strong",[t._v("ä¸å†éœ€è¦èµ„æºæ‹¥æœ‰è€…è¿™ä¸ªè§’è‰²")])]),t._v("â€‹"),s("mark",[t._v("äº†. å½“ç„¶")]),t._v("â€‹"),s("mark",[s("strong",[t._v('ä¹Ÿå¯ä»¥å½¢è±¡åœ°ç†è§£ä¸º "èµ„æºæ‹¥æœ‰è€…è¢«å¡è¿›äº†ç¬¬ä¸‰æ–¹è½¯ä»¶ä¸­" æˆ–è€… "ç¬¬ä¸‰æ–¹è½¯ä»¶å°±æ˜¯èµ„æºæ‹¥æœ‰è€…"')])]),t._v(" . è¿™ç§åœºæ™¯ä¸‹çš„æˆæƒ, ä¾¿æ˜¯å®¢æˆ·ç«¯å‡­æ®è®¸å¯, ç¬¬ä¸‰æ–¹è½¯ä»¶"),s("strong",[t._v("å¯ä»¥ç›´æ¥ä½¿ç”¨æ³¨å†Œæ—¶çš„ app_id å’Œ app_secret æ¥æ¢å›è®¿é—®ä»¤ç‰Œ token çš„å€¼")]),t._v(".")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯ä»¥å°æ˜ä½¿ç”¨å°å…”è½¯ä»¶ä¸ºä¾‹, æ¥çœ‹ä¸‹å®¢æˆ·ç«¯å‡­æ®è®¸å¯çš„æ•´ä¸ªæˆæƒæµç¨‹, å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/a99895111dcc51f278b2f9f1edc18b7c-20230729094013-1mqb4b4.png",alt:"",title:"å®¢æˆ·ç«¯å‡­æ®è®¸å¯æˆæƒæµç¨‹"}})]),t._v(" "),s("p",[s("strong",[t._v("å› ä¸ºæˆæƒè¿‡ç¨‹æ²¡æœ‰äº†èµ„æºæ‹¥æœ‰è€…å°æ˜çš„å‚ä¸, å°å…”è½¯ä»¶çš„åç«¯æœåŠ¡å¯ä»¥éšæ—¶å‘èµ· access_token çš„è¯·æ±‚, æ‰€ä»¥è¿™ç§æˆæƒè®¸å¯ä¹Ÿä¸éœ€è¦åˆ·æ–°ä»¤ç‰Œ.")])]),t._v(" "),s("p",[t._v("è¿™æ ·ä¸€æ¥, å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹çš„å…³é”®æµç¨‹, å°±æ˜¯ä»¥ä¸‹ä¸¤å¤§æ­¥.")]),t._v(" "),s("p",[t._v("æ­¥éª¤ 1: ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”é€šè¿‡åç«¯æœåŠ¡å‘æˆæƒæœåŠ¡å‘é€è¯·æ±‚, "),s("strong",[t._v("è¿™é‡Œ grant_type çš„å€¼ä¸º client_credentials")]),t._v(", å‘Šè¯‰æˆæƒæœåŠ¡è¦ä½¿ç”¨"),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶å‡­æ®")]),t._v("çš„æ–¹å¼å»è¯·æ±‚è®¿é—®.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grant_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"client_credentials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPIDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRETTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oauthURl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpURLClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("æ­¥éª¤ 2: "),s("strong",[t._v("åœ¨éªŒè¯ app_id å’Œ app_secret çš„åˆæ³•æ€§ä¹‹å, ç”Ÿæˆ access_token çš„å€¼å¹¶è¿”å›")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" grantType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grant_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPIDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id is not available"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"client_credentials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grantType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appSecret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPSECRETTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_secret is not available"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç”Ÿæˆè®¿é—®ä»¤ç‰Œaccess_tokençš„å€¼")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("å†å°ç»“ä¸‹: "),s("strong",[t._v("åœ¨è·å–ä¸€ç§ä¸å±äºä»»ä½•ä¸€ä¸ªç¬¬ä¸‰æ–¹ç”¨æˆ·çš„æ•°æ®æ—¶, å¹¶ä¸éœ€è¦ç±»ä¼¼å°æ˜è¿™æ ·çš„ç”¨æˆ·å‚ä¸, æ­¤æ—¶ä¾¿å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_3-éšå¼è®¸å¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-éšå¼è®¸å¯"}},[t._v("#")]),t._v(" 3.éšå¼è®¸å¯")]),t._v(" "),s("p",[t._v("å†æƒ³è±¡ä¸€ä¸‹, å¦‚æœå°æ˜ä½¿ç”¨çš„å°å…”æ‰“å•è½¯ä»¶"),s("strong",[t._v("åº”ç”¨æ²¡æœ‰åç«¯æœåŠ¡, å°±æ˜¯åœ¨æµè§ˆå™¨é‡Œé¢æ‰§è¡Œçš„")]),t._v(", æ¯”å¦‚çº¯ç²¹çš„ JavaScript åº”ç”¨, åº”è¯¥å¦‚ä½•ä½¿ç”¨ OAuth 2.0 å‘¢? "),s("strong",[t._v("è¿™ç§æƒ…å†µä¸‹çš„æˆæƒæµç¨‹å°±å¯ä»¥ä½¿ç”¨éšå¼è®¸å¯æµç¨‹, å¯ä»¥ç†è§£ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”ç›´æ¥åµŒå…¥æµè§ˆå™¨ä¸­äº†")]),t._v(".")]),t._v(" "),s("p",[t._v("åœ¨è¿™ç§æƒ…å†µä¸‹, "),s("strong",[t._v("å°å…”è½¯ä»¶å¯¹äºæµè§ˆå™¨å°±æ²¡æœ‰ä»»ä½•ä¿å¯†çš„æ•°æ®å¯ä»¥éšè—")]),t._v("äº†, ä¹Ÿä¸å†éœ€è¦åº”ç”¨å¯†é’¥ app_secret çš„å€¼äº†, ä¹Ÿä¸ç”¨å†é€šè¿‡æˆæƒç  code æ¥æ¢å–è®¿é—®ä»¤ç‰Œ access_token çš„å€¼äº†. "),s("strong",[t._v("å› ä¸ºä½¿ç”¨æˆæƒç çš„ç›®çš„ä¹‹ä¸€, å°±æ˜¯æŠŠæµè§ˆå™¨å’Œç¬¬ä¸‰æ–¹è½¯ä»¶çš„ä¿¡æ¯åšä¸€ä¸ªéš”ç¦», ç¡®ä¿æµè§ˆå™¨çœ‹ä¸åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶æœ€é‡è¦çš„è®¿é—®ä»¤ç‰Œ access_token çš„å€¼")]),t._v(".")]),t._v(" "),s("p",[t._v("å› æ­¤, "),s("mark",[s("strong",[t._v("éšå¼è®¸å¯æˆæƒæµç¨‹çš„å®‰å…¨æ€§ä¼šé™ä½å¾ˆå¤š")])]),t._v(". åœ¨æˆæƒæµç¨‹ä¸­, æ²¡æœ‰æœåŠ¡ç«¯çš„å°å…”è½¯ä»¶ç›¸å½“äºæ˜¯åµŒå…¥åˆ°äº†æµè§ˆå™¨ä¸­, è®¿é—®æµè§ˆå™¨çš„è¿‡ç¨‹ç›¸å½“äºæ¥è§¦äº†å°å…”è½¯ä»¶çš„å…¨éƒ¨, å› æ­¤è¿™é‡Œç”¨è™šçº¿æ¡†æ¥è¡¨ç¤ºå°å…”è½¯ä»¶, æ•´ä¸ªæˆæƒæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9915a1b324455de79813fe4235248851-20230729094013-aep3tfa.png",alt:"",title:"éšå¼è®¸å¯æˆæƒæµç¨‹"}})]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥, ä½¿ç”¨ Servlet çš„ Get è¯·æ±‚æ¥æ¨¡æ‹Ÿè¿™ä¸ªæµç¨‹, ä¸€èµ·çœ‹çœ‹ç›¸å…³çš„ç¤ºä¾‹ä»£ç .")]),t._v(" "),s("p",[t._v("æ­¥éª¤ 1: ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”. æ­¤æ—¶, ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”å®é™…ä¸Šæ˜¯"),s("strong",[t._v("åµŒå…¥æµè§ˆå™¨ä¸­æ‰§è¡Œçš„åº”ç”¨ç¨‹åº")]),t._v(".")]),t._v(" "),s("p",[t._v("æ­¥éª¤ 2: è¿™ä¸ªæµç¨‹å’Œæˆæƒç æµç¨‹ç±»ä¼¼, åªæ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹, "),s("strong",[t._v("response_type çš„å€¼å˜æˆäº† token")]),t._v(", æ˜¯è¦å‘Šè¯‰æˆæƒæœåŠ¡"),s("strong",[t._v("ç›´æ¥è¿”å› access_token çš„å€¼")]),t._v(". éšå¼è®¸å¯æµç¨‹æ˜¯å”¯ä¸€åœ¨å‰ç«¯é€šä¿¡ä¸­è¦æ±‚è¿”å› access_token çš„æµç¨‹. å¯¹, å°±è¿™ä¹ˆå¤§èƒ†, ä½†ä¸å®‰å…¨.")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘Šè¯‰æˆæƒæœåŠ¡ç›´æ¥è¿”å›access_token")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"response_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_uri"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080/AppServlet-ch02"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPIDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ è¯·æ±‚æˆæƒçš„URl")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" toOauthUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLParamsUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oauthUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nresponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRedirect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toOauthUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("æ­¥éª¤ 3: "),s("strong",[t._v("ç”Ÿæˆ acccess_token çš„å€¼, é€šè¿‡å‰ç«¯é€šä¿¡è¿”å›ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶å°å…”")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" responseType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"response_type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" redirectUri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_uri"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPIDTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responseType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éšå¼è®¸å¯æµç¨‹(æ¨¡æ‹Ÿ), DEMO CODE, æ³¨æ„: è¯¥æµç¨‹å…¨éƒ¨åœ¨å‰ç«¯é€šä¿¡ä¸­å®Œæˆ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆè®¿é—®ä»¤ç‰Œaccess_tokençš„å€¼")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERTEST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_uri"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" redirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access_token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å›è°ƒåœ°å€, å¹¶é‡å®šå‘åˆ°è¯¥åœ°å€")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" toAppUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URLParamsUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨sendRedirectæ–¹å¼æ¨¡æ‹Ÿå‰ç«¯é€šä¿¡")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRedirect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toAppUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("p",[t._v("å¦‚æœä½ çš„è½¯ä»¶å°±æ˜¯"),s("strong",[t._v("ç›´æ¥åµŒå…¥åˆ°äº†æµè§ˆå™¨ä¸­è¿è¡Œ, è€Œä¸”è¿˜æ²¡æœ‰æœåŠ¡ç«¯çš„å‚ä¸")]),t._v(", å¹¶ä¸”è¿˜æƒ³ä½¿ç”¨ OAuth 2.0 æµç¨‹çš„è¯, é‚£ä¹ˆä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨éšå¼è®¸å¯ç±»å‹äº†.")]),t._v(" "),s("h5",{attrs:{id:"_4-å¦‚ä½•é€‰æ‹©è®¸å¯ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¦‚ä½•é€‰æ‹©è®¸å¯ç±»å‹"}},[t._v("#")]),t._v(" 4.å¦‚ä½•é€‰æ‹©è®¸å¯ç±»å‹")]),t._v(" "),s("p",[t._v("åˆ°ç°åœ¨å·²ç»ç†è§£äº† OAuth 2.0 çš„ 4 ç§æˆæƒè®¸å¯ç±»å‹çš„åŸç†ä¸æµç¨‹. é‚£ä¹ˆåº”è¯¥å¦‚ä½•é€‰æ‹©åˆ°åº•ä½¿ç”¨å“ªç§æˆæƒè®¸å¯ç±»å‹å‘¢?")]),t._v(" "),s("p",[s("strong",[t._v("ä¸€èˆ¬çš„å»ºè®®æ˜¯åœ¨å¯¹æ¥ OAuth 2.0 çš„æ—¶å€™")]),t._v("â€‹"),s("mark",[s("strong",[t._v("å…ˆè€ƒè™‘æˆæƒç è®¸å¯ç±»å‹")])]),t._v("â€‹ "),s("strong",[t._v(", å…¶æ¬¡å†ç»“åˆç°å®ç”Ÿäº§ç¯å¢ƒæ¥é€‰æ‹©:")])]),t._v(" "),s("ol",[s("li",[t._v("**å¦‚æœå°å…”è½¯ä»¶æ˜¯å®˜æ–¹å‡ºå“, é‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯; **")]),t._v(" "),s("li",[t._v("**å¦‚æœå°å…”è½¯ä»¶å°±æ˜¯åªåµŒå…¥åˆ°æµè§ˆå™¨ç«¯çš„åº”ç”¨ä¸”æ²¡æœ‰æœåŠ¡ç«¯, é‚£å°±åªèƒ½é€‰æ‹©éšå¼è®¸å¯; **")]),t._v(" "),s("li",[t._v("**å¦‚æœå°å…”è½¯ä»¶è·å–çš„ä¿¡æ¯ä¸å±äºä»»ä½•ä¸€ä¸ªç¬¬ä¸‰æ–¹ç”¨æˆ·, é‚£å¯ä»¥ç›´æ¥ä½¿ç”¨å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹. **")])]),t._v(" "),s("h5",{attrs:{id:"_5-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ€»ç»“"}},[t._v("#")]),t._v(" 5.æ€»ç»“")]),t._v(" "),s("p",[t._v("å‰é¢ä¸€å…±è®²äº† 4 ç§æˆæƒè®¸å¯ç±»å‹, "),s("mark",[t._v("å®ƒä»¬æœ€æ˜¾è‘—çš„åŒºåˆ«å°±æ˜¯")]),t._v("â€‹"),s("mark",[s("strong",[t._v("è·å–è®¿é—®ä»¤ç‰Œ access_token çš„æ–¹å¼ä¸åŒ")])]),t._v(". æœ€åé€šè¿‡ä¸€å¼ è¡¨æ ¼æ¥å¯¹æ¯”ä¸‹:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("æˆæƒè®¸å¯ç±»å‹")]),t._v(" "),s("th",[t._v("è·å–è®¿é—®ä»¤ç‰Œ access_token çš„æ–¹å¼")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("mark",[s("strong",[t._v("æˆæƒç è®¸å¯")])])]),t._v(" "),s("td",[t._v("é€šè¿‡æˆæƒç  code è·å– access_token")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯å‡­è¯è®¸å¯")]),t._v(" "),s("td",[t._v("é€šè¿‡ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ app_id å’Œ app_secret è·å– access_token")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("éšå¼è®¸å¯")]),t._v(" "),s("td",[t._v("é€šè¿‡åµŒå…¥æµè§ˆå™¨ä¸­çš„ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ app_id æ¥è·å– access_token")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("èµ„æºæ‹¥æœ‰è€…å‡­è¯è®¸å¯")]),t._v(" "),s("td",[t._v("é€šè¿‡èµ„æºæ‹¥æœ‰è€…çš„ç”¨æˆ·åå’Œå¯†ç è·å– access_token")])])])]),t._v(" "),s("p",[t._v("é™¤äº†ä¸Šé¢è¿™å¼ è¡¨æ ¼æ‰€å±•ç°çš„ 4 ç§æˆæƒè®¸å¯ç±»å‹çš„åŒºåˆ«ä¹‹å¤–, æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ä¸¤ç‚¹.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ‰€æœ‰çš„æˆæƒè®¸å¯ç±»å‹ä¸­, æˆæƒç è®¸å¯ç±»å‹çš„å®‰å…¨æ€§æ˜¯æœ€é«˜çš„")]),t._v(". å› æ­¤åªè¦å…·å¤‡ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹çš„æ¡ä»¶, ä¸€å®šè¦é¦–å…ˆæˆæƒç è®¸å¯ç±»å‹.")]),t._v(" "),s("li",[s("strong",[t._v("æ‰€æœ‰çš„æˆæƒè®¸å¯ç±»å‹éƒ½æ˜¯ä¸ºäº†è§£å†³ç°å®ä¸­çš„å®é™…é—®é¢˜, å› æ­¤è¿˜è¦ç»“åˆå®é™…çš„ç”Ÿäº§ç¯å¢ƒ, åœ¨ä¿éšœå®‰å…¨æ€§çš„å‰æä¸‹é€‰æ‹©æœ€åˆé€‚çš„æˆæƒè®¸å¯ç±»å‹")]),t._v(", æ¯”å¦‚ä½¿ç”¨å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹çš„å°å…”è½¯ä»¶å°±æ˜¯ä¸€ä¸ªæ¡ˆä¾‹.")])]),t._v(" "),s("h3",{attrs:{id:"è¿›é˜¶ç¯‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿›é˜¶ç¯‡"}},[t._v("#")]),t._v(" è¿›é˜¶ç¯‡")]),t._v(" "),s("h4",{attrs:{id:"å¦‚ä½•åœ¨ç§»åŠ¨appä¸­ä½¿ç”¨oauth-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•åœ¨ç§»åŠ¨appä¸­ä½¿ç”¨oauth-2-0"}},[t._v("#")]),t._v(" å¦‚ä½•åœ¨ç§»åŠ¨Appä¸­ä½¿ç”¨OAuth 2.0")]),t._v(" "),s("p",[t._v("å‰é¢å‡ è®²éƒ½æ˜¯"),s("strong",[t._v("åŸºäº Web åº”ç”¨")]),t._v("çš„åœºæ™¯æ¥è®²è§£çš„ OAuth 2.0. é™¤äº† Web åº”ç”¨å¤–, ç°å®ç¯å¢ƒä¸­è¿˜æœ‰éå¸¸å¤šçš„ç§»åŠ¨ App. "),s("strong",[t._v("åœ¨ç§»åŠ¨ App ä¸­, èƒ½ä¸èƒ½ä½¿ç”¨ OAuth 2.0 , åˆè¯¥å¦‚ä½•ä½¿ç”¨ OAuth 2.0 å‘¢?")])]),t._v(" "),s("p",[t._v("æ²¡é”™, OAuth 2.0 æœ€åˆçš„åº”ç”¨åœºæ™¯ç¡®å®æ˜¯ Web åº”ç”¨, ä½†æ˜¯å®ƒçš„ä¼Ÿå¤§ä¹‹å¤„å°±åœ¨äº, "),s("strong",[t._v("å®ƒæŠŠè‡ªå·±çš„æ ¸å¿ƒåè®®å®šä½æˆäº†ä¸€ä¸ªæ¡†æ¶è€Œä¸æ˜¯å•ä¸ªçš„åè®®. è¿™æ ·åšçš„å¥½å¤„æ˜¯, å¯ä»¥åŸºäºè¿™ä¸ªåŸºæœ¬çš„æ¡†æ¶åè®®, åœ¨ä¸€äº›ç‰¹å®šçš„é¢†åŸŸè¿›è¡Œæ‰©å±•")]),t._v(".")]),t._v(" "),s("p",[t._v('å› æ­¤, åˆ°äº†æ¡Œé¢æˆ–è€…ç§»åŠ¨çš„åœºæ™¯ä¸‹, OAuth 2.0 çš„åè®®ä¸€æ ·é€‚ç”¨. è€ƒè™‘åˆ°æˆæƒç è®¸å¯æ˜¯æœ€å®Œå¤‡, æœ€å®‰å…¨çš„è®¸å¯ç±»å‹, æ‰€ä»¥åœ¨è®²ç§»åŠ¨ App å¦‚ä½•ä½¿ç”¨ OAuth 2.0 çš„æ—¶å€™, ä¾ç„¶ä¼šç”¨æˆæƒç è®¸å¯æ¥è®²è§£, æ¯•ç«Ÿ"è¦ç”¨å°±ç”¨æœ€å¥½çš„".')]),t._v(" "),s("p",[t._v("å½“å¼€å‘ä¸€æ¬¾ç§»åŠ¨ App çš„æ—¶å€™, å¯ä»¥é€‰æ‹©"),s("strong",[t._v('æ²¡æœ‰ Server ç«¯çš„ "çº¯ App" æ¶æ„')]),t._v(", æ¯”å¦‚è¿™æ¬¾ App ä¸éœ€è¦è·Ÿè‡ªå·±çš„ Server ç«¯é€šä¿¡, æˆ–è€…å¯ä»¥è°ƒç”¨å…¶å®ƒå¼€æ”¾çš„ HTTP æ¥å£; å½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©æœ‰æœåŠ¡ç«¯çš„æ¶æ„, æ¯”å¦‚è¿™æ¬¾ App è¿˜æƒ³æŠŠç”¨æˆ·çš„æ“ä½œæ—¥å¿—è®°å½•ä¸‹æ¥å¹¶ä¿å­˜åˆ° Server ç«¯çš„æ•°æ®åº“ä¸­.")]),t._v(" "),s("p",[t._v("é‚£æ€»ç»“ä¸‹æ¥å‘¢, ç§»åŠ¨ App å¯ä»¥åˆ†ä¸ºä¸¤ç±», ä¸€ç±»æ˜¯æ²¡æœ‰ Server ç«¯çš„ App åº”ç”¨, ä¸€ç±»æ˜¯æœ‰ Server ç«¯çš„ App åº”ç”¨.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/bfe5720fa6684dd43e468dabbc6d9822-20230729094013-4t83m0a.png",alt:"",title:"ä¸¤ç±»ç§»åŠ¨App"}})]),t._v(" "),s("p",[t._v("è¿™ä¸¤ç±» App åœ¨ä½¿ç”¨ OAuth 2.0 æ—¶çš„æœ€å¤§åŒºåˆ«, åœ¨äº"),s("strong",[t._v("è·å–è®¿é—®ä»¤ç‰Œçš„æ–¹å¼")]),t._v(":")]),t._v(" "),s("ol",[s("li",[t._v("**å¦‚æœæœ‰ Server ç«¯, å°±å»ºè®®é€šè¿‡ Server ç«¯å’ŒæˆæƒæœåŠ¡åšäº¤äº’æ¥æ¢å–è®¿é—®ä»¤ç‰Œ; **")]),t._v(" "),s("li",[t._v("**å¦‚æœæ²¡æœ‰ Server ç«¯, é‚£ä¹ˆåªèƒ½é€šè¿‡å‰ç«¯é€šä¿¡æ¥è·ŸæˆæƒæœåŠ¡åšäº¤äº’, æ¯”å¦‚åœ¨ä¸Šä¸€è®²ä¸­æåˆ°çš„éšå¼è®¸å¯æˆæƒç±»å‹. å½“ç„¶è¿™ç§æ–¹å¼çš„å®‰å…¨æ€§å°±é™ä½äº†å¾ˆå¤š. **")])]),t._v(" "),s("h5",{attrs:{id:"_1-æ²¡æœ‰serverç«¯çš„app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ²¡æœ‰serverç«¯çš„app"}},[t._v("#")]),t._v(" 1.æ²¡æœ‰Serverç«¯çš„App")]),t._v(" "),s("p",[t._v('æœ‰äº›æ—¶å€™, å¯èƒ½è§‰å¾—è‡ªå·±å¼€å‘ä¸€ä¸ª App ä¸éœ€è¦ä¸€ä¸ª Server ç«¯. é‚£å°±å…ˆæ¥çœ‹çœ‹æ²¡æœ‰ Server ç«¯çš„ App åº”ç”¨å¦‚ä½•ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹. åœ¨ä¸€ä¸ªæ²¡æœ‰ Server ç«¯æ”¯æŒçš„çº¯ App åº”ç”¨ä¸­, é¦–å…ˆæƒ³åˆ°çš„æ˜¯, å¦‚ä½•å¯ä»¥åƒ Web æœåŠ¡é‚£æ ·, è®©è¯·æ±‚å’Œå“åº”"æ¥å»è‡ªå¦‚"å‘¢.')]),t._v(" "),s("p",[t._v('ä½ å¯èƒ½ä¼šæƒ³, æ˜¯ä¸æ˜¯å¯ä»¥å°†ä¸€ä¸ª"è¿·ä½ "çš„ Web æœåŠ¡å™¨åµŒå…¥åˆ° App é‡Œé¢å», è¿™æ ·ä¸å°±å¯ä»¥åƒ Web åº”ç”¨é‚£æ ·æ¥ä½¿ç”¨ OAuth 2.0 äº†ä¹ˆ? ç¡®å®è¿™æ˜¯è¡Œå¾—é€šçš„, è€Œä¸”å·²ç»æœ‰ App è¿™æ ·åšäº†.')]),t._v(" "),s("p",[t._v("è¿™æ ·çš„ App é€šè¿‡ç›‘å¬è¿è¡Œåœ¨ localhost ä¸Šçš„ Web æœåŠ¡å™¨ URI, å°±å¯ä»¥åšåˆ°è·Ÿæ™®é€šçš„ Web åº”ç”¨ä¸€æ ·çš„é€šä¿¡æœºåˆ¶. ä½†è¿™ç§æ–¹å¼ä¸æ˜¯è¿™æ¬¡è¦è®²çš„é‡ç‚¹. å› ä¸ºå½“ä½¿ç”¨è¿™ç§æ–¹å¼çš„æ—¶å€™, è¯·æ±‚è®¿é—®ä»¤ç‰Œæ—¶éœ€è¦çš„ app_secret å°±åªèƒ½ä¿å­˜åœ¨ç”¨æˆ·æœ¬åœ°è®¾å¤‡ä¸Š, è€Œè¿™å¹¶ä¸æ˜¯å»ºè®®çš„åšæ³•.")]),t._v(" "),s("p",[s("strong",[t._v("é—®é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•ä¿å­˜ app_secret")]),t._v(", å› ä¸º App ä¼šè¢«å®‰è£…åœ¨æˆåƒä¸Šä¸‡ä¸ªç»ˆç«¯è®¾å¤‡ä¸Š, app_secret ä¸€æ—¦è¢«ç ´è§£, å°±å°†ä¼šé€ æˆç¾éš¾æ€§çš„åæœ. å¦‚æœä¸ç”¨ app_secret, ä¹Ÿèƒ½åœ¨æˆæƒç æµç¨‹é‡Œæ¢å›è®¿é—®ä»¤ç‰Œ access_token, ä¸å°±å¯ä»¥äº†å—?")]),t._v(" "),s("p",[t._v('ç¡®å®å¯ä»¥, ä½†æ–°çš„é—®é¢˜ä¹Ÿæ¥äº†. åœ¨æˆæƒç è®¸å¯ç±»å‹çš„æµç¨‹ä¸­, å¦‚æœæ²¡æœ‰äº† app_secret è¿™ä¸€å±‚çš„ä¿æŠ¤, é‚£ä¹ˆé€šè¿‡æˆæƒç  code æ¢å–è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, å°±åªæœ‰æˆæƒç  code åœ¨"å†²é”‹é™·é˜µ"äº†. è¿™æ—¶, æˆæƒç  code ä¸€æ—¦å¤±çªƒ, å°±ä¼šå¸¦æ¥ä¸¥é‡çš„å®‰å…¨é—®é¢˜. é‚£ä¹ˆ, æ—¢ä¸ä½¿ç”¨ app_secret, è¿˜è¦é˜²æ­¢æˆæƒç  code å¤±çªƒ, æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å—?')]),t._v(" "),s("p",[t._v("æœ‰, OAuth 2.0 é‡Œé¢å°±æœ‰è¿™æ ·çš„æŒ‡å¯¼æ–¹æ³•. è¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†è¦ä»‹ç»çš„ "),s("strong",[t._v("PKCE åè®®")]),t._v(", å…¨ç§°æ˜¯ Proof Key for Code Exchange by OAuth Public Clients.")]),t._v(" "),s("p",[t._v("åœ¨ä¸‹é¢çš„æµç¨‹å›¾ä¸­, ä¸ºäº†çªå‡º"),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶ä½¿ç”¨ PKCE åè®®æ—¶ä¸æˆæƒæœåŠ¡ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹")]),t._v(", è¿™é‡Œçœç•¥äº†å—ä¿æŠ¤èµ„æºæœåŠ¡å’Œèµ„æºæ‹¥æœ‰è€…çš„è§’è‰²:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/23bc1fa619dc035eab6b09e8799c61f0-20230729094013-zir5c2b.png",alt:"",title:"ä½¿ç”¨PKCEåè®®çš„æµç¨‹å›¾"}})]),t._v(" "),s("p",[t._v("ä¸‹é¢åˆ†æä¸‹è¿™ä¸ªæµç¨‹ä¸­çš„é‡ç‚¹.")]),t._v(" "),s("p",[t._v("é¦–å…ˆ, App è‡ªå·±è¦ç”Ÿæˆä¸€ä¸ªéšæœºçš„, é•¿åº¦åœ¨ 43 ~ 128 å­—ç¬¦ä¹‹é—´çš„, å‚æ•°ä¸º "),s("strong",[t._v("code_verifier")]),t._v(" çš„å­—ç¬¦ä¸²éªŒè¯ç ; æ¥ç€å†åˆ©ç”¨è¿™ä¸ª "),s("strong",[t._v("code_verifier, "),s("strong",[t._v("â€‹")])]),t._v('**æ¥ç”Ÿæˆä¸€ä¸ªè¢«ç§°ä¸º "æŒ‘æˆ˜ç " çš„å‚æ•° **'),s("strong",[s("strong",[t._v("â€‹")]),t._v("code_challenge")]),t._v(".")]),t._v(" "),s("p",[t._v("é‚£æ€ä¹ˆç”Ÿæˆè¿™ä¸ª code_challenge çš„å€¼å‘¢? OAuth 2.0 è§„èŒƒé‡Œé¢ç»™å‡ºäº†ä¸¤ç§æ–¹æ³•, å°±æ˜¯çœ‹ code_challenge_method è¿™ä¸ªå‚æ•°çš„å€¼:")]),t._v(" "),s("ol",[s("li",[t._v("ä¸€ç§ code_challenge_method=plain, æ­¤æ—¶ code_verifier çš„å€¼å°±æ˜¯ code_challenge çš„å€¼;")]),t._v(" "),s("li",[t._v("å¦å¤–ä¸€ç§ code_challenge_method=S256, å°±æ˜¯å°† code_verifier å€¼è¿›è¡Œ ASCII ç¼–ç ä¹‹åå†è¿›è¡Œå“ˆå¸Œ, ç„¶åå†å°†å“ˆå¸Œä¹‹åçš„å€¼è¿›è¡Œ BASE64-URL ç¼–ç , å¦‚ä¸‹ä»£ç æ‰€ç¤º.")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("code_challenge "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BASE64URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ENCODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("SHA256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ASCII")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code_verifier"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿™ä¸¤ä¸ªå€¼è·Ÿæˆæƒç æµç¨‹æœ‰ä»€ä¹ˆå…³ç³», åˆæ€ä¹ˆåˆ©ç”¨å®ƒä»¬?")]),t._v(" "),s("p",[t._v('æˆæƒç æµç¨‹ç®€å•æ¦‚æ‹¬èµ·æ¥æœ‰ä¸¤æ­¥, ç¬¬ä¸€æ­¥æ˜¯è·å–æˆæƒç  code, ç¬¬äºŒæ­¥æ˜¯ç”¨ app_id + app_secret + code è·å–è®¿é—®ä»¤ç‰Œ access_token. åˆšæ‰çš„"ç›®æ ‡"ä¸æ˜¯è®¾æƒ³ä¸ä½¿ç”¨ app_secret, ä½†åŒæ—¶åˆèƒ½ä¿è¯æˆæƒç æµç¨‹çš„å®‰å…¨æ€§ä¹ˆ?')]),t._v(" "),s("p",[t._v('æ²¡é”™. code_verifier å’Œ code_challenge è¿™ä¸¤ä¸ªå‚æ•°, å°±æ˜¯æ¥å®ç°è¿™ä¸ª"ç›®æ ‡"çš„.')]),t._v(" "),s("p",[t._v("åœ¨"),s("strong",[t._v("ç¬¬ä¸€æ­¥è·å–æˆæƒç  code çš„æ—¶å€™, ä½¿ç”¨ code_challenge")]),t._v(" å‚æ•°. éœ€è¦æ³¨æ„çš„æ˜¯, è¦åŒæ—¶å°† code_challenge_method å‚æ•°ä¹Ÿä¼ è¿‡å», ç›®çš„æ˜¯è®©æˆæƒæœåŠ¡çŸ¥é“ç”Ÿæˆ code_challenge å€¼çš„æ–¹æ³•æ˜¯ plain è¿˜æ˜¯ S256.")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//authorization-server.com/auth?")])]),t._v("\nresponse_type=code&\napp_id=APP_ID&\nredirect_uri=REDIRECT_URI&\ncode_challenge=CODE_CHALLENGE&\ncode_challenge_method=S256\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("åœ¨"),s("strong",[t._v("ç¬¬äºŒæ­¥è·å–è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, ä½¿ç”¨ code_verifier å‚æ•°")]),t._v(", æˆæƒæœåŠ¡æ­¤æ—¶ä¼šå°† code_verifier çš„å€¼è¿›è¡Œä¸€æ¬¡è¿ç®—. é‚£æ€ä¹ˆè¿ç®—å‘¢? å°±æ˜¯ä¸Šé¢ code_challenge_method=S256 çš„è¿™ç§æ–¹å¼.")]),t._v(" "),s("p",[t._v("æ²¡é”™, ç¬¬ä¸€æ­¥è¯·æ±‚æˆæƒç çš„æ—¶å€™, å·²ç»å‘Šè¯‰æˆæƒæœåŠ¡ç”Ÿæˆ code_challenge çš„æ–¹æ³•äº†. æ‰€ä»¥åœ¨ç¬¬äºŒæ­¥çš„è¿‡ç¨‹ä¸­, æˆæƒæœåŠ¡å°†è¿ç®—çš„å€¼è·Ÿç¬¬ä¸€æ­¥æ¥æ”¶åˆ°çš„å€¼åšæ¯”è¾ƒ, å¦‚æœç›¸åŒå°±é¢å‘è®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[t._v("POST https://api.authorization-server.com/token?\ngrant_type=authorization_code&\ncode=AUTH_CODE_HERE&\nredirect_uri=REDIRECT_URI&\napp_id=APP_ID&\ncode_verifier=CODE_VERIFIER\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("ç°åœ¨å°±çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨ code_verifier å’Œ code_challenge è¿™ä¸¤ä¸ªå‚æ•°. æ€»ç»“ä¸€ä¸‹å°±æ˜¯, "),s("strong",[t._v("æ¢å–æˆæƒç  code çš„æ—¶å€™, ä½¿ç”¨ code_challenge å‚æ•°å€¼; æ¢å–è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, ä½¿ç”¨ code_verifier å‚æ•°å€¼")]),t._v(". é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿™æ ·åš? ä¸‹é¢æ¥åˆ†æä¸€ä¸‹.")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ²¡æœ‰ Server ç«¯çš„æ‰‹æœº App, ä¹Ÿå¯ä»¥ä½¿ç”¨æˆæƒç è®¸å¯æµç¨‹. app_secret ä¸èƒ½ç”¨, å› ä¸ºå®ƒåªèƒ½è¢«å­˜åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Š, æ‹…å¿ƒè¢«æ³„éœ². é‚£ä¹ˆ, åœ¨æ²¡æœ‰äº† app_secret è¿™å±‚ä¿æŠ¤çš„å‰æä¸‹, å³ä½¿æˆæƒç  code è¢«æˆªè·, å†åŠ ä¸Š code_challenge ä¹ŸåŒæ—¶è¢«æˆªè·äº†, é‚£ä¹Ÿæ²¡æœ‰åŠæ³•ç”± code_challenge é€†æ¨å‡º code_verifier çš„å€¼. è€Œæ°æ°åœ¨ç¬¬äºŒæ­¥æ¢å–è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, æˆæƒæœåŠ¡éœ€è¦çš„å°±æ˜¯ code_verifier çš„å€¼. å› æ­¤è¿™ä¹Ÿå°±"),s("strong",[t._v("é¿å…äº†è®¿é—®ä»¤ç‰Œè¢«æ¶æ„æ¢å–çš„å®‰å…¨é—®é¢˜")]),t._v(".")]),t._v(" "),s("p",[t._v("ç°åœ¨, å¯ä»¥é€šè¿‡ PKCE åè®®çš„å¸®åŠ©, è®©æ²¡æœ‰ Server ç«¯çš„ App ä¹Ÿèƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹è¿›è¡Œæˆæƒäº†. ä½†æ˜¯, æŒ‰ç…§ OAuth 2.0 çš„è§„èŒƒå»ºè®®, "),s("strong",[t._v("é€šè¿‡åç«¯é€šä¿¡æ¥æ¢å–è®¿é—®ä»¤ç‰Œæ˜¯è¾ƒä¸ºå®‰å…¨çš„æ–¹å¼")]),t._v(". æ‰€ä»¥è¿˜æ˜¯å°½é‡æä¸ªæœåŠ¡ç«¯.")]),t._v(" "),s("h5",{attrs:{id:"_2-æœ‰serverç«¯çš„app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æœ‰serverç«¯çš„app"}},[t._v("#")]),t._v(" 2.æœ‰Serverç«¯çš„App")]),t._v(" "),s("p",[t._v("æ¥å…¥å¾®ä¿¡ç™»å½•æ—¶, å¯ä»¥åœ¨å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£ä¸Šçœ‹åˆ°ä¸‹é¢è¿™å¥è¯:")]),t._v(" "),s("blockquote",[s("p",[t._v("å¾®ä¿¡ OAuth 2.0 æˆæƒç™»å½•ç›®å‰æ”¯æŒ authorization_code æ¨¡å¼, é€‚ç”¨äºæ‹¥æœ‰ Server ç«¯çš„åº”ç”¨æˆæƒ.")])]),t._v(" "),s("p",[t._v("æ²¡é”™, å¾®ä¿¡çš„ OAuth 2.0 æˆæƒç™»å½•, å°±æ˜¯å»ºè®®éœ€è¦ä¸€ä¸ª Server ç«¯æ¥æ”¯æŒè¿™æ ·çš„æˆæƒæ¥å…¥.")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆ, æœ‰ Server ç«¯æ”¯æŒçš„ App åˆæ˜¯å¦‚ä½•ä½¿ç”¨ OAuth 2.0 çš„æˆæƒç è®¸å¯æµç¨‹çš„å‘¢?")]),t._v(" "),s("p",[t._v("ä»ä»¥å¾®ä¿¡ç™»å½•ä¸ºä¾‹, çœ‹ä¸€ä¸‹å®˜æ–¹çš„æµç¨‹å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/44553fc2ee3a8fee58cc30e99334cbe6-20230729094013-bgmrdri.png",alt:"",title:"å¾®ä¿¡ç™»å½•æµç¨‹å›¾"}})]),t._v(" "),s("p",[t._v("çœ‹åˆ°è¿™ä¸ªå›¾, æ˜¯ä¸æ˜¯è§‰å¾—ç‰¹åˆ«ç†Ÿæ‚‰, "),s("strong",[t._v("è·Ÿæ™®é€šçš„æˆæƒç æµç¨‹æ²¡æœ‰åŒºåˆ«")]),t._v(", ä»æ˜¯ä¸¤æ­¥èµ°çš„ç­–ç•¥: "),s("mark",[s("strong",[t._v("ç¬¬ä¸€æ­¥æ¢å–æˆæƒç  code, ç¬¬äºŒæ­¥é€šè¿‡æˆæƒç  code æ¢å–è®¿é—®ä»¤ç‰Œ access_token")])]),t._v(".")]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„ç¬¬ä¸‰æ–¹åº”ç”¨, å°±æ˜¯ä½œä¸ºå¼€å‘è€…æ¥å¼€å‘çš„åº”ç”¨, åŒ…å«äº†ç§»åŠ¨ App å’Œ Server ç«¯. å°†å…¶ç»†åŒ–å¾—åˆ°ä¸‹é¢è¿™å¼ å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9bfce2629086662cb6d568be8afad6a7-20230729094013-9yawhlo.png",alt:"",title:"æœ‰Serverç«¯çš„Appçš„æˆæƒæµç¨‹"}})]),t._v(" "),s("p",[s("strong",[t._v("ä»ä¸Šå›¾å°±ä¼šå‘ç°æœ‰ Server ç«¯çš„ App åœ¨ä½¿ç”¨æˆæƒç æµç¨‹çš„æ—¶å€™, è·Ÿæ™®é€šçš„ Web åº”ç”¨å‡ ä¹æ²¡æœ‰ä»»ä½•å·®åˆ«.")])]),t._v(" "),s("p",[t._v("å¤§æ¦‚æµç¨‹æ˜¯: å½“è®¿é—®ç¬¬ä¸‰æ–¹ App çš„æ—¶å€™, "),s("strong",[t._v("éœ€è¦ç”¨åˆ°å¾®ä¿¡æ¥ç™»å½•; ç¬¬ä¸‰æ–¹ App å¯ä»¥æ‹‰èµ·å¾®ä¿¡çš„ App")]),t._v(", ç”¨æˆ·ä¼šåœ¨å¾®ä¿¡çš„ App é‡Œé¢è¿›è¡Œç™»å½•åŠæˆæƒ; "),s("strong",[t._v("å¾®ä¿¡ Server ç«¯éªŒè¯æˆåŠŸä¹‹åä¼šè¿”å›ä¸€ä¸ªæˆæƒç  code, é€šè¿‡å¾®ä¿¡ App ä¼ é€’ç»™äº†ç¬¬ä¸‰æ–¹ App")]),t._v("; åé¢çš„æµç¨‹å°±æ˜¯ç†Ÿæ‚‰çš„"),s("strong",[t._v("ä½¿ç”¨æˆæƒç  code å’Œ app_secret, æ¢å–è®¿é—®ä»¤ç‰Œ access_token çš„å€¼")]),t._v("äº†.")]),t._v(" "),s("p",[s("strong",[t._v("è¿™æ¬¡ä½¿ç”¨ app_secret çš„æ—¶å€™, æ˜¯åœ¨ç¬¬ä¸‰æ–¹ App çš„ Server ç«¯æ¥ä½¿ç”¨çš„, å› æ­¤å®‰å…¨æ€§ä¸Šæ²¡æœ‰ä»»ä½•é—®é¢˜.")])]),t._v(" "),s("h5",{attrs:{id:"_3-æ€»ç»“-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ€»ç»“-2"}},[t._v("#")]),t._v(" 3.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚é‡ç‚¹è®²äº†ä¸¤å—å†…å®¹, æ²¡æœ‰ Server ç«¯çš„ App å’Œæœ‰ Server ç«¯çš„ App åˆ†åˆ«æ˜¯å¦‚ä½•ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹çš„.")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ä¸¤ç‚¹å†…å®¹.")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨ OAuth 2.0 åè®®çš„ç›®çš„, å°±æ˜¯è¦èµ·åˆ°å®‰å…¨æ€§çš„ä½œç”¨, ä½†æœ‰äº›æ—¶å€™, å› ä¸ºä½¿ç”¨ä¸å½“åè€Œä¼šé€ æˆæ›´å¤§çš„å®‰å…¨é—®é¢˜, æ¯”å¦‚å°† app_secret æ”¾å…¥ App ä¸­çš„æœ€åŸºæœ¬é”™è¯¯. å¦‚æœæ”¾å¼ƒäº† app_secret, åˆæ˜¯å¦‚ä½•è®©æ²¡æœ‰ Server ç«¯çš„ App å®‰å…¨åœ°ä½¿ç”¨æˆæƒç è®¸å¯åè®®å‘¢? é’ˆå¯¹è¿™ç§æƒ…å†µ, "),s("strong",[t._v("æœ¬èŠ‚ä»‹ç»äº† PKCE åè®®")]),t._v(". å®ƒæ˜¯ä¸€ç§åœ¨å¤±å» app_secret ä¿æŠ¤çš„æ—¶å€™, é˜²æ­¢æˆæƒç å¤±çªƒçš„è§£å†³æ–¹æ¡ˆ.")]),t._v(" "),s("li",[t._v("å»ºè®®åœ¨å¼€å‘ç§»åŠ¨ App çš„æ—¶å€™, å°½å¯èƒ½åœ°éƒ½è¦æ­å»ºä¸€ä¸ª Server ç«¯, "),s("strong",[t._v("å› ä¸ºé€šè¿‡åç«¯é€šä¿¡æ¥ä¼ è¾“è®¿é—®ä»¤ç‰Œæ¯”é€šè¿‡å‰ç«¯é€šä¿¡ä¼ è¾“è¦å®‰å…¨å¾—å¤š")]),t._v(". å¾ˆå¤šå®˜æ–¹çš„å¼€æ”¾å¹³å°åœ¨æä¾› OAuth 2.0 æœåŠ¡çš„æ—¶å€™, éƒ½ä¼šå»ºè®®å¼€å‘è€…è¦æœ‰ä¸€ä¸ªç›¸åº”çš„ Server ç«¯.")])]),t._v(" "),s("h4",{attrs:{id:"å®è·µoauth-2-0æ—¶-ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šå¯¼è‡´å“ªäº›å®‰å…¨æ¼æ´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µoauth-2-0æ—¶-ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šå¯¼è‡´å“ªäº›å®‰å…¨æ¼æ´"}},[t._v("#")]),t._v(" å®è·µOAuth 2.0æ—¶, ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šå¯¼è‡´å“ªäº›å®‰å…¨æ¼æ´?")]),t._v(" "),s("p",[t._v("å…³äº OAuth 2.0 çš„ä½¿ç”¨è¿˜æœ‰å“ªäº›"),s("strong",[t._v("å®‰å…¨æ–¹é¢çš„é˜²èŒƒæªæ–½")]),t._v("æ˜¯è¦æ³¨æ„çš„å‘¢, æœ¬èŠ‚å°†ä¼šè¿›è¡Œä»‹ç».")]),t._v(" "),s("p",[t._v("å½“çŸ¥é“è¿™ä¸€è®²çš„ä¸»é¢˜æ˜¯ OAuth 2.0 çš„å®‰å…¨æ¼æ´æ—¶, ä½ å¯èƒ½è¦é—®äº†: "),s("strong",[t._v("OAuth 2.0 ä¸æ˜¯ä¸€ç§å®‰å…¨åè®®å—, ä¸æ˜¯ä¿æŠ¤ Web API çš„å—? ä¸ºå•¥ OAuth 2.0 è‡ªå·±è¿˜æœ‰å®‰å…¨çš„é—®é¢˜?")])]),t._v(" "),s("p",[t._v("é¦–å…ˆ, OAuth 2.0 çš„ç¡®æ˜¯ä¸€ç§å®‰å…¨åè®®. è¿™æ²¡å•¥é—®é¢˜, ä½†æ˜¯å®ƒæœ‰å¾ˆå¤šä½¿ç”¨è§„èŒƒ, æ¯”å¦‚æˆæƒç æ˜¯ä¸€ä¸ªä¸´æ—¶å‡­æ®åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡, è¦å¯¹é‡å®šå‘ URI åšæ ¡éªŒç­‰. é‚£ä¹ˆå¦‚æœä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰æŒ‰ç…§è¿™æ ·çš„è§„èŒƒæ¥å®æ–½, å°±ä¼šæœ‰å®‰å…¨æ¼æ´äº†. å…¶æ¬¡, OAuth 2.0 æ—¢ç„¶æ˜¯ç”Ÿé•¿åœ¨äº’è”ç½‘è¿™ä¸ªå¤§ç¯å¢ƒä¸­, å°±ä¸€æ ·ä¼šé¢å¯¹äº’è”ç½‘ä¸Šå¸¸è§å®‰å…¨é£é™©çš„æ”»å‡», æ¯”å¦‚è·¨ç«™è¯·æ±‚ä¼ªé€ (Cross-site request forgery, CSRF), è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Scripting, XSS). æœ€å, é™¤äº†è¿™äº›å¸¸è§æ”»å‡»ç±»å‹å¤–, OAuth 2.0 è‡ªèº«ä¹Ÿæœ‰å¯è¢«åˆ©ç”¨çš„å®‰å…¨æ¼æ´, æ¯”å¦‚æˆæƒç å¤±çªƒ, é‡å®šå‘ URI ä¼ªé€ .")]),t._v(" "),s("p",[t._v("æ‰€ä»¥"),s("strong",[t._v("åœ¨å®è·µ OAuth 2.0 çš„è¿‡ç¨‹ä¸­, å®‰å…¨é—®é¢˜ä¸€å®šæ˜¯é‡ä¸­ä¹‹é‡")]),t._v(". ä¸‹é¢æŒ‘é€‰äº† 5 ä¸ªå…¸å‹çš„å®‰å…¨é—®é¢˜, "),s("strong",[t._v("å…¶ä¸­ CSRF, XSS, æ°´å¹³è¶Šæƒè¿™ä¸‰ç§æ˜¯äº’è”ç½‘ç¯å¢ƒä¸‹å¸¸è§çš„å®‰å…¨é£é™©, æˆæƒç å¤±çªƒå’Œé‡å®šå‘ URI è¢«ç¯¡æ”¹å±äº OAuth2.0 ä¸“å±çš„å®‰å…¨é£é™©")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥çœ‹çœ‹è¿™äº›å®‰å…¨é£é™©çš„ç”±æ¥, ä»¥åŠå¦‚ä½•åº”å¯¹.")]),t._v(" "),s("h5",{attrs:{id:"_1-csrfæ”»å‡»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-csrfæ”»å‡»"}},[t._v("#")]),t._v(" 1.CSRFæ”»å‡»")]),t._v(" "),s("p",[t._v("å¯¹äº CSRF çš„å®šä¹‰, ã€ŠOAuth 2 in Actionã€‹è¿™æœ¬ä¹¦é‡Œçš„è§£é‡Šéå¸¸è´´åˆ‡: æ¶æ„è½¯ä»¶è®©æµè§ˆå™¨å‘"),s("strong",[t._v("å·²å®Œæˆç”¨æˆ·èº«ä»½è®¤è¯")]),t._v("çš„ç½‘ç«™å‘èµ·è¯·æ±‚, å¹¶"),s("strong",[t._v("æ‰§è¡Œæœ‰å®³çš„æ“ä½œ")]),t._v(", å°±æ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡».")]),t._v(" "),s("p",[t._v("å®ƒæ˜¯äº’è”ç½‘ä¸Šæœ€ä¸ºå¸¸è§çš„æ”»å‡»ä¹‹ä¸€. åœ¨å®è·µ OAuth2.0 çš„è¿‡ç¨‹, å…¶å®å°±æ˜¯åœ¨æ„å»ºä¸€æ¬¡äº’è”ç½‘çš„åº”ç”¨. å› æ­¤, OAuth 2.0 åŒæ ·ä¹Ÿä¼šé¢ä¸´è¿™ä¸ªæ”»å‡». æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è¯´æ˜è¿™ä¸ªæ”»å‡»ç±»å‹.")]),t._v(" "),s("p",[t._v("æœ‰ä¸€ä¸ªè½¯ä»¶ A, è®©å®ƒæ¥æ‰®æ¼”æ”»å‡»è€…, è®©å®ƒçš„å¼€å‘è€…æŒ‰ç…§æ­£å¸¸çš„æµç¨‹ä½¿ç”¨æå®¢æ—¶é—´. å½“è¯¥æ”»å‡»è€…æˆæƒå, æ‹¿åˆ°"),s("strong",[t._v("æˆæƒç çš„å€¼ codeA")]),t._v(' ä¹‹å, "ç«‹å³æŒ‰ä¸‹äº†æš‚åœé”®", ä¸ç»§ç»­å¾€ä¸‹èµ°äº†. é‚£å®ƒæƒ³å¹²å•¥å‘¢, ç»§ç»­å¾€ä¸‹çœ‹.')]),t._v(" "),s("p",[t._v("è¿™æ—¶, "),s("strong",[t._v("æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶ B, æ¯”å¦‚ Web ç‰ˆæå®¢æ—¶é—´, æ¥æ‰®æ¼”å—å®³è€…å§. "),s("strong",[t._v("â€‹")])]),t._v("**å½“ç„¶æœ€ç»ˆçš„å—å®³è€…æ˜¯ç”¨æˆ·, è¿™é‡Œæ˜¯ç”¨ Web ç‰ˆæå®¢æ—¶é—´æ¥ä½œä¸ºè¢«è½¯ä»¶ A æ”»å‡»çš„å¯¹è±¡******â€‹ **. **")]),t._v(" "),s("p",[t._v("æå®¢æ—¶é—´ç”¨äºæ¥æ”¶æˆæƒç çš„å›è°ƒåœ°å€ä¸º "),s("code",[t._v("https://time.geekbang.org/callback")]),t._v("â€‹. æœ‰ä¸€ä¸ªç”¨æˆ· G å·²ç»åœ¨æå®¢æ—¶é—´çš„"),s("strong",[t._v("å¹³å°ç™»å½•, ä¸”å¯¹æå®¢æ—¶é—´è¿›è¡Œäº†æˆæƒ")]),t._v(", ä¹Ÿå°±æ˜¯ç”¨æˆ· G å·²ç»åœ¨æå®¢æ—¶é—´å¹³å°ä¸Šæœ‰ç™»å½•æ€äº†.")]),t._v(" "),s("p",[t._v("å¦‚æœæ­¤æ—¶æ”»å‡»è€…è½¯ä»¶ A, åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šæ„é€ äº†ä¸€ä¸ªæ¶æ„é¡µé¢:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://time.geekbang.org/callback?code=codeA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("å¦‚æœè¿™ä¸ªæ—¶å€™ç”¨æˆ· G è¢«æ”»å‡»è€…è½¯ä»¶ A è¯±å¯¼è€Œç‚¹å‡»äº†è¿™ä¸ªæ¶æ„é¡µé¢, é‚£ç»“æœå°±æ˜¯, "),s("strong",[t._v("æå®¢æ—¶é—´ä½¿ç”¨ codeA å€¼å»ç»§ç»­ OAuth 2.0 çš„æµç¨‹äº†")]),t._v(". è¿™å…¶å®å°±èµ°å®Œäº†ä¸€ä¸ª CSRF æ”»å‡»çš„è¿‡ç¨‹, å¦‚ä¸‹å›¾æ‰€ç¤º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/4b1545fa517a76bd576427792ded9bff-20230729094013-f71bs88.png",alt:"",title:"CSRFæ”»å‡»è¿‡ç¨‹"}})]),t._v(" "),s("p",[t._v("å¦‚æœå°† OAuth 2.0 ç”¨äºäº†èº«ä»½è®¤è¯, é‚£ä¹ˆå°±ä¼šé€ æˆä¸¥é‡çš„åæœ, å› ä¸ºç”¨æˆ· G ä½¿ç”¨çš„æå®¢æ—¶é—´çš„"),s("strong",[t._v("æˆæƒä¸Šä¸‹æ–‡ç¯å¢ƒ")]),t._v("è·Ÿæ”»å‡»è€…è½¯ä»¶ A çš„"),s("strong",[t._v("æˆæƒä¸Šä¸‹æ–‡ç¯å¢ƒ")]),t._v("ç»‘å®šåœ¨äº†ä¸€èµ·. ä¸ºäº†è§£é‡Šä¸¤ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒç»‘å®šåœ¨ä¸€èµ·å¯èƒ½å¸¦æ¥çš„å±å®³, è¿˜æ˜¯æ‹¿æå®¢æ—¶é—´æ¥ä¸¾ä¾‹.")]),t._v(" "),s("p",[t._v("å‡å¦‚æå®¢æ—¶é—´æä¾›äº†ç”¨æˆ·è´¦å·å’Œå¾®ä¿¡è´¦å·åšç»‘å®šçš„åŠŸèƒ½, ä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·å…ˆç”¨è‡ªå·±çš„æå®¢æ—¶é—´çš„è´¦å·ç™»å½•, ç„¶åå¯ä»¥ç»‘å®šå¾®ä¿¡è´¦å·, ä»¥ä¾¿åç»­å¯ä»¥ä½¿ç”¨å¾®ä¿¡è´¦å·æ¥ç™»å½•. åœ¨ç»‘å®šå¾®ä¿¡è´¦å·çš„æ—¶å€™, å¾®ä¿¡ä¼šå’¨è¯¢ä½ æ˜¯å¦ç»™æå®¢æ—¶é—´æˆæƒ, è®©å®ƒè·å–ä½ åœ¨å¾®ä¿¡ä¸Šçš„ä¸ªäººä¿¡æ¯. è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° OAuth 2.0 çš„æˆæƒæµç¨‹.")]),t._v(" "),s("p",[t._v("å¦‚æœæ”»å‡»è€…è½¯ä»¶ A, é€šè¿‡è‡ªå·±çš„æå®¢æ—¶é—´è´¦å·äº‹å…ˆåšäº†ä¸Šé¢çš„ç»‘å®šæ“ä½œ, ä¹Ÿå°±æ˜¯"),s("strong",[t._v("è¯´æ”»å‡»è€…å·²ç»å¯ä»¥ä½¿ç”¨è‡ªå·±çš„å¾®ä¿¡è´¦å·æ¥ç™»å½•æå®¢æ—¶é—´")]),t._v('äº†. å¦‚æœè½¯ä»¶ A æƒ³è¦"æäº‹æƒ…"äº†, ä¾¿åœ¨å‘èµ·äº†ä¸€ä¸ª'),s("strong",[t._v("æˆæƒè¯·æ±‚åæ„é€ äº†ä¸€ä¸ªæ”»å‡»é¡µé¢")]),t._v(", é‡Œé¢åŒ…å«çš„æ¨¡æ‹Ÿä»£ç æ­£å¦‚ä¸Šé¢æè¿°çš„é‚£æ ·, æ¥è¯±å¯¼ç”¨æˆ· G ç‚¹å‡».")]),t._v(" "),s("p",[t._v('è€Œç”¨æˆ· G å·²ç»ç”¨æå®¢æ—¶é—´çš„è´¦å·ç™»å½•äº†æå®¢æ—¶é—´, æ­¤æ—¶æ­£è¦å»åšè·Ÿå¾®ä¿¡è´¦å·çš„ç»‘å®š. å¦‚æœè¿™ä¸ªæ—¶å€™ä»–åˆšå¥½ç‚¹å‡»äº†æ”»å‡»è€… A "ç§ä¸‹"çš„è¿™ä¸ªæ¶æ„é¡µé¢, é‚£ä¹ˆ'),s("strong",[t._v("åé¢æ¢å–æˆæƒçš„è®¿é—®ä»¤ç‰Œ access_token, ä»¥åŠé€šè¿‡ accces_token è·å–çš„ä¿¡æ¯å°±éƒ½æ˜¯æ”»å‡»è€…è½¯ä»¶ A çš„")]),t._v("äº†.")]),t._v(" "),s("p",[t._v("è¿™å°±ç›¸å½“äº, "),s("strong",[t._v("ç”¨æˆ· G å°†è‡ªå·±çš„æå®¢æ—¶é—´çš„è´¦å·è·Ÿæ”»å‡»è€…è½¯ä»¶ A çš„å¾®ä¿¡è´¦å·ç»‘å®šåœ¨äº†ä¸€èµ·")]),t._v(". è¿™æ ·ä¸€æ¥, åç»­æ”»å‡»è€…è½¯ä»¶ A å°±èƒ½å¤Ÿé€šè¿‡è‡ªå·±çš„å¾®ä¿¡è´¦å·, æ¥ç™»å½•ç”¨æˆ· G çš„æå®¢æ—¶é—´äº†. è¿™ä¸ªåæœå¯æƒ³è€ŒçŸ¥.")]),t._v(" "),s("p",[t._v("é‚£å¦‚ä½•é¿å…è¿™ç§æ”»å‡»å‘¢? æ–¹æ³•ä¹Ÿå¾ˆç®€å•, å®é™…ä¸Š OAuth 2.0 ä¸­ä¹Ÿæœ‰è¿™æ ·çš„å»ºè®®, å°±æ˜¯"),s("mark",[s("strong",[t._v("ä½¿ç”¨ state å‚æ•°")])]),t._v(", å®ƒæ˜¯ä¸€ä¸ªéšæœºå€¼çš„å‚æ•°.")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯ä»¥ä¸Šé¢çš„åœºæ™¯ä¸ºä¾‹, "),s("strong",[t._v("å½“æå®¢æ—¶é—´è¯·æ±‚æˆæƒç çš„æ—¶å€™é™„å¸¦ä¸€ä¸ªè‡ªå·±ç”Ÿæˆ state å‚æ•°å€¼, åŒæ—¶æˆæƒæœåŠ¡ä¹Ÿè¦æŒ‰ç…§è§„åˆ™å°†è¿™ä¸ªéšæœºçš„ state å€¼è·Ÿæˆæƒç  code ä¸€èµ·è¿”å›ç»™æå®¢æ—¶é—´")]),t._v(". è¿™æ ·, å½“æå®¢æ—¶é—´æ¥æ”¶åˆ°æˆæƒç çš„æ—¶å€™, å°±è¦åœ¨æå®¢æ—¶é—´è¿™ä¸€ä¾§åšä¸€ä¸ª state å‚æ•°å€¼çš„æ¯”å¯¹æ ¡éªŒ, å¦‚æœç›¸åŒå°±ç»§ç»­æµç¨‹, å¦åˆ™ç›´æ¥æ‹’ç»åç»­æµç¨‹.")]),t._v(" "),s("p",[t._v('åœ¨è¿™æ ·çš„æƒ…å†µä¸‹, è½¯ä»¶ A è¦æƒ³å†å‘èµ· CSRF æ”»å‡», å°±å¿…é¡»å¦å¤–æ„é€ ä¸€ä¸ª state å€¼, è€Œè¿™ä¸ª state æ²¡é‚£ä¹ˆå®¹æ˜“è¢«ä¼ªé€ . è¿™æœ¬å°±æ˜¯ä¸€ä¸ªéšæœºçš„æ•°å€¼, è€Œä¸”åœ¨ç”Ÿæˆæ—¶å°±éµä»äº†è¢« "çŒœä¸­" çš„æ¦‚ç‡è¦æå°çš„å»ºè®®. æ¯”å¦‚, ç”Ÿæˆä¸€ä¸ª 6 ä½å­—æ¯å’Œæ•°å­—çš„ç»„åˆå€¼, æ˜¾ç„¶è¦æ¯”ç”Ÿæˆä¸€ä¸ª 6 ä½çº¯æ•°å­—å€¼è¢« "çŒœä¸­" çš„æ¦‚ç‡è¦å°. æ‰€ä»¥, è½¯ä»¶ B é€šè¿‡ä½¿ç”¨ state å‚æ•°, å°±å®ç°äº†ä¸€ä¸ªåŸºæœ¬çš„é˜²è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤.')]),t._v(" "),s("p",[t._v("å†æ¥æ€»ç»“ä¸‹, è¿™ä¸ªæ”»å‡»è¿‡ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯, "),s("strong",[t._v('è½¯ä»¶ A(æ”»å‡»è€…)ç”¨è‡ªå·±çš„æˆæƒç  codeA çš„å€¼, é€šè¿‡ CSRF æ”»å‡», "æ›¿æ¢" äº†è½¯ä»¶ B çš„æˆæƒç çš„å€¼')]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_2-xssæ”»å‡»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-xssæ”»å‡»"}},[t._v("#")]),t._v(" 2.XSSæ”»å‡»")]),t._v(" "),s("p",[s("strong",[t._v("XSS æ”»å‡»çš„ä¸»è¦æ‰‹æ®µæ˜¯å°†æ¶æ„è„šæœ¬æ³¨å…¥åˆ°è¯·æ±‚çš„è¾“å…¥ä¸­, æ”»å‡»è€…å¯ä»¥é€šè¿‡æ³¨å…¥çš„æ¶æ„è„šæœ¬æ¥è¿›è¡Œæ”»å‡»è¡Œä¸º, æ¯”å¦‚æœé›†æ•°æ®ç­‰")]),t._v('. æ¨èçœ‹çœ‹ã€ŠXSS æ”»å‡»åŸç†åˆ†æä¸é˜²å¾¡æŠ€æœ¯ã€‹è¿™ç¯‡æ–‡ç« , å®ƒå¾ˆæ¸…æ™°åœ°åˆ†æäº† XSS çš„åŸç†ä»¥åŠé˜²å¾¡æ–¹æ³•. è¿™é‡Œä¸»è¦çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆåœ¨ OAuth 2.0 çš„æµç¨‹ä¸­"å‘æŒ¥"çš„.')]),t._v(" "),s("p",[s("strong",[t._v("å½“è¯·æ±‚æŠµè¾¾å—ä¿æŠ¤èµ„æºæœåŠ¡æ—¶, ç³»ç»Ÿéœ€è¦åšæ ¡éªŒ, æ¯”å¦‚ç¬¬ä¸‰æ–¹è½¯ä»¶èº«ä»½åˆæ³•æ€§æ ¡éªŒ, è®¿é—®ä»¤ç‰Œ access_token çš„æ ¡éªŒ, å¦‚æœè¿™äº›ä¿¡æ¯éƒ½ä¸èƒ½è¢«æ ¡éªŒé€šè¿‡, å—ä¿æŠ¤èµ„æºæœåŠ¡å°±ä¼šè¿”å›é”™è¯¯çš„ä¿¡æ¯")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/97538156d69d95385ae8522fb4461791-20230729094013-688apzq.png",alt:"",title:"XSSæ”»å‡»è¿‡ç¨‹"}})]),t._v(" "),s("p",[t._v("å¤§å¤šæ•°æƒ…å†µä¸‹, "),s("strong",[t._v("å—ä¿æŠ¤èµ„æºéƒ½æ˜¯æŠŠè¾“å…¥çš„å†…å®¹, æ¯”å¦‚ app_id invalid, access_token invalid, å†å›æ˜¾ä¸€é, è¿™æ—¶å°±ä¼šè¢« XSS æ”»å‡»è€…æ•è·åˆ°æœºä¼š")]),t._v(". è¯•æƒ³ä¸‹, å¦‚æœæ”»å‡»è€…ä¼ å…¥äº†ä¸€äº›æ¶æ„çš„, æœé›†ç”¨æˆ·æ•°æ®çš„ JavaScript ä»£ç , å—ä¿æŠ¤èµ„æºæœåŠ¡ç›´æ¥åŸè·¯è¿”å›åˆ°ç”¨æˆ·çš„é¡µé¢ä¸Š, é‚£ä¹ˆ"),s("strong",[t._v("å½“ç”¨æˆ·è§¦å‘åˆ°è¿™äº›ä»£ç çš„æ—¶å€™å°±ä¼šé­å—åˆ°æ”»å‡»")]),t._v(".")]),t._v(" "),s("p",[t._v("å› æ­¤, å—ä¿æŠ¤èµ„æºæœåŠ¡å°±éœ€è¦å¯¹è¿™ç±» XSS æ¼æ´åšä¿®å¤, è€Œå…·ä½“çš„ä¿®å¤æ–¹æ³•è·Ÿå…¶å®ƒç½‘ç«™é˜²å¾¡ XSS ç±»ä¼¼, æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯"),s("mark",[s("strong",[t._v("å¯¹æ­¤ç±»éæ³•ä¿¡æ¯åšè½¬ä¹‰è¿‡æ»¤")])]),t._v(", æ¯”å¦‚å¯¹åŒ…å«"),s("code",[t._v("<script>")]),t._v("â€‹, "),s("code",[t._v("<img>")]),t._v("â€‹, "),s("code",[t._v("<a>")]),t._v("â€‹ç­‰æ ‡ç­¾çš„ä¿¡æ¯è¿›è¡Œè½¬ä¹‰è¿‡æ»¤.")]),t._v(" "),s("p",[t._v("CSRF æ”»å‡», XSS æ”»å‡»åº”è¯¥æ˜¯æ‰€æœ‰ Web ç³»ç»Ÿéƒ½éœ€è¦å…±åŒé˜²èŒƒçš„. åœ¨å®æ–½ OAuth 2.0 æ¶æ„çš„æ—¶å€™, ä¹Ÿä¸€å®šè¦è€ƒè™‘åˆ°è¿™å±‚é˜²æŠ¤, å¦åˆ™å°±ä¼šç»™ç”¨æˆ·é€ æˆä¼¤å®³.")]),t._v(" "),s("h5",{attrs:{id:"_3-æ°´å¹³è¶Šæƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ°´å¹³è¶Šæƒ"}},[t._v("#")]),t._v(" 3.æ°´å¹³è¶Šæƒ")]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("æ°´å¹³è¶Šæƒæ˜¯æŒ‡, åœ¨è¯·æ±‚å—ä¿æŠ¤èµ„æºæœåŠ¡æ•°æ®çš„æ—¶å€™, æœåŠ¡ç«¯åº”ç”¨ç¨‹åºæœªæ ¡éªŒè¿™æ¡æ•°æ®æ˜¯å¦å½’å±äºå½“å‰æˆæƒçš„è¯·æ±‚ç”¨æˆ·")])]),t._v(". è¿™æ ·ä¸æ³•è€…ç”¨è‡ªå·±è·å¾—çš„æˆæƒæ¥è®¿é—®å—ä¿æŠ¤èµ„æºæœåŠ¡çš„æ—¶å€™, å°±"),s("strong",[t._v("æœ‰å¯èƒ½è·å–å…¶ä»–ç”¨æˆ·çš„æ•°æ®")]),t._v(", å¯¼è‡´æ°´å¹³è¶Šæƒæ¼æ´é—®é¢˜çš„å‘ç”Ÿ. æ”»å‡»è€…å¯è¶Šæƒçš„æ“ä½œæœ‰å¢åŠ , åˆ é™¤, ä¿®æ”¹å’ŒæŸ¥è¯¢, æ— è®ºæ›´æ–°æ“ä½œè¿˜æ˜¯æŸ¥è¯¢æ“ä½œéƒ½æœ‰ç›¸å½“çš„å±å®³æ€§.")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­. ä»¥å°å…”æ‰“å•è½¯ä»¶ä¸ºä¾‹, ç¬¬ä¸‰æ–¹å¼€å‘è€…å¼€å‘äº†è¿™æ¬¾æ‰“å•è½¯ä»¶, ç›®å‰æœ‰ä¸¤ä¸ªå•†å®¶ A å’Œå•†å®¶ B è´­ä¹°å¹¶ä½¿ç”¨. ç°åœ¨å°å…”æ‰“å•è½¯ä»¶ä¸Šé¢æä¾›äº†æ ¹æ®è®¢å• ID æŸ¥è¯¢è®¢å•æ•°æ®çš„åŠŸèƒ½, å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/ec93273b8aaf49c2c641b7b51459f85b-20230729094013-mpvetgj.png",alt:"",title:"æ°´å¹³è¶Šæƒå‘ç”Ÿåœºæ™¯"}})]),t._v(" "),s("p",[t._v("å•†å®¶ A å’Œå•†å®¶ B åˆ†åˆ«ç»™å°å…”æ‰“å•è½¯ä»¶åº”ç”¨åšäº†æˆæƒ, ä¹Ÿå°±æ˜¯è¯´, å°å…”æ‰“å•è½¯ä»¶å¯ä»¥è·å–å•†å®¶ A å’Œå•†å®¶ B çš„è®¢å•æ•°æ®. æ­¤æ—¶æ²¡æœ‰ä»»ä½•é—®é¢˜, **é‚£ä¹ˆå•†å®¶ A å¯ä»¥è·å–å•†å®¶ B çš„è®¢å•æ•°æ®å—? ** ç­”æ¡ˆæ˜¯, "),s("strong",[t._v("ææœ‰å¯èƒ½çš„")]),t._v(".")]),t._v(" "),s("p",[t._v("åœ¨å¼€æ”¾å¹³å°ç¯å¢ƒä¸‹, "),s("strong",[t._v("æˆæƒå…³ç³»çš„æ ¡éªŒæ˜¯ç”±ä¸€èˆ¬ç”±å¼€æ”¾ç½‘å…³è¿™ä¸€å±‚æ¥å¤„ç†, å› ä¸ºå—ä¿æŠ¤èµ„æºæœåŠ¡ä¼šæ•£è½åœ¨å„ä¸ªä¸šåŠ¡æ”¯æŒéƒ¨é—¨")]),t._v(". è¯·æ±‚æ•°æ®é€šè¿‡å¼€æ”¾ç½‘å…³ä¹‹åç”±è®¿é—®ä»¤ç‰Œ access_token è·å–äº†ç”¨æˆ·çš„èº«ä»½, æ¯”å¦‚å•†å®¶ ID, å°±ä¼šé€ä¼ åˆ°å—ä¿æŠ¤èµ„æºæœåŠ¡, ä¹Ÿå°±æ˜¯ä¸Šæ¸¸æ¥å£æä¾›æ–¹çš„ç³»ç»Ÿ.")]),t._v(" "),s("p",[t._v("æ­¤æ—¶, "),s("strong",[t._v("å¦‚æœå—ä¿æŠ¤èµ„æºæœåŠ¡æ²¡æœ‰å¯¹å•†å®¶ ID å’Œè®¢å• ID åšå½’å±åˆ¤æ–­, å°±æœ‰å¯èƒ½å‘ç”Ÿå•†å®¶ A è·å–å•†å®¶ B è®¢å•æ•°æ®çš„é—®é¢˜, é€ æˆæ°´å¹³è¶Šæƒé—®é¢˜")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9328d4e530b61f56fb372d71c35d2ca4-20230729094013-hzmzi3u.png",alt:"",title:"æ°´å¹³è¶Šæƒç¤ºä¾‹å›¾"}})]),t._v(" "),s("p",[s("strong",[t._v("å‘ç”Ÿæ°´å¹³è¶Šæƒé—®é¢˜çš„æ ¹æœ¬åŸå› , è¿˜æ˜¯å¼€å‘äººå‘˜çš„è®¤çŸ¥ä¸æ„è¯†ä¸å¤Ÿ")]),t._v(". å¦‚æœè®¤çŸ¥ä¸æ„è¯†è·Ÿå¾—ä¸Š, é‚£åœ¨è®¾è®¡ä¹‹åˆå¢åŠ å½’å±å…³ç³»åˆ¤æ–­, æ¯”å¦‚ä¸Šé¢æåˆ°çš„è®¢å• ID å’Œå•†å®¶ ID çš„å½’å±å…³ç³»åˆ¤æ–­, å°±èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…è¿™ä¸ªæ¼æ´.")]),t._v(" "),s("p",[t._v("åŒæ—¶, åœ¨å¼€æ”¾å¹³å°ç¯å¢ƒä¸‹, ç”±äºå¼€æ”¾ç½‘å…³å’Œæ•°æ®æ¥å£æä¾›æ–¹æ¥è‡ªä¸åŒçš„ä¸šåŠ¡éƒ¨é—¨, é˜²æ­¢æ°´å¹³æ ¡éªŒçš„é€»è¾‘å¤„ç†å¾ˆå®¹æ˜“è¢«é—æ¼:")]),t._v(" "),s("ol",[s("li",[t._v("ä¸€æ–¹é¢, å¼€æ”¾ç½‘å…³çš„ä½œç”¨æ˜¯å°†ç”¨æˆ·æˆæƒä¹‹åçš„è®¿é—®ä»¤ç‰Œ access_token ä¿¡æ¯è½¬æ¢æˆçœŸå®çš„ç”¨æˆ·ä¿¡æ¯, æ¯”å¦‚ä¸Šé¢æåˆ°çš„å•†å®¶ ID, ç„¶åä¼ é€’åˆ°æ¥å£æä¾›æ–¹, æ•°æ®å½’å±åˆ¤æ–­é€»è¾‘åªèƒ½åœ¨æ¥å£æä¾›æ–¹å†…éƒ¨å¤„ç†;")]),t._v(" "),s("li",[t._v('å¦ä¸€æ–¹é¢, æ•°æ®æä¾›æ–¹å¾€å¾€ä¼šè®¤ä¸ºå¼€æ”¾å‡ºçš„æ¥å£æ˜¯è¢«"è·Ÿè‡ªå·±ä¸€ä¸ªå…¬å¸çš„ç³»ç»Ÿæ‰€è°ƒç”¨çš„", å®¹æ˜“å¿½ç•¥æ°´å¹³æ ¡éªŒçš„é€»è¾‘å¤„ç†.')])]),t._v(" "),s("p",[t._v("æ‰€ä»¥åœ¨å¼€æ”¾å¹³å°ç¯å¢ƒä¸‹, å°±è¦æ›´åŠ é‡è§†ä¸é˜²èŒƒæ•°æ®çš„è¶Šæƒé—®é¢˜.")]),t._v(" "),s("p",[t._v("ä»¥ä¸Š, CSRF æ”»å‡», XSS æ”»å‡», æ°´å¹³è¶Šæƒè¿™ä¸‰ç§æ”»å‡»ç±»å‹, å®ƒä»¬éƒ½å±äº OAuth 2.0 é¢ä¸´çš„äº’è”ç½‘éå¸¸å¸¸è§çš„é€šç”¨æ”»å‡»ç±»å‹.")]),t._v(" "),s("h5",{attrs:{id:"_4-æˆæƒç å¤±çªƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æˆæƒç å¤±çªƒ"}},[t._v("#")]),t._v(" 4.æˆæƒç å¤±çªƒ")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å†çœ‹ä¸¤ç§ OAuth 2.0 "),s("strong",[t._v("ä¸“æœ‰çš„å®‰å…¨æ”»å‡», åˆ†åˆ«æ˜¯æˆæƒç å¤±çªƒ, é‡å®šå‘ URI è¢«ç¯¡æ”¹")]),t._v(".")]),t._v(" "),s("p",[t._v("ä¸¾ä¸ªä¾‹å­, å…ˆæ¥çœ‹çœ‹æˆæƒç å¤±çªƒè¿™ä¸ªåœºæ™¯. å¦‚æœç¬¬ä¸‰æ–¹è½¯ä»¶ A æœ‰åˆæ³•çš„ app_id å’Œ app_secret, é‚£ä¹ˆå½“å®ƒå»è¯·æ±‚è®¿é—®ä»¤ç‰Œçš„æ—¶å€™, ä¹Ÿæ˜¯åˆæ³•çš„. è¿™ä¸ªæ—¶å€™æ²¡æœ‰ä»»ä½•é—®é¢˜.")]),t._v(" "),s("p",[t._v("å¦‚æœæœ‰ä¸€ä¸ªç”¨æˆ· G å¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶ B, æ¯”å¦‚æå®¢æ—¶é—´, "),s("strong",[t._v("è¿›è¡Œæˆæƒå¹¶äº§ç”Ÿäº†ä¸€ä¸ªæˆæƒç  codeB")]),t._v(", ä½†å¹¶æ²¡æœ‰å¯¹æ”»å‡»è€…è½¯ä»¶ A æˆæƒ. æ­¤æ—¶, è½¯ä»¶ A æ˜¯ä¸èƒ½è®¿é—®ç”¨æˆ· G çš„æ‰€æœ‰æ•°æ®çš„. ä½†è¿™æ—¶, å¦‚æœè½¯ä»¶ A è·å–äº†è¿™ä¸ª codeB, æ˜¯ä¸æ˜¯å°±èƒ½å¤Ÿåœ¨æ²¡æœ‰è·å¾—ç”¨æˆ· G æˆæƒçš„æƒ…å†µä¸‹è®¿é—®ç”¨æˆ· G çš„æ•°æ®äº†? æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/038f2fa53b40f965b7ca5dbfa97bf7ec-20230729094013-boljetl.png",alt:"",title:"æˆæƒç å¤±çªƒæ”»å‡»è¿‡ç¨‹"}})]),t._v(" "),s("p",[t._v("**è¿™æ—¶é—®é¢˜çš„æ ¹æºå°±åœ¨äºä¸¤ç‚¹: **")]),t._v(" "),s("ol",[s("li",[t._v("**æˆæƒæœåŠ¡åœ¨è¿›è¡Œæˆæƒç æ ¡éªŒçš„æ—¶å€™, æ²¡æœ‰æ ¡éªŒ app_id_B; **")]),t._v(" "),s("li",[t._v("**è½¯ä»¶ B(ä¹Ÿå°±æ˜¯æå®¢æ—¶é—´)ä½¿ç”¨è¿‡ä¸€æ¬¡ codeB çš„å€¼ä¹‹å, æˆæƒæœåŠ¡æ²¡æœ‰åˆ é™¤è¿™ä¸ª codeB; **")])]),t._v(" "),s("p",[t._v("çœ‹åˆ°è¿™é‡Œ, é€šè¿‡æ ¡éªŒ app_id_B, å¹¶åˆ é™¤æ‰ä½¿ç”¨è¿‡ä¸€æ¬¡çš„æˆæƒç åŠå…¶å¯¹åº”çš„è®¿é—®ä»¤ç‰Œ, å°±å¯ä»¥ä»æ ¹æœ¬ä¸Šæ¥æœç»æˆæƒç å¤±çªƒå¸¦æ¥çš„å±å®³äº†.")]),t._v(" "),s("h5",{attrs:{id:"_5-é‡å®šå‘uriè¢«ç¯¡æ”¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-é‡å®šå‘uriè¢«ç¯¡æ”¹"}},[t._v("#")]),t._v(" 5.é‡å®šå‘URIè¢«ç¯¡æ”¹")]),t._v(" "),s("p",[t._v("è¯´åˆ°è¿™é‡Œ, æˆæƒç åˆ°åº•æ˜¯æ€ä¹ˆå¤±çªƒçš„? ä¸‹é¢ä»‹ç»çš„å°±æ˜¯æˆæƒç å¤±çªƒçš„å¯èƒ½çš„æ–¹æ³•ä¹‹ä¸€, è¿™ä¹Ÿæ˜¯ OAuth 2.0 ä¸­å› é‡å®šå‘ URI æ ¡éªŒæ–¹æ³•ä¸å½“è€Œé­å—åˆ°çš„ä¸€ç§å±å®³. è¿™ç§å®‰å…¨æ”»å‡»ç±»å‹, å°±æ˜¯é‡å®šå‘ URI è¢«ç¯¡æ”¹.")]),t._v(" "),s("p",[t._v("æœ‰çš„æ—¶å€™, "),s("strong",[t._v("æˆæƒæœåŠ¡æä¾›æ–¹å¹¶æ²¡æœ‰å¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å›è°ƒ URI åšå®Œæ•´æ€§è¦æ±‚å’Œå®Œæ•´æ€§æ ¡éªŒ")]),t._v(". æ¯”å¦‚, ç¬¬ä¸‰è½¯ä»¶ B æå®¢æ—¶é—´çš„è¯¦ç»†å›è°ƒ URI æ˜¯ "),s("code",[t._v("https://time.geekbang.org/callback")]),t._v("â€‹, é‚£ä¹ˆåœ¨å®Œæ•´æ€§æ ¡éªŒç¼ºå¤±çš„æƒ…å†µä¸‹, åªè¦ä»¥ "),s("code",[t._v("https://time.geekbang.org")]),t._v("â€‹ å¼€å§‹çš„å›è°ƒ URI åœ°å€, éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯åˆæ³•çš„.")]),t._v(" "),s("p",[t._v("æ­¤æ—¶, å¦‚æœé»‘å®¢åœ¨ "),s("code",[t._v("https://time.geekbang.org/page/")]),t._v("â€‹ ä¸‹, åˆ›å»ºäº†ä¸€ä¸ªé¡µé¢ "),s("strong",[t._v("hacker.html")]),t._v(". è¿™ä¸ªé¡µé¢çš„å†…å®¹å¯ä»¥å¾ˆç®€å•, å…¶ç›®çš„å°±æ˜¯è®©è¯·æ±‚èƒ½å¤ŸæŠµè¾¾æ”»å‡»è€…çš„æœåŠ¡.")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://clientA.com/catch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("å¥½äº†, ç»§ç»­çœ‹ä¸‹æ¥ä¸‹æ¥çš„æ”»å‡»æµç¨‹:")]),t._v(" "),s("p",[t._v("é¦–å…ˆ, é»‘å®¢å°†æ„é€ çš„æ”»å‡»é¡µé¢æ”¾åˆ°å¯¹åº”çš„ hacker.html ä¸Š, ä¹Ÿå°±æ˜¯ "),s("code",[t._v("https://time.geekbang.org/page/hacker.html")]),t._v("â€‹ ä¸Š , åŒæ—¶æ„é€ å‡ºäº†ä¸€ä¸ªæ–°çš„é‡å®šå‘ URI, å³ "),s("code",[t._v("https://time.geekbang.org/page/welcome/back.html../hacker.html")]),t._v("â€‹.")]),t._v(" "),s("p",[t._v("ç„¶å, é»‘å®¢åˆ©ç”¨ä¸€äº›é’“é±¼æ‰‹æ®µè¯±å¯¼ç”¨æˆ·, å»ç‚¹å‡»ä¸‹é¢çš„è¿™ä¸ªåœ°å€:")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//oauth-server.com/auth?respons_type=code&client_id=CLIENTID&redirect_uri=https://time.geekbang.org/page/welcome/back.html../hacker.html")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿™æ ·å½“æˆæƒæœåŠ¡åšå‡ºå“åº”è¿›è¡Œé‡å®šå‘è¯·æ±‚çš„æ—¶å€™, "),s("strong",[t._v("æˆæƒç  code å°±è¿”å›åˆ°äº† hacker.html è¿™ä¸ªé¡µé¢")]),t._v("ä¸Š.")]),t._v(" "),s("p",[t._v("æœ€å, é»‘å®¢åœ¨ "),s("code",[t._v("https://clientA.com/catch")]),t._v("â€‹ é¡µé¢ä¸Š, è§£æ Referrer å¤´éƒ¨å°±ä¼šå¾—åˆ°"),s("strong",[t._v("ç”¨æˆ·çš„æˆæƒç ")]),t._v(", ç»§è€Œå°±å¯ä»¥åƒæˆæƒç å¤±çªƒçš„åœºæ™¯ä¸­é‚£æ ·å»æ¢å–è®¿é—®ä»¤ç‰Œäº†.")]),t._v(" "),s("p",[t._v("çœ‹åˆ°è¿™é‡Œå°±çŸ¥é“äº†, å¦‚æœæˆæƒæœåŠ¡è¦æ±‚çš„å›è°ƒ URI æ˜¯ "),s("code",[t._v("https://time.geekbang.org/callback")]),t._v("â€‹, å¹¶åšäº†å›è°ƒ URI çš„å®Œæ•´æ€§æ ¡éªŒ, é‚£ä¹ˆè¢«ç¯¡æ”¹ä¹‹åçš„å›è°ƒåœ°å€ "),s("code",[t._v("https://time.geekbang.org/page/welcome/back.html../hacker.html")]),t._v("â€‹ å°±ä¸ä¼šè¢«æˆæƒæœåŠ¡å»å‘èµ·é‡å®šå‘è¯·æ±‚.")]),t._v(" "),s("p",[t._v("ä¸¥æ ¼æ¥è®², è¦å‘ç”Ÿè¿™æ ·çš„æ¼æ´é—®é¢˜, æ¡ä»¶è¿˜æ˜¯æ¯”è¾ƒè‹›åˆ»çš„. åªè¦åœ¨æˆæƒæœåŠ¡éªŒè¯ç¬¬ä¸‰æ–¹è½¯ä»¶çš„è¯·æ±‚æ—¶åšäº†ç­¾åæ ¡éªŒ, é‚£ä¹ˆæ”»å‡»è€…åœ¨åªæ‹¿åˆ°æˆæƒç  code çš„æƒ…å†µä¸‹, ä»ç„¶æ— æ³•è·å–è®¿é—®ä»¤ç‰Œ, å› ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶åªæœ‰é€šè¿‡è®¿é—®ä»¤ç‰Œæ‰èƒ½å¤Ÿè®¿é—®ç”¨æˆ·çš„æ•°æ®.")]),t._v(" "),s("h5",{attrs:{id:"_6-æ€»ç»“-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-æ€»ç»“-2"}},[t._v("#")]),t._v(" 6.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ä¸‰ä¸ªçŸ¥è¯†ç‚¹:")]),t._v(" "),s("ul",[s("li",[t._v("äº’è”ç½‘åœºæ™¯çš„å®‰å…¨æ”»å‡»ç±»å‹æ¯”å¦‚ CSRF, XSS ç­‰, åœ¨ OAuth 2.0 ä¸­ä¸€æ ·è¦åšé˜²èŒƒ, å› ä¸º OAuth 2.0 æœ¬èº«å°±æ˜¯åº”ç”¨åœ¨äº’è”ç½‘åœºæ™¯ä¸­.")]),t._v(" "),s("li",[t._v('é™¤äº†å¸¸è§çš„äº’è”ç½‘å®‰å…¨æ”»å‡», OAuth 2.0 ä¹Ÿæœ‰è‡ªèº«çš„å®‰å…¨é£é™©é—®é¢˜, æ¯”å¦‚æˆæƒç å¤±çªƒ, é‡å®šå‘ URI è¢«ç¯¡æ”¹. è¿™äº›å®‰å…¨é—®é¢˜, æœ¬èº«ä»æ”»å‡»çš„ "æŠ€æœ¯å«é‡" ä¸Šå¹¶ä¸é«˜, ä½†å¯¼è‡´è¿™äº›å®‰å…¨é£é™©çš„å› ç´ , å¾€å¾€å°±æ˜¯'),s("strong",[t._v("å¼€å‘äººå‘˜çš„å®‰å…¨æ„è¯†ä¸å¤Ÿ")]),t._v(". æ¯”å¦‚, æ²¡æœ‰æ„è¯†åˆ°æ°´å¹³è¶Šæƒä¸­çš„æ•°æ®å½’å±é€»è¾‘åˆ¤æ–­, éœ€è¦åŠ å…¥åˆ°ä»£ç é€»è¾‘ä¸­.")]),t._v(" "),s("li",[t._v("å…¶å®, OAuth 2.0 çš„è§„èŒƒé‡Œé¢å¯¹è¿™äº›å®‰å…¨é—®é¢˜éƒ½æœ‰å¯¹åº”çš„è§„é¿æ–¹å¼, ä½†éƒ½è¦æ±‚ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦éå¸¸ä¸¥è°¨. æ¯”å¦‚, é‡å®šå‘ URI çš„æ ¡éªŒæ–¹å¼, è§„èŒƒé‡Œé¢æ˜¯å…è®¸æ¨¡ç³Šæ ¡éªŒçš„, ä½†åœ¨ç»“åˆå®é™…ç¯å¢ƒçš„æ—¶å€™, åˆå¿…é¡»åšåˆ°ç²¾ç¡®åŒ¹é…æ ¡éªŒæ‰å¯ä»¥ä¿éšœ OAuth 2.0 æµè½¬çš„å®‰å…¨æ€§.")])]),t._v(" "),s("p",[t._v("æœ¬èŠ‚æ€ç»´å¯¼å›¾å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9744c3c92a4e3c726be369ba423b39d5-20230729094013-ll8jft7.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"å®æˆ˜-åˆ©ç”¨oauth-2-0å®ç°ä¸€ä¸ªopenid-connectç”¨æˆ·èº«ä»½è®¤è¯åè®®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜-åˆ©ç”¨oauth-2-0å®ç°ä¸€ä¸ªopenid-connectç”¨æˆ·èº«ä»½è®¤è¯åè®®"}},[t._v("#")]),t._v(" å®æˆ˜-åˆ©ç”¨OAuth 2.0å®ç°ä¸€ä¸ªOpenID Connectç”¨æˆ·èº«ä»½è®¤è¯åè®®")]),t._v(" "),s("p",[t._v("å¦‚æœä½ æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…, åœ¨å®ç°ç”¨æˆ·ç™»å½•çš„é€»è¾‘æ—¶, é™¤äº†å¯ä»¥è®©ç”¨æˆ·æ–°æ³¨å†Œä¸€ä¸ªè´¦å·å†ç™»å½•å¤–, è¿˜å¯ä»¥æ¥å…¥å¾®ä¿¡, å¾®åšç­‰å¹³å°, è®©ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„å¾®ä¿¡, å¾®åšè´¦å·å»ç™»å½•. åŒæ—¶, "),s("strong",[t._v("å¦‚æœä½ çš„åº”ç”¨ä¸‹é¢åˆæœ‰å¤šä¸ªå­åº”ç”¨, è¿˜å¯ä»¥è®©ç”¨æˆ·åªç™»å½•ä¸€æ¬¡å°±èƒ½è®¿é—®æ‰€æœ‰çš„å­åº”ç”¨, æ¥æå‡ç”¨æˆ·ä½“éªŒ")]),t._v(".")]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯"),s("strong",[t._v("è”åˆç™»å½•å’Œå•ç‚¹ç™»å½•")]),t._v("äº†. å†ç»§ç»­æ·±ç©¶, å®ƒä»¬å…¶å®éƒ½æ˜¯ "),s("strong",[t._v("OpenID Connect(ç®€ç§° OIDC)çš„åº”ç”¨åœºæ™¯")]),t._v("çš„å®ç°. é‚£ OIDC åˆæ˜¯ä»€ä¹ˆå‘¢?")]),t._v(" "),s("p",[s("strong",[t._v("æœ¬èŠ‚å°±æ¥å­¦ä¹ ä¸‹ OIDC å’Œ OAuth 2.0 çš„å…³ç³», ä»¥åŠå¦‚ä½•ç”¨ OAuth 2.0 æ¥å®ç°ä¸€ä¸ª OIDC ç”¨æˆ·èº«ä»½è®¤è¯åè®®.")])]),t._v(" "),s("h5",{attrs:{id:"_1-oidcæ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-oidcæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1.OIDCæ˜¯ä»€ä¹ˆ?")]),t._v(" "),s("p",[t._v("OIDC å…¶å®å°±æ˜¯ä¸€ç§"),s("strong",[t._v("ç”¨æˆ·èº«ä»½è®¤è¯çš„å¼€æ”¾æ ‡å‡†")]),t._v(". ä½¿ç”¨å¾®ä¿¡è´¦å·ç™»å½•æå®¢æ—¶é—´çš„åœºæ™¯, å°±æ˜¯è¿™ç§å¼€æ”¾æ ‡å‡†çš„å®è·µ.")]),t._v(" "),s("p",[t._v('è¯´åˆ°è¿™é‡Œå¯èƒ½è¦å‘é—®äº†: "ä¸å¯¹å‘€, ä½¿ç”¨å¾®ä¿¡ç™»å½•ç¬¬ä¸‰æ–¹ App ç”¨çš„ä¸æ˜¯ OAuth 2.0 å¼€æ”¾åè®®å—, æ€ä¹ˆåˆæ‰¯ä¸Š OIDC äº†?"')]),t._v(" "),s("p",[t._v("**æ²¡é”™, ç”¨å¾®ä¿¡ç™»å½•æŸç¬¬ä¸‰æ–¹è½¯ä»¶, ç¡®å®ä½¿ç”¨çš„æ˜¯ OAuth 2.0. ä½† OAuth2.0 æ˜¯ä¸€ç§æˆæƒåè®®, è€Œä¸æ˜¯èº«ä»½è®¤è¯åè®®. **â€‹"),s("mark",[s("strong",[t._v("OIDC æ‰æ˜¯èº«ä»½è®¤è¯åè®®, è€Œä¸”æ˜¯åŸºäº OAuth 2.0 æ¥æ‰§è¡Œç”¨æˆ·èº«ä»½è®¤è¯çš„äº’é€šåè®®. æ›´æ¦‚æ‹¬åœ°è¯´, OIDC å°±æ˜¯ç›´æ¥åŸºäº OAuth 2.0 æ„å»ºçš„èº«ä»½è®¤è¯æ¡†æ¶åè®®")])]),t._v("â€‹ **. **")]),t._v(" "),s("p",[t._v("æ¢ç§è¡¨è¿°æ–¹å¼, "),s("strong",[t._v("==OIDC = æˆæƒåè®® + èº«ä»½è®¤è¯==")]),t._v(', æ˜¯ OAuth 2.0 çš„è¶…é›†. ä¸ºæ–¹ä¾¿ç†è§£, å¯ä»¥æŠŠ OAuth 2.0 ç†è§£ä¸ºé¢ç²‰, æŠŠ OIDC ç†è§£ä¸ºé¢åŒ…. è¿™å°±å®¹æ˜“ç†è§£å®ƒä»¬çš„å…³ç³»äº†. å› æ­¤, è¯´ "ç¬¬ä¸‰æ–¹ App ä½¿ç”¨å¾®ä¿¡ç™»å½•ç”¨åˆ°äº† OAuth 2.0" æ²¡æœ‰é”™, è¯´ "ä½¿ç”¨åˆ°äº† OIDC" æ›´æ²¡æœ‰é”™.')]),t._v(" "),s("p",[t._v("è€ƒè™‘åˆ°"),s("strong",[t._v("å•ç‚¹ç™»å½•, è”åˆç™»å½•, éƒ½éµå¾ªçš„æ˜¯ OIDC çš„æ ‡å‡†æµç¨‹")]),t._v(", å› æ­¤æœ¬èŠ‚å°±è®²è®²å¦‚ä½•åˆ©ç”¨ OAuth2.0 æ¥å®ç°ä¸€ä¸ª OIDC. æŒæ¡äº†è¿™ä¸€ç‚¹, å†å»åšå•ç‚¹ç™»å½•, è”åˆç™»å½•çš„åœºæ™¯, ä»¥åŠå…¶ä»–æ›´å¤šå…³äºèº«ä»½è®¤è¯çš„åœºæ™¯, å°±éƒ½ä¸å†æ˜¯é—®é¢˜äº†.")]),t._v(" "),s("h5",{attrs:{id:"_2-oidcå’Œoauth-2-0çš„è§’è‰²å¯¹åº”å…³ç³»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-oidcå’Œoauth-2-0çš„è§’è‰²å¯¹åº”å…³ç³»"}},[t._v("#")]),t._v(" 2.OIDCå’ŒOAuth 2.0çš„è§’è‰²å¯¹åº”å…³ç³»")]),t._v(" "),s("p",[t._v('è¯´åˆ° "å¦‚ä½•åˆ©ç”¨ OAuth 2.0 æ¥æ„å»º OIDC è¿™æ ·çš„è®¤è¯åè®®", å¯ä»¥æƒ³åˆ°ä¸€ä¸ªåˆ‡å…¥ç‚¹, è¿™ä¸ªåˆ‡å…¥ç‚¹å°±æ˜¯ OAuth 2.0 çš„å››ç§è§’è‰².')]),t._v(" "),s("p",[t._v("OAuth 2.0 çš„æˆæƒç è®¸å¯æµç¨‹çš„è¿è½¬, "),s("strong",[t._v("éœ€è¦èµ„æºæ‹¥æœ‰è€…, ç¬¬ä¸‰æ–¹è½¯ä»¶, æˆæƒæœåŠ¡, å—ä¿æŠ¤èµ„æºè¿™ 4 ä¸ªè§’è‰²é—´çš„é¡ºç•…é€šä¿¡, é…åˆæ‰èƒ½å¤Ÿå®Œæˆ")]),t._v('. å¦‚æœè¦æƒ³åœ¨ OAuth 2.0 çš„æˆæƒç è®¸å¯ç±»å‹çš„åŸºç¡€ä¸Šæ¥æ„å»º OIDC çš„è¯, è¿™ 4 ä¸ªè§’è‰²ä»ç„¶è¦ç»§ç»­å‘æŒ¥ "å®ƒä»¬çš„ä»·å€¼". è¿™ 4 ä¸ªè§’è‰²åˆæ˜¯æ€ä¹ˆå¯¹åº”åˆ° OIDC ä¸­çš„å‚ä¸æ–¹çš„?')]),t._v(" "),s("p",[t._v("é‚£ä¹ˆå°±å…ˆæƒ³æƒ³ä¸€ä¸ªå…³äºèº«ä»½è®¤è¯çš„åè®®æ¡†æ¶, åº”è¯¥æœ‰ä»€ä¹ˆè§’è‰². å®ƒ"),s("mark",[s("strong",[t._v("éœ€è¦ä¸€ä¸ªç™»å½•ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æœ€ç»ˆç”¨æˆ·, ä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶, ä»¥åŠä¸€ä¸ªè®¤è¯æœåŠ¡æ¥ä¸ºè¿™ä¸ªç”¨æˆ·æä¾›èº«ä»½è¯æ˜çš„éªŒè¯åˆ¤æ–­")])]),t._v(".")]),t._v(" "),s("p",[t._v("æ²¡é”™, è¿™å°±æ˜¯ OIDC çš„"),s("strong",[t._v("ä¸‰ä¸ªä¸»è¦è§’è‰²")]),t._v("äº†. åœ¨ OIDC çš„å®˜æ–¹æ ‡å‡†æ¡†æ¶ä¸­, è¿™ä¸‰ä¸ªè§’è‰²çš„åå­—æ˜¯:")]),t._v(" "),s("ol",[s("li",[s("mark",[t._v("**EU(End User), ä»£è¡¨æœ€ç»ˆç”¨æˆ·. **")])]),t._v(" "),s("li",[s("mark",[t._v("**RP(Relying Party), ä»£è¡¨è®¤è¯æœåŠ¡çš„ä¾èµ–æ–¹, å°±æ˜¯ä¸Šé¢æåˆ°çš„ç¬¬ä¸‰æ–¹è½¯ä»¶. **")])]),t._v(" "),s("li",[s("mark",[t._v("**OP(OpenID Provider), ä»£è¡¨æä¾›èº«ä»½è®¤è¯æœåŠ¡æ–¹. **")])])]),t._v(" "),s("p",[t._v("EU, RP å’Œ OP è¿™ä¸‰ä¸ªè§’è‰²å¯¹äº OIDC éå¸¸é‡è¦, åé¢ä¹Ÿä¼šæ—¶å¸¸ä½¿ç”¨ç®€ç§°æ¥æè¿°.")]),t._v(" "),s("p",[t._v("ç°åœ¨å¾ˆå¤š App éƒ½æ¥å…¥äº†å¾®ä¿¡ç™»å½•, é‚£ä¹ˆ"),s("strong",[t._v("å¾®ä¿¡ç™»å½•å°±æ˜¯ä¸€ä¸ªå¤§çš„èº«ä»½è®¤è¯æœåŠ¡(OP)")]),t._v(" . ä¸€æ—¦æœ‰äº†å¾®ä¿¡è´¦å·, å°±å¯ä»¥"),s("strong",[t._v("ç™»å½•æ‰€æœ‰æ¥å…¥äº†å¾®ä¿¡ç™»å½•ä½“ç³»çš„ App(RP)")]),t._v(" , è¿™å°±æ˜¯å¸¸è¯´çš„"),s("strong",[t._v("è”åˆç™»å½•")]),t._v(".")]),t._v(" "),s("p",[t._v("ç°åœ¨å°±å€ŸåŠ©æå®¢æ—¶é—´çš„ä¾‹å­, æ¥çœ‹ä¸€ä¸‹ OAuth 2.0 çš„ 4 ä¸ªè§’è‰²å’Œ OIDC çš„ 3 ä¸ªè§’è‰²ä¹‹é—´çš„å¯¹åº”å…³ç³»:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/09954f272a4692cfad2e70d1f93f61ff-20230729094013-xwwgyww.png",alt:"",title:"OAuth 2.0å’ŒOIDCçš„è§’è‰²å¯¹åº”å…³ç³»"}})]),t._v(" "),s("h5",{attrs:{id:"_3-oidcå’Œoauth-2-0çš„å…³é”®åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-oidcå’Œoauth-2-0çš„å…³é”®åŒºåˆ«"}},[t._v("#")]),t._v(" 3.OIDCå’ŒOAuth 2.0çš„å…³é”®åŒºåˆ«")]),t._v(" "),s("p",[t._v("çœ‹åˆ°è¿™å¼ è§’è‰²å¯¹åº”å…³ç³»å›¾, æ˜¯ä¸æ˜¯æœ‰ç‚¹æç„¶å¤§æ‚Ÿçš„æ„Ÿè§‰: "),s("strong",[t._v("è¦å®ç°ä¸€ä¸ª OIDC åè®®, ä¸å°±æ˜¯ç›´æ¥å®ç°ä¸€ä¸ª OAuth 2.0 åè®®å—")]),t._v(". æ²¡é”™, "),s("strong",[t._v("OIDC å°±æ˜¯åŸºäº OAuth 2.0 æ¥å®ç°çš„ä¸€ä¸ªèº«ä»½è®¤è¯åè®®æ¡†æ¶")]),t._v(".")]),t._v(" "),s("p",[t._v("å†ç”»ä¸€å¼  OIDC çš„é€šä¿¡æµç¨‹å›¾, å°±æ›´æ¸…æ¥š OIDC å’Œ OAuth 2.0 çš„å…³ç³»äº†:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/c4d079b624afbdce7ffdecb2e40a9a2a-20230729094013-vjx4vst.png",alt:"",title:"åŸºäºæˆæƒç æµç¨‹çš„OIDCé€šä¿¡æµç¨‹"}})]),t._v(" "),s("p",[s("mark",[t._v("å¯ä»¥å‘ç°, ä¸€ä¸ªåŸºäºæˆæƒç æµç¨‹çš„ OIDC åè®®æµç¨‹, è·Ÿ OAuth 2.0 ä¸­çš„æˆæƒç è®¸å¯çš„æµç¨‹å‡ ä¹å®Œå…¨ä¸€è‡´, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å¤šè¿”å›äº†ä¸€ä¸ª ")]),t._v("â€‹"),s("mark",[s("strong",[t._v("ID_TOKEN")])]),t._v("â€‹"),s("mark",[t._v(", ç§°ä¹‹ä¸º ")]),t._v("â€‹"),s("mark",[s("strong",[t._v("ID ä»¤ç‰Œ")])]),t._v("â€‹"),s("mark",[t._v(". è¿™ä¸ªä»¤ç‰Œæ˜¯èº«ä»½è®¤è¯çš„å…³é”®")]),t._v(".")]),t._v(" "),s("p",[t._v("æ‰€ä»¥æ¥ä¸‹æ¥å°±ç€é‡è®²ä¸€ä¸‹è¿™ä¸ªä»¤ç‰Œ, è€Œä¸å†ç»†è®² OIDC çš„æ•´ä¸ªæµç¨‹.")]),t._v(" "),s("h6",{attrs:{id:"_1-oidcä¸­çš„idä»¤ç‰Œç”Ÿæˆå’Œè§£ææ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-oidcä¸­çš„idä»¤ç‰Œç”Ÿæˆå’Œè§£ææ–¹æ³•"}},[t._v("#")]),t._v(" (1)OIDCä¸­çš„IDä»¤ç‰Œç”Ÿæˆå’Œè§£ææ–¹æ³•")]),t._v(" "),s("p",[t._v("å‰é¢ OIDC é€šä¿¡æµç¨‹çš„ç¬¬ 6 æ­¥, å¯ä»¥çœ‹åˆ° "),s("strong",[t._v("ID ä»¤ç‰Œ(ID_TOKEN)å’Œè®¿é—®ä»¤ç‰Œ(ACCESS_TOKEN)æ˜¯ä¸€èµ·è¿”å›")]),t._v("çš„. å…³äºä¸ºä»€ä¹ˆè¦åŒæ—¶è¿”å›ä¸¤ä¸ªä»¤ç‰Œ, åé¢å†è¯¦ç»†åˆ†æ. å…ˆæŠŠç„¦ç‚¹æ”¾åœ¨ ID ä»¤ç‰Œä¸Š.")]),t._v(" "),s("p",[s("mark",[t._v("**æˆ‘ä»¬çŸ¥é“, è®¿é—®ä»¤ç‰Œä¸éœ€è¦è¢«ç¬¬ä¸‰æ–¹è½¯ä»¶è§£æ, å› ä¸ºå®ƒå¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥è¯´æ˜¯ä¸é€æ˜çš„. ä½† ID ä»¤ç‰Œéœ€è¦èƒ½å¤Ÿè¢«ç¬¬ä¸‰æ–¹è½¯ä»¶è§£æå‡ºæ¥, å› ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶éœ€è¦è·å– ID ä»¤ç‰Œé‡Œé¢çš„å†…å®¹, æ¥å¤„ç†ç”¨æˆ·çš„ç™»å½•æ€é€»è¾‘. **")])]),t._v(" "),s("p",[t._v("é‚£ "),s("strong",[t._v("ID ä»¤ç‰Œçš„å†…å®¹æ˜¯ä»€ä¹ˆå‘¢")]),t._v("?")]),t._v(" "),s("p",[t._v("é¦–å…ˆ, "),s("strong",[t._v("ID ä»¤ç‰Œæ˜¯ä¸€ä¸ª JWT æ ¼å¼çš„ä»¤ç‰Œ")]),t._v(". è¿™é‡Œéœ€è¦å¼ºè°ƒçš„æ˜¯, è™½ç„¶ JWT ä»¤ç‰Œæ˜¯ä¸€ç§è‡ªåŒ…å«ä¿¡æ¯ä½“çš„ä»¤ç‰Œ, ä¸ºå°†å…¶ä½œä¸º ID ä»¤ç‰Œå¸¦æ¥äº†æ–¹ä¾¿æ€§, ä½†æ˜¯å› ä¸º ID ä»¤ç‰Œéœ€è¦èƒ½å¤Ÿæ ‡è¯†å‡ºç”¨æˆ·, å¤±æ•ˆæ—¶é—´ç­‰å±æ€§æ¥è¾¾åˆ°èº«ä»½è®¤è¯çš„ç›®çš„, æ‰€ä»¥è¦å°†å…¶ä½œä¸º OIDC çš„ ID ä»¤ç‰Œæ—¶, ä¸‹é¢è¿™ 5 ä¸ª "),s("strong",[t._v("JWT å£°æ˜å‚æ•°")]),t._v("ä¹Ÿæ˜¯å¿…é¡»è¦æœ‰çš„.")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("iss")]),t._v(": ä»¤ç‰Œçš„é¢å‘è€…, å…¶å€¼å°±æ˜¯èº«ä»½è®¤è¯æœåŠ¡(OP)çš„ URL.")]),t._v(" "),s("li",[s("strong",[t._v("sub")]),t._v(": ä»¤ç‰Œçš„ä¸»é¢˜, å…¶å€¼æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä»£è¡¨æœ€ç»ˆç”¨æˆ·(EU)çš„å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦.")]),t._v(" "),s("li",[s("strong",[t._v("aud")]),t._v(": ä»¤ç‰Œçš„ç›®æ ‡å—ä¼—, å…¶å€¼æ˜¯ä¸‰æ–¹è½¯ä»¶(RP)çš„ app_id.")]),t._v(" "),s("li",[s("strong",[t._v("exp")]),t._v(": ä»¤ç‰Œçš„åˆ°æœŸæ—¶é—´æˆ³, æ‰€æœ‰çš„ ID ä»¤ç‰Œéƒ½ä¼šæœ‰ä¸€ä¸ªè¿‡æœŸæ—¶é—´.")]),t._v(" "),s("li",[s("strong",[t._v("iat")]),t._v(": é¢å‘ä»¤ç‰Œçš„æ—¶é—´æˆ³.")])]),t._v(" "),s("p",[t._v("ç”Ÿæˆ ID ä»¤ç‰Œè¿™éƒ¨åˆ†çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// GENATE ID TOKEN")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" id_token "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("genrateIdToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" genrateIdToken "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sharedTokenSecret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hellooauthhellooauthhellooauthhellooauth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç§˜é’¥")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Key")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecretKeySpec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sharedTokenSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HS256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJcaName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡‡ç”¨HS256ç®—æ³•")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// IDä»¤ç‰Œçš„å¤´éƒ¨ä¿¡æ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" headerMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    headerMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typ"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JWT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    headerMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HS256"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// IDä»¤ç‰Œçš„ä¸»ä½“ä¿¡æ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" payloadMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8081/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sub"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aud"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1584105790703L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1584105948372L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeaderParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headerMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setClaims")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payloadMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("signWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HS256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compact")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("p",[t._v("æ¥ä¸‹æ¥, å†çœ‹çœ‹"),s("strong",[t._v("å¤„ç†ç”¨æˆ·ç™»å½•çŠ¶æ€çš„é€»è¾‘æ˜¯å¦‚ä½•å¤„ç†çš„")]),t._v(".")]),t._v(" "),s("p",[t._v("å¯ä»¥å…ˆè¯•æƒ³ä¸€ä¸‹, å¦‚æœä¸è·Ÿ OIDC æ‰¯ä¸Šå…³ç³», ä¹Ÿå°±æ˜¯å•çº¯æ„å»ºä¸€ä¸ªç”¨æˆ·èº«ä»½è®¤è¯ç™»å½•ç³»ç»Ÿ, æ˜¯ä¸æ˜¯å¾—"),s("strong",[t._v("ä¿å­˜ç”¨æˆ·ç™»å½•çš„ä¼šè¯å…³ç³»")]),t._v(". ä¸€èˆ¬çš„åšæ³•æ˜¯, è¦ä¹ˆæ”¾åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Š, è¦ä¹ˆå†™è¿›æµè§ˆå™¨çš„ cookie ä¸­, åŒæ—¶ä¸ºä¼šè¯ ID è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´.")]),t._v(" "),s("p",[s("strong",[t._v('ä½†å½“æœ‰äº†ä¸€ä¸ª JWT è¿™æ ·çš„ç»“æ„åŒ–ä¿¡æ¯ä½“çš„æ—¶å€™, å°¤å…¶æ˜¯åŒ…å«äº†ä»¤ç‰Œçš„ä¸»é¢˜å’Œè¿‡æœŸæ—¶é—´å, ä¸å°±æ˜¯æœ‰äº†ä¸€ä¸ª "å¤©ç„¶" çš„ä¼šè¯å…³ç³»ä¿¡æ¯ä¹ˆ.')])]),t._v(" "),s("p",[t._v("æ‰€ä»¥, ä¾é  JWT æ ¼å¼çš„ ID ä»¤ç‰Œ, å°±è¶³ä»¥è®©è§£å†³èº«ä»½è®¤è¯åçš„"),s("strong",[t._v("ç™»å½•æ€é—®é¢˜")]),t._v(". è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ OIDC åè®®é‡Œé¢è¦è¿”å› ID ä»¤ç‰Œçš„åŸå› , "),s("mark",[s("strong",[t._v("ID ä»¤ç‰Œæ‰æ˜¯ OIDC ä½œä¸ºèº«ä»½è®¤è¯åè®®çš„å…³é”®æ‰€åœ¨")])]),t._v(".")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆæœ‰äº† ID ä»¤ç‰Œå, ç¬¬ä¸‰æ–¹è½¯ä»¶åº”è¯¥å¦‚ä½•è§£æå®ƒå‘¢? æ¥ä¸‹æ¥çœ‹ä¸€æ®µè§£æ ID ä»¤ç‰Œçš„å…·ä½“ä»£ç , å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" parseJwt "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" jwt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sharedTokenSecret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hellooauthhellooauthhellooauthhellooauth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯†é’¥")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Key")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecretKeySpec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sharedTokenSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HS256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJcaName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HS256ç®—æ³•")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jws")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" claimsJws "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parserBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSigningKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseClaimsJws")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jwt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æIDä»¤ç‰Œä¸»ä½“ä¿¡æ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),t._v(" body "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" claimsJws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sub"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSubject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aud"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAudience")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getIssuer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExpiration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getIssuedAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯, ç¬¬ä¸‰æ–¹è½¯ä»¶è§£æå¹¶éªŒè¯ ID ä»¤ç‰Œçš„åˆæ³•æ€§ä¹‹å, ä¸éœ€è¦å°†æ•´ä¸ª JWT ä¿¡æ¯ä¿å­˜ä¸‹æ¥, åªéœ€ä¿ç•™ JWT ä¸­çš„ "),s("strong",[t._v("PAYLOAD")]),t._v("(æ•°æ®ä½“)éƒ¨åˆ†å°±å¯ä»¥äº†. å› ä¸ºæ­£æ˜¯è¿™éƒ¨åˆ†å†…å®¹, åŒ…å«äº†èº«ä»½è®¤è¯æ‰€éœ€è¦çš„ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç­‰ä¿¡æ¯.")]),t._v(" "),s("p",[t._v("å¦å¤–, åœ¨éªŒè¯ JWT åˆæ³•æ€§çš„æ—¶å€™, å› ä¸º ID ä»¤ç‰Œæœ¬èº«å·²ç»è¢«èº«ä»½è®¤è¯æœåŠ¡(OP)çš„å¯†é’¥ç­¾åè¿‡, æ‰€ä»¥å…³é”®çš„ä¸€ç‚¹æ˜¯åˆæ³•æ€§æ ¡éªŒæ—¶éœ€è¦åšç­¾åæ ¡éªŒ.")]),t._v(" "),s("p",[s("strong",[t._v("è¿™æ ·å½“ç¬¬ä¸‰æ–¹è½¯ä»¶(RP)æ‹¿åˆ° ID ä»¤ç‰Œä¹‹å, å°±å·²ç»è·å¾—äº†å¤„ç†èº«ä»½è®¤è¯æ ‡è¯†åŠ¨ä½œçš„ä¿¡æ¯, ä¹Ÿå°±æ˜¯æ‹¿åˆ°äº†é‚£ä¸ªèƒ½å¤Ÿå”¯ä¸€æ ‡è¯†æœ€ç»ˆç”¨æˆ·(EU)çš„ ID å€¼, æ¯”å¦‚ 3521")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_2-ç”¨è®¿é—®ä»¤ç‰Œè·å–idä»¤ç‰Œä¹‹å¤–çš„ä¿¡æ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç”¨è®¿é—®ä»¤ç‰Œè·å–idä»¤ç‰Œä¹‹å¤–çš„ä¿¡æ¯"}},[t._v("#")]),t._v(" (2)ç”¨è®¿é—®ä»¤ç‰Œè·å–IDä»¤ç‰Œä¹‹å¤–çš„ä¿¡æ¯")]),t._v(" "),s("p",[t._v('ä¸ºäº†æå‡ç¬¬ä¸‰æ–¹è½¯ä»¶å¯¹ç”¨æˆ·çš„å‹å¥½æ€§, åœ¨é¡µé¢ä¸Šæ˜¾ç¤º "æ‚¨å¥½, 3521" è‚¯å®šä¸å¦‚æ˜¾ç¤º "æ‚¨å¥½, å°æ˜åŒå­¦" çš„ä½“éªŒå¥½. è¿™é‡Œçš„ "å°æ˜åŒå­¦", å°±æ˜¯ç”¨æˆ·çš„æ˜µç§°.')]),t._v(" "),s("p",[t._v('é‚£å¦‚ä½•æ¥è·å– "å°æ˜åŒå­¦" è¿™ä¸ªæ˜µç§°å‘¢. è¿™ä¹Ÿå¾ˆç®€å•, å°±æ˜¯'),s("mark",[s("strong",[t._v("é€šè¿‡è¿”å›çš„è®¿é—®ä»¤ç‰Œ access_token æ¥é‡æ–°å‘é€ä¸€æ¬¡è¯·æ±‚")])]),t._v(". å½“ç„¶, è¿™ä¸ªæµç¨‹å‰é¢å·²ç»è®²è¿‡, å®ƒå±äº OAuth 2.0 æ ‡å‡†æµç¨‹ä¸­çš„è¯·æ±‚å—ä¿æŠ¤èµ„æºæœåŠ¡çš„æµç¨‹.")]),t._v(" "),s("p",[s("strong",[t._v("è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ OIDC åè®®é‡Œé¢, æ—¢è¦è¿”å› ID ä»¤ç‰Œåˆè¦è¿”å›è®¿é—®ä»¤ç‰Œçš„åŸå› äº†")]),t._v(". "),s("mark",[s("strong",[t._v("åœ¨ä¿è¯ç”¨æˆ·èº«ä»½è®¤è¯åŠŸèƒ½çš„å‰æä¸‹, å¦‚æœæƒ³è·å–æ›´å¤šçš„ç”¨æˆ·ä¿¡æ¯, å°±å†é€šè¿‡è®¿é—®ä»¤ç‰Œè·å–. åœ¨ OIDC æ¡†æ¶é‡Œ, è¿™éƒ¨åˆ†å†…å®¹å«åšåˆ›å»º UserInfo ç«¯ç‚¹å’Œè·å– UserInfo ä¿¡æ¯")])]),t._v(".")]),t._v(" "),s("p",[t._v("è¿™æ ·çœ‹ä¸‹æ¥, ç»†ç²’åº¦åœ°å»çœ‹ OIDC çš„æµç¨‹å°±æ˜¯: "),s("mark",[s("strong",[t._v("ç”Ÿæˆ ID ä»¤ç‰Œ -> åˆ›å»º UserInfo ç«¯ç‚¹ -> è§£æ ID ä»¤ç‰Œ -> è®°å½•ç™»å½•çŠ¶æ€ -> è·å– UserInfo")])]),t._v(".")]),t._v(" "),s("p",[t._v("åˆ©ç”¨ OAuth 2.0 å®ç°ä¸€ä¸ª OIDC æ¡†æ¶çš„å·¥ä½œå°±åšå®Œäº†.")]),t._v(" "),s("p",[t._v("æ€»ç»“ä¸€ä¸‹, ç”¨ OAuth 2.0 å®ç° OIDC çš„æœ€å…³é”®çš„æ–¹æ³•æ˜¯: "),s("mark",[s("strong",[t._v("åœ¨åŸæœ‰ OAuth 2.0 æµç¨‹çš„åŸºç¡€ä¸Šå¢åŠ  ID ä»¤ç‰Œå’Œ UserInfo ç«¯ç‚¹, ä»¥ä¿éšœ OIDC ä¸­çš„ç¬¬ä¸‰æ–¹è½¯ä»¶èƒ½å¤Ÿè®°å½•ç”¨æˆ·çŠ¶æ€å’Œè·å–ç”¨æˆ·è¯¦æƒ…çš„åŠŸèƒ½")])]),t._v(". å› ä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥é€šè¿‡è§£æ ID ä»¤ç‰Œçš„å…³é”®ç”¨æˆ·æ ‡è¯†ä¿¡æ¯æ¥è®°å½•ç”¨æˆ·çŠ¶æ€, åŒæ—¶å¯ä»¥é€šè¿‡ Userinfo ç«¯ç‚¹æ¥è·å–æ›´è¯¦ç»†çš„ç”¨æˆ·ä¿¡æ¯. æœ‰äº†ç”¨æˆ·æ€å’Œç”¨æˆ·ä¿¡æ¯, ä¹Ÿå°±ç†æ‰€å½“ç„¶åœ°å®ç°äº†ä¸€ä¸ªèº«ä»½è®¤è¯.")]),t._v(" "),s("h5",{attrs:{id:"_4-å•ç‚¹ç™»å½•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å•ç‚¹ç™»å½•"}},[t._v("#")]),t._v(" 4.å•ç‚¹ç™»å½•")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥, å°±å…·ä½“çœ‹çœ‹å¦‚ä½•å®ç°"),s("strong",[t._v("å•ç‚¹ç™»å½•(Single Sign On, SSO)")]),t._v(" . ä¸€ä¸ªç”¨æˆ· G è¦ç™»å½•ç¬¬ä¸‰æ–¹è½¯ä»¶ A, A æœ‰ä¸‰ä¸ªå­åº”ç”¨, åŸŸååˆ†åˆ«æ˜¯ a1.com, a2.com, a3.com. å¦‚æœ A æƒ³è¦ä¸ºç”¨æˆ·æä¾›æ›´æµç•…çš„ç™»å½•ä½“éªŒ, è®©ç”¨æˆ· G ç™»å½•äº† a1.com ä¹‹åä¹Ÿèƒ½é¡ºåˆ©ç™»å½•å…¶ä»–ä¸¤ä¸ªåŸŸå, å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªèº«ä»½è®¤è¯æœåŠ¡, æ¥æ”¯æŒ a1.com, a2.com å’Œ a3.com çš„ç™»å½•. è¿™å°±æ˜¯å•ç‚¹ç™»å½•, "),s("strong",[t._v("ä¸€æ¬¡ç™»å½•, ç•…é€šæ‰€æœ‰")]),t._v(".")]),t._v(" "),s("p",[t._v('é‚£ä¹ˆ, å¯ä»¥ä½¿ç”¨ OIDC åè®®æ ‡å‡†æ¥å®ç°è¿™æ ·çš„å•ç‚¹ç™»å½•å—? åªèƒ½è¯´ "å¤ªå¯ä»¥äº†". å¦‚ä¸‹å›¾æ‰€ç¤º, åªéœ€è¦'),s("strong",[t._v("è®©ç¬¬ä¸‰æ–¹è½¯ä»¶(RP)é‡å¤ OIDC çš„é€šä¿¡æµç¨‹")]),t._v("å°±å¯ä»¥äº†.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/077f8c0992dc9943deaf4741830b20f8-20230729094013-am95gfz.png",alt:"",title:"å•ç‚¹ç™»å½•çš„é€šä¿¡æµç¨‹"}})]),t._v(" "),s("p",[t._v('æ‰€ä»¥å•ç‚¹ç™»å½•å°±æ˜¯ OIDC çš„ä¸€ç§å…·ä½“åº”ç”¨æ–¹å¼, åªè¦æŒæ¡äº† OIDC æ¡†æ¶çš„åŸç†, å®ç°å•ç‚¹ç™»å½•å°±ä¸åœ¨è¯ä¸‹äº†. å…³äºå•ç‚¹ç™»å½•çš„å…·ä½“å®ç°, åœ¨ GitHub ä¸Šæœç´¢ "é€šè¿‡ OIDC æ¥å®ç°å•ç‚¹ç™»å½•", å°±å¯ä»¥çœ‹åˆ°å¾ˆå¤šç›¸å…³çš„å¼€æºå†…å®¹.')]),t._v(" "),s("h5",{attrs:{id:"_5-æ€»ç»“-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ€»ç»“-2"}},[t._v("#")]),t._v(" 5.æ€»ç»“")]),t._v(" "),s("p",[t._v("åœ¨ä¸€äº›è¾ƒå¤§çš„, å·²ç»å…·å¤‡èº«ä»½è®¤è¯æœåŠ¡çš„å¹³å°ä¸Š, å¯èƒ½å¹¶æ²¡æœ‰å‘ç° OIDC çš„æè¿°, ä½†å¤§å¯ä¸å¿…çº ç»“. æœ‰æ—¶å€™, æˆ‘ä»¬å¯èƒ½ä¼šå›°æƒ‘äº, "),s("strong",[t._v("åˆ°åº•æ˜¯å…ˆæœ‰ OIDC è¿™æ ·çš„æ ‡å‡†, è¿˜æ˜¯å…ˆæœ‰ç±»ä¼¼å¾®ä¿¡ç™»å½•è¿™æ ·çš„èº«ä»½è®¤è¯å®ç°æ–¹å¼")]),t._v("?")]),t._v(" "),s("p",[t._v('å…¶å®, è¦ç†è§£è¿™å±‚å…ˆåå…³ç³», å¯ä»¥æ‹¿è®¾è®¡æ¨¡å¼æ¥ä¸¾ä¾‹. å½“æƒ³è®¾è®¡ä¸€ä¸ªè¾ƒä¸ºæ¾è€¦åˆ, å¯æ‰©å±•çš„ç³»ç»Ÿæ—¶, å³ä½¿æ²¡æœ‰æ¥è§¦è¿‡è®¾è®¡æ¨¡å¼, é€šè¿‡ä¸æ–­åœ°å°è¯•ä¿®æ”¹å, ä¹Ÿä¼šå¾—å‡ºä¸€ä¸ªé€æ¸ç¬¦åˆäº†è®¾è®¡æ¨¡å¼é‚£æ ·"å‘³é“"çš„ä»£ç æ¶æ„æ€è·¯. ç†è§£ OIDC è§£å†³èº«ä»½è®¤è¯é—®é¢˜çš„æ€è·¯, ä¹Ÿæ˜¯åŒæ ·çš„é“ç†.')]),t._v(" "),s("p",[t._v("æœ¬èŠ‚åœ¨ OAuth2.0 çš„åŸºç¡€ä¸Šå®ç°äº†ä¸€ä¸ª OIDC çš„æµç¨‹, éœ€è¦è®°ä½ä»¥ä¸‹ä¸¤ç‚¹.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("OAuth 2.0 ä¸æ˜¯ä¸€ä¸ªèº«ä»½è®¤è¯åè®®")]),t._v(', è¯·ä¸€å®šè¦è®°ä½è¿™ç‚¹. èº«ä»½è®¤è¯å¼ºè°ƒçš„æ˜¯"è°çš„é—®é¢˜", è€Œ OAuth2.0 å¼ºè°ƒçš„æ˜¯æˆæƒ, æ˜¯"å¯ä¸å¯ä»¥"çš„é—®é¢˜. '),s("mark",[s("strong",[t._v("ä½†æ˜¯å¯ä»¥åœ¨ OAuth2.0 çš„åŸºç¡€ä¸Š, é€šè¿‡å¢åŠ  ID ä»¤ç‰Œæ¥è·å–ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†, ä»è€Œå°±èƒ½å¤Ÿå»å®ç°ä¸€ä¸ªèº«ä»½è®¤è¯åè®®")])]),t._v(".")]),t._v(" "),s("li",[t._v("æœ‰äº› App ä¸æƒ³éå¸¸éº»çƒ¦åœ°è‡ªå·±è®¾è®¡ä¸€å¥—æ³¨å†Œå’Œç™»å½•è®¤è¯æµç¨‹, å°±ä¼šå¯»æ±‚ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆ, ç„¶ååŠ¿å¿…ä¼šå‡ºç°ä¸€ä¸ªå¹³å°æ¥æ”¶æ½æ‰€æœ‰ç±»ä¼¼çš„è®¤è¯ç™»å½•åœºæ™¯. å†åè¿‡æ¥ç†è§£ä¹Ÿæ˜¯æˆç«‹çš„. å¦‚æœæœ‰ä¸ªæ‹¥æœ‰æµ·é‡ç”¨æˆ·çš„, å¤§æµé‡çš„è®¿é—®å¹³å°, æ¥"),s("strong",[t._v("æä¾›ä¸€å¥—ç»Ÿä¸€çš„ç™»å½•è®¤è¯æœåŠ¡")]),t._v(", è®©å…¶ä»–ç¬¬ä¸‰æ–¹åº”ç”¨æ¥å¯¹æ¥, ä¸å°±å¯ä»¥è§£å†³ä¸€ä¸ªç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªè´¦å·æ¥ç™»å½•ä¼—å¤šç¬¬ä¸‰æ–¹ App çš„é—®é¢˜äº†å—? è€Œ "),s("strong",[t._v("OIDC, å°±æ˜¯è¿™æ ·çš„ç™»å½•è®¤è¯åœºæ™¯çš„å¼€æ”¾è§£å†³æ–¹æ¡ˆ")]),t._v(".")])]),t._v(" "),s("h4",{attrs:{id:"oauth-2-0çš„å·¥ä½œæµç¨‹ä¸å®‰å…¨é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oauth-2-0çš„å·¥ä½œæµç¨‹ä¸å®‰å…¨é—®é¢˜"}},[t._v("#")]),t._v(" OAuth 2.0çš„å·¥ä½œæµç¨‹ä¸å®‰å…¨é—®é¢˜")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚ä¼šæŠŠå·²ç»è®²è¿‡çš„å†…å®¹å†ä¸²ä¸€é, å°±åƒå­¦ç”Ÿæ—¶ä»£æ¯ä¸ªå­¦æœŸå³å°†ç»“æŸæ—¶çš„ä¸€æ¬¡ä¸²è®², æ¥å›é¡¾ä¸‹ OAuth 2.0 çš„æ•´ä¸ª"),s("strong",[t._v("çŸ¥è¯†ä½“ç³»")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_1-oauth-2-0å·¥ä½œæµç¨‹ä¸²è®²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-oauth-2-0å·¥ä½œæµç¨‹ä¸²è®²"}},[t._v("#")]),t._v(" 1.OAuth 2.0å·¥ä½œæµç¨‹ä¸²è®²")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/2cd21e40ce186b58dd658a0e849a2e6e-20230729094013-n97yaeh.png",alt:""}})]),t._v(" "),s("p",[t._v("å‰é¢ä¸€ç›´åœ¨è®² OAuth 2.0 æ˜¯ä¸€ç§"),s("strong",[t._v("æˆæƒåè®®")]),t._v(", è¿™ç§åè®®å¯ä»¥è®©ç¬¬ä¸‰æ–¹è½¯ä»¶"),s("strong",[t._v("ä»£è¡¨")]),t._v("ç”¨æˆ·å»æ‰§è¡Œè¢«å…è®¸çš„æ“ä½œ. é‚£ä¹ˆ, ç¬¬ä¸‰æ–¹è½¯ä»¶å°±éœ€è¦å‘ç”¨æˆ·ç´¢å–"),s("strong",[t._v("æˆæƒ")]),t._v("æ¥è·å¾—é‚£ä¸ªä»¤ç‰Œ.")]),t._v(" "),s("p",[t._v("å›æƒ³ä¸‹å‰é¢æ‹œè®¿ç™¾åº¦ç‹æ€»çš„ä¾‹å­. åªæœ‰æ‹¿åˆ°å‰å°å°å§å§ç»™ä½ çš„é—¨ç¦å¡, ä½ æ‰èƒ½å¤Ÿè¿›å…¥ç™¾åº¦å¤§æ¥¼. è¿™ä¸ªè¿‡ç¨‹å°±ç›¸å½“äºå‰å°å°å§å§ç»™ä½ åšäº†ä¸€æ¬¡æˆæƒ, è€Œè¿™ä¸ªæˆæƒçš„å‡­è¯å°±æ˜¯é—¨ç¦å¡. å¯¹åº”åˆ°æˆ‘ä»¬çš„ç³»ç»Ÿä¸­, é—¨ç¦å¡ä¾¿ç›¸å½“äºè®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("p",[t._v('é€šè¿‡"ä»£è¡¨", "æˆæƒ"è¿™æ ·çš„å…³é”®è¯, å¯ä»¥è®¤è¯†åˆ°, OAuth 2.0 æ˜¯ä¸€ä¸ª'),s("strong",[t._v("æˆæƒåè®®, ä¹Ÿæ˜¯ä¸€ä¸ªå®‰å…¨åè®®")]),t._v(". é‚£å¦‚æœè¯´å®ƒä¹Ÿæ˜¯ä¸€ç§å§”æ‰˜åè®®, ä¹Ÿä¸è¦åƒæƒŠ.")]),t._v(" "),s("p",[t._v("è¯•æƒ³ä¸€ä¸‹, ç”¨æˆ·åœ¨å¾®ä¿¡å¹³å°ä¸Šæœ‰ä¿®æ”¹æ˜µç§°, ä¿®æ”¹å¤´åƒ, ä¿®æ”¹ä¸ªäººå…´è¶£çš„æƒé™, å½“ç¬¬ä¸‰æ–¹è½¯ä»¶è¯·æ±‚è®©è‡ªå·±ä»£è¡¨ç”¨æˆ·æ¥æ“ä½œè¿™äº›æƒé™çš„æ—¶å€™, å°±æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶è¯·æ±‚ç”¨æˆ·æŠŠè¿™äº›æƒé™"),s("strong",[t._v("å§”æ‰˜")]),t._v("ç»™è‡ªå·±, ç”¨æˆ·åœ¨æ‰¹å‡†äº†å§”æ‰˜è¯·æ±‚ä¹‹å, æ‰å¯ä»¥ä»£è¡¨ç”¨æˆ·å»æ‰§è¡Œè¿™äº›æ“ä½œ.")]),t._v(" "),s("p",[t._v("ç»†æƒ³ä¸€ä¸‹, "),s("mark",[s("strong",[t._v('å§”æ‰˜æ‰æ˜¯ OAuth 2.0 æˆæƒæ¦‚å¿µçš„æ ¹åŸº, å› ä¸ºæ²¡æœ‰"å§”æ‰˜"ä¹‹æ„å°±ä¸ä¼šæœ‰"ä»£è¡¨"è¡Œä¸ºçš„å‘ç”Ÿ')])]),t._v(".")]),t._v(" "),s("p",[t._v("åœ¨æ•´ä¸ªè¯¾ç¨‹è®²è¿°æˆæƒçš„è¿‡ç¨‹ä¸­, é¢‘ç¹ä¸¾ä¾‹å’Œå¼ºè°ƒçš„å°±æ˜¯"),s("strong",[t._v("æˆæƒç è®¸å¯æµç¨‹")]),t._v('. åœ¨å­¦ä¹ æˆæƒç æµç¨‹çš„æ—¶å€™, æœ€å›°æƒ‘çš„ä¸€ç‚¹ææ€•è«è¿‡äº "ä¸ºä»€ä¹ˆè¦å¤šæ­¤ä¸€ä¸¾, éå¾—é€šè¿‡ä¸€ä¸ª'),s("strong",[t._v("æˆæƒç  code")]),t._v(' æ¥æ¢å–è®¿é—®ä»¤ç‰Œ access_token". å†æ¥åˆ†æä¸‹, ç¬¬ä¸‰æ–¹è½¯ä»¶è¦è·å–è®¿é—®ä»¤ç‰Œ, åªèƒ½é€šè¿‡ä¸¤ä¸ªæ¸ é“:')]),t._v(" "),s("ol",[s("li",[t._v("ä¸€ä¸ªæ¸ é“æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å‰ç«¯é¡µé¢. ä½†æ˜¯å¦‚æœç›´æ¥è¿”å›åˆ°å‰ç«¯é¡µé¢ä¸Š, è®¿é—®ä»¤ç‰Œæ˜¯å¾ˆå®¹æ˜“è¢«é€šè¿‡æµè§ˆå™¨æˆªè·çš„, æ‰€ä»¥æ˜¾ç„¶ä¸å¯å–.")]),t._v(" "),s("li",[t._v("å¦å¤–ä¸€ä¸ªæ¸ é“æ˜¯é€šè¿‡åç«¯ä¼ è¾“. ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åç«¯å’ŒæˆæƒæœåŠ¡çš„åç«¯ä¹‹é—´é€šä¿¡, è¿™æ ·å°±å¯ä»¥é¿å…ä»¤ç‰Œè¢«ç›´æ¥æš´éœ²çš„é—®é¢˜.")])]),t._v(" "),s("p",[t._v('å†å¾€æ·±äº†æƒ³, ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åç«¯æ€»ä¸èƒ½å‘æˆæƒæœåŠ¡çš„åç«¯ "ç¡¬è¦" å§, æ€»è¦å‘Šè¯‰æˆæƒæœåŠ¡æ˜¯è¦å“ªä¸ªç”¨æˆ·çš„ access_token å§, æ‰€ä»¥è¿˜éœ€è¦ç”¨æˆ·çš„å‚ä¸.')]),t._v(" "),s("p",[t._v("ç”¨æˆ·ä¸€æ—¦å‚ä¸è¿›æ¥, è®¿é—®çš„ç¬¬ä¸€ä¸ªé¡µé¢æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶, ç”¨æˆ·è¦æˆæƒ, ç¬¬ä¸‰æ–¹è½¯ä»¶å°±éœ€è¦æŠŠç”¨æˆ·å¼•å¯¼åˆ°æˆæƒæœåŠ¡é¡µé¢. ä½†è¿™ä¸ªæ—¶å€™, "),s("strong",[t._v('ç”¨æˆ·å°±è·Ÿç¬¬ä¸‰æ–¹è½¯ä»¶ä¹‹é—´æ²¡æœ‰ä»»ä½•"é€šä¿¡è¿æ¥"äº†')]),t._v(". å¦‚æœæˆæƒæœåŠ¡é€šè¿‡åç«¯é€šä¿¡ç›´æ¥å°†ä»¤ç‰Œç»™äº†ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åç«¯, é‚£ç¬¬ä¸‰æ–¹è½¯ä»¶è¯¥å¦‚ä½•é€šçŸ¥ç”¨æˆ·å‘¢, ææ€•å°±ä¸å¤ªå¥½å®ç°äº†.")]),t._v(" "),s("p",[t._v("**è¿™ç§æƒ…å†µä¸‹å°±å¾ˆå·§å¦™åœ°å¼•å…¥äº†æˆæƒç  code: å…ˆæŠŠ code é€šè¿‡é‡å®šå‘è¿”å›åˆ°ç¬¬ä¸‰æ–¹è½¯ä»¶çš„é¡µé¢; ç¬¬ä¸‰æ–¹è½¯ä»¶é€šè¿‡æµè§ˆå™¨è·å–åˆ° code å, å†é€šè¿‡åç«¯é€šä¿¡æ¢å– access_token; å¾…æ‹¿åˆ° token ä¹‹å, ç”±äºæ­¤æ—¶ç”¨æˆ·å·²ç»åœ¨ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æœåŠ¡ä¸Š, æ‰€ä»¥å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šçŸ¥åˆ°ç”¨æˆ·. **")]),t._v(" "),s("p",[t._v("ä»¥ä¸Šå°±æ˜¯æˆæƒç è®¸å¯çš„æ•´ä½“å·¥ä½œæµç¨‹äº†. è¿™æ˜¯ OAuth 2.0 æˆæƒä½“ç³»ä¸­æœ€å®Œå¤‡çš„æµç¨‹, å…¶ä»–çš„æˆæƒè®¸å¯ç±»å‹, æ¯”å¦‚èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯, å®¢æˆ·ç«¯å‡­æ®è®¸å¯, éšå¼è®¸å¯, éƒ½æ˜¯ä»¥æ­¤ä¸ºåŸºç¡€. å› æ­¤"),s("strong",[t._v("åªè¦èƒ½ç†è§£æˆæƒç è®¸å¯çš„æµç¨‹, ä¹Ÿå°±æŒæ¡äº†æ•´ä¸ª OAuth 2.0 ä¸­æ‰€æœ‰è®¸å¯ç±»å‹çš„è¿è½¬æœºåˆ¶")]),t._v(", åœ¨å®é™…å·¥ä½œåœºæ™¯ä¸­ç”¨ä¸Š OAuth 2.0 å°†ä¸å†æ˜¯é—®é¢˜.")]),t._v(" "),s("h5",{attrs:{id:"_2-oauth-2-0å®‰å…¨é—®é¢˜ä¸²è®²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-oauth-2-0å®‰å…¨é—®é¢˜ä¸²è®²"}},[t._v("#")]),t._v(" 2.OAuth 2.0å®‰å…¨é—®é¢˜ä¸²è®²")]),t._v(" "),s("p",[t._v("åœ¨å®è·µ OAuth 2.0 çš„è¿‡ç¨‹ä¸­, è¿˜å¿…é¡»æŒ‰ç…§è§„èŒƒå»ºè®®æ¥æ‰§è¡Œ, å¦åˆ™ä¾¿ä¼šå¼•å‘ä¸€ç³»åˆ—çš„å®‰å…¨é—®é¢˜. è¿™ä¹Ÿå¾€å¾€å¯¼è‡´æœ‰äººä¼šå‘å‡ºè¿™æ ·çš„ç–‘é—®, OAuth 2.0 ä¸æ˜¯å®‰å…¨çš„å—? å®ƒä¸æ˜¯ä¸€ç›´åœ¨ä¿æŠ¤ç€äº’è”ç½‘ä¸Šæˆåƒä¸Šä¸‡ä¸ª Web API å—, ä¸ä¹Ÿè¯´å®ƒæ˜¯ä¸€ç§å®‰å…¨åè®®å—?")]),t._v(" "),s("p",[t._v("é¦–å…ˆ OAuth 2.0 æ˜¯å®‰å…¨åè®®æ²¡é—®é¢˜, ä½†"),s("strong",[t._v("å¦‚æœä½¿ç”¨ä¸å½“ä¹Ÿä¼šå¼•èµ·å®‰å…¨ä¸Šçš„é—®é¢˜")]),t._v(". æ¯”å¦‚å‰é¢æåˆ°äº†ä¸€ä¸ªå¾ˆå¹¿æ³›çš„è·¨ç«™è¯·æ±‚ä¼ªé€ é—®é¢˜. ä¹‹æ‰€ä»¥å‡ºç°è¿™æ ·çš„å®‰å…¨é—®é¢˜, å°±æ˜¯å› ä¸ºæ²¡æœ‰éµå¾ª OAuth 2.0 çš„ä½¿ç”¨å»ºè®®, æ¯”å¦‚æ²¡æœ‰ä½¿ç”¨ state è¿™æ ·çš„å‚æ•°æ¥åšè¯·æ±‚çš„æ ¡éªŒ, æˆ–è€…æ˜¯æ²¡æœ‰éµå¾ªæˆæƒç  code å€¼åªèƒ½ä½¿ç”¨ä¸€æ¬¡, å¹¶ä¸”è¿˜è¦æ¸…é™¤ä½¿ç”¨è¿‡çš„ code å€¼è·Ÿ token å€¼ä¹‹é—´çš„ç»‘å®šå…³ç³»çš„å»ºè®®.")]),t._v(" "),s("p",[t._v("åœ¨å®‰å…¨é—®é¢˜ä¸Š, å…¶å®ä¸€ç›´éƒ½æ²¡æœ‰ç‰¹åˆ«è¯´æ˜ä¸€ç‚¹, é‚£å°±æ˜¯"),s("mark",[s("strong",[t._v("åœ¨ä½¿ç”¨ OAuth 2.0 çš„æµç¨‹ä¸­, HTTP é€šä¿¡è¦ä½¿ç”¨ HTTPS åè®®æ¥ä¿æŠ¤æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§")])]),t._v(". è¿™æ˜¯å› ä¸º OAuth 2.0 æ”¯æŒçš„ bearer ä»¤ç‰Œç±»å‹, ä¹Ÿå°±æ˜¯ä»»æ„å­—ç¬¦ä¸²æ ¼å¼çš„ä»¤ç‰Œ, å¹¶æ²¡æœ‰æä¾›ä¸”æ²¡æœ‰è¦æ±‚ä½¿ç”¨ä¿¡æ¯ç­¾åçš„æœºåˆ¶.")]),t._v(" "),s("p",[t._v("ä½ å¯èƒ½ä¼šè¯´, JWT ä»¤ç‰Œæœ‰è¿™æ ·çš„åŠ å¯†æœºåˆ¶å•Š. ä½†å…¶å®è¿™ä¹Ÿæ­£è¯´æ˜äº† OAuth 2.0 æ˜¯ä¸€ä¸ªæ²¡æœ‰çº¦æŸæ™®é€šä»¤ç‰Œçš„è§„åˆ™, æ‰€ä»¥æ‰æœ‰äº† JWT è¿™æ ·å¯¹ OAuth 2.0 çš„é¢å¤–è¡¥å……. å®é™…ä¸Š, "),s("strong",[t._v("JWT è·Ÿ OAuth 2.0 å¹¶æ²¡æœ‰ç›´æ¥å…³ç³», å®ƒåªæ˜¯ä¸€ç§ç»“æ„åŒ–çš„ä¿¡æ¯å­˜å‚¨, å¯ä»¥è¢«ç”¨åœ¨é™¤äº† OAuth 2.0 ä»¥å¤–çš„ä»»ä½•åœ°æ–¹")]),t._v(". æ¯”å¦‚é‡ç½®å¯†ç çš„æ—¶å€™, ä¼šç»™ä½ çš„é‚®ç®±å‘é€ä¸€ä¸ªé“¾æ¥, è¿™ä¸ªé“¾æ¥å°±éœ€è¦èƒ½å¤Ÿæ ‡è¯†å‡ºç”¨æˆ·æ˜¯è°, ä¸èƒ½ç¯¡æ”¹, æœ‰æ•ˆæœŸ 5 åˆ†é’Ÿ, è¿™äº›ç‰¹å¾éƒ½è·Ÿ JWT ç›¸ç¬¦åˆ. ä¹Ÿå°±æ˜¯è¯´, JWT å¹¶ä¸æ˜¯ OAuth 2.0 åè®®è§„èŒƒæ‰€æ¶µç›–çš„å†…å®¹.")]),t._v(" "),s("p",[t._v("OAuth 2.0 ä¼¼ä¹æ²¡æœ‰è‡ªå·±çš„è§„åˆ™çº¦æŸæœºåˆ¶, æˆ–è€…è¯´åªæœ‰æ¯”è¾ƒå¼±çš„çº¦æŸ, ä½†å…¶å®ä¸æ˜¯ä¸çº¦æŸ, è€Œæ˜¯"),s("strong",[t._v("å®ƒå°±è‡´åŠ›äºåšå¥½æˆæƒæ¡†æ¶è¿™ä¸€ä»¶äº‹å„¿")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("é™¤æ­¤ä¹‹å¤–, OAuth 2.0 éƒ½æ˜¯ç”¨å¼€æ”¾çš„å¿ƒæ€æ¥æä¾›åŸºç¡€çš„æ”¯æŒ")]),t._v(', æ¯”å¦‚ OpenID Connect(OIDC)èº«ä»½è®¤è¯åè®®æ¡†æ¶. è¿™ç§å¼€æ”¾çš„æ–¹å¼, ä½¿å¾—å¯ä»¥ç”¨ "OAuth 2.0 + å¦å¤–ä¸€ä¸ªæŠ€æœ¯" æ¥å˜æˆä¸€ä¸ªæ–°çš„æŠ€æœ¯. è¿™å°±æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„, å¯æ“ä½œçš„ç»„åˆäº†, å¯ä»¥è§£å†³ä¸åŒåœºæ™¯çš„éœ€æ±‚.')]),t._v(" "),s("p",[t._v("ä¹Ÿè®¸æ­£æ˜¯å› ä¸º OAuth 2.0 å¯ä»¥æ”¯æŒç±»ä¼¼ OIDC è¿™æ ·çš„èº«ä»½è®¤è¯åè®®, å¯¼è‡´å¤§å®¶æ€»æ˜¯è®¤ä¸º OAuth 2.0 æ˜¯ä¸€ç§èº«ä»½è®¤è¯åè®®. å½“ç„¶äº†, "),s("strong",[t._v("OAuth 2.0 å¹¶ä¸æ˜¯èº«ä»½è®¤è¯åè®®")]),t._v(", å‰é¢ç”¨é¢ç²‰å’Œé¢åŒ…æ¥ç±»æ¯” OAuth 2.0 å’Œ OIDC çš„å…³ç³».")]),t._v(" "),s("p",[t._v("ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´å¤§å®¶å¯¹ OAuth 2.0 æœ‰è¿™æ ·çš„è¯¯è§£å‘¢? å¤§æ¦‚åŸå› æ˜¯, OAuth 2.0 ä¸­ç¡®å®åŒ…å«äº†èº«ä»½è®¤è¯çš„å†…å®¹, å³æˆæƒæœåŠ¡éœ€è¦è®©ç”¨æˆ·ç™»å½•ä»¥åæ‰å¯ä»¥è¿›è¡Œç”¨æˆ·ç¡®è®¤æˆæƒçš„æ“ä½œ. ä½†è¿™æ ·çš„æµç¨‹, ä»…ä»…æ˜¯ "),s("strong",[t._v("OAuth 2.0 æ¶‰åŠåˆ°äº†èº«ä»½è®¤è¯çš„è¡Œä¸º, è¿˜ä¸è¶³ä»¥è®© OAuth 2.0 æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ç”¨æˆ·èº«ä»½è®¤è¯åè®®")]),t._v('. å› ä¸º OAuth 2.0 å…³å¿ƒçš„åªæœ‰ä¸¤ç‚¹, é¢å‘ä»¤ç‰Œå’Œä½¿ç”¨ä»¤ç‰Œ, å¹¶ä¸”ä»¤ç‰Œå¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶æ˜¯ä¸é€æ˜çš„; åŒæ—¶, å—ä¿æŠ¤èµ„æºæœåŠ¡ä¹Ÿä¸å…³å¿ƒæ˜¯å“ªä¸ªç”¨æˆ·æ¥è¯·æ±‚, åªè¦æœ‰åˆæ³•çš„ä»¤ç‰Œ "é€’" è¿‡æ¥, å°±ä¼šç»™å‡ºæ­£ç¡®çš„å“åº”, æŠŠæ•°æ®è¿”å›ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶.')]),t._v(" "),s("h5",{attrs:{id:"_3-å†å¼ºè°ƒéƒ½ä¸ä¸ºè¿‡çš„å®‰å…¨æ„è¯†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å†å¼ºè°ƒéƒ½ä¸ä¸ºè¿‡çš„å®‰å…¨æ„è¯†"}},[t._v("#")]),t._v(" 3.å†å¼ºè°ƒéƒ½ä¸ä¸ºè¿‡çš„å®‰å…¨æ„è¯†")]),t._v(" "),s("p",[t._v("æ ¹æ®ç¬”è€…åœ¨å¼€æ”¾å¹³å°ä¸Šè¿™äº›å¹´çš„å·¥ä½œç»éªŒ, å®‰å…¨æ„è¯†æ˜¯å®è·µ OAuth 2.0 è¿‡ç¨‹ä¸­, å†æ€ä¹ˆå¼ºè°ƒéƒ½ä¸ä¸ºè¿‡çš„é—®é¢˜.")]),t._v(" "),s("p",[t._v("å› ä¸ºæ€»ç»“èµ·æ¥, "),s("strong",[t._v('è¦è¯´ä½¿ç”¨ OAuth 2.0 çš„è¿‡ç¨‹ä¸­å¦‚æœèƒ½æœ‰å“ªä¸ªæœºä¼šè®©ä½ "æ ½ä¸ªå¤§è·Ÿå¤´"çš„è¯, é‚£è¿™ä¸ªæœºä¼šä¸€å®šæ˜¯åœ¨å®‰å…¨ä¸Š')]),t._v(": OAuth 2.0 æœ¬å°±æ˜¯è‡´åŠ›äºä¿æŠ¤å¼€æ”¾çš„ Web API, ä¿æŠ¤ç”¨æˆ·åœ¨å¹³å°ä¸Šçš„èµ„æº, å¦‚æœå› ä¸º OAuth 2.0 ä½¿ç”¨ä¸å½“è€Œé€ æˆå®‰å…¨é—®é¢˜, ç¡®å®æ˜¯ä¸€ä»¶éå¸¸ ä¸¢äººçš„äº‹æƒ….")]),t._v(" "),s("p",[t._v("è€Œ OAuth2.0 çš„"),s("strong",[t._v("æµç¨‹é‡Œé¢èƒ½å¤Ÿä¸ºå®‰å…¨åšè´¡çŒ®çš„åªæœ‰ä¸¤æ–¹, ä¸€æ–¹æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶, ä¸€æ–¹æ˜¯å¹³å°æ–¹")]),t._v(". åœ¨å®‰å…¨æ€§è¿™ä¸ªé—®é¢˜ä¸Š, ç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…çš„å®‰å…¨æ„è¯†å‚å·®ä¸é½. é‚£é’ˆå¯¹è¿™ä¸€ç‚¹, å°±éœ€è¦å¹³å°æ–¹åœ¨å…¶å®˜æ–¹æ–‡æ¡£ä¸Šé‡ç¬”æè¿°, å¹¶ç»™å‡ºå¸¸è§å®‰å…¨æ¼æ´ç›¸åº”çš„è§£å†³æ–¹æ¡ˆ. åŒæ—¶, ä½œä¸ºå¹³å°æ–¹çš„å†…éƒ¨å¼€å‘äººå‘˜, å¯¹å®‰å…¨çš„é—®é¢˜åŒæ ·ä¸èƒ½å¿½è§†, è€Œä¸”è¦æœ‰æ›´é«˜çš„å®‰å…¨æ„è¯†å’Œè®¤çŸ¥.")]),t._v(" "),s("p",[t._v("**åªæœ‰ç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…å’Œå¹³å°æ–¹çš„ç ”å‘äººå‘˜å…±åŒä¿æœ‰è¾ƒé«˜çš„å®‰å…¨æ„è¯†, æ‰èƒ½è®©å®‰å…¨çš„å¢™å’å¾—è¶Šæ¥è¶Šé«˜, è®©æ”»å‡»è€…çš„æˆæœ¬è¶Šæ¥è¶Šé«˜. å› ä¸ºå®‰å…¨çš„æœ¬è´¨å°±æ˜¯æˆæœ¬é—®é¢˜. **")]),t._v(" "),s("h5",{attrs:{id:"_4-æ€»ç»“-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€»ç»“-4"}},[t._v("#")]),t._v(" 4.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ä¸‰ç‚¹:")]),t._v(" "),s("ul",[s("li",[t._v("OAuth 2.0 æ˜¯ä¸€ä¸ªæˆæƒåè®®, å®ƒé€šè¿‡è®¿é—®ä»¤ç‰Œæ¥è¡¨ç¤ºè¿™ç§æˆæƒ. ç¬¬ä¸‰è½¯ä»¶æ‹¿åˆ°è®¿é—®ä»¤ç‰Œä¹‹å, å°±å¯ä»¥ä½¿ç”¨è®¿é—®ä»¤ç‰Œæ¥ä»£è¡¨ç”¨æˆ·å»è®¿é—®ç”¨æˆ·çš„æ•°æ®äº†. æ‰€ä»¥"),s("strong",[t._v("æˆæƒçš„æ ¸å¿ƒå°±æ˜¯è·å–è®¿é—®ä»¤ç‰Œå’Œä½¿ç”¨è®¿é—®ä»¤ç‰Œ")]),t._v(".")]),t._v(" "),s("li",[t._v("OAuth 2.0 æ˜¯ä¸€ä¸ªå®‰å…¨åè®®, ä½†æ˜¯"),s("strong",[t._v("å¦‚æœä½¿ç”¨ä¸å½“, å®ƒå¹¶ä¸èƒ½ä¿è¯ä¸€å®šæ˜¯å®‰å…¨çš„")]),t._v(". å¦‚æœä¸æŒ‰ç…§ OAuth 2.0 è§„èŒƒä¸­çš„å»ºè®®æ¥å®æ–½, å°±ä¼šæœ‰å®‰å…¨é£é™©. æ¯”å¦‚æ²¡æœ‰éµå¾ªæˆæƒæœåŠ¡ä¸­çš„æˆæƒç åªèƒ½ä½¿ç”¨ä¸€æ¬¡, ç¬¬ä¸‰æ–¹è½¯ä»¶çš„é‡å®šå‘ URL è¦ç²¾ç¡®åŒ¹é…ç­‰å»ºè®®.")]),t._v(" "),s("li",[t._v('å®‰å…¨é˜²æŠ¤çš„è¿‡ç¨‹ä¸€ç›´éƒ½æ˜¯"é­”é«˜ä¸€å°ºé“é«˜ä¸€ä¸ˆ", ç›¸äº’æ”€å‡çš„è¿‡ç¨‹. å› æ­¤åœ¨ä½¿ç”¨ OAuth 2.0 çš„è¿‡ç¨‹ä¸­, ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œå¹³å°æ–¹éƒ½è¦æœ‰è¶³å¤Ÿçš„å®‰å…¨æ„è¯†, æ¥æŠŠå®‰å…¨çš„å¢™ç­‘å¾—æ›´é«˜.')])]),t._v(" "),s("p",[s("strong",[t._v("æ— è®ºä½¿ç”¨ OAuth 2.0 ç›®çš„æ˜¯ä¿æŠ¤ API, è¿˜æ˜¯ä½œä¸ºç”¨æˆ·èº«ä»½è®¤è¯çš„åŸºç¡€, OAuth 2.0 éƒ½åªæ˜¯è§£å†³è¿™äº›é—®é¢˜çš„ä¸€ç§å·¥å…·. è€ŒæŒæ¡ OAuth 2.0 è¿™ç§å·¥å…·çš„åŸç†åŠå…¶ä½¿ç”¨åœºæ™¯, å°†ä¼šå¸®åŠ©ä½ æ›´é«˜æ•ˆ, æ›´ä¼˜é›…åœ°è§£å†³è¿™äº›é—®é¢˜.")])]),t._v(" "),s("h4",{attrs:{id:"å®æˆ˜æ¡ˆä¾‹-ä½¿ç”¨spring-securityæ­å»ºä¸€å¥—åŸºäºjwtçš„oauth-2-0æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜æ¡ˆä¾‹-ä½¿ç”¨spring-securityæ­å»ºä¸€å¥—åŸºäºjwtçš„oauth-2-0æ¶æ„"}},[t._v("#")]),t._v(" å®æˆ˜æ¡ˆä¾‹-ä½¿ç”¨Spring Securityæ­å»ºä¸€å¥—åŸºäºJWTçš„OAuth 2.0æ¶æ„")]),t._v(" "),s("p",[t._v("Spring Security å› ä¸ºåŠŸèƒ½å¤š, ç»„ä»¶æŠ½è±¡ç¨‹åº¦é«˜, é…ç½®æ–¹å¼å¤šæ ·, å¯¼è‡´äº†å¼ºå¤§ä¸”å¤æ‚çš„ç‰¹æ€§. ä¹Ÿå› æ­¤, Spring Security çš„å­¦ä¹ æˆæœ¬å‡ ä¹æ˜¯ Spring å®¶æ—ä¸­æœ€é«˜çš„. ä½†ä¸ä»…äºæ­¤, åœ¨ç»“åˆå®é™…çš„å¤æ‚ä¸šåŠ¡åœºæ™¯ä½¿ç”¨ Spring Security æ—¶, è¿˜è¦å»ç†è§£ä¸€äº›ç»„ä»¶çš„å·¥ä½œåŸç†å’Œæµç¨‹, ä¸ç„¶éœ€è¦è‡ªå®šä¹‰å’Œæ‰©å±•æ¡†æ¶çš„æ—¶å€™å°±ä¼šæ‰‹è¶³æ— æª. è¿™å°±è®©ä½¿ç”¨ Spring Security çš„é—¨æ§›æ›´é«˜äº†.")]),t._v(" "),s("p",[t._v("å› æ­¤, åœ¨å†³å®šä½¿ç”¨ Spring Security æ­å»ºæ•´å¥—å®‰å…¨ä½“ç³»(æˆæƒ, è®¤è¯, æƒé™, å®¡è®¡)ä¹‹å‰, è¿˜éœ€è¦è€ƒè™‘çš„æ˜¯: "),s("strong",[t._v("å°†æ¥çš„ä¸šåŠ¡ä¼šå¤šå¤æ‚, å¾’æ‰‹å†™ä¸€å¥—å®‰å…¨ä½“ç³»æ¥å¾—åˆ’ç®—, è¿˜æ˜¯ä½¿ç”¨ Spring Security æ›´å¥½")]),t._v("?")]),t._v(" "),s("p",[t._v("åè¿‡æ¥è¯´, å¦‚æœåº”ç”¨å·²ç»ä½¿ç”¨äº† Spring Security æ¥åšé‰´æƒ, è®¤è¯å’Œæƒé™ç®¡ç†çš„è¯, é‚£ä¹ˆä»ç„¶ä½¿ç”¨ Spring Security æ¥å®ç° OAuth çš„æˆæœ¬æ˜¯å¾ˆä½çš„. è€Œä¸”åœ¨å­¦ä¹ äº† OAuth 2.0 çš„æµç¨‹æ‰“ä¸‹æ‰å®çš„åŸºç¡€ä¹‹å, å†ä½¿ç”¨ Spring Security æ¥é…ç½® OAuth 2.0 å°±ä¸ä¼šé‚£ä¹ˆè¿·èŒ«äº†.")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚ä½¿ç”¨ Spring Security æ¥ä¸€æ­¥ä¸€æ­¥åœ°æ­å»ºä¸€å¥—åŸºäº JWT çš„ OAuth 2.0 æˆæƒä½“ç³». è¿™äº›å†…å®¹ä¼šæ¶‰åŠ "),s("strong",[t._v("OAuth 2.0 çš„ä¸‰è§’è‰²(å®¢æˆ·ç«¯, æˆæƒæœåŠ¡, å—ä¿æŠ¤èµ„æº), ä»¥åŠèµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯, å®¢æˆ·ç«¯å‡­æ®è®¸å¯å’Œæˆæƒç è®¸å¯è¿™ä¸‰ç§å¸¸ç”¨çš„æˆæƒè®¸å¯ç±»å‹")]),t._v("(éšå¼è®¸å¯ç±»å‹, ä¸å¤ªå®‰å…¨ä¹Ÿä¸å¤ªå¸¸ç”¨). åŒæ—¶è¿˜ä¼šæ¼”ç¤º OAuth 2.0 çš„æƒé™æ§åˆ¶, ä»¥åŠä½¿ç”¨ OAuth 2.0 "),s("strong",[t._v("å®ç° SSO å•ç‚¹ç™»å½•ä½“ç³»")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_1-é¡¹ç›®å‡†å¤‡å·¥ä½œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¡¹ç›®å‡†å¤‡å·¥ä½œ"}},[t._v("#")]),t._v(" 1.é¡¹ç›®å‡†å¤‡å·¥ä½œ")]),t._v(" "),s("p",[t._v("å®æˆ˜ä¹‹å‰, å…ˆæ¥æ­å»ºé¡¹ç›®çˆ¶ä¾èµ–å’Œåˆå§‹åŒ–æ•°æ®åº“ç»“æ„, ä¸ºåé¢å…·ä½“çš„ç¼–ç åšå‡†å¤‡.")]),t._v(" "),s("p",[t._v("é¦–å…ˆåˆ›å»ºä¸€ä¸ªçˆ¶ POM, å†…å«ä¸‰ä¸ªæ¨¡å—:")]),t._v(" "),s("ol",[s("li",[t._v("springsecurity101-cloud-oauth2-client: ç”¨æ¥æ‰®æ¼”"),s("strong",[t._v("å®¢æˆ·ç«¯")]),t._v("è§’è‰²;")]),t._v(" "),s("li",[t._v("springsecurity101-cloud-oauth2-server: ç”¨æ¥æ‰®æ¼”"),s("strong",[t._v("æˆæƒæœåŠ¡å™¨")]),t._v("è§’è‰²;")]),t._v(" "),s("li",[t._v("springsecurity101-cloud-oauth2-userservice: æ˜¯ç”¨æˆ·æœåŠ¡, ç”¨æ¥æ‰®æ¼”"),s("strong",[t._v("èµ„æºæä¾›è€…")]),t._v("è§’è‰².")])]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("4.0.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("me.josephzhu"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("packaging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("pom"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("packaging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-parent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.2.1.RELEASE"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("relativePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-server"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-userservice"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project.build.sourceEncoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project.build.sourceEncoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project.reporting.outputEncoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project.reporting.outputEncoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("java.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.8"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("java.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.projectlombok"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("lombok"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("optional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("optional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencyManagement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-dependencies"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Greenwich.SR4"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("pom"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("import"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencyManagement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-maven-plugin"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br")])]),s("p",[t._v("ç„¶åæ¥åˆ›å»ºä¸€ä¸ª oauth æ•°æ®åº“, åˆå§‹åŒ–å°†æ¥ä¼šç”¨åˆ°çš„ 5 ä¸ªè¡¨.")]),t._v(" "),s("ol",[s("li",[t._v("authorities è¡¨: è®°å½•"),s("strong",[t._v("è´¦å·çš„æƒé™")]),t._v(", éœ€è¦åœ¨åé¢é…ç½®.")]),t._v(" "),s("li",[t._v("oauth_approvals è¡¨: è®°å½•"),s("strong",[t._v("æˆæƒæ‰¹å‡†çš„çŠ¶æ€")]),t._v(".")]),t._v(" "),s("li",[t._v("oauth_client_details è¡¨: è®°å½• "),s("strong",[t._v("OAuth çš„å®¢æˆ·ç«¯")]),t._v(", éœ€è¦åœ¨åé¢åšé…ç½®.")]),t._v(" "),s("li",[t._v("oauth_code è¡¨: è®°å½•"),s("strong",[t._v("æˆæƒç ")]),t._v(".")]),t._v(" "),s("li",[t._v("users è¡¨: è®°å½•"),s("strong",[t._v("è´¦å·")]),t._v(", éœ€è¦åœ¨åé¢åšåˆå§‹åŒ–.")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" NAMES utf8mb4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" FOREIGN_KEY_CHECKS "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table structure for authorities")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authority"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ix_auth_username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authority"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CONSTRAINT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("fk_authorities_users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FOREIGN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("REFERENCES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table structure for oauth_approvals")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_approvals"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_approvals"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("clientId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("partnerKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("expiresAt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("lastModifiedAt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table structure for oauth_client_details")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_client_details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_client_details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("client_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("resource_ids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("client_secret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorized_grant_types"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("web_server_redirect_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("access_token_validity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("refresh_token_validity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("additional_information"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("autoapprove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("client_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table structure for oauth_code")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("blob")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table structure for users")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ----------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("enabled"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" FOREIGN_KEY_CHECKS "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br")])]),s("p",[t._v("è¿™ 5 ä¸ªè¡¨æ˜¯ Spring Security OAuth éœ€è¦ç”¨åˆ°çš„å­˜å‚¨è¡¨. è¿™é‡Œå¹¶æ²¡æœ‰åœ¨æ•°æ®åº“ä¸­åˆ›å»ºç›¸åº”çš„è¡¨æ¥å­˜æ”¾è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ. è¿™æ˜¯å› ä¸ºä¹‹åçš„å®ç°ä¼š"),s("strong",[t._v("ä½¿ç”¨ JWT æ¥ä¼ è¾“ä»¤ç‰Œä¿¡æ¯, ä»¥ä¾¿è¿›è¡Œæœ¬åœ°æ ¡éªŒ, æ‰€ä»¥å¹¶ä¸ä¸€å®šè¦å°†å…¶å­˜æ”¾åˆ°æ•°æ®åº“")]),t._v("ä¸­. åŸºæœ¬ä¸Šæ‰€æœ‰çš„è¿™äº›è¡¨éƒ½æ˜¯å¯ä»¥è‡ªå·±æ‰©å±•çš„, åªéœ€è¦ç»§æ‰¿å®ç° Spring çš„ä¸€äº›æ—¢æœ‰ç±»å³å¯, è¿™é‡Œä¸åšå±•å¼€.")]),t._v(" "),s("h5",{attrs:{id:"_2-æ­å»ºæˆæƒæœåŠ¡å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ­å»ºæˆæƒæœåŠ¡å™¨"}},[t._v("#")]),t._v(" 2.æ­å»ºæˆæƒæœåŠ¡å™¨")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å¼€å§‹æ­å»ºæˆæƒæœåŠ¡å™¨å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨. å…ˆåˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡å—, ä¹Ÿå°±æ˜¯æˆæƒæœåŠ¡å™¨. é¦–å…ˆåˆ›å»º POM, é…ç½®ä¾èµ–:")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("me.josephzhu"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("4.0.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-server"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-oauth2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-jdbc"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mysql"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mysql-connector-java"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-thymeleaf"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br")])]),s("p",[t._v("è¿™é‡Œä½¿ç”¨äº† Spring Cloud çš„ "),s("strong",[t._v("spring-cloud-starter-oauth2 ç»„ä»¶")]),t._v(", è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„ Spring Security, å› ä¸ºå‰è€…åšäº†ä¸€äº›è‡ªåŠ¨åŒ–é…ç½®çš„å·¥ä½œ, ä½¿ç”¨èµ·æ¥ä¼šæ›´æ–¹ä¾¿.")]),t._v(" "),s("p",[t._v("æ­¤å¤–è¿˜åœ¨ POM ä¸­åŠ å…¥äº†æ•°æ®è®¿é—®, Web ç­‰ä¾èµ–, å› ä¸ºå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨éœ€è¦ä½¿ç”¨æ•°æ®åº“æ¥ä¿å­˜å®¢æˆ·ç«¯çš„ä¿¡æ¯, ç”¨æˆ·ä¿¡æ¯ç­‰æ•°æ®, åŒæ—¶ä¹Ÿä¼šå¼•å…¥ thymeleaf æ¨¡æ¿å¼•æ“ä¾èµ–, æ¥ç¨ç¨ç¾åŒ–ä¸€ä¸‹ç™»å½•é¡µé¢.")]),t._v(" "),s("p",[t._v("ç„¶ååˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ application.yml å®ç°ç¨‹åºé…ç½®:")]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" oauth2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("datasource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("6657/oauth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("useSSL=false\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kIo9u7Oi0eg\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.jdbc.Driver\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("è¿™é‡Œé…ç½®äº† oauth æ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸², å®šä¹‰äº†æˆæƒæœåŠ¡å™¨çš„ç›‘å¬ç«¯å£æ˜¯ 8080.")]),t._v(" "),s("p",[t._v("æœ€å, ä½¿ç”¨ keytool å·¥å…·"),s("strong",[t._v("ç”Ÿæˆå¯†é’¥å¯¹, æŠŠå¯†é’¥æ–‡ä»¶ jks ä¿å­˜åˆ°èµ„æºç›®å½•ä¸‹, å¹¶è¦å¯¼å‡ºä¸€ä¸ªå…¬é’¥ç•™ä½œä»¥åä½¿ç”¨")]),t._v(".")]),t._v(" "),s("p",[t._v("ä»¥ä¸Šå®Œæˆäº†é¡¹ç›®æ¡†æ¶æ­å»ºå·¥ä½œ, æ¥ä¸‹æ¥æ­£å¼å¼€å§‹ç¼–ç .")]),t._v(" "),s("p",[t._v("ç¬¬ä¸€æ­¥, åˆ›å»ºä¸€ä¸ª"),s("strong",[t._v("æœ€æ ¸å¿ƒçš„ç±»ç”¨äºé…ç½®æˆæƒæœåŠ¡å™¨")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAuthorizationServer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼€å¯æˆæƒæœåŠ¡å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2ServerConfiguration")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizationServerConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationManager")]),t._v(" authenticationManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * é…ç½®ä½¿ç”¨æ•°æ®åº“æ¥ç»´æŠ¤å®¢æˆ·ç«¯ä¿¡æ¯. è™½ç„¶åœ¨å„ç§Demoä¸­ç»å¸¸çœ‹åˆ°çš„æ˜¯åœ¨å†…å­˜ä¸­ç»´æŠ¤å®¢æˆ·ç«¯ä¿¡æ¯, é€šè¿‡é…ç½®ç›´æ¥å†™æ­»åœ¨è¿™é‡Œ. \n     * ä½†æ˜¯å¯¹äºå®é™…çš„åº”ç”¨ä¸€èˆ¬éƒ½ä¼šç”¨æ•°æ®åº“æ¥ç»´æŠ¤è¿™ä¸ªä¿¡æ¯, ç”šè‡³è¿˜ä¼šå»ºç«‹ä¸€å¥—å·¥ä½œæµæ¥å…è®¸å®¢æˆ·ç«¯è‡ªå·±ç”³è¯·ClientID, å®ç°OAuthå®¢æˆ·ç«¯æ¥å…¥çš„å®¡æ‰¹. \n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientDetailsServiceConfigurer")]),t._v(" clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jdbc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * è¿™é‡Œå¹²äº†ä¸¤ä»¶äº‹å„¿. é¦–å…ˆ, æ‰“å¼€äº†éªŒè¯Tokençš„è®¿é—®æƒé™(ä»¥ä¾¿ä¹‹åæ¼”ç¤º). \n     * ç„¶åå…è®¸ClientSecretæ˜æ–‡æ–¹å¼ä¿å­˜, å¹¶ä¸”å¯ä»¥é€šè¿‡è¡¨å•æäº¤(è€Œä¸ä»…ä»…æ˜¯Basic Authæ–¹å¼æäº¤), ä¹‹åä¼šæ¼”ç¤ºåˆ°è¿™ä¸ª. \n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizationServerSecurityConfigurer")]),t._v(" security"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        security"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkTokenAccess")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"permitAll()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowFormAuthenticationForClients")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwordEncoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NoOpPasswordEncoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å¹²äº†ä»¥ä¸‹4ä»¶äº‹å„¿: \n     * 1. é…ç½®ä»¤ç‰Œå­˜æ”¾æ–¹å¼ä¸ºJWTæ–¹å¼, è€Œä¸æ˜¯å†…å­˜, æ•°æ®åº“æˆ–Redisæ–¹å¼. \n     * JWTæ˜¯Json Web Tokençš„ç¼©å†™, ä¹Ÿå°±æ˜¯ä½¿ç”¨JSONæ•°æ®æ ¼å¼åŒ…è£…çš„ä»¤ç‰Œ, ç”±.å·æŠŠæ•´ä¸ªJWTåˆ†éš”ä¸ºå¤´, æ•°æ®ä½“, ç­¾åä¸‰éƒ¨åˆ†. \n     * JWTä¿å­˜Tokenè™½ç„¶æ˜“äºä½¿ç”¨ä½†æ˜¯ä¸æ˜¯é‚£ä¹ˆå®‰å…¨, ä¸€èˆ¬ç”¨äºå†…éƒ¨, ä¸”éœ€è¦èµ°HTTPSå¹¶é…ç½®æ¯”è¾ƒçŸ­çš„å¤±æ•ˆæ—¶é—´. \n     * 2. é…ç½®JWT Tokençš„éå¯¹ç§°åŠ å¯†æ¥è¿›è¡Œç­¾å\n     * 3. é…ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„Tokenå¢å¼ºå™¨, æŠŠæ›´å¤šä¿¡æ¯æ”¾å…¥Tokenä¸­\n     * 4. é…ç½®ä½¿ç”¨JDBCæ•°æ®åº“æ–¹å¼æ¥ä¿å­˜ç”¨æˆ·çš„æˆæƒæ‰¹å‡†è®°å½•\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizationServerEndpointsConfigurer")]),t._v(" endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenEnhancerChain")]),t._v(" tokenEnhancerChain "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenEnhancerChain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        tokenEnhancerChain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTokenEnhancers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtTokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        endpoints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("approvalStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("approvalStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizationCodeServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizationCodeServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenEnhancerChain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("authenticationManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨JDBCæ•°æ®åº“æ–¹å¼æ¥ä¿å­˜æˆæƒç ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizationCodeServices")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizationCodeServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcAuthorizationCodeServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨JWTå­˜å‚¨")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStore")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtTokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtTokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨JDBCæ•°æ®åº“æ–¹å¼æ¥ä¿å­˜ç”¨æˆ·çš„æˆæƒæ‰¹å‡†è®°å½•")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcApprovalStore")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("approvalStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcApprovalStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰çš„Tokenå¢å¼ºå™¨, æŠŠæ›´å¤šä¿¡æ¯æ”¾å…¥Tokenä¸­")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenEnhancer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomTokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®JWTä½¿ç”¨éå¯¹ç§°åŠ å¯†æ–¹å¼æ¥éªŒè¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtTokenEnhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KeyStoreKeyFactory")]),t._v(" keyStoreKeyFactory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KeyStoreKeyFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathResource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jwt.jks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mySecretKey"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toCharArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),t._v(" converter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        converter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setKeyPair")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyStoreKeyFactory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getKeyPair")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jwt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" converter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®ç™»å½•é¡µé¢çš„è§†å›¾ä¿¡æ¯(å…¶å®å¯ä»¥ç‹¬ç«‹ä¸€ä¸ªé…ç½®ç±», è¿™æ ·ä¼šæ›´è§„èŒƒ)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MvcConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addViewControllers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ViewControllerRegistry")]),t._v(" registry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            registry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addViewController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setViewName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br")])]),s("p",[t._v("ç¬¬äºŒæ­¥, åˆšæ‰åœ¨ç¬¬ä¸€æ­¥çš„ä»£ç ä¸­è¿˜ç”¨åˆ°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ Token å¢å¼ºå™¨, æŠŠ"),s("strong",[t._v("ç”¨æˆ·ä¿¡æ¯åµŒå…¥åˆ° JWT Token ä¸­")]),t._v("å»(å¦‚æœä½¿ç”¨çš„æ˜¯å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹, è¿™æ®µä»£ç æ— æ•ˆ, å› ä¸ºå’Œç”¨æˆ·æ²¡å…³ç³»).")]),t._v(" "),s("p",[t._v("è¿™æ˜¯ä¸€ä¸ªå¸¸è§éœ€æ±‚. å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ Token ä¸­åªä¼šæœ‰ç”¨æˆ·åè¿™æ ·çš„åŸºæœ¬ä¿¡æ¯, å› æ­¤å¾€å¾€"),s("strong",[t._v("éœ€è¦æŠŠå…³äºç”¨æˆ·çš„æ›´å¤šä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯")]),t._v("(åœ¨å®é™…åº”ç”¨ä¸­, å¯èƒ½ä¼šä»æ•°æ®åº“æˆ–å¤–éƒ¨æœåŠ¡æŸ¥è¯¢æ›´å¤šçš„ç”¨æˆ·ä¿¡æ¯åŠ å…¥åˆ° JWT Token ä¸­å»). è¿™ä¸ªæ—¶å€™, å°±å¯ä»¥"),s("strong",[t._v("è‡ªå®šä¹‰å¢å¼ºå™¨")]),t._v("æ¥ä¸°å¯Œ Token çš„å†…å®¹:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomTokenEnhancer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenEnhancer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2AccessToken")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enhance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2AccessToken")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentication")]),t._v(" userAuthentication "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserAuthentication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAuthentication "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" principal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserAuthentication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠç”¨æˆ·æ ‡è¯†åµŒå…¥JWT Tokenä¸­å»(Keyæ˜¯userDetails)")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" additionalInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            additionalInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userDetails"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" principal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultOAuth2AccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAdditionalInformation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("additionalInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("ç¬¬ä¸‰æ­¥, å®ç°"),s("strong",[t._v("å®‰å…¨æ–¹é¢çš„é…ç½®")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSecurityConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSecurityConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationManager")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationManagerBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationManagerBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * é…ç½®ç”¨æˆ·è´¦æˆ·çš„è®¤è¯æ–¹å¼. æ˜¾ç„¶æŠŠç”¨æˆ·å­˜åœ¨äº†æ•°æ®åº“ä¸­å¸Œæœ›é…ç½®JDBCçš„æ–¹å¼.\n     * æ­¤å¤–è¿˜é…ç½®äº†ä½¿ç”¨BCryptPasswordEncoderå“ˆå¸Œæ¥ä¿å­˜ç”¨æˆ·çš„å¯†ç (ç”Ÿäº§ç¯å¢ƒä¸­, ç”¨æˆ·å¯†ç è‚¯å®šä¸èƒ½æ˜¯æ˜æ–‡ä¿å­˜çš„)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationManagerBuilder")]),t._v(" auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jdbcAuthentication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dataSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwordEncoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCryptPasswordEncoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å¼€æ”¾/loginå’Œ/oauth/authorizeä¸¤ä¸ªè·¯å¾„çš„åŒ¿åè®¿é—®. å‰è€…ç”¨äºç™»å½•, åè€…ç”¨äºæ¢æˆæƒç , è¿™ä¸¤ä¸ªç«¯ç‚¹è®¿é—®çš„æ—¶æœºéƒ½åœ¨ç™»å½•ä¹‹å‰.\n     * è®¾ç½®/loginä½¿ç”¨è¡¨å•éªŒè¯è¿›è¡Œç™»å½•.\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizeRequests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("antMatchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/oauth/authorize"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("permitAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("anyRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("formLogin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br")])]),s("p",[t._v("ç¬¬å››æ­¥, åœ¨èµ„æºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª templates æ–‡ä»¶å¤¹, ç„¶ååˆ›å»ºä¸€ä¸ª login.html ç™»å½•é¡µ:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-height-1-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-vertical-align uk-text-center uk-height-1-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-vertical-align-middle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token special-attr"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token value css language-css"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 250px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Login Form"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-text-danger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("th:")]),t._v("if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${param.error}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯...\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-panel uk-panel-box uk-form"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("th:")]),t._v("action")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@{/login}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-form-row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-width-1-1 uk-form-large"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("placeholder")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("reader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-form-row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-width-1-1 uk-form-large"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("placeholder")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("reader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-form-row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uk-width-1-1 uk-button uk-button-primary uk-button-large"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Login"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br")])]),s("p",[t._v("è‡³æ­¤, æˆæƒæœåŠ¡å™¨çš„ç¼–ç å·¥ä½œå°±å®Œæˆäº†.")]),t._v(" "),s("h5",{attrs:{id:"_3-æ­å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ­å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨"}},[t._v("#")]),t._v(" 3.æ­å»ºå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥æ­å»ºä¸€ä¸ª"),s("strong",[t._v("ç”¨æˆ·æœåŠ¡æ¨¡æ‹Ÿèµ„æºæä¾›è€…(å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨)")]),t._v(" . å…ˆçœ‹çœ‹é¡¹ç›®åˆå§‹åŒ–å·¥ä½œ.")]),t._v(" "),s("p",[t._v("è¿™æ¬¡åˆ›å»ºçš„ POM æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Š, ä¾èµ–äº† spring-cloud-starter-oauth2:")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("me.josephzhu"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("4.0.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-userservice"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-oauth2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("p",[t._v("é…ç½®æ–‡ä»¶éå¸¸ç®€å•, åªæ˜¯å£°æ˜äº†èµ„æºæœåŠ¡ç«¯å£ä¸º 8081:")]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("åŒæ—¶è¿˜è¦è®°å¾—æŠŠä¹‹å‰åœ¨é¡¹ç›®å‡†å¤‡å·¥ä½œæ—¶ç”Ÿæˆçš„"),s("strong",[t._v("å¯†é’¥å¯¹çš„å…¬é’¥å‘½åä¸º public.cert, å¹¶æ”¾åˆ°èµ„æºæ–‡ä»¶ä¸‹")]),t._v(". è¿™æ ·, "),s("strong",[t._v("èµ„æºæœåŠ¡å™¨å¯ä»¥æœ¬åœ°æ ¡éªŒ JWT çš„åˆæ³•æ€§")]),t._v(". å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·çš„:")]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("BEGIN PUBLIC KEY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwR84LFHwnK5GXErnwkmD\nmPOJl4CSTtYXCqmCtlbF+5qVOosu0YsM2DsrC9O2gun6wVFKkWYiMoBSjsNMSI3Z\nw5JYgh+ldHvA+MIex2QXfOZx920M1fPUiuUPgmnTFS+Z3lmK3/T6jJnmciUPY1pe\nh4MXL6YzeI0q4W9xNBBeKT6FDGpduc0FC3OlXHfLbVOThKmAUpAWFDwf9/uUA//l\n3PLchmV6VwTcUaaHp5W8Af/GU4lPGZbTAqOxzB9ukisPFuO1DikacPhrOQgdxtqk\nLciRTa884uQnkFwSguOEUYf3ni8GNRJauIuW0rVXhMOs78pKvCKmo53M0tqeC6ul\n+QIDAQAB\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("END PUBLIC KEY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("ä¸‹é¢æ­£å¼å¼€å§‹ç¼–ç .")]),t._v(" "),s("p",[t._v("ç¬¬ä¸€æ­¥, åˆ›å»ºä¸€ä¸ªå¯ä»¥åŒ¿åè®¿é—®çš„æ¥å£ GET /hello, ç”¨æ¥æµ‹è¯•æ— éœ€ç™»å½•å°±å¯ä»¥è®¿é—®çš„æœåŠ¡ç«¯èµ„æº:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("ç¬¬äºŒæ­¥, åˆ›å»ºä¸‰ä¸ªéœ€è¦"),s("strong",[t._v("ç™»å½• + æˆæƒæ‰èƒ½è®¿é—®åˆ°çš„æ¥å£")]),t._v(". è¿™é‡Œé€šè¿‡ @PreAuthorize åœ¨æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™æ§åˆ¶:")]),t._v(" "),s("ol",[s("li",[t._v("GET /user/name æ¥å£, è¯»æƒé™æˆ–å†™æƒé™å¯è®¿é—®, è¿”å›ç™»å½•ç”¨æˆ·å;")]),t._v(" "),s("li",[t._v("GET /user æ¥å£, è¯»æƒé™æˆ–å†™æƒé™å¯è®¿é—®, è¿”å›ç™»å½•ç”¨æˆ·ä¿¡æ¯;")]),t._v(" "),s("li",[t._v("POST /user æ¥å£, åªæœ‰å†™æƒé™å¯ä»¥è®¿é—®, è¿”å›è®¿é—®ä»¤ç‰Œä¸­çš„é¢å¤–ä¿¡æ¯(ä¹Ÿå°±æ˜¯è‡ªå®šä¹‰çš„ Token å¢å¼ºå™¨ CustomTokenEnhancer åŠ å…¥åˆ°è®¿é—®ä»¤ç‰Œä¸­çš„é¢å¤–ä¿¡æ¯, Key æ˜¯ userDetails), è¿™é‡Œä¹Ÿæ¼”ç¤ºäº†ä½¿ç”¨ TokenStore æ¥è§£æ Token çš„æ–¹å¼.")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStore")]),t._v(" tokenStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯»æƒé™æˆ–å†™æƒé™å¯è®¿é—®, è¿”å›ç™»å½•ç”¨æˆ·å")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAuthority('READ') or hasAuthority('WRITE')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯»æƒé™æˆ–å†™æƒé™å¯è®¿é—®, è¿”å›ç™»å½•ç”¨æˆ·ä¿¡æ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAuthority('READ') or hasAuthority('WRITE')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªæœ‰å†™æƒé™å¯ä»¥è®¿é—®, è¿”å›è®¿é—®ä»¤ç‰Œä¸­çš„é¢å¤–ä¿¡æ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAuthority('WRITE')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2AuthenticationDetails")]),t._v(" details "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2AuthenticationDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2AccessToken")]),t._v(" accessToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokenStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readAccessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTokenValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" accessToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAdditionalInformation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userDetails"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br")])]),s("p",[t._v("ç¬¬ä¸‰æ­¥, åˆ›å»ºæ ¸å¿ƒçš„èµ„æºæœåŠ¡å™¨é…ç½®ç±». è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹é¢ä¸¤ç‚¹:")]),t._v(" "),s("ol",[s("li",[t._v("è¿™é‡Œç¡¬ç¼–ç äº†èµ„æºæœåŠ¡å™¨çš„ ID ä¸º userservice;")]),t._v(" "),s("li",[t._v("ç°åœ¨ä½¿ç”¨çš„æ˜¯"),s("strong",[t._v("ä¸è½æ•°æ®åº“çš„ JWT æ–¹å¼ + éå¯¹ç§°åŠ å¯†, éœ€è¦é€šè¿‡æœ¬åœ°å…¬é’¥è¿›è¡ŒéªŒè¯")]),t._v(", å› æ­¤åœ¨è¿™é‡Œé…ç½®äº†å…¬é’¥çš„è·¯å¾„.")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableResourceServer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨èµ„æºæœåŠ¡å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableGlobalMethodSecurity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prePostEnabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨æ–¹æ³•æ³¨è§£æ–¹å¼æ¥è¿›è¡Œæƒé™æ§åˆ¶")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceServerConfiguration")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceServerConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å£°æ˜äº†èµ„æºæœåŠ¡å™¨çš„IDæ˜¯userservice, å£°æ˜äº†èµ„æºæœåŠ¡å™¨çš„TokenStoreæ˜¯JWT")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceServerSecurityConfigurer")]),t._v(" resources"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        resources"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resourceId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userservice"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®TokenStore")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStore")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtTokenStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtAccessTokenConverter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®å…¬é’¥")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtAccessTokenConverter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),t._v(" converter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAccessTokenConverter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resource")]),t._v(" resource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathResource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public.cert"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" publicKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            publicKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCopyUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyToByteArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        converter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setVerifierKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("publicKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" converter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®äº†é™¤äº†/userè·¯å¾„ä¹‹å¤–çš„è¯·æ±‚å¯ä»¥åŒ¿åè®¿é—®")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizeRequests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("antMatchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/user/**"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("anyRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("permitAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br")])]),s("p",[t._v("åˆ°è¿™é‡Œæ¥æƒ³ä¸€ä¸‹, å¦‚æœæˆæƒæœåŠ¡å™¨äº§ç”Ÿ Token çš„è¯, "),s("strong",[t._v("å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨å¿…é¡»è¦æœ‰ä¸€ç§åŠæ³•æ¥éªŒè¯ Token")]),t._v(", é‚£å¦‚æœè¿™é‡Œçš„ Token ä¸æ˜¯ JWT çš„æ–¹å¼, å¯ä»¥æ€ä¹ˆåŠå‘¢?")]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯å‡ ä¸ªæ–¹æ¡ˆ:")]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆ, Token å¯ä»¥ä¿å­˜åœ¨æ•°æ®åº“æˆ– Redis ä¸­, èµ„æºæœåŠ¡å™¨å’ŒæˆæƒæœåŠ¡å™¨å…±äº«åº•å±‚çš„ TokenStore æ¥éªŒè¯;")]),t._v(" "),s("li",[t._v("ç„¶å, èµ„æºæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ RemoteTokenServices, æ¥ä»æˆæƒæœåŠ¡å™¨çš„ /oauth/check_token ç«¯ç‚¹è¿›è¡Œ Token æ ¡éªŒ.")])]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, èµ„æºæœåŠ¡å™¨å°±é…ç½®å®Œæˆäº†, è¿˜åœ¨èµ„æºæœåŠ¡å™¨ä¸­åˆ†åˆ«åˆ›å»ºäº†ä¸¤ä¸ªæ§åˆ¶å™¨ HelloController å’Œ UserController, ç”¨äºåˆ†åˆ«æµ‹è¯•å¯ä»¥åŒ¿åè®¿é—®ä»¥åŠå—åˆ°æƒé™ä¿æŠ¤çš„èµ„æº.")]),t._v(" "),s("h5",{attrs:{id:"_4-åˆå§‹åŒ–æ•°æ®é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-åˆå§‹åŒ–æ•°æ®é…ç½®"}},[t._v("#")]),t._v(" 4.åˆå§‹åŒ–æ•°æ®é…ç½®")]),t._v(" "),s("p",[t._v("åœ¨å®ç°äº†æˆæƒæœåŠ¡å™¨å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨ä»£ç å, å†æ¥åˆå§‹åŒ– oauth æ•°æ®åº“çš„æ•°æ®å°±éå¸¸å®¹æ˜“ç†è§£äº†. æ€»ç»“èµ·æ¥, éœ€è¦é…ç½®"),s("strong",[t._v("ç”¨æˆ·, æƒé™å’Œå®¢æˆ·ç«¯")]),t._v("ä¸‰éƒ¨åˆ†.")]),t._v(" "),s("p",[t._v("é…ç½®ä¸¤ä¸ªç”¨æˆ·. å…¶ä¸­, è¯»ç”¨æˆ· reader å…·æœ‰è¯»æƒé™, å¯†ç ä¸º reader; å†™ç”¨æˆ· writer å…·æœ‰è¯»å†™æƒé™, å¯†ç ä¸º writer. å¯†ç ä½¿ç”¨çš„æ˜¯ BCryptPasswordEncoder åŠ å¯†.")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$2a$04$C6pPJvC1v6.enW6ZZxX.luTdpSI/1gcgTVN7LhvQV6l/AfmzNU/3i'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'writer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$2a$04$M9t2oVs3/VIreBMocOujqOaB/oziWL0SnlWdt8hV4YnlhQrORA0fS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("é…ç½®ä¸¤ä¸ªæƒé™, ä¹Ÿå°±æ˜¯é…ç½® reader ç”¨æˆ·å…·æœ‰è¯»æƒé™, writer ç”¨æˆ·å…·æœ‰å†™æƒé™:")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'READ'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'writer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'READ,WRITE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("é…ç½®ä¸‰ä¸ªå®¢æˆ·ç«¯, å…¶ä¸­å®¢æˆ·ç«¯ userservice1 ä½¿ç”¨èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹, å®¢æˆ·ç«¯ userservice2 ä½¿ç”¨å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹, å®¢æˆ·ç«¯ userservice3 ä½¿ç”¨æˆæƒç è®¸å¯ç±»å‹.")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_client_details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1234'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FOO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password,refresh_token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'READ,WRITE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'true'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_client_details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1234'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FOO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'client_credentials,refresh_token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'READ,WRITE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'true'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("oauth_client_details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userservice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1234'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FOO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'authorization_code,refresh_token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://baidu.com,http://localhost:8082/ui/login,http://localhost:8083/ui/login,http://localhost:8082/ui/remoteCall'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'READ,WRITE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'false'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("å€¼å¾—è¯´æ˜çš„æ˜¯:")]),t._v(" "),s("ol",[s("li",[t._v("ä¸‰ä¸ªå®¢æˆ·ç«¯è´¦å·èƒ½ä½¿ç”¨çš„"),s("strong",[t._v("èµ„æº ID")]),t._v(" éƒ½æ˜¯ userservice, "),s("strong",[t._v("å¯¹åº”å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨åˆšæ‰é…ç½®çš„èµ„æº ID")]),t._v(", ä¹Ÿå°±æ˜¯ userservice, è¿™ä¸¤è€…éœ€è¦ä¸€è‡´.")]),t._v(" "),s("li",[t._v("ä¸‰ä¸ªå®¢æˆ·ç«¯è´¦å·çš„å¯†ç éƒ½æ˜¯ 1234.")]),t._v(" "),s("li",[t._v("ä¸‰ä¸ªå®¢æˆ·ç«¯è´¦å·çš„æˆæƒèŒƒå›´éƒ½æ˜¯ FOO(å¹¶ä¸æ˜¯å…³é”®ä¿¡æ¯), å®ƒä»¬å¯ä»¥æ‹¿åˆ°çš„æƒé™æ˜¯è¯»å†™. ä¸è¿‡, å¯¹äºå’Œç”¨æˆ·ç›¸å…³çš„æˆæƒè®¸å¯ç±»å‹(æ¯”å¦‚èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯, æˆæƒç è®¸å¯), æœ€ç»ˆæ‹¿åˆ°çš„æƒé™è¿˜å–å†³äºå®¢æˆ·ç«¯æƒé™å’Œç”¨æˆ·æƒé™çš„äº¤é›†.")]),t._v(" "),s("li",[t._v("é€šè¿‡ grant_types å­—æ®µé…ç½®æ”¯æŒä¸åŒçš„æˆæƒè®¸å¯ç±»å‹. è¿™é‡Œä¸ºäº†ä¾¿äºæµ‹è¯•è§‚å¯Ÿ, è¿™é‡Œç»™ä¸‰ä¸ªå®¢æˆ·ç«¯è´¦å·å„è‡ªé…ç½®äº†ä¸€ç§æˆæƒè®¸å¯ç±»å‹; åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­, å®Œå…¨å¯ä»¥ä¸ºåŒä¸€ä¸ªå®¢æˆ·ç«¯é…ç½®æ”¯æŒ OAuth 2.0 çš„å››ç§æˆæƒè®¸å¯ç±»å‹.")]),t._v(" "),s("li",[t._v("userservice1 å’Œ userservice2 é…ç½®äº†ç”¨æˆ·è‡ªåŠ¨æ‰¹å‡†æˆæƒ(ä¸ä¼šå¼¹å‡ºä¸€ä¸ªé¡µé¢è¦æ±‚ç”¨æˆ·è¿›è¡Œæˆæƒ).")])]),t._v(" "),s("h5",{attrs:{id:"_5-æ¼”ç¤ºä¸‰ç§æˆæƒè®¸å¯ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ¼”ç¤ºä¸‰ç§æˆæƒè®¸å¯ç±»å‹"}},[t._v("#")]),t._v(" 5.æ¼”ç¤ºä¸‰ç§æˆæƒè®¸å¯ç±»å‹")]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡ŒæˆæƒæœåŠ¡å™¨å’Œå—ä¿æŠ¤èµ„æºæœåŠ¡å™¨ç¨‹åºéƒ½æ­å»ºå®Œæˆäº†, æ•°æ®åº“ä¹Ÿé…ç½®äº†ç”¨äºæµ‹è¯•çš„ç”¨æˆ·, æƒé™å’Œå®¢æˆ·ç«¯. ä¸‹é¢ä½¿ç”¨ Postman æ¥æ‰‹å·¥æµ‹è¯•ä¸€ä¸‹ OAuth 2.0 çš„æˆæƒç è®¸å¯, èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯, å®¢æˆ·ç«¯å‡­æ®è®¸å¯è¿™ä¸‰ç§æˆæƒè®¸å¯ç±»å‹.")]),t._v(" "),s("h6",{attrs:{id:"_1-èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹"}},[t._v("#")]),t._v(" (1)èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹")]),t._v(" "),s("p",[t._v("é¦–å…ˆæµ‹è¯•çš„æ˜¯"),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯")]),t._v(", POST è¯·æ±‚åœ°å€æ˜¯:")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("http:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//localhost:8080/oauth/token?grant_type=password&client_id=userservice1&client_secret=1234&username=writer&password=writer")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºç»“æœ:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/c464fed8294ae77b40853dc1b1aeb5ca-20230729094013-zfshzon.png",alt:""}})]),t._v(" "),s("p",[t._v("ä½¿ç”¨ JWT è§£æå·¥å…·çœ‹ä¸‹è¯·æ±‚ Token ä¸­çš„ä¿¡æ¯:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/62b0b153c8dadc17cb872409c78b4cd0-20230729094013-1lbnv5p.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°, Token ä¸­æœç„¶åŒ…å«äº† "),s("strong",[t._v("Token å¢å¼ºå™¨åŠ å…¥çš„ userDetails è‡ªå®šä¹‰ä¿¡æ¯")]),t._v(". å¦‚æœæŠŠå…¬é’¥ç²˜è´´åˆ°é¡µé¢çš„è¯, å¯ä»¥çœ‹åˆ°è¿™ä¸ª JWT æ ¡éªŒæˆåŠŸäº†:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/3074623c88375924085c3307a2abfbbc-20230729094013-r85qs8l.png",alt:""}})]),t._v(" "),s("p",[t._v("é™¤äº†æœ¬åœ°æ ¡éªŒå¤–, è¿˜å¯ä»¥"),s("strong",[t._v("è®¿é—®æˆæƒæœåŠ¡å™¨æ¥æ ¡éªŒ JWT")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("http:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//localhost:8080/oauth/check_token?client_id=userservice1&client_secret=1234&token=...")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¾—åˆ°å¦‚ä¸‹ç»“æœ:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/176fd6031a6185641fa6d6af31b6a4c0-20230729094013-eckr04m.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"_2-å®¢æˆ·ç«¯æˆæƒè®¸å¯ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯æˆæƒè®¸å¯ç±»å‹"}},[t._v("#")]),t._v(" (2)å®¢æˆ·ç«¯æˆæƒè®¸å¯ç±»å‹")]),t._v(" "),s("p",[t._v("å†æ¥æµ‹è¯•ä¸‹å®¢æˆ·ç«¯æˆæƒè®¸å¯ç±»å‹. POST è¯·æ±‚åœ°å€:")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//localhost:8080/oauth/token?grant_type=client_credentials&client_id=userservice2&client_secret=1234")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¦‚ä¸‹å›¾æ‰€ç¤º, å¯ä»¥ç›´æ¥æ‹¿åˆ° Token:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/ce9f95779131b38c2eb0bdb91196fe8b-20230729094013-3nl67t3.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, "),s("strong",[t._v("å¹¶æ²¡æœ‰æä¾›åˆ·æ–°ä»¤ç‰Œ")]),t._v(". è¿™æ˜¯å› ä¸º, "),s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œç”¨äºé¿å…è®¿é—®ä»¤ç‰Œå¤±æ•ˆåéœ€è¦ç”¨æˆ·å†æ¬¡ç™»å½•çš„é—®é¢˜, è€Œå®¢æˆ·ç«¯æˆæƒè®¸å¯ç±»å‹æ²¡æœ‰ç”¨æˆ·çš„æ¦‚å¿µ, å› æ­¤æ²¡æœ‰åˆ·æ–°ä»¤ç‰Œ, ä¹Ÿæ— æ³•æ³¨å…¥é¢å¤–çš„ userDetails ä¿¡æ¯")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/d4c68440cd55741d9dbc40c3123d5ba9-20230729094013-tizk1lr.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¹Ÿå¯ä»¥è¯•ä¸€ä¸‹, å¦‚æœæˆæƒæœåŠ¡å™¨æ²¡æœ‰å¼€å¯ "),s("strong",[t._v("allowFormAuthenticationForClients")]),t._v(" å‚æ•°(å…è®¸è¡¨å•æäº¤è®¤è¯)çš„è¯, å®¢æˆ·ç«¯çš„å‡­è¯éœ€è¦é€šè¿‡ "),s("strong",[t._v("Basic Auth")]),t._v(" ä¼ è¿‡å»è€Œä¸æ˜¯é€šè¿‡ Post:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/b655bce82cede25c446735a82d66372c-20230729094013-3jwvy9e.png",alt:""}})]),t._v(" "),s("h6",{attrs:{id:"_3-æˆæƒç è®¸å¯ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æˆæƒç è®¸å¯ç±»å‹"}},[t._v("#")]),t._v(" (3)æˆæƒç è®¸å¯ç±»å‹")]),t._v(" "),s("p",[t._v("æœ€åæ¥æµ‹è¯•ä¸‹æ¯”è¾ƒå¤æ‚çš„"),s("strong",[t._v("æˆæƒç è®¸å¯")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬ä¸€æ­¥")]),t._v(", æ‰“å¼€æµè§ˆå™¨è®¿é—®åœ°å€:")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//localhost:8080/oauth/authorize?response_type=code&client_id=userservice3&redirect_uri=https://baidu.com")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v('æ³¨æ„å®¢æˆ·ç«¯è·³è½¬åœ°å€éœ€è¦å’Œæ•°æ®åº“ä¸­é…ç½®çš„ä¸€è‡´(ç™¾åº¦çš„ URL https://baidu.com ä¹‹å‰å·²ç»åœ¨æ•°æ®åº“ä¸­æœ‰é…ç½®äº†). è®¿é—®åé¡µé¢ä¼šç›´æ¥è·³è½¬åˆ°ç™»å½•ç•Œé¢, ä½¿ç”¨ç”¨æˆ·å "reader", å¯†ç  "reader" æ¥ç™»å½•:')]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/539b9f65aee52672695a75bb46a59ad5-20230729094013-wzg9ojc.png",alt:""}})]),t._v(" "),s("p",[t._v("ç”±äºåœ¨æ•°æ®åº“ä¸­è®¾ç½®çš„æ˜¯ç¦ç”¨è‡ªåŠ¨æ‰¹å‡†æˆæƒçš„æ¨¡å¼, æ‰€ä»¥ç™»å½•åæ¥åˆ°äº†æ‰¹å‡†ç•Œé¢:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/c1581050e1a83b7105ba124bd963c1d1-20230729094013-qrocyzo.png",alt:""}})]),t._v(" "),s("p",[t._v("ç‚¹å‡»åŒæ„åå¯ä»¥çœ‹åˆ°, æ•°æ®åº“ä¸­ä¹Ÿä¼šäº§ç”Ÿ"),s("strong",[t._v("æˆæƒé€šè¿‡")]),t._v("è®°å½•:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/d1f3332cade2c8221a741614a8468fb8-20230729094013-ae51o8o.png",alt:""}})]),t._v(" "),s("p",[t._v("**ç¬¬äºŒæ­¥, ** å¯ä»¥çœ‹åˆ°æµè§ˆå™¨è½¬åˆ°äº†ç™¾åº¦å¹¶ä¸”æä¾›äº†æˆæƒç :")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//www.baidu.com/?code=XKkHGY")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ•°æ®åº“ä¸­ä¹Ÿè®°å½•äº†æˆæƒç :")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/67e92b6c5de07c5556625d68328fe421-20230729094013-a5ttmcg.png",alt:""}})]),t._v(" "),s("p",[t._v("ç„¶å POST è®¿é—®ä¸‹é¢çš„åœ°å€(code å‚æ•°æ›¿æ¢ä¸ºåˆšæ‰è·å¾—çš„æˆæƒç ):")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//localhost:8080/oauth/token?grant_type=authorization_code&client_id=userservice3&client_secret=1234&code=XKkHGY&redirect_uri=https://baidu.com")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¯ä»¥"),s("strong",[t._v("é€šè¿‡æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œ")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/6f1c72fca896da19d7767645023eb73b-20230729094013-ctnk7rc.png",alt:""}})]),t._v(" "),s("p",[t._v("è™½ç„¶ userservice3 å®¢æˆ·ç«¯å¯ä»¥æœ‰è¯»æƒé™å’Œå†™æƒé™, ä½†æ˜¯å› ä¸ºç™»å½•çš„ç”¨æˆ· reader åªæœ‰è¯»æƒé™, æ‰€ä»¥æœ€åæ‹¿åˆ°ä¹Ÿåªæœ‰è¯»æƒé™.")]),t._v(" "),s("h5",{attrs:{id:"_6-æ¼”ç¤ºæƒé™æ§åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-æ¼”ç¤ºæƒé™æ§åˆ¶"}},[t._v("#")]),t._v(" 6.æ¼”ç¤ºæƒé™æ§åˆ¶")]),t._v(" "),s("p",[t._v("ç°åœ¨æ¥æµ‹è¯•ä¸€ä¸‹ä¹‹å‰å®šä¹‰çš„ä¸¤ä¸ªè´¦å·, ä¹Ÿå°±æ˜¯è¯»è´¦å·å’Œå†™è´¦å·, çœ‹çœ‹å®ƒä»¬çš„æƒé™æ§åˆ¶æ˜¯å¦æœ‰æ•ˆ.")]),t._v(" "),s("p",[t._v("é¦–å…ˆ, æµ‹è¯•ä¸€ä¸‹å®‰å…¨é…ç½®, è®¿é—® /hello ç«¯ç‚¹ä¸éœ€è¦è®¤è¯å¯ä»¥åŒ¿åè®¿é—®:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/64a63a32b2cfc980a79864e0444e3fb8-20230729094013-piz9w03.png",alt:""}})]),t._v(" "),s("p",[t._v("è®¿é—® /user éœ€è¦èº«ä»½è®¤è¯:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/5e93cd1490e64fc787a111d1041ec99e-20230729094013-f6z1ehy.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¸ç®¡ä»¥å“ªç§æ¨¡å¼æ‹¿åˆ°è®¿é—®ä»¤ç‰Œ, ç”¨å…·æœ‰è¯»æƒé™çš„è®¿é—®ä»¤ç‰Œè®¿é—®èµ„æºæœåŠ¡å™¨çš„å¦‚ä¸‹åœ°å€("),s("strong",[t._v("è¯·æ±‚å¤´åŠ å…¥ Authorization: Bearer XXXXXXXXXX, å…¶ä¸­ XXXXXXXXXX ä»£è¡¨è®¿é—®ä»¤ç‰Œ")]),t._v("):")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//localhost:8081/user/")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœ:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/28881cf6cd5371ea514af08b335c1be7-20230729094013-3vgthex.png",alt:""}})]),t._v(" "),s("p",[t._v("ä»¥ POST æ–¹å¼è®¿é—® http://localhost:8081/user/, æ˜¾ç„¶æ˜¯å¤±è´¥çš„:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9a18b3ac8e3f7dd2156654ac34c9157d-20230729094013-22rcact.png",alt:""}})]),t._v(" "),s("p",[t._v("å› ä¸ºè¿™ä¸ªæ¥å£è¦æ±‚æœ‰å†™æƒé™:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAuthority('WRITE')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("æ¢ä¸€ä¸ªå…·æœ‰è¯»å†™æƒé™çš„è®¿é—®ä»¤ç‰Œæ¥è¯•è¯•:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/c240616905db2056c00c4ae569d1f8a5-20230729094013-htj6vuw.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥å‘ç°, æœç„¶è®¿é—®æˆåŠŸäº†. è¿™é‡Œè¾“å‡ºçš„å†…å®¹æ˜¯ Token ä¸­çš„ userDetails é¢å¤–ä¿¡æ¯, è¯´æ˜èµ„æºæœåŠ¡å™¨çš„æƒé™æ§åˆ¶æœ‰æ•ˆ.")]),t._v(" "),s("h5",{attrs:{id:"_7-æ­å»ºå®¢æˆ·ç«¯ç¨‹åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-æ­å»ºå®¢æˆ·ç«¯ç¨‹åº"}},[t._v("#")]),t._v(" 7.æ­å»ºå®¢æˆ·ç«¯ç¨‹åº")]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„æ¼”ç¤ºä½¿ç”¨çš„æ˜¯ Postman, ä¹Ÿå°±æ˜¯æ‰‹åŠ¨ HTTP è¯·æ±‚çš„æ–¹å¼æ¥ç”³è¯·å’Œä½¿ç”¨ Token. æœ€åæ¥æ­å»ºä¸€ä¸ª OAuth å®¢æˆ·ç«¯ç¨‹åºè‡ªåŠ¨å®ç°è¿™ä¸ªè¿‡ç¨‹.")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("me.josephzhu"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("springsecurity101-cloud-oauth2-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("4.0.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("modelVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-oauth2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-thymeleaf"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br")])]),s("p",[t._v("é…ç½®æ–‡ä»¶å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8083")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("servlet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context-path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /ui\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clientId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" userservice3\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clientSecret")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("accessTokenUri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080/oauth/token\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("userAuthorizationUri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080/oauth/authorize\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FOO\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jwt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key-value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("BEGIN PUBLIC KEY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("***")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("END PUBLIC KEY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("thymeleaf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#logging:#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##  level:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##    ROOT: DEBUG")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("å®¢æˆ·ç«¯é¡¹ç›®ç«¯å£ 8082, å‡ ä¸ªéœ€è¦è¯´æ˜çš„åœ°æ–¹:")]),t._v(" "),s("ol",[s("li",[t._v("æœ¬åœ°æµ‹è¯•çš„æ—¶å€™æœ‰ä¸€ä¸ªå‘, ä¹Ÿå°±æ˜¯éœ€è¦é…ç½® "),s("strong",[t._v("context-path")]),t._v(", å¦åˆ™å¯èƒ½ä¼šå‡ºç°å®¢æˆ·ç«¯å’ŒæˆæƒæœåŠ¡å™¨æœåŠ¡ç«¯ Cookie å¹²æ‰°, å¯¼è‡´ CSRF é˜²å¾¡è§¦å‘çš„é—®é¢˜. è¿™ä¸ªé—®é¢˜å‡ºç°åç¨‹åºæ²¡æœ‰ä»»ä½•é”™è¯¯æ—¥å¿—è¾“å‡º, åªæœ‰å¼€å¯ DEBUG æ¨¡å¼åæ‰èƒ½çœ‹åˆ° DEBUG æ—¥å¿—é‡Œæœ‰æç¤º, å› æ­¤è¿™ä¸ªé—®é¢˜éå¸¸éš¾ä»¥æ’æŸ¥.")]),t._v(" "),s("li",[t._v("ä½œä¸º OAuth å®¢æˆ·ç«¯, "),s("strong",[t._v("éœ€è¦é…ç½® OAuth æœåŠ¡ç«¯è·å– Token çš„åœ°å€, æˆæƒ(è·å–æˆæƒç )çš„åœ°å€, éœ€è¦é…ç½®å®¢æˆ·ç«¯çš„ ID, å¯†ç å’ŒæˆæƒèŒƒå›´")]),t._v(".")]),t._v(" "),s("li",[t._v("å› ä¸ºä½¿ç”¨çš„æ˜¯ JWT Token, éœ€è¦é…ç½®å…¬é’¥(å½“ç„¶, å¦‚æœä¸åœ¨è¿™é‡Œç›´æ¥é…ç½®å…¬é’¥çš„è¯, ä¹Ÿå¯ä»¥é…ç½®ä»æˆæƒæœåŠ¡å™¨æœåŠ¡ç«¯è·å–å…¬é’¥).")])]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å¼€å§‹ç¼–ç .")]),t._v(" "),s("p",[t._v("ç¬¬ä¸€æ­¥, å®ç° MVC çš„é…ç½®:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableWebMvc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®RequestContextListenerç”¨äºå¯ç”¨session scopeçš„Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestContextListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestContextListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestContextListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®indexè·¯å¾„çš„é¦–é¡µController")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addViewControllers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ViewControllerRegistry")]),t._v(" registry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        registry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addViewController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setViewName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"forward:/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        registry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addViewController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("è¿™é‡Œåšäº†ä¸¤ä»¶äº‹æƒ…:")]),t._v(" "),s("ul",[s("li",[t._v("é…ç½® RequestContextListener, ç”¨äºå¯ç”¨ session scope çš„ Bean;")]),t._v(" "),s("li",[t._v("é…ç½®äº† index è·¯å¾„çš„é¦–é¡µ Controller.")])]),t._v(" "),s("p",[t._v("ç¬¬äºŒæ­¥, å®ç°å®‰å…¨æ–¹é¢çš„é…ç½®:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSecurityConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSecurityConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /è·¯å¾„å’Œ/loginè·¯å¾„å…è®¸è®¿é—®, å…¶å®ƒè·¯å¾„éœ€è¦èº«ä»½è®¤è¯åæ‰èƒ½è®¿é—®")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Overrideprotected")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizeRequests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("antMatchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login/**"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("permitAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("anyRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("è¿™é‡Œå®ç°çš„æ˜¯ / è·¯å¾„å’Œ /login è·¯å¾„å…è®¸è®¿é—®, å…¶å®ƒè·¯å¾„éœ€è¦èº«ä»½è®¤è¯åæ‰èƒ½è®¿é—®.")]),t._v(" "),s("p",[t._v("ç¬¬ä¸‰æ­¥åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DemoController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2RestTemplate")]),t._v(" restTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¼”ç¤ºç™»å½•åæ‰èƒ½è®¿é—®çš„å®‰å…¨é¡µé¢")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/securedPage"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("securedPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"securedPage"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authentication"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¼”ç¤ºé€šè¿‡OAuth2RestTemplateè°ƒç”¨å—ä¿æŠ¤èµ„æº")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/remoteCall"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remoteCall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" responseEntity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" restTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getForEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8081/user/name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                                          "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" responseEntity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("è¿™é‡Œå®ç°äº†ä¸¤ä¸ªåŠŸèƒ½:")]),t._v(" "),s("p",[t._v("securedPage é¡µé¢, å®ç°çš„åŠŸèƒ½æ˜¯, æŠŠç”¨æˆ·ä¿¡æ¯ä½œä¸ºæ¨¡å‹ä¼ å…¥äº†è§†å›¾, è¿™æ ·æ‰“å¼€é¡µé¢åå°±èƒ½æ˜¾ç¤ºç”¨æˆ·åå’Œæƒé™.")]),t._v(" "),s("p",[t._v("remoteCall æ¥å£, å®ç°çš„åŠŸèƒ½æ˜¯, é€šè¿‡å¼•å…¥ OAuth2RestTemplate, åœ¨ç™»å½•åå°±å¯ä»¥ä½¿ç”¨å‡­æ®ç›´æ¥ä»å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨æ‹¿èµ„æº, ä¸éœ€è¦ç¹çåœ°å®ç°è·å¾—è®¿é—®ä»¤ç‰Œ, åœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥è®¿é—®ä»¤ç‰Œçš„è¿‡ç¨‹.")]),t._v(" "),s("p",[t._v("ç¬¬å››æ­¥, é…ç½®ä¸€ä¸‹åˆšæ‰ç”¨åˆ°çš„ OAuth2RestTemplate Bean, å¹¶å¯ç”¨ OAuth2Sso åŠŸèƒ½:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableOAuth2Sso")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªæ³¨è§£åŒ…å«äº†@EnableOAuth2Client")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuthClientConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰äº†OAuth2RestTemplate, ç½‘ä¸Šä¸€äº›æ¯”è¾ƒè€çš„èµ„æ–™ç»™å‡ºçš„æ˜¯æ‰‹åŠ¨è¯»å–é…ç½®æ–‡ä»¶æ¥å®ç°, ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€æ–°ç‰ˆæœ¬å·²ç»å¯ä»¥è‡ªåŠ¨æ³¨å…¥OAuth2ProtectedResourceDetails")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2RestTemplate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("oauth2RestTemplate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2ClientContext")]),t._v(" oAuth2ClientContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                 "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2ProtectedResourceDetails")]),t._v(" details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2RestTemplate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oAuth2ClientContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("ç¬¬äº”æ­¥, å®ç°é¦–é¡µ:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-sm-12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Spring Security SSO Client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("btn btn-primary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("securedPage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Login"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("ä»¥åŠç™»å½•åæ‰èƒ½è®¿é—®çš„ securedPage é¡µé¢:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-sm-12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Secured Page"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    Welcome, "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("th:")]),t._v("text")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${authentication.name}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Name"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    Your authorities are "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("th:")]),t._v("text")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${authentication.authorities}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("authorities"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("å®¢æˆ·ç«¯ç¨‹åºæ­å»ºå¥½ä¹‹å, å…ˆæ¥æµ‹è¯•ä¸€ä¸‹"),s("strong",[t._v("å•ç‚¹ç™»å½•")]),t._v("çš„åŠŸèƒ½. å¯åŠ¨å®¢æˆ·ç«¯é¡¹ç›®, æ‰“å¼€æµè§ˆå™¨è®¿é—®:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("http://localhost:8082/ui/securedPage\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å¯ä»¥çœ‹åˆ°, é¡µé¢è‡ªåŠ¨è½¬åˆ°äº†æˆæƒæœåŠ¡å™¨(8080 ç«¯å£)çš„ç™»å½•é¡µé¢:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/00e5ca3792a65ff8b5f17aa9148bf549-20230729094013-9te8r2f.png",alt:""}})]),t._v(" "),s("p",[t._v("ç™»å½•åæ˜¾ç¤ºäº†å½“å‰ç”¨æˆ·åå’Œæƒé™:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/1e97d1cd34139615fdf92aeaed3194e7-20230729094013-k72m7m8.png",alt:""}})]),t._v(" "),s("p",[t._v("å†å¯åŠ¨"),s("strong",[t._v("å¦ä¸€ä¸ªå®¢æˆ·ç«¯ç½‘ç«™")]),t._v(", ç«¯å£æ”¹ä¸º 8083, ç„¶åè®¿é—®åŒæ ·çš„åœ°å€:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/8ff71377153e47ad6791713f883b1af8-20230729094013-9xf6m5w.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("å¯ä»¥çœ‹åˆ°ç›´æ¥æ˜¯ç™»å½•çŠ¶æ€, å•ç‚¹ç™»å½•æµ‹è¯•æˆåŠŸ")]),t._v(". æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿? å…¶å®, ä¸ºäº†è¾¾æˆå•ç‚¹ç™»å½•çš„æ•ˆæœ, ç¨‹åºåœ¨èƒŒåè‡ªåŠ¨å®ç°äº†å¤šæ¬¡ 302 é‡å®šå‘, æ•´ä¸ªæµç¨‹ä¸º:")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("http://localhost:8083/ui/securedPage ->\nhttp://localhost:8083/ui/login ->\nhttp://localhost:8080/oauth/authorize?client_id=userservice3&redirect_uri=http://localhost:8083/ui/login&response_type=code&scope=FOO&state=Sobjqe ->\nhttp://localhost:8083/ui/login?code=CDdvHa&state=Sobjqe ->\nhttp://localhost:8083/ui/securedPage\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("æ¼”ç¤ºå®¢æˆ·ç«¯è¯·æ±‚èµ„æºæœåŠ¡å™¨èµ„æºè¿˜è®°å¾—å—, åœ¨å‰é¢æ­å»ºå®¢æˆ·ç«¯ç¨‹åºä¸­, è¿˜å®šä¹‰äº†ä¸€ä¸ª remoteCall æ¥å£, ç›´æ¥ä½¿ç”¨ OAuth2RestTemplate æ¥è®¿é—®è¿œç¨‹èµ„æºæœåŠ¡å™¨çš„èµ„æº. ç°åœ¨æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªæ¥å£æ˜¯å¦å¯ä»¥å®ç°è‡ªåŠ¨çš„ OAuth æµç¨‹. è®¿é—®:")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("//localhost:8082/ui/remoteCall")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä¼šå…ˆè½¬åˆ°æˆæƒæœåŠ¡å™¨ç™»å½•, ç™»å½•åè‡ªåŠ¨è·³è½¬å›æ¥:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/2af275ce7e8d377c6ce95d1adb014e39-20230729094013-cqj22qf.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†ç”¨æˆ·å, å¯¹åº”çš„èµ„æºæœåŠ¡å™¨æœåŠ¡ç«¯æ¥å£æ˜¯:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAuthority('READ') or hasAuthority('WRITE')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OAuth2Authentication")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" authentication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("æ¢ä¸€ä¸ª writer ç”¨æˆ·ç™»å½•è¯•è¯•, ä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®çš„è¾“å‡º:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/db773012ebaaced230400bb40b7ca386-20230729094013-hsxsl38.png",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"_8-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-æ€»ç»“"}},[t._v("#")]),t._v(" 8.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚å®Œæ•´æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Spring Cloud çš„ OAuth 2.0 ç»„ä»¶åŸºäºä¸‰ä¸ªç¨‹åºè§’è‰²(æˆæƒæœåŠ¡å™¨, å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯)å®ç°ä¸‰ç§ OAuth 2.0 çš„æˆæƒè®¸å¯ç±»å‹(èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯, å®¢æˆ·ç«¯å‡­æ®è®¸å¯å’Œæˆæƒç è®¸å¯).")]),t._v(" "),s("p",[t._v("å…ˆæ¼”ç¤ºäº†ä¸‰ç§æˆæƒè®¸å¯ç±»å‹çš„æ‰‹åŠ¨æµç¨‹, ç„¶åä¹Ÿæ¼”ç¤ºäº†å¦‚ä½•å®ç°æƒé™æ§åˆ¶å’Œå•ç‚¹ç™»å½•, ä»¥åŠå¦‚ä½•ä½¿ç”¨å®¢æˆ·ç«¯ç¨‹åºæ¥å®ç°è‡ªåŠ¨çš„ OAuth 2.0 æµç¨‹.")]),t._v(" "),s("h4",{attrs:{id:"æ¶æ„æ¡ˆä¾‹-åŸºäºoauth-2-0-jwtçš„å¾®æœåŠ¡å‚è€ƒæ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¶æ„æ¡ˆä¾‹-åŸºäºoauth-2-0-jwtçš„å¾®æœåŠ¡å‚è€ƒæ¶æ„"}},[t._v("#")]),t._v(" æ¶æ„æ¡ˆä¾‹-åŸºäºOAuth 2.0/JWTçš„å¾®æœåŠ¡å‚è€ƒæ¶æ„")]),t._v(" "),s("p",[t._v("å‰é¢å‡ è®²ä¸€èµ·å­¦ä¹ äº† OAuth 2.0 åœ¨å¼€æ”¾ç¯å¢ƒä¸­çš„ä½¿ç”¨è¿‡ç¨‹. é‚£ä¹ˆ "),s("strong",[t._v("OAuth 2.0 ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨å¼€æ”¾çš„åœºæ™¯ä¸­, å®ƒå¯ä»¥åº”ç”¨åˆ°ä»»ä½•éœ€è¦æˆæƒ / é‰´æƒçš„åœ°æ–¹, åŒ…æ‹¬å¾®æœåŠ¡")]),t._v(".")]),t._v(" "),s("p",[t._v("ä»å•ä½“åˆ°å¾®æœåŠ¡æ¶æ„çš„æ¼”è¿›, æ˜¯å½“å‰ä¼ä¸šæ•°å­—åŒ–è½¬å‹çš„ä¸€å¤§è¶‹åŠ¿. OAuth 2.0 æ˜¯å½“å‰ä¸šç•Œæ ‡å‡†çš„æˆæƒåè®®, å®ƒçš„æ ¸å¿ƒæ˜¯è‹¥å¹²ä¸ªé’ˆå¯¹ä¸åŒåœºæ™¯çš„ä»¤ç‰Œé¢å‘å’Œç®¡ç†æµç¨‹; è€Œ JWT æ˜¯ä¸€ç§è½»é‡çº§, è‡ªåŒ…å«çš„ä»¤ç‰Œ, å¯ç”¨äºåœ¨å¾®æœåŠ¡é—´å®‰å…¨åœ°ä¼ é€’ç”¨æˆ·ä¿¡æ¯.")]),t._v(" "),s("p",[t._v("è™½ç„¶æœ‰ä¸å°‘ä¼ä¸šå·²ç»éƒ¨åˆ†æˆ–å…¨éƒ¨è½¬å‹åˆ°å¾®æœåŠ¡æ¶æ„, ä½†æ˜¯åœ¨æˆæƒè®¤è¯æœºåˆ¶æ–¹é¢, å®ƒä»¬ä¸€èˆ¬éƒ½æ˜¯å®šåˆ¶è‡ªç ”çš„, æ¯”æ–¹è¯´æºç¨‹å’Œæ‹æ‹è´·çš„ä»¤ç‰ŒæœåŠ¡. ä¹‹æ‰€ä»¥å®šåˆ¶è‡ªç ”, ä¸»è¦åŸå› åœ¨äºæ ‡å‡†çš„ OAuth 2.0 åè®®ç›¸å¯¹æ¯”è¾ƒå¤æ‚, é—¨æ§›ä¹Ÿæ¯”è¾ƒé«˜. å®šåˆ¶è‡ªç ”å›ºç„¶å¯ä»¥æš‚æ—¶è§£å†³ä¼ä¸šçš„é—®é¢˜, ä½†æ˜¯ä¸å…·å¤‡é€šç”¨æ€§, ä¹Ÿå¯èƒ½æœ‰å¾ˆå¤šæ½œåœ¨çš„å®‰å…¨é£é™©.")]),t._v(" "),s("p",[t._v("**é‚£ä¹ˆ, åˆ°åº•åº”è¯¥å¦‚ä½•å°†è¡Œä¸šæ ‡å‡†çš„ OAuth 2.0/JWT å’Œå¾®æœåŠ¡é›†æˆèµ·æ¥å‘¢, åˆæœ‰æ²¡æœ‰å¯è½åœ°çš„å‚è€ƒæ¶æ„å‘¢? **")]),t._v(" "),s("p",[t._v('é’ˆå¯¹è¿™ä¸ªé—®é¢˜, æœ¬èŠ‚æ¥åˆ†äº«ä¸€ç§å¯è½åœ°çš„å‚è€ƒæ¶æ„. è¿™ä¸ªæ¶æ„çš„æ€æƒ³æºäº MICRO-SERVICES ARCHITECTURE WITH OAUTH2 AND JWT â€“ PART 1 â€“ OVERVIEW è¿™ç¯‡æ–‡ç« . æ ¹æ®åŸä½œè€… Thijs çš„æè¿°, ä»–æå‡ºçš„æ¶æ„å·²ç»åœ¨ä¼ä¸šè½åœ°æ¶æ„äº†. å¦‚æœä½ è¿˜æƒ³è·å¾—å…³äºåŸæ¶æ„çš„æ›´å¤šç»†èŠ‚, å»ºè®®è¿›ä¸€æ­¥å‚è€ƒ "What is PKCE?" è¿™ç¯‡æ–‡ç« . Thijs ç»™å‡ºçš„æ¶æ„ç¡®å®å…·æœ‰å¯è½åœ°æ€§å’Œå‚è€ƒä»·å€¼, ä½†æ˜¯ä»–çš„æ¶æ„é‡Œé¢å¯¹æŸäº›å¾®æœåŠ¡å±‚æ¬¡çš„å‘½å, ä¾‹å¦‚ BFF å’Œ Facade å±‚, å’Œç›®å‰ä¸»æµçš„å¾®æœåŠ¡æ¶æ„ä¸ç¬¦, è¿˜æœ‰ä»–çš„æ¶æ„åº”è¯¥æ˜¯æ‰‹ç»˜, ä¸å¤Ÿæ¸…æ™°, ä¹Ÿä¸å®¹æ˜“ç†è§£.')]),t._v(" "),s("p",[t._v("å› æ­¤è¿™é‡Œä¼šæ”¹è¿› Thijs ç»™å‡ºçš„æ¶æ„, å¹¶è¡¥å……é’ˆå¯¹ä¸åŒåœºæ™¯çš„æµç¨‹. ä¸ºäº†æ–¹ä¾¿ç†è§£, åœ¨æ¥ä¸‹æ¥çš„è®²è¿°ä¸­, ä¼šå‡å®šæœ‰è¿™æ ·ä¸€å®¶å« ACME çš„æ–°é›¶å”®å…¬å¸, å®ƒå·²ç»å®ç°äº†æ•°å­—åŒ–è½¬å‹, å¾®æœåŠ¡ç”µå•†å¹³å°æ˜¯æ”¯æŒä¸šåŠ¡è¿ä½œçš„æ ¸å¿ƒåŸºç¡€è®¾æ–½.")]),t._v(" "),s("p",[t._v("åœ¨ä¸šåŠ¡æ¶æ„æ–¹é¢, ACME æœ‰è¿‘åƒå®¶çº¿ä¸‹é—¨åº—, è¿™äº›é—¨åº—é€šè¿‡ POS ç³»ç»Ÿå’Œç”µå•†å¹³å°å¯¹æ¥. å…¬å¸è¿˜æœ‰ä¸€äº›ç‰©æµå‘è´§ä¸­å¿ƒ, æ‹£é€‰(Order Picking)ç³»ç»Ÿä¹Ÿè¦å’Œç”µå•†å¹³å°å¯¹æ¥. å¦å¤–å…¬å¸è¿˜æœ‰å¾ˆå¤šé€è´§å¸æœº, é€šè¿‡ App å’Œç”µå•†å¹³å°å¯¹æ¥. å½“ç„¶, ACME è¿˜æœ‰ä¸€äº›ç”µå•†ç½‘ç«™, åšçº¿ä¸Šè¥é”€å’Œé”€å”®, è¿™äº›ç½‘ç«™æ˜¯ç”µå•†å¹³å°çš„ä¸»è¦æµé‡æº.")]),t._v(" "),s("p",[t._v("è™½ç„¶æ”¯æŒ ACME å…¬å¸ä¸šåŠ¡è¿ä½œçš„æŠ€æœ¯å¹³å°å¾ˆå¤æ‚, ä½†æ˜¯å®ƒçš„æ ¸å¿ƒå¯ä»¥ç”¨ä¸€ä¸ªç®€åŒ–çš„å¾®æœåŠ¡æ¶æ„å›¾æ¥æè¿°:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/810fb94d0f8b50527baca062606c2c9e-20230729094013-3ydvuzb.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹å‡º, è¿™ä¸ªå¾®æœåŠ¡æ¶æ„æ˜¯è¿è¡Œåœ¨ "),s("strong",[t._v("Kubernetes")]),t._v(" é›†ç¾¤ä¸­çš„. å½“ç„¶äº†, è¿™ä¸ªæ¶æ„å®é™…ä¸Šå¹¶ä¸ä¸€å®šéœ€è¦ Kubernetes ç¯å¢ƒ, ç”¨ä¼ ç»Ÿæ•°æ®ä¸­å¿ƒä¹Ÿå¯ä»¥. å¦å¤–å®ƒçš„"),s("strong",[t._v("æ•´ä½“è®¤è¯æˆæƒæ¶æ„æ˜¯åŸºäº OAuth 2.0/JWT")]),t._v(" å®ç°çš„.")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥æŒ‰è¿™ä¸ªå¾®æœåŠ¡æ¶æ„çš„åˆ†å±‚æ–¹å¼, ä¾æ¬¡åˆ†æä¸‹å®ƒçš„æ¯ä¸€å±‚, "),s("strong",[t._v("ä»¥åŠåº”ç”¨è®¤è¯ / æˆæƒå’ŒæœåŠ¡è°ƒç”¨çš„ç›¸å…³æµç¨‹")]),t._v(". è¿™æ ·ä¸ä»…å¯ä»¥ç†è§£ä¸€ä¸ªå…¸å‹çš„å¾®æœåŠ¡æ¶æ„è¯¥å¦‚ä½•åˆ†å±‚, è¿˜å¯ä»¥å¼„æ¸…æ¥š OAuth 2.0/JWT è¯¥å¦‚ä½•ä¸å¾®æœåŠ¡è¿›è¡Œé›†æˆ.")]),t._v(" "),s("h5",{attrs:{id:"_1-å¾®æœåŠ¡åˆ†å±‚æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¾®æœåŠ¡åˆ†å±‚æ¶æ„"}},[t._v("#")]),t._v(" 1.å¾®æœåŠ¡åˆ†å±‚æ¶æ„")]),t._v(" "),s("p",[t._v("ACME å…¬å¸çš„å¾®æœåŠ¡æ¶æ„, å¤§è‡´å¯ä»¥åˆ†ä¸º "),s("strong",[t._v("Nginx åå‘ä»£ç†å±‚, Web åº”ç”¨å±‚, Gateway ç½‘å…³å±‚, BEF å±‚å’Œé¢†åŸŸæœåŠ¡å±‚, è¿˜åŒ…æ‹¬ä¸€ä¸ª IDP æœåŠ¡")]),t._v(". æ€»ä½“ä¸Šè®², è¿™æ˜¯ä¸€ç§ç›®å‰ä¸»æµçš„å¾®æœåŠ¡æ¶æ„åˆ†å±‚æ–¹å¼, æ¯ä¸€å±‚èŒè´£å•ä¸€, æ¸…æ™°.")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å…·ä½“çœ‹çœ‹æ¯ä¸€å±‚çš„ä¸»è¦åŠŸèƒ½.")]),t._v(" "),s("h6",{attrs:{id:"_1-nginxåå‘ä»£ç†å±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-nginxåå‘ä»£ç†å±‚"}},[t._v("#")]),t._v(" (1)Nginxåå‘ä»£ç†å±‚")]),t._v(" "),s("p",[t._v("é¦–å…ˆ, Nginx é›†ç¾¤æ˜¯æ•´ä¸ªå¹³å°çš„"),s("strong",[t._v("æµé‡å…¥å£")]),t._v(". Nginx æ˜¯ 7 å±‚ HTTP åå‘ä»£ç†, ä¸»è¦åŠŸèƒ½æ˜¯å®ç°åå‘è·¯ç”±, ä¹Ÿå°±æ˜¯"),s("strong",[t._v("å°†å¤–éƒ¨æµé‡æ ¹æ® HOST ä¸»æœºå¤´æˆ–è€… PATH, è·¯ç”±åˆ°ä¸åŒçš„åç«¯, æ¯”æ–¹è¯´è·¯ç”±åˆ° Web åº”ç”¨, æˆ–è€…ç›´æ¥åˆ°ç½‘å…³ Gateway")]),t._v(".")]),t._v(" "),s("p",[t._v("**åœ¨ Kubernetes ä½“ç³»ä¸­, Nginx æ˜¯å’Œ Ingress Controller(å…¥å£æ§åˆ¶å™¨)é…åˆå·¥ä½œçš„(æ€»ç§°ä¸º Nginx Ingress), Ingress Controller æ”¯æŒé€šè¿‡ Ingress Rules, é…ç½® Nginx çš„è·¯ç”±è§„åˆ™. **")]),t._v(" "),s("h6",{attrs:{id:"_2-webåº”ç”¨å±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-webåº”ç”¨å±‚"}},[t._v("#")]),t._v(" (2)Webåº”ç”¨å±‚")]),t._v(" "),s("p",[t._v("è¿™ä¸€å±‚ä¸»è¦æ˜¯ä¸€äº› Web åº”ç”¨, "),s("strong",[t._v("html/css/js ç­‰èµ„æº")]),t._v("å°±ä½åœ¨è¿™ä¸€å±‚.")]),t._v(" "),s("p",[t._v("Web æœåŠ¡å±‚é€šå¸¸é‡‡ç”¨ä¼ ç»Ÿçš„ "),s("strong",[t._v("Web MVC + æ¨¡ç‰ˆå¼•æ“æ–¹å¼å¤„ç†")]),t._v(", å¯ä»¥å®ç°æœåŠ¡å™¨ç«¯æ¸²æŸ“, ä¹Ÿå¯ä»¥é‡‡ç”¨å•é¡µ SPA æ–¹å¼. è¿™ä¸€å±‚ä¸»è¦ç”±å…¬å¸çš„å‰ç«¯å›¢é˜Ÿè´Ÿè´£, é€šå¸¸ä¼šä½¿ç”¨ Node.js æŠ€æœ¯æ ˆæ¥å®ç°, ä¹Ÿå¯ä»¥é‡‡ç”¨ Spring MVC æŠ€æœ¯æ ˆå®ç°. å…·ä½“æ€ä¹ˆå®ç°, è¦çœ‹å…¬å¸çš„å‰ç«¯å›¢é˜Ÿæ›´æ“…é•¿å“ªç§æŠ€æœ¯. "),s("strong",[t._v("å½“è¿™ä¸€å±‚éœ€è¦åå°æ•°æ®æ—¶, å¯ä»¥é€šè¿‡ç½‘å…³è°ƒç”¨åå°æœåŠ¡è·å–æ•°æ®")]),t._v(".")]),t._v(" "),s("h6",{attrs:{id:"_3-gatewayç½‘å…³å±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-gatewayç½‘å…³å±‚"}},[t._v("#")]),t._v(" (3)Gatewayç½‘å…³å±‚")]),t._v(" "),s("p",[s("strong",[t._v("è¿™ä¸€å±‚æ˜¯å¾®æœåŠ¡è°ƒç”¨æµé‡çš„å…¥å£")]),t._v(". ç½‘å…³çš„ä¸»è¦èŒè´£æ˜¯åå‘è·¯ç”±, ä¹Ÿå°±æ˜¯å°†å‰ç«¯è¯·æ±‚æ ¹æ® HOST ä¸»æœºå¤´, æˆ–è€… PATH, æˆ–è€…æŸ¥è¯¢å‚æ•°, "),s("strong",[t._v("è·¯ç”±åˆ°åç«¯ç›®æ ‡å¾®æœåŠ¡")]),t._v("(æ¯”å¦‚, å›¾ä¸­çš„ IDP/BFF æˆ–è€…ç›´æ¥åˆ°é¢†åŸŸæœåŠ¡).")]),t._v(" "),s("p",[t._v("å¦å¤–, ç½‘å…³è¿˜æ‰¿æ‹…ä¸¤ä¸ªé‡è¦çš„å®‰å…¨èŒè´£:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ä¸€ä¸ªæ˜¯ä»¤ç‰Œçš„æ ¡éªŒå’Œè½¬æ¢")]),t._v(", å°†å‰ç«¯ä¼ é€’è¿‡æ¥çš„ OAuth 2.0 è®¿é—®ä»¤ç‰Œ, é€šè¿‡è°ƒç”¨ IDP è¿›è¡Œæ ¡éªŒ, å¹¶è½¬æ¢ä¸ºåŒ…å«ç”¨æˆ·å’Œæƒé™ä¿¡æ¯çš„ JWT ä»¤ç‰Œ, å†å°† JWT ä»¤ç‰Œå‘åå°å¾®æœåŠ¡ä¼ é€’.")]),t._v(" "),s("li",[s("strong",[t._v("å¦å¤–ä¸€ä¸ªæ˜¯æƒé™æ ¡éªŒ")]),t._v(", ç½‘å…³çš„è·¯ç”±è¡¨å¯ä»¥å’Œ OAuth 2.0 çš„ Scope è¿›è¡Œå…³è”. è¿™æ ·ç½‘å…³æ ¹æ®è¯·æ±‚ä»¤ç‰Œä¸­çš„æƒé™èŒƒå›´ Scope, å°±å¯ä»¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦å…·æœ‰è°ƒç”¨åå°æœåŠ¡çš„æƒé™.")])]),t._v(" "),s("p",[t._v("å¦å¤–, ç½‘å…³è¿˜éœ€æ‰¿æ‹…é›†ä¸­å¼é™æµ, æ—¥å¿—ç›‘æ§, ä»¥åŠæ”¯æŒ CORS ç­‰åŠŸèƒ½.")]),t._v(" "),s("p",[t._v("å¯¹äºç½‘å…³å±‚çš„æŠ€æœ¯é€‰å‹, å½“å‰ä¸»æµçš„ API ç½‘å…³äº§å“, åƒ Netflix å¼€æºçš„ Zuul, Spring Cloud Gateway ç­‰, éƒ½å¯ä»¥è€ƒè™‘.")]),t._v(" "),s("h6",{attrs:{id:"_4-idpæœåŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-idpæœåŠ¡"}},[t._v("#")]),t._v(" (4)IDPæœåŠ¡")]),t._v(" "),s("p",[t._v("IDP æ˜¯ Identity Provider çš„ç®€ç§°, ä¸»è¦è´Ÿè´£ OAuth 2.0 "),s("strong",[t._v("æˆæƒåè®®å¤„ç†")]),t._v(", OAuth 2.0 å’Œ JWT "),s("strong",[t._v("ä»¤ç‰Œé¢å‘å’Œç®¡ç†, ä»¥åŠç”¨æˆ·è®¤è¯")]),t._v("ç­‰åŠŸèƒ½. IDP ä½¿ç”¨åå°çš„ Login-Service è¿›è¡Œç”¨æˆ·è®¤è¯.")]),t._v(" "),s("p",[t._v("å¯¹äº IDP çš„æŠ€æœ¯é€‰å‹, å½“å‰ä¸»æµçš„ "),s("strong",[t._v("Spring Security OAuth")]),t._v(", æˆ–è€… RedHat å¼€æºçš„ KeyCloak, éƒ½å¯ä»¥è€ƒè™‘. å…¶ä¸­, Spring Security OAuth æ˜¯ä¸€ä¸ª OAuth 2.0 çš„å¼€å‘æ¡†æ¶, é€‚åˆä¼ä¸šå®šåˆ¶. KeyCloak åˆ™æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ OAuth 2.0/OIDC äº§å“.")]),t._v(" "),s("h6",{attrs:{id:"_5-bffå±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-bffå±‚"}},[t._v("#")]),t._v(" (5)BFFå±‚")]),t._v(" "),s("p",[t._v("BFF æ˜¯ Backend for Frontend çš„ç®€ç§°, ä¸»è¦å®ç°"),s("strong",[t._v("å¯¹åå°é¢†åŸŸæœåŠ¡çš„èšåˆ")]),t._v("(Aggregation, æœ‰ç‚¹ç±»ä¼¼æ•°æ®åº“çš„ Join)åŠŸèƒ½, åŒæ—¶ä¸ºä¸åŒçš„å‰ç«¯ä½“éªŒ(PC/Mobile/ å¼€æ”¾å¹³å°ç­‰)æä¾›æ›´å‹å¥½çš„ API å’Œæ•°æ®æ ¼å¼.")]),t._v(" "),s("p",[t._v("BFF ä¸­å¯ä»¥åŒ…å«ä¸€äº›ä¸šåŠ¡é€»è¾‘, ç”šè‡³è¿˜å¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®åº“å­˜å‚¨. é€šå¸¸, BFF è¦è°ƒç”¨ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„é¢†åŸŸæœåŠ¡, ç”šè‡³è¿˜å¯èƒ½è°ƒç”¨å…¶å®ƒçš„ BFF(å½“ç„¶ä¸€èˆ¬å¹¶ä¸å»ºè®®è¿™æ ·è°ƒç”¨, å› ä¸ºè¿™æ ·ä¼šè®©è°ƒç”¨å…³ç³»å˜å¾—é”™ç»¼å¤æ‚, æ— æ³•ç†è§£).")]),t._v(" "),s("p",[t._v("å¦‚æœ BFF éœ€è¦è·å–è°ƒç”¨ç”¨æˆ·æˆ–è€… OAuth 2.0 Scope ç›¸å…³ä¿¡æ¯, å®ƒå¯ä»¥ä»ä¼ é€’è¿‡æ¥çš„ JWT ä»¤ç‰Œä¸­ç›´æ¥è·å–.")]),t._v(" "),s("p",[t._v("BFF æœåŠ¡å¯ä»¥ç”¨ Node.js å¼€å‘, ä¹Ÿå¯ä»¥ç”¨ Java/Spring ç­‰æ¡†æ¶å¼€å‘.")]),t._v(" "),s("h6",{attrs:{id:"_6-é¢†åŸŸæœåŠ¡å±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-é¢†åŸŸæœåŠ¡å±‚"}},[t._v("#")]),t._v(" (6)é¢†åŸŸæœåŠ¡å±‚")]),t._v(" "),s("p",[t._v("é¢†åŸŸæœåŠ¡å±‚åœ¨æ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„åº•å±‚. è¿™äº›æœåŠ¡åŒ…å«ä¸šåŠ¡é€»è¾‘, é€šå¸¸æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“å­˜å‚¨, è¿˜å¯ä»¥æ ¹æ®éœ€è¦è°ƒç”¨å¤–éƒ¨çš„æœåŠ¡.")]),t._v(" "),s("p",[t._v("æ ¹æ®å¾®æœåŠ¡åˆ†å±‚åŸåˆ™, "),s("strong",[t._v("é¢†åŸŸæœåŠ¡ç¦æ­¢è°ƒç”¨å…¶å®ƒçš„é¢†åŸŸæœåŠ¡")]),t._v(", æ›´ä¸å…è®¸åå‘è°ƒç”¨ BFF æœåŠ¡. è¿™æ ·åšæ˜¯ä¸ºäº†ä¿æŒå¾®æœåŠ¡èŒè´£å•ä¸€(Single Responsibility)å’Œæœ‰ç•Œä¸Šä¸‹æ–‡(Bounded Context), é¿å…å¤æ‚çš„é¢†åŸŸä¾èµ–. é¢†åŸŸæœåŠ¡æ˜¯ç‹¬ç«‹çš„å¼€å‘, æµ‹è¯•å’Œå‘å¸ƒå•ä½. åœ¨ç”µå•†é¢†åŸŸ, å¸¸è§çš„é¢†åŸŸæœåŠ¡æœ‰ç”¨æˆ·æœåŠ¡, å•†å“æœåŠ¡, è®¢å•æœåŠ¡å’Œæ”¯ä»˜æœåŠ¡ç­‰.")]),t._v(" "),s("p",[t._v("å’Œ BFF ä¸€æ ·, å¦‚æœé¢†åŸŸæœåŠ¡éœ€è¦è·å–è°ƒç”¨ç”¨æˆ·æˆ–è€… OAuth 2.0 Scope ç›¸å…³ä¿¡æ¯, å®ƒå¯ä»¥ä»ä¼ é€’è¿‡æ¥çš„ JWT ä»¤ç‰Œä¸­ç›´æ¥è·å–.")]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°, "),s("strong",[t._v("é¢†åŸŸæœåŠ¡å’Œ BFF æœåŠ¡éƒ½æ˜¯æ— çŠ¶æ€")]),t._v("çš„, å®ƒä»¬æœ¬èº«å¹¶ä¸å­˜å‚¨ç”¨æˆ·çŠ¶æ€, è€Œæ˜¯"),s("strong",[t._v("é€šè¿‡ä¼ é€’è¿‡æ¥çš„ JWT æ•°æ®è·å–ç”¨æˆ·ä¿¡æ¯")]),t._v(". æ‰€ä»¥åœ¨æ•´ä¸ªæ¶æ„ä¸­, å¾®æœåŠ¡éƒ½æ˜¯æ— çŠ¶æ€, å¯ä»¥æŒ‰éœ€æ°´å¹³æ‰©å±•çš„, çŠ¶æ€è¦ä¹ˆå­˜åœ¨ç”¨æˆ·ç«¯(æµè§ˆå™¨æˆ–è€…æ‰‹æœº App ä¸­), è¦ä¹ˆå­˜åœ¨é›†ä¸­çš„æ•°æ®åº“ä¸­.")]),t._v(" "),s("h5",{attrs:{id:"_2-oauth-2-0-jwtå¦‚ä½•ä¸å¾®æœåŠ¡è¿›è¡Œé›†æˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-oauth-2-0-jwtå¦‚ä½•ä¸å¾®æœåŠ¡è¿›è¡Œé›†æˆ"}},[t._v("#")]),t._v(" 2.OAuth 2.0/JWTå¦‚ä½•ä¸å¾®æœåŠ¡è¿›è¡Œé›†æˆ?")]),t._v(" "),s("p",[t._v("ä»¥ä¸Šå°±æ˜¯ ACME å…¬å¸çš„æ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„å±‚æ¬¡äº†. è¿™ä¸ªåˆ†å±‚æ¶æ„, å¯¹äºå¤§éƒ¨åˆ†çš„äº’è”ç½‘ä¸šåŠ¡ç³»ç»Ÿåœºæ™¯éƒ½é€‚ç”¨. å› æ­¤å¦‚æœä½ æ˜¯ä¸€å®¶ä¼ä¸šçš„æ¶æ„å¸ˆ, éœ€è¦è®¾è®¡ä¸€å¥—å¾®æœåŠ¡æ¶æ„, å®Œå…¨å¯ä»¥å‚è€ƒå®ƒæ¥è®¾è®¡. æ¥ä¸‹æ¥å†æ¼”ç¤ºå‡ ä¸ªå…¸å‹çš„"),s("strong",[t._v("åº”ç”¨è®¤è¯åœºæ™¯")]),t._v(", ä»¥åŠç›¸åº”çš„æœåŠ¡è°ƒç”¨æµç¨‹, æ¥å¸®åŠ©ä½ ç†è§£ OAuth 2.0/JWT æ˜¯å¦‚ä½•å’Œå¾®æœåŠ¡è¿›è¡Œé›†æˆçš„.")]),t._v(" "),s("h6",{attrs:{id:"_1-åœºæ™¯1-ç¬¬ä¸€æ–¹webåº”ç”¨-èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åœºæ™¯1-ç¬¬ä¸€æ–¹webåº”ç”¨-èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼"}},[t._v("#")]),t._v(" (1)åœºæ™¯1:ç¬¬ä¸€æ–¹Webåº”ç”¨+èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼")]),t._v(" "),s("p",[t._v("è¿™ä¸ªåœºæ™¯æ˜¯"),s("strong",[t._v("ç”¨æˆ·è®¿é—® ACME å…¬å¸è‡ªå·±çš„ç”µå•†ç½‘ç«™")]),t._v(", å‡è®¾è¿™ä¸ªç”µå•†ç½‘ç«™æ˜¯ç”¨ Spring MVC å¼€å‘çš„. è€ƒè™‘åˆ°è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸€æ–¹åœºæ™¯(ä¹Ÿå°±æ˜¯å…¬å¸è‡ªå·±å¼€å‘çš„ç½‘ç«™åº”ç”¨), å¯ä»¥é€‰ OAuth 2.0 çš„"),s("strong",[t._v("èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯")]),t._v("(Resource Owner Password Credentials Grant), ä¹Ÿå¯ä»¥é€‰æ›´å®‰å…¨çš„æˆæƒç è®¸å¯(Authorization Code Grant). å› ä¸ºè¿™é‡Œæ²¡æœ‰ç¬¬ä¸‰æ–¹çš„æ¦‚å¿µ, æ‰€ä»¥å°±é€‰ç›¸å¯¹ç®€å•çš„èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯.")]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯ä¸€ä¸ªè®¤è¯æˆæƒæµç¨‹æ ·ä¾‹. æ³¨æ„è¿™ä¸ªåªæ˜¯çªå‡ºäº†å…³é”®æ­¥éª¤, å®é™…ç”Ÿäº§çš„è¯, è¿˜æœ‰å¾ˆå¤šéœ€è¦å®Œå–„å’Œä¼˜åŒ–çš„åœ°æ–¹. å¦å¤–, ä¸ºæè¿°ç®€å•, è¿™é‡Œå‡å®šä¸€ä¸ªæˆåŠŸæµç¨‹.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/af6b37e70d388b0a96548cadff5d79a8-20230729094013-zjz0lh3.png",alt:""}})]),t._v(" "),s("p",[t._v("åœ¨ä¸Šé¢çš„å›¾ä¸­, "),s("strong",[t._v("ç”¨æˆ·å¯¹åº” OAuth 2.0 ä¸­çš„èµ„æºæ‹¥æœ‰è€…, ACME IDP å¯¹åº” OAuth 2.0 ä¸­çš„æˆæƒæœåŠ¡")]),t._v(". å¦å¤–, å‰é¢æ¶æ„å›¾ä¸­çš„"),s("strong",[t._v("åå°å¾®æœåŠ¡(åŒ…æ‹¬ BFF å’ŒåŸºç¡€é¢†åŸŸæœåŠ¡), å¯¹åº” OAuth 2.0 ä¸­çš„å—ä¿æŠ¤èµ„æº")]),t._v(".")]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯æµç¨‹è¯´æ˜:")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—® ACME å…¬å¸çš„ç”µå•†ç½‘ç«™, ç‚¹å‡»ç™»å½•é“¾æ¥.")]),t._v(" "),s("li",[t._v("Web åº”ç”¨è¿”å›ç™»å½•ç•Œé¢(è¿™ä¸ªç™»å½•é¡µå¯ä»¥æ˜¯ç½‘ç«™è‡ªå·±å®šåˆ¶å¼€å‘).")]),t._v(" "),s("li",[t._v("ç”¨æˆ·è¾“å…¥ç”¨æˆ·å, å¯†ç è¿›è¡Œè®¤è¯.")]),t._v(" "),s("li",[t._v("Web åº”ç”¨å°†ç”¨æˆ·å, å¯†ç , é€šè¿‡ç½‘å…³è½¬å‘åˆ° IDP çš„ä»¤ç‰Œè·å–ç«¯ç‚¹(POST /oauth2/token, grant_type=password).")]),t._v(" "),s("li",[t._v("IDP é€šè¿‡ Login Service å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯.")]),t._v(" "),s("li",[t._v("IDP è®¤è¯é€šè¿‡, è¿”å›æœ‰æ•ˆè®¿é—®ä»¤ç‰Œ(æ ¹æ®éœ€è¦ä¹Ÿå¯ä»¥è¿”å›åˆ·æ–°ä»¤ç‰Œ).")]),t._v(" "),s("li",[t._v("Web åº”ç”¨æ¥æ”¶åˆ°è®¿é—®ä»¤ç‰Œ, åˆ›å»ºç”¨æˆ· Session, å¹¶å°† OAuth 2.0 ä»¤ç‰Œä¿å­˜å…¶ä¸­, ç„¶åè¿”å›ç™»å½•æˆåŠŸåˆ°ç”¨æˆ·ç«¯.")]),t._v(" "),s("li",[t._v("ç”¨æˆ·æµè§ˆå™¨ä¸­è®°å½• Session Cookie, ç™»å½•æˆåŠŸ.")])]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å†æ¥çœ‹çœ‹"),s("strong",[t._v("è®¤è¯æˆæƒä¹‹åçš„æœåŠ¡è°ƒç”¨æµç¨‹")]),t._v(". åŒæ ·è¿™é‡Œä¹Ÿåªæ˜¯çªå‡ºäº†å…³é”®æ­¥éª¤, å¹¶å‡å®šæ˜¯ä¸€ä¸ªæˆåŠŸæµç¨‹.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/aef00e8d0c6fb3de724f278e9c28abe4-20230729094013-9exfpfs.png",alt:""}})]),t._v(" "),s("p",[t._v("æµç¨‹å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨æˆ·ç™»å½•å, åœ¨ç½‘ç«™ä¸Šç‚¹å‡»æŸ¥çœ‹è‡ªå·±çš„è´­ç‰©å†å²è®°å½•.")]),t._v(" "),s("li",[t._v("Web åº”ç”¨é€šè¿‡ç½‘å…³è°ƒç”¨åå° API(æŸ¥è¯¢ç”¨æˆ·çš„è´­ç‰©å†å²è®°å½•), è¯·æ±‚ "),s("strong",[t._v("HTTP header ä¸­å¸¦ä¸Š OAuth 2.0 ä»¤ç‰Œ")]),t._v("(æ¥è‡ªç”¨æˆ· Session).")]),t._v(" "),s("li",[t._v("ç½‘å…³æˆªå– OAuth 2.0 ä»¤ç‰Œ, å» IDP è¿›è¡Œæ ¡éªŒ.")]),t._v(" "),s("li",[t._v("IDP æ ¡éªŒä»¤ç‰Œé€šè¿‡, å†é€šè¿‡ä»¤ç‰ŒæŸ¥è¯¢ç”¨æˆ·å’Œ Scope ä¿¡æ¯, æ„å»º JWT ä»¤ç‰Œ, è¿”å›.")]),t._v(" "),s("li",[t._v("ç½‘å…³è·å¾— JWT ä»¤ç‰Œ, æ ¡éªŒ Scope æ˜¯å¦æœ‰æƒé™è°ƒç”¨ API, å¦‚æœæœ‰å°±è½¬å‘åˆ°åå° API è¿›è¡Œè°ƒç”¨.")]),t._v(" "),s("li",[t._v("åå° BFF(æˆ–è€…é¢†åŸŸæœåŠ¡)é€šè¿‡ä¼ é€’è¿‡æ¥çš„ JWT è·å–ç”¨æˆ·ä¿¡æ¯, æ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢è´­ç‰©å†å²è®°å½•, è¿”å›.")]),t._v(" "),s("li",[t._v("Web åº”ç”¨è·å¾—ç”¨æˆ·çš„è´­ç‰©å†å²æ•°æ®, å¯ä»¥æ ¹æ®éœ€è¦ç¼“å­˜åœ¨ Session ä¸­, å†è¿”å›ç”¨æˆ·ç«¯.")]),t._v(" "),s("li",[t._v("è´­ç‰©å†å²æ•°æ®è¿”å›åˆ°ç”¨æˆ·æµè§ˆå™¨ç«¯.")])]),t._v(" "),s("p",[t._v('æ³¨æ„, è¿™ä¸ªæœåŠ¡è°ƒç”¨æµç¨‹, ä¹Ÿå¯ä»¥åº”ç”¨åœ¨å…¶ä»–åœºæ™¯ä¸­, æ¯”å¦‚æ¥ä¸‹æ¥ä»‹ç»çš„"ç¬¬ä¸€æ–¹ç§»åŠ¨åº”ç”¨ + æˆæƒç è®¸å¯æ¨¡å¼"å’Œ"ç¬¬ä¸‰æ–¹ Web åº”ç”¨ + æˆæƒç è®¸å¯æ¨¡å¼". åŸºæœ¬ä¸Šåªè¦ç†è§£äº†è¿™ä¸ªæµç¨‹åŸç†, å°±å¯ä»¥æ ¹æ®å®é™…åœºæ™¯çµæ´»å¥—ç”¨.')]),t._v(" "),s("h6",{attrs:{id:"_2-åœºæ™¯2-ç¬¬ä¸€æ–¹ç§»åŠ¨åº”ç”¨-æˆæƒç è®¸å¯æ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-åœºæ™¯2-ç¬¬ä¸€æ–¹ç§»åŠ¨åº”ç”¨-æˆæƒç è®¸å¯æ¨¡å¼"}},[t._v("#")]),t._v(" (2)åœºæ™¯2:ç¬¬ä¸€æ–¹ç§»åŠ¨åº”ç”¨+æˆæƒç è®¸å¯æ¨¡å¼")]),t._v(" "),s("p",[t._v("ç¬¬äºŒä¸ªåœºæ™¯æ˜¯"),s("strong",[t._v("ç”¨æˆ·é€šè¿‡æ‰‹æœºè®¿é—® ACME å…¬å¸è‡ªå·±çš„ç”µå•† App")]),t._v(". è¿™æ˜¯ç¬¬ä¸€æ–¹çš„åŸç”Ÿåº”ç”¨(Native App)åœºæ™¯, é€šå¸¸è€ƒè™‘é€‰ç”¨ OAuth 2.0 çš„ç”¨æˆ·åå¯†ç æ¨¡å¼, ä½†æ˜¯å¹¶ä¸å®‰å…¨(å‚è€ƒ MICRO-SERVICES ARCHITECTURE WITH OAUTH2 AND JWT â€“ PART 3 â€“ IDP çš„ Security Consideration éƒ¨åˆ†), æ‰€ä»¥ä¸šç•Œ"),s("strong",[t._v("å»ºè®®é‡‡ç”¨æˆæƒç æ¨¡å¼, è€Œä¸”æ˜¯è¦æ”¯æŒ PKCE æ‰©å±•çš„æˆæƒç æ¨¡å¼")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ªè®¤è¯æˆæƒçš„æµç¨‹. åŒæ ·è¿™é‡Œåªæ˜¯çªå‡ºäº†å…³é”®æ­¥éª¤, å¹¶å‡å®šæ˜¯ä¸€ä¸ªæˆåŠŸæµç¨‹.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/ff1865cfe7895288b818c1d91ca3621c-20230729094013-djsits0.png",alt:""}})]),t._v(" "),s("p",[t._v("æµç¨‹å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨æˆ·è®¿é—®ç”µå•† App, ç‚¹å‡»ç™»å½•.")]),t._v(" "),s("li",[t._v("App ç”Ÿæˆ PKCE ç›¸å…³çš„ code verifier + challenge.")]),t._v(" "),s("li",[t._v("App ä»¥å†…åµŒæ–¹å¼å¯åŠ¨æ‰‹æœºæµè§ˆå™¨, è®¿é—® IDP çš„ç»Ÿä¸€è®¤è¯é¡µ (GET /authorize), è¯·æ±‚å¸¦ä¸Š PKCE çš„ code challenge ç›¸å…³å‚æ•°.")]),t._v(" "),s("li",[t._v("IDP è¿”å›ç»Ÿä¸€è®¤è¯é¡µ.")]),t._v(" "),s("li",[t._v("ç”¨æˆ·è®¤è¯å’Œæˆæƒ.")]),t._v(" "),s("li",[t._v("IDP é€šè¿‡ Login Service å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯.")]),t._v(" "),s("li",[t._v("IDP è¿”å›æˆæƒç åˆ° App æµè§ˆå™¨.")]),t._v(" "),s("li",[t._v("App æˆªå–æµè§ˆå™¨å¸¦å›çš„æˆæƒç , å°†æˆæƒç  + PKCE code verifer, é€šè¿‡ç½‘å…³è½¬å‘åˆ° IDP çš„ä»¤ç‰Œè·å–ç«¯ç‚¹(POST /oauth2/token, grant_type=authorization-code).")]),t._v(" "),s("li",[t._v("IDP æ ¡éªŒ PKCE å’Œæˆæƒç , æ ¡éªŒé€šè¿‡åˆ™è¿”å›æœ‰æ•ˆè®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("li",[t._v("App è·å–ä»¤ç‰Œ, æœ¬åœ°å­˜å‚¨, ç™»å½•æˆåŠŸ.")])]),t._v(" "),s("p",[s("strong",[t._v('ä¹‹å, App å¦‚æœéœ€è¦å’Œåå°äº¤äº’, å¯ç›´æ¥é€šè¿‡ç½‘å…³è°ƒç”¨åå°å¾®æœåŠ¡, è¯·æ±‚ HTTP header ä¸­å¸¦ä¸Š OAuth 2.0 è®¿é—®ä»¤ç‰Œå³å¯. åç»­çš„æœåŠ¡è°ƒç”¨æµç¨‹, å’Œ"ç¬¬ä¸€æ–¹åº”ç”¨ + èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼"ç±»ä¼¼.')])]),t._v(" "),s("h6",{attrs:{id:"_3-åœºæ™¯3-ç¬¬ä¸‰æ–¹webåº”ç”¨-æˆæƒç æ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-åœºæ™¯3-ç¬¬ä¸‰æ–¹webåº”ç”¨-æˆæƒç æ¨¡å¼"}},[t._v("#")]),t._v(" (3)åœºæ™¯3:ç¬¬ä¸‰æ–¹Webåº”ç”¨+æˆæƒç æ¨¡å¼")]),t._v(" "),s("p",[t._v("ç¬¬ä¸‰ä¸ªåœºæ™¯æ˜¯"),s("strong",[t._v("æŸç¬¬ä¸‰æ–¹åˆä½œå‚å•†å¼€å‘äº†ä¸€ä¸ª Web ç½‘ç«™, è¦è®¿é—® ACME å…¬å¸çš„ç”µå•†å¼€æ”¾å¹³å° API")]),t._v(". è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ Web åº”ç”¨åœºæ™¯, é€šå¸¸é€‰ç”¨ OAuth 2.0 çš„"),s("strong",[t._v("æˆæƒç è®¸å¯æ¨¡å¼")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ªè®¤è¯æˆæƒçš„æµç¨‹. åŒæ ·è¿™é‡Œåªæ˜¯çªå‡ºäº†å…³é”®æ­¥éª¤, å¹¶å‡è®¾æ˜¯ä¸€ä¸ªæˆåŠŸæµç¨‹.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/300fbe5ac3b996b1deb8841cbff863f4-20230729094013-4zcy7h2.png",alt:""}})]),t._v(" "),s("p",[t._v("æµç¨‹å¦‚ä¸‹:")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨æˆ·è®¿é—®è¿™ä¸ªç¬¬ä¸‰æ–¹ Web åº”ç”¨, ç‚¹å‡»ç™»å½•é“¾æ¥.")]),t._v(" "),s("li",[t._v("Web åº”ç”¨åå°å‘ ACME å…¬å¸çš„ IPD æœåŠ¡å‘é€ç”³è¯·æˆæƒç è¯·æ±‚(GET /authorize).")]),t._v(" "),s("li",[t._v("ç”¨æˆ·è¢«é‡å®šå‘åˆ° ACME å…¬å¸çš„ IDP ç»Ÿä¸€ç™»å½•é¡µé¢.")]),t._v(" "),s("li",[t._v("ç”¨æˆ·è¿›è¡Œè®¤è¯å’Œæˆæƒ.")]),t._v(" "),s("li",[t._v("IDP é€šè¿‡ Login Service å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯.")]),t._v(" "),s("li",[t._v("è®¤è¯å’Œæˆæƒé€šè¿‡, IDP è¿”å›æˆæƒç .")]),t._v(" "),s("li",[t._v("Web åº”ç”¨è·å¾—æˆæƒç , å†å‘ IDP æœåŠ¡çš„ä»¤ç‰Œè·å–ç«¯ç‚¹å‘èµ·è¯·æ±‚(POST /oauth2/token, grant_type=authorization-code).")]),t._v(" "),s("li",[t._v("IDP æ ¡éªŒæˆæƒç , æ ¡éªŒé€šè¿‡åˆ™è¿”å›æœ‰æ•ˆ OAuth 2.0 ä»¤ç‰Œ(æ ¹æ®éœ€è¦ä¹Ÿå¯ä»¥è¿”å›åˆ·æ–°ä»¤ç‰Œ).")]),t._v(" "),s("li",[t._v("Web åº”ç”¨åˆ›å»ºç”¨æˆ· Session, å°† OAuth 2.0 ä»¤ç‰Œä¿å­˜åœ¨ Session ä¸­, ç„¶åè¿”å›ç™»å½•æˆåŠŸåˆ°ç”¨æˆ·ç«¯.")]),t._v(" "),s("li",[t._v("ç”¨æˆ·æµè§ˆå™¨ä¸­è®°å½• Session Cookie, ç™»å½•æˆåŠŸ.")])]),t._v(" "),s("p",[s("strong",[t._v('ä¹‹å, ç¬¬ä¸‰æ–¹ Web åº”ç”¨å¦‚æœéœ€è¦å’Œ ACME ç”µå•†å¹³å°äº¤äº’, å¯ç›´æ¥é€šè¿‡ç½‘å…³è°ƒç”¨å¾®æœåŠ¡, è¯·æ±‚ HTTP header ä¸­å¸¦ä¸Š OAuth 2.0 è®¿é—®ä»¤ç‰Œå³å¯. åç»­çš„æœåŠ¡è°ƒç”¨æµç¨‹, å’Œå‰é¢çš„"ç¬¬ä¸€æ–¹åº”ç”¨ + èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼"ç±»ä¼¼.')])]),t._v(" "),s("h6",{attrs:{id:"_4-é¢å¤–è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-é¢å¤–è¯´æ˜"}},[t._v("#")]),t._v(" (4)é¢å¤–è¯´æ˜")]),t._v(" "),s("p",[t._v("é™¤äº†ä¸Šé¢çš„ä¸‰ä¸ªä¸»è¦åœºæ™¯å’Œæµç¨‹, è¿˜è¦å’Œä½ åˆ†äº« 6 ç‚¹. è¿™ 6 ç‚¹æ˜¯å¯¹ä¸Šé¢åŸºæœ¬æµç¨‹çš„è¡¥å……, ä¹Ÿæ˜¯ä¼ä¸šçº§çš„ OAuth 2.0 åº”ç”¨è¦é¢å¤–è€ƒè™‘çš„.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬ä¸€ç‚¹æ˜¯, IDP çš„ API è¦æ”¯æŒä» OAuth 2.0 è®¿é—®ä»¤ç‰Œåˆ° JWT ä»¤ç‰Œçš„äº’è½¬")]),t._v(". æœ¬èŠ‚æåˆ°çš„é›†æˆæ¶æ„é‡‡ç”¨ OAuth 2.0 è®¿é—®ä»¤ç‰Œ + JWT ä»¤ç‰Œçš„æ··åˆæ¨¡å¼, ä¸­é—´éœ€è¦å®ç° OAuth 2.0 è®¿é—®ä»¤ç‰Œåˆ° JWT ä»¤ç‰Œçš„äº’è½¬. è¿™ä¸ªäº’è½¬ API å¹¶é OAuth 2.0 çš„æ ‡å‡†, æœ‰äº› IDP äº§å“(æ¯”æ–¹ Spring Security OAuth)å¯èƒ½å¹¶ä¸æ”¯æŒ, å› æ­¤éœ€è¦ç”¨æˆ·å®šåˆ¶æ‰©å±•.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬äºŒç‚¹æ˜¯, å…³äºå•é¡µ SPA åº”ç”¨åœºæ™¯")]),t._v(". å…³äºå•é¡µ SPA åº”ç”¨åœºæ™¯, ç®€å•åšæ³•æ˜¯é‡‡ç”¨éšå¼è®¸å¯, ä½†æ˜¯è¿™ä¸ªæ¨¡å¼æ˜¯ OAuth 2.0 ä¸­æ¯”è¾ƒä¸å®‰å…¨çš„, æ‰€ä»¥ä¸€èˆ¬ä¸å»ºè®®é‡‡ç”¨. å¯¹äºçº¯å•é¡µ SPA åº”ç”¨, ä¸šç•Œæ¨èçš„åšæ³•æ˜¯:")]),t._v(" "),s("ol",[s("li",[t._v('å¦‚æœæµè§ˆå™¨æ”¯æŒ Web Crypto for PKCE, åˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨ç±»ä¼¼"ç¬¬ä¸€æ–¹ç§»åŠ¨åº”ç”¨"åœºæ™¯ä¸‹çš„æˆæƒç è®¸å¯ + PKCE æ‰©å±•æµç¨‹;')]),t._v(" "),s("li",[t._v('å¦åˆ™, è€ƒè™‘ SPA + ä¼ ç»Ÿ Web æ··åˆ(hybrid)æ¨¡å¼, å‰ç«¯é¡µé¢å¯ä»¥ä½åœ¨å®¢æˆ·æµè§ˆå™¨ç«¯ä¸­, ä½†ç™»å½•è®¤è¯è¿˜æ˜¯ç”±åå° Web ç«™ç‚¹é…åˆå®ç°, èµ°ç±»ä¼¼"ç¬¬ä¸€æ–¹ Web åº”ç”¨"åœºæ™¯çš„èµ„æºæ‹¥æœ‰è€…å‡­æ®æ¨¡å¼, æˆ–è€…"ç¬¬ä¸‰æ–¹ Web åº”ç”¨"åœºæ™¯ä¸‹çš„æˆæƒç è®¸å¯æ¨¡å¼.')])]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬ä¸‰ç‚¹æ˜¯, å…³äº SSO å•ç‚¹ç™»å½•åœºæ™¯")]),t._v(". ä¸ºäº†ç®€åŒ–æè¿°, ä¸Šé¢çš„æµç¨‹æ²¡æœ‰è€ƒè™‘ SSO å•ç‚¹ç™»å½•åœºæ™¯. å¦‚æœè¦æ”¯æŒ Web SSO, é‚£ä¹ˆå„ç§åº”ç”¨åœºæ™¯éƒ½å¿…é¡»é€šè¿‡æµè§ˆå™¨ + IDP ç™»å½•é¡µé›†ä¸­ç™»å½•, å¹¶ä¸” "),s("strong",[t._v("IDP è¦æ”¯æŒ Session, ç”¨äºç»´æŠ¤ç™»å½•æ€")]),t._v(". å¦‚æœ IDP ä»¥é›†ç¾¤æ–¹å¼éƒ¨ç½²çš„è¯, è¿˜è¦è€ƒè™‘ç²˜æ€§ Sticky Session æˆ–è€…é›†ä¸­å¼ Session.")]),t._v(" "),s("p",[t._v("è¿™æ ·, å½“ç”¨æˆ·é€šè¿‡ä¸€ä¸ª Web åº”ç”¨ç™»å½•å, åç»­å¦‚æœå†ç”¨å…¶å®ƒ Web åº”ç”¨ç™»å½•çš„è¯, åªè¦ IDP ä¸Šçš„ Session è¿˜å­˜åœ¨, é‚£ä¹ˆè¿™ä¸ªç™»å½•å°±å¯ä»¥è‡ªåŠ¨å®Œæˆ, ç›¸å½“äºå•ç‚¹ç™»å½•.")]),t._v(" "),s("p",[t._v("å½“ç„¶, å¦‚æœè¦æ”¯æŒ SSO, IDP çš„ Session Cookie è¦ç§åœ¨ Web åº”ç”¨çš„æ ¹åŸŸä¸Š, ä¹Ÿå°±æ˜¯è¯´ä¸åŒ Web åº”ç”¨çš„æ ¹åŸŸå¿…é¡»ç›¸åŒ, å¦åˆ™ä¼šæœ‰è·¨åŸŸé—®é¢˜.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬å››ç‚¹æ˜¯å…³äº IDP å’Œç½‘å…³çš„éƒ¨ç½²æ–¹å¼")]),t._v(". å‰é¢çš„å‡ å¼ æ¶æ„å›¾ä¸­, IDP è™½ç„¶èº²åœ¨ç½‘å…³åé¢, ä½†å®é™…ä¸Š IDP å¯ä»¥ç›´æ¥é€šè¿‡ Nginx å¯¹å¤–æš´éœ², ä¸ç»è¿‡ç½‘å…³. æˆ–è€… IDP çš„ç™»å½•æˆæƒé¡µé¢, å¯ä»¥é€šè¿‡ Nginx ç›´æ¥æš´éœ², API æ¥å£åˆ™èµ°ç½‘å…³.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬äº”ç‚¹æ˜¯å…³äºåˆ·æ–°ä»¤ç‰Œ")]),t._v(". ä¸ºäº†ç®€åŒ–æè¿°, ä¸Šé¢çš„æµç¨‹æ²¡æœ‰è¯¦ç»†è¯´æ˜åˆ·æ–°ä»¤ç‰Œçš„é›†æˆæ–¹å¼. ä¼ä¸šæ ¹æ®åœºæ™¯éœ€è¦, å¯ä»¥"),s("strong",[t._v("å¯ç”¨åˆ·æ–°ä»¤ç‰Œ")]),t._v(", æ¥å»¶é•¿ç”¨æˆ·çš„ç™»å½•æ—¶é—´, å…·ä½“çš„é›†æˆæ–¹å¼éœ€è¦è€ƒè™‘å®‰å…¨æ€§çš„éœ€æ±‚.")]),t._v(" "),s("p",[s("strong",[t._v("ç¬¬å…­ç‚¹æ˜¯å…³äº Web Session")]),t._v(". ä¸ºäº†ç®€åŒ–æè¿°, åœ¨ä¸Šé¢çš„æµç¨‹ä¸­, Web åº”ç”¨ç™»å½•æˆåŠŸåå‡è®¾å¯ç”¨ Web Session, ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ç«¯ Session. åœ¨å®é™…åœºæ™¯ä¸­, Web Session å¹¶éå”¯ä¸€é€‰æ‹©, ä¹Ÿå¯ä»¥é‡‡ç”¨ç®€å•çš„å®¢æˆ·ç«¯ Session æ–¹å¼, ä¹Ÿç§°æ— çŠ¶æ€ Session, ä¹Ÿå°±æ˜¯åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ Cookie ä¸­ä¿å­˜ OAuth 2.0 è®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("h5",{attrs:{id:"_3-å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å°ç»“"}},[t._v("#")]),t._v(" 3.å°ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹å››ç‚¹.")]),t._v(" "),s("ul",[s("li",[t._v("ç›®å‰ä¸»æµçš„å¾®æœåŠ¡æ¶æ„å¤§è‡´å¯ä»¥åˆ†ä¸º 5 å±‚, åˆ†åˆ«æ˜¯: "),s("strong",[t._v("Nginx æµé‡æ¥å…¥å±‚ -> Web åº”ç”¨å±‚ -> API ç½‘å…³å±‚ -> BFF èšåˆå±‚ -> é¢†åŸŸæœåŠ¡å±‚")]),t._v(". è¿™ä¸ªæ¶æ„å¯ä»¥ä½åœ¨äº‘åŸç”Ÿçš„ Kubernetes ç¯å¢ƒä¸­, ä¹Ÿå¯ä»¥ä½åœ¨ä¼ ç»Ÿæ•°æ®ä¸­å¿ƒé‡Œå¤´.")]),t._v(" "),s("li",[s("strong",[t._v("API ç½‘å…³æ˜¯å¾®æœåŠ¡è°ƒç”¨çš„å…¥å£, æ‰¿æ‹…é‡è¦çš„å®‰å…¨è®¤è¯å’Œé‰´æƒåŠŸèƒ½")]),t._v(". ä¸»è¦çš„å®‰å…¨æ“ä½œåŒ…æ‹¬: (1)é€šè¿‡ IDP æ ¡éªŒ OAuth 2.0 è®¿é—®ä»¤ç‰Œ, å¹¶è·å–å¸¦ç”¨æˆ·å’Œæƒé™ä¿¡æ¯çš„ JWT ä»¤ç‰Œ; (2)åŸºäº OAuth 2.0 çš„ Scope å¯¹ API è°ƒç”¨è¿›è¡Œé‰´æƒ.")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨å¾®æœåŠ¡æ¶æ„ä½“ç³»ä¸‹, é€šå¸¸éœ€è¦ä¸€ä¸ªé›†ä¸­çš„ IDP æœåŠ¡, å®ƒç›¸å½“äºä¸€ä¸ª Authentication & Authorization as a Service è§’è‰², è´Ÿè´£ä»¤ç‰Œé¢å‘ / æ ¡éªŒ / ç®¡ç†, è¿˜æœ‰ç”¨æˆ·è®¤è¯.")])]),t._v(" "),s("li",[t._v("æœ¬èŠ‚æå‡ºçš„æ¶æ„ä¸­, Web åº”ç”¨å±‚(ç½‘å…³ä¹‹å‰)çš„å®‰å…¨æœºåˆ¶ä¸»è¦åŸºäº OAuth 2.0 è®¿é—®ä»¤ç‰Œå®ç°(å®ƒæ˜¯ä¸€ç§"),s("strong",[t._v("é€æ˜ä»¤ç‰Œ")]),t._v("æˆ–è€…ç§°"),s("strong",[t._v("å¼•ç”¨ä»¤ç‰Œ")]),t._v("), å¾®æœåŠ¡å±‚(ç½‘å…³ä¹‹å)çš„å®‰å…¨æœºåˆ¶ä¸»è¦åŸºäº JWT ä»¤ç‰Œå®ç°(å®ƒæ˜¯ä¸€ç§"),s("strong",[t._v("ä¸é€æ˜")]),t._v("çš„"),s("strong",[t._v("è‡ªåŒ…å«ä»¤ç‰Œ")]),t._v("). ç½‘å…³å±‚åœ¨ä¸­é—´å®ç°ä¸¤ç§ä»¤ç‰Œçš„è½¬æ¢. è¿™æ˜¯ä¸€ç§ OAuth 2.0 è®¿é—®ä»¤ç‰Œ + JWT ä»¤ç‰Œçš„æ··åˆæ¨¡å¼. ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡, æ˜¯å› ä¸º Web å±‚é è¿‘ç”¨æˆ·ç«¯, å¦‚æœé‡‡ç”¨ JWT ä»¤ç‰Œ, ä¼šæš´éœ²ç”¨æˆ·ä¿¡æ¯, æœ‰ä¸€å®šçš„å®‰å…¨é£é™©, æ‰€ä»¥é‡‡ç”¨ OAuth 2.0 è®¿é—®ä»¤ç‰Œ, å®ƒæ˜¯ä¸€ä¸ªæ— æ„ä¹‰éšæœºå­—ç¬¦ä¸². è€Œåœ¨ç½‘å…³ä¹‹å, å®‰å…¨é£é™©ç›¸å¯¹ä½, åŒæ—¶å¾ˆå¤šæœåŠ¡éœ€è¦ç”¨æˆ·ä¿¡æ¯, æ‰€ä»¥é‡‡ç”¨è‡ªåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„ JWT ä»¤ç‰Œæ›´åˆé€‚. å½“ç„¶, å¦‚æœä¼ä¸šå†…ç½‘æ²¡æœ‰ç‰¹åˆ«çš„å®‰å…¨è€ƒé‡, ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’å®Œå…¨é€æ˜çš„ç”¨æˆ·ä¿¡æ¯(ä¾‹å¦‚ä½¿ç”¨ JSON æ ¼å¼).")])]),t._v(" "),s("h4",{attrs:{id:"å„å¤§å¼€æ”¾å¹³å°æ˜¯å¦‚ä½•ä½¿ç”¨oauth-2-0çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å„å¤§å¼€æ”¾å¹³å°æ˜¯å¦‚ä½•ä½¿ç”¨oauth-2-0çš„"}},[t._v("#")]),t._v(" å„å¤§å¼€æ”¾å¹³å°æ˜¯å¦‚ä½•ä½¿ç”¨OAuth 2.0çš„?")]),t._v(" "),s("p",[t._v("å‰é¢æåˆ°äº†å¾ˆå¤šæ¬¡å¼€æ”¾å¹³å°, ä¸éš¾ç†è§£, å®ƒçš„ä½œç”¨å°±æ˜¯"),s("strong",[t._v("ä¼ä¸šæŠŠè‡ªå·±çš„ä¸šåŠ¡èƒ½åŠ›ä¸»è¦ä»¥å¼€æ”¾ API çš„å½¢å¼, èµ‹èƒ½ç»™å¤–éƒ¨å¼€å‘è€…")]),t._v(". è€Œä½œä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æˆ–è€… ISV(ç‹¬ç«‹è½¯ä»¶ä¾›åº”å•†)åœ¨æ¥å…¥è¿™äº›å¼€æ”¾å¹³å°çš„æ—¶å€™, æœ€åº”è¯¥å…³å¿ƒçš„å°±æ˜¯å®ƒä»¬çš„å®˜æ–¹æ–‡æ¡£, å…³æ³¨æ¥å…¥çš„æµç¨‹æ˜¯æ€æ ·çš„, å¯¹åº”çš„ API æ˜¯ä»€ä¹ˆ, æ¯ä¸ª API éƒ½ä¼ é€’å“ªäº›å‚æ•°, ä¹Ÿå°±å·®ä¸å¤šå¤Ÿäº†.")]),t._v(" "),s("p",[t._v("ä¸è¿‡å½“ä½ å»å„å¤§å¼€æ”¾å¹³å°ä¸Šé¢çœ‹è¿™äº›æ–‡æ¡£çš„æ—¶å€™, å°±ä¼šå‘ç°è¿™äº›æ–‡æ¡£éå¸¸åˆ†æ•£. å…¶ä¸­çš„åŸå› ä¹Ÿå¾ˆç®€å•, é‚£å°±æ˜¯å¼€æ”¾å¹³å°ä¸ºäº†è®©å·²ç»å…·å¤‡ OAuth 2.0 çŸ¥è¯†çš„ç ”å‘äººå‘˜å»å¿«é€Ÿåœ°å¯¹æ¥å¹³å°ä¸Šé¢çš„ä¸šåŠ¡, æŠŠå„ç±»å¯¹æ¥æµç¨‹åšäº†åˆ†ç±»å½’æ¡£. æ¯”å¦‚, ä½ ä¼šå‘ç°å¾®ä¿¡å¼€æ”¾å¹³å°ä¸Šæœ‰ä½¿ç”¨æˆæƒç è·å–æˆæƒä¿¡æ¯çš„æ–‡æ¡£, ä¹Ÿæœ‰è·å–ä»¤ç‰Œçš„æ–‡æ¡£, "),s("strong",[t._v("ä½†å¹¶æ²¡æœ‰ä¸€ä»½æ•´ä½“çš„, èƒ½å¤Ÿä¸²èµ·æ¥çš„æ–‡æ¡£è¯´æ˜")]),t._v(". è¿™å…¶å®ä¹Ÿå°±é—´æ¥æé«˜äº†ä½¿ç”¨é—¨æ§›, å› ä¸ºå¦‚æœä¸æ‡‚ OAuth 2.0, åŸºæœ¬æ˜¯æ²¡åŠæ³•ç†è§£é‚£äº›åˆ†ç±»çš„.")]),t._v(" "),s("p",[t._v("åœ¨æ­£å¼ä»‹ç»å„å¤§å¼€æ”¾å¹³å°çš„ä½¿ç”¨ç»†èŠ‚ä¹‹å‰, å…ˆæ¥çœ‹çœ‹å¤§å‚çš„å¼€æ”¾å¹³å°å…¨å±€ä½“ç³». å„ä¸ªå¼€æ”¾å¹³å°åŸºæœ¬çš„ç³»ç»Ÿç»“æ„å’Œæˆæƒç³»ç»Ÿåœ¨ä¸­é—´çš„äº¤äº’æµç¨‹, "),s("mark",[s("strong",[t._v("å¤§åŒå°å¼‚, éƒ½æ˜¯é€šè¿‡æˆæƒæœåŠ¡æ¥æˆæƒ, é€šè¿‡ç½‘å…³æ¥é‰´æƒ")])]),t._v(". æ¥ä¸‹æ¥å°±ä»¥äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ä¸ºä¾‹æ¥çœ‹çœ‹å¼€æ”¾å¹³å°çš„ä½“ç³»åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„.")]),t._v(" "),s("h5",{attrs:{id:"_1-å¼€æ”¾å¹³å°ä½“ç³»æ˜¯ä»€ä¹ˆæ ·å­çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¼€æ”¾å¹³å°ä½“ç³»æ˜¯ä»€ä¹ˆæ ·å­çš„"}},[t._v("#")]),t._v(" 1.å¼€æ”¾å¹³å°ä½“ç³»æ˜¯ä»€ä¹ˆæ ·å­çš„?")]),t._v(" "),s("p",[t._v("é¦–å…ˆæ¥çœ‹ä¸€ä¸‹äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°å…¨å±€ä½“ç³»çš„ç»“æ„, å¦‚ä¸‹å›¾æ‰€ç¤º.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/808b980e2674314863751ebedd17aff6-20230729094013-kmmgz2f.png",alt:"",title:"äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ä½“ç³»ç»“æ„ç¤ºæ„å›¾"}})]),t._v(" "),s("p",[t._v("å¯ä»¥æŠŠè¿™ä¸ªæ¶æ„ä½“ç³»åˆ†ä¸º"),s("strong",[t._v("ä¸‰éƒ¨åˆ†")]),t._v("æ¥çœ‹:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶")]),t._v(", ä¸€èˆ¬æ˜¯æŒ‡ç¬¬ä¸‰æ–¹å¼€å‘è€…æˆ–è€… ISV é€šè¿‡å¯¹æ¥å¼€æ”¾å¹³å°æ¥å®ç°çš„åº”ç”¨è½¯ä»¶, æ¯”å¦‚å°å…”æ‰“å•è½¯ä»¶.")]),t._v(" "),s("li",[s("strong",[t._v("äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°, åŒ…å« API ç½‘å…³æœåŠ¡, OAuth 2.0 æˆæƒæœåŠ¡å’Œç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…ä¸­å¿ƒæœåŠ¡")]),t._v('. å…¶ä¸­, API ç½‘å…³æœåŠ¡å’Œ OAuth 2.0 æˆæƒæœåŠ¡, æ˜¯å¼€æ”¾å¹³å°çš„"ä¸¤æ¡è…¿"; ç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…ä¸­å¿ƒæœåŠ¡, æ˜¯ä¸ºå¼€å‘è€…æä¾›ç®¡ç†ç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨åŸºæœ¬ä¿¡æ¯çš„æœåŠ¡, æ¯”å¦‚ app_id, app_secret ç­‰ä¿¡æ¯.')]),t._v(" "),s("li",[s("strong",[t._v("äº¬ä¸œå†…éƒ¨çš„å„ä¸ªå¾®æœåŠ¡, æ¯”å¦‚è®¢å•æœåŠ¡, å•†å“æœåŠ¡ç­‰")]),t._v(". è¿™äº›å¾®æœåŠ¡, å°±æ˜¯ä¹‹å‰æåˆ°çš„"),s("strong",[t._v("å—ä¿æŠ¤èµ„æºæœåŠ¡")]),t._v(".")])]),t._v(" "),s("p",[t._v("ä»å›¾ä¸­è¿˜å¯ä»¥çœ‹åˆ°è¿™ä¸ªä½“ç³»æ•´ä½“çš„è°ƒç”¨å…³ç³»æ˜¯: "),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶é€šè¿‡ HTTP åè®®è¯·æ±‚åˆ°å¼€æ”¾å¹³å°, æ›´å…·ä½“åœ°è¯´æ˜¯å¼€æ”¾å¹³å°çš„ API ç½‘å…³æœåŠ¡, ç„¶åç”± API ç½‘å…³é€šè¿‡å†…éƒ¨çš„ RPC è°ƒç”¨åˆ°å„ä¸ªå¾®æœåŠ¡")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥å†ä»¥ç”¨æˆ·å°æ˜ä½¿ç”¨å°å…”æ‰“å•è½¯ä»¶ä¸ºä¾‹, æ¥çœ‹çœ‹è¿™äº›ç³»ç»Ÿè§’è‰²ä¹‹é—´å…·ä½“åˆæ˜¯æ€æ ·äº¤äº’çš„.")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/dba4c4f1f81b63d8edfb987b9d64fe03-20230729094013-jjmn1zx.png",alt:"",title:"å¼€æ”¾å¹³å°ä½“ç³»äº¤äº’ç¤ºæ„å›¾"}})]),t._v(" "),s("p",[t._v("åˆ°è¿™é‡Œ, å¯ä»¥å‘ç°, åœ¨å¼€æ”¾å¹³å°ä½“ç³»ä¸­å„ä¸ªç³»ç»Ÿè§’è‰²é—´çš„äº¤äº’å¯ä»¥å½’ç»“ä¸º:")]),t._v(" "),s("p",[t._v("å½“ç”¨æˆ·å°æ˜è®¿é—®å°å…”è½¯ä»¶çš„æ—¶å€™, å°å…”ä¼šé¦–å…ˆ"),s("strong",[t._v("å‘å¼€æ”¾å¹³å°çš„ OAuth 2.0 æˆæƒæœåŠ¡å»è¯·æ±‚è®¿é—®ä»¤ç‰Œ, æ¥ç€å°å…”æ‹¿ç€è®¿é—®ä»¤ç‰Œå»è¯·æ±‚ API ç½‘å…³æœåŠ¡")]),t._v(";")]),t._v(" "),s("p",[t._v("åœ¨ API ç½‘å…³æœåŠ¡ä¸­, ä¼šåšæœ€åŸºæœ¬çš„ä¸¤ç§æ ¡éªŒ, ä¸€ç§æ˜¯è®¿é—®ä»¤ç‰Œçš„åˆæ³•æ€§æ ¡éªŒ, æ¯”å¦‚è®¿é—®ä»¤ç‰Œæ˜¯å¦è¿‡æœŸçš„æ ¡éªŒ, å¦ä¸€ç§æ˜¯å°å…”æ‰“å•è½¯ä»¶çš„åŸºæœ¬ä¿¡æ¯çš„åˆæ³•æ€§æ ¡éªŒ, æ¯”å¦‚ app_id å’Œ app_secret çš„æ ¡éªŒ;")]),t._v(" "),s("p",[t._v("éƒ½æ ¡éªŒæˆåŠŸä¹‹å, API ç½‘å…³æœåŠ¡ä¼šå‘èµ·æœ€ç»ˆçš„æ•°æ®è¯·æ±‚.")]),t._v(" "),s("p",[t._v("è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯, å‰é¢æåˆ°, éªŒè¯è®¿é—®ä»¤ç‰Œæˆ–è€…ç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨ä¿¡æ¯çš„æ—¶å€™, éƒ½æ˜¯åœ¨å—ä¿æŠ¤èµ„æºæœåŠ¡ä¸­å»åšçš„. "),s("mark",[s("strong",[t._v("å½“æœ‰äº† API ç½‘å…³è¿™ä¸€å±‚çš„æ—¶å€™, è¿™äº›æ ¡éªŒå·¥ä½œå°±ä¼šéƒ½è½åˆ°äº† API ç½‘å…³çš„èº«ä¸Š, å› ä¸ºä¸èƒ½è®©å¾ˆå¤šä¸ªå—ä¿æŠ¤èµ„æºæœåŠ¡åšåŒæ ·çš„äº‹æƒ…")])]),t._v(".")]),t._v(" "),s("p",[t._v("ç†è§£äº†äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„ä½“ç³»ç»“æ„å, å¯ä»¥å°ç»“ä¸€ä¸‹. ä¾é å¼€æ”¾å¹³å°æä¾›çš„èƒ½åŠ›, å¯ä»¥è¯´"),s("strong",[t._v("å¼€æ”¾å¹³å°, ç”¨æˆ·å’Œå¼€å‘è€…å®ç°äº†ä¸‰èµ¢")]),t._v(": å°æ˜å› ä¸ºä½¿ç”¨å°å…”æé«˜äº†æ‰“å•æ•ˆç‡; å°å…”çš„å¼€å‘è€…å› ä¸ºå°æ˜çš„è®¢è´­æœåŠ¡è·å¾—äº†æ”¶ç›Š; è€Œé€šè¿‡å¼€æ”¾å‡ºå»çš„ API è®©å°å…”å¸®åŠ©å°æ˜èƒ½å¤Ÿæå¿«åœ°å¤„ç† C ç«¯ç”¨æˆ·çš„è®¢å•, äº¬ä¸œæé«˜äº†ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒ.")]),t._v(" "),s("p",[t._v("åŒæ—¶å¼€æ”¾ä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘. ç†æƒ³çŠ¶æ€ä¸‹, å¹³å°, å¼€å‘è€…, ç”¨æˆ·å¯ä»¥å®ç°ä¸‰èµ¢, ä½†æ­£å¦‚å‰é¢æåˆ°çš„, å®‰å…¨çš„é—®é¢˜ç»ä¸å®¹å¿½è§†, è€Œç”¨æˆ·çš„ä¿¡æ¯å®‰å…¨åˆæ˜¯é‡ä¸­ä¹‹é‡.")]),t._v(" "),s("p",[s("strong",[t._v("æ¥ä¸‹æ¥å°±åˆ†äº«ä¸€ä¸ªå¼€æ”¾å¹³å°ä½“ç³»æ˜¯å¦‚ä½•è§£å†³è®¿é—®ä»¤ç‰Œå®‰å…¨é—®é¢˜çš„æ¡ˆä¾‹.")])]),t._v(" "),s("p",[t._v("å‰é¢å·²ç»çŸ¥é“, ç”¨æˆ·ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶æˆæƒä¹‹å, æˆæƒæœåŠ¡å°±ä¼šç”Ÿæˆä¸€ä¸ªè®¿é—®ä»¤ç‰Œ, è€Œä¸”è¿™ä¸ªè®¿é—®ä»¤ç‰Œæ˜¯è·Ÿç”¨æˆ·å…³è”çš„. æ¯”å¦‚å°æ˜ç»™å°å…”æ‰“å•è½¯ä»¶è¿›è¡Œäº†æˆæƒ, é‚£ä¹ˆæ­¤æ—¶è®¿é—®ä»¤ç‰Œçš„ç²’åº¦å°±æ˜¯: å°å…”æ‰“å•è½¯ä»¶ + å°æ˜. å¹¶ä¸”å°å…”æ‰“å•è½¯ä»¶å¯ä»¥æ‹¿ç€è¿™ä¸ªè®¿é—®ä»¤ç‰Œå»ä»£è¡¨å°æ˜è®¿é—®å°æ˜çš„æ•°æ®; å¦‚æœè®¿é—®ä»¤ç‰Œè¿‡æœŸäº†, å°å…”æ‰“å•è½¯ä»¶è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œæ¥è®¿é—®, ç›´åˆ°åˆ·æ–°ä»¤ç‰Œä¹Ÿè¿‡æœŸäº†.")]),t._v(" "),s("p",[t._v("ç°åœ¨é—®é¢˜æ¥äº†, å¦‚æœå°æ˜"),s("strong",[t._v("æ³¨é”€äº†è´¦å·")]),t._v(", æˆ–è€…ä¿®æ”¹äº†è‡ªå·±çš„å¯†ç , é‚£ä»–ä¹‹å‰ä¸ºå…¶å®ƒç¬¬ä¸‰æ–¹è½¯ä»¶è¿›è¡Œæˆæƒçš„è®¿é—®ä»¤ç‰Œå°±"),s("strong",[t._v("åº”è¯¥ç«‹å³å¤±æ•ˆ")]),t._v(". å¦åˆ™, åœ¨åˆ·æ–°ä»¤ç‰Œè¿‡æœŸä¹‹å‰, ç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥ä¸€ç›´æ‹¿ç€ä¹‹å‰çš„è®¿é—®ä»¤ç‰Œå»è¯·æ±‚æ•°æ®. è¿™æ˜¾ç„¶ä¸åˆç†.")]),t._v(" "),s("p",[t._v("æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹, "),s("strong",[t._v("æˆæƒæœåŠ¡å°±è¦é€šè¿‡ MQ(æ¶ˆæ¯é˜Ÿåˆ—)æ¥æ”¶ç”¨æˆ·çš„æ³¨é”€å’Œä¿®æ”¹å¯†ç è¿™ä¸¤ç±»æ¶ˆæ¯, ç„¶åå¯¹è®¿é—®ä»¤ç‰Œè¿›è¡Œæ¸…ç†")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/a864a3aa3f35d71b4a1ece9958279299-20230729094013-82ue0ef.png",alt:"",title:"è®¿é—®ä»¤ç‰Œçš„æ¸…ç†"}})]),t._v(" "),s("p",[t._v("å…¶å®, è¿™ä¸ªæ¡ˆä¾‹ä¸­è§£å†³è®¿é—®ä»¤ç‰Œå®‰å…¨é—®é¢˜çš„æ–¹å¼, ä¸ä»…ä»…é€‚ç”¨äºå¼€æ”¾å¹³å°, è¿˜å¯ä»¥ä¸ºä½ åœ¨ä¼ä¸šå†…æ„å»ºè‡ªå·±çš„ OAuth 2.0 æˆæƒä½“ç³»ç»“æ„æ—¶æä¾›å€Ÿé‰´.")]),t._v(" "),s("p",[t._v('ä»¥ä¸Šå°±æ˜¯å¼€æ”¾å¹³å°æ•´ä½“çš„ç»“æ„, ä»¥åŠå…¶ä¸­éœ€è¦é‡ç‚¹å…³æ³¨çš„ç”¨æˆ·è®¿é—®ä»¤ç‰Œçš„å®‰å…¨æ€§é—®é¢˜äº†. ä½œä¸ºç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…, åœ¨å¯¹æ¥åˆ°è¿™äº›å¼€æ”¾å¹³å°æˆ–è€…æµè§ˆå®ƒä»¬çš„ç½‘ç«™æ—¶, å‡ ä¹éƒ½èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä¸€å¥è¯: "'),s("mark",[s("strong",[t._v("æ‰€æœ‰æ¥å£éƒ½éœ€è¦æ¥å…¥ OAuth æˆæƒ, ç»è¿‡ç”¨æˆ·ç¡®è®¤æˆæƒåæ‰å¯ä»¥è°ƒç”¨")])]),t._v('", è¿™æ­£æ˜¯ OAuth 2.0 çš„æ ¹æœ¬æ€§ä½œç”¨.')]),t._v(" "),s("h5",{attrs:{id:"_2-å„å¤§å¼€æ”¾å¹³å°æˆæƒæµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å„å¤§å¼€æ”¾å¹³å°æˆæƒæµç¨‹"}},[t._v("#")]),t._v(" 2.å„å¤§å¼€æ”¾å¹³å°æˆæƒæµç¨‹")]),t._v(" "),s("p",[t._v("ç†è§£äº†å¼€æ”¾å¹³å°çš„è„‰ç»œä¹‹å, æ¥ä¸‹æ¥é€šè¿‡ä¸€ç»„å›¾çœ‹ä¸€çœ‹å¼€æ”¾å¹³å°æ˜¯å¦‚ä½•ä½¿ç”¨ OAuth 2.0 æˆæƒæµç¨‹çš„.")]),t._v(" "),s("p",[t._v("ä»¥å¾®ä¿¡, æ”¯ä»˜å®, ç¾å›¢ä¸ºä¾‹, çœ‹çœ‹å®ƒä»¬åœ¨å¼€æ”¾æˆæƒä¸Šæ˜¯å¦‚ä½•ä½¿ç”¨ OAuth 2.0 çš„.")]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯å¾®ä¿¡å®˜æ–¹çš„æˆæƒæµç¨‹å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/8ede3b2d84f9ef6893e51ef72b8e80d2-20230729094013-khc7hcl.png",alt:"",title:"å¾®ä¿¡å¼€æ”¾å¹³å°æˆæƒæµç¨‹å›¾"}})]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯æ”¯ä»˜å®å®˜æ–¹çš„æˆæƒæµç¨‹å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/11840067d2ab289b327ff867cf26b685-20230729094013-6ho5x49.png",alt:"",title:"æ”¯ä»˜å®å¼€æ”¾å¹³å°æˆæƒæµç¨‹å›¾"}})]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯ç¾å›¢å®˜æ–¹çš„æˆæƒæµç¨‹å›¾:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/fd8395f326b4453dea1e2adc6c658b33-20230729094013-89tf61p.png",alt:"",title:"ç¾å›¢å¼€æ”¾å¹³å°æˆæƒæµç¨‹å›¾"}})]),t._v(" "),s("p",[t._v("å¯ä»¥åœ¨è¿™ä¸‰å¼ æˆæƒæµç¨‹å›¾ä¸­çœ‹åˆ°, "),s("strong",[t._v("éƒ½æœ‰å’Œæˆæƒç  code ç›¸å…³çš„æ–‡å­—")]),t._v(". è¿™å°±è¯´æ˜, "),s("mark",[s("strong",[t._v("å®ƒä»¬éƒ½å»ºè®®å¼€å‘è€…é¦–é€‰æˆæƒç æµç¨‹")])]),t._v(". è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå‰é¢å¾ˆå¼ºè°ƒå®ƒçš„åŸå› .")]),t._v(" "),s("p",[t._v("ä½œä¸ºå¼€å‘è€…åœ¨å¯¹æ¥å¼€æ”¾å¹³å°çš„æ—¶å€™, æœ€å…³å¿ƒçš„å°±æ˜¯å®ƒä»¬æä¾›çš„å®˜æ–¹å¯¹æ¥æ–‡æ¡£äº†. è€Œ"),s("strong",[t._v("è¿™äº›æ–‡æ¡£é‡Œé¢, æœ€è®©äººå¤´ç–¼å°±æ˜¯é‚£äº›é€šä¿¡è¿‡ç¨‹ä¸­éœ€è¦ä¼ é€’çš„å‚æ•°")]),t._v("äº†. ä¸‹é¢ä»¥äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°ä¸ºä¾‹, ä¸²ä¸‹è¿™äº›å‚æ•°èƒŒåçš„å«ä¹‰, ä»¥åŠå…³é”®ç‚¹. è¿™æ ·åœ¨åšå…·ä½“æ¥å…¥æ“ä½œçš„æ—¶å€™, å°±å¯ä»¥ä¸¾é‡è‹¥è½»äº†.")]),t._v(" "),s("h5",{attrs:{id:"_3-æˆæƒç æµç¨‹ä¸­çš„å‚æ•°è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æˆæƒç æµç¨‹ä¸­çš„å‚æ•°è¯´æ˜"}},[t._v("#")]),t._v(" 3.æˆæƒç æµç¨‹ä¸­çš„å‚æ•°è¯´æ˜")]),t._v(" "),s("p",[t._v("æ¦‚æ‹¬æ¥è®², åœ¨äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡è¿™ä¸€ä¾§, æä¾›æœåŠ¡çš„å°±æ˜¯ä¸¤ä¸ªç«¯ç‚¹: è´Ÿè´£ç”Ÿæˆæˆæƒç çš„"),s("strong",[t._v("æˆæƒç«¯ç‚¹")]),t._v("ä»¥åŠè´Ÿè´£é¢å‘è®¿é—®ä»¤ç‰Œçš„"),s("strong",[t._v("ä»¤ç‰Œç«¯ç‚¹")]),t._v(". æ•´ä¸ªæˆæƒè¿‡ç¨‹ä¸­, è™½ç„¶çœ‹ç€æœ‰å¾ˆå¤šå‚æ•°, ä½†å¯ä»¥å›´ç»•è¿™ä¸¤æ¡çº¿, æ¥å¯¹å®ƒä»¬åšå½’ç±».")]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥, ç»§ç»­ä»¥å°å…”æ‰“å•è½¯ä»¶ä¸ºä¾‹, æ¥çœ‹ä¸€ä¸‹å®ƒåœ¨å¯¹æ¥äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æ—¶å€™éƒ½ç”¨åˆ°äº†å“ªäº›å‚æ•°.")]),t._v(" "),s("p",[t._v("å°æ˜åœ¨ä½¿ç”¨å°å…”æ‰“å•è½¯ä»¶çš„æ—¶å€™, "),s("strong",[t._v("é¦–å…ˆè¢«å°å…”é€šè¿‡é‡å®šå‘çš„æ–¹å¼å¼•å¯¼åˆ°äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡ä¸Š, å…¶å®å°±æ˜¯å¼•å¯¼åˆ°äº†æˆæƒæœåŠ¡çš„æˆæƒç«¯ç‚¹ä¸Š")]),t._v(". è¿™ä¸ªé‡å®šå‘çš„è¿‡ç¨‹ä¸­ç”¨åˆ°çš„å‚æ•°å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/7545bea290ff2a9fbbbd390206e6e9d8-20230729094013-qhsexg2.png",alt:"",title:"é‡å®šå‘è¿‡ç¨‹ç”¨åˆ°çš„å‚æ•°"}})]),t._v(" "),s("p",[t._v('è¿™é‡Œéœ€è¦å¼ºè°ƒçš„æ˜¯, å¯¹äº state å‚æ•°, ç°åœ¨å®˜æ–¹éƒ½æ˜¯"æ¨è"ä½¿ç”¨. å‰é¢è¯´è¿‡, '),s("strong",[t._v("OAuth 2.0 å®˜æ–¹å»ºè®®çš„é¿å… CSRF æ”»å‡»çš„æ–¹å¼, å°±æ˜¯ä½¿ç”¨ state å‚æ•°. æ‰€ä»¥å®‰å…¨èµ·è§, è¿˜æ˜¯åº”è¯¥ä½¿ç”¨")]),t._v(".")]),t._v(" "),s("p",[t._v("æ¥ç€, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°æˆæƒæœåŠ¡çš„æˆæƒç«¯ç‚¹, ä¼šå‘å°å…”è½¯ä»¶åšå‡ºå“åº”. è¿™ä¸ª"),s("strong",[t._v("å“åº”çš„è¿‡ç¨‹ç”¨åˆ°çš„åŸºæœ¬å‚æ•°")]),t._v(", å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/9930a2dbe95e73b263e0c6d4eb3cf079-20230729094013-wvrdg8d.png",alt:"",title:"æˆæƒç«¯ç‚¹å“åº”å°å…”è½¯ä»¶ç”¨åˆ°çš„å‚æ•°"}})]),t._v(" "),s("p",[t._v("å¯¹äºæˆæƒç  code çš„å€¼, ä¸€èˆ¬å»ºè®®çš„æœ€é•¿ç”Ÿå‘½å‘¨æœŸæ˜¯ 10 åˆ†é’Ÿ. å¦å¤–å°å…”æ‰“å•è½¯ä»¶åªèƒ½è¢«å…è®¸ä½¿ç”¨ä¸€æ¬¡è¯¥æˆæƒç çš„å€¼, å¦‚æœä½¿ç”¨ä¸€æ¬¡ä¹‹åè¿˜ç”¨åŒæ ·çš„æˆæƒç å€¼æ¥è¯·æ±‚, "),s("strong",[t._v("æˆæƒæœåŠ¡å¿…é¡»æ‹’ç»")]),t._v(".")]),t._v(" "),s("p",[t._v("å¯¹äºè¿™æ¬¡çš„ state å€¼, æˆæƒæœåŠ¡æ¯æ¬¡éƒ½æ˜¯å¿…é¡»è¦è¿”å›ç»™å°å…”æ‰“å•è½¯ä»¶çš„. æ— è®ºå°å…”æ‰“å•è½¯ä»¶åœ¨èµ·åˆçš„æ—¶å€™æœ‰æ²¡æœ‰å‘é€è¯¥å€¼, éƒ½å¿…é¡»è¿”å›å›å», å¦‚æœæ²¡æœ‰å°±è¿”å›ç©º. è¿™æ ·å½“å°å…”æ‰“å•è½¯ä»¶æ—¥åå‡çº§å¢åŠ è¯¥å€¼çš„æ—¶å€™, äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°å°±ä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç é€»è¾‘äº†.")]),t._v(" "),s("p",[s("strong",[t._v("åœ¨æ‹¿åˆ°æˆæƒç  code çš„å€¼ä¹‹å, æ¥ä¸‹æ¥å°±æ˜¯å°å…”æ‰“å•è½¯ä»¶å‘äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°çš„æˆæƒæœåŠ¡çš„ä»¤ç‰Œç«¯ç‚¹å‘èµ·è¯·æ±‚, ç”³è¯·è®¿é—®ä»¤ç‰Œ")]),t._v(". è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦ä¼ é€’çš„åŸºæœ¬å‚æ•°, å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/8f38e1ad05b9ed1069529ee3677e39cd-20230729094013-28diykq.png",alt:"",title:"ç”³è¯·è®¿é—®ä»¤ç‰Œéœ€è¦ä¼ é€’çš„åŸºæœ¬å‚æ•°"}})]),t._v(" "),s("p",[t._v("åœ¨æˆæƒæœåŠ¡æ¥æ”¶åˆ°å°å…”æ‰“å•è½¯ä»¶ç”³è¯·è®¿é—®ä»¤ç‰Œçš„è¯·æ±‚å, åƒæˆæƒç«¯ç‚¹ä¸€æ ·, "),s("strong",[t._v("ä»¤ç‰Œç«¯ç‚¹ä¹Ÿéœ€è¦å‘å°å…”æ‰“å•è½¯ä»¶åšå‡ºå“åº”. è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°çš„åŸºæœ¬å‚æ•°")]),t._v(", å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/1fba77efe0f62e03728da503e9d84536-20230729094013-20gt0p1.png",alt:"",title:"ä»¤ç‰Œç«¯ç‚¹å“åº”å°å…”è½¯ä»¶æ¶‰åŠçš„å‚æ•°"}})]),t._v(" "),s("p",[t._v("å¯¹äºè¿™é‡Œè¿”å›çš„ scope å€¼, è¦å¼ºè°ƒä¸‹, å…¶å®å°±æ˜¯å°å…”è½¯ä»¶"),s("strong",[t._v("è¢«å…è®¸çš„å®é™…çš„æƒé™èŒƒå›´")]),t._v(", å› ä¸ºå°æ˜æœ‰å¯èƒ½ç»™å°å…”è½¯ä»¶æˆäºˆäº†å°äºå®ƒåœ¨å¼€æ”¾å¹³å°æ³¨å†Œæ—¶ç”³è¯·çš„æƒé™èŒƒå›´. æ¯”å¦‚, å°å…”æ‰“å•è½¯ä»¶ç”³è¯·äº†æŸ¥è¯¢å†å²è®¢å•, æŸ¥è¯¢å½“å¤©è®¢å•ä¸¤ä¸ª API çš„æƒé™, ä½†å°æ˜å¯èƒ½åªç»™å°å…”æˆæƒäº†æŸ¥è¯¢å½“å¤©è®¢å• API çš„æƒé™.")]),t._v(" "),s("h5",{attrs:{id:"_4-æ€»ç»“-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€»ç»“-5"}},[t._v("#")]),t._v(" 4.æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ¬èŠ‚éœ€è¦è®°ä½ä»¥ä¸‹ä¸‰ç‚¹å†…å®¹.")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å½“æœ‰å¤šä¸ªå—ä¿æŠ¤èµ„æºæœåŠ¡çš„æ—¶å€™, åŸºæœ¬çš„é‰´æƒå·¥ä½œ, åŒ…æ‹¬è®¿é—®ä»¤ç‰Œçš„éªŒè¯, ç¬¬ä¸‰æ–¹è½¯ä»¶åº”ç”¨ä¿¡æ¯çš„éªŒè¯éƒ½åº”è¯¥æŠ½å‡ºä¸€ä¸ª API ç½‘å…³å±‚, å¹¶æŠŠè¿™äº›åŸºæœ¬çš„å·¥ä½œæ”¾åˆ°è¿™ä¸ª API ç½‘å…³å±‚.")])]),t._v(" "),s("li",[t._v("**å„å¤§å¼€æ”¾å¹³å°éƒ½æ˜¯æ¨èä½¿ç”¨æˆæƒç è®¸å¯æµç¨‹, æ— è®ºæ˜¯ç½‘é¡µç‰ˆçš„ Web åº”ç”¨ç¨‹åº, è¿˜æ˜¯ç§»åŠ¨åº”ç”¨ç¨‹åº. **")]),t._v(" "),s("li",[t._v("**å¯¹äºç¬¬ä¸‰æ–¹è½¯ä»¶å¼€å‘è€…é‡ç‚¹å…³æ³¨çš„å‚æ•°, å¯ä»¥ä»æˆæƒæœåŠ¡çš„æˆæƒç«¯ç‚¹å’Œä»¤ç‰Œç«¯ç‚¹æ¥åŒºåˆ†, æˆæƒç«¯ç‚¹é‡ç‚¹æ˜¯æˆæƒç è¯·æ±‚å’Œå“åº”çš„å¤„ç†, ä»¤ç‰Œç«¯ç‚¹é‡ç‚¹æ˜¯è®¿é—®ä»¤ç‰Œè¯·æ±‚å’Œå“åº”çš„å¤„ç†. **")])]),t._v(" "),s("h4",{attrs:{id:"oauth-2-0å¸¸è§é—®é¢˜ç­”ç–‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oauth-2-0å¸¸è§é—®é¢˜ç­”ç–‘"}},[t._v("#")]),t._v(" OAuth 2.0å¸¸è§é—®é¢˜ç­”ç–‘")]),t._v(" "),s("p",[t._v("è¿™é‡Œå½’çº³å‡ºäº†å‡ ä¸ªå¸¸è§ç–‘é—®:")]),t._v(" "),s("ul",[s("li",[t._v("å‘æ˜ OAuth çš„ç›®çš„åˆ°åº•æ˜¯ä»€ä¹ˆ?")]),t._v(" "),s("li",[t._v("OAuth 2.0 æ˜¯èº«ä»½è®¤è¯åè®®å—?")]),t._v(" "),s("li",[t._v("æœ‰äº†åˆ·æ–°ä»¤ç‰Œ, æ˜¯ä¸æ˜¯å°±å¯ä»¥è®©è®¿é—®ä»¤ç‰Œä¸€ç›´æœ‰æ•ˆäº†?")]),t._v(" "),s("li",[t._v("ä½¿ç”¨äº† HTTPS, æ˜¯ä¸æ˜¯å°±èƒ½ç¡®ä¿ JWT æ ¼å¼ä»¤ç‰Œçš„æ•°æ®å®‰å…¨?")]),t._v(" "),s("li",[t._v("ID ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œä¹‹é—´æœ‰è”ç³»å—?")]),t._v(" "),s("li",[t._v("PKCE åè®®åˆ°åº•è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜?")])]),t._v(" "),s("h5",{attrs:{id:"_1-å‘æ˜oauthçš„ç›®çš„åˆ°åº•æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‘æ˜oauthçš„ç›®çš„åˆ°åº•æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1.å‘æ˜OAuthçš„ç›®çš„åˆ°åº•æ˜¯ä»€ä¹ˆ?")]),t._v(" "),s("p",[t._v("**OAuth åè®®çš„è®¾è®¡åˆè¡·, å°±æ˜¯è®©æœ€ç»ˆç”¨æˆ·ä¹Ÿå°±æ˜¯èµ„æºæ‹¥æœ‰è€…(å°æ˜), å°†ä»–ä»¬åœ¨å—ä¿æŠ¤èµ„æºæœåŠ¡å™¨(äº¬ä¸œå•†å®¶å¼€æ”¾å¹³å°)ä¸Šçš„éƒ¨åˆ†æƒé™(æŸ¥è¯¢å½“å¤©è®¢å•)å§”æ‰˜ç»™ç¬¬ä¸‰æ–¹åº”ç”¨(å°å…”æ‰“å•è½¯ä»¶), ä½¿å¾—ç¬¬ä¸‰æ–¹åº”ç”¨(å°å…”)èƒ½å¤Ÿä»£è¡¨æœ€ç»ˆç”¨æˆ·(å°æ˜)æ‰§è¡Œæ“ä½œ(æŸ¥è¯¢å½“å¤©è®¢å•). **")]),t._v(" "),s("p",[s("mark",[t._v("è¿™ä¾¿æ˜¯ OAuth åè®®è®¾è®¡çš„ç›®çš„. åœ¨ OAuth åè®®ä¸­, é€šè¿‡ä¸º")]),t._v("â€‹"),s("mark",[s("strong",[t._v("æ¯ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶å’Œæ¯ä¸ªç”¨æˆ·çš„ç»„åˆ")])]),t._v("â€‹"),s("mark",[t._v("åˆ†åˆ«ç”Ÿæˆå¯¹å—ä¿æŠ¤èµ„æºå…·æœ‰")]),t._v("â€‹"),s("mark",[s("strong",[t._v("å—é™çš„è®¿é—®æƒé™çš„å‡­æ®, ä¹Ÿå°±æ˜¯è®¿é—®ä»¤ç‰Œ")])]),t._v("â€‹"),s("mark",[t._v(", æ¥ä»£æ›¿ä¹‹å‰çš„ç”¨æˆ·åå’Œå¯†ç . ")]),t._v("â€‹"),s("mark",[s("strong",[t._v("è€Œç”Ÿæˆè®¿é—®ä»¤ç‰Œä¹‹å‰çš„ç™»å½•æ“ä½œ, åˆæ˜¯åœ¨ç”¨æˆ·è·Ÿå¹³å°ä¹‹é—´è¿›è¡Œçš„, ç¬¬ä¸‰æ–¹è½¯ä»¶æ ¹æœ¬æ— ä»å¾—çŸ¥ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯")])]),t._v("â€‹ **. **")]),t._v(" "),s("p",[t._v("è¿™æ ·ç¬¬ä¸‰æ–¹è½¯ä»¶çš„é€»è¾‘å¤„ç†å°±å¤§å¤§ç®€åŒ–äº†, å®ƒä»Šåçš„åŠ¨ä½œå°±å˜æˆäº†"),s("strong",[t._v("è¯·æ±‚è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨è®¿é—®ä»¤ç‰Œ, è®¿é—®å—ä¿æŠ¤èµ„æº")]),t._v(", åŒæ—¶åœ¨ç¬¬ä¸‰æ–¹è½¯ä»¶è°ƒç”¨å¤§é‡ API çš„æ—¶å€™, **ä¸å†ä¼ è¾“ç”¨æˆ·åå’Œå¯†ç , ä»è€Œå‡å°‘äº†ç½‘ç»œå®‰å…¨çš„æ”»å‡»é¢. **")]),t._v(" "),s("p",[t._v("ä»å®‰å…¨çš„è§’åº¦æ¥è®², "),s("strong",[t._v("ä¸ºæ¯ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶å’Œæ¯ä¸ªç”¨æˆ·çš„ç»„åˆæ¥ç”Ÿæˆä¸€ä¸ªè®¿é—®ä»¤ç‰Œ")]),t._v("çš„æ–¹å¼, å¯ä»¥å‡å°‘å¯¹å¹³å°æ›´å¤šç”¨æˆ·é€ æˆçš„å±å®³. å› ä¸ºè¿™æ ·ä¸€æ¥, å•ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶è¢«æ”»ç ´è€Œå¸¦æ¥çš„å±å®³, ä»…ä»…ä¼šè®©è¿™ä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶çš„ç”¨æˆ·å—åˆ°å½±å“.")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆæœ‰çš„åŒå­¦å°±è¦ä¼šé—®äº†, è¿™æ ·æ”»å‡»çš„å¯¹è±¡å°±ä¼šè½¬ç§»åˆ°æˆæƒæœåŠ¡èº«ä¸Š. è¿™ä¸ªæƒ³æ³•æ²¡é”™, ä½†ä¿æŠ¤ä¸€ä¸ªæˆæƒæœåŠ¡è‚¯å®šè¦æ¯”ä¿æŠ¤æˆåƒä¸Šä¸‡ä¸ª, ç”±ä¸åŒç ”å‘äººå‘˜å¼€å‘çš„ç¬¬ä¸‰æ–¹è½¯ä»¶å®¹æ˜“å¾—å¤š.")]),t._v(" "),s("h5",{attrs:{id:"_2-oauth-2-0æ˜¯èº«ä»½è®¤è¯åè®®å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-oauth-2-0æ˜¯èº«ä»½è®¤è¯åè®®å—"}},[t._v("#")]),t._v(" 2.OAuth 2.0æ˜¯èº«ä»½è®¤è¯åè®®å—?")]),t._v(" "),s("p",[t._v("å‰é¢ä¸€ç›´åœ¨å¼ºè°ƒ, "),s("mark",[s("strong",[t._v('OAuth 2.0 æ˜¯ä¸€ç§æˆæƒåè®®, "å®ƒä¸€å¿ƒåªä¸“æ³¨äºå¹²å¥½æˆæƒè¿™ä»¶äº‹å„¿", OAuth 2.0 ä¸æ˜¯èº«ä»½è®¤è¯åè®®')])]),t._v("â€‹ **. ** å¾ˆå¤šäººéƒ½æ›¾é”™è¯¯åœ°è®¤ä¸ºå®ƒæ˜¯èº«ä»½è®¤è¯åè®®. å› ä¸ºä»–ä»¬è§‰å¾—æœ‰ç”¨æˆ·å‚ä¸å…¶ä¸­, æ¯”å¦‚å°æ˜åœ¨ä½¿ç”¨å°å…”æ‰“å•è½¯ä»¶ä¹‹å‰, è¦å‘æˆæƒæœåŠ¡è¿›è¡Œç™»å½•æ“ä½œä»è€Œè¿›è¡Œèº«ä»½è®¤è¯ , é‚£ OAuth 2.0 å°±åº”è¯¥æ˜¯ä¸€ä¸ªèº«ä»½è®¤è¯åè®®å•Š.")]),t._v(" "),s("p",[t._v("ä½†æ˜¯, å°æ˜å¿…é¡»ç™»å½•ä¹‹åæ‰èƒ½è¿›è¡Œæˆæƒ, "),s("strong",[t._v("æ˜¯ä¸€ä¸ªé¢å¤–çš„éœ€æ±‚, ç™»å½•è·Ÿæˆæƒä½“ç³»æ˜¯ç‹¬ç«‹")]),t._v('çš„. è™½ç„¶ç™»å½•æ“ä½œçœ‹ä¼¼ "å†…åµŒ" åœ¨äº† OAuth 2.0 çš„æµç¨‹ä¸­, ä½†ç”Ÿäº§ç¯å¢ƒä¸­'),s("strong",[t._v("ç™»å½•å’Œæˆæƒè¿˜æ˜¯ä¸¤å¥—ç‹¬ç«‹å­˜åœ¨çš„ç³»ç»Ÿ")]),t._v('. æ‰€ä»¥è¯´, **åƒè¿™ç§ "å†…åµŒ" çš„èº«ä»½è®¤è¯è¡Œä¸º, å¹¶ä¸æ˜¯è¯´ OAuth 2.0 è‡ªèº«æ‰¿æ‹…èµ·äº†èº«ä»½è®¤è¯åè®®çš„è´£ä»». **')]),t._v(" "),s("p",[t._v("åŒæ—¶, "),s("strong",[t._v("èº«ä»½è®¤è¯ä¼šå‘Šè¯‰ç¬¬ä¸‰æ–¹è½¯ä»¶å½“å‰çš„ç”¨æˆ·æ˜¯è°, ä½†å®é™…ä¸Š OAuth 2.0 è‡ªå§‹è‡³ç»ˆéƒ½æ²¡æœ‰å‘ç¬¬ä¸‰æ–¹è½¯ä»¶é€éœ²è¿‡å…³äºç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯")]),t._v(". è¿™ä¸€ç‚¹, åœ¨è®²å‘æ˜ OAuth åè®®çš„ç›®çš„æ—¶ä¹Ÿæåˆ°è¿‡. å¯ä»¥å†æƒ³æƒ³å°å…”æ‰“å•è½¯ä»¶çš„ä¾‹å­, çœ‹æ˜¯ä¸æ˜¯è¿™æ ·: "),s("strong",[t._v("å°å…”æ‰“å•è½¯ä»¶æ°¸è¿œä¹Ÿä¸ä¼šçŸ¥é“å°æ˜çš„ä»»ä½•ä¿¡æ¯, å®ƒä»…ä»…æ˜¯è¯·æ±‚è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨è®¿é—®ä»¤ç‰Œå¹¶æœ€ç»ˆè°ƒç”¨æŸ¥è¯¢è®¢å•çš„ API")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"_3-æœ‰äº†åˆ·æ–°ä»¤ç‰Œ-æ˜¯ä¸æ˜¯å°±å¯ä»¥è®©è®¿é—®ä»¤ç‰Œä¸€ç›´æœ‰æ•ˆäº†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æœ‰äº†åˆ·æ–°ä»¤ç‰Œ-æ˜¯ä¸æ˜¯å°±å¯ä»¥è®©è®¿é—®ä»¤ç‰Œä¸€ç›´æœ‰æ•ˆäº†"}},[t._v("#")]),t._v(" 3.æœ‰äº†åˆ·æ–°ä»¤ç‰Œ,æ˜¯ä¸æ˜¯å°±å¯ä»¥è®©è®¿é—®ä»¤ç‰Œä¸€ç›´æœ‰æ•ˆäº†?")]),t._v(" "),s("p",[t._v("è¦å›ç­”è¿™ä¸ªé—®é¢˜, å…ˆå¤ä¹ ä¸‹è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œç›¸å…³çš„å‡ ä¸ªçŸ¥è¯†ç‚¹.")]),t._v(" "),s("ul",[s("li",[t._v("ç¬¬ä¸€, OAuth 2.0 çš„æ ¸å¿ƒæ˜¯æˆæƒ, æˆæƒçš„æ ¸å¿ƒæ˜¯ä»¤ç‰Œ, ä¹Ÿå°±æ˜¯è®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("li",[t._v("ç¬¬äºŒ, ä¸ºäº†æé«˜ç”¨æˆ·çš„ä½“éªŒ, OAuth 2.0 æä¾›äº†åˆ·æ–°ä»¤ç‰Œçš„æœºåˆ¶, ä½¿å¾—è®¿é—®ä»¤ç‰Œè¿‡æœŸå, ç¬¬ä¸‰æ–¹è½¯ä»¶åœ¨æ— éœ€ç”¨æˆ·å†æ¬¡æˆæƒçš„æƒ…å†µä¸‹, å¯ä»¥é‡æ–°è¯·æ±‚ä¸€ä¸ªè®¿é—®ä»¤ç‰Œ.")]),t._v(" "),s("li",[t._v("ç¬¬ä¸‰, åœ¨ä½¿ç”¨ä¸Š, "),s("mark",[s("strong",[t._v("åˆ·æ–°ä»¤ç‰Œåªèƒ½ç”¨åœ¨æˆæƒæœåŠ¡ä¸Š, è€Œè®¿é—®ä»¤ç‰Œåªèƒ½ç”¨åœ¨å—ä¿æŠ¤èµ„æºæœåŠ¡ä¸Š")])]),t._v("â€‹ **. **")])]),t._v(" "),s("p",[t._v("æœ‰äº†è¿™äº›çŸ¥è¯†åšåŸºç¡€, å¯ä»¥ç»§ç»­åˆ†æè¿™ä¸ªé—®é¢˜äº†.")]),t._v(" "),s("p",[t._v('å½“è®¿é—®ä»¤ç‰Œè¢« "é€’ç»™" å—ä¿æŠ¤èµ„æºæœåŠ¡çš„æ—¶å€™, å—ä¿æŠ¤èµ„æºæœåŠ¡éœ€è¦å¯¹è®¿é—®ä»¤ç‰Œè¿›è¡ŒéªŒè¯, è¿˜è¦å¯¹è®¿é—®ä»¤ç‰Œå…³è”çš„æƒé™å’Œç¬¬ä¸‰æ–¹è½¯ä»¶çš„è¯·æ±‚è¿›è¡Œæƒé™åŒ¹é…æ ¡éªŒ. å½“è®¿é—®ä»¤ç‰Œè¿‡æœŸçš„æ—¶å€™, ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè¯·æ±‚åˆ°çš„è®¿é—®ä»¤ç‰Œ, æ˜¯'),s("strong",[t._v("æˆæƒæœåŠ¡é‡æ–°ç”Ÿæˆ")]),t._v("çš„, è€Œä¸æ˜¯å»¶é•¿äº†åŸè®¿é—®ä»¤ç‰Œçš„æœ‰æ•ˆæœŸ.")]),t._v(" "),s("p",[t._v("å½“å‰çš„è¿™ä¸ªåˆ·æ–°ä»¤ç‰Œè¢«ä½¿ç”¨ä¹‹å, æˆæƒæœåŠ¡å¯ä»¥è‡ªè¡Œå†³å®šæ˜¯é¢å‘ä¸€ä¸ªæ–°çš„åˆ·æ–°ä»¤ç‰Œ, è¿˜æ˜¯ä»ç„¶ç»™ç¬¬ä¸‰æ–¹è½¯ä»¶è¿”å›ä¸Šä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œ. å®‰å…¨èµ·è§, å»ºè®®æ˜¯"),s("strong",[t._v("è¿”å›ä¸€ä¸ªæ–°çš„åˆ·æ–°ä»¤ç‰Œ")]),t._v(". è¿™æ—¶å¯èƒ½å°±æœ‰ä¸€ä¸ªç–‘é—®äº†: "),s("strong",[t._v("ç¬¬ä¸‰æ–¹è½¯ä»¶å·²ç»æ¢äº†ä¸€ä¸ªè®¿é—®ä»¤ç‰Œäº†, åˆ·æ–°ä»¤ç‰Œåˆä¸€ç›´å­˜åœ¨, é‚£æ˜¯ä¸æ˜¯å°±å¯ä»¥ä¸€ç›´ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œæ¥è·å–è®¿é—®ä»¤ç‰Œäº†å‘¢?")])]),t._v(" "),s("p",[t._v("è¦çŸ¥é“çš„æ˜¯, **åˆ·æ–°ä»¤ç‰Œä¹Ÿæœ‰æœ‰æ•ˆæœŸ. ** å°½ç®¡ç”Ÿæˆäº†æ–°çš„åˆ·æ–°ä»¤ç‰Œ, ä½†å®ƒçš„æœ‰æ•ˆæœŸä¸ä¼šæ”¹å˜, æœ‰æ•ˆæœŸçš„æ—¶é—´æˆ³ä»ç„¶æ˜¯ä¸Šä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œçš„. åˆ·æ–°ä»¤ç‰Œçš„æœ‰æ•ˆæœŸåˆ°äº†, å°±ä¸èƒ½å†ç»§ç»­ç”¨å®ƒæ¥ç”³è¯·æ–°çš„è®¿é—®ä»¤ç‰Œäº†.")]),t._v(" "),s("h5",{attrs:{id:"_4-ä½¿ç”¨äº†https-æ˜¯ä¸æ˜¯å°±èƒ½ç¡®ä¿jwtæ ¼å¼ä»¤ç‰Œçš„æ•°æ®å®‰å…¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨äº†https-æ˜¯ä¸æ˜¯å°±èƒ½ç¡®ä¿jwtæ ¼å¼ä»¤ç‰Œçš„æ•°æ®å®‰å…¨"}},[t._v("#")]),t._v(" 4.ä½¿ç”¨äº†HTTPS,æ˜¯ä¸æ˜¯å°±èƒ½ç¡®ä¿JWTæ ¼å¼ä»¤ç‰Œçš„æ•°æ®å®‰å…¨?")]),t._v(" "),s("p",[s("strong",[t._v("OAuth 2.0 çš„ä½¿ç”¨ä»æ¥éƒ½ä¸åº”è¯¥è„±ç¦» HTTPS")]),t._v(". å› ä¸ºè®¿é—®ä»¤ç‰Œ, åº”ç”¨å¯†é’¥æ•æ„Ÿä¿¡æ¯è¦åœ¨ç½‘ç»œä¸Šä¼ è¾“, éƒ½ç¦»ä¸å¼€ HTTPS çš„ä¿æŠ¤. ä½†æ˜¯, HTTPS ä¹Ÿåªæ˜¯ä¿è¯äº†è®¿é—®ä»¤ç‰Œç­‰é‡è¦ä¿¡æ¯åœ¨ç½‘ç»œä¼ è¾“ä¸Šçš„å®‰å…¨.")]),t._v(" "),s("p",[t._v("åœ¨ OAuth 2.0 çš„è§„èŒƒä¸­, è®¿é—®ä»¤ç‰Œå¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶æ˜¯ä¸é€æ˜çš„, ä»æ¥éƒ½ä¸åº”è¯¥è¢«ä»»ä½•ç¬¬ä¸‰æ–¹è½¯ä»¶è§£æåˆ°. ç”±äº JWT æ ¼å¼çš„ä»¤ç‰Œè‡ªåŒ…å«äº†ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯, æ¯”å¦‚ç”¨æˆ·æ ‡è¯†, å› æ­¤ä»…ä»…å¯¹å®ƒè¿›è¡Œç­¾åè¿˜ä¸å¤Ÿ. è¦é¿å…ç¬¬ä¸‰æ–¹è½¯ä»¶æœ‰æœºä¼šè·å–è®¿é—®ä»¤ç‰Œæ‰€åŒ…å«çš„ä¿¡æ¯, é‚£åœ¨ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶äº¤äº’çš„ç¯å¢ƒä¸‹ä½¿ç”¨ JWT æ ¼å¼çš„ä»¤ç‰Œæ—¶, è¿˜è¦å¯¹å®ƒ"),s("strong",[t._v("è¿›è¡ŒåŠ å¯†")]),t._v("æ¥ä¿éšœä»¤ç‰Œçš„å®‰å…¨, è€Œä¸æ˜¯ä»…ä»…ä¾é  HTTPS.")]),t._v(" "),s("h5",{attrs:{id:"_5-idä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œä¹‹é—´æœ‰è”ç³»å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-idä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œä¹‹é—´æœ‰è”ç³»å—"}},[t._v("#")]),t._v(" 5.IDä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œä¹‹é—´æœ‰è”ç³»å—?")]),t._v(" "),s("p",[t._v("å‰é¢åœ¨ç”¨ OAuth 2.0 å®ç°ä¸€ä¸ª OpenID Connect èº«ä»½è®¤è¯åè®®çš„æ—¶å€™, è®²åˆ°äº† ID ä»¤ç‰Œ. è¿™é‡Œå†è§£é‡Šä¸€ä¸‹, å› ä¸ºè®¤è¯†åˆ° ID ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œçš„è”ç³»ä¸åŒºåˆ«, å¯¹äºåˆ©ç”¨ OAuth 2.0 æ­å»ºä¸€ä¸ªèº«ä»½è®¤è¯åè®®æ¥è¯´å¤ªé‡è¦äº†.")]),t._v(" "),s("p",[t._v("å…ˆæ¥æ€»ç»“ä¸‹ ID ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œçš„ä½œç”¨:")]),t._v(" "),s("ol",[s("li",[t._v("ID ä»¤ç‰Œ, ä¹Ÿå°±æ˜¯ "),s("strong",[t._v("ID_TOKEN")]),t._v(", ä»£è¡¨çš„æ˜¯"),s("strong",[t._v("ç”¨æˆ·èº«ä»½ä»¤ç‰Œ")]),t._v(", å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå•ç‹¬çš„"),s("strong",[t._v("èº«ä»½è®¤è¯ç»“æœ")]),t._v(", æ°¸è¿œä¸ä¼šåƒè®¿é—®ä»¤ç‰Œé‚£æ ·ä½œä¸ºä¸€ä¸ªå‚æ•°, å»ä¼ é€’ç»™å…¶å®ƒå¤–éƒ¨æœåŠ¡;")]),t._v(" "),s("li",[t._v("è®¿é—®ä»¤ç‰Œ, ä¹Ÿå°±æ˜¯ "),s("strong",[t._v("ACCESS_TOKEN")]),t._v(", å°±æ˜¯ä¸€ä¸ªä»¤ç‰Œ, æ˜¯"),s("strong",[t._v("è¦è¢«ç¬¬ä¸‰æ–¹è½¯ä»¶ç”¨æ¥ä½œä¸ºå‡­è¯, ä»è€Œä»£è¡¨ç”¨æˆ·å»è¯·æ±‚å—ä¿æŠ¤èµ„æºæœåŠ¡çš„")]),t._v(".")])]),t._v(" "),s("p",[t._v("è¿™ä¸¤ç§ä»¤ç‰Œæ˜¯æˆªç„¶ä¸åŒçš„. æ¥ä¸‹æ¥å°±åˆ†æä¸‹, å®ƒä»¬çš„åŒºåˆ«éƒ½ä½“ç°åœ¨å“ªäº›æ–¹é¢.")]),t._v(" "),s("ul",[s("li",[t._v("ç¬¬ä¸€, "),s("strong",[t._v("ID ä»¤ç‰Œæ˜¯å¯¹è®¿é—®ä»¤ç‰Œçš„è¡¥å……, è€Œä¸æ˜¯è¦æ›¿æ¢è®¿é—®ä»¤ç‰Œ")]),t._v(". ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™æ ·åŒä»¤ç‰Œçš„æ–¹å¼, å°±æ˜¯æƒ³è®©æ—©å…ˆå­˜åœ¨çš„è®¿é—®ä»¤ç‰Œ, å¯ä»¥åœ¨ OAuth 2.0 ä¸­ç»§ç»­ä¿æŒå¯¹ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ä¸é€æ˜æ€§, è€Œè®©åæ¥æ–°å¢çš„ ID ä»¤ç‰Œè¦èƒ½å¤Ÿè¢«è§£æ, ç›®çš„å°±æ˜¯æ–¹ä¾¿åº”ç”¨åˆ°"),s("strong",[t._v("èº«ä»½è®¤è¯åè®®")]),t._v("ä¸­.")]),t._v(" "),s("li",[t._v("ç¬¬äºŒ, "),s("strong",[t._v("ID ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œæœ‰ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ID ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸç›¸å¯¹æ¥è¯´æ›´çŸ­äº›")]),t._v(". å› ä¸º ID ä»¤ç‰Œçš„ä½œç”¨å°±æ˜¯ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„èº«ä»½è®¤è¯ç»“æœ, å®ƒçš„ä½¿å‘½å°±æ˜¯ç”¨æ¥æ ‡è¯†ç”¨æˆ·çš„. è€Œè¿™ä¸ªæ ‡è¯†å¹¶ä¸æ˜¯ç”¨æˆ·å, ç”¨æˆ·ç™»å½•çš„æ—¶å€™ç”¨çš„æ˜¯ç”¨æˆ·åè€Œä¸æ˜¯è¿™ä¸ª ID ä»¤ç‰Œ, æ‰€ä»¥å¦‚æœç”¨æˆ·æ³¨é”€æˆ–è€…é€€å‡ºäº†ç™»å½•, ID ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸå°±éšä¹‹ç»“æŸäº†. è®¿é—®ä»¤ç‰Œå¯ä»¥åœ¨ç”¨æˆ·ç¦»å¼€åçš„å¾ˆé•¿æ—¶é—´å†…, ç»§ç»­è¢«ç¬¬ä¸‰æ–¹è½¯ä»¶ç”¨æ¥è¯·æ±‚å—ä¿æŠ¤èµ„æºæœåŠ¡. æ¯”å¦‚, å°æ˜ä½¿ç”¨äº†å°å…”æ‰“å•è½¯ä»¶çš„æ‰¹é‡å¯¼å‡ºè®¢å•åŠŸèƒ½, å¦‚æœè€—æ—¶ç›¸å¯¹æ¯”è¾ƒé•¿, å°æ˜ä¸å¿…ä¸€ç›´åœ¨åœº.")])]),t._v(" "),s("h5",{attrs:{id:"_6-pkceåè®®åˆ°åº•è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-pkceåè®®åˆ°åº•è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" 6.PKCEåè®®åˆ°åº•è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜?")]),t._v(" "),s("p",[t._v("è¦ç†è§£ PKCE åè®®åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜, å°±è¦å…ˆçœ‹ä¸€ä¸‹å®ƒè¢«æ¨å‡ºçš„èƒŒæ™¯. 2012 å¹´ 10 æœˆ OAuth 2.0 çš„æ­£å¼æˆæƒåè®®æ¡†æ¶, ä¹Ÿå°±æ˜¯å®˜æ–¹çš„ RFC 6749 è¢«æ­£å¼å‘å¸ƒ, 2015 å¹´ 9 æœˆå¢è¡¥äº† PKCE åè®®, ä¹Ÿå°±æ˜¯å®˜æ–¹çš„ RFC 7636. ä»æ—¶é—´ä¸Šæ¥çœ‹, ä»æ­£å¼å‘å¸ƒ OAuth 2.0 æˆæƒåè®®åˆ°å¢è¡¥å‘å¸ƒäº† PKCE åè®®, æ•´æ•´é—´éš”äº†ä¸‰å¹´, è€Œ"),s("strong",[t._v("è¿™ä¸‰å¹´æ°æ°æ˜¯ç§»åŠ¨åº”ç”¨è“¬å‹ƒå‘å±•çš„æ—¶æœŸ")]),t._v(".")]),t._v(" "),s("p",[t._v("åŒæ—¶, åœ¨åŸç”Ÿçš„ç§»åŠ¨å®¢æˆ·ç«¯åº”ç”¨ä¿å­˜ç§˜é’¥åˆå­˜åœ¨ç‰¹æ®Šçš„å®‰å…¨é—®é¢˜, ä½¿ç”¨ OAuth 2.0 æˆæƒç è®¸å¯ç±»å‹çš„å®¢æˆ·ç«¯åˆå®¹æ˜“å—åˆ°æˆæƒç çªƒå¬çš„æ”»å‡».")]),t._v(" "),s("p",[t._v("æ‰€ä»¥, PKCE è¢«å¢è¡¥å‘å¸ƒçš„èƒŒæ™¯æ˜¯, ç§»åŠ¨åº”ç”¨å¤§åŠ›å‘å±•, åŒæ—¶åŸç”Ÿå®¢æˆ·ç«¯ä½¿ç”¨ OAuth 2.0 é¢ä¸´ç€å®‰å…¨é£é™©. è¿™æ ·å°±èƒ½ç†è§£äº†, "),s("strong",[t._v("å‘å¸ƒ PKCE åè®®çš„ç›®çš„, ä¸»è¦å°±æ˜¯ç¼“è§£é’ˆå¯¹å…¬å¼€å®¢æˆ·ç«¯çš„æ”»å‡», æé«˜æˆæƒç ä½¿ç”¨çš„å®‰å…¨æ€§")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"ç»“æŸè¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“æŸè¯­"}},[t._v("#")]),t._v(" ç»“æŸè¯­")]),t._v(" "),s("h4",{attrs:{id:"æŠŠå­¦ä¹ å½“æˆä¸€ç§ä¹ æƒ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŠŠå­¦ä¹ å½“æˆä¸€ç§ä¹ æƒ¯"}},[t._v("#")]),t._v(" æŠŠå­¦ä¹ å½“æˆä¸€ç§ä¹ æƒ¯")]),t._v(" "),s("p",[s("strong",[t._v("å­¦ä¹ ä»æ¥éƒ½ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…, å¤¸å¼ ä¸€ç‚¹è®²æœ‰ç‚¹åäººæ€§")]),t._v(". ä½†æ˜¯, å­¦ä¹ ä¸€å®šè¦å…»æˆä¸€ç§ä¹ æƒ¯. ã€Šç¨‹åºå‘˜æ€ç»´ä¿®ç‚¼ã€‹è¿™æœ¬ä¹¦ä¸­æœ‰è¿™ä¹ˆä¸€æ®µè¯:")]),t._v(" "),s("blockquote",[s("p",[t._v("çŸ¥è¯†æŠ•èµ„ä¹Ÿæ˜¯ä¸€æ ·. ä½ éœ€è¦å®šæœŸæŠ•èµ„æœ€ä½é™åº¦çš„æ—¶é—´é‡. å…»æˆä¸€ç§ä¹ æƒ¯, å¦‚æœéœ€è¦çš„è¯. èº²åˆ°ä½ çš„å®¶åº­åŠå…¬å®¤é‡Œå»æˆ–è€…èµ°è¿›æœ‰æ— çº¿ç½‘ç»œçš„å’–å•¡å…. å¹¶éæ¯æœŸå­¦ä¹ éƒ½åŒæ ·å¯Œæœ‰æˆæ•ˆ, ä½†æ˜¯åªè¦å®šæœŸå®‰æ’å­¦ä¹ , é•¿æœŸæ¥çœ‹ä¸€å®šä¼šæˆåŠŸ. å¦‚æœä½ ä¸€ç›´åœ¨ç­‰å¾…ç©ºé—²æ—¶é—´æˆ–è€…ç­‰å¾…çµæ„Ÿçš„çªç°, é‚£ä¹ˆå®ƒæ°¸è¿œéƒ½ä¸ä¼šå‘ç”Ÿ.")])]),t._v(" "),s("p",[t._v("ä¸‹é¢å†è°ˆä¸€è°ˆå…·ä½“çš„å­¦ä¹ æ–¹æ³•.")]),t._v(" "),s("p",[t._v("è¿™é‡ŒæŒ‰ç…§å±‚æ¬¡ç”±ä½åˆ°é«˜æŠŠå­¦ä¹ åˆ†ä¸º"),s("strong",[t._v("åŸºç¡€å­¦ä¹ , åˆ†æå­¦ä¹ å’Œä¸»é¢˜å­¦ä¹ ")]),t._v(":")]),t._v(" "),s("ol",[s("li",[t._v("åŸºç¡€å­¦ä¹ , å°±æ˜¯ä»çŸ¥è¯†ç‚¹æœ€åŸºæœ¬çš„ç†è®ºå¼€å§‹å­¦ä¹ ;")]),t._v(" "),s("li",[t._v("åˆ†æå­¦ä¹ , å°±æ˜¯å¯¹çŸ¥è¯†çš„ç»“æ„è„‰ç»œåšæ¢³ç†, å¹¶å¸¦ç€é—®é¢˜å»å­¦ä¹ ;")]),t._v(" "),s("li",[t._v("ä¸»é¢˜å­¦ä¹ , å°±æ˜¯å¯¹åŒä¸€ä¸ªçŸ¥è¯†ç‚¹, åˆ†åˆ«æ‰¾åˆ°ä¸åŒçš„èµ„æ–™æ¥å­¦ä¹ .")])]),t._v(" "),s("p",[t._v('è¿™æ ·çœ‹, åŸºç¡€å­¦ä¹ å’Œåˆ†æå­¦ä¹ å±äº"ç‚¹"çš„å­¦ä¹ , è€Œä¸»é¢˜å­¦ä¹ å°±å±äº"é¢"çš„å­¦ä¹ , æ•´ä½“ä¸‹æ¥å°±æ˜¯ä»ç‚¹åˆ°é¢æ„å»ºçŸ¥è¯†ç½‘ç»œçš„è¿‡ç¨‹. æ¥ä¸‹æ¥å°±çœ‹çœ‹ OAuth 2.0 çš„å­¦ä¹ , æ˜¯æ€ä¹ˆå¯¹åº”åˆ°è¿™ä¸‰ä¸ªå±‚æ¬¡çš„.')]),t._v(" "),s("p",[t._v("åœ¨åŸºç¡€å­¦ä¹ çš„è¿‡ç¨‹ä¸­, è¦å­¦ä¹  OAuth 2.0 çš„å››ç§åŸºæœ¬è§’è‰², åŒ…æ‹¬èµ„æºæ‹¥æœ‰è€…(ä¹Ÿå°±æ˜¯ç”¨æˆ·), å®¢æˆ·ç«¯(ä¹Ÿå°±æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶), æˆæƒæœåŠ¡, å—ä¿æŠ¤èµ„æºæœåŠ¡; è¿˜è¦å­¦ OAuth 2.0 çš„å››ç§åŸºæœ¬æˆæƒè®¸å¯ç±»å‹, åŒ…æ‹¬æˆæƒç è®¸å¯ç±»å‹, éšå¼è®¸å¯ç±»å‹, å®¢æˆ·ç«¯å‡­æ®è®¸å¯ç±»å‹, èµ„æºæ‹¥æœ‰è€…å‡­æ®è®¸å¯ç±»å‹.")]),t._v(" "),s("p",[t._v('å½“ç¡®å®šäº†åŸºç¡€å­¦ä¹ é˜¶æ®µçš„å­¦ä¹ èŒƒå›´ä¹‹å, å°±è¦å°†è¿™äº›è§’è‰²å¸¦å…¥åˆ°æ¯ä¸ªè®¸å¯ç±»å‹ä¸­, è®©è¿™äº›è§’è‰²"è½¬èµ·æ¥", è¿™æ—¶å°±å¯ä»¥ç”¨å°æ˜ä½¿ç”¨å°å…”æ‰“å•è½¯ä»¶çš„ä¾‹å­ä¸²èµ·æ•´ä¸ª OAuth 2.0 çš„å·¥ä½œæµç¨‹.')]),t._v(" "),s("p",[t._v("åœ¨åˆ†æå­¦ä¹ çš„è¿‡ç¨‹ä¸­, å°±éœ€è¦å°† OAuth 2.0 çš„çŸ¥è¯†ä½“ç³»ç»“æ„è¿›è¡Œä¸€ä¸ªæ¢³ç†, åŒæ—¶æŠŠå­¦ä¹ æ—¶é‡åˆ°çš„é—®é¢˜éƒ½åˆ—å‡ºæ¥, ç„¶åé€ä¸€åˆ†æ. è¿™äº›é—®é¢˜å¯èƒ½æ˜¯: ä¸ºä»€ä¹ˆæˆæƒç è®¸å¯æµç¨‹ä¸€å®šè¦æœ‰æˆæƒç , ä¸ºä»€ä¹ˆæˆæƒç è®¸å¯ä¸€å®šè¦æœ‰ä¸¤æ¬¡é‡å®šå‘, å¦‚ä½•ç®¡ç† JWT æ ¼å¼çš„ä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸ, å½“è®¿é—®ä»¤ç‰Œå¤±æ•ˆäº†ä¸€å®šè¦è®©ç”¨æˆ·é‡æ–°æˆæƒå—, åˆ·æ–°ä»¤ç‰Œä¼šä¸€ç›´æœ‰æ•ˆå—, ID ä»¤ç‰Œå’Œè®¿é—®ä»¤ç‰Œä¹‹é—´æœ‰è”ç³»å—, ç­‰ç­‰.")]),t._v(" "),s("p",[t._v("åœ¨ä¸»é¢˜å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å¯ä»¥æŠŠè¦é‡ç‚¹ç†è§£çš„å†…å®¹å½“æˆä¸€ä¸ªä¸»é¢˜, å»æ¨ªå‘åœ°å­¦ä¹ . æ€ä¹ˆæ‰èƒ½å«åšæ¨ªå‘? æ¯”å¦‚, è¦çŸ¥é“ PKCE åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜, é‚£ä¹ˆå°±å¯ä»¥æŠŠ PKCE å½“æˆä¸€ä¸ªä¸»é¢˜æ¥å­¦ä¹ , è¦å»æŸ¥é˜…è·Ÿå®ƒç›¸å…³çš„ä»»ä½•èµ„æ–™, å¯ä»¥æ‰¾ OAuth 2.0 çš„å®˜æ–¹æ–‡æ¡£. æ€»ä¹‹, è¿™æ˜¯ä¸€ä¸ªç ”ç©¶æ–¹å‘.")]),t._v(" "),s("p",[t._v("â€‹â€‹")]),t._v(" "),s("p",[t._v("â€")]),t._v(" "),s("p",[t._v("â€")])])}),[],!1,null,null,null);s.default=e.exports}}]);