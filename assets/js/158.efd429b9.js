(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{468:function(s,_,v){"use strict";v.r(_);var t=v(7),r=Object(t.a)({},(function(){var s=this,_=s._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[_("h1",{attrs:{id:"_32-redisä¸»ä»å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_32-redisä¸»ä»å¤åˆ¶"}},[s._v("#")]),s._v(" 32.Redisä¸»ä»å¤åˆ¶")]),s._v(" "),_("h4",{attrs:{id:"ä¸»ä»å¤åˆ¶åŸºç¡€ğŸŒŸ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶åŸºç¡€ğŸŒŸ"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶åŸºç¡€ğŸŒŸ")]),s._v(" "),_("h5",{attrs:{id:"_1-æ¦‚è¿°"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚è¿°"}},[s._v("#")]),s._v(" 1.æ¦‚è¿°")]),s._v(" "),_("p",[s._v("ä¸»ä»å¤åˆ¶èƒ½è§£å†³"),_("strong",[s._v("å•ç‚¹æ•…éšœ")]),s._v("é—®é¢˜, æ˜¯å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿ"),_("strong",[s._v("é«˜å¯ç”¨")]),s._v("çš„åŸºç¡€. å¤åˆ¶æœºåˆ¶ä¸‹æ•°æ®å¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬, è¿™äº›å‰¯æœ¬å¯ä»¥ç”¨äº"),_("strong",[s._v("è¯»å†™åˆ†ç¦», æ•…éšœè½¬ç§», å®æ—¶å¤‡ä»½")]),s._v("ç­‰.")]),s._v(" "),_("p",[_("strong",[s._v("ä¸»ä»å¤åˆ¶")]),s._v("æ˜¯æŒ‡å°†ä¸€å° Redis æœåŠ¡å™¨çš„æ•°æ®, å¤åˆ¶åˆ°å…¶ä»– Redis æœåŠ¡å™¨. å‰è€…ç§°ä¸º "),_("strong",[s._v("ä¸»èŠ‚ç‚¹(master)")]),s._v(" , åè€…ç§°ä¸º "),_("strong",[s._v("ä»èŠ‚ç‚¹(slave)")]),s._v(" . æ•°æ®å¤åˆ¶æ˜¯"),_("strong",[s._v("å•å‘")]),s._v("çš„, åªèƒ½ç”±"),_("strong",[s._v("ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹")]),s._v(". Redis ä¸»ä»å¤åˆ¶æ”¯æŒ"),_("strong",[s._v("ä¸»ä»åŒæ­¥")]),s._v("å’Œ"),_("strong",[s._v("ä»ä»åŒæ­¥")]),s._v(", ä»¥å‡è½»ä¸»èŠ‚ç‚¹çš„åŒæ­¥è´Ÿæ‹….")]),s._v(" "),_("blockquote",[_("p",[s._v("ä¸»ä»å¤åˆ¶çš„ä½œç”¨")])]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("æ•°æ®å†—ä½™: "),_("strong",[s._v("â€‹"),_("strong",[_("strong",[s._v("ä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„")])]),s._v("â€‹")]),s._v("çƒ­å¤‡ä»½")]),s._v(", æ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼.")]),s._v(" "),_("li",[s._v("**æ•…éšœæ¢å¤: ** å½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶, å¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡, å®ç°å¿«é€Ÿæ•…éšœæ¢å¤, å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™.")]),s._v(" "),_("li",[s._v("**è´Ÿè½½å‡è¡¡: ** åœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Š, é…åˆè¯»å†™åˆ†ç¦», å¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡, ç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡, å³å†™ Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹, è¯» Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹, åˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½. å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹, é€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½, å¯å¤§å¤§æé«˜ Redis å¹¶å‘é‡.")]),s._v(" "),_("li",[_("strong",[s._v("é«˜å¯ç”¨åŸºçŸ³: "),_("strong",[s._v("â€‹"),_("strong",[_("strong",[s._v("ä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤çš„")])]),s._v("â€‹")]),s._v("åŸºç¡€")]),s._v(", ä¹Ÿæ˜¯ Redis é«˜å¯ç”¨çš„åŸºç¡€.")])]),s._v(" "),_("h5",{attrs:{id:"_2-ä¸»ä»å¤åˆ¶æ‹“æ‰‘å…³ç³»"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸»ä»å¤åˆ¶æ‹“æ‰‘å…³ç³»"}},[s._v("#")]),s._v(" 2.ä¸»ä»å¤åˆ¶æ‹“æ‰‘å…³ç³»")]),s._v(" "),_("p",[s._v("Redis å¤åˆ¶çš„æ‹“æ‰‘å…³ç³»å¯ä»¥æ”¯æŒ"),_("strong",[s._v("å•å±‚æˆ–å¤šå±‚")]),s._v("å¤åˆ¶å…³ç³». æ ¹æ®å¤æ‚æ€§å¯ä»¥åˆ†ä¸º"),_("strong",[s._v("ä¸€ä¸»ä¸€ä», ä¸€ä¸»å¤šä», æ ‘çŠ¶ä¸»ä»ç»“æ„")]),s._v(".")]),s._v(" "),_("blockquote",[_("p",[s._v("ä¸€ä¸»ä¸€ä»ç»“æ„")])]),s._v(" "),_("p",[s._v("æœ€ç®€å•çš„æ‹“æ‰‘ç»“æ„, ç”¨äºä¸»èŠ‚ç‚¹å‡ºç°å®•æœºæ—¶ä»èŠ‚ç‚¹æä¾›"),_("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v("æ”¯æŒ.")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522224703826.png",alt:""}})]),s._v(" "),_("p",[s._v("å½“åº”ç”¨å†™å‘½ä»¤å¹¶å‘é‡è¾ƒé«˜æ—¶ä¸”éœ€è¦æŒä¹…åŒ–æ—¶, å¯ä»¥åªåœ¨ä»èŠ‚ç‚¹ä¸Šå¼€å§‹ AOF, è¿™æ ·æ—¢ä¿è¯æ•°æ®å®‰å…¨åˆé¿å…äº†æŒä¹…åŒ–å¯¹ä¸»èŠ‚ç‚¹çš„å½±å“.")]),s._v(" "),_("blockquote",[_("p",[s._v("ä¸€ä¸»å¤šä»ç»“æ„")])]),s._v(" "),_("p",[s._v("åº”ç”¨ç«¯å¯ä»¥åˆ©ç”¨å¤šä¸ªä»èŠ‚ç‚¹å®ç°"),_("strong",[s._v("è¯»å†™åˆ†ç¦»")]),s._v(", å¯¹äº"),_("strong",[s._v("è¯»å æ¯”è¾ƒå¤§")]),s._v("çš„åœºæ™¯, æˆ–è€…æŸäº›"),_("strong",[s._v("è€—æ—¶")]),s._v("çš„æ“ä½œ, å¯ä»¥æŠŠè¯»å‘½ä»¤å‘é€åˆ°"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("æ¥åˆ†æ‹…ä¸»èŠ‚ç‚¹çš„å‹åŠ›.")]),s._v(" "),_("p",[s._v("å¯¹äº"),_("strong",[s._v("å†™å¹¶å‘é‡è¾ƒå¤§")]),s._v("çš„åœºæ™¯, "),_("strong",[s._v("å¤šä¸ªä»èŠ‚ç‚¹")]),s._v("ä¼šå¯¼è‡´ä¸»èŠ‚ç‚¹å†™å‘½ä»¤çš„å¤šæ¬¡å‘é€åˆ°ä»èŠ‚ç‚¹è€Œæ¶ˆè€—ç½‘ç»œå¸¦å®½, "),_("strong",[s._v("å¢å¤§äº†ä¸»èŠ‚ç‚¹çš„è´Ÿæ‹…")]),s._v(".")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20221105204939898.png",alt:""}})]),s._v(" "),_("blockquote",[_("p",[s._v("æ ‘çŠ¶ä¸»ä»ç»“æ„")])]),s._v(" "),_("p",[s._v("å¼•å…¥"),_("strong",[s._v("å¤åˆ¶ä¸­é—´å±‚")]),s._v(", å¯ä»¥é™ä½ä¸»èŠ‚ç‚¹å‘é€ç»™ä»èŠ‚ç‚¹çš„æ•°æ®é‡, "),_("strong",[s._v("å‡å°ä¸»èŠ‚ç‚¹è´Ÿæ‹…")]),s._v(". å¯ä»¥ç¼“è§£"),_("strong",[s._v("ä¸»ä»å¤åˆ¶é£æš´")]),s._v("(å¤šä¸ªä»èŠ‚ç‚¹åŒæ—¶å¤åˆ¶ä¸»èŠ‚ç‚¹å¯¼è‡´ä¸»èŠ‚ç‚¹å‹åŠ›è¿‡å¤§).")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522224921397.png",alt:""}})]),s._v(" "),_("p",[s._v("ä¸Šå›¾ä¸­å¼•å…¥ä¸­é—´å±‚ slave1, å‡å°‘ä¸»èŠ‚ç‚¹ä¼ è¾“ç»™ä»èŠ‚ç‚¹çš„æ¶ˆè€—, è€Œ slave1 å¯ä»¥ç»§ç»­å¾€ä¸‹å¤åˆ¶æ•°æ®ç»™ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹.")]),s._v(" "),_("h4",{attrs:{id:"ä¸»ä»å¤åˆ¶é…ç½®"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶é…ç½®"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶é…ç½®")]),s._v(" "),_("h5",{attrs:{id:"_1-é…ç½®æ–¹å¼"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-é…ç½®æ–¹å¼"}},[s._v("#")]),s._v(" 1.é…ç½®æ–¹å¼")]),s._v(" "),_("p",[s._v("å‚ä¸å¤åˆ¶çš„ Redis å®ä¾‹åˆ†ä¸ºä¸»èŠ‚ç‚¹(master) å’Œä»èŠ‚ç‚¹(slave). å¤åˆ¶çš„æ•°æ®æµæ˜¯"),_("strong",[s._v("å•å‘")]),s._v("çš„, åªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹. é»˜è®¤æƒ…å†µä¸‹, Redis å®ä¾‹éƒ½æ˜¯ä¸»èŠ‚ç‚¹.")]),s._v(" "),_("h6",{attrs:{id:"_1-å»ºç«‹å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-å»ºç«‹å¤åˆ¶"}},[s._v("#")]),s._v(" (1)å»ºç«‹å¤åˆ¶")]),s._v(" "),_("p",[s._v("é€šè¿‡æ‰§è¡Œ SLAVEOF å‘½ä»¤æˆ–è€…è®¾ç½® slaveof é€‰é¡¹, å¯ä»¥è®©ä¸€ä¸ªæœåŠ¡å™¨å»å¤åˆ¶å¦ä¸€ä¸ªæœåŠ¡å™¨, ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ˜¯"),_("strong",[s._v("å®Œå…¨ç­‰æ•ˆ")]),s._v("çš„:")]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("é…ç½®æ–‡ä»¶")]),s._v(": åœ¨ä»æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ "),_("code",[s._v("slaveof <masterip> <masterport>")]),s._v("â€‹.")]),s._v(" "),_("li",[_("strong",[s._v("å¯åŠ¨å‘½ä»¤")]),s._v(": redis-server å¯åŠ¨å‘½ä»¤ååŠ å…¥ "),_("code",[s._v("--slaveof <masterip> <masterport>")]),s._v("â€‹.")]),s._v(" "),_("li",[_("strong",[s._v("å®¢æˆ·ç«¯å‘½ä»¤")]),s._v(": Redis æœåŠ¡å™¨å¯åŠ¨å, ç›´æ¥é€šè¿‡å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ "),_("code",[s._v("slaveof <masterip> <masterport>")]),s._v("â€‹, è®©è¯¥ Redis å®ä¾‹æˆä¸ºä»èŠ‚ç‚¹.")])]),s._v(" "),_("p",[s._v("ä¸»ä»å¤åˆ¶çš„å¼€å¯, å®Œå…¨æ˜¯åœ¨"),_("strong",[s._v("ä»èŠ‚ç‚¹å‘èµ·")]),s._v("çš„, ä¸éœ€è¦ä¸»èŠ‚ç‚¹åšä»»ä½•äº‹æƒ…. ä¸»ä»èŠ‚ç‚¹å¤åˆ¶å…³ç³»å»ºç«‹æˆåŠŸä¹‹åå¯ä»¥ç”¨ "),_("strong",[s._v("info replication")]),s._v(" å‘½ä»¤æŸ¥çœ‹"),_("strong",[s._v("å¤åˆ¶ç›¸å…³çŠ¶æ€")]),s._v(".")]),s._v(" "),_("p",[s._v("å¤åˆ¶å¯ä»¥ä½¿ç”¨ "),_("strong",[s._v("sync å’Œ fsync")]),s._v(", sync åªæ”¯æŒå…¨é‡å¤åˆ¶, æ‰€ä»¥ä¸»è¦ç”¨"),_("strong",[s._v("åè€…")]),s._v(".")]),s._v(" "),_("h6",{attrs:{id:"_2-æ–­å¼€å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ–­å¼€å¤åˆ¶"}},[s._v("#")]),s._v(" (2)æ–­å¼€å¤åˆ¶")]),s._v(" "),_("p",[s._v("åœ¨ä»èŠ‚ç‚¹æ‰§è¡Œ "),_("strong",[s._v("slaveof no one")]),s._v(" æ–­å¼€ä¸»ä»å¤åˆ¶å…³ç³». æ–­å¼€ä¹‹åä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹, ä½†æ˜¯åŸæ¥åŒæ­¥çš„æ•°æ®"),_("strong",[s._v("ä¸ä¼šä¸¢å¤±")]),s._v(". "),_("strong",[s._v("ä½†æ˜¯åˆ‡æ¢ä¸»èŠ‚ç‚¹")]),s._v(": å¦‚æœä»èŠ‚ç‚¹æ–­å¼€ä¸»ä»å¤åˆ¶è¿›è€ŒåˆæŠŠ"),_("strong",[s._v("å¦ä¸€ä¸ª")]),s._v("èŠ‚ç‚¹å½“åšä¸»èŠ‚ç‚¹, åˆ™åˆ‡æ¢åä»èŠ‚ç‚¹ä¼š"),_("strong",[s._v("æ¸…ç©º")]),s._v("ä¹‹å‰åŒæ­¥çš„æ•°æ®.")]),s._v(" "),_("h6",{attrs:{id:"_3-åªè¯»æ¨¡å¼"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-åªè¯»æ¨¡å¼"}},[s._v("#")]),s._v(" (3)åªè¯»æ¨¡å¼")]),s._v(" "),_("p",[s._v("é»˜è®¤æƒ…å†µä¸‹, ä»èŠ‚ç‚¹ä½¿ç”¨ "),_("strong",[s._v("slave-read-only=yes")]),s._v(" é…ç½®ä¸º"),_("strong",[s._v("åªè¯»æ¨¡å¼")]),s._v(". ç”Ÿäº§ç¯å¢ƒè¿™æ ·åš! å› ä¸ºå¯¹ä»èŠ‚ç‚¹çš„ä¿®æ”¹ä¸»èŠ‚ç‚¹æ˜¯ä¸çŸ¥é“çš„.")]),s._v(" "),_("h5",{attrs:{id:"_2-ä¸»ä»å¤åˆ¶è¿‡ç¨‹ç¤ºä¾‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸»ä»å¤åˆ¶è¿‡ç¨‹ç¤ºä¾‹"}},[s._v("#")]),s._v(" 2.ä¸»ä»å¤åˆ¶è¿‡ç¨‹ç¤ºä¾‹")]),s._v(" "),_("p",[s._v("è¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸‹ä¸»ä»å¤åˆ¶è¿‡ç¨‹.")]),s._v(" "),_("p",[_("strong",[s._v("(1)ç¬¬ä¸€æ­¥: æœ¬åœ°å¯åŠ¨ä¸¤ä¸ªèŠ‚ç‚¹")])]),s._v(" "),_("p",[s._v("åœ¨å®‰è£…å¥½ Redis ä¹‹å, å¯ä»¥ä½¿ç”¨ "),_("code",[s._v("redis-server --port <port>")]),s._v("â€‹ çš„æ–¹å¼æŒ‡å®šåˆ›å»ºä¸¤ä¸ªä¸åŒç«¯å£çš„ Redis æœåŠ¡å™¨å®ä¾‹, å¦‚ä¸‹æ‰€ç¤º.")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºä¸¤ä¸ªRediså®ä¾‹")]),s._v("\nredis-server "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nredis-server "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br"),_("span",{staticClass:"line-number"},[s._v("3")]),_("br")])]),_("p",[s._v("ä¸¤ä¸ª Redis èŠ‚ç‚¹å¯åŠ¨å, éƒ½é»˜è®¤ä¸º"),_("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),_("p",[_("strong",[s._v("(2)ç¬¬äºŒæ­¥: å»ºç«‹å¤åˆ¶")])]),s._v(" "),_("p",[s._v("åœ¨ 6380 ç«¯å£çš„èŠ‚ç‚¹ä¸­æ‰§è¡Œ "),_("strong",[s._v("slaveof")]),s._v(" å‘½ä»¤, ä½¿ä¹‹å˜ä¸º"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(":")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åœ¨ 6380 ç«¯å£çš„ Redis å®ä¾‹ä¸­ä½¿ç”¨æ§åˆ¶å°")]),s._v("\nredis-cli "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æˆä¸ºæœ¬åœ° 6379 ç«¯å£å®ä¾‹çš„ä»èŠ‚ç‚¹")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),_("span",{pre:!0,attrs:{class:"token operator"}},[_("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" SLAVEOF "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nOK\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br"),_("span",{staticClass:"line-number"},[s._v("3")]),_("br"),_("span",{staticClass:"line-number"},[s._v("4")]),_("br"),_("span",{staticClass:"line-number"},[s._v("5")]),_("br")])]),_("p",[_("strong",[s._v("(3)ç¬¬ä¸‰æ­¥: è§‚å¯Ÿæ•ˆæœ")])]),s._v(" "),_("p",[s._v("éªŒè¯ä¸€ä¸‹ä¸»èŠ‚ç‚¹çš„æ•°æ®æ˜¯å¦ä¼šå¤åˆ¶åˆ°ä»èŠ‚ç‚¹ä¹‹ä¸­.")]),s._v(" "),_("ul",[_("li",[s._v("å…ˆåœ¨"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("æŸ¥è¯¢ä¸€ä¸ª"),_("strong",[s._v("ä¸å­˜åœ¨")]),s._v("çš„ key:")])]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),_("span",{pre:!0,attrs:{class:"token operator"}},[_("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" GET mykey\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("ul",[_("li",[s._v("å†åœ¨"),_("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("ä¸­æ·»åŠ è¿™ä¸ª key:")])]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),_("span",{pre:!0,attrs:{class:"token operator"}},[_("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET mykey "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nOK\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("ul",[_("li",[s._v("æ­¤æ—¶å†ä»"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("ä¸­æŸ¥è¯¢, ä¼šå‘ç°å·²ç»ä»"),_("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("åŒæ­¥åˆ°"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v(":")])]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),_("span",{pre:!0,attrs:{class:"token operator"}},[_("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" GET mykey\n"),_("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v("\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("p",[_("strong",[s._v("(4)ç¬¬å››æ­¥: æ–­å¼€å¤åˆ¶")])]),s._v(" "),_("p",[s._v('é€šè¿‡ "'),_("code",[s._v("slaveof <masterip> <masterport>")]),s._v('â€‹" å‘½ä»¤å»ºç«‹ä¸»ä»å¤åˆ¶å…³ç³»ä»¥å, å¯ä»¥é€šè¿‡ "'),_("code",[s._v("slaveof no one")]),s._v('â€‹" å‘½ä»¤æ–­å¼€. éœ€è¦æ³¨æ„çš„æ˜¯, ä»èŠ‚ç‚¹æ–­å¼€å¤åˆ¶å, ä¸ä¼šåˆ é™¤å·²æœ‰çš„æ•°æ®, åªæ˜¯ä¸å†æ¥å—ä¸»èŠ‚ç‚¹æ–°çš„æ•°æ®å˜åŒ–.')]),s._v(" "),_("p",[s._v('åœ¨ä»èŠ‚ç‚¹æ‰§è¡Œ "'),_("code",[s._v("slaveof no one")]),s._v('â€‹" ä¹‹å, ä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹åˆ†åˆ«æ‰“å°æ—¥å¿—å¦‚ä¸‹:')]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä»èŠ‚ç‚¹æ‰“å°æ—¥å¿—")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("61496")]),s._v(":M "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Mar "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 08:10:22.749 "),_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Connection with master lost.")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("61496")]),s._v(":M "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Mar "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 08:10:22.749 * Caching the disconnected master state.\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("61496")]),s._v(":M "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Mar "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 08:10:22.749 * Discarding previously cached master state.\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("61496")]),s._v(":M "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Mar "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 08:10:22.749 * MASTER MODE enabled "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user request from "),_("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id=4 addr=127.0.0.1:55096 fd=8 name= age=1664 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=34 qbuf-free=32734 obl=0 oll=0 omem=0 events=r cmd=slaveof'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸»èŠ‚ç‚¹æ‰“å°æ—¥å¿—")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("61467")]),s._v(":M "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Mar "),_("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 08:10:22.749 "),_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Connection with replica 127.0.0.1:6380 lost.")]),s._v("\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br"),_("span",{staticClass:"line-number"},[s._v("3")]),_("br"),_("span",{staticClass:"line-number"},[s._v("4")]),_("br"),_("span",{staticClass:"line-number"},[s._v("5")]),_("br"),_("span",{staticClass:"line-number"},[s._v("6")]),_("br"),_("span",{staticClass:"line-number"},[s._v("7")]),_("br"),_("span",{staticClass:"line-number"},[s._v("8")]),_("br")])]),_("h4",{attrs:{id:"ä¸»ä»å¤åˆ¶åŸç†ğŸŒŸ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶åŸç†ğŸŒŸ"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶åŸç†ğŸŒŸ")]),s._v(" "),_("h5",{attrs:{id:"_1-ä¸»ä»å¤åˆ¶è¿‡ç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸»ä»å¤åˆ¶è¿‡ç¨‹"}},[s._v("#")]),s._v(" 1.ä¸»ä»å¤åˆ¶è¿‡ç¨‹")]),s._v(" "),_("p",[s._v("å¤åˆ¶å¤§è‡´æœ‰å…­ä¸ªè¿‡ç¨‹:")]),s._v(" "),_("p",[s._v("(1) "),_("strong",[s._v("ä¿å­˜ä¸»èŠ‚ç‚¹ä¿¡æ¯")]),s._v(".")]),s._v(" "),_("p",[s._v("(2) "),_("strong",[s._v("è¿æ¥ä¸»èŠ‚ç‚¹")]),s._v(". ä»èŠ‚ç‚¹å†…éƒ¨é€šè¿‡æ¯ç§’è¿è¡Œçš„"),_("strong",[s._v("å®šæ—¶ä»»åŠ¡")]),s._v("ç»´æŠ¤å¤åˆ¶ç›¸å…³é€»è¾‘, å½“å®šæ—¶ä»»åŠ¡"),_("strong",[s._v("å‘ç°å­˜åœ¨æ–°çš„ä¸»èŠ‚ç‚¹")]),s._v("çš„æ—¶å€™, ä¼šå°è¯•ä¸è¯¥èŠ‚ç‚¹"),_("strong",[s._v("å»ºç«‹è¿æ¥")]),s._v(". è¿æ¥æˆåŠŸä¼šäº§ç”Ÿæ—¥å¿—, è¿æ¥å¤±è´¥åˆ™ä¼šæ— é™"),_("strong",[s._v("é‡è¿")]),s._v(".")]),s._v(" "),_("p",[s._v("(3) "),_("strong",[s._v("å‘é€ ping å‘½ä»¤")]),s._v(". ä»èŠ‚ç‚¹å‘é€ ping æŒ‡ä»¤ç»™ä¸»èŠ‚ç‚¹è¿›è¡Œ"),_("strong",[s._v("é¦–æ¬¡é€šä¿¡")]),s._v(", ç”¨äºæ£€æµ‹ç½‘ç»œæƒ…å†µå’Œä¸»èŠ‚ç‚¹æ˜¯å¦å¯ä»¥å¤„ç†è¯·æ±‚. å¦‚æœè¿”å› pong å¤±è´¥, åˆ™ä¸»èŠ‚ç‚¹ä¼š"),_("strong",[s._v("æ–­å¼€è¿æ¥")]),s._v("ä¸‹ä¸€æ¬¡å®šæ—¶ä»»åŠ¡ç»§ç»­"),_("strong",[s._v("é‡è¿")]),s._v(".")]),s._v(" "),_("p",[s._v("(4) "),_("strong",[s._v("æƒé™è®¤è¯")]),s._v(". è¿™å‘ç”Ÿåœ¨ä¸»èŠ‚ç‚¹è®¾ç½®äº† requirepass å‚æ•°æ—¶.")]),s._v(" "),_("p",[s._v("(5) "),_("strong",[s._v("æ•°æ®åŒæ­¥")]),s._v(". ä¸»ä»è¿æ¥é¦–æ¬¡é€šä¿¡æ­£å¸¸å, ä¸»èŠ‚ç‚¹ä¼šæŠŠæŒæœ‰çš„æ•°æ®"),_("strong",[s._v("å…¨éƒ¨å‘é€")]),s._v("ç»™ä»èŠ‚ç‚¹, è¿™æ˜¯"),_("strong",[s._v("éå¸¸è€—æ—¶")]),s._v("çš„æ“ä½œ.")]),s._v(" "),_("p",[s._v("(6) "),_("strong",[s._v("å‘½ä»¤æŒç»­å¤åˆ¶")]),s._v(". æ¥ä¸‹æ¥ä¸»èŠ‚ç‚¹ä¼š"),_("strong",[s._v("æŒç»­")]),s._v("æŠŠå‘½ä»¤å‘é€ç»™ä»èŠ‚ç‚¹, "),_("strong",[s._v("ä¿è¯ä¸»ä»æ•°æ®ä¸€è‡´æ€§")]),s._v(".")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200527210920684.png",alt:"image-20200527210920684"}})]),s._v(" "),_("p",[s._v("å¤åˆ¶è¿‡ç¨‹ä¸­æœ€æ ¸å¿ƒçš„ä¾¿æ˜¯: "),_("mark",[_("strong",[s._v("æ•°æ®åŒæ­¥")])]),s._v(", ä¸‹é¢è¯¦è¿°.")]),s._v(" "),_("h5",{attrs:{id:"_2-psyncå‘½ä»¤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-psyncå‘½ä»¤"}},[s._v("#")]),s._v(" 2.psyncå‘½ä»¤")]),s._v(" "),_("p",[s._v("sync ä¸ "),_("strong",[s._v("psync")]),s._v(" å‘½ä»¤éƒ½èƒ½ç”¨äºå®ç°æ•°æ®åŒæ­¥, ä½† sync æŒ‡ä»¤åªèƒ½å®ç°å…¨é‡å¤åˆ¶, ç”¨çš„è¾ƒå°‘.")]),s._v(" "),_("p",[_("strong",[s._v("psync è¿è¡Œéœ€è¦çš„æ ¸å¿ƒç»„ä»¶å¦‚ä¸‹")]),s._v(":")]),s._v(" "),_("ul",[_("li",[s._v("ä¸»ä»èŠ‚ç‚¹å„è‡ª"),_("strong",[s._v("å¤åˆ¶åç§»é‡")]),s._v(".")]),s._v(" "),_("li",[s._v("ä¸»èŠ‚ç‚¹"),_("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v(".")]),s._v(" "),_("li",[s._v("ä¸»èŠ‚ç‚¹"),_("strong",[s._v("è¿è¡Œ id")]),s._v(".")])]),s._v(" "),_("h6",{attrs:{id:"_1-å¤åˆ¶åç§»é‡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¤åˆ¶åç§»é‡"}},[s._v("#")]),s._v(" (1)å¤åˆ¶åç§»é‡")]),s._v(" "),_("p",[_("strong",[s._v("å‚ä¸å¤åˆ¶çš„ä¸»ä»èŠ‚ç‚¹éƒ½ä¼šç»´æŠ¤å„è‡ªçš„å¤åˆ¶åç§»é‡")]),s._v(". é€šè¿‡å¯¹æ¯”ä¸»ä»èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡, å¯ä»¥åˆ¤æ–­ä¸»ä»èŠ‚ç‚¹"),_("strong",[s._v("æ•°æ®æ˜¯å¦ä¸€è‡´")]),s._v(". ä»èŠ‚ç‚¹ä¼šæ¯ç§’ä¸ŠæŠ¥è‡ªå·±çš„å¤åˆ¶åç§»é‡ç»™ä¸»èŠ‚ç‚¹.")]),s._v(" "),_("p",[s._v("å¤åˆ¶åç§»é‡çš„ç»Ÿè®¡ä¿¡æ¯åœ¨ "),_("strong",[s._v("info replication")]),s._v(" ä¸­çš„ "),_("strong",[s._v("master_repl_offset")]),s._v(" æŒ‡æ ‡ä¸­.")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522225221317.png",alt:""}})]),s._v(" "),_("h6",{attrs:{id:"_2-å¤åˆ¶ç§¯å‹ç¼“å†²åŒº"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¤åˆ¶ç§¯å‹ç¼“å†²åŒº"}},[s._v("#")]),s._v(" (2)å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v(" "),_("p",[_("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v("æ˜¯ä¿å­˜åœ¨"),_("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("ä¸Šçš„ä¸€ä¸ª"),_("strong",[s._v("å›ºå®šé•¿åº¦çš„é˜Ÿåˆ—")]),s._v(", é»˜è®¤ "),_("strong",[s._v("1MB")]),s._v(", å½“ä¸»èŠ‚ç‚¹åœ¨äºä»èŠ‚ç‚¹è¿æ¥ååˆ›å»º. è¿™æ—¶å€™ä¸»èŠ‚ç‚¹å†™å‘½ä»¤çš„æ—¶å€™, "),_("strong",[s._v("ä¸ä½†æŠŠå‘½ä»¤å‘ç»™ä»èŠ‚ç‚¹, è¿˜ä¼šå†™å…¥åˆ°å¤åˆ¶ç§¯å‹ç¼“å†²åŒº.")])]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522225255149.png",alt:""}})]),s._v(" "),_("p",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ˜¯ä¸€ä¸ª"),_("strong",[s._v("å®šé•¿çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—")]),s._v("(FIFO), æ‰€ä»¥èƒ½å¤Ÿå®ç°"),_("strong",[s._v("ä¿å­˜æœ€è¿‘å·²å¤åˆ¶æ•°æ®")]),s._v("çš„åŠŸèƒ½, ç”¨äº"),_("strong",[s._v("éƒ¨åˆ†å¤åˆ¶å’Œå¤åˆ¶å‘½ä»¤ä¸¢å¤±æ—¶çš„æ•°æ®è¡¥æ•‘")]),s._v(".")]),s._v(" "),_("p",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºçš„ç»Ÿè®¡ä¿¡æ¯åœ¨ "),_("strong",[s._v("info replication")]),s._v(" ä¸­çš„ "),_("strong",[s._v("repl_backlog_size")]),s._v(" æŒ‡æ ‡ä¸­.")]),s._v(" "),_("h6",{attrs:{id:"_3-ä¸»èŠ‚ç‚¹è¿è¡Œid"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸»èŠ‚ç‚¹è¿è¡Œid"}},[s._v("#")]),s._v(" (3)ä¸»èŠ‚ç‚¹è¿è¡Œid")]),s._v(" "),_("p",[s._v("æ¯ä¸ª Redis "),_("strong",[s._v("ç»“ç‚¹")]),s._v("å¯åŠ¨åä¼šåˆ†é…åŠ¨æ€åˆ†é…ä¸€ä¸ª 40 ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ä½œä¸º"),_("strong",[s._v("è¿è¡Œ id")]),s._v(", å¯ä»¥"),_("strong",[s._v("å”¯ä¸€æ ‡è¯†")]),s._v(" Redis èŠ‚ç‚¹.")]),s._v(" "),_("h6",{attrs:{id:"_4-psyncä½¿ç”¨"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-psyncä½¿ç”¨"}},[s._v("#")]),s._v(" (4)psyncä½¿ç”¨")]),s._v(" "),_("p",[s._v("ä»èŠ‚ç‚¹ä½¿ç”¨ "),_("strong",[s._v("psync")]),s._v(" å‘½ä»¤å®Œæˆéƒ¨åˆ†"),_("strong",[s._v("å¤åˆ¶å’Œå…¨é‡å¤åˆ¶")]),s._v("åŠŸèƒ½. æ ¼å¼å¦‚ä¸‹.")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# runId: ä»èŠ‚ç‚¹å¤åˆ¶ä¸»èŠ‚ç‚¹çš„è¿è¡ŒId")]),s._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# offset: å½“å‰ä»èŠ‚ç‚¹å·²ç»å¤åˆ¶çš„åç§»é‡, ç¬¬ä¸€æ¬¡å‚ä¸å¤åˆ¶åˆ™ä¸º-1")]),s._v("\n$ psync "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("runId"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("offset"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br"),_("span",{staticClass:"line-number"},[s._v("3")]),_("br")])]),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522225350922.png",alt:""}})]),s._v(" "),_("p",[_("strong",[s._v("ä¸»èŠ‚ç‚¹")]),s._v("æ ¹æ® psync å‚æ•°ä¸è‡ªèº«"),_("strong",[s._v("å‚æ•°æƒ…å†µ")]),s._v("é€‰æ‹©è¿›è¡Œå›å¤.")]),s._v(" "),_("ul",[_("li",[s._v("+"),_("strong",[s._v("FULLRESYNC")]),s._v(" {runId} {offset}: ä»èŠ‚ç‚¹è§¦å‘å…¨é‡å¤åˆ¶.")]),s._v(" "),_("li",[s._v("+"),_("strong",[s._v("CONTINUE")]),s._v(": ä»èŠ‚ç‚¹è§¦å‘éƒ¨åˆ†å¤åˆ¶.")]),s._v(" "),_("li",[s._v("+"),_("strong",[s._v("ERR")]),s._v(": ä¸»èŠ‚ç‚¹ç‰ˆæœ¬ä½äº 2.8, æ— æ³•è¯†åˆ« psync å‘½ä»¤.")])]),s._v(" "),_("h5",{attrs:{id:"_3-æ•°æ®åŒæ­¥æµç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ•°æ®åŒæ­¥æµç¨‹"}},[s._v("#")]),s._v(" 3.æ•°æ®åŒæ­¥æµç¨‹")]),s._v(" "),_("p",[s._v("ä½¿ç”¨ "),_("strong",[s._v("psync")]),s._v(" å‘½ä»¤å®Œæˆä¸»ä»æ•°æ®åŒæ­¥, åŒæ­¥å¯ä»¥åˆ†ä¸º: "),_("strong",[s._v("å…¨é‡å¤åˆ¶, éƒ¨åˆ†å¤åˆ¶")]),s._v(".")]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("å…¨é‡å¤åˆ¶")]),s._v(": ä¸€èˆ¬ç”¨äº"),_("strong",[s._v("åˆæ¬¡å¤åˆ¶")]),s._v("çš„åœºæ™¯, å¼€é”€è¾ƒå¤§.")]),s._v(" "),_("li",[_("strong",[s._v("éƒ¨åˆ†å¤åˆ¶")]),s._v(": ç”¨äºå¤„ç†åœ¨ä¸»ä»å¤åˆ¶ä¸­å› "),_("strong",[s._v("ç½‘ç»œé—ªæ–­")]),s._v("ç­‰åŸå› é€ æˆçš„"),_("strong",[s._v("æ•°æ®ä¸¢å¤±")]),s._v("åœºæ™¯, ä»èŠ‚ç‚¹å†æ¬¡è¿æ¥ä¸»èŠ‚ç‚¹å, å¦‚æœæ¡ä»¶å…è®¸, ä¸»èŠ‚ç‚¹"),_("strong",[s._v("è¡¥å‘")]),s._v("ä¸¢å¤±çš„æ•°æ®ç»™ä»èŠ‚ç‚¹. å¯ä»¥é¿å…å¼€é”€è¿‡å¤§.")])]),s._v(" "),_("h6",{attrs:{id:"_1-å…¨é‡å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…¨é‡å¤åˆ¶"}},[s._v("#")]),s._v(" (1)å…¨é‡å¤åˆ¶")]),s._v(" "),_("p",[s._v("ä¸»ä»"),_("strong",[s._v("ç¬¬ä¸€æ¬¡å»ºç«‹å¤åˆ¶")]),s._v("æ—¶å¿…é¡»ç»å†çš„é˜¶æ®µ, è§¦å‘å…¨é‡å¤åˆ¶çš„å‘½ä»¤æ˜¯ "),_("strong",[s._v("fsync")]),s._v(".")]),s._v(" "),_("blockquote",[_("p",[s._v("å…¨é‡å¤åˆ¶æµç¨‹")])]),s._v(" "),_("p",[s._v("å…¨é‡å¤åˆ¶æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤º:")]),s._v(" "),_("p",[_("img",{attrs:{src:"/img/image-20240106133126-i38g6i9.png",alt:"image"}})]),s._v(" "),_("ul",[_("li",[s._v("ç”±äºæ˜¯ç¬¬ä¸€æ¬¡å¤åˆ¶, ä»èŠ‚ç‚¹æ²¡æœ‰å¤åˆ¶åç§»é‡å’Œä¸»èŠ‚ç‚¹è¿è¡Œ Id, æ‰€ä»¥å‘é€ "),_("strong",[s._v("fsync ? -1")]),s._v(".")]),s._v(" "),_("li",[s._v("ä¸»èŠ‚ç‚¹åˆ¤æ–­è¿™æ˜¯å…¨é‡å¤åˆ¶, è¿”å› +FULLRESYNC.")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹æ¥æ”¶åˆ°ä¸»èŠ‚ç‚¹çš„å“åº”æ•°æ®, å³å¯ä¿å­˜è¿è¡Œ Id å’Œåç§»é‡ offset.")]),s._v(" "),_("li",[_("strong",[s._v("ä¸»èŠ‚ç‚¹æ‰§è¡Œ bgsave å‘½ä»¤ä¿å­˜ RDB æ–‡ä»¶åˆ°æœ¬åœ°")]),s._v(".")]),s._v(" "),_("li",[_("strong",[s._v("ä¸»èŠ‚ç‚¹æŠŠ RDB æ–‡ä»¶å‘é€åˆ°ä»èŠ‚ç‚¹, ä»èŠ‚ç‚¹å°†å…¶ä½œä¸ºæœ¬åœ°æ•°æ®æ–‡ä»¶")]),s._v(". å¦‚æœ RDB æ–‡ä»¶è¿‡å¤§, é‚£ä¹ˆå‘é€è¿‡ç¨‹å¯èƒ½éå¸¸è€—æ—¶. è¿™é‡Œç”¨ RDB æ–‡ä»¶å¯ä»¥åœ¨ slave ç»“ç‚¹æ›´å¿«é€Ÿçš„åŠ è½½æ•°æ®.")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹ä»å¼€å§‹æ¥æ”¶ RDB å¿«ç…§åˆ°æ¥æ”¶å®ŒæˆæœŸé—´, ä¸»èŠ‚ç‚¹ä»ç„¶å¯ä»¥å“åº”æŒ‡ä»¤, ä¸»èŠ‚ç‚¹æŠŠè¿™ä¸€æ—¶æœŸçš„å‘½ä»¤æ•°æ®ä¿å­˜åœ¨"),_("strong",[s._v("å¤åˆ¶å®¢æˆ·ç«¯ç¼“å†²åŒº")]),s._v("å†…, ç­‰ä»èŠ‚ç‚¹åŠ è½½å®Œ RDB æ–‡ä»¶å, ä¸»èŠ‚ç‚¹å†æŠŠç¼“å†²åŒºå†…çš„æ•°æ®å‘é€åˆ°ä»èŠ‚ç‚¹, ä¿è¯"),_("strong",[s._v("æ•°æ®ä¸€è‡´æ€§")]),s._v(".")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹æ¥æ”¶å®Œä¸»èŠ‚ç‚¹ä¼ é€æ¥çš„æ•°æ®åä¼š"),_("strong",[s._v("æ¸…ç©ºè‡ªèº«æ—§æ•°æ®")]),s._v(", ç„¶å"),_("strong",[s._v("åŠ è½½ RDB æ–‡ä»¶")]),s._v(".")]),s._v(" "),_("li",[s._v("å¦‚æœä»èŠ‚ç‚¹å¼€å¯äº† AOF æŒä¹…åŒ–, é‚£ä¹ˆåŠ è½½å®Œ RDB åä¼šç«‹å³æ‰§è¡Œ "),_("strong",[s._v("bgrewriteaof")]),s._v(" æ“ä½œè¿›è¡ŒæŒä¹…åŒ–.")])]),s._v(" "),_("p",[s._v("å…¨é‡å¤åˆ¶æ˜¯ä¸€ä¸ª"),_("strong",[s._v("éå¸¸è€—æ—¶")]),s._v("çš„æ“ä½œ. ä¸»è¦"),_("strong",[s._v("æ—¶é—´å¼€é”€")]),s._v("æœ‰:")]),s._v(" "),_("ul",[_("li",[s._v("ä¸»èŠ‚ç‚¹ bgsave çš„æ—¶é—´.")]),s._v(" "),_("li",[s._v("RBD æ–‡ä»¶ç½‘ç»œä¼ è¾“æ—¶é—´.")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹æ¸…ç©ºæ•°æ®æ—¶é—´.")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹åŠ è½½ RDB æ—¶é—´.")]),s._v(" "),_("li",[s._v("å¯èƒ½çš„ AOF é‡å†™æ—¶é—´.")])]),s._v(" "),_("p",[s._v("é™¤äº†"),_("strong",[s._v("ç¬¬ä¸€æ¬¡")]),s._v("å¤åˆ¶æ‰§è¡Œå…¨é‡å¤åˆ¶ä¹‹å¤–, å…¶ä»–çš„åœºæ™¯åº”è¯¥"),_("strong",[s._v("é¿å…ä½¿ç”¨å…¨é‡å¤åˆ¶")]),s._v(".")]),s._v(" "),_("blockquote",[_("p",[s._v("å…¨é‡å¤åˆ¶å‘ç”Ÿçš„åœºæ™¯")])]),s._v(" "),_("p",[s._v("å…¨é‡å¤åˆ¶å¼€é”€æå¤§, éœ€è¦è§„é¿. è¿™é‡Œåˆ†æä¸€ä¸‹å…¨é‡å¤åˆ¶å‘ç”Ÿçš„åœºæ™¯.")]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("ç¬¬ä¸€æ¬¡å»ºç«‹å¤åˆ¶")]),s._v(". ä¸å¯é¿å…, å»ºè®®åœ¨"),_("strong",[s._v("ä½å³°")]),s._v("æ—¶è¿›è¡Œ.")]),s._v(" "),_("li",[_("strong",[s._v("èŠ‚ç‚¹è¿è¡Œ Id ä¸åŒ¹é…")]),s._v(". ä¸»ä»å¤åˆ¶å…³ç³»å»ºç«‹å, ä»èŠ‚ç‚¹ä¼šä¿å­˜ä¸»èŠ‚ç‚¹çš„è¿è¡Œ id, å¦‚æœä¸»èŠ‚ç‚¹æ•…éšœé‡å¯, ä¼šé€ æˆ id å˜åŒ–(å› ä¸ºæ˜¯åŠ¨æ€ Id), ä»èŠ‚ç‚¹å‘ç° id å˜åŒ–ä¾¿ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ª"),_("strong",[s._v("æ–°çš„")]),s._v("èŠ‚ç‚¹ä»è€Œè¿›è¡Œå…¨é‡å¤åˆ¶. è¿™ç§æƒ…å†µéœ€è¦ä»æ¶æ„ä¸Šè§„é¿, å¦‚æä¾›"),_("strong",[s._v("æ•…éšœè½¬ç§»")]),s._v("åŠŸèƒ½. å½“ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœä¹‹å, å¯ä»¥é‡‡ç”¨æ”¯æŒè‡ªåŠ¨æ•…éšœè½¬ç§»çš„"),_("strong",[s._v("å“¨å…µæˆ–é›†ç¾¤")]),s._v("æ–¹æ¡ˆ, è®©"),_("strong",[s._v("ä»èŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹")]),s._v(".")]),s._v(" "),_("li",[_("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¸è¶³")]),s._v(". åœ¨è¿›è¡Œéƒ¨åˆ†å¤åˆ¶æ—¶, å¦‚æœ "),_("strong",[s._v("offset ä¸åœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¸­")]),s._v(", æ¯”å¦‚ä¸»ä»æ–­å¼€çš„æ—¶é—´è¿‡é•¿, å¤åˆ¶ç§¯å‹ç¼“å†²åŒºè®°å½•çš„å‘½ä»¤æ—©å°±"),_("strong",[s._v("è¶…è¿‡")]),s._v("äº†é»˜è®¤çš„ 1MB, è¿™æ—¶å€™"),_("strong",[s._v("ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§å°±ä¼šæŠŠéƒ¨åˆ†å¤åˆ¶é€€åŒ–ä¸ºå…¨é‡å¤åˆ¶")]),s._v(". æ‰€ä»¥å¤§æµé‡çš„åœºæ™¯éœ€è¦"),_("strong",[s._v("å¢å¤§å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v(".")])]),s._v(" "),_("h6",{attrs:{id:"_2-éƒ¨åˆ†å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-éƒ¨åˆ†å¤åˆ¶"}},[s._v("#")]),s._v(" (2)éƒ¨åˆ†å¤åˆ¶")]),s._v(" "),_("p",[s._v("å½“ master å’Œ slave æ–­å¼€é‡è¿å, ä¸€èˆ¬éƒ½ä¼šå¯¹æ•´ä»½æ•°æ®è¿›è¡Œå¤åˆ¶. ä» redis2.8 ç‰ˆæœ¬å¼€å§‹æ”¯æŒéƒ¨åˆ†æ•°æ®å¤åˆ¶çš„å‘½ä»¤ "),_("strong",[s._v("PSYNC")]),s._v(" å» master åŒæ­¥æ•°æ®, slave ä¸ master èƒ½å¤Ÿåœ¨ç½‘ç»œè¿æ¥æ–­å¼€é‡è¿ååªè¿›è¡Œéƒ¨åˆ†æ•°æ®å¤åˆ¶(æ–­ç‚¹ç»­ä¼ ).")]),s._v(" "),_("p",[s._v("éƒ¨åˆ†å¤åˆ¶æµç¨‹å›¾å¦‚ä¸‹:")]),s._v(" "),_("p",[_("img",{attrs:{src:"/img/image-20240106133204-8i3kew5.png",alt:"image"}})]),s._v(" "),_("p",[s._v("master ä¼šåœ¨å…¶å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ª"),_("strong",[s._v("å¤åˆ¶æ•°æ®ç”¨çš„ç¼“å­˜é˜Ÿåˆ—")]),s._v(", ç¼“å­˜æœ€è¿‘ä¸€æ®µæ—¶é—´çš„æ•°æ®, master å’Œå®ƒæ‰€æœ‰çš„ slave éƒ½ç»´æŠ¤äº†å¤åˆ¶çš„æ•°æ®ä¸‹æ ‡ offset å’Œ master çš„è¿›ç¨‹ id, å› æ­¤å½“ç½‘ç»œè¿æ¥æ–­å¼€å, slave ä¼šè¯·æ±‚ master ç»§ç»­è¿›è¡Œæœªå®Œæˆçš„å¤åˆ¶, ä»æ‰€è®°å½•çš„æ•°æ®ä¸‹æ ‡å¼€å§‹. å¦‚æœ master è¿›ç¨‹ id å˜åŒ–äº†, æˆ–è€…ä»èŠ‚ç‚¹æ•°æ®ä¸‹æ ‡ offset å¤ªæ—§, å·²ç»ä¸åœ¨ master çš„ç¼“å­˜é˜Ÿåˆ—é‡Œäº†, é‚£ä¹ˆå°†ä¼šè¿›è¡Œä¸€æ¬¡å…¨é‡æ•°æ®çš„å¤åˆ¶.")]),s._v(" "),_("p",[s._v("ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®ç°éƒ¨åˆ†å¤åˆ¶, å¯ä»¥ä¼˜åŒ–å…¨é‡å¤åˆ¶å¸¦æ¥çš„å¼€é”€. å¦‚æœå‡ºç°"),_("strong",[s._v("ç½‘ç»œé—ªæ–­æˆ–è€…å‘½ä»¤ä¸¢")]),s._v("å¤±ç­‰å¼‚å¸¸æƒ…å†µ, ä»èŠ‚ç‚¹ä¼šå‘ä¸»èŠ‚ç‚¹è¦æ±‚"),_("strong",[s._v("è¡¥å‘ä¸¢å¤±çš„å‘½ä»¤æ•°æ®")]),s._v(", å¦‚æœä¸»èŠ‚ç‚¹çš„"),_("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v("å†…å­˜åœ¨è¿™éƒ¨åˆ†æ•°æ®åˆ™å¯ä»¥ç›´æ¥å‘é€ç»™ä»èŠ‚ç‚¹. å¤§å¤§é™ä½äº†å¼€é”€.")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[s._v("$ psync "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("runId"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("offset"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])]),_("blockquote",[_("p",[s._v("éƒ¨åˆ†å¤åˆ¶æµç¨‹")])]),s._v(" "),_("p",[s._v("å…·ä½“æµç¨‹å¦‚ä¸‹:")]),s._v(" "),_("ul",[_("li",[s._v("ä¸»ä»èŠ‚ç‚¹å¦‚æœå‡ºç°ç½‘ç»œä¸­æ–­, æ—¶é—´è¶…è¿‡ "),_("strong",[s._v("repl-timeout")]),s._v(" æ—¶å°±è®¤ä¸ºä»èŠ‚ç‚¹æ•…éšœå¹¶ä¸­æ–­å¤åˆ¶é“¾æ¥.")]),s._v(" "),_("li",[s._v("æ­¤æ—¶ä¸»èŠ‚ç‚¹ä¾ç„¶å¯ä»¥å“åº”æŒ‡ä»¤, ä½†æ˜¯å¤åˆ¶é“¾æ¥ä¸­æ–­æ‰€ä»¥"),_("strong",[s._v("æ— æ³•")]),s._v("å‘é€å‘½ä»¤ç»™ä»èŠ‚ç‚¹, ä¸è¿‡ä¸»èŠ‚ç‚¹å†…éƒ¨"),_("strong",[s._v("å­˜åœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v(", ä¾ç„¶"),_("strong",[s._v("å¯ä»¥ä¿å­˜æœ€è¿‘ä¸€æ®µæ—¶é—´")]),s._v("å†…çš„å†™å‘½ä»¤æ•°æ®.")]),s._v(" "),_("li",[s._v("å½“ä¸»ä»å†æ¬¡è¿æ¥ä¹‹å, ä¸¤è€…é€šè¿‡"),_("strong",[s._v("åç§»é‡ offset")]),s._v(" åœ¨"),_("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),s._v("å¯»æ‰¾, å¦‚æœ offset "),_("strong",[s._v("åœ¨ç¼“å†²åŒº")]),s._v("ä¸­, åˆ™"),_("strong",[s._v("ç›´æ¥æ ¹æ®è¿™ä¸ªåç§»é‡è¡¥å‘")]),s._v("æ•°æ®å³å¯.")])]),s._v(" "),_("h5",{attrs:{id:"_4-å¿ƒè·³æœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¿ƒè·³æœºåˆ¶"}},[s._v("#")]),s._v(" 4.å¿ƒè·³æœºåˆ¶")]),s._v(" "),_("p",[s._v("ä¸»ä»ç»“ç‚¹åœ¨å»ºç«‹å¤åˆ¶ä¹‹å, å®ƒä»¬ä¹‹é—´ç»´æŠ¤ç€"),_("strong",[s._v("é•¿è¿æ¥")]),s._v("å¹¶å½¼æ­¤å‘é€"),_("strong",[s._v("å¿ƒè·³å‘½ä»¤")]),s._v(". å¿ƒè·³æœºåˆ¶:")]),s._v(" "),_("ul",[_("li",[s._v("ä¸»ä»èŠ‚ç‚¹éƒ½æœ‰å¿ƒè·³æ£€æŸ¥æœºåˆ¶.")]),s._v(" "),_("li",[s._v("ä¸»èŠ‚ç‚¹é»˜è®¤æ¯éš” "),_("strong",[s._v("10")]),s._v(" ç§’å¯¹ä»èŠ‚ç‚¹å‘é€ ping å‘½ä»¤, åˆ¤æ–­ä»èŠ‚ç‚¹çš„çŠ¶æ€.")]),s._v(" "),_("li",[s._v("ä»èŠ‚ç‚¹åœ¨ä¸»çº¿ç¨‹ä¸­æ¯éš” 1 ç§’å‘é€ "),_("code",[s._v("replconf ack {offset}")]),s._v("â€‹ å‘½ä»¤ç»™ä¸»èŠ‚ç‚¹æŠ¥å‘Šè‡ªå·±çš„ "),_("strong",[s._v("offset ä¿¡æ¯")]),s._v(".")])]),s._v(" "),_("h5",{attrs:{id:"_5-å¼‚æ­¥å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-å¼‚æ­¥å¤åˆ¶"}},[s._v("#")]),s._v(" 5.å¼‚æ­¥å¤åˆ¶")]),s._v(" "),_("p",[s._v("ä¸»èŠ‚ç‚¹ä¸ä½†è´Ÿè´£æ•°æ®è¯»å†™, è€Œä¸”è¿˜ä¼šæŠŠå†™å‘½ä»¤åŒæ­¥ç»™ä»èŠ‚ç‚¹. "),_("strong",[s._v("å†™å‘½ä»¤çš„å‘é€")]),s._v("è¿‡ç¨‹æ˜¯"),_("strong",[s._v("å¼‚æ­¥")]),s._v("å®Œæˆçš„, ä¹Ÿå°±æ˜¯è¯´ä¸»èŠ‚ç‚¹è‡ªèº«å¤„ç†å®Œè¯»å†™å‘½ä»¤å"),_("strong",[s._v("ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯")]),s._v(", å¹¶"),_("strong",[s._v("ä¸ç­‰å¾…ä»èŠ‚ç‚¹å¤åˆ¶")]),s._v("å®Œæˆ.")]),s._v(" "),_("p",[_("strong",[s._v("ç”±äºä¸»ä»å¤åˆ¶æ˜¯å¼‚æ­¥çš„, æ‰€ä»¥ä¼šé€ æˆä»èŠ‚ç‚¹çš„æ•°æ®ç›¸å¯¹ä¸»èŠ‚ç‚¹å­˜åœ¨å»¶è¿Ÿ, å¯èƒ½é€ æˆä¸€å®šçš„æ•°æ®ä¸ä¸€è‡´")]),s._v(". å…·ä½“å»¶è¿Ÿå¯ä»¥é€šè¿‡ "),_("strong",[s._v("info replication")]),s._v(" ä¸­"),_("strong",[s._v("ä¸»ä»èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡")]),s._v("è®¡ç®—å‡º.")]),s._v(" "),_("h4",{attrs:{id:"ä¸»ä»å¤åˆ¶å­˜åœ¨çš„é—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶å­˜åœ¨çš„é—®é¢˜"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶å­˜åœ¨çš„é—®é¢˜")]),s._v(" "),_("h5",{attrs:{id:"_1-è¯»å†™åˆ†ç¦»å¼•å‘çš„é—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¯»å†™åˆ†ç¦»å¼•å‘çš„é—®é¢˜"}},[s._v("#")]),s._v(" 1.è¯»å†™åˆ†ç¦»å¼•å‘çš„é—®é¢˜")]),s._v(" "),_("p",[s._v("è¯»å†™åˆ†ç¦»: å¯¹äº"),_("strong",[s._v("è¯»å æ¯”è¾ƒé«˜")]),s._v("çš„åœºæ™¯, å¯ä»¥æŠŠä¸€éƒ¨åˆ†è¯»æµé‡åˆ†æ‘Šåˆ°"),_("strong",[s._v("ä»èŠ‚ç‚¹")]),s._v("æ¥å‡è½»ä¸»èŠ‚ç‚¹çš„å‹åŠ›, åŒæ—¶éœ€è¦"),_("strong",[s._v("å†™æ“ä½œæ°¸è¿œåªåœ¨ä¸»èŠ‚ç‚¹")]),s._v("è¿›è¡Œ.")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220522230154662.png",alt:""}})]),s._v(" "),_("p",[s._v("å½“ä½¿ç”¨ä»èŠ‚ç‚¹å“åº”è¯»è¯·æ±‚æ—¶, å®¢æˆ·ç«¯å¯èƒ½å­˜åœ¨"),_("strong",[s._v("å¤åˆ¶æ•°æ®å»¶è¿Ÿ, è¯»åˆ°è¿‡æœŸæ•°æ®, ä»èŠ‚ç‚¹æ•…éšœ")]),s._v("ç­‰é—®é¢˜.")]),s._v(" "),_("h6",{attrs:{id:"_1-æ•°æ®å»¶è¿Ÿé—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•°æ®å»¶è¿Ÿé—®é¢˜"}},[s._v("#")]),s._v(" (1)æ•°æ®å»¶è¿Ÿé—®é¢˜")]),s._v(" "),_("p",[s._v("Redis å¤åˆ¶æ•°æ®çš„å»¶è¿Ÿæ˜¯ç”±äº"),_("strong",[s._v("å¼‚æ­¥å¤åˆ¶çš„ç‰¹æ€§")]),s._v("å†³å®šè€Œæ— æ³•æ”¹å˜çš„, å»¶è¿Ÿä¹Ÿå–å†³äºç½‘ç»œå¸¦å®½å’Œå‘½ä»¤é˜»å¡ç­‰æƒ…å†µ. è¿™ä¼šé€ æˆåˆšåœ¨ä¸»èŠ‚ç‚¹å†™å…¥çš„æ•°æ®ä»èŠ‚ç‚¹å¯èƒ½æš‚æ—¶"),_("strong",[s._v("è¯»ä¸åˆ°")]),s._v(".")]),s._v(" "),_("p",[s._v("å…è®¸"),_("strong",[s._v("çŸ­æš‚å»¶è¿Ÿ")]),s._v("çš„åœºæ™¯è¿˜è¡Œ, ä¸è¡Œçš„è¯å¯ä»¥"),_("strong",[s._v("ç¼–å†™å¤–éƒ¨ç›‘æ§ç¨‹åºç›‘å¬ä¸»ä»èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡, "),_("strong",[s._v("â€‹"),_("strong",[_("strong",[s._v('å½“å»¶è¿Ÿè¾ƒå¤§æ—¶è§¦å‘æŠ¥è­¦æˆ–è€…é€šçŸ¥å®¢æˆ·ç«¯åˆ«å»è¯»å–å»¶è¿Ÿè¿‡é«˜çš„èŠ‚ç‚¹. å…·ä½“å»¶è¿Ÿå¯ä»¥é€šè¿‡ "'),_("strong",[_("strong",[s._v("â€‹")])])]),s._v("info replication")])])]),s._v("â€‹ "),_("strong",[_("strong",[s._v('" ä¸­')])]),s._v("â€‹"),_("strong",[s._v("ä¸»ä»èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡")]),s._v("è®¡ç®—å‡º.")]),s._v(" "),_("p",[s._v("å½“å»¶è¿Ÿå­—èŠ‚é‡è¿‡é«˜æ—¶, å¯ä»¥é‡‡ç”¨ Zookeeper çš„ç›‘å¬å›è°ƒæœºåˆ¶å®ç°å®¢æˆ·ç«¯é€šçŸ¥. ä½†è¿™ç§æ–¹å¼æˆæœ¬æ¯”è¾ƒé«˜.")]),s._v(" "),_("h6",{attrs:{id:"_2-è¯»åˆ°è¿‡æœŸæ•°æ®é—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¯»åˆ°è¿‡æœŸæ•°æ®é—®é¢˜"}},[s._v("#")]),s._v(" (2)è¯»åˆ°è¿‡æœŸæ•°æ®é—®é¢˜")]),s._v(" "),_("p",[s._v("Redis é”®è¿‡æœŸåˆ é™¤ç­–ç•¥æœ‰"),_("strong",[s._v("æƒ°æ€§åˆ é™¤å’Œå®šæ—¶åˆ é™¤")]),s._v(". å¦‚æœä¸»èŠ‚ç‚¹åŒ…å«äº†å¤§é‡"),_("strong",[s._v("ä¼šè¿‡æœŸ")]),s._v("çš„æ•°æ®, å¯èƒ½ä¸»èŠ‚ç‚¹æ•°æ®"),_("strong",[s._v("å·²ç»è¿‡æœŸ")]),s._v(", ä½†æ˜¯è¿‡æœŸçš„å‘½ä»¤å¯èƒ½è¿˜æ²¡æœ‰æ¥å¾—åŠå‘åˆ°ä»èŠ‚ç‚¹, ä»è€Œå¯¼è‡´åœ¨"),_("strong",[s._v("ä»èŠ‚ç‚¹è¯»å–åˆ°è¿‡æœŸ")]),s._v("çš„æ•°æ®. ä½†æ˜¯ Redis 3.2 ä¹‹åçš„ç‰ˆæœ¬, "),_("strong",[s._v("ä»èŠ‚ç‚¹è¯»æ•°æ®æ—¶ä¹Ÿä¼šæ£€æŸ¥è¿‡æœŸæ—¶é—´")]),s._v(", å·²ç»"),_("strong",[s._v("è§£å†³äº†")]),s._v("è¿™ä¸ªé—®é¢˜.")]),s._v(" "),_("h6",{attrs:{id:"_3-ä»èŠ‚ç‚¹æ•…éšœé—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä»èŠ‚ç‚¹æ•…éšœé—®é¢˜"}},[s._v("#")]),s._v(" (3)ä»èŠ‚ç‚¹æ•…éšœé—®é¢˜")]),s._v(" "),_("p",[s._v("å¯¹äºä»èŠ‚ç‚¹æ•…éšœé—®é¢˜, éœ€è¦åœ¨å®¢æˆ·ç«¯ç»´æŠ¤å¯ç”¨ä»èŠ‚ç‚¹åˆ—è¡¨. åš Redis è¯»å†™åˆ†ç¦»å…¶å®ç»´æŠ¤æˆæœ¬æŒºé«˜, å¯ä»¥è€ƒè™‘ä½¿ç”¨ "),_("strong",[s._v("Redis Cluster")]),s._v(" ç­‰åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆ.")]),s._v(" "),_("h5",{attrs:{id:"_2-ä¸»ä»é…ç½®ä¸ä¸€è‡´é—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸»ä»é…ç½®ä¸ä¸€è‡´é—®é¢˜"}},[s._v("#")]),s._v(" 2.ä¸»ä»é…ç½®ä¸ä¸€è‡´é—®é¢˜")]),s._v(" "),_("p",[_("strong",[s._v("ä¸»ä»é…ç½®ä¸ä¸€è‡´")]),s._v("æ˜¯ä¸€ä¸ªå®¹æ˜“å¿½è§†çš„é—®é¢˜, ä¸»ä»èŠ‚ç‚¹ä¹‹é—´æœ‰çš„é…ç½®å¯ä»¥ä¸ä¸€è‡´, ä½†æ˜¯"),_("strong",[s._v("å†…å­˜ç›¸å…³")]),s._v("çš„é…ç½®æœ€å¥½æ˜¯ä¸€è‡´çš„, å¦‚ maxmemory.")]),s._v(" "),_("h5",{attrs:{id:"_3-å¤åˆ¶é£æš´é—®é¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¤åˆ¶é£æš´é—®é¢˜"}},[s._v("#")]),s._v(" 3.å¤åˆ¶é£æš´é—®é¢˜")]),s._v(" "),_("p",[_("strong",[s._v("å¤åˆ¶é£æš´")]),s._v("æŒ‡çš„æ˜¯"),_("strong",[s._v("å¤§é‡ä»èŠ‚ç‚¹")]),s._v("å¯¹åŒä¸€ä¸»èŠ‚ç‚¹æˆ–è€…åŒä¸€å°æœºå™¨çš„å¤šä¸ªä¸»èŠ‚ç‚¹åœ¨"),_("strong",[s._v("çŸ­æ—¶é—´å†…å‘èµ·å…¨é‡å¤åˆ¶")]),s._v("çš„è¿‡ç¨‹, è¿™ä¼šé€ æˆä¸»èŠ‚ç‚¹å¼€é”€æå¤§, éœ€è¦è§„é¿.")]),s._v(" "),_("p",[s._v("åœ¨ä¸€ä¸»å¤šä»çš„æ¶æ„ä¸‹, å¦‚æœä¸»èŠ‚ç‚¹æ•…éšœé‡å¯, "),_("strong",[s._v("è¿è¡Œ id æ”¹å˜")]),s._v(", é‚£ä¹ˆå°±ä¼šå¯¹"),_("strong",[s._v("å„ä¸ªä»èŠ‚ç‚¹å‘èµ·å…¨é‡å¤åˆ¶")]),s._v(". ä¸»èŠ‚ç‚¹çŸ­æ—¶é—´å†…éœ€è¦ç”Ÿæˆå¤§é‡ RDB æ–‡ä»¶, ä¼ è¾“ RDB æ–‡ä»¶ä¹Ÿä¼šé€ æˆçŸ­æ—¶é—´å†…å¸¦å®½æ¶ˆè€—å·¨å¤§.")]),s._v(" "),_("p",[s._v("è§£å†³æ–¹æ¡ˆ: "),_("strong",[s._v("å‡å°‘")]),s._v("å•ä¸ªä¸»èŠ‚ç‚¹ æŒ‚è½½ä»èŠ‚ç‚¹æ•°é‡, æˆ–è€…ä½¿ç”¨åŠ å…¥"),_("strong",[s._v("ä¸­é—´å±‚çš„æ ‘çŠ¶æ¶æ„")]),s._v("æ¥ä¿æŠ¤ä¸»èŠ‚ç‚¹. å¦‚æœæ˜¯å•æœºå¤šä¸ªä¸»èŠ‚ç‚¹, å¯ä»¥æŠŠä¸»èŠ‚ç‚¹éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Š.")]),s._v(" "),_("p",[s._v("â€")]),s._v(" "),_("p",[s._v("â€")]),s._v(" "),_("h4",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),_("ul",[_("li",[s._v("ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹")])])])}),[],!1,null,null,null);_.default=r.exports}}]);