<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM监控与故障处理工具 | Pangolin</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="大道至简">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.76d9f797.css" as="style"><link rel="preload" href="/assets/js/app.5bc2c979.js" as="script"><link rel="preload" href="/assets/js/2.eccd4273.js" as="script"><link rel="preload" href="/assets/js/167.d7278e80.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8038d8.js"><link rel="prefetch" href="/assets/js/100.db890b43.js"><link rel="prefetch" href="/assets/js/101.9b9a913e.js"><link rel="prefetch" href="/assets/js/102.b98098b4.js"><link rel="prefetch" href="/assets/js/103.20eafae5.js"><link rel="prefetch" href="/assets/js/104.5f942f86.js"><link rel="prefetch" href="/assets/js/105.a443c173.js"><link rel="prefetch" href="/assets/js/106.6530e112.js"><link rel="prefetch" href="/assets/js/107.7b05a1d1.js"><link rel="prefetch" href="/assets/js/108.8c45adc4.js"><link rel="prefetch" href="/assets/js/109.ea29e43c.js"><link rel="prefetch" href="/assets/js/11.8d2b228f.js"><link rel="prefetch" href="/assets/js/110.0765054b.js"><link rel="prefetch" href="/assets/js/111.ae06b85d.js"><link rel="prefetch" href="/assets/js/112.b27bb80e.js"><link rel="prefetch" href="/assets/js/113.592e5b3f.js"><link rel="prefetch" href="/assets/js/114.677c3c60.js"><link rel="prefetch" href="/assets/js/115.fb35062d.js"><link rel="prefetch" href="/assets/js/116.19de2d57.js"><link rel="prefetch" href="/assets/js/117.ac783334.js"><link rel="prefetch" href="/assets/js/118.06b27dd3.js"><link rel="prefetch" href="/assets/js/119.cf6bb932.js"><link rel="prefetch" href="/assets/js/12.8764d408.js"><link rel="prefetch" href="/assets/js/120.ba8e09a5.js"><link rel="prefetch" href="/assets/js/121.bc501a72.js"><link rel="prefetch" href="/assets/js/122.c9a3dd47.js"><link rel="prefetch" href="/assets/js/123.b474c20b.js"><link rel="prefetch" href="/assets/js/124.f405a8c5.js"><link rel="prefetch" href="/assets/js/125.24083f67.js"><link rel="prefetch" href="/assets/js/126.3c5c6c33.js"><link rel="prefetch" href="/assets/js/127.b561056f.js"><link rel="prefetch" href="/assets/js/128.58891fb1.js"><link rel="prefetch" href="/assets/js/129.5073fbfd.js"><link rel="prefetch" href="/assets/js/13.1034e1a1.js"><link rel="prefetch" href="/assets/js/130.ca12ca1d.js"><link rel="prefetch" href="/assets/js/131.8e520e7f.js"><link rel="prefetch" href="/assets/js/132.0f186ee2.js"><link rel="prefetch" href="/assets/js/133.1d8479f7.js"><link rel="prefetch" href="/assets/js/134.9c30d69b.js"><link rel="prefetch" href="/assets/js/135.91463dab.js"><link rel="prefetch" href="/assets/js/136.5e57454a.js"><link rel="prefetch" href="/assets/js/137.1d4e51f0.js"><link rel="prefetch" href="/assets/js/138.6cd3ac7f.js"><link rel="prefetch" href="/assets/js/139.7bd789a6.js"><link rel="prefetch" href="/assets/js/14.ead46968.js"><link rel="prefetch" href="/assets/js/140.e1d92390.js"><link rel="prefetch" href="/assets/js/141.23e11057.js"><link rel="prefetch" href="/assets/js/142.c8cc0f38.js"><link rel="prefetch" href="/assets/js/143.fc738cb7.js"><link rel="prefetch" href="/assets/js/144.67c64203.js"><link rel="prefetch" href="/assets/js/145.cc73ed45.js"><link rel="prefetch" href="/assets/js/146.adaac4c0.js"><link rel="prefetch" href="/assets/js/147.0e83b5c1.js"><link rel="prefetch" href="/assets/js/148.1f253a46.js"><link rel="prefetch" href="/assets/js/149.ab428593.js"><link rel="prefetch" href="/assets/js/15.198f32e1.js"><link rel="prefetch" href="/assets/js/150.64cd514e.js"><link rel="prefetch" href="/assets/js/151.ca1ae55a.js"><link rel="prefetch" href="/assets/js/152.4119b23d.js"><link rel="prefetch" href="/assets/js/153.ed663263.js"><link rel="prefetch" href="/assets/js/154.71b836f6.js"><link rel="prefetch" href="/assets/js/155.c47e2e88.js"><link rel="prefetch" href="/assets/js/156.3e91e0f4.js"><link rel="prefetch" href="/assets/js/157.811b1421.js"><link rel="prefetch" href="/assets/js/158.71193c19.js"><link rel="prefetch" href="/assets/js/159.f09778fd.js"><link rel="prefetch" href="/assets/js/16.03096de2.js"><link rel="prefetch" href="/assets/js/160.15d99de4.js"><link rel="prefetch" href="/assets/js/161.813166a0.js"><link rel="prefetch" href="/assets/js/162.c52bbf77.js"><link rel="prefetch" href="/assets/js/163.ada6991a.js"><link rel="prefetch" href="/assets/js/164.d8ceba57.js"><link rel="prefetch" href="/assets/js/165.a645ef3a.js"><link rel="prefetch" href="/assets/js/166.995d24ad.js"><link rel="prefetch" href="/assets/js/168.e388905a.js"><link rel="prefetch" href="/assets/js/169.52edabbb.js"><link rel="prefetch" href="/assets/js/17.a49f9c19.js"><link rel="prefetch" href="/assets/js/170.0b62c5b4.js"><link rel="prefetch" href="/assets/js/171.017c8997.js"><link rel="prefetch" href="/assets/js/172.f0763c39.js"><link rel="prefetch" href="/assets/js/173.c961bf43.js"><link rel="prefetch" href="/assets/js/174.395224c0.js"><link rel="prefetch" href="/assets/js/175.52fbdc96.js"><link rel="prefetch" href="/assets/js/176.14e0a3b2.js"><link rel="prefetch" href="/assets/js/177.78f7d89f.js"><link rel="prefetch" href="/assets/js/178.c08bdd65.js"><link rel="prefetch" href="/assets/js/179.b634397c.js"><link rel="prefetch" href="/assets/js/18.9786a034.js"><link rel="prefetch" href="/assets/js/180.284b6c99.js"><link rel="prefetch" href="/assets/js/181.b4744ee7.js"><link rel="prefetch" href="/assets/js/182.8bfd08cd.js"><link rel="prefetch" href="/assets/js/183.59b0b92b.js"><link rel="prefetch" href="/assets/js/184.a5fae95c.js"><link rel="prefetch" href="/assets/js/185.dcf55c72.js"><link rel="prefetch" href="/assets/js/186.6b1cf319.js"><link rel="prefetch" href="/assets/js/187.312708d0.js"><link rel="prefetch" href="/assets/js/188.71de21d0.js"><link rel="prefetch" href="/assets/js/189.7d72c108.js"><link rel="prefetch" href="/assets/js/19.089d6618.js"><link rel="prefetch" href="/assets/js/190.85dce0bd.js"><link rel="prefetch" href="/assets/js/191.08f7136b.js"><link rel="prefetch" href="/assets/js/192.6a155217.js"><link rel="prefetch" href="/assets/js/193.64f71670.js"><link rel="prefetch" href="/assets/js/194.c4d60c72.js"><link rel="prefetch" href="/assets/js/195.748850e9.js"><link rel="prefetch" href="/assets/js/196.887ef31c.js"><link rel="prefetch" href="/assets/js/197.4473c177.js"><link rel="prefetch" href="/assets/js/198.ea53a990.js"><link rel="prefetch" href="/assets/js/199.886f6490.js"><link rel="prefetch" href="/assets/js/20.a52783e8.js"><link rel="prefetch" href="/assets/js/200.7619a798.js"><link rel="prefetch" href="/assets/js/201.d3f5de5f.js"><link rel="prefetch" href="/assets/js/202.ed4c18cc.js"><link rel="prefetch" href="/assets/js/203.7937068e.js"><link rel="prefetch" href="/assets/js/204.3dbdd61c.js"><link rel="prefetch" href="/assets/js/205.52bc6fdf.js"><link rel="prefetch" href="/assets/js/206.4393998f.js"><link rel="prefetch" href="/assets/js/207.ec8e121d.js"><link rel="prefetch" href="/assets/js/208.f54d4e42.js"><link rel="prefetch" href="/assets/js/209.1bc5d06d.js"><link rel="prefetch" href="/assets/js/21.2e3bed21.js"><link rel="prefetch" href="/assets/js/210.2a3dc088.js"><link rel="prefetch" href="/assets/js/211.7084c526.js"><link rel="prefetch" href="/assets/js/212.de742850.js"><link rel="prefetch" href="/assets/js/213.fc775028.js"><link rel="prefetch" href="/assets/js/214.e338168c.js"><link rel="prefetch" href="/assets/js/215.3e89c57e.js"><link rel="prefetch" href="/assets/js/216.ecfe7587.js"><link rel="prefetch" href="/assets/js/217.14dcd4a2.js"><link rel="prefetch" href="/assets/js/218.ee7d57f7.js"><link rel="prefetch" href="/assets/js/219.c263c1e8.js"><link rel="prefetch" href="/assets/js/22.3d09766f.js"><link rel="prefetch" href="/assets/js/220.33f2bfd2.js"><link rel="prefetch" href="/assets/js/221.cd55e739.js"><link rel="prefetch" href="/assets/js/222.63107647.js"><link rel="prefetch" href="/assets/js/223.768ef403.js"><link rel="prefetch" href="/assets/js/224.54357078.js"><link rel="prefetch" href="/assets/js/225.b8e46582.js"><link rel="prefetch" href="/assets/js/226.1d0dcae9.js"><link rel="prefetch" href="/assets/js/227.a351c0a1.js"><link rel="prefetch" href="/assets/js/228.f7b8c278.js"><link rel="prefetch" href="/assets/js/229.8e4aba4d.js"><link rel="prefetch" href="/assets/js/23.b87e3933.js"><link rel="prefetch" href="/assets/js/230.186bd7a5.js"><link rel="prefetch" href="/assets/js/231.dad483e1.js"><link rel="prefetch" href="/assets/js/232.26555358.js"><link rel="prefetch" href="/assets/js/233.658ba0e4.js"><link rel="prefetch" href="/assets/js/234.7994cee0.js"><link rel="prefetch" href="/assets/js/235.3934d057.js"><link rel="prefetch" href="/assets/js/236.59cb6eac.js"><link rel="prefetch" href="/assets/js/237.baa1c655.js"><link rel="prefetch" href="/assets/js/238.8ee9f8ae.js"><link rel="prefetch" href="/assets/js/239.b0fe3966.js"><link rel="prefetch" href="/assets/js/24.afe2a3c4.js"><link rel="prefetch" href="/assets/js/240.d06483fa.js"><link rel="prefetch" href="/assets/js/241.81a2223e.js"><link rel="prefetch" href="/assets/js/242.8f6eee74.js"><link rel="prefetch" href="/assets/js/243.874461fa.js"><link rel="prefetch" href="/assets/js/244.ec0bb622.js"><link rel="prefetch" href="/assets/js/245.2ecf61f8.js"><link rel="prefetch" href="/assets/js/246.e7f6e55c.js"><link rel="prefetch" href="/assets/js/247.f32a1a4b.js"><link rel="prefetch" href="/assets/js/248.4302c4d8.js"><link rel="prefetch" href="/assets/js/249.9b0a4d9f.js"><link rel="prefetch" href="/assets/js/25.a22777b8.js"><link rel="prefetch" href="/assets/js/250.1295326c.js"><link rel="prefetch" href="/assets/js/251.d1cdb160.js"><link rel="prefetch" href="/assets/js/252.4e9d56fe.js"><link rel="prefetch" href="/assets/js/253.5a23b42d.js"><link rel="prefetch" href="/assets/js/254.8777547c.js"><link rel="prefetch" href="/assets/js/255.b8825033.js"><link rel="prefetch" href="/assets/js/256.0ee3689d.js"><link rel="prefetch" href="/assets/js/257.4a684795.js"><link rel="prefetch" href="/assets/js/258.ca696e72.js"><link rel="prefetch" href="/assets/js/259.fdf867d0.js"><link rel="prefetch" href="/assets/js/26.c84357e5.js"><link rel="prefetch" href="/assets/js/260.d35d60d5.js"><link rel="prefetch" href="/assets/js/261.c162cef5.js"><link rel="prefetch" href="/assets/js/262.8cbc5289.js"><link rel="prefetch" href="/assets/js/263.c05bbe4c.js"><link rel="prefetch" href="/assets/js/264.2e7c8f69.js"><link rel="prefetch" href="/assets/js/265.372a0632.js"><link rel="prefetch" href="/assets/js/266.49c38b9d.js"><link rel="prefetch" href="/assets/js/267.f7406d35.js"><link rel="prefetch" href="/assets/js/268.c7846c3e.js"><link rel="prefetch" href="/assets/js/269.e30bdc7f.js"><link rel="prefetch" href="/assets/js/27.0b3da7b9.js"><link rel="prefetch" href="/assets/js/270.8a3786ce.js"><link rel="prefetch" href="/assets/js/271.4b771c95.js"><link rel="prefetch" href="/assets/js/272.c710d2d6.js"><link rel="prefetch" href="/assets/js/273.43fb2872.js"><link rel="prefetch" href="/assets/js/274.d8a9dff2.js"><link rel="prefetch" href="/assets/js/275.c2812b68.js"><link rel="prefetch" href="/assets/js/276.406503c4.js"><link rel="prefetch" href="/assets/js/277.10c29e54.js"><link rel="prefetch" href="/assets/js/278.5f4b657a.js"><link rel="prefetch" href="/assets/js/279.84b86ae8.js"><link rel="prefetch" href="/assets/js/28.1c1fd5a6.js"><link rel="prefetch" href="/assets/js/280.8a2ba3b2.js"><link rel="prefetch" href="/assets/js/281.4a7f2b91.js"><link rel="prefetch" href="/assets/js/282.7b2f2668.js"><link rel="prefetch" href="/assets/js/283.455f93df.js"><link rel="prefetch" href="/assets/js/284.1a448478.js"><link rel="prefetch" href="/assets/js/285.19eebc05.js"><link rel="prefetch" href="/assets/js/286.5423cfc6.js"><link rel="prefetch" href="/assets/js/287.afbe115e.js"><link rel="prefetch" href="/assets/js/288.d4f4f247.js"><link rel="prefetch" href="/assets/js/289.da477465.js"><link rel="prefetch" href="/assets/js/29.103209e9.js"><link rel="prefetch" href="/assets/js/290.abf99800.js"><link rel="prefetch" href="/assets/js/291.71fe3ae6.js"><link rel="prefetch" href="/assets/js/292.455169ca.js"><link rel="prefetch" href="/assets/js/293.d23ffed4.js"><link rel="prefetch" href="/assets/js/294.1a753204.js"><link rel="prefetch" href="/assets/js/295.badfa110.js"><link rel="prefetch" href="/assets/js/296.344206a1.js"><link rel="prefetch" href="/assets/js/297.29e4f914.js"><link rel="prefetch" href="/assets/js/298.f9db8940.js"><link rel="prefetch" href="/assets/js/299.2253c1e7.js"><link rel="prefetch" href="/assets/js/3.e5ca1c51.js"><link rel="prefetch" href="/assets/js/30.e76a827e.js"><link rel="prefetch" href="/assets/js/300.e5bfd607.js"><link rel="prefetch" href="/assets/js/301.cc3e786e.js"><link rel="prefetch" href="/assets/js/302.7fdc62b6.js"><link rel="prefetch" href="/assets/js/303.b1db491f.js"><link rel="prefetch" href="/assets/js/304.18917b0f.js"><link rel="prefetch" href="/assets/js/305.d352aeb5.js"><link rel="prefetch" href="/assets/js/306.8bc72324.js"><link rel="prefetch" href="/assets/js/307.854b4037.js"><link rel="prefetch" href="/assets/js/308.6a0e4a18.js"><link rel="prefetch" href="/assets/js/309.d184df6f.js"><link rel="prefetch" href="/assets/js/31.7e4b200d.js"><link rel="prefetch" href="/assets/js/310.8e0af1ab.js"><link rel="prefetch" href="/assets/js/311.00bae85e.js"><link rel="prefetch" href="/assets/js/312.bc92cba9.js"><link rel="prefetch" href="/assets/js/313.8f70a987.js"><link rel="prefetch" href="/assets/js/314.8f190f1f.js"><link rel="prefetch" href="/assets/js/315.4b8506c7.js"><link rel="prefetch" href="/assets/js/316.5911c1f9.js"><link rel="prefetch" href="/assets/js/317.58cca547.js"><link rel="prefetch" href="/assets/js/318.4f23c053.js"><link rel="prefetch" href="/assets/js/319.941f5d3e.js"><link rel="prefetch" href="/assets/js/32.9c188bac.js"><link rel="prefetch" href="/assets/js/320.a3f15adc.js"><link rel="prefetch" href="/assets/js/321.14c74686.js"><link rel="prefetch" href="/assets/js/322.5f7b1b87.js"><link rel="prefetch" href="/assets/js/323.ab05eccb.js"><link rel="prefetch" href="/assets/js/324.292806ba.js"><link rel="prefetch" href="/assets/js/325.b96314dd.js"><link rel="prefetch" href="/assets/js/326.3d8f6329.js"><link rel="prefetch" href="/assets/js/327.49cf9268.js"><link rel="prefetch" href="/assets/js/328.be56ec05.js"><link rel="prefetch" href="/assets/js/329.8c390111.js"><link rel="prefetch" href="/assets/js/33.2435d797.js"><link rel="prefetch" href="/assets/js/330.b961e5fd.js"><link rel="prefetch" href="/assets/js/331.24ce8c0b.js"><link rel="prefetch" href="/assets/js/332.115b7546.js"><link rel="prefetch" href="/assets/js/333.957e0728.js"><link rel="prefetch" href="/assets/js/334.68825ff7.js"><link rel="prefetch" href="/assets/js/335.b662f33d.js"><link rel="prefetch" href="/assets/js/336.d8818747.js"><link rel="prefetch" href="/assets/js/337.9d24e096.js"><link rel="prefetch" href="/assets/js/338.3b669645.js"><link rel="prefetch" href="/assets/js/339.51cc2773.js"><link rel="prefetch" href="/assets/js/34.d57f3bb9.js"><link rel="prefetch" href="/assets/js/340.28cfadfb.js"><link rel="prefetch" href="/assets/js/341.4e6b0bdd.js"><link rel="prefetch" href="/assets/js/342.310c1a3e.js"><link rel="prefetch" href="/assets/js/343.0e61677a.js"><link rel="prefetch" href="/assets/js/344.340a39bd.js"><link rel="prefetch" href="/assets/js/345.fff51053.js"><link rel="prefetch" href="/assets/js/346.93c709db.js"><link rel="prefetch" href="/assets/js/347.dc863ac9.js"><link rel="prefetch" href="/assets/js/348.13c191d7.js"><link rel="prefetch" href="/assets/js/349.8aea43f7.js"><link rel="prefetch" href="/assets/js/35.e20cb4ac.js"><link rel="prefetch" href="/assets/js/350.49b72b87.js"><link rel="prefetch" href="/assets/js/351.3e6e6379.js"><link rel="prefetch" href="/assets/js/352.e2524a53.js"><link rel="prefetch" href="/assets/js/353.b71b2a33.js"><link rel="prefetch" href="/assets/js/354.a4720902.js"><link rel="prefetch" href="/assets/js/355.5a8970e1.js"><link rel="prefetch" href="/assets/js/356.353f0a9c.js"><link rel="prefetch" href="/assets/js/357.648060ca.js"><link rel="prefetch" href="/assets/js/358.643b787c.js"><link rel="prefetch" href="/assets/js/359.b1bc0c81.js"><link rel="prefetch" href="/assets/js/36.6a79f8ad.js"><link rel="prefetch" href="/assets/js/360.748faf07.js"><link rel="prefetch" href="/assets/js/361.cddfbfab.js"><link rel="prefetch" href="/assets/js/362.46990756.js"><link rel="prefetch" href="/assets/js/363.f4846a88.js"><link rel="prefetch" href="/assets/js/364.e7fd6af2.js"><link rel="prefetch" href="/assets/js/365.41693194.js"><link rel="prefetch" href="/assets/js/366.60931b9e.js"><link rel="prefetch" href="/assets/js/367.c7a310db.js"><link rel="prefetch" href="/assets/js/368.cae4028a.js"><link rel="prefetch" href="/assets/js/369.e3bcd2c2.js"><link rel="prefetch" href="/assets/js/37.4ccc31d6.js"><link rel="prefetch" href="/assets/js/370.2ea3b181.js"><link rel="prefetch" href="/assets/js/371.978056e5.js"><link rel="prefetch" href="/assets/js/372.aa13db83.js"><link rel="prefetch" href="/assets/js/373.f3791afe.js"><link rel="prefetch" href="/assets/js/374.b108af2d.js"><link rel="prefetch" href="/assets/js/375.dc75d5b1.js"><link rel="prefetch" href="/assets/js/376.8a663da6.js"><link rel="prefetch" href="/assets/js/38.9816dff1.js"><link rel="prefetch" href="/assets/js/39.03d551c0.js"><link rel="prefetch" href="/assets/js/4.611d42c4.js"><link rel="prefetch" href="/assets/js/40.ce442bf2.js"><link rel="prefetch" href="/assets/js/41.d596832c.js"><link rel="prefetch" href="/assets/js/42.29309c56.js"><link rel="prefetch" href="/assets/js/43.d47b7a06.js"><link rel="prefetch" href="/assets/js/44.87716237.js"><link rel="prefetch" href="/assets/js/45.d5ef3d2b.js"><link rel="prefetch" href="/assets/js/46.21cef7ff.js"><link rel="prefetch" href="/assets/js/47.75c67941.js"><link rel="prefetch" href="/assets/js/48.b94040d3.js"><link rel="prefetch" href="/assets/js/49.507fb28d.js"><link rel="prefetch" href="/assets/js/5.e6d623f8.js"><link rel="prefetch" href="/assets/js/50.4013f17e.js"><link rel="prefetch" href="/assets/js/51.6e81cba9.js"><link rel="prefetch" href="/assets/js/52.07e4aadf.js"><link rel="prefetch" href="/assets/js/53.1d325b49.js"><link rel="prefetch" href="/assets/js/54.79ff5e8c.js"><link rel="prefetch" href="/assets/js/55.77160bdd.js"><link rel="prefetch" href="/assets/js/56.a3041056.js"><link rel="prefetch" href="/assets/js/57.b7c0602c.js"><link rel="prefetch" href="/assets/js/58.a4af9a23.js"><link rel="prefetch" href="/assets/js/59.61a80d59.js"><link rel="prefetch" href="/assets/js/6.dc644b59.js"><link rel="prefetch" href="/assets/js/60.4ae1e1f0.js"><link rel="prefetch" href="/assets/js/61.b733273a.js"><link rel="prefetch" href="/assets/js/62.63b8d77d.js"><link rel="prefetch" href="/assets/js/63.46a84bd8.js"><link rel="prefetch" href="/assets/js/64.ce8c5891.js"><link rel="prefetch" href="/assets/js/65.8abe6836.js"><link rel="prefetch" href="/assets/js/66.6f9a9cf9.js"><link rel="prefetch" href="/assets/js/67.6bc415b9.js"><link rel="prefetch" href="/assets/js/68.b100ab24.js"><link rel="prefetch" href="/assets/js/69.5d9ed0d7.js"><link rel="prefetch" href="/assets/js/7.7da3e776.js"><link rel="prefetch" href="/assets/js/70.f213eb63.js"><link rel="prefetch" href="/assets/js/71.9dbed333.js"><link rel="prefetch" href="/assets/js/72.1129fb4b.js"><link rel="prefetch" href="/assets/js/73.7459f6b0.js"><link rel="prefetch" href="/assets/js/74.2364da14.js"><link rel="prefetch" href="/assets/js/75.72e5d347.js"><link rel="prefetch" href="/assets/js/76.7f1bc93d.js"><link rel="prefetch" href="/assets/js/77.7f9bb46a.js"><link rel="prefetch" href="/assets/js/78.16497536.js"><link rel="prefetch" href="/assets/js/79.1598ba88.js"><link rel="prefetch" href="/assets/js/8.91ce867e.js"><link rel="prefetch" href="/assets/js/80.d7595902.js"><link rel="prefetch" href="/assets/js/81.c808c887.js"><link rel="prefetch" href="/assets/js/82.49dc6011.js"><link rel="prefetch" href="/assets/js/83.6e151bae.js"><link rel="prefetch" href="/assets/js/84.9d3d5086.js"><link rel="prefetch" href="/assets/js/85.2c4d111e.js"><link rel="prefetch" href="/assets/js/86.cff98baa.js"><link rel="prefetch" href="/assets/js/87.655584a0.js"><link rel="prefetch" href="/assets/js/88.109ad4f1.js"><link rel="prefetch" href="/assets/js/89.46f7ed5c.js"><link rel="prefetch" href="/assets/js/9.8a2e5f54.js"><link rel="prefetch" href="/assets/js/90.1a91e9ca.js"><link rel="prefetch" href="/assets/js/91.26a98055.js"><link rel="prefetch" href="/assets/js/92.6ed9cb6e.js"><link rel="prefetch" href="/assets/js/93.14253412.js"><link rel="prefetch" href="/assets/js/94.54415bcf.js"><link rel="prefetch" href="/assets/js/95.0e1c9d0a.js"><link rel="prefetch" href="/assets/js/96.8654188f.js"><link rel="prefetch" href="/assets/js/97.d338a1d8.js"><link rel="prefetch" href="/assets/js/98.efa1e5c5.js"><link rel="prefetch" href="/assets/js/99.83fa6575.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76d9f797.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/magic.png" alt="Pangolin" class="logo"> <span class="site-name can-hide">Pangolin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">中间件</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">个人</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/operating_system/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><a href="/basic/" class="link-title">基础</a> <span class="title" style="display:none;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>达尔文的猹</h3> <span>大道至简 悟在天成</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">中间件</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">个人</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/operating_system/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><a href="/basic/" class="link-title">基础</a> <span class="title" style="display:none;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ORM框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/4553db/" class="sidebar-link">MyBatis</a></li><li><a href="/pages/d426ff/" class="sidebar-link">Spring集成MyBatis</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/45687a/" class="sidebar-link">基础</a></li><li><a href="/pages/669da3/" class="sidebar-link">Java基础</a></li><li><a href="/pages/06424b/" class="sidebar-link">类与继承</a></li><li><a href="/pages/a29a57/" class="sidebar-link">抽象类与接口</a></li><li><a href="/pages/575ca7/" class="sidebar-link">内部类</a></li><li><a href="/pages/1d42f5/" class="sidebar-link">枚举类</a></li><li><a href="/pages/68df7d/" class="sidebar-link">常用类</a></li><li><a href="/pages/208d9a/" class="sidebar-link">关键字</a></li><li><a href="/pages/19431a/" class="sidebar-link">注解</a></li><li><a href="/pages/98c0c9/" class="sidebar-link">异常</a></li><li><a href="/pages/a08fb2/" class="sidebar-link">泛型</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>集合类</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e52b1c/" class="sidebar-link">集合类</a></li><li><a href="/pages/20a058/" class="sidebar-link">集合容器类概述</a></li><li><a href="/pages/71ab62/" class="sidebar-link">ArrayList与LinkedList</a></li><li><a href="/pages/dd747b/" class="sidebar-link">ArrayDeque</a></li><li><a href="/pages/f0ecf7/" class="sidebar-link">PriorityQueue</a></li><li><a href="/pages/a577c4/" class="sidebar-link">HashMap与HashSet</a></li><li><a href="/pages/b65f71/" class="sidebar-link">LinkedHashMap</a></li><li><a href="/pages/02deb8/" class="sidebar-link">TreeMap与TreeSet</a></li><li><a href="/pages/8b70b6/" class="sidebar-link">WeakHashMap</a></li><li><a href="/pages/098b2b/" class="sidebar-link">CopyOnWriteArrayList</a></li><li><a href="/pages/380128/" class="sidebar-link">ConcurrentHashMap</a></li><li><a href="/pages/b23642/" class="sidebar-link">BlockingQueue</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>并发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/5d5b55/" class="sidebar-link">并发</a></li><li><a href="/pages/ef591d/" class="sidebar-link">多线程基础</a></li><li><a href="/pages/870f46/" class="sidebar-link">JMM与Volatile</a></li><li><a href="/pages/70bfda/" class="sidebar-link">JUC与AQS</a></li><li><a href="/pages/60c2c3/" class="sidebar-link">锁与互斥同步</a></li><li><a href="/pages/6e4dfa/" class="sidebar-link">显式锁与ReetrantLock</a></li><li><a href="/pages/a0d56d/" class="sidebar-link">线程安全总结</a></li><li><a href="/pages/b92a49/" class="sidebar-link">JUC组件与线程协作</a></li><li><a href="/pages/103bb5/" class="sidebar-link">Atomic原子变量与Unsafe类与CAS</a></li><li><a href="/pages/065f55/" class="sidebar-link">线程池与定时任务</a></li><li><a href="/pages/dd3660/" class="sidebar-link">ThreadLocal</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>IO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7db050/" class="sidebar-link">IO</a></li><li><a href="/pages/ccb0a7/" class="sidebar-link">文件操作</a></li><li><a href="/pages/45bc73/" class="sidebar-link">IO流操作</a></li><li><a href="/pages/404e82/" class="sidebar-link">网络IO操作</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Java高级特性</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/396bd1/" class="sidebar-link">Java高级特性</a></li><li><a href="/pages/eaa98b/" class="sidebar-link">Lambda表达式</a></li><li><a href="/pages/40af88/" class="sidebar-link">流Stream</a></li><li><a href="/pages/402b10/" class="sidebar-link">反射</a></li><li><a href="/pages/a5ebcd/" class="sidebar-link">代理</a></li><li><a href="/pages/b48bfe/" class="sidebar-link">Java性能问题定位分析</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/20204f/" class="sidebar-link">其他</a></li><li><a href="/pages/e4cde0/" class="sidebar-link">杂记</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>规范&amp;amp;风格</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ee7259/" class="sidebar-link">规范&amp;amp;风格</a></li><li><a href="/pages/139e3f/" class="sidebar-link">代码整洁之道</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ed8d11/" class="sidebar-link">Web基础</a></li><li><a href="/pages/a228d7/" class="sidebar-link">Spring(Boot)基础</a></li><li><a href="/pages/ecd8b6/" class="sidebar-link">Spring Boot应用整合</a></li><li><a href="/pages/76dc08/" class="sidebar-link">Spring MVC</a></li><li><a href="/pages/b9aa73/" class="sidebar-link">Spring AOP</a></li><li><a href="/pages/dc74be/" class="sidebar-link">Spring事务</a></li><li><a href="/pages/b43c8c/" class="sidebar-link">Spring IOC源码分析-概览</a></li><li><a href="/pages/d9b4a5/" class="sidebar-link">Spring IOC源码分析-getBean()</a></li><li><a href="/pages/59dd3e/" class="sidebar-link">Spring IOC源码分析-createBean()</a></li><li><a href="/pages/691b21/" class="sidebar-link">Spring AOP源码分析</a></li><li><a href="/pages/d31e18/" class="sidebar-link">Spring事务源码分析</a></li><li><a href="/pages/f16cdb/" class="sidebar-link">Spring Boot源码分析</a></li><li><a href="/pages/b13a90/" class="sidebar-link">Spring MVC源码分析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/943c23/" class="sidebar-link">JVM内存区域与对象解析</a></li><li><a href="/pages/05acae/" class="sidebar-link">内存分配与垃圾收集</a></li><li><a href="/pages/d09a16/" aria-current="page" class="active sidebar-link">JVM监控与故障处理工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/06e4ad/" class="sidebar-link">类文件结构与类加载机制</a></li><li><a href="/pages/3d00d5/" class="sidebar-link">虚拟机方法调用与指令执行引擎</a></li><li><a href="/pages/eba070/" class="sidebar-link">程序编译与代码优化</a></li><li><a href="/pages/83896f/" class="sidebar-link">虚拟机调优及参数总结</a></li><li><a href="/pages/8a0034/" class="sidebar-link">GraalVM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f6cd57/" class="sidebar-link">数据库系统原理</a></li><li><a href="/pages/410bf5/" class="sidebar-link">MySQL必知必会</a></li><li><a href="/pages/495264/" class="sidebar-link">MySQL开发与优化</a></li><li><a href="/pages/ec7e76/" class="sidebar-link">MySQL架构与日志</a></li><li><a href="/pages/4dbe1f/" class="sidebar-link">MySQL索引</a></li><li><a href="/pages/cbc7ab/" class="sidebar-link">MySQL优化</a></li><li><a href="/pages/4afd3a/" class="sidebar-link">MySQL锁机制与事务并发控制</a></li><li><a href="/pages/412461/" class="sidebar-link">MySQL高级特性</a></li><li><a href="/pages/41888c/" class="sidebar-link">MySQL设计规范</a></li><li><a href="/pages/087de5/" class="sidebar-link">MySQL架构篇</a></li><li><a href="/pages/b0952c/" class="sidebar-link">MySQL复制</a></li><li><a href="/pages/ee884d/" class="sidebar-link">MySQL高可用</a></li><li><a href="/pages/6d4f47/" class="sidebar-link">MySQL运维篇</a></li><li><a href="/pages/b8bad7/" class="sidebar-link">MySQL常用工具</a></li><li><a href="/pages/8bd691/" class="sidebar-link">MySQL日志</a></li><li><a href="/pages/5db7ef/" class="sidebar-link">MySQL备份与恢复</a></li><li><a href="/pages/3e3d3a/" class="sidebar-link">MySQL权限与安全</a></li><li><a href="/pages/5f2a5c/" class="sidebar-link">MySQL监控</a></li><li><a href="/pages/bf28eb/" class="sidebar-link">数据库LeetCode题目</a></li><li><a href="/pages/d4f878/" class="sidebar-link">数据库面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2bed26/" class="sidebar-link">Arthas</a></li><li><a href="/pages/84ff17/" class="sidebar-link">CICD</a></li><li><a href="/pages/a7e6ff/" class="sidebar-link">Maven</a></li><li><a href="/pages/2a3f45/" class="sidebar-link">Typora主题</a></li><li><a href="/pages/f28f56/" class="sidebar-link">VuePress</a></li><li><a href="/pages/9d673a/" class="sidebar-link">思源笔记</a></li><li><a href="/pages/538b8a/" class="sidebar-link">环境搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ORM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c83270/" class="sidebar-link">MyBatis</a></li><li><a href="/pages/29ba44/" class="sidebar-link">Spring集成MyBatis</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>测试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e55b6f/" class="sidebar-link">测试基础</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/develop/#开发" data-v-06225672>开发</a></li><li data-v-06225672><a href="/develop/#JVM" data-v-06225672>JVM</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/nanodaemony" target="_blank" title="作者" class="beLink" data-v-06225672>NanoDaemony</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->JVM监控与故障处理工具<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="_3-jvm监控与故障处理工具"><a href="#_3-jvm监控与故障处理工具" class="header-anchor">#</a> 3.JVM监控与故障处理工具</h1> <p>给一个系统定位问题可以分析**运行日志, 异常堆栈, GC日志, 线程快照文件(threaddump/javacore文件), 堆转储快照(heapdump/hprof文件)**等内容.</p> <h4 id="jdk的命令行工具"><a href="#jdk的命令行工具" class="header-anchor">#</a> JDK的命令行工具</h4> <p>这些命令在 JDK 安装目录下的 <strong>bin</strong> 目录下:</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">主要作用</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>jps</strong></td> <td style="text-align:center;">Jvm Process Status Tool, 显示指定系统内所有的 HotSpot 虚拟机<strong>进程</strong></td></tr> <tr><td style="text-align:center;"><strong>jstat</strong></td> <td style="text-align:center;">Jvm Statistics Monitoring Tool, 用于收集 HotSpot <strong>虚拟机各方面的运行数据</strong></td></tr> <tr><td style="text-align:center;"><strong>jinfo</strong></td> <td style="text-align:center;">Configuration Info for Java, 显示<strong>虚拟机配置</strong>信息</td></tr> <tr><td style="text-align:center;"><strong>jmap</strong></td> <td style="text-align:center;">Memory Map for Java, 生成虚拟机的<strong>内存转储快照</strong>(heapdump 文件)</td></tr> <tr><td style="text-align:center;"><strong>jhat</strong></td> <td style="text-align:center;">Jvm Heap Dump Browser, 用于<strong>分析 heapmap 文件</strong>, 它会建立一个服务器让用户可以在浏览器上查看分析结果</td></tr> <tr><td style="text-align:center;"><strong>jstack</strong></td> <td style="text-align:center;">Stack Trace for Java, 显示虚拟机的<strong>线程快照</strong></td></tr></tbody></table> <h5 id="_1-jps获取虚拟机进程状况"><a href="#_1-jps获取虚拟机进程状况" class="header-anchor">#</a> 1.jps获取虚拟机进程状况</h5> <p>jps 可以列出正在运行的<strong>虚拟机进程</strong>, 并显示虚拟机执行<strong>主类名称</strong>以及这些进程的本地虚拟机<strong>唯一 ID</strong>. 看到 ID 之后就能定位到某个 Java 应用, 然后进行后续操作. jps 命令格式:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>jps <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> <span class="token punctuation">[</span>hostid<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>可选参数选项说明如下:</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token parameter variable">-q</span> <span class="token comment"># 不输出类名, Jar名和传入main方法的参数</span>
<span class="token parameter variable">-m</span> <span class="token comment"># 输出传入main方法的参数</span>
<span class="token parameter variable">-l</span> <span class="token comment"># 输出main类或Jar的全限名</span>
<span class="token parameter variable">-v</span> <span class="token comment"># 输出传入JVM的参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>不加参数:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jps
<span class="token number">6</span> leo-homework-server.jar
<span class="token number">11336</span> Jps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>jps -l</strong>: 输出<strong>主类的全名</strong>, 如果进程执行的是 <strong>Jar 包</strong>, 输出 Jar 路径.</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jps <span class="token parameter variable">-l</span>
<span class="token number">6</span> leo-homework-server/target/leo-homework-server.jar
<span class="token number">11358</span> sun.tools.jps.Jps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>jps -v</strong>: 输出虚拟机进程启动时 <strong>JVM 参数</strong>.</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jps <span class="token parameter variable">-v</span>
<span class="token number">6</span> leo-homework-server.jar <span class="token parameter variable">-Xms6g</span> <span class="token parameter variable">-Xmx6g</span> -Xloggc:/home/shared/log/gc.log <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token parameter variable">-XX:+UseG1GC</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span>256m <span class="token parameter variable">-XX:-OmitStackTraceInFastThrow</span> <span class="token parameter variable">-XX:-PrintGCDetails</span> <span class="token parameter variable">-verbose:gc</span> <span class="token parameter variable">-Dcom.sun.management.jmxremote.port</span><span class="token operator">=</span><span class="token number">9999</span> <span class="token parameter variable">-Dcom.sun.management.jmxremote.login.config</span><span class="token operator">=</span>FenbiConfig <span class="token parameter variable">-Djava.security.auth.login.config</span><span class="token operator">=</span>/etc/jmx_ldap.config <span class="token parameter variable">-Dcom.sun.management.jmxremote.ssl</span><span class="token operator">=</span>false -javaagent:/lib/skywalking-BETA/agent/skywalking-agent.jar -javaagent:/home/shared/files/agent.jar <span class="token parameter variable">-Dxmiast.projectname</span><span class="token operator">=</span>leo-homework <span class="token parameter variable">-Dxmiast.nodename</span><span class="token operator">=</span>leo-homework <span class="token parameter variable">-Dxmiast.ip</span><span class="token operator">=</span><span class="token number">10.130</span>.8.20 <span class="token parameter variable">-Dxmiast.port</span><span class="token operator">=</span><span class="token number">9090</span> <span class="token parameter variable">-Dxmiast.region</span><span class="token operator">=</span> <span class="token parameter variable">-Dxmiast.token</span><span class="token operator">=</span>puzWfJyx9qVZxk19Xb5b5LQ <span class="token parameter variable">-Dxmiast.delayhooktime.ms</span><span class="token operator">=</span><span class="token number">300000</span>
<span class="token number">11382</span> Jps <span class="token parameter variable">-Dapplication.home</span><span class="token operator">=</span>/usr/java/jdk1.8.0_202 <span class="token parameter variable">-Xms8m</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_2-jstat监视虚拟机各种运行状态信息-常用"><a href="#_2-jstat监视虚拟机各种运行状态信息-常用" class="header-anchor">#</a> 2.jstat监视虚拟机各种运行状态信息(常用)</h5> <h6 id="_1-概述"><a href="#_1-概述" class="header-anchor">#</a> (1)概述</h6> <p>jstat 是用于监视虚拟机各种<strong>运行状态信息</strong>的命令行工具. 它可以显示本地或者远程虚拟机进程中的<strong>类装载, 内存, 垃圾回收, JIT 编译</strong>等运行数据, 可以查看<strong>堆内存各部分的使用量, 以及加载类的数量</strong>, 在仅提供了纯文本控制台环境的服务器上, 它将是<strong>运行期定位虚拟机性能问题的首选工具</strong>. <strong>==非常重要==</strong>! ! ! 可以用于<strong>内存分配调优</strong>, 需要用熟悉!</p> <p>jstat 的命令格式:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>jstat <span class="token punctuation">[</span><span class="token operator">-</span>命令选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>pid<span class="token punctuation">]</span> <span class="token punctuation">[</span>间隔时间<span class="token punctuation">(</span>毫秒<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>查询次数<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>常见的 <strong>命令选项</strong> 如下, 这里每个参数输出属性不一样, 有需要再去找资料.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>jstat <span class="token operator">-</span><span class="token keyword">class</span> pid 		<span class="token comment">// 显示ClassLoader的相关信息</span>
jstat <span class="token operator">-</span>compiler pid 	        <span class="token comment">// 显示JIT编译的相关信息</span>
jstat <span class="token operator">-</span>gc pid   		<span class="token comment">// 显示与GC相关的堆信息</span>
jstat <span class="token operator">-</span>gccapacity pid 	        <span class="token comment">// 显示整个堆内存的容量及使用情况</span>
jstat <span class="token operator">-</span>gcnew pid 		<span class="token comment">// 显示新生代信息</span>
jstat <span class="token operator">-</span>gcnewcapacity pid 	<span class="token comment">// 显示新生代大小与使用情况</span>
jstat <span class="token operator">-</span>gcold pid 		<span class="token comment">// 显示老年代和永久代的信息</span>
jstat <span class="token operator">-</span>gcoldcapacity pid 	<span class="token comment">// 显示老年代的大小</span>
jstat <span class="token operator">-</span>gcpermcapacity pid 	<span class="token comment">// 显示永久代大小</span>
jstat <span class="token operator">-</span>gcutil pid 		<span class="token comment">// 显示垃圾收集信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>根据这些参数可以对各个堆区参数进行查看, 出来的参数大同小异.</p> <p>例子 1:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jstat <span class="token parameter variable">-gc</span> <span class="token parameter variable">-h3</span> <span class="token number">6</span> <span class="token number">1000</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jstat <span class="token parameter variable">-gc</span> <span class="token parameter variable">-h3</span> <span class="token number">6</span> <span class="token number">1000</span> <span class="token number">10</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2467840.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2473984.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2480128.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2482176.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2486272.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2488320.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2492416.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2498560.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2500608.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 <span class="token number">0.0</span>   <span class="token number">4096.0</span>  <span class="token number">0.0</span>   <span class="token number">4096.0</span> <span class="token number">3960832.0</span> <span class="token number">2729984.0</span> <span class="token number">2326528.0</span>   <span class="token number">470878.4</span>  <span class="token number">205568.0</span> <span class="token number">198644.7</span> <span class="token number">23296.0</span> <span class="token number">21984.4</span>   <span class="token number">1845</span>   <span class="token number">51.301</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.673</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>表示分析<strong>进程 id 为 6</strong> 的 <strong>GC</strong> 情况, 每隔 1000ms 打印一次记录, 打印 10 次停止, 每 3 行后打印指标头部.</p> <p>例子 2: 需要每 1000 毫秒查询一次进程 6 垃圾收集状况, 一共查询 10 次, 命令如下.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jstat <span class="token parameter variable">-gcutil</span> <span class="token number">6</span> <span class="token number">1000</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jstat <span class="token parameter variable">-gcutil</span> <span class="token number">6</span> <span class="token number">1000</span> <span class="token number">10</span>
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.02</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.13</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.18</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.18</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.39</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.49</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.49</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.64</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.64</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
  <span class="token number">0.00</span> <span class="token number">100.00</span>  <span class="token number">31.75</span>  <span class="token number">20.24</span>  <span class="token number">96.63</span>  <span class="token number">94.37</span>   <span class="token number">1846</span>   <span class="token number">51.323</span>     <span class="token number">1</span>    <span class="token number">1.371</span>   <span class="token number">52.694</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h6 id="_2-垃圾回收统计"><a href="#_2-垃圾回收统计" class="header-anchor">#</a> (2)垃圾回收统计</h6> <p><strong>jstat -gc pid 最常用</strong>, 可以评估程序内存使用及 <strong>GC 压力整体情况</strong>, 需记住!</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jstat <span class="token parameter variable">-gc</span> <span class="token number">6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>结果如下:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jstat <span class="token parameter variable">-gc</span> <span class="token number">6</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 <span class="token number">0.0</span>   <span class="token number">2048.0</span>  <span class="token number">0.0</span>   <span class="token number">2048.0</span> <span class="token number">3962880.0</span> <span class="token number">12288.0</span>  <span class="token number">2326528.0</span>   <span class="token number">472219.0</span>  <span class="token number">205568.0</span> <span class="token number">198645.4</span> <span class="token number">23296.0</span> <span class="token number">21984.9</span>   <span class="token number">1847</span>   <span class="token number">51.344</span>   <span class="token number">1</span>      <span class="token number">1.371</span>   <span class="token number">52.716</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>S0C: 第一个幸存区的大小, 单位 KB.</li> <li>S1C: 第二个幸存区的大小.</li> <li>S0U: 第一个幸存区的使用大小.</li> <li>S1U: 第二个幸存区的使用大小.</li> <li>EC: 伊甸园区的大小.</li> <li>EU: 伊甸园区的使用大小.</li> <li>OC: 老年代大小.</li> <li>OU: 老年代使用大小.</li> <li>MC: 方法区大小(元空间).</li> <li>MU: 方法区使用大小.</li> <li>CCSC: 压缩类空间大小.</li> <li>CCSU: 压缩类空间使用大小.</li> <li>YGC: 年轻代垃圾回收<strong>次数</strong>, 启动以来总共的次数.</li> <li>YGCT: 年轻代垃圾回收消耗时间, 单位 s, YGC 的<strong>总时间</strong>.</li> <li>FGC: 老年代垃圾回收总次数.</li> <li>FGCT: 老年代垃圾回收消耗时间, 单位 s, FGC <strong>总时间</strong>.</li> <li>GCT: 垃圾回收消耗总时间, 单位 s, 全部 GC 的<strong>总时间</strong>.</li></ul> <p>根据这些参数就可以看 JVM 的状态, 并评估当前系统的压力, 用于<strong>调优</strong>!</p> <h5 id="_3-jinfo实时查看与调整虚拟机各项参数"><a href="#_3-jinfo实时查看与调整虚拟机各项参数" class="header-anchor">#</a> 3.jinfo实时查看与调整虚拟机各项参数</h5> <p>查看正在运行的 Java 进程的扩展参数.</p> <ul><li><strong>jinfo pid</strong>: 输出当前 JVM 进程的<strong>全部参数和系统属性</strong>. 第一部分是系统属性, 第二部分是 JVM 参数.</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jinfo <span class="token number">6</span>
Attaching to process ID <span class="token number">6</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">25.202</span>-b08
  
<span class="token comment"># Java参数  </span>
Java System Properties:

java.vendor <span class="token operator">=</span> Oracle Corporation
os.name <span class="token operator">=</span> Linux
sun.boot.class.path <span class="token operator">=</span> /usr/java/jdk1.8.0_202/jre/lib/resources.jar:/usr/java/jdk1.8.0_202/jre/lib/rt.jar:/usr/java/jdk1.8.0_202/jre/lib/sunrsasign.jar:/usr/java/jdk1.8.0_202/jre/lib/jsse.jar:/usr/java/jdk1.8.0_202/jre/lib/jce.jar:/usr/java/jdk1.8.0_202/jre/lib/charsets.jar:/usr/java/jdk1.8.0_202/jre/lib/jfr.jar:/usr/java/jdk1.8.0_202/jre/classes
<span class="token comment"># 省略....</span>

<span class="token comment"># 虚拟机参数 </span>
VM Flags:
Non-default VM flags: <span class="token parameter variable">-XX:CICompilerCount</span><span class="token operator">=</span><span class="token number">4</span> <span class="token parameter variable">-XX:ConcGCThreads</span><span class="token operator">=</span><span class="token number">2</span> <span class="token parameter variable">-XX:G1HeapRegionSize</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>null <span class="token parameter variable">-XX:InitialHeapSize</span><span class="token operator">=</span><span class="token number">9663676416</span> <span class="token parameter variable">-XX:+ManagementServer</span> <span class="token parameter variable">-XX:MarkStackSize</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token parameter variable">-XX:MaxHeapSize</span><span class="token operator">=</span><span class="token number">9663676416</span> <span class="token parameter variable">-XX:MaxNewSize</span><span class="token operator">=</span><span class="token number">5796528128</span> <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span><span class="token number">268435456</span> <span class="token parameter variable">-XX:MinHeapDeltaBytes</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:-OmitStackTraceInFastThrow</span> <span class="token parameter variable">-XX:+PrintGC</span> <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token parameter variable">-XX:+PrintGCTimeStamps</span> <span class="token parameter variable">-XX:+UseCompressedClassPointers</span> <span class="token parameter variable">-XX:+UseCompressedOops</span> <span class="token parameter variable">-XX:+UseFastUnorderedTimeStamps</span> <span class="token parameter variable">-XX:+UseG1GC</span> 
Command line:  <span class="token parameter variable">-Xmx9g</span> <span class="token parameter variable">-Xms9g</span> -Xloggc:/home/shared/log/gc.log <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token parameter variable">-XX:+UseG1GC</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span>256m <span class="token parameter variable">-XX:-OmitStackTraceInFastThrow</span> <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token parameter variable">-verbose:gc</span> <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/home/oom-dump/leo-cm-ocr <span class="token parameter variable">-Dcom.sun.management.jmxremote.port</span><span class="token operator">=</span><span class="token number">9999</span> <span class="token parameter variable">-Dcom.sun.management.jmxremote.login.config</span><span class="token operator">=</span>FenbiConfig <span class="token parameter variable">-Djava.security.auth.login.config</span><span class="token operator">=</span>/etc/jmx_ldap.config <span class="token parameter variable">-Dcom.sun.management.jmxremote.ssl</span><span class="token operator">=</span>false -javaagent:/lib/skywalking-BETA/agent/skywalking-agent.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><strong>jinfo -flags pid</strong>: 单独查看 <strong>JVM 参数</strong>.</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jinfo <span class="token parameter variable">-flags</span> <span class="token number">6</span>
Attaching to process ID <span class="token number">6</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">25.202</span>-b08
Non-default VM flags: <span class="token parameter variable">-XX:CICompilerCount</span><span class="token operator">=</span><span class="token number">4</span> <span class="token parameter variable">-XX:ConcGCThreads</span><span class="token operator">=</span><span class="token number">2</span> <span class="token parameter variable">-XX:G1HeapRegionSize</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>null <span class="token parameter variable">-XX:InitialHeapSize</span><span class="token operator">=</span><span class="token number">9663676416</span> <span class="token parameter variable">-XX:+ManagementServer</span> <span class="token parameter variable">-XX:MarkStackSize</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token parameter variable">-XX:MaxHeapSize</span><span class="token operator">=</span><span class="token number">9663676416</span> <span class="token parameter variable">-XX:MaxNewSize</span><span class="token operator">=</span><span class="token number">5796528128</span> <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span><span class="token number">268435456</span> <span class="token parameter variable">-XX:MinHeapDeltaBytes</span><span class="token operator">=</span><span class="token number">4194304</span> <span class="token parameter variable">-XX:-OmitStackTraceInFastThrow</span> <span class="token parameter variable">-XX:+PrintGC</span> <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token parameter variable">-XX:+PrintGCTimeStamps</span> <span class="token parameter variable">-XX:+UseCompressedClassPointers</span> <span class="token parameter variable">-XX:+UseCompressedOops</span> <span class="token parameter variable">-XX:+UseFastUnorderedTimeStamps</span> <span class="token parameter variable">-XX:+UseG1GC</span> 
Command line:  <span class="token parameter variable">-Xmx9g</span> <span class="token parameter variable">-Xms9g</span> -Xloggc:/home/shared/log/gc.log <span class="token parameter variable">-XX:+PrintGCDateStamps</span> <span class="token parameter variable">-XX:+UseG1GC</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">200</span> <span class="token parameter variable">-XX:MetaspaceSize</span><span class="token operator">=</span>256m <span class="token parameter variable">-XX:-OmitStackTraceInFastThrow</span> <span class="token parameter variable">-XX:+PrintGCDetails</span> <span class="token parameter variable">-verbose:gc</span> <span class="token parameter variable">-XX:+HeapDumpOnOutOfMemoryError</span> <span class="token parameter variable">-XX:HeapDumpPath</span><span class="token operator">=</span>/home/oom-dump/leo-cm-ocr <span class="token parameter variable">-Dcom.sun.management.jmxremote.port</span><span class="token operator">=</span><span class="token number">9999</span> <span class="token parameter variable">-Dcom.sun.management.jmxremote.login.config</span><span class="token operator">=</span>FenbiConfig <span class="token parameter variable">-Djava.security.auth.login.config</span><span class="token operator">=</span>/etc/jmx_ldap.config <span class="token parameter variable">-Dcom.sun.management.jmxremote.ssl</span><span class="token operator">=</span>false -javaagent:/lib/skywalking-BETA/agent/skywalking-agent.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>jinfo -flag name vmid</strong>: 输出<strong>对应名称的参数</strong>的具体值. 比如输出 MaxHeapSize, 查看当前 JVM 进程是否开启打印 GC 日志.</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jinfo  <span class="token parameter variable">-flag</span> MaxHeapSize <span class="token number">6</span>
<span class="token parameter variable">-XX:MaxHeapSize</span><span class="token operator">=</span><span class="token number">9663676416</span>
$ jinfo  <span class="token parameter variable">-flag</span> PrintGC <span class="token number">6</span>
<span class="token parameter variable">-XX:+PrintGC</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>info -sysprops pid</strong>: 单独查看系统属性.</li></ul> <h5 id="_4-jmap生成堆转储快照"><a href="#_4-jmap生成堆转储快照" class="header-anchor">#</a> 4.jmap生成堆转储快照</h5> <p>jmap 可以用来查看内存信息, 实例个数以及占用内存大小.</p> <p>jmap 命令用于生成<strong>堆转储快照</strong>. jmap 的作用并不仅仅为了获取 <strong>dump 文件</strong>, 它还可以查询 finalize 执行队列, 堆和永久代的详细信息. <strong>如空间使用率, 当前用的是哪种收集器等</strong>.</p> <p>主要用处:</p> <ul><li><strong>堆信息</strong>.</li> <li><strong>查看实例个数与占用内存大小</strong></li> <li><strong>堆内存 dump 文件</strong>.</li></ul> <p>jmap 的命令格式:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> pid<span class="token punctuation">(</span>进程号<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_1-查看堆信息"><a href="#_1-查看堆信息" class="header-anchor">#</a> (1)查看堆信息</h6> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jmap <span class="token parameter variable">-heap</span> pid
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行结果:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jmap <span class="token parameter variable">-heap</span> <span class="token number">6</span>
Attaching to process ID <span class="token number">6</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">25.202</span>-b08

using thread-local object allocation.
Garbage-First <span class="token punctuation">(</span>G1<span class="token punctuation">)</span> GC with <span class="token number">2</span> thread<span class="token punctuation">(</span>s<span class="token punctuation">)</span>

Heap Configuration:
   MinHeapFreeRatio         <span class="token operator">=</span> <span class="token number">40</span>
   MaxHeapFreeRatio         <span class="token operator">=</span> <span class="token number">70</span>
   MaxHeapSize              <span class="token operator">=</span> <span class="token number">6442450944</span> <span class="token punctuation">(</span><span class="token number">6144</span>.0MB<span class="token punctuation">)</span>
   NewSize                  <span class="token operator">=</span> <span class="token number">1363144</span> <span class="token punctuation">(</span><span class="token number">1</span>.2999954223632812MB<span class="token punctuation">)</span>
   MaxNewSize               <span class="token operator">=</span> <span class="token number">3865051136</span> <span class="token punctuation">(</span><span class="token number">3686</span>.0MB<span class="token punctuation">)</span>
   OldSize                  <span class="token operator">=</span> <span class="token number">5452592</span> <span class="token punctuation">(</span><span class="token number">5</span>.1999969482421875MB<span class="token punctuation">)</span>
   NewRatio                 <span class="token operator">=</span> <span class="token number">2</span>
   SurvivorRatio            <span class="token operator">=</span> <span class="token number">8</span>
   MetaspaceSize            <span class="token operator">=</span> <span class="token number">268435456</span> <span class="token punctuation">(</span><span class="token number">256</span>.0MB<span class="token punctuation">)</span>
   CompressedClassSpaceSize <span class="token operator">=</span> <span class="token number">1073741824</span> <span class="token punctuation">(</span><span class="token number">1024</span>.0MB<span class="token punctuation">)</span>
   MaxMetaspaceSize         <span class="token operator">=</span> <span class="token number">17592186044415</span> MB
   G1HeapRegionSize         <span class="token operator">=</span> <span class="token number">2097152</span> <span class="token punctuation">(</span><span class="token number">2</span>.0MB<span class="token punctuation">)</span>

Heap Usage:
G1 Heap:
   regions  <span class="token operator">=</span> <span class="token number">3072</span>
   capacity <span class="token operator">=</span> <span class="token number">6442450944</span> <span class="token punctuation">(</span><span class="token number">6144</span>.0MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">1620983032</span> <span class="token punctuation">(</span><span class="token number">1545</span>.8898849487305MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">4821467912</span> <span class="token punctuation">(</span><span class="token number">4598</span>.1101150512695MB<span class="token punctuation">)</span>
   <span class="token number">25.160968179504078</span>% used
G1 Young Generation:
Eden Space:
   regions  <span class="token operator">=</span> <span class="token number">548</span>
   capacity <span class="token operator">=</span> <span class="token number">4057989120</span> <span class="token punctuation">(</span><span class="token number">3870</span>.0MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">1149239296</span> <span class="token punctuation">(</span><span class="token number">1096</span>.0MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">2908749824</span> <span class="token punctuation">(</span><span class="token number">2774</span>.0MB<span class="token punctuation">)</span>
   <span class="token number">28.320413436692508</span>% used
Survivor Space:
   regions  <span class="token operator">=</span> <span class="token number">1</span>
   capacity <span class="token operator">=</span> <span class="token number">2097152</span> <span class="token punctuation">(</span><span class="token number">2</span>.0MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">2097152</span> <span class="token punctuation">(</span><span class="token number">2</span>.0MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span>.0MB<span class="token punctuation">)</span>
   <span class="token number">100.0</span>% used
G1 Old Generation:
   regions  <span class="token operator">=</span> <span class="token number">229</span>
   capacity <span class="token operator">=</span> <span class="token number">2382364672</span> <span class="token punctuation">(</span><span class="token number">2272</span>.0MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">469646584</span> <span class="token punctuation">(</span><span class="token number">447</span>.88988494873047MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">1912718088</span> <span class="token punctuation">(</span><span class="token number">1824</span>.1101150512695MB<span class="token punctuation">)</span>
   <span class="token number">19.713463245982854</span>% used
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h6 id="_2-查看实例个数与占用内存大小"><a href="#_2-查看实例个数与占用内存大小" class="header-anchor">#</a> (2)查看实例个数与占用内存大小</h6> <p>使用 -<strong>histo</strong> 参数<strong>查看实例个数与占用内存大小</strong>.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ jmap <span class="token parameter variable">-histo</span> <span class="token number">6</span>

 num     <span class="token comment">#instances         #bytes  class name</span>
----------------------------------------------
   <span class="token number">1</span>:           <span class="token number">658</span>        <span class="token number">4189056</span>  <span class="token punctuation">[</span>I
   <span class="token number">2</span>:          <span class="token number">1197</span>        <span class="token number">1177576</span>  <span class="token punctuation">[</span>B
   <span class="token number">3</span>:          <span class="token number">7504</span>         <span class="token number">816120</span>  <span class="token punctuation">[</span>C
   <span class="token number">4</span>:          <span class="token number">5779</span>         <span class="token number">138696</span>  java.lang.String
   <span class="token number">5</span>:           <span class="token number">691</span>          <span class="token number">78976</span>  java.lang.Class
   <span class="token number">6</span>:          <span class="token number">1298</span>          <span class="token number">61136</span>  <span class="token punctuation">[</span>Ljava.lang.Object<span class="token punctuation">;</span>
   <span class="token number">7</span>:           <span class="token number">791</span>          <span class="token number">31640</span>  java.util.TreeMap<span class="token variable">$Entry</span>
   <span class="token number">8</span>:           <span class="token number">634</span>          <span class="token number">25360</span>  java.util.LinkedHashMap<span class="token variable">$Entry</span>
   <span class="token number">9</span>:           <span class="token number">456</span>          <span class="token number">22144</span>  <span class="token punctuation">[</span>Ljava.lang.String<span class="token punctuation">;</span>
  <span class="token number">10</span>:           <span class="token number">368</span>          <span class="token number">11776</span>  java.util.HashMap<span class="token variable">$Node</span>
  <span class="token number">11</span>:            <span class="token number">38</span>          <span class="token number">11584</span>  <span class="token punctuation">[</span>Ljava.util.HashMap<span class="token variable">$Node</span><span class="token punctuation">;</span>
  <span class="token number">12</span>:           <span class="token number">152</span>          <span class="token number">10944</span>  java.lang.reflect.Field
  <span class="token number">13</span>:           <span class="token number">388</span>           <span class="token number">9312</span>  java.lang.StringBuilder
  <span class="token number">14</span>:           <span class="token number">251</span>           <span class="token number">8032</span>  java.io.File
  <span class="token number">15</span>:           <span class="token number">242</span>           <span class="token number">7744</span>  java.util.Hashtable<span class="token variable">$Entry</span>
  <span class="token number">16</span>:           <span class="token number">107</span>           <span class="token number">6848</span>  java.net.URL
  <span class="token number">17</span>:           <span class="token number">253</span>           <span class="token number">6072</span>  java.lang.StringBuffer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>num: 序号.</li> <li>instances: 实例<strong>数量</strong>.</li> <li>bytes: 占用空间大小.</li> <li>class name: 类名称, 这里 <strong>[C -&gt; char[], [S -&gt; short[], [I -&gt; int[], [B -&gt; byte[], [[I -&gt; int[][]</strong>.</li></ul> <h6 id="_3-获取堆转储文件"><a href="#_3-获取堆转储文件" class="header-anchor">#</a> (3)获取堆转储文件</h6> <p><strong>示例</strong>: 生成指定应用程序的<strong>堆专储快照文件</strong>. 后面可以通过 jhat, mat 等工具<strong>分析</strong>该 dump 文件.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ jmap <span class="token parameter variable">-dump:format</span><span class="token operator">=</span>b,file<span class="token operator">=</span>heap.hprof <span class="token number">6</span>
Dumping heap to /home/shared/apps/leo-homework/heap.hprof <span class="token punctuation">..</span>.
Heap dump <span class="token function">file</span> created
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>JDK 提供 <strong>jhat 与 jmap</strong> 搭配使用, 来<strong>分析 dump 生成的堆快照</strong>. jhat 内置了一个微型服务器, 生成 dump 文件的分析结果后, 可以在<strong>浏览器</strong>中查看. 访问 http://localhost:7000/ 即可.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jhat heap.hprof
Reading from heap.hprof<span class="token punctuation">..</span>.
Dump <span class="token function">file</span> created Sat May 04 <span class="token number">12</span>:30:31 CST <span class="token number">2019</span>
Snapshot read, resolving<span class="token punctuation">..</span>.
Resolving <span class="token number">131419</span> objects<span class="token punctuation">..</span>.
Chasing references, <span class="token function">expect</span> <span class="token number">26</span> dots<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Eliminating duplicate references<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Snapshot resolved.
Started HTTP server on port <span class="token number">7000</span>
Server is ready.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_5-jstack生成线程快照"><a href="#_5-jstack生成线程快照" class="header-anchor">#</a> 5.jstack生成线程快照</h5> <p><strong>jstack</strong> 命令用于生成虚拟机当前时刻的<strong>线程快照</strong>, 一般称为 <strong>threaddump</strong> 文件. 线程快照就是当前虚拟机内每一条线程正在执行的<strong>方法堆栈集合</strong>, 生成线程快照的主要目的是<strong>定位线程出现长时间停顿的原因</strong>, 如<strong>线程死锁, 死循环, 请求外部资源导致长时间等待</strong>等. 线程出现<strong>停顿</strong>的时候通过 jstack 来查看各个线程的调用堆栈, 就可以知道没有响应的线程到底在后台做些什么事情.</p> <p>jstack 命令格式:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jstack <span class="token punctuation">[</span>option<span class="token punctuation">]</span> vmid<span class="token punctuation">(</span>进程号<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_1-死锁分析"><a href="#_1-死锁分析" class="header-anchor">#</a> (1)死锁分析</h6> <p><strong>下面是一个线程死锁的代码. 通过 jstack 命令进行死锁检查, 输出死锁信息, 找到发生死锁的线程.</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadLockDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> resource1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 资源 1</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> resource2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 资源 2</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 锁定资源1</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>resource1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;获取资源1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 睡眠等待</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;等待资源2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 请求资源2</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>resource2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;获取资源2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;线程 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 锁定资源1</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>resource2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;获取资源2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 睡眠等待</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;等待资源1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 请求资源2</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>resource1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;获取资源1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;线程 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>两个线程互相等待资源, 造成死锁. 输出:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Thread<span class="token punctuation">[</span>线程 <span class="token number">1,5</span>,main<span class="token punctuation">]</span>获取资源1
Thread<span class="token punctuation">[</span>线程 <span class="token number">2,5</span>,main<span class="token punctuation">]</span>获取资源2
Thread<span class="token punctuation">[</span>线程 <span class="token number">1,5</span>,main<span class="token punctuation">]</span>等待资源2
Thread<span class="token punctuation">[</span>线程 <span class="token number">2,5</span>,main<span class="token punctuation">]</span>等待资源1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>查看指定进程号的线程快照</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ jstack <span class="token number">6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出的部分内容如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>$  jps                                              
<span class="token number">29408</span> <span class="token class-name">Launcher</span>
<span class="token number">29409</span> <span class="token class-name">DeadLockDemo</span>        <span class="token comment">// 测试进程</span>
<span class="token number">424</span> 
<span class="token number">29016</span> <span class="token class-name">RemoteMavenServer36</span>
<span class="token number">426</span> 
<span class="token number">29420</span> <span class="token class-name">Jps</span>
<span class="token comment">// jstack分析测试进程</span>
$ jstack <span class="token number">29409</span>
<span class="token comment">// ....</span>

<span class="token comment">// 找到一个死锁情况</span>
<span class="token class-name">Found</span> one <span class="token class-name">Java</span><span class="token operator">-</span>level deadlock<span class="token operator">:</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token string">&quot;线程 2&quot;</span><span class="token operator">:</span>
  waiting <span class="token keyword">to</span> <span class="token namespace">lock</span> monitor <span class="token number">0x00007fadc08334a8</span> <span class="token punctuation">(</span>object <span class="token number">0x000000076ac965f0</span><span class="token punctuation">,</span> a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  which is held by <span class="token string">&quot;线程 1&quot;</span>
<span class="token string">&quot;线程 1&quot;</span><span class="token operator">:</span>
  waiting <span class="token keyword">to</span> <span class="token namespace">lock</span> monitor <span class="token number">0x00007fadc0830c18</span> <span class="token punctuation">(</span>object <span class="token number">0x000000076ac96600</span><span class="token punctuation">,</span> a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  which is held by <span class="token string">&quot;线程 2&quot;</span>

<span class="token class-name">Java</span> stack information <span class="token keyword">for</span> the threads listed above<span class="token operator">:</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token string">&quot;线程 2&quot;</span><span class="token operator">:</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>nano<span class="token punctuation">.</span>deadlock<span class="token punctuation">.</span></span>DeadLockDemo</span><span class="token punctuation">.</span>lambda$main$<span class="token function">1</span><span class="token punctuation">(</span><span class="token class-name">DeadLockDemo</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> waiting <span class="token keyword">to</span> <span class="token namespace">lock</span> <span class="token generics"><span class="token punctuation">&lt;</span>0x000000076ac965f0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x000000076ac96600<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>nano<span class="token punctuation">.</span>deadlock<span class="token punctuation">.</span></span>DeadLockDemo</span>$$<span class="token class-name">Lambda</span>$<span class="token number">2</span><span class="token operator">/</span><span class="token number">500977346.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Unknown</span> <span class="token class-name">Source</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
<span class="token string">&quot;线程 1&quot;</span><span class="token operator">:</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>nano<span class="token punctuation">.</span>deadlock<span class="token punctuation">.</span></span>DeadLockDemo</span><span class="token punctuation">.</span>lambda$main$<span class="token function">0</span><span class="token punctuation">(</span><span class="token class-name">DeadLockDemo</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">26</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> waiting <span class="token keyword">to</span> <span class="token namespace">lock</span> <span class="token generics"><span class="token punctuation">&lt;</span>0x000000076ac96600<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x000000076ac965f0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>nano<span class="token punctuation">.</span>deadlock<span class="token punctuation">.</span></span>DeadLockDemo</span>$$<span class="token class-name">Lambda</span>$<span class="token number">1</span><span class="token operator">/</span><span class="token number">1338668845.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Unknown</span> <span class="token class-name">Source</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>

<span class="token class-name">Found</span> <span class="token number">1</span> deadlock<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p><strong>jstack 命令</strong>已经找到发生死锁的线程具体信息.</p> <p>还可以用 <strong>Visual VM</strong> 自动检测死锁.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200622105956372.png" alt="image-20200622105956372"></p> <h4 id="jdk可视化工具"><a href="#jdk可视化工具" class="header-anchor">#</a> JDK可视化工具</h4> <p>JDK 中除了提供大量的命令行工具外, 还有两个功能强大的可视化工具: <strong>JConsole 和 Visual VM</strong>. JConsole 不介绍了.</p> <p>Visual VM 是一个集成多个 JDK 命令行工具的可视化工具. Visual VM 基于 NetBeans 平台开发, 它具备了插件扩展功能的特性, 通过插件的扩展, 可用于显示虚拟机进程及进程的配置和环境信息(jps, jinfo), 监视应用程序的 CPU, GC, 堆, 方法区及线程的信息(jstat, jstack)等. VisualVM 在 JDK/bin 目录下.</p> <p><strong>生产环境少用可视化的工具</strong>, 比较耗性能.</p> <ul><li>生成, 浏览堆转储快照.</li> <li>分析程序性能.</li></ul> <h4 id="堆转储文件"><a href="#堆转储文件" class="header-anchor">#</a> 堆转储文件</h4> <h5 id="_1-概述-2"><a href="#_1-概述-2" class="header-anchor">#</a> 1.概述</h5> <p><strong>Heap Dump</strong> 也叫<strong>堆转储文件</strong>, 是一个 Java 进程在<strong>某个时间点上的内存快照</strong>. Heap Dump 有多种类型, 不过总体上 Heap Dump 在触发快照的时候都保存了 Java 对象和类的信息. 通常在<strong>写 Heap Dump 文件</strong>前会<strong>触发一次 Full GC</strong>, 所以 Heap Dump 文件中保存的是 <strong>Full GC 后</strong>留下的对象信息.</p> <h5 id="_2-堆转储的用途"><a href="#_2-堆转储的用途" class="header-anchor">#</a> 2.堆转储的用途</h5> <p>一般在 Heap Dump 文件中可以获取到如下信息:</p> <ul><li><strong>对象信息</strong>: 类, 成员变量, 直接量以及引用值.</li> <li><strong>类信息</strong>: 类加载器, 名称, 超类, 静态成员.</li> <li><strong>GC Roots</strong>: JVM 可达的对象.</li> <li><strong>线程栈以及本地变量</strong>: 获取快照时的线程栈信息, 以及局部变量的详细信息.</li></ul> <p>因此可以分析如下问题:</p> <ul><li>找出<strong>内存泄漏</strong>的原因.</li> <li>找出重复引用的 jar 或类.</li> <li>分析<strong>集合</strong>的使用.</li> <li>分析<strong>类加载器</strong>.</li></ul> <p>对 Heap Dump 的分析就是对应用的内存使用进行分析, 从而更加合理地使用内存.</p> <h5 id="_3-获取堆转储文件-2"><a href="#_3-获取堆转储文件-2" class="header-anchor">#</a> 3.获取堆转储文件</h5> <p>(1) <strong>设置虚拟机参数-XX:+HeapDumpOnOutOfMemoryError</strong>: 设置此参数可以在发生 <strong>OutOfMemoryError</strong> 后获取到一份 HPROF 二进制 Heap Dump 文件, 生成的文件会直接写入到工作目录.</p> <p>可以设置<strong>内存溢出自动导出</strong> dump 文件(内存很大的时候, 可能会导不出来).</p> <ol><li><strong>-XX:+HeapDumpOnOutOfMemoryError</strong></li> <li><strong>-XX:HeapDumpPath=Path</strong></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OOMTest</span> <span class="token punctuation">{</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// JVM参数设置  </span>
   <span class="token comment">// -Xms10M -Xmx10M -XX:+PrintGCDetails -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=D:\jvm.dump </span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>j<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>(2) <strong>使用 jmap 工具</strong>: 算是用的<strong>最多</strong>的方式. 参考前述内容即可.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>jmap <span class="token operator">-</span>dump<span class="token operator">:</span>format<span class="token operator">=</span>b<span class="token punctuation">,</span>file<span class="token operator">=</span><span class="token generics"><span class="token punctuation">&lt;</span>filename<span class="token punctuation">.</span>hprof<span class="token punctuation">&gt;</span></span> <span class="token generics"><span class="token punctuation">&lt;</span>pid<span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(3) <strong>使用 JConsole 工具</strong></p> <h4 id="jstat调优实例"><a href="#jstat调优实例" class="header-anchor">#</a> jstat调优实例</h4> <p><strong>用 jstat gc -pid 命令</strong>可以计算出如下一些<strong>关键数据</strong>, 先给自己的系统设置一些<strong>初始性的 JVM 参数</strong>, 比如堆内存大小, 年轻代大小, Eden 和 Survivor 的比例, 老年代的大小, 大对象的阈值, 大龄对象进入老年代的阈值等.</p> <p><strong>年轻代对象增长的速率</strong></p> <p>可以执行命令 <strong>jstat -gc pid 1000 10</strong>(每隔 1 秒执行 1 次命令, 共执行 10 次), 通过观察 <strong>EU</strong>(eden 区的使用)来估算每秒 eden 大概<strong>新增多少对象</strong>, 如果系统负载不高, 可以把频率 1 秒换成 1 分钟, 甚至 10 分钟来观察整体情况. 注意, 一般系统可能有高峰期和日常期, 所以需要在不同的时间分别估算不同情况下对象增长速率.</p> <p><strong>Young GC 的触发频率和每次耗时</strong></p> <p>知道年轻代对象增长速率后就能根据 Eden 区的大小推算出 Young GC 大概多久触发一次, Young GC 的平均耗时可以通过 <strong>YGCT/YGC</strong> 公式算出, 根据结果大概就能知道<strong>系统大概多久会因为 Young GC 的执行而卡顿多久</strong>.</p> <p><strong>每次 Young GC 后有多少对象存活和进入老年代</strong></p> <p>由于前面步骤已经大概知道 Young GC 的频率, 假设是每 5 分钟一次, 那么可以执行命令 jstat -gc pid 300000 10, 观察每次结果中 <strong>Eden</strong>, <strong>Survivor 和老年代</strong>使用的变化情况, 在每次 GC 后 Eden 区使用一般会大幅减少, Survivor 和老年代都有可能增长, 这些增长的对象就是每次 Young GC 后存活的对象, 同时还可以看出每次 Young GC 后进去老年代大概多少对象, 从而可以推算出<strong>老年代对象增长速率.</strong></p> <p><strong>Full GC 的触发频率和每次耗时</strong></p> <p>知道了老年代对象的增长速率就可以推算出 <strong>Full GC 的触发频率</strong>了, Full GC 的每次耗时可以用公式 <strong>FGCT/FGC</strong> 计算得出.</p> <p><strong>优化思路</strong>其实简单来说就是<strong>尽量让每次 Young GC 后的存活对象小于 Survivor 区域的 50%, 都留存在年轻代里. 尽量别让对象进入老年代. 尽量减少 Full GC 的频率, 避免频繁 Full GC 对 JVM 性能的影响.</strong></p> <h4 id="gc日志"><a href="#gc日志" class="header-anchor">#</a> GC日志</h4> <h5 id="_1-概述-3"><a href="#_1-概述-3" class="header-anchor">#</a> 1.概述</h5> <p>可以通过一些配置把运行过程中的 <strong>GC 日志全部打印</strong>出来, 然后分析 GC 日志得到关键性指标, 分析 GC 原因, 调优 JVM 参数. 常见参数如下.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGC</span> 		<span class="token comment">// 输出GC日志</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCDetails</span>     <span class="token comment">// 输出GC的详细日志</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCTimeStamps</span> 	<span class="token comment">// 输出GC的时间戳(以基准时间的形式)</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCDateStamps</span> 	<span class="token comment">// 输出GC的时间戳(以日期的形式, 如 2013-05-04T21:53:59.234+0800)</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintHeapAtGC</span> 	<span class="token comment">// 在进行GC的前后打印出堆的信息</span>
<span class="token operator">-</span><span class="token class-name">Xloggc</span><span class="token operator">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span>/logs<span class="token operator">/</span>gc<span class="token punctuation">.</span>log 	<span class="token comment">// 日志文件的输出路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>比如 <strong>Spring Boot</strong> 程序启动时添加:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>‐<span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCDetails</span> ‐<span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCTimeStamps</span> ‐<span class="token constant">XX</span><span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">PrintGCDateStamps</span> ‐<span class="token class-name">Xloggc</span><span class="token operator">:</span><span class="token punctuation">.</span>/gc<span class="token punctuation">.</span>log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Tomcat 则直接加在 <strong>JAVA_OPTS</strong> 变量里.</p> <h5 id="_2-日志分析"><a href="#_2-日志分析" class="header-anchor">#</a> 2.日志分析</h5> <p>一份摘自《深入理解 Java 虚拟机》中的一段 <strong>GC 日志</strong>:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">33.125</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token constant">GC</span><span class="token punctuation">[</span><span class="token class-name">DefNew</span><span class="token operator">:</span><span class="token number">3324</span>K<span class="token operator">-&gt;</span><span class="token function">152K</span><span class="token punctuation">(</span><span class="token number">3712</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0025925</span> secs<span class="token punctuation">]</span><span class="token number">3324</span>K<span class="token operator">-&gt;</span><span class="token function">152K</span><span class="token punctuation">(</span><span class="token number">11904</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0031680</span> secs<span class="token punctuation">]</span>
<span class="token number">100.667</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token class-name">Full</span> <span class="token constant">GC</span><span class="token punctuation">[</span><span class="token class-name">Tenured</span><span class="token operator">:</span><span class="token number">0</span> <span class="token class-name">K</span><span class="token operator">-&gt;</span><span class="token function">210K</span><span class="token punctuation">(</span><span class="token number">10240</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0149142</span>secs<span class="token punctuation">]</span><span class="token number">4603</span>K<span class="token operator">-&gt;</span><span class="token function">210K</span><span class="token punctuation">(</span><span class="token number">19456</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name">Perm</span><span class="token operator">:</span><span class="token number">2999</span>K<span class="token operator">-&gt;</span><span class="token function">2999K</span><span class="token punctuation">(</span><span class="token number">21248</span>K<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0150007</span> secs<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">Times</span><span class="token operator">:</span>user<span class="token operator">=</span><span class="token number">0.01</span> sys<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">,</span> real<span class="token operator">=</span><span class="token number">0.02</span> secs<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>分析:</p> <ul><li>首先 &quot;33.125&quot; 和 &quot;100.667&quot; 这个数值的意义是代表 GC 发生的<strong>时间</strong>, 该数字是 GC 启动以来的时间.</li> <li>&quot;GC&quot; 和 &quot;Full GC&quot; 则代表这次 GC 发生的<strong>类型</strong>, 如果为 Full GC, 则代表这次 GC 是 Stop The World 的. 如果通过 System.gc() 方法触发的则会显示 Full GC(System).</li> <li>&quot;DefNew, Tenured, Perm&quot; 表示 GC 发生的<strong>区域</strong>, 这里显示的区域名称与使用的 GC 收集器是密切相关的.</li> <li>&quot;3324K-＞152K(3712K)&quot; 代表 <strong>GC 前</strong>该区域内已使用的<strong>容量</strong> -&gt; <strong>GC 后</strong>该区域内已使用的容量(该区域内的总容量).</li> <li>&quot;0.0025925 secs&quot; 表示这次 GC 所占用的时间单位为<strong>秒</strong>.</li> <li>&quot;3324K-&gt;152K(11904K)&quot; 则是 <strong>GC 前</strong> Java 堆已使用容量 -＞ <strong>GC 后</strong> Java 堆已使用容量(Java 堆总容量).</li> <li>&quot;[Times:user=0.01 sys=0.00, real=0.02 secs]&quot; 里的 user, sys, real 分别代表用户态消耗 CPU 的时间和内核态消耗的 CPU 的时间和操作开始到结束所经历的时间.</li></ul> <p><strong>再看一个 GC 日志:</strong></p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200622152448238-3129000.png" alt="image-20200622152448238"></p> <p>可以看到图中<strong>第一行红框</strong>, 是<strong>项目的配置参数</strong>. 这里不仅配置了打印 GC 日志, 还有相关的 VM 内存参数.</p> <p><strong>第二行红框</strong>中的是在这个 GC 时间点<strong>发生 GC 之后相关 GC 情况</strong>.</p> <ul><li>&quot;2.909&quot; 这是具体发生 GC 的时间点. 这是时间戳是从 JVM <strong>启动开始计算</strong>的, 前面还有具体的发生时间日期.</li> <li>&quot;Full GC(Metadata GC Threshold)&quot; 指这是一次 Full GC, 括号里是 GC 的原因, &quot;PSYoungGen&quot; 是年轻代的 GC, &quot;ParOldGen&quot; 是老年代的 GC, &quot;Metaspace&quot; 是元空间的 GC.</li> <li>&quot;6160K-&gt;0K(141824K)&quot;: 这三个数字分别对应 GC 之前占用年轻代的大小, GC 之后年轻代占用, 以及整个年轻代的大小.</li> <li>&quot;112K-&gt;6056K(95744K)&quot;: 这三个数字分别对应 GC 之前占用老年代的大小, GC 之后老年代占用, 以及整个老年代的大小.</li> <li>&quot;6272K-&gt;6056K(237568K)&quot;: 这三个数字分别对应 GC 之前占用堆内存的大小, GC 之后堆内存占用, 以及整个堆内存的大小.</li> <li>&quot;20516K-&gt;20516K(1069056K)&quot;: 这三个数字分别对应 GC 之前占用元空间内存的大小, GC 之后元空间内存占用, 以及整个元空间内存的大小.</li> <li>&quot;0.0209707&quot; 是该时间点 GC 总耗费时间.</li></ul> <p>从日志可以发现几次 Full GC 都是由于元空间不够导致的, 所以可以将元空间调大点.</p> <p>通过上面的这些参数就能知道 GC 的垃圾收集情况. 但是如果 GC 日志<strong>过多且繁杂</strong>, 有时候为了发现问题往往需要连续运行很久, 比如几个周, 这就会有很多的 GC 日志, 直接去看就不现实, 可以使用可视化工具 <strong>gceasy</strong> 进行分析. 可以看到堆内存在 GC 之前和之后的变化, 以及其他信息.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200622154910625.png" alt=""></p> <p>‍</p> <h4 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> <strong>参考资料</strong></h4> <ul><li>虚拟机性能监控与故障处理工具: <a href="http://blog.csdn.net/wsyw126/article/details/62422005" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/wsyw126/article/details/62422005<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>堆转储分析: <a href="https://blog.csdn.net/hehmxy/article/details/89114116" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/hehmxy/article/details/89114116<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/main/docs/20.开发/2200.JVM/3.JVM监控与故障处理工具.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/05acae/" class="prev">内存分配与垃圾收集</a></span> <span class="next"><a href="/pages/06e4ad/">类文件结构与类加载机制</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/f90282/"><div>
            基础
            <!----></div></a> <span class="date">06-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/0f75ac/"><div>
            搜索二叉树BST
            <!----></div></a> <span class="date">06-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/39721f/"><div>
            平衡二叉树AVL
            <!----></div></a> <span class="date">06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1174520425@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/nanodaemony" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>达尔文的猹 | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.5bc2c979.js" defer></script><script src="/assets/js/2.eccd4273.js" defer></script><script src="/assets/js/167.d7278e80.js" defer></script>
  </body>
</html>
