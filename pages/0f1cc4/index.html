<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划题目 | Pangolin Note</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="大道至简">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.56073ad3.css" as="style"><link rel="preload" href="/assets/js/app.3f3e0e10.js" as="script"><link rel="preload" href="/assets/js/2.e9fcb30c.js" as="script"><link rel="preload" href="/assets/js/3.1998f389.js" as="script"><link rel="preload" href="/assets/js/205.add8738b.js" as="script"><link rel="prefetch" href="/assets/js/10.0b55747f.js"><link rel="prefetch" href="/assets/js/100.b8912a99.js"><link rel="prefetch" href="/assets/js/101.a6740c8a.js"><link rel="prefetch" href="/assets/js/102.e31e89b2.js"><link rel="prefetch" href="/assets/js/103.2c5dbdae.js"><link rel="prefetch" href="/assets/js/104.0e9c02f6.js"><link rel="prefetch" href="/assets/js/105.8288396c.js"><link rel="prefetch" href="/assets/js/106.62f43c11.js"><link rel="prefetch" href="/assets/js/107.70c90211.js"><link rel="prefetch" href="/assets/js/108.b488ce56.js"><link rel="prefetch" href="/assets/js/109.12942650.js"><link rel="prefetch" href="/assets/js/11.ac3fd1ca.js"><link rel="prefetch" href="/assets/js/110.1e57ecba.js"><link rel="prefetch" href="/assets/js/111.6e33b4ea.js"><link rel="prefetch" href="/assets/js/112.bd52831b.js"><link rel="prefetch" href="/assets/js/113.868c1ac9.js"><link rel="prefetch" href="/assets/js/114.090549d1.js"><link rel="prefetch" href="/assets/js/115.d97f6c2b.js"><link rel="prefetch" href="/assets/js/116.097c4b4e.js"><link rel="prefetch" href="/assets/js/117.4024cfe2.js"><link rel="prefetch" href="/assets/js/118.e3057cba.js"><link rel="prefetch" href="/assets/js/119.4ef1fa3b.js"><link rel="prefetch" href="/assets/js/12.863eaabe.js"><link rel="prefetch" href="/assets/js/120.78f9df50.js"><link rel="prefetch" href="/assets/js/121.8e16df87.js"><link rel="prefetch" href="/assets/js/122.f21c0107.js"><link rel="prefetch" href="/assets/js/123.ea1cb375.js"><link rel="prefetch" href="/assets/js/124.01c04c6e.js"><link rel="prefetch" href="/assets/js/125.d383e301.js"><link rel="prefetch" href="/assets/js/126.3162cb47.js"><link rel="prefetch" href="/assets/js/127.c6bebae6.js"><link rel="prefetch" href="/assets/js/128.d659db60.js"><link rel="prefetch" href="/assets/js/129.2afdcf48.js"><link rel="prefetch" href="/assets/js/13.4f59ce35.js"><link rel="prefetch" href="/assets/js/130.beb9ed9d.js"><link rel="prefetch" href="/assets/js/131.35b05f8a.js"><link rel="prefetch" href="/assets/js/132.d77f4f93.js"><link rel="prefetch" href="/assets/js/133.4ceda6e5.js"><link rel="prefetch" href="/assets/js/134.11390c5f.js"><link rel="prefetch" href="/assets/js/135.32f9e38f.js"><link rel="prefetch" href="/assets/js/136.6d8bb0f2.js"><link rel="prefetch" href="/assets/js/137.9c0ffeef.js"><link rel="prefetch" href="/assets/js/138.88d86e5f.js"><link rel="prefetch" href="/assets/js/139.8c2c3d6c.js"><link rel="prefetch" href="/assets/js/14.11c82d35.js"><link rel="prefetch" href="/assets/js/140.c5c375d3.js"><link rel="prefetch" href="/assets/js/141.d703f30b.js"><link rel="prefetch" href="/assets/js/142.6a005a44.js"><link rel="prefetch" href="/assets/js/143.9b2edf6f.js"><link rel="prefetch" href="/assets/js/144.3fd013c9.js"><link rel="prefetch" href="/assets/js/145.b05079c5.js"><link rel="prefetch" href="/assets/js/146.ed5360a6.js"><link rel="prefetch" href="/assets/js/147.7408d86f.js"><link rel="prefetch" href="/assets/js/148.f390b370.js"><link rel="prefetch" href="/assets/js/149.95017f0a.js"><link rel="prefetch" href="/assets/js/15.bd143bd5.js"><link rel="prefetch" href="/assets/js/150.f0ede764.js"><link rel="prefetch" href="/assets/js/151.b7093623.js"><link rel="prefetch" href="/assets/js/152.a82a6c83.js"><link rel="prefetch" href="/assets/js/153.965e3fb2.js"><link rel="prefetch" href="/assets/js/154.9e49311e.js"><link rel="prefetch" href="/assets/js/155.cef33ba5.js"><link rel="prefetch" href="/assets/js/156.bcc397ae.js"><link rel="prefetch" href="/assets/js/157.90824739.js"><link rel="prefetch" href="/assets/js/158.efd429b9.js"><link rel="prefetch" href="/assets/js/159.122ff5b7.js"><link rel="prefetch" href="/assets/js/16.2449162b.js"><link rel="prefetch" href="/assets/js/160.0b806535.js"><link rel="prefetch" href="/assets/js/161.835052c6.js"><link rel="prefetch" href="/assets/js/162.ca34e2d2.js"><link rel="prefetch" href="/assets/js/163.08000d04.js"><link rel="prefetch" href="/assets/js/164.a1cc0109.js"><link rel="prefetch" href="/assets/js/165.65444686.js"><link rel="prefetch" href="/assets/js/166.7d73c84f.js"><link rel="prefetch" href="/assets/js/167.009d47a3.js"><link rel="prefetch" href="/assets/js/168.0afeae2a.js"><link rel="prefetch" href="/assets/js/169.7654cb31.js"><link rel="prefetch" href="/assets/js/17.eb7f9def.js"><link rel="prefetch" href="/assets/js/170.58569530.js"><link rel="prefetch" href="/assets/js/171.7db9ed40.js"><link rel="prefetch" href="/assets/js/172.3cb50ed4.js"><link rel="prefetch" href="/assets/js/173.0846425f.js"><link rel="prefetch" href="/assets/js/174.9e95f111.js"><link rel="prefetch" href="/assets/js/175.ef2098f2.js"><link rel="prefetch" href="/assets/js/176.c2635fe9.js"><link rel="prefetch" href="/assets/js/177.4fa38e8e.js"><link rel="prefetch" href="/assets/js/178.2be7037f.js"><link rel="prefetch" href="/assets/js/179.bf3bba28.js"><link rel="prefetch" href="/assets/js/18.0455f4d1.js"><link rel="prefetch" href="/assets/js/180.72c5f597.js"><link rel="prefetch" href="/assets/js/181.42287bcc.js"><link rel="prefetch" href="/assets/js/182.6cd4bf1a.js"><link rel="prefetch" href="/assets/js/183.05dbbfd9.js"><link rel="prefetch" href="/assets/js/184.03de7e00.js"><link rel="prefetch" href="/assets/js/185.42dd210e.js"><link rel="prefetch" href="/assets/js/186.28ee0f8a.js"><link rel="prefetch" href="/assets/js/187.bb58697b.js"><link rel="prefetch" href="/assets/js/188.1bc8be96.js"><link rel="prefetch" href="/assets/js/189.fac747e3.js"><link rel="prefetch" href="/assets/js/19.ae9e35d6.js"><link rel="prefetch" href="/assets/js/190.ea533ac7.js"><link rel="prefetch" href="/assets/js/191.6dc6eb13.js"><link rel="prefetch" href="/assets/js/192.184d249f.js"><link rel="prefetch" href="/assets/js/193.4a06bc12.js"><link rel="prefetch" href="/assets/js/194.8cce60a9.js"><link rel="prefetch" href="/assets/js/195.93231a13.js"><link rel="prefetch" href="/assets/js/196.4a596bde.js"><link rel="prefetch" href="/assets/js/197.96c113cf.js"><link rel="prefetch" href="/assets/js/198.73ba3f67.js"><link rel="prefetch" href="/assets/js/199.74bab595.js"><link rel="prefetch" href="/assets/js/20.b542d0e7.js"><link rel="prefetch" href="/assets/js/200.69a6928a.js"><link rel="prefetch" href="/assets/js/201.9ffa7c5a.js"><link rel="prefetch" href="/assets/js/202.41edb652.js"><link rel="prefetch" href="/assets/js/203.7fabcef3.js"><link rel="prefetch" href="/assets/js/204.b0ae2f62.js"><link rel="prefetch" href="/assets/js/206.f3a712ec.js"><link rel="prefetch" href="/assets/js/207.cd7dd729.js"><link rel="prefetch" href="/assets/js/208.78b33afa.js"><link rel="prefetch" href="/assets/js/209.9d3329ff.js"><link rel="prefetch" href="/assets/js/21.5a050318.js"><link rel="prefetch" href="/assets/js/210.d285d5ac.js"><link rel="prefetch" href="/assets/js/211.8791bb3f.js"><link rel="prefetch" href="/assets/js/212.84ed81a8.js"><link rel="prefetch" href="/assets/js/213.7b990580.js"><link rel="prefetch" href="/assets/js/214.da31f20c.js"><link rel="prefetch" href="/assets/js/215.9eeed659.js"><link rel="prefetch" href="/assets/js/216.9539f0ec.js"><link rel="prefetch" href="/assets/js/217.11b575be.js"><link rel="prefetch" href="/assets/js/218.a67f12f1.js"><link rel="prefetch" href="/assets/js/219.bfbb817a.js"><link rel="prefetch" href="/assets/js/22.2bc6f7e3.js"><link rel="prefetch" href="/assets/js/220.8b01342f.js"><link rel="prefetch" href="/assets/js/221.b450decd.js"><link rel="prefetch" href="/assets/js/222.97468507.js"><link rel="prefetch" href="/assets/js/223.b6dafd73.js"><link rel="prefetch" href="/assets/js/224.c86c18c6.js"><link rel="prefetch" href="/assets/js/225.b0dcf86e.js"><link rel="prefetch" href="/assets/js/226.02cc2999.js"><link rel="prefetch" href="/assets/js/227.8474ef5a.js"><link rel="prefetch" href="/assets/js/228.0298e421.js"><link rel="prefetch" href="/assets/js/229.6aeaf595.js"><link rel="prefetch" href="/assets/js/23.9995fce4.js"><link rel="prefetch" href="/assets/js/230.a5785286.js"><link rel="prefetch" href="/assets/js/231.d791daa4.js"><link rel="prefetch" href="/assets/js/232.97aeeb00.js"><link rel="prefetch" href="/assets/js/233.46e51e28.js"><link rel="prefetch" href="/assets/js/234.2cffe82f.js"><link rel="prefetch" href="/assets/js/235.14965da6.js"><link rel="prefetch" href="/assets/js/236.00a5afc0.js"><link rel="prefetch" href="/assets/js/237.3b73d52f.js"><link rel="prefetch" href="/assets/js/238.6e1db765.js"><link rel="prefetch" href="/assets/js/239.75866c5e.js"><link rel="prefetch" href="/assets/js/24.9141eeb2.js"><link rel="prefetch" href="/assets/js/240.af9c2cc9.js"><link rel="prefetch" href="/assets/js/241.388acab2.js"><link rel="prefetch" href="/assets/js/242.c60f2b48.js"><link rel="prefetch" href="/assets/js/243.d8e81b13.js"><link rel="prefetch" href="/assets/js/244.58b0b21d.js"><link rel="prefetch" href="/assets/js/245.c3768497.js"><link rel="prefetch" href="/assets/js/246.ac8bbe7a.js"><link rel="prefetch" href="/assets/js/247.d095f70a.js"><link rel="prefetch" href="/assets/js/248.e9f210b5.js"><link rel="prefetch" href="/assets/js/249.a9fad023.js"><link rel="prefetch" href="/assets/js/25.98e8593e.js"><link rel="prefetch" href="/assets/js/250.ae7f0ebb.js"><link rel="prefetch" href="/assets/js/251.9a617d55.js"><link rel="prefetch" href="/assets/js/252.ce082446.js"><link rel="prefetch" href="/assets/js/253.4575302d.js"><link rel="prefetch" href="/assets/js/254.5899a61b.js"><link rel="prefetch" href="/assets/js/255.66c69f31.js"><link rel="prefetch" href="/assets/js/256.8fd6c706.js"><link rel="prefetch" href="/assets/js/257.31b77e5e.js"><link rel="prefetch" href="/assets/js/258.eba48891.js"><link rel="prefetch" href="/assets/js/259.edf74b59.js"><link rel="prefetch" href="/assets/js/26.e69924ea.js"><link rel="prefetch" href="/assets/js/260.cf2ed36d.js"><link rel="prefetch" href="/assets/js/261.9e7792d8.js"><link rel="prefetch" href="/assets/js/262.e7b9433e.js"><link rel="prefetch" href="/assets/js/263.1185b25c.js"><link rel="prefetch" href="/assets/js/264.5e0f89cb.js"><link rel="prefetch" href="/assets/js/265.a38d3b94.js"><link rel="prefetch" href="/assets/js/266.2ef170b3.js"><link rel="prefetch" href="/assets/js/267.a7d14651.js"><link rel="prefetch" href="/assets/js/268.05b18748.js"><link rel="prefetch" href="/assets/js/269.dad48d6f.js"><link rel="prefetch" href="/assets/js/27.13612515.js"><link rel="prefetch" href="/assets/js/270.4f5a6b8d.js"><link rel="prefetch" href="/assets/js/271.7ebf6682.js"><link rel="prefetch" href="/assets/js/272.7c2fbfd1.js"><link rel="prefetch" href="/assets/js/273.8ee20732.js"><link rel="prefetch" href="/assets/js/274.d525242a.js"><link rel="prefetch" href="/assets/js/275.a8a19acb.js"><link rel="prefetch" href="/assets/js/276.df3a4eb4.js"><link rel="prefetch" href="/assets/js/277.336debda.js"><link rel="prefetch" href="/assets/js/278.c470625f.js"><link rel="prefetch" href="/assets/js/279.a91e1a64.js"><link rel="prefetch" href="/assets/js/28.ab7ae1df.js"><link rel="prefetch" href="/assets/js/280.87e25c9a.js"><link rel="prefetch" href="/assets/js/281.87c1ba25.js"><link rel="prefetch" href="/assets/js/282.dcd4dce0.js"><link rel="prefetch" href="/assets/js/283.abac2e00.js"><link rel="prefetch" href="/assets/js/284.f6079659.js"><link rel="prefetch" href="/assets/js/285.f1b39879.js"><link rel="prefetch" href="/assets/js/286.f6a79242.js"><link rel="prefetch" href="/assets/js/287.06bebe07.js"><link rel="prefetch" href="/assets/js/288.89e325df.js"><link rel="prefetch" href="/assets/js/289.3aa1bedd.js"><link rel="prefetch" href="/assets/js/29.ebe50f76.js"><link rel="prefetch" href="/assets/js/290.ee059c92.js"><link rel="prefetch" href="/assets/js/291.fa9a921a.js"><link rel="prefetch" href="/assets/js/292.2a8811cd.js"><link rel="prefetch" href="/assets/js/293.eec09cdf.js"><link rel="prefetch" href="/assets/js/294.dfac20dc.js"><link rel="prefetch" href="/assets/js/295.825d2070.js"><link rel="prefetch" href="/assets/js/296.f645861e.js"><link rel="prefetch" href="/assets/js/297.424fdb17.js"><link rel="prefetch" href="/assets/js/298.ebf87cdc.js"><link rel="prefetch" href="/assets/js/299.b8f19cbb.js"><link rel="prefetch" href="/assets/js/30.75237511.js"><link rel="prefetch" href="/assets/js/300.10fb6d4f.js"><link rel="prefetch" href="/assets/js/301.ef77c612.js"><link rel="prefetch" href="/assets/js/302.1b839763.js"><link rel="prefetch" href="/assets/js/303.609f7d98.js"><link rel="prefetch" href="/assets/js/304.1d255f19.js"><link rel="prefetch" href="/assets/js/305.b0234f2c.js"><link rel="prefetch" href="/assets/js/306.48677f64.js"><link rel="prefetch" href="/assets/js/307.14390d4b.js"><link rel="prefetch" href="/assets/js/308.fa730b28.js"><link rel="prefetch" href="/assets/js/309.0496b9e0.js"><link rel="prefetch" href="/assets/js/31.cf3f471a.js"><link rel="prefetch" href="/assets/js/310.a31676dc.js"><link rel="prefetch" href="/assets/js/311.ed53adc5.js"><link rel="prefetch" href="/assets/js/312.1b0ff2f1.js"><link rel="prefetch" href="/assets/js/313.bf123f32.js"><link rel="prefetch" href="/assets/js/314.4e6ce06b.js"><link rel="prefetch" href="/assets/js/315.8eb18560.js"><link rel="prefetch" href="/assets/js/32.74fef842.js"><link rel="prefetch" href="/assets/js/33.bc2d190b.js"><link rel="prefetch" href="/assets/js/34.d23438fc.js"><link rel="prefetch" href="/assets/js/35.7675c4d0.js"><link rel="prefetch" href="/assets/js/36.96a4161b.js"><link rel="prefetch" href="/assets/js/37.d1824f2f.js"><link rel="prefetch" href="/assets/js/38.4effff9e.js"><link rel="prefetch" href="/assets/js/39.6509914b.js"><link rel="prefetch" href="/assets/js/4.4d01750f.js"><link rel="prefetch" href="/assets/js/40.1509d08b.js"><link rel="prefetch" href="/assets/js/41.f2c1124f.js"><link rel="prefetch" href="/assets/js/42.e541d077.js"><link rel="prefetch" href="/assets/js/43.369de999.js"><link rel="prefetch" href="/assets/js/44.43959db0.js"><link rel="prefetch" href="/assets/js/45.282fbd31.js"><link rel="prefetch" href="/assets/js/46.1b83cfe9.js"><link rel="prefetch" href="/assets/js/47.c3a88e41.js"><link rel="prefetch" href="/assets/js/48.bc7c0a1b.js"><link rel="prefetch" href="/assets/js/49.92a4e5ba.js"><link rel="prefetch" href="/assets/js/5.c3991e24.js"><link rel="prefetch" href="/assets/js/50.9c488c6c.js"><link rel="prefetch" href="/assets/js/51.546ea632.js"><link rel="prefetch" href="/assets/js/52.0d2ccee1.js"><link rel="prefetch" href="/assets/js/53.6f52b5b1.js"><link rel="prefetch" href="/assets/js/54.c838b295.js"><link rel="prefetch" href="/assets/js/55.13af99ee.js"><link rel="prefetch" href="/assets/js/56.6be6d1ed.js"><link rel="prefetch" href="/assets/js/57.67c98b39.js"><link rel="prefetch" href="/assets/js/58.107e82ec.js"><link rel="prefetch" href="/assets/js/59.b3e5edc7.js"><link rel="prefetch" href="/assets/js/6.36a535f9.js"><link rel="prefetch" href="/assets/js/60.3b0b4ba5.js"><link rel="prefetch" href="/assets/js/61.3df843df.js"><link rel="prefetch" href="/assets/js/62.1213823d.js"><link rel="prefetch" href="/assets/js/63.e8f3f926.js"><link rel="prefetch" href="/assets/js/64.e1219050.js"><link rel="prefetch" href="/assets/js/65.5bf5bb0b.js"><link rel="prefetch" href="/assets/js/66.a2502afb.js"><link rel="prefetch" href="/assets/js/67.690dd59b.js"><link rel="prefetch" href="/assets/js/68.de7b0915.js"><link rel="prefetch" href="/assets/js/69.ac61dd61.js"><link rel="prefetch" href="/assets/js/7.5d254238.js"><link rel="prefetch" href="/assets/js/70.3edd41b1.js"><link rel="prefetch" href="/assets/js/71.d23407e9.js"><link rel="prefetch" href="/assets/js/72.a5bd01bc.js"><link rel="prefetch" href="/assets/js/73.c9f4dd57.js"><link rel="prefetch" href="/assets/js/74.66323fc1.js"><link rel="prefetch" href="/assets/js/75.e1a72e00.js"><link rel="prefetch" href="/assets/js/76.801268b4.js"><link rel="prefetch" href="/assets/js/77.3a5fda67.js"><link rel="prefetch" href="/assets/js/78.54d84cd4.js"><link rel="prefetch" href="/assets/js/79.fa10f4e3.js"><link rel="prefetch" href="/assets/js/8.e060e47d.js"><link rel="prefetch" href="/assets/js/80.d5b24fea.js"><link rel="prefetch" href="/assets/js/81.0e9da714.js"><link rel="prefetch" href="/assets/js/82.e96ff6d7.js"><link rel="prefetch" href="/assets/js/83.771cced1.js"><link rel="prefetch" href="/assets/js/84.220b69e7.js"><link rel="prefetch" href="/assets/js/85.7dcc5659.js"><link rel="prefetch" href="/assets/js/86.44ba2100.js"><link rel="prefetch" href="/assets/js/87.281da75d.js"><link rel="prefetch" href="/assets/js/88.12d88449.js"><link rel="prefetch" href="/assets/js/89.f28c86d3.js"><link rel="prefetch" href="/assets/js/9.8f9fef32.js"><link rel="prefetch" href="/assets/js/90.715cabb2.js"><link rel="prefetch" href="/assets/js/91.6ced7c82.js"><link rel="prefetch" href="/assets/js/92.c05b33ca.js"><link rel="prefetch" href="/assets/js/93.6bf5fb66.js"><link rel="prefetch" href="/assets/js/94.3561200e.js"><link rel="prefetch" href="/assets/js/95.0f2cf716.js"><link rel="prefetch" href="/assets/js/96.ac8487ea.js"><link rel="prefetch" href="/assets/js/97.48042b5a.js"><link rel="prefetch" href="/assets/js/98.441bb7f8.js"><link rel="prefetch" href="/assets/js/99.4b214d92.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56073ad3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/magic.png" alt="Pangolin Note" class="logo"> <span class="site-name can-hide">Pangolin Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">系统</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">🍀读书笔记</a></div><div class="nav-item"><a href="/work/" class="nav-link">工作</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">🌸达尔文的猹</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatarnew.png"> <div class="blogger-info"><h3>达尔文的猹</h3> <span>大道至简 悟在天成</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">系统</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">🍀读书笔记</a></div><div class="nav-item"><a href="/work/" class="nav-link">工作</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">🌸达尔文的猹</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>数据结构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/98aed1/" class="sidebar-link">常见数据结构</a></li><li><a href="/pages/a31d9e/" class="sidebar-link">树</a></li><li><a href="/pages/ba361a/" class="sidebar-link">图</a></li><li><a href="/pages/b1729c/" class="sidebar-link">高级数据结构</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>基本算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/eae2ee/" class="sidebar-link">基础理论</a></li><li><a href="/pages/a21366/" class="sidebar-link">查找算法</a></li><li><a href="/pages/090e7c/" class="sidebar-link">排序算法</a></li><li><a href="/pages/24be70/" class="sidebar-link">字符串算法</a></li><li><a href="/pages/6be858/" class="sidebar-link">数据结构与算法之美(极客时间)🌸</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>算法题目🌟</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/87a808/" class="sidebar-link">刷题经验</a></li><li><a href="/pages/d4049d/" class="sidebar-link">力扣Hot100</a></li><li><a href="/pages/33313a/" class="sidebar-link">数组题目</a></li><li><a href="/pages/ec2a3c/" class="sidebar-link">哈希表题目</a></li><li><a href="/pages/7c3a80/" class="sidebar-link">元素查找题目</a></li><li><a href="/pages/9b9829/" class="sidebar-link">双指针题目</a></li><li><a href="/pages/44b844/" class="sidebar-link">排序题目</a></li><li><a href="/pages/8a6c4a/" class="sidebar-link">字符串题目</a></li><li><a href="/pages/eedc87/" class="sidebar-link">链表题目</a></li><li><a href="/pages/6b2c46/" class="sidebar-link">队列与栈题目</a></li><li><a href="/pages/f4c3b6/" class="sidebar-link">树题目</a></li><li><a href="/pages/8f069b/" class="sidebar-link">贪心算法题目</a></li><li><a href="/pages/0f1cc4/" aria-current="page" class="active sidebar-link">动态规划题目</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/8f83eb/" class="sidebar-link">回溯算法题目</a></li><li><a href="/pages/0b48f4/" class="sidebar-link">图与搜索题目</a></li><li><a href="/pages/9c1a16/" class="sidebar-link">数学与位运算题目</a></li><li><a href="/pages/d06400/" class="sidebar-link">大数据与空间限制题目</a></li><li><a href="/pages/cf4131/" class="sidebar-link">业务算法题目</a></li><li><a href="/pages/d1fc13/" class="sidebar-link">智力题目</a></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/algorithm/#算法" data-v-06970110>算法</a></li><li data-v-06970110><a href="/algorithm/#算法" data-v-06970110>算法</a></li><li data-v-06970110><a href="/algorithm/#算法题目🌟" data-v-06970110>算法题目🌟</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/nanodaemony" target="_blank" title="作者" class="beLink" data-v-06970110>NanoDaemony</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2025-02-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">本文目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">动态规划题目<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="_1000-动态规划题目"><a href="#_1000-动态规划题目" class="header-anchor">#</a> 1000.动态规划题目</h1> <h4 id="动态规划基础🌸"><a href="#动态规划基础🌸" class="header-anchor">#</a> 动态规划基础🌸</h4> <h5 id="经验"><a href="#经验" class="header-anchor">#</a> 经验</h5> <p>动态规划的递推公式中, 如果当前需要推断的 dp 元素仅需要前面的<strong>有限个元素</strong>推出, 那么可以<strong>使用的少量的元素进行滚动更新</strong>的方式来节约空间. 比如 dp[i] = Math.max(dp[i - 1], dp[i - 2]) 这种.</p> <p>一般定下来 dp 数组的含义后, 那就需要分析当前 dp[i] 有多少种状态, 每种状态是由前面的什么条件推导出来的.</p> <h5 id="什么是动态规划"><a href="#什么是动态规划" class="header-anchor">#</a> 什么是动态规划</h5> <p>动态规划 Dynamic Programming, 简称 DP, 如果<mark><strong>某一问题有很多重叠子问题, 使用动态规划是最有效</strong></mark>的.</p> <p><mark><strong>所以动态规划中每一个状态一定是由上一个状态推导出来的, 这一点就区分于贪心, 贪心没有状态推导, 而是从局部直接选最优的.</strong></mark></p> <p>看一个背包问题的例子. 例如: 有 N 件物品和一个最多能背重量为 W 的背包. 第 i 件物品的重量是 weight[i], 得到的价值是 value[i]. <strong>每件物品只能用一次</strong>, 求解将哪些物品装入背包里物品价值总和最大.</p> <p>动态规划中 dp[j] 是由 dp[j - weight[i]] 推导出来的, 然后取 max(dp[j], dp[j - weight[i]] + value[i]).</p> <p><strong>但如果是贪心, 每次拿物品选一个最大的或者最小的就完事了, 和上一个状态没有关系</strong>. 所以贪心解决不了动态规划的问题. 知道<strong>动规是由前一个状态推导出来的, 而贪心是局部直接选最优的</strong>, 对于刷题来说就够用了.</p> <h5 id="动态规划的解题步骤"><a href="#动态规划的解题步骤" class="header-anchor">#</a> 动态规划的解题步骤</h5> <p><strong>状态转移公式(递推公式)</strong> 是很重要, 但动规不仅仅只有递推公式.</p> <p><strong>对于动态规划问题, 下面将拆解为如下五步曲, 这五</strong></p> <ol><li>确定 dp 数组(dp table)以及下标的含义</li> <li>确定<strong>递推公式</strong></li> <li>dp 数组如何初始化</li> <li><strong>确定遍历顺序</strong></li> <li>举例推导 dp 数组</li></ol> <p>为什么要先确定递推公式, 然后在考虑初始化呢? <strong>因为一些情况是递推公式决定了 dp 数组要如何初始化!</strong></p> <p>可能大家都知道递推公式的重要性, 感觉确定了递推公式这道题目就解出来了. 其实确定递推公式仅仅是解题里的一步而已! 一些人知道递推公式, 但搞不清楚 dp 数组应该如何初始化, 或者正确的遍历顺序, 以至于记下来公式, 但写的程序怎么改都通过不了.</p> <h5 id="动态规划应该如何debug"><a href="#动态规划应该如何debug" class="header-anchor">#</a> 动态规划应该如何debug</h5> <p>相信动规的题目, 很大部分同学都是这样做的. 看一下题解, 感觉看懂了, 然后照葫芦画瓢, 如果能正好画对了, 万事大吉, 一旦要是没通过, 就怎么改都通过不了,对 dp 数组的初始化, 递推公式, 遍历顺序, 处于一种黑盒的理解状态.</p> <p>写动规题目, 代码出问题很正常! <strong>找问题的最好方式就是把 dp 数组打印出来, 看看究竟是不是按照自己思路推导的!</strong> <strong>做动规的题目, 写代码之前一定要把状态转移在 dp 数组的上具体情况模拟一遍, 心中有数, 确定最后推出的是想要的结果</strong>.</p> <p>然后再写代码, 如果代码没通过就打印 dp 数组, 看看是不是和自己预先推导的哪里不一样. 如果打印出来和自己预先模拟推导是一样的, 那么就是自己的递归公式, 初始化或者遍历顺序有问题了. 如果和自己预先模拟推导的不一样, 那么就是代码实现细节有问题.</p> <p>这样才是一个完整的思考过程, 而不是一旦代码出问题, 就毫无头绪的东改改西改改, 最后过不了, 或者说是稀里糊涂的过了.</p> <h5 id="动态规划刷题大纲"><a href="#动态规划刷题大纲" class="header-anchor">#</a> 动态规划刷题大纲</h5> <p><img src="/img/image-20240309195623-kpikase.png" alt="image"></p> <h4 id="动态规划题目"><a href="#动态规划题目" class="header-anchor">#</a> 动态规划题目</h4> <h5 id="斐波那契数-509-简单-🌸🔑"><a href="#斐波那契数-509-简单-🌸🔑" class="header-anchor">#</a> 斐波那契数(509-简单)🌸🔑</h5> <h6 id="题目描述"><a href="#题目描述" class="header-anchor">#</a> 题目描述</h6> <p>求斐波那契数列的<strong>第 n 项</strong>, n &lt;= 39.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">F</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token class-name">F</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token class-name">F</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">F</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 其中 n <span class="token operator">&gt;</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/fibonacci-number/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/fibonacci-number/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="递归法"><a href="#递归法" class="header-anchor">#</a> 递归法</h6> <p>本题可以使用递归解法来做代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>N <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> N<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">fib</span><span class="token punctuation">(</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>N <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>时间复杂度: O(2^n)</li> <li>空间复杂度: O(n), 算上了实现递归的系统栈所占空间.</li></ul> <p>如果使用<strong>递归</strong>求解, 会<strong>重复计算</strong>一些子问题. 例如, 计算 f(4) 需要计算 f(3) 和 f(2), 计算 f(3) 需要计算 f(2) 和 f(1), 可以看到 f(2) 被<strong>重复计算</strong>了.</p> <p>​<img src="/img/1563521902486-20240812152008-9pls4xh.png" alt="1563521902486">​</p> <h6 id="动态规划法"><a href="#动态规划法" class="header-anchor">#</a> 动态规划法</h6> <p>动规五部曲: 这里要用一个一维 dp 数组来<strong>保存递归的结果.</strong></p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>dp[i] 的定义为: <strong>第 i 个数的斐波那契数值是 dp[i]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>这是一道非常简单的入门题目.</p> <p><strong>因为题目已经把递推公式直接给出来了: 状态转移方程 dp[i] = dp[i - 1] + dp[i - 2];</strong></p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>题目中把如何初始化也直接给出来了了, 如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dp[0] = 0;
dp[1] = 1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式 dp[i] = dp[i - 1] + dp[i - 2]; 中可以看出, dp[i] 是依赖 dp[i - 1] 和 dp[i - 2], 那么遍历的顺序一定是<strong>从前到后</strong>遍历的.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>按照这个递推公式 dp[i] = dp[i - 1] + dp[i - 2], 来推导一下, 当 N 为 10 的时候, dp 数组应该是如下的数列:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">5</span> <span class="token number">8</span> <span class="token number">13</span> <span class="token number">21</span> <span class="token number">34</span> <span class="token number">55</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果代码写出来, 发现结果不对, 就把 dp 数组打印出来看看与推导的数列是不是一致的.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这里初始化的数组个数为 n+1</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>由于第三个值是由前两个值推导出来的, 并不依赖前面的其他元素</strong>, 所以这里只需要<strong>维护两个数值</strong>就可以了, 不需要记录整个序列. 只需要持续滚动更新两个数值即可.</p> <p>空间压缩后的代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 计算结果</span>
        c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token comment">// 重新赋值</span>
        a <span class="token operator">=</span> b<span class="token punctuation">;</span>
        b <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>时间复杂度: O(n), 空间复杂度: O(1).</p> <h5 id="矩形覆盖🔑"><a href="#矩形覆盖🔑" class="header-anchor">#</a> 矩形覆盖🔑</h5> <h6 id="题目描述-2"><a href="#题目描述-2" class="header-anchor">#</a> 题目描述</h6> <p>可以用 2 * 1 的小矩形<strong>横着或者竖着</strong>去覆盖更大的矩形. 请问用 n 个 2<em>1 的小矩形无重叠地覆盖一个 **2</em>n 的大矩形**, 总共有<strong>多少种方法</strong>?</p> <p>​<img src="/img/b903fda8-07d0-46a7-91a7-e803892895cf-3854822-20240812152143-my6s28e.gif" alt="b903fda8-07d0-46a7-91a7-e803892895cf-3854822">​</p> <h6 id="动态规划法-2"><a href="#动态规划法-2" class="header-anchor">#</a> 动态规划法</h6> <p>当 n 为 1 时, 只有<strong>一种覆盖</strong>方法:</p> <p>​<img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563521931254.png" alt="">​</p> <p>当 n 为 2 时, 有<strong>两种覆盖</strong>方法:</p> <p>​<img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563521953655.png" alt="">​</p> <p>要覆盖 2<em>n 的大矩形, 可以**先覆盖 2</em>1 的矩形**, 再<strong>覆盖 2*(n-1)</strong>  的矩形; 或者<strong>先覆盖 2*2</strong> 的矩形, 再覆盖 <em><em>2</em>(n-2)</em>*  的矩形. 而覆盖 <em><em>2</em>(n-1) 和 2</em>(n-2) 的矩形可以看成子问题**. 该问题的递推公式如下:</p> <p>​<img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563521966330.png" alt="">​</p> <p>其实这个解就类似于前面的裴波那契的解法, <strong>一毛一样</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token class-name">RectCover</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Base case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 维护两个变量滚动更新即可</span>
    <span class="token keyword">int</span> back <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> front <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> back <span class="token operator">+</span> front<span class="token punctuation">;</span>
        back <span class="token operator">=</span> front<span class="token punctuation">;</span>
        front <span class="token operator">=</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="跳台阶-70-简单-🌸🔑💯"><a href="#跳台阶-70-简单-🌸🔑💯" class="header-anchor">#</a> 跳台阶(70-简单)🌸🔑💯</h5> <h6 id="题目描述-3"><a href="#题目描述-3" class="header-anchor">#</a> 题目描述</h6> <p>假设你正在爬楼梯. 需要 n 阶你才能到达楼顶. <strong>每次可以爬 1 或 2 个台阶</strong>. 有多少种不同的方法可以爬到楼顶? 注意: 给定 n 是一个正整数.</p> <p><img src="/img/image-20240812222322-96ybfjq.png" alt="image"></p> <blockquote><p><a href="https://leetcode.cn/problems/climbing-stairs/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/climbing-stairs/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-3"><a href="#动态规划法-3" class="header-anchor">#</a> 动态规划法</h6> <p>爬到第一层楼梯有一种方法, 爬到二层楼梯有两种方法. 那么第一层楼梯再跨两步就到第三层, 第二层楼梯再跨一步就到第三层. 所以<strong>到第三层楼梯的状态可以由第二层楼梯和到第一层楼梯状态推导出来</strong>, 那么就可以想到动态规划了.</p> <p>来分析一下, 动规五部曲:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>定义一个一维数组来记录不同楼层的状态.</p> <p>dp[i]: 爬到第 i 层楼梯, 有 dp[i] 种方法.</p> <blockquote><p>确定递推公式</p></blockquote> <p>如何可以推出 dp[i] 呢?</p> <p>当 <strong>n = 1</strong> 时, 只有<strong>一种</strong>跳法:</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563522011148.png" alt=""></p> <p>当 <strong>n = 2</strong> 时, 有<strong>两种</strong>跳法:</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563522031061.png" alt=""></p> <p>跳 n 阶台阶, 可以<strong>先跳 1 阶台阶</strong>, <strong>再跳 n-1</strong> 阶台阶; 或者<strong>先跳 2 阶</strong>台阶, 再跳 <strong>n-2 阶</strong>台阶. 而 n-1 和 n-2 阶台阶的跳法可以看成<strong>子问题</strong>, 该问题的递推公式为:</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563522045805.png" alt=""></p> <p>从 dp[i] 的定义可以看出, dp[i] 可以有两个方向推出来.</p> <ul><li>首先是 dp[i - 1], 上 i - 1 层楼梯, 有 dp[i - 1] 种方法, 那么再一步跳一个台阶不就是 dp[i] 了么.</li> <li>还有就是 dp[i - 2], 上 i - 2 层楼梯, 有 dp[i - 2] 种方法, 那么再一步跳两个台阶不就是 dp[i] 了么.</li></ul> <p>那么 dp[i] 就是 dp[i - 1] 与 dp[i - 2] 之和! 所以 <strong>==dp[i] = dp[i - 1] + dp[i - 2]==</strong> .</p> <p>在推导 dp[i] 的时候, 一定要时刻想着 dp[i] 的定义, 否则容易跑偏. 这体现出确定 dp 数组以及下标的含义的重要性!</p> <p>举例当 n 为 5 的时候, dp 数组应该是这样的.</p> <p><img src="/img/net-img-20210105202546299-20240310102416-65qan3x.png" alt="70.爬楼梯"></p> <p>如果代码出问题了, 就把 dp 数组打印出来, 看看究竟是不是和自己推导的一样. <strong>这不就是斐波那契数列么!</strong>  唯一的区别是, 没有讨论 dp[0] 应该是什么, 因为 dp[0] 在本题没有意义.</p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这里初始化的数组个数为 n+1</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token comment">// 从3开始动态规划</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>当然依然也可以, 优化一下空间复杂度, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 初始变量</span>
    <span class="token comment">// f(n - 2)</span>
    <span class="token keyword">int</span> back <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// f(n - 1)</span>
    <span class="token keyword">int</span> front <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 滚动计算</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// f(n) = f(n - 1) + f(n - 2)</span>
        res <span class="token operator">=</span> back <span class="token operator">+</span> front<span class="token punctuation">;</span>
        <span class="token comment">// 更新一下 f(n - 2)</span>
        back <span class="token operator">=</span> front<span class="token punctuation">;</span>
        <span class="token comment">// 更新一下 f(n - 1)</span>
        front <span class="token operator">=</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>很多动规的题目其实都是当前状态依赖前两个, 或者前三个状态, 都可以做空间上的优化, <strong>但其实面试中能写出版本一就够了, 清晰明了, 如果面试官要求进一步优化空间的话, 就再去优化</strong>. 因为版本一才能体现出动规的思想精髓, 递推的状态变化.</p> <h5 id="变态跳台阶🌸🔑"><a href="#变态跳台阶🌸🔑" class="header-anchor">#</a> 变态跳台阶🌸🔑</h5> <h6 id="题目描述-4"><a href="#题目描述-4" class="header-anchor">#</a> 题目描述</h6> <p>一只青蛙一次可以跳上 1 级台阶, 也可以跳上 2 级... 它也<strong>可以跳上 n 级</strong>. 求该青蛙跳上一个 n 级的台阶总共有多少种跳法.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1563522070330.png" alt=""></p> <h6 id="数学推导法"><a href="#数学推导法" class="header-anchor">#</a> 数学推导法</h6> <p>跳上 n-1 级台阶, 可以从 n-2 级跳 1 级上去, 也可以从 <strong>n-3 级</strong>跳 2 级上去..., 那么</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同样, 跳上 n 级台阶, 可以从 n-1 级跳 1 级上去, 也可以从 n-2 级跳 2 级上去..., 那么</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>综上可得</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>即:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所以 f(n) 是一个等比数列</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token class-name">JumpFloorII</span><span class="token punctuation">(</span><span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> target <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="动态规划-完全背包"><a href="#动态规划-完全背包" class="header-anchor">#</a> 动态规划(完全背包)</h6> <p>参考: 变态爬楼梯完全背包版本(中等).</p> <h5 id="使用最小花费爬楼梯-746-简单-🌸"><a href="#使用最小花费爬楼梯-746-简单-🌸" class="header-anchor">#</a> 使用最小花费爬楼梯(746-简单)🌸</h5> <h6 id="题目描述-5"><a href="#题目描述-5" class="header-anchor">#</a> 题目描述</h6> <p>数组的每个下标作为一个阶梯, 第 i 个阶梯对应着一个非负数的体力花费值 cost[i]. 每当爬上一个阶梯都要花费对应的体力值, 一旦支付了相应的体力值, 就可以<strong>选择向上爬一个阶梯或者爬两个阶梯</strong>.</p> <p>找出<strong>达到楼层顶部的最低花费</strong>. 在开始时, 可以选择<strong>从下标为 0 或 1 的元素作为初始阶梯</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>示例 <span class="token number">1</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> cost <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">15</span>
解释<span class="token operator">:</span> 你将从下标为 <span class="token number">1</span> 的台阶开始<span class="token punctuation">.</span> 支付 <span class="token number">15</span> <span class="token punctuation">,</span> 向上爬两个台阶<span class="token punctuation">,</span> 到达楼梯顶部<span class="token punctuation">.</span> 总花费为 <span class="token number">15.</span> 
示例 <span class="token number">2</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> cost <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">6</span>
解释<span class="token operator">:</span> 从下标为 <span class="token number">0</span> 的台阶开始<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬两个台阶<span class="token punctuation">,</span> 到达下标为 <span class="token number">2</span> 的台阶<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬两个台阶<span class="token punctuation">,</span> 到达下标为 <span class="token number">4</span> 的台阶<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬两个台阶<span class="token punctuation">,</span> 到达下标为 <span class="token number">6</span> 的台阶<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬一个台阶<span class="token punctuation">,</span> 到达下标为 <span class="token number">7</span> 的台阶<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬两个台阶<span class="token punctuation">,</span> 到达下标为 <span class="token number">9</span> 的台阶<span class="token punctuation">.</span> 
<span class="token operator">-</span> 支付 <span class="token number">1</span><span class="token punctuation">,</span> 向上爬一个台阶<span class="token punctuation">,</span> 到达楼梯顶部<span class="token punctuation">.</span> 
总花费为 <span class="token number">6.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/min-cost-climbing-stairs/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/min-cost-climbing-stairs/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划"><a href="#动态规划" class="header-anchor">#</a> 动态规划</h6> <p>题目中说 &quot;可以选择从下标为 0 或下标为 1 的台阶开始爬楼梯&quot; 也就是<strong>相当于跳到下标 0 或者下标 1 是不花费体力的, 从下标 0 下标 1 开始跳就要花费体力</strong>了.</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>使用动态规划, 就要有一个数组来记录状态, 本题只需要一个一维数组 dp[i] 就可以了.</p> <p><strong>dp[i] 的定义: 到达第 i 台阶所花费的最少体力为 dp[i]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p><strong>可以有两个途径得到 dp[i], 一个是 dp[i - 1] 一个是 dp[i - 2]</strong> .</p> <ul><li>dp[i - 1] 跳到 dp[i] 需要花费 <code>dp[i - 1] + cost[i - 1]</code>​.</li> <li>dp[i - 2] 跳到 dp[i] 需要花费 <code>dp[i - 2] + cost[i - 2]</code>​.</li></ul> <p>那么究竟是选从 dp[i - 1] 跳还是从 dp[i - 2] 跳呢?</p> <p>一定是<strong>选最小</strong>的, 所以 <strong>==dp[i] = min(dp[i - 1] + cost[i - 1], dp[i - 2] + cost[i - 2])==</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>看一下递归公式, dp[i] 由 dp[i - 1], dp[i - 2] 推出, 既然初始化所有的 dp[i] 是不可能的, 那么<strong>只初始化 dp[0] 和 dp[1] 就够了</strong>, 其他的最终都是 dp[0] 和 dp[1] 推出.</p> <p>题目描述中明确说了 &quot;可以选择从下标为 0 或下标为 1 的台阶开始爬楼梯&quot;. 也就是说到达第 0 个台阶是不花费的, <strong>但从第 0 个台阶往上跳的话, 需要花费 cost[0]</strong> .</p> <p>所以初始化 <strong>dp[0] = 0, dp[1] = 0</strong>;</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>最后一步, 递归公式有了, 初始化有了, 如何遍历呢? 因为是模拟台阶, 而且 dp[i] 由 dp[i - 1] 和 dp[i - 2] 推出, 所以是<strong>从前到后</strong>遍历 cost 数组就可以了.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>举例 cost = [1, 100, 1, 1, 1, 100, 1, 1, 100, 1] 来模拟一下 dp 数组的状态变化, 如下:</p> <p><img src="/img/net-img-20221026175104-20240310104318-s3xec21.png" alt=""></p> <p>整体代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minCostClimbingStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cost<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> cost<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 从下标为 0 或下标为 1 的台阶开始, 因此支付费用为0</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算到达每一层台阶的最小费用</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>时间复杂度: O(n), 空间复杂度: O(n).</p> <p>还可以优化空间复杂度, <strong>因为 dp[i] 就是由前两位推出来的</strong>, 那么也不用 dp 数组了, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minCostClimbingStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cost<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化两个变量</span>
    <span class="token keyword">int</span> dp0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> dp1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token keyword">int</span> dpi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> cost<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 更新一下最终的结果</span>
        dpi <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp1 <span class="token operator">+</span> cost<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp0 <span class="token operator">+</span> cost<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 重新更新一下前两位</span>
        dp0 <span class="token operator">=</span> dp1<span class="token punctuation">;</span> 
        dp1 <span class="token operator">=</span> dpi<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dpi<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>此时时间复杂度: O(n), 空间复杂度: O(1).</p> <h5 id="杨辉三角-118-简单-🌸💯"><a href="#杨辉三角-118-简单-🌸💯" class="header-anchor">#</a> 杨辉三角(118-简单)🌸💯</h5> <h6 id="题目描述-6"><a href="#题目描述-6" class="header-anchor">#</a> 题目描述</h6> <p>给定一个非负整数 numRows, 生成「杨辉三角」的前 numRows 行. 在「杨辉三角」中, <strong>每个数是它左上方和右上方的数的和</strong>.</p> <p><img src="/img/image-20240905224518-u1kevvu.png" alt="image"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> numRows <span class="token operator">=</span> <span class="token number">5</span>   输出<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/pascals-triangle/description" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/pascals-triangle/description<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-4"><a href="#动态规划法-4" class="header-anchor">#</a> 动态规划法</h6> <p><strong>一行一行的构造, 下一行是由上一行的值构造出来的, 且每一行第一个和最后一个固定为 1</strong>.</p> <p>递推公式: <strong>dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j]</strong></p> <p><img src="/img/resource-20241229195257-q0oh1gq.gif" alt="resource"></p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> resList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 共需要构造row行</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> row<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 从左到右构造每一行</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 每一行的第一个和最后一个元素固定为1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                nums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 其他位置的值为上一行的两个值之和</span>
                nums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>resList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> resList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        resList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> resList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="不同路径-62-中等-🌸💯"><a href="#不同路径-62-中等-🌸💯" class="header-anchor">#</a> 不同路径(62-中等)🌸💯</h5> <h6 id="题目描述-7"><a href="#题目描述-7" class="header-anchor">#</a> 题目描述</h6> <p>一个机器人位于一个 m x n 网格的左上角. 机器人每次<strong>只能向下或者向右移动一步</strong>. 机器人试图达到网格的右下角. 问总共有多少条不同的路径?</p> <p>示例:</p> <p><img src="/img/net-img-20210110174033215-20240309225507-1cp5m34.png" alt=""></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> m <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">7</span>  输出<span class="token operator">:</span> <span class="token number">28</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/unique-paths/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/unique-paths/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="深度优先搜索法"><a href="#深度优先搜索法" class="header-anchor">#</a> 深度优先搜索法</h6> <p>这道题目, 刚一看最直观的想法就是用图论里的深搜来枚举出来有多少种路径.</p> <p>注意题目中说机器人每次只能向下或者向右移动一步, 那么其实<strong>机器人走过的路径可以抽象为一棵二叉树, 而叶子节点就是终点!</strong></p> <p>如图举例:</p> <p><img src="/img/net-img-20201209113602700-20240309225508-msnbilc.png" alt="62.不同路径"></p> <p>此时问题就可以转化为求二叉树叶子节点的个数, 大致的代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> m <span class="token operator">||</span> j <span class="token operator">&gt;</span> n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">// 越界了</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span>mark<span class="token operator">&gt;</span> m <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 找到一种方法, 相当于找到了叶子节点</span>
    <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>如果提交了代码就会发现超时了!</strong>  来分析一下时间复杂度, 这个深搜的算法, 其实就是要遍历整个二叉树.</p> <p>这棵树的深度其实就是 m+n-1(深度按从 1 开始计算). 那二叉树的节点个数就是 <code>2^(m + n - 1) - 1</code>​. 可以理解深搜的算法就是遍历了整个满二叉树(其实没有遍历整个满二叉树, 只是近似而已). 所以上面深搜代码的时间复杂度为 <code>O(2^(m + n - 1) - 1)</code>​, 这是指数级别的时间复杂度, 是非常大的.</p> <h6 id="动态规划-2"><a href="#动态规划-2" class="header-anchor">#</a> 动态规划</h6> <p>机器人从 (0, 0) 位置出发, 到 (m - 1, n - 1)终点.</p> <p>按照动规五部曲来分析:</p> <blockquote><p>确定dp数组(dp table)以及下标的含义</p></blockquote> <p><strong>dp[i][j]: 表示从 (0, 0) 出发, 到 (i, j) 有 dp[i][j] 条不同的路径</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>想要<strong>求 dp[i][j], 只能有两个方向来推导出来, 即 dp[i - 1][j] 和 dp[i][j - 1]</strong> .</p> <p>此时在回顾一下 dp[i - 1][j] 表示啥, 是从 (0, 0) 的位置到 (i - 1, j) 有几条路径, dp[i][j - 1] 同理.</p> <p>那么很自然, <strong>==dp[i][j] = dp[i - 1][j] + dp[i][j - 1]==</strong> , 因为 dp[i][j] 只有这两个方向过来.</p> <blockquote><p>dp数组的初始化</p></blockquote> <p>如何初始化呢, <strong>首先 dp[i][0] 一定都是 1</strong>, 因为从 (0, 0) 的位置到 (i, 0) 的路径只有一条, 那么 <strong>dp[0][j] 也同理</strong>. 也就是可以初始化矩阵的两个边.</p> <p>所以初始化代码为:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>for (int i = 0; i &lt; m; i++) dp[i][0] = 1;
for (int j = 0; j &lt; n; j++) dp[0][j] = 1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>确定遍历顺序</p></blockquote> <p>这里要看一下递推公式 dp[i][j] =  dp[i - 1][j] + dp[i][j - 1], dp[i][j] 都是从其<strong>上方和左方</strong>推导而来, 那么<strong>从左到右一层一层遍历</strong>就可以了.</p> <p>这样就可以保证推导 dp[i][j] 的时候, dp[i - 1][j] 和 dp[i][j - 1] 一定是有数值的.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>如图所示:</p> <p><img src="/img/net-img-20201209113631392-20240309225508-5qb5pvo.png" alt="62.不同路径1"></p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化DP数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 达到格子的路径就是到达该格子左边的格子的路径+上边的路径的和</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>此法的时间复杂度: O(m × n), 空间复杂度: O(m × n).</p> <p>其实用一个<strong>一维数组</strong>(也可以理解是滚动数组)就可以了, 但是不利于理解, 可以优化点空间, 建议先理解了二维, 在理解一维, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    Arrays<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>此时时间复杂度: O(m × n), 空间复杂度: O(n).</p> <h5 id="不同路径ii-63-中等-🌸💯"><a href="#不同路径ii-63-中等-🌸💯" class="header-anchor">#</a> 不同路径II(63-中等)🌸💯</h5> <h6 id="题目描述-8"><a href="#题目描述-8" class="header-anchor">#</a> 题目描述</h6> <p>一个机器人位于一个 m x n 网格的左上角. 机器人每次只能<strong>向下或者向右移动一步</strong>. 机器人试图达到网格的右下角. 现在考虑网格中有障碍物. 那么从左上角到右下角将会有多少条不同的路径?</p> <p><img src="/img/net-img-20210111204901338-20240310135507-x6fgo5y.png" alt=""></p> <p>网格中的障碍物和空位置分别用 1 和 0 来表示.</p> <p>示例 1:</p> <p><img src="/img/net-img-20210111204939971-20240310135507-lr5xc2g.png" alt=""></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> obstacleGrid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">2</span>
解释<span class="token operator">:</span> <span class="token number">3</span>x3 网格的正中间有一个障碍物<span class="token punctuation">.</span> 从左上角到右下角一共有 <span class="token number">2</span> 条不同的路径<span class="token operator">:</span>
<span class="token number">1.</span> 向右 <span class="token operator">-&gt;</span> 向右 <span class="token operator">-&gt;</span> 向下 <span class="token operator">-&gt;</span> 向下
<span class="token number">2.</span> 向下 <span class="token operator">-&gt;</span> 向下 <span class="token operator">-&gt;</span> 向右 <span class="token operator">-&gt;</span> 向右
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/unique-paths-ii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/unique-paths-ii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-3"><a href="#动态规划-3" class="header-anchor">#</a> 动态规划</h6> <p>这道题相对于 不同路径(62-中等) 就是有了障碍. 不同路径(62-中等) 中已经详细分析了没有障碍的情况, <mark><strong>有障碍的话, 其实就是标记对应位置的 dp 数组保持初始值(0) 就可以</strong></mark>了.</p> <p>动规五部曲:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>与 不同路径(62-中等) 一样:</p> <p><strong>dp[i][j]: 表示从 (0, 0) 出发, 到 (i, j) 有 dp[i][j] 条不同的路径.</strong></p> <blockquote><p>确定递推公式</p></blockquote> <p>递推公式和 不同路径(62-中等) 一样, <strong>dp[i][j] =  dp[i - 1][j] + dp[i][j - 1]</strong> . 但这里需要注意一点, 因为有了障碍,  <strong>(i, j) 如果就是障碍的话应该就保持初始状态(初始状态为 0)</strong> .</p> <p>所以代码为:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 当(i, j)没有障碍的时候, 再推导 dp[i][j]</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>dp数组如何初始化</p></blockquote> <p>在 不同路径(62-中等) 中给出如下的初始化:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>因为从 (0, 0) 的位置到 (i, 0) 的路径只有一条, 所以 dp[i][0] 一定为 1, dp[0][j] 也同理.</p> <p>但如果 (i, 0) 这条边有了障碍之后, <mark><strong>障碍之后(包括障碍)都是走不到的位置了, 所以障碍之后的 dp[i][0] 应该还是初始值 0</strong></mark>.</p> <p>如图:</p> <p><img src="/img/net-img-20210104114513928-20240310135507-wcs3olr.png" alt="63.不同路径 II"></p> <p>下标 (0, j) 的初始化情况同理.</p> <p>注意 for 循环的终止条件, 一旦遇到 obstacleGrid[i][0] == 1 的情况就停止 dp[i][0] 的赋值 1 的操作, dp[0][j] 同理.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式 <code>dp[i][j] = dp[i - 1][j] + dp[i][j - 1]</code>​ 中可以看出, 一定是<strong>从左到右一层一层遍历</strong>, 这样保证推导 dp[i][j] 的时候, <code>dp[i - 1][j]</code>​ 和 <code>dp[i][j - 1]</code>​ 一定是有数值.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>拿示例 1 来举例:</p> <p><img src="/img/net-img-20210104114548983-20240310135507-bfvna9a.png" alt="63.不同路径 II1"></p> <p>对应的 dp 数组如图:</p> <p><img src="/img/net-img-20210104114610256-20240310135507-9dw1bwd.png" alt="63.不同路径 II2"></p> <p>动规五部分分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePathsWithObstacles</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> grids<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> grids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 先决条件: 如果在起点或终点出现了障碍, 肯定就没有任何路线了</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>grids<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token number">1</span> <span class="token operator">||</span> grids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化dp数组的第一行和第一列, 如果遇到障碍就停止, 剩余的默认0即可</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>grids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>grids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 遇到障碍的格子, 直接赋值0</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>grids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 动态规划推算其他格子的路径数目</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>此时时间复杂度: O(n × m), 空间复杂度: O(n × m).</p> <p>同样给出空间优化版本:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePathsWithObstacles</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> girds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> girds<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> girds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> girds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>girds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>此时时间复杂度: O(n × m), 空间复杂度: O(m).</p> <h5 id="最小路径和-64-中等-🌸💯"><a href="#最小路径和-64-中等-🌸💯" class="header-anchor">#</a> 最小路径和(64-中等)🌸💯</h5> <h6 id="题目描述-9"><a href="#题目描述-9" class="header-anchor">#</a> 题目描述</h6> <p>给定一个包含非负整数的网格 <code>grid</code>​，请找出一条从左上角到右下角的路径，使得路径上的<strong>数字总和为最小</strong>。每次只能向下或者向右移动一步。</p> <p><img src="/img/image-20241224233952-jt4a69d.png" alt="image"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入：grid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  输出：<span class="token number">7</span>
解释：因为路径 <span class="token number">1</span> → <span class="token number">3</span> → <span class="token number">1</span> → <span class="token number">1</span> → <span class="token number">1</span> 的总和最小。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/minimum-path-sum/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/minimum-path-sum/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-5"><a href="#动态规划法-5" class="header-anchor">#</a> 动态规划法</h6> <p>设 dp 为大小 m×n 矩阵，其中 dp[i][j] 的值代表直到走到 (i,j) 的最小路径和。</p> <p>题目要求，只能向右或向下走，换句话说，当前单元格 (i, j) 只能从左方单元格 (i − 1, j) 或上方单元格 (i, j − 1) 走到，因此只需要考虑矩阵<strong>左边界和上边界</strong>。</p> <p>因此状态转移方程为：<code>dp[i][j] = grid[i][j] + Math.min(dp[i - 1][j], dp[i][j - 1])</code>​。</p> <p>代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minPathSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>grid <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> grid<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> m <span class="token operator">=</span> grid<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化第一行和第一列</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当前位置的最小路径和为当前位置的值加上上方和左方的最小路径和</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h5 id="礼物的最大价值-中等-🌸🔑"><a href="#礼物的最大价值-中等-🌸🔑" class="header-anchor">#</a> 礼物的最大价值(中等)🌸🔑</h5> <h6 id="题目描述-10"><a href="#题目描述-10" class="header-anchor">#</a> 题目描述</h6> <p>在一个 <strong>m ***  <strong>n</strong> 的棋盘的每一个格都</strong>放有一个礼物**, 每个礼物都有一定<strong>价值</strong>(大于 0). 从<strong>左上角</strong>开始拿礼物, 每次<strong>向右或向下</strong>移动一格, 直到<strong>右下角</strong>结束. 给定一个棋盘, 求拿到<strong>礼物的最大价值</strong>. 例如, 对于如下棋盘:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1</span>    <span class="token number">10</span>   <span class="token number">3</span>    <span class="token number">8</span>
<span class="token number">12</span>   <span class="token number">2</span>    <span class="token number">9</span>    <span class="token number">6</span>
<span class="token number">5</span>    <span class="token number">7</span>    <span class="token number">4</span>    <span class="token number">11</span>
<span class="token number">3</span>    <span class="token number">7</span>    <span class="token number">16</span>   <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>礼物的最大价值为 1+12+5+7+7+16+5=53.</p> <blockquote><p><a href="https://leetcode.cn/problems/li-wu-de-zui-da-jie-zhi-lcof/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/li-wu-de-zui-da-jie-zhi-lcof/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-4"><a href="#动态规划-4" class="header-anchor">#</a> 动态规划</h6> <p>应该用<strong>动态规划</strong>求解, 而不是深度优先搜索, 深度优先搜索<strong>过于复杂</strong>, 不是最优解.</p> <p>利用<strong>循环的动态规划</strong>实现, 使用辅助<strong>二维数组</strong>. 定义 dp(i, j) 表示到达坐标为 (i, j) 的格子时能拿到的礼物<strong>总和的最大值</strong>; 有两种路径到达 (i, j): (i - 1, j) 或者 (i, j - 1); 则有</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">dp</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dp</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dp</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> gift<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也就是上边或者左边路径下的较大值加上自身的价值. 这里用的是二维的 dp 数组.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">jewelleryValue</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>array <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> array<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> m <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token comment">// 行数</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token comment">// 列数</span>
    <span class="token comment">// dp[m][n]表示到这个坐标最大的礼物值之和</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token comment">// 初始化第一行和第一列, 也就是持续累加即可</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// 从左到右从上到下遍历递推</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// 返回mn位置处的值</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h5 id="三角形的最小路径和-120-中等-🌸💯"><a href="#三角形的最小路径和-120-中等-🌸💯" class="header-anchor">#</a> 三角形的最小路径和(120-中等)🌸💯</h5> <h6 id="题目描述-11"><a href="#题目描述-11" class="header-anchor">#</a> 题目描述</h6> <p>给定一个三角形 triangle，找出<strong>自顶向下的最小路径和</strong>。每一步只能移动到<strong>下一行中相邻的结点</strong>上。相邻的结点 在这里指的是 下标 与 上一层结点下标 相同或者等于 上一层结点下标 +1 的两个结点。也就是说，如果正位于当前行的下标 i，那么下一步可以移动到下一行的下标 i 或 i + 1。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入：triangle <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  输出：<span class="token number">11</span>
解释：如下面简图所示：
   <span class="token number">2</span>
  <span class="token number">3</span> <span class="token number">4</span>
 <span class="token number">6</span> <span class="token number">5</span> <span class="token number">7</span>
<span class="token number">4</span> <span class="token number">1</span> <span class="token number">8</span> <span class="token number">3</span>
自顶向下的最小路径和为 <span class="token number">11</span>，即 <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">11</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/triangle/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/triangle/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-6"><a href="#动态规划法-6" class="header-anchor">#</a> 动态规划法</h6> <p><strong>dp[i][j] 表示从点 (i, j) 到底边的最小路径和</strong>。</p> <p>状态转移方程：<code>dp[i][j] = min(dp[i + 1][j], dp[i + 1][j + 1]) + triangle[i][j]</code>​。</p> <p><img src="/img/120-20241229195352-67hn99e.gif" alt="120"></p> <p>注意这里是自底向上的递推，代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minimumTotal</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> triangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> triangle<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// dp[i][j] 表示从点 (i, j) 到底边的最小路径和</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 从三角形的最后一行开始递推</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> triangle<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="整数拆分-343-中等-🌸🔑"><a href="#整数拆分-343-中等-🌸🔑" class="header-anchor">#</a> 整数拆分(343-中等)🌸🔑</h5> <h6 id="题目描述-12"><a href="#题目描述-12" class="header-anchor">#</a> 题目描述</h6> <p>给定一个正整数 n, <strong>将其拆分为至少两个正整数的和, 并使这些整数的乘积最大化</strong>. 返回可以获得的最大乘积.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>示例 <span class="token number">1</span><span class="token operator">:</span>
输入<span class="token operator">:</span> n <span class="token operator">=</span> <span class="token number">2</span>   输出<span class="token operator">:</span> <span class="token number">1</span>   解释<span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> × <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1.</span> 
示例 <span class="token number">2</span><span class="token operator">:</span>
输入<span class="token operator">:</span> n <span class="token operator">=</span> <span class="token number">10</span>  输出<span class="token operator">:</span> <span class="token number">36</span>  解释<span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span> × <span class="token number">3</span> × <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">36.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/integer-break/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/integer-break/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-5"><a href="#动态规划-5" class="header-anchor">#</a> 动态规划</h6> <p>动规五部曲, 分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]:</strong> <mark><strong>分拆数字 i, 可以得到的最大乘积为 dp[i]</strong></mark> .</p> <p>dp[i] 的定义将贯彻整个解题过程, 下面哪一步想不懂了, 就想想 dp[i] 究竟表示的是啥!</p> <blockquote><p>确定递推公式</p></blockquote> <p>可以想 dp[i] 最大乘积是怎么得到的呢?</p> <p>其实可以从 1 遍历 j, 然后<strong>有两种渠道得到 dp[i]</strong> .</p> <ul><li>一个<strong>是 j * (i - j) 直接相乘</strong>.</li> <li>一个<strong>是 j * dp[i - j]</strong> , 相当于是拆分 (i - j), 对这个拆分不理解的话, 可以回想 dp 数组的定义.</li></ul> <p><strong>那有同学问了, j 怎么就不拆分呢?</strong></p> <p>j 是从 1 开始遍历, 拆分 j 的情况, 在遍历 j 的过程中其实都计算过了. 那么从 1 遍历 j, 比较(i - j) * j 和 dp[i - j] * j 取最大的. 递推公式: <strong>dp[i] = max(dp[i], max((i - j) * j, dp[i - j] * j))</strong> ;</p> <p>也可以这么理解, <strong>j * (i - j) 是单纯的把整数拆分为两个数相乘, 而 j * dp[i - j] 是拆分成两个以及两个以上的个数相乘</strong>.</p> <p>如果定义 dp[i - j] * dp[j] 也是默认将一个数强制拆成 4 份以及 4 份以上了.</p> <p>所以递推公式: dp[i] = max({dp[i], (i - j) * j, dp[i - j] * j});</p> <p>那么在取最大值的时候, 为什么还要比较 dp[i] 呢? 因为在递推公式推导的过程中, 每次计算 dp[i], 取最大的而已.</p> <blockquote><p>dp的初始化</p></blockquote> <p>dp[0] dp[1]应该初始化多少呢? 有的题解里会给出 dp[0] = 1, dp[1] = 1 的初始化, 但解释比较牵强, 主要还是因为这么初始化可以把题目过了.</p> <p>严格从 dp[i] 的定义来说, dp[0] dp[1] 就<strong>不应该初始化</strong>, 也就是没有意义的数值.</p> <p>拆分 0 和拆分 1 的最大乘积是多少? 这是无解的. 这里<strong>只初始化 dp[2] = 1</strong>, 从 dp[i] 的定义来说, 拆分数字 2, 得到的最大乘积是 1, 这个没有任何异议!</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>确定遍历顺序, 先来看看递归公式: dp[i] = max(dp[i], max((i - j) * j, dp[i - j] * j));</p> <p>dp[i] 是依靠 dp[i - j] 的状态, 所以遍历 i 一定是从前向后遍历, 先有 dp[i - j] 再有 dp[i].</p> <p>所以遍历顺序为:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">*</span> j<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span> <span class="token operator">*</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意: 枚举 j 的时候, 是从 1 开始的. 从 0 开始的话, 那么让拆分一个数拆个 0, 求最大乘积就没有意义了.</p> <p>j 的结束条件是 j &lt; i - 1, 其实 j &lt; i 也是可以的, 不过可以节省一步, 例如让 j = i - 1 的话, 其实在 j = 1 的时候, 这一步就已经拆出来了, <strong>重复计算</strong>, 所以 j &lt; i - 1.</p> <p>至于 i 是从 3 开始, 这样 dp[i - j] 就是 dp[2] 正好可以通过初始化的数值求出来.</p> <p>更优化一步, 可以这样:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">*</span> j<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span> <span class="token operator">*</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>因为<strong>拆分一个数 n 使之乘积最大, 那么一定是拆分成 m 个近似相同的子数相乘才是最大的</strong>. 例如 6 拆成 3 * 3, 10 拆成 3 * 3 * 4. 100 的话也是拆成 m 个近似数组的子数相乘才是最大的.</p> <p>只不过不知道 m 究竟是多少而已, 但可以明确的是 m 一定大于等于 2, 既然 m 大于等于 2, 也就是最差也应该是拆成两个相同的可能是最大值.</p> <p>那么 j 遍历, 只需要遍历到 n/2 就可以, 后面就没有必要遍历了, 一定不是最大值. 至于 &quot;拆分一个数 n 使之乘积最大, 那么一定是拆分成 m 个近似相同的子数相乘才是最大的&quot; 这个就不去做数学证明了, 感兴趣的同学, 可以自己证明.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>举例当 n 为 10 的时候, dp 数组里的数值, 如下:</p> <p><img src="/img/net-img-20210104173021581-20240310143301-xl1ipma.png" alt="343.整数拆分"></p> <p>以上动规五部曲分析完毕, 完整代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">integerBreak</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// dp[i] 为正整数 i 拆分后的结果的最大乘积</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 只需要初始化 dp[2]</span>
    dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里的 j 其实最大值为 i-j, 再大只不过是重复而已, </span>
            <span class="token comment">// 并且在本题中 分析 dp[0], dp[1]都是无意义的, </span>
            <span class="token comment">// j 最大到 i-j,就不会用到 dp[0]与 dp[1]</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>j <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> j <span class="token operator">*</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// j * (i - j) 是单纯的把整数 i 拆分为两个数 也就是 i, i-j 再相乘</span>
            <span class="token comment">// 而 j * dp[i - j]是将 i 拆分成两个以及两个以上的个数, 再相乘. </span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h6 id="贪心思想"><a href="#贪心思想" class="header-anchor">#</a> 贪心思想</h6> <p>本题也可以用贪心, <mark><strong>每次拆成 n 个 3, 如果剩下是 4, 则保留 4</strong></mark>, 然后相乘, <strong>但是这个结论需要数学证明其合理性!</strong></p> <p><strong>部分面试官会要求证明</strong>: 当 <strong>n &gt;= 5</strong> 时, <strong>3(n - 3) - n = 2n - 9 &gt; 0</strong>, 且 <strong>2(n - 2) - n = n - 4 &gt; 0</strong>. 因此在 n &gt;= 5 的情况下, 将绳子剪成一段<strong>为 2 或者 3</strong>, 得到的乘积会更大. 又因为 3(n - 3) - 2(n - 2) = n - 5 &gt;= 0, 所以剪成一段长度为 3 比长度为 2 得到的乘积更大.</p> <p>代码如下, 编码时, 如果剩余的数字小于等于 4, 就不需要再拆分了, 否则就持续拆分出 3 来.</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">integerBreak</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span>mark<span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 全部拆分为3</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">*=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        n <span class="token operator">-=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">*=</span> n<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="不同的二叉搜索树-96-困难-🌸"><a href="#不同的二叉搜索树-96-困难-🌸" class="header-anchor">#</a> 不同的二叉搜索树(96-困难)🌸</h5> <h6 id="题目描述-13"><a href="#题目描述-13" class="header-anchor">#</a> 题目描述</h6> <p>给定一个整数 n, 求以 1 ... n 为节点组成的<strong>二叉搜索树</strong>有多少种?</p> <p>示例:</p> <p><img src="/img/net-img-20210113161941835-20240310154557-58fypmk.png" alt=""></p> <h6 id="动态规划法-7"><a href="#动态规划法-7" class="header-anchor">#</a> 动态规划法</h6> <p>先举几个例子画画图, 看看有没有什么规律, 如图:</p> <p><img src="/img/net-img-20210107093106367-20240310154557-2x7l01z.png" alt="96.不同的二叉搜索树"></p> <p>n 为 1 的时候有一棵树, n 为 2 有两棵树, 这个是很直观的.</p> <p><img src="/img/net-img-20210107093129889-20240310154557-2uluuq2.png" alt="96.不同的二叉搜索树1"></p> <p>来看看 n 为 3 的时候, 有哪几种情况.</p> <ul><li><strong>当 1 为头结点的时候, 其右子树有两个节点, 看这两个节点的布局, 是不是和 n 为 2 的时候两棵树的布局是一样的</strong>!</li> <li>当 3 为头结点的时候, 其左子树有两个节点, 看这两个节点的布局, 是不是和 n 为 2 的时候两棵树的布局也是一样的!</li> <li>当 2 为头结点的时候, 其左右子树都只有一个节点, 布局是不是和 n 为 1 的时候只有一棵树的布局也是一样的!</li></ul> <p>发现到这里, 其实就找到了<strong>重叠子问题</strong>了, 其实也就是发现可以通过 dp[1] 和 dp[2] 来推导出来 dp[3] 的某种方式. 思考到这里, 这道题目就有眉目了.</p> <p>dp[3] 就是<strong>元素 1 为头结点搜索树的数量 + 元素 2 为头结点搜索树的数量 + 元素 3 为头结点搜索树的数量</strong>.</p> <ul><li>元素 1 为头结点搜索树的数量 = 右子树有 2 个元素的搜索树数量 * 左子树有 0 个元素的搜索树数量</li> <li>元素 2 为头结点搜索树的数量 = 右子树有 1 个元素的搜索树数量 * 左子树有 1 个元素的搜索树数量</li> <li>元素 3 为头结点搜索树的数量 = 右子树有 0 个元素的搜索树数量 * 左子树有 2 个元素的搜索树数量</li></ul> <p>有 2 个元素的搜索树数量就是 dp[2].</p> <p>有 1 个元素的搜索树数量就是 dp[1].</p> <p>有 0 个元素的搜索树数量就是 dp[0].</p> <p>所以 <strong>dp[3] = dp[2] * dp[0] + dp[1] * dp[1] + dp[0] * dp[2]</strong></p> <p>如图所示:</p> <p><img src="/img/net-img-20210107093226241-20240310154558-ruu5ql8.png" alt="96.不同的二叉搜索树2"></p> <p>此时已经找到递推关系了, 那么可以用动规五部曲再系统分析一遍.</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]: 1 到 i 为节点组成的二叉搜索树的个数为 dp[i]</strong> .</p> <p>也可以理解是 i 个不同元素节点组成的二叉搜索树的个数为 dp[i], 都是一样的.</p> <blockquote><p>确定递推公式</p></blockquote> <p>在上面的分析中, 其实已经看出其递推关系, <strong>==dp[i] += dp[以 j 为头结点左子树节点数量] * dp[以 j 为头结点右子树节点数量]==</strong></p> <p>j 相当于是头结点的元素, 从 1 遍历到 i 为止.</p> <p>所以递推公式: <strong>dp[i] += dp[j - 1] * dp[i - j]</strong> , j - 1 为 j 为头结点左子树节点数量, i - j 为以 j 为头结点右子树节点数量.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>初始化, 只需要初始化 dp[0] 就可以了, 推导的基础, 都是 dp[0]. 那么 dp[0] 应该是多少呢?</p> <p>从定义上来讲, 空节点也是一棵二叉树, 也是一棵二叉搜索树, 这是可以说得通的.</p> <p>从递归公式上来讲, dp[以 j 为头结点左子树节点数量] * dp[以 j 为头结点右子树节点数量] 中以 j 为头结点左子树节点数量为 0, 也需要 dp[以 j 为头结点左子树节点数量] = 1, 否则乘法的结果就都变成 0 了.</p> <p>所以初始化 dp[0] = 1.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>首先一定是遍历节点数, 从递归公式: dp[i] += dp[j - 1] * dp[i - j] 可以看出, 节点数为 i 的状态是依靠 i 之前节点数的状态.</p> <p><strong>那么遍历 i 里面每一个数作为头结点的状态, 用 j 来遍历.</strong></p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>n 为 5 时候的 dp 数组状态如图:</p> <p><img src="/img/net-img-20210107093253987-20240310154558-ob4npj7.png" alt="96.不同的二叉搜索树3"></p> <p>当然如果画图举例的话, 基本举例到 n 为 3 就可以了, n 为 4 的时候, 画图已经比较麻烦了.</p> <p>综上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numTrees</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化 dp 数组</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化0个节点和1个节点的情况</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对于第 i 个节点, 需要考虑1作为根节点直到 i 作为根节点的情况, 所以需要累加</span>
            <span class="token comment">// 一共 i 个节点, 对于根节点 j 时,左子树的节点个数为 j-1, 右子树的节点个数为 i-j</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>此时时间复杂度: O(n^2), 空间复杂度: O(n).</p> <p>这道题目虽然在力扣上标记是中等难度, 但可以算是<strong>困难</strong>了. 首先这道题想到用动规的方法来解决, 就不太好想, 需要举例, 画图, 分析, 才能找到递推的关系. 然后难点就是确定递推公式了, 如果把递推公式想清楚了, 遍历顺序和初始化, 就是自然而然的事情了.</p> <h5 id="把数字翻译成字符串-中等-🌸🔑"><a href="#把数字翻译成字符串-中等-🌸🔑" class="header-anchor">#</a> 把数字翻译成字符串(中等)🌸🔑</h5> <h6 id="题目描述-14"><a href="#题目描述-14" class="header-anchor">#</a> 题目描述</h6> <p>给定一个数字, 按照如下规则翻译成字符串: <strong>1 翻译成 a</strong>, 2 翻译成 b... <strong>26 翻译成 z</strong>. 计算出一个数字<strong>有多少种不同</strong>的翻译方法.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> ciphertext <span class="token operator">=</span> <span class="token number">216612</span>  输出<span class="token operator">:</span> <span class="token number">6</span>
解释<span class="token operator">:</span> <span class="token number">216612</span> 解密后有 <span class="token number">6</span> 种不同的形式<span class="token punctuation">,</span> 分别是 <span class="token string">&quot;cbggbc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vggbc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vggm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cbggm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cqgbc&quot;</span> 和 <span class="token string">&quot;cqgm&quot;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-6"><a href="#动态规划-6" class="header-anchor">#</a> 动态规划</h6> <p>可以归纳出翻译的规则, 字符串的第 i 位置:</p> <ul><li>可以<strong>单独作为一位</strong>来翻译.</li> <li>如果第 i - 1 位和第 i 位组成的<strong>数字在 10 到 25 之间</strong>, 可以把这两位<strong>连起来翻译</strong>.</li></ul> <p>它和<strong>打家劫舍</strong>非常相似. <mark><strong>用 f(i) 表示以第 i 位结尾的前缀串翻译的方案数</strong></mark>, 考虑<strong>第 i 位单独翻译</strong>和与<strong>前一位连接起来再翻译</strong>对 f(i) 的贡献.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20200805195936262.png" alt=""></p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">crackNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用str.length()+1</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 只能确定第一位有几种翻译方法</span>
    <span class="token comment">// 真正是从1开始, 初始化0是用来来防止i-2出现-1的情况</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果是两位数的话, 需要在10-25之间才有效, 否则只能翻译一个数字</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;25&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>本题还有一个回溯的解法, 比较好理解.</p> <h5 id="第n个丑数-264-中等-🌸🔑"><a href="#第n个丑数-264-中等-🌸🔑" class="header-anchor">#</a> 第N个丑数(264-中等)🌸🔑</h5> <h6 id="题目描述-15"><a href="#题目描述-15" class="header-anchor">#</a> 题目描述</h6> <p>把只包含因子 <strong>2, 3 和 5</strong> 的数称作<strong>丑数</strong>(Ugly Number). 例如 6, 8 都是丑数, 但 14 不是, 因为它包含因子 7. 习惯上把 <strong>1 当做是第一个丑数</strong>. 求按从小到大的顺序的第 N 个丑数.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> n <span class="token operator">=</span> <span class="token number">10</span>   输出<span class="token operator">:</span> <span class="token number">12</span>
解释<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span> 是由前 <span class="token number">10</span> 个丑数组成的序列<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>https://leetcode.cn/problems/ugly-number-ii/description/</p></blockquote> <h6 id="动态规划-7"><a href="#动态规划-7" class="header-anchor">#</a> 动态规划</h6> <p>根据题意, 每个丑数都可以由<strong>其他较小的丑数通过乘以 2 或 3 或 5 得到</strong>.</p> <p>所以, 可以考虑使用一个优先队列保存所有的丑数, 每次取出最小的那个, 然后乘以 2 , 3 , 5 后放回队列. 然而, 这样做会出现<strong>重复的丑数</strong>. 例如:</p> <ul><li>初始化丑数列表 [1]</li> <li>第一轮: 1 -&gt; 2, 3, 5, 丑数列表变为 [1, 2, 3, 5].</li> <li>第二轮: 2 -&gt; 4, 6, 10, 丑数列表变为 [1, 2, 3, 4, 6, 10].</li> <li>第三轮: 3 -&gt; 6, 9, 15, 出现重复的丑数 6.</li></ul> <p>为了避免重复, 可以用三个指针 a , b, c, 分别表示<strong>下一个丑数是当前指针指向的丑数乘以 2 , 3 , 5</strong>.</p> <p>利用三个指针生成丑数的算法流程:</p> <ul><li><p>初始化丑数列表 res, 首个丑数为 1, 三个指针 a , b, c 都指向首个丑数.</p></li> <li><p>开启循环生成丑数:</p> <ul><li><mark><strong>计算下一个丑数的候选集 res[a] * 2, res[b] * 3, res[c] * 5</strong></mark>.</li> <li>选择丑数候选集中<strong>最小</strong>的那个作为下一个丑数, 填入 res.</li> <li><strong>将被选中的丑数对应的指针向右移动一格</strong>.</li> <li>返回 res 的最后一个元素即可.</li></ul></li></ul> <p>图示如下:</p> <p><img src="/img/image-20241209233134-z1xf7ll.png" alt="image"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">nthUglyNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化三个指针分别记录</span>
    <span class="token keyword">int</span> p2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> p3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 选择三个数中最小的一个</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>p2<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 看当前的数是由哪个位置来的, 增加其对应的位置索引</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> dp<span class="token punctuation">[</span>p2<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> p2<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> p3<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> p5<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="最大正方形-221-中等-🌸💯"><a href="#最大正方形-221-中等-🌸💯" class="header-anchor">#</a> 最大正方形(221-中等)🌸💯</h5> <h6 id="题目描述-16"><a href="#题目描述-16" class="header-anchor">#</a> 题目描述</h6> <p>在一个由 <code>'0'</code>​ 和 <code>'1'</code>​ 组成的二维矩阵内，找到只包含 <code>'1'</code>​ 的最大正方形，并返回其面积。</p> <p><img src="/img/image-20241224232239-vrwlzkj.png" alt="image"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入：matrix <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
输出：<span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/maximal-square/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/maximal-square/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-8"><a href="#动态规划法-8" class="header-anchor">#</a> 动态规划法</h6> <p>这道题要求最大正方形的面积，可以转化为<strong>求最大正方形的边长</strong>。如何去找到这个最大边长呢？</p> <p>​<img src="/img/image-20241228000654-t0ztm83.png" alt="image">​</p> <p>可以发现：要求 matrix[i][j] 的最大边长要用到其左上角 <code>matrix[i - 1][j - 1]</code>​ 的最大边长，这就出现了子问题。并且其上方连续 1 的个数可以等价于 <code>matrix[i - 1][j]</code>​ 的最大边长，左侧连续 1 的个数可以等价于 <code>matrix[i][j - 1]</code>​ 的最大边长。</p> <p><img src="/img/image-20241228000736-wrf7q2t.png" alt="image"></p> <p>因此定义 <strong>dp[i][j] 表示以 (i, j) 为正方形右下角构成的最大正方形的边长</strong>：</p> <ul><li>如果 matrix[i][j] == 0，最大边长肯定为 0；</li> <li>否则，就按上述去看其他三个位置的状态，即状态转移方程为：</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最终的最大正方形边长就为 max(dp[i][j])。</p> <p>边界条件：</p> <ul><li>当 i = j = 0 时，i - 1 和 j - 1 均不存在。矩阵左上角可构成的最大正方形取决于其本身是否为 1；</li> <li>当 i = 0, j != 0，即首行元素，最大正方形边长只可能为1；取决于其本身是否为 1；</li> <li>当 i != 0, j = 0，即首列元素，最大正方形边长只可能为1；取决于其本身是否为 1；</li></ul> <p>代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maximalSquare</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// dp[i][j]表示以(i, j)为正方形右下角构成的最大正方形的边长</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> maxSide <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token comment">// 处理边界条件: 首行元素和首列元素的最大边长取决于单元格本身是否为1</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
        maxSide <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxSide<span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
        maxSide <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxSide<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// 状态转移</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            maxSide <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxSide<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> maxSide <span class="token operator">*</span> maxSide<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h5 id="一组整数对能够构成的最长链-646-中等-🌸"><a href="#一组整数对能够构成的最长链-646-中等-🌸" class="header-anchor">#</a> 一组整数对能够构成的最长链(646-中等)🌸</h5> <h6 id="题目描述-17"><a href="#题目描述-17" class="header-anchor">#</a> 题目描述</h6> <p>对于 (a, b) 和 (c, d) , 如果 <code>b &lt; c</code>​, 则它们可以构成一条链. 给定一个对数集合, 找出能够形成的最长数对链的长度.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>输入：pairs = <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>   输出：<span class="token number">2</span>
解释：最长的数对链是 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> -&gt; <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>。
输入：pairs = <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>     输出：<span class="token number">3</span>
解释：最长的数对链是 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> -&gt; <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span> -&gt; <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/maximum-length-of-pair-chain/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/maximum-length-of-pair-chain/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-8"><a href="#动态规划-8" class="header-anchor">#</a> 动态规划</h6> <p>​<code>dp</code>​ 数组的含义：记录以每个数对结尾的最长数对链的长度。</p> <p>算法步骤：</p> <ol><li><strong>排序</strong>：将数对数组按照每个数对的<strong>第一个元素</strong>进行升序排序。</li> <li><strong>初始化</strong>：创建一个长度为 <code>n</code>​ 的 <code>dp</code>​ 数组，初始值为 1，表示<strong>每个数对自身至少可以形成一个长度为 1 的链</strong>。</li> <li><strong>状态转移</strong>：对于每个数对 <code>pairs[i]</code>​，遍历所有在它<strong>之前的数对</strong> <code>pairs[j]</code>​。如果 <code>pairs[j][1] &lt; pairs[i][0]</code>​，说明 <code>pairs[i]</code>​ 可以接在 <code>pairs[j]</code>​ 后面，更新 <code>dp[i] = max(dp[i], dp[j] + 1)</code>​。</li> <li><strong>结果</strong>：遍历 dp 数组，找到最大值即为最长数对链的长度。</li></ol> <p>代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findLongestChain</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 按照数组第一个元素排序</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token comment">// dp数组表示以第i个元素结尾的最长链的长度</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 全部初始化为1</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">// 从第二个元素开始遍历</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 依次从之前的里面系列里面找看能不能与当前的元素构成链</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当前数对能够与之前的j位置的数对构成链, 则更新dp[i]</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 找到最大的值</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> dp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h5 id="数组中等差递增子区间的个数-413-中等-🌸"><a href="#数组中等差递增子区间的个数-413-中等-🌸" class="header-anchor">#</a> 数组中等差递增子区间的个数(413-中等)🌸</h5> <h6 id="题目描述-18"><a href="#题目描述-18" class="header-anchor">#</a> 题目描述</h6> <p>如果一个数列 <strong>至少有三个元素</strong> ，并且任意两个<strong>相邻元素之差</strong>相同，则称该数列为等差数列。例如，[1,3,5,7,9]、[7,7,7,7] 和 [3,-1,-5,-9] 都是等差数列。</p> <p>给你一个整数数组 nums，返回数组 nums 中所有为等差数组的<strong>子数组</strong>个数。<strong>子数组</strong>是数组中的一个<strong>连续</strong>序列。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>   输出：<span class="token number">3</span>
解释：nums 中有三个子等差数组：<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>、<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> 和 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> 自身。
输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>         输出：<span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/arithmetic-slices/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/arithmetic-slices/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-9"><a href="#动态规划法-9" class="header-anchor">#</a> 动态规划法</h6> <p><strong>dp[i] 表示以 num[i] 为结尾的等差递增子区间的个数</strong>.</p> <p>当 <code>num[i] - num[i - 1] == num[i - 1] - num[i - 2]</code>​, 那么 [num[i - 2], num[i - 1], num[i]] 构成一个等差递增子区间. 而且在<strong>以 num[i - 1] 为结尾的递增子区间的后面再加上一个 num[i], 一样可以构成新的递增子区间</strong>.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>dp[2] = 1
    [0, 1, 2]
dp[3] = dp[2] + 1 = 2
    [0, 1, 2, 3], // [0, 1, 2] 之后加一个 3
    [1, 2, 3]     // 新的递增子区间
dp[4] = dp[3] + 1 = 3
    [0, 1, 2, 3, 4], // [0, 1, 2, 3] 之后加一个 4
    [1, 2, 3, 4],    // [1, 2, 3] 之后加一个 4
    [2, 3, 4]        // 新的递增子区间
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>综上, 在 <code>num[i] - num[i - 1] == num[i - 1] - num[i - 2]</code>​ 时, <code>dp[i] = dp[i - 1] + 1</code>​.</p> <p>因为递增子区间不一定以最后一个元素为结尾, 可以是<strong>任意一个元素结尾</strong>, 因此<strong>需要返回 dp 数组累加的结果</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numberOfArithmeticSlices</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// dp数组表示以第i个元素结尾的等差数列的个数(不需要初始化, 默认为0个)</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 等差数列至少需要三个元素, 所以从第三个元素开始遍历</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 满足等差数列的组成条件, 则更新dp[i]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算所有位置的累加和</span>
    <span class="token keyword">int</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> cnt <span class="token operator">:</span> dp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        total <span class="token operator">=</span> total <span class="token operator">+</span> cnt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>本题与 一组整数对能够构成的最长链 思路是类似的，都是满足一定条件，才去更新 dp 数组。</p> <h4 id="背包问题"><a href="#背包问题" class="header-anchor">#</a> 背包问题</h4> <h5 id="_01背包理论基础🌸"><a href="#_01背包理论基础🌸" class="header-anchor">#</a> 01背包理论基础🌸</h5> <h6 id="引入"><a href="#引入" class="header-anchor">#</a> 引入</h6> <p>背包问题的经典资料当然是: <strong>背包九讲</strong>. 但说实话, 背包九讲对于小白来说确实不太友好, 看起来还是有点费劲的, 而且都是伪代码理解起来也吃力. 对于面试的话, <strong>其实掌握</strong> <mark><strong>01 背包和完全背包</strong></mark>​<strong>就够用了</strong>, 最多可以再来一个多重背包.</p> <p>如果分不清这几种背包, 这里画了一个图, 如下:</p> <p><img src="/img/net-img-20210117171307407-20240310164233-vu13t70.png" alt="416.分割等和子集1"></p> <p>而完全背包又是也是 01 背包稍作变化而来, 即: <strong>完全背包的物品数量是无限的</strong>.</p> <p><mark><strong>所以背包问题的理论基础重中之重是 01 背包, 一定要理解透!</strong></mark></p> <p><strong>leetcode 上没有纯 01 背包的问题, 都是 01 背包应用方面的题目, 也就是需要转化为 01 背包问题. 所以先通过纯 01 背包问题, 把 01 背包原理讲清楚, 后续再讲解题目的时候, 重点就是讲解如何转化为 01 背包问题了.</strong></p> <h6 id="_01背包问题"><a href="#_01背包问题" class="header-anchor">#</a> 01背包问题</h6> <p>有 n 件物品和一个最多能背重量为 w 的背包. 第 i 件物品的重量是 weight[i], 每件物品的价值是 value[i]. <strong>每件物品只能用一次, 求解将哪些物品装入背包里物品价值总和最大</strong>.</p> <p><img src="/img/net-img-20210117175428387-20240310164233-18popm3.jpg" alt="动态规划-背包问题"></p> <p>这是标准的背包问题, 以至于很多同学看了这个自然就会想到背包, 甚至都不知道暴力的解法应该怎么解了. 这样其实是没有<strong>从底向上</strong>去思考, 而是习惯性想到了背包, 那么暴力的解法应该是怎么样的呢?</p> <p><strong>每一件物品其实只有两个状态, 取或者不取, 所以可以使用回溯法搜索出所有的情况</strong>, 那么时间复杂度就是 <strong>o(2^n)</strong> , 这里的 n 表示物品数量. <strong>所以暴力的解法是指数级别的时间复杂度. 进而才需要动态规划的解法来进行优化</strong>!</p> <p>举一个例子: 背包最大重量为 4.</p> <p>物品为:</p> <table><thead><tr><th></th> <th style="text-align:center;">重量</th> <th style="text-align:center;">价值</th></tr></thead> <tbody><tr><td>物品 0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">15</td></tr> <tr><td>物品 1</td> <td style="text-align:center;">3</td> <td style="text-align:center;">20</td></tr> <tr><td>物品 2</td> <td style="text-align:center;">4</td> <td style="text-align:center;">30</td></tr></tbody></table> <p>问背包能背的物品最大价值是多少?</p> <p>以下讲解和图示中出现的数字都是以这个例子为例.</p> <h6 id="二维dp数组01背包"><a href="#二维dp数组01背包" class="header-anchor">#</a> 二维dp数组01背包</h6> <p>依然动规五部曲分析一波.</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>对于背包问题, 有一种写法是使用二维数组, 即 <mark><strong>dp[i][j] 表示从下标为 [0-i] 的物品里任意取, 放进容量为 j 的背包, 价值总和最大是多少</strong></mark>. 只看这个二维数组的定义, 大家一定会有点懵, 看下面这个图:</p> <p><img src="/img/net-img-20210110103003361-20240310164233-6t2zxgg.png" alt="动态规划-背包问题1"></p> <p><strong>要时刻记着这个 dp 数组的含义, 下面的一些步骤都围绕这 dp 数组的含义进行的</strong>, 如果哪里看懵了, 就来回顾一下 i 代表什么, j 又代表什么.</p> <blockquote><p>确定递推公式</p></blockquote> <p>再回顾一下 <strong>dp[i][j] 的含义: 从下标为 [0-i] 的物品里任意取, 放进容量为 j 的背包, 价值总和最大是多少</strong>.</p> <p>那么可以有两个方向推出来 dp[i][j]:</p> <ul><li><mark><strong>不放物品 i</strong></mark>: 由 dp[i - 1][j] 推出, 即背包容量为 j, 里面不放物品 i 的最大价值, <strong>此时 dp[i][j] 就是 dp[i - 1][j]</strong> . 其实就是当物品 i 的重量大于背包 j 的重量时, 物品 i 无法放进背包中, 所以背包内的价值依然和前面的相同.</li> <li><mark><strong>放物品 i</strong></mark>: 由 <strong>dp[i - 1][j - weight[i]]</strong>  推出, dp[i - 1][j - weight[i]] 为背包容量为 j - weight[i] 的时候不放物品 i 的最大价值, 那么 dp[i - 1][j - weight[i]] + value[i] (物品 i 的价值), 就是背包放物品 i 得到的最大价值.</li></ul> <p>所以递归公式: <strong>==dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i])==</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p><strong>关于初始化, 一定要和 dp 数组的定义吻合, 否则到递推公式的时候就会越来越乱</strong>.</p> <p>首先从 dp[i][j] 的定义出发, 如果背包容量 j 为 0 的话, 即 dp[i][0], 无论是选取哪些物品, 背包价值总和一定为 0. 如图:</p> <p><img src="/img/net-img-2021011010304192-20240310164233-370pf2e.png" alt="动态规划-背包问题2"></p> <p>在看其他情况.</p> <p>状态转移方程 dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i]); 可以看出 i 是由 i - 1 推导出来, <strong>那么 i 为 0 的时候就一定要初始化</strong>.</p> <p>dp[0][j] 即: i 为 0, 存放编号 0 的物品的时候, 各个容量的背包所能存放的最大价值. 那么很明显当 j &lt; weight[0] 的时候, dp[0][j] 应该是 0, 因为背包容量比编号 0 的物品重量还小. 当 j &gt;= weight[0] 时, dp[0][j] 应该是 value[0], 因为背包容量放足够放编号 0 物品.</p> <p>代码初始化如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 初始化第一列, 也就是把物品放入重量为0的背包中, 都放不下, 所以第一列初始化为0(其实也可以不写)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 初始化第一行</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagweight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>此时 dp 数组初始化情况如图所示:</p> <p><img src="/img/net-img-20210110103109140-20240310164233-4vd0076.png" alt="动态规划-背包问题7"></p> <p>dp[0][j] 和 dp[i][0] 都已经初始化了, 那么其他下标应该初始化多少呢?</p> <p>其实从递归公式: dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i]); 可以看出 dp[i][j] 是由<strong>左上方数值推导</strong>出来了, 那么其他下标初始为什么数值都可以, 因为都会被覆盖.</p> <p>但只不过一开始就统一把 dp 数组统一初始为 0, 更方便一些.</p> <p>如图:</p> <p><img src="/img/net-img-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%9810-20240310164233-ere1f8b.jpg" alt="动态规划-背包问题10"></p> <p>最后初始化代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 初始化 dp</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagweight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>费了这么大的功夫, 才把如何初始化讲清楚, 相信不少同学平时初始化 dp 数组是凭感觉来的, 但有时候感觉是不靠谱的.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>在如下图中, 可以看出, 有两个遍历的维度: <strong>物品与背包重量</strong></p> <p><img src="/img/net-img-2021011010314055-20240310164233-9kbvn8c.png" alt="动态规划-背包问题3"></p> <p>那么问题来了, <strong>先遍历物品还是先遍历背包重量</strong>呢? 其实都可以!! 但是<strong>先遍历物品更好理解</strong>.</p> <p>那么先给出先遍历物品, 然后遍历背包重量的代码.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// weight 数组的大小 就是物品个数</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历物品</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagweight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历背包容量</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>先遍历背包, 再遍历物品, 也是可以的! (注意这里使用的二维 dp 数组) 例如这样:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// weight 数组的大小 就是物品个数</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagweight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历背包容量</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历物品</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>为什么也是可以的呢? <strong>要理解递归的本质和递推的方向</strong>.</p> <p>​<code>dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i]);</code>​ 递归公式中可以看出 dp[i][j] 是靠 dp[i - 1][j] 和 dp[i - 1][j - weight[i]] 推导出来的.</p> <p><strong>dp[i - 1][j] 和 dp[i - 1][j - weight[i]] 都在 dp[i][j] 的左上角方向(包括正上方向)</strong> , 那么先遍历物品, 再遍历背包的过程如图所示:</p> <p><img src="/img/net-img-202101101032124-20240310164233-c9r7a9s.png" alt="动态规划-背包问题5"></p> <p>再来看看先遍历背包, 再遍历物品, 如图:</p> <p><img src="/img/net-img-20210110103244701-20240310164233-mf0fu88.png" alt="动态规划-背包问题6"></p> <p><strong>可以看出, 虽然两个 for 循环遍历的次序不同, 但是 dp[i][j] 所需要的数据就是左上角, 根本不影响 dp[i][j] 公式的推导!</strong></p> <p>但先遍历物品再遍历背包这个顺序更好理解.</p> <p><strong>其实背包问题里, 两个 for 循环的先后循序是非常有讲究的, 理解遍历顺序其实比理解推导公式难多了</strong>.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>来看一下对应的 dp 数组的数值, 如图:</p> <p><img src="/img/net-img-20210118163425129-20240310164233-hh10m61.jpg" alt="动态规划-背包问题4"></p> <p>最终结果就是 <strong>dp[2][4]</strong> . 建议自己在纸上推导一遍, 看看 dp 数组里每一个数值是不是这样的. <strong>做动态规划的题目, 最好的过程就是自己在纸上举一个例子把对应的 dp 数组的数值推导一下, 然后在动手写代码!</strong></p> <p>很多同学做 dp 题目, 遇到各种问题, 然后凭感觉东改改西改改, 怎么改都不对, 或者稀里糊涂就改过了. 主要就是自己<strong>没有动手推导一下 dp 数组的演变过程</strong>, 如果推导明白了, 代码写出来就算有问题, 只要把 dp 数组打印出来, 对比一下和自己推导的有什么差异, 很快就可以发现问题了.</p> <p>注意这个在力扣上没有对应的题目.</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bagSize <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token function">testWeightBagProblem</span><span class="token punctuation">(</span>weight<span class="token punctuation">,</span> value<span class="token punctuation">,</span> bagSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 动态规划获得结果
 *
 * @param weight  物品的重量
 * @param value   物品的价值
 * @param bagSize 背包的容量
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testWeightBagProblem</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">,</span> <span class="token keyword">int</span> bagSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建 dp 数组</span>
    <span class="token keyword">int</span> goods <span class="token operator">=</span> weight<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token comment">// 获取物品的数量</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>goods<span class="token punctuation">]</span><span class="token punctuation">[</span>bagSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化 dp 数组(创建数组后, 其中默认的值就是0) 这里只需要初始化第一行</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 填充 dp 数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">/**
                 * 当前背包的容量都没有当前物品 i 大的时候, 是不放物品 i 的
                 * 那么前 i-1个物品能放下的最大价值就是当前情况的最大价值
                 */</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">/**
                 * 当前背包的容量可以放下物品 i
                 * 那么此时分两种情况:
                 *    1, 不放物品 i
                 *    2, 放物品 i
                 * 比较这两种情况下, 哪种背包中物品的最大价值最大
                 */</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 打印 dp 数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> goods<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>讲了这么多才刚刚把二维 dp 的 01 背包讲完, <strong>这里大家其实可以发现最简单的是推导公式了, 推导公式估计看一遍就记下来了, 但难就难在如何初始化和遍历顺序上</strong>.</p> <h6 id="一维dp数组-滚动数组"><a href="#一维dp数组-滚动数组" class="header-anchor">#</a> 一维dp数组(滚动数组)</h6> <p>本节来说一说滚动数组, 其实在前面的题目中已经用到过滚动数组了, 就是把二维 dp 降为一维 dp. 这里通过 01 背包, 来彻底讲一讲滚动数组!</p> <p>接下来还是用如下这个例子来进行讲解. 背包最大重量为 4.</p> <p>物品为:</p> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;">重量</th> <th style="text-align:center;">价值</th></tr></thead> <tbody><tr><td style="text-align:center;">物品0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">15</td></tr> <tr><td style="text-align:center;">物品1</td> <td style="text-align:center;">3</td> <td style="text-align:center;">20</td></tr> <tr><td style="text-align:center;">物品2</td> <td style="text-align:center;">4</td> <td style="text-align:center;">30</td></tr></tbody></table> <p>问背包能背的物品最大价值是多少?</p> <p>对于背包问题其实状态都是可以压缩的.</p> <p>在使用二维数组的时候, 递推公式: <strong>dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i])</strong> ;</p> <p><strong>其实可以发现如果把 dp[i - 1] 那一层拷贝到 dp[i] 上, 表达式完全可以是: dp[i][j] = max(dp[i][j], dp[i][j - weight[i]] + value[i]); 因为只用到了 i 和 i - 1 相关的数据, 之前的数据都用不到了</strong>.</p> <p><strong>与其把 dp[i - 1] 这一层拷贝到 dp[i] 上, 不如只用一个一维数组了</strong>, 只用 dp[j].</p> <p>这就是滚动数组的由来, 需要满足的条件是<strong>上一层可以重复利用, 直接拷贝到当前层</strong>. 读到这里估计大家都忘了 dp[i][j] 里的 i 和 j 表达的是什么了, i 是物品, j 是背包容量.</p> <p><strong>dp[i][j] 表示从下标为 [0 - i] 的物品里任意取, 放进容量为 j 的背包, 价值总和最大是多少</strong>. 一定要时刻记住这里 i 和 j 的含义, 要不然很容易看懵了.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组的定义</p></blockquote> <p>在一维 dp 数组中, dp[j] 表示: <mark><strong>容量为 j 的背包, 所背的物品价值可以最大为 dp[j]</strong></mark> .</p> <blockquote><p>一维dp数组的递推公式</p></blockquote> <p>dp[j] 为容量为 j 的背包所背的最大价值, 那么如何推导 dp[j] 呢?</p> <p>dp[j] 可以通过 <strong>dp[j - weight[i]]</strong>  推导出来, 这里 dp[j - weight[i]] 表示容量为 j - weight[i] 的背包所背的最大价值.</p> <p><strong>dp[j - weight[i]] + value[i]</strong>  表示 容量为 j - 物品 i 重量的背包加上物品 i 的价值. (也就是容量为 j 的背包, 放入物品 i 了之后的价值即: dp[j]).</p> <p>此时 dp[j] 有两个选择, 一个是<strong>取自己 dp[j],</strong>  相当于二维 dp 数组中的 dp[i - 1][j], 即<strong>不放物品 i</strong>, 一个是取 dp[j - weight[i]] + value[i], 即<strong>放物品 i</strong>, 指定是取最大的, 毕竟是求最大价值.</p> <p>所以递归公式为:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看出相对于二维 dp 数组的写法, 就是把 dp[i][j] 中 i 的维度去掉了.</p> <blockquote><p>一维dp数组如何初始化</p></blockquote> <p><strong>关于初始化, 一定要和 dp 数组的定义吻合, 否则到递推公式的时候就会越来越乱</strong>.</p> <p>dp[j] 表示: 容量为 j 的背包, 所背的物品价值可以最大为 dp[j], 那么 dp[0] 就应该是 0, 因为背包容量为 0 所背的物品的最大价值就是 0.</p> <p>那么 dp 数组除了下标 0 的位置, 初始为 0, 其他下标应该初始化多少呢? 看一下递归公式: <strong>dp[j] = max(dp[j], dp[j - weight[i]] + value[i])</strong> ;</p> <p>dp 数组在推导的时候一定是<strong>取价值最大的数</strong>, 如果题目给的价值都是正整数那么非 0 下标都初始化为 0 就可以了.</p> <p><strong>这样才能让 dp 数组在递归公式的过程中取的最大的价值, 而不是被初始值覆盖了</strong>.</p> <p>那么假设物品价值都是大于 0 的, 所以 dp 数组初始化的时候, 都初始为 0 就可以了.</p> <blockquote><p>一维dp数组遍历顺序</p></blockquote> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 遍历物品【物品0-重量1-价值15】【物品1-重量3-价值20】【物品3-重量4-价值30】</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历背包容量(从大到小) bagWeight = 4</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> bagWeight<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>这里和二维 dp 的写法中遍历背包的顺序是不一样的! 二维 dp 遍历的时候, 背包容量是从小到大, 而一维 dp 遍历的时候, 背包是从大到小.</strong></p> <p>为什么呢? <strong>倒序遍历是为了保证物品 i 只被放入一次!</strong>  但如果一旦正序遍历了, 那么物品 0 就会被重复加入多次!</p> <p>举一个例子: 物品 0 的重量 weight[0] = 1, 价值 value[0] = 15.</p> <p>如果正序遍历:</p> <ul><li>dp[1] = dp[1 - weight[0]] + value[0] = 15</li> <li>dp[2] = dp[2 - weight[0]] + value[0] = 30</li></ul> <p>此时 dp[2] 就已经是 30 了, 意味着物品 0, 被放入了两次, 所以不能正序遍历.</p> <p>为什么倒序遍历, 就可以保证物品只放入一次呢?</p> <p>倒序就是先算 dp[2]:</p> <ul><li>dp[2] = dp[2 - weight[0]] + value[0] = 15  (dp 数组已经都初始化为0)</li> <li>dp[1] = dp[1 - weight[0]] + value[0] = 15</li></ul> <p>所以<strong>从后往前循环, 每次取得状态不会和之前取得状态重合, 这样每种物品就只取一次</strong>了.</p> <p><strong>那么问题又来了, 为什么二维 dp 数组遍历的时候不用倒序呢?</strong>  因为对于二维 dp, dp[i][j] 都是通过上一层即 dp[i - 1][j] 计算而来, 本层的 dp[i][j] 并不会被覆盖!</p> <p><strong>再来看看两个嵌套 for 循环的顺序, 代码中是先遍历物品嵌套遍历背包容量, 那可不可以先遍历背包容量嵌套遍历物品呢?</strong></p> <p>不可以!</p> <p>因为一维 dp 的写法, 背包容量一定是要倒序遍历(原因上面已经讲了), 如果遍历背包容量放在上一层, 那么每个 dp[j] 就只会放入一个物品, 即: 背包里只放入了一个物品.</p> <p>倒序遍历的原因是, <strong>本质上还是一个对二维数组的遍历,</strong> <mark><strong>并且右下角的值依赖上一层左上角的值, 因此需要保证左边的值仍然是上一层的, 从右向左覆盖</strong></mark>.</p> <p><strong>所以一维 dp 数组的背包在遍历顺序上和二维其实是有很大差异的!</strong>  这一点大家一定要注意.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>一维 dp, 分别用物品 0, 物品 1, 物品 2 来遍历背包, 最终得到结果如下:</p> <p><img src="/img/net-img-20210110103614769-20240311204003-663bd7d.png" alt="动态规划-背包问题9"></p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bagWight <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token function">testWeightBagProblem</span><span class="token punctuation">(</span>weight<span class="token punctuation">,</span> value<span class="token punctuation">,</span> bagWight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testWeightBagProblem</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">,</span> <span class="token keyword">int</span> bagWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> wLen <span class="token operator">=</span> weight<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// 定义 dp 数组: dp[j]表示背包容量为 j 时, 能获得的最大价值</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>bagWeight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历顺序: 先遍历物品, 再遍历背包容量</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> wLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> bagWeight<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 打印 dp 数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>可以看出, 一维 dp 的 01 背包, 要比二维简洁的多! 初始化和遍历顺序相对简单了. <strong>所以使用一维 dp 数组的写法, 比较直观简洁, 而且空间复杂度还降了一个数量级!</strong></p> <h5 id="分割等和子集-416-中等-🌸💯"><a href="#分割等和子集-416-中等-🌸💯" class="header-anchor">#</a> 分割等和子集(416-中等)🌸💯</h5> <h6 id="题目描述-19"><a href="#题目描述-19" class="header-anchor">#</a> 题目描述</h6> <p>给定一个只包含正整数的非空数组. <strong>是否可以将这个数组分割成两个子集, 使得两个子集的元素和相等</strong>.</p> <p>注意: 每个数组中的元素不会超过 100, 数组的大小不会超过 200.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token boolean">true</span>   解释<span class="token operator">:</span> 数组可以分割成 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> 和 <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">.</span> 
输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>    输出<span class="token operator">:</span> <span class="token boolean">false</span>  解释<span class="token operator">:</span> 数组不能分割成两个元素和相等的子集<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/partition-equal-subset-sum/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/partition-equal-subset-sum/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-背包"><a href="#动态规划-背包" class="header-anchor">#</a> 动态规划(背包)</h6> <p>这道题目初步看, 和如下两题<strong>几乎是一样的</strong>, 大家可以用回溯法, 解决如下两题:</p> <ul><li>698.划分为 k 个相等的子集</li> <li>473.火柴拼正方形</li></ul> <p>这道题目是要找是否可以将这个数组分割成两个子集, 使得两个子集的元素和相等. 那么<strong>只要找到集合里能够出现 sum/2 的子集总和, 就算是可以分割成两个相同元素和子集</strong>了. 本题是可以用<strong>回溯</strong>暴力搜索出所有答案的, 但最后超时了, 也不想再优化了, 放弃回溯, 直接上 01 背包.</p> <p>背包问题有多种背包方式, 常见的有: 01 背包, 完全背包, 多重背包, 分组背包和混合背包等等. 要注意题目描述中商品是不是可以重复放入. <strong>即一个商品如果可以重复多次放入是完全背包, 而只能放入一次是 01 背包, 写法还是不一样的. 本题中要使用的是 01 背包, 因为元素只能用一次</strong>.</p> <p>回归主题: 首先, 本题要求集合里能否出现总和为 sum/2 的子集. 那么来一一对应一下本题, 看看背包问题如何来解决.</p> <p><strong>只有确定了如下四点, 才能把 01 背包问题套到本题上来.</strong></p> <ul><li><strong>背包的体积为 sum / 2</strong>.</li> <li>背包要放入的商品(集合里的元素)重量为元素的数值, 价值也为元素的数值.</li> <li><strong>背包如果正好装满</strong>, 说明找到了总和为 sum / 2 的子集.</li> <li>背包中每一个元素是不可重复放入.</li></ul> <p>以上分析完就可以套用 01 背包, 来解决这个问题了.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>01 背包中, dp[j] 表示: <strong>容量为 j 的背包, 所背的物品价值最大可以为 dp[j]</strong> . 本题中每一个元素的数值既是重量, 也是价值.</p> <p><strong>套到本题, dp[j] 表示背包总容量(所能装的总重量)是 j, 放进物品后, 背的最大重量为 dp[j]</strong> . 那么如果背包容量为 target, dp[target] 就是装满背包之后的重量, 所以当 <strong>dp[target] == target</strong> 的时候, 背包就装满了.</p> <p>那还有装不满的时候? 拿输入数组 [1, 5, 11, 5], 举例 dp[7] 只能等于 6, 因为只能放进 1 和 5. 而 dp[6] 就可以等于 6 了, 放进 1 和 5, 那么 dp[6] == 6, 说明背包装满了.</p> <blockquote><p>确定递推公式</p></blockquote> <p>01 背包的递推公式为: dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);</p> <p>本题相当于背包里放入数值, <strong>那么物品 i 的重量是 nums[i], 其价值也是 nums[i]</strong> . 所以递推公式: <strong>dp[j] = max(dp[j], dp[j - nums[i]] + nums[i])</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>在 01 背包, 一维 dp 如何初始化, 已经讲过, 从 dp[j] 的定义来看, 首先 dp[0] 一定是 0. 如果题目给的价值都是正整数那么非 0 下标都初始化为 0 就可以了, 如果题目给的价值有负数, 那么非 0 下标就要初始化为负无穷.</p> <p><strong>这样才能让 dp 数组在递推的过程中取得最大的价值, 而不是被初始值覆盖了</strong>.</p> <p>本题题目中只包含正整数的非空数组, 所以非 0 下标的元素初始化为 0 就可以了.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>前面背包中已经说明: <strong>如果使用一维 dp 数组, 物品遍历的 for 循环放在外层, 遍历背包的 for 循环放在内层, 且内层 for 循环倒序遍历</strong>!</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 开始 01背包</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> target<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 每一个元素一定是不可重复放入, 所以从大到小遍历</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>dp[j] 的数值一定是小于等于 j 的.</p> <p><strong>如果 dp[j] == j 说明, 集合中的子集总和正好可以凑成总和 j, 理解这一点很重要.</strong></p> <p>用例 1, 输入 [1,5,11,5] 为例, 如图:</p> <p><img src="/img/net-img-20210110104240545-20240311212802-4eugseg.png" alt="416.分割等和子集2"></p> <p>最后 dp[11] == 11, 说明可以将这个数组分割成两个子集, 使得两个子集的元素和相等.</p> <p>综上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">canPartition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// 所有元素求和</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 总和为奇数, 不能平分</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> target <span class="token operator">=</span> sum <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> target<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 物品 i 的重量是 nums[i], 其价值也是 nums[i]</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 剪枝一下, 每一次完成内层的 for-loop, 立即检查是否 dp[target] &lt;mark&gt; target</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ul><li>时间复杂度: O(n^2)</li> <li>空间复杂度: O(n), 虽然 dp 数组大小为一个常数, 但是大常数</li></ul> <p>这道题目就是一道 01 背包应用类的题目, 需要拆解题目, 然后套入 01 背包的场景. 01 背包相对于本题, 主要要理解, <strong>题目中物品是 nums[i], 重量是 nums[i], 价值也是 nums[i], 背包体积是 sum/2</strong>.</p> <h5 id="最后一块石头的重量ii-1049-中等-🌸"><a href="#最后一块石头的重量ii-1049-中等-🌸" class="header-anchor">#</a> 最后一块石头的重量II(1049-中等)🌸</h5> <h6 id="题目描述-20"><a href="#题目描述-20" class="header-anchor">#</a> 题目描述</h6> <p>有一堆石头, 每块石头的重量都是正整数. 每一回合, 从中选出任意两块石头, 然后将它们一起粉碎. 假设石头的重量分别为 x 和 y, 且 x &lt;= y. 那么粉碎的可能结果如下:</p> <ul><li>如果 x == y, 那么两块石头都会被完全粉碎;</li> <li>如果 x != y, 那么重量为 x 的石头将会完全粉碎, 而重量为 y 的石头新重量为 y-x.</li></ul> <p>最后最多只会剩下一块石头. <strong>返回此石头最小的可能重量</strong>. 如果没有石头剩下, 就返回 0.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> stones <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>     输出<span class="token operator">:</span> <span class="token number">1</span>
解释<span class="token operator">:</span> 组合 <span class="token number">2</span> 和 <span class="token number">4</span><span class="token punctuation">,</span> 得到 <span class="token number">2</span><span class="token punctuation">,</span> 所以数组转化为 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
组合 <span class="token number">7</span> 和 <span class="token number">8</span><span class="token punctuation">,</span> 得到 <span class="token number">1</span><span class="token punctuation">,</span> 所以数组转化为 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
组合 <span class="token number">2</span> 和 <span class="token number">1</span><span class="token punctuation">,</span> 得到 <span class="token number">1</span><span class="token punctuation">,</span> 所以数组转化为 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
组合 <span class="token number">1</span> 和 <span class="token number">1</span><span class="token punctuation">,</span> 得到 <span class="token number">0</span><span class="token punctuation">,</span> 所以数组转化为 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 这就是最优值<span class="token punctuation">.</span> 
输入<span class="token operator">:</span> stones <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/last-stone-weight-ii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/last-stone-weight-ii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-背包-2"><a href="#动态规划-背包-2" class="header-anchor">#</a> 动态规划(背包)</h6> <p>本题其实就是<mark><strong>尽量让石头分成重量相同的两堆, 相撞之后剩下的石头最小, 这样就化解成 01 背包问题了</strong></mark>. 是不是感觉和 <code>416. 分割等和子集</code>​ 非常像了.</p> <p>本题<mark><strong>物品的重量为 stones[i], 物品的价值也为 stones[i]</strong></mark> . 对应着 01 背包里的物品重量 weight[i] 和物品价值 value[i].</p> <p>接下来进行动规五步曲:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[j] 表示容量(这里说容量更形象, 其实就是重量)为 j 的背包, 最多可以背最大重量为 dp[j]</strong> .</p> <p>可以回忆一下 01 背包中, dp[j] 的含义, 容量为 j 的背包, 最多可以装的价值为 dp[j]. 相对于 01 背包, 本题中石头的重量是 stones[i], 石头的价值也是 stones[i], 可以 &quot;<strong>最多可以装的价值为 dp[j]&quot; == &quot;最多可以背的重量为 dp[j]</strong> &quot;.</p> <blockquote><p>确定递推公式</p></blockquote> <p>01 背包的递推公式为: <code>dp[j] = max(dp[j], dp[j - weight[i]] + value[i])</code>​;</p> <p>本题则是: <strong>dp[j] = max(dp[j], dp[j - stones[i]] + stones[i]);</strong></p> <p>一些同学可能看到这 dp[j - stones[i]] + stones[i] 中又有 <code>- stones[i]</code>​ 又有 <code>+ stones[i]</code>​, 看着有点晕乎. 这点可以再去看 dp[j] 的含义.</p> <blockquote><p>dp 数组如何初始化</p></blockquote> <p>既然 dp[j] 中的 j 表示<strong>容量</strong>, 那么最大容量(重量)是多少呢, 就是<strong>所有石头的重量和</strong>. 因为提示中给出 1 &lt;= stones.length &lt;= 30, 1 &lt;= stones[i] &lt;= 1000, 所以最大重量就是 30 * 1000. 而要求的 target 其实只是最大重量的一半, 所以 dp 数组开到 15000 大小就可以了.</p> <p>当然也可以把石头遍历一遍, <strong>计算出石头总重量然后除 2, 得到 dp 数组的大小</strong>.</p> <p>这里就直接用 15000 了.</p> <p>接下来就是如何初始化 dp[j] 呢, 因为重量都不会是负数, <strong>所以 dp[j] 都初始化为 0 就可以了</strong>, 这样在递归公式 dp[j] = max(dp[j], dp[j - stones[i]] + stones[i]); 中 dp[j] 才不会初始值所覆盖.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>前面的 01 背包中已经说明: <strong>如果使用一维 dp 数组, 物品遍历的 for 循环放在外层, 遍历背包的 for 循环放在内层, 且内层 for 循环倒序遍历</strong>!</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stones<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> target<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历背包</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>举例, 输入: [2,4,1,1], 此时 target = (2 + 4 + 1 + 1) / 2 = 4 , dp 数组状态图如下:</p> <p><img src="/img/net-img-20210121115805904-20240311221009-bkb7q35.jpg" alt="1049.最后一块石头的重量 II"></p> <p>最后 dp[target] 里是容量为 target 的背包所能背的<strong>最大重量</strong>. 那么分成两堆石头, 一堆石头的总重量是 dp[target], 另一堆就是 <strong>sum - dp[target]</strong> .</p> <p><strong>在计算 target 的时候, target = sum / 2 因为是向下取整, 所以 sum - dp[target] 一定是大于等于 dp[target] 的</strong>.</p> <p>那么相撞之后剩下的最小石头重量就是  <strong>(sum - dp[target]) - dp[target]</strong> .</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastStoneWeightII</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> stones<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> stones<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 计算背包重量</span>
    <span class="token keyword">int</span> target <span class="token operator">=</span> sum <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  
    <span class="token comment">// 初始化 dp 数组</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stones<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 采用倒序</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> target<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 两种情况, 要么放, 要么不放, 取最大值</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> sum <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>时间复杂度: O(m × n) , m 是石头总重量(准确的说是总重量的一半), n 为石头块数</li> <li>空间复杂度: O(m)</li></ul> <h5 id="目标和-494-中等-🌸"><a href="#目标和-494-中等-🌸" class="header-anchor">#</a> 目标和(494-中等)🌸</h5> <h6 id="题目描述-21"><a href="#题目描述-21" class="header-anchor">#</a> 题目描述</h6> <p>给定一个非负整数数组, a1, a2, ..., an, 和一个目标数 S. 现在有两个符号 + 和 -. 对于数组中的任意一个整数, <strong>都可以从 + 或 - 中选择一个符号添加在前面</strong>. 返回可以使最终数组和为目标数 S 的所有<strong>添加符号的方法数</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token number">3</span>  输出<span class="token operator">:</span> <span class="token number">5</span>   解释<span class="token operator">:</span> 一共有 <span class="token number">5</span> 种方法让最终目标和为 <span class="token number">3.</span> 
<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/target-sum/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/target-sum/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="回溯算法"><a href="#回溯算法" class="header-anchor">#</a> 回溯算法</h6> <p>这道题目与 <code>回溯算法: 39. 组合总和</code>​ 的问题非常类似. 此时可以套组合总和的回溯法代码, 几乎不用改动.</p> <p>不过如果用回溯会超时.</p> <h6 id="动态规划-背包-3"><a href="#动态规划-背包-3" class="header-anchor">#</a> 动态规划(背包)</h6> <p>这道题目咋眼一看和动态规划背包啥的也没啥关系. 如何转化为 01 背包问题呢.</p> <p>假设加法的总和为 x, 那么减法对应的总和就是 sum - x. 所以要求的是 <strong>x - (sum - x) = target</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>x <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">+</span> sum<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>此时问题就转化为 装满容量为 x 的背包, 有几种方法</strong>. 这里的 x, 就是 bagSize, 也就是后面要求的背包容量.</p> <p>大家看到 (target + sum) / 2 应该担心计算的过程中向下取整有没有影响. 这么担心就对了, 例如 sum 是 5, S 是 2 的话其实就是无解的, 所以:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>target <span class="token operator">+</span> sum<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 此时没有方案</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同时如果 target 的绝对值已经大于 sum, 那么也是没有方案的.</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>target <span class="token punctuation">)</span> <span class="token operator">&gt;</span> sum<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 此时没有方案</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>再回归到 01 背包问题, 为什么是 01 背包呢? 因为每个物品(题目中的 1)只用一次!</p> <p>这次和之前遇到的背包问题不一样了, <strong>之前都是求容量为 j 的背包, 最多能装多少</strong>. 本题则是装满有几种方法. 其实这就是一个<strong>组合问题</strong>了.</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>dp[j] 表示: <strong>填满 j (包括 j)这么大容积的包, 有 dp[j] 种方法</strong>.</p> <p>其实也可以使用二维 dp 数组来求解本题, dp[i][j]: 使用下标为 [0, i] 的 nums[i] 能够凑满 j(包括 j)这么大容量的包, 有 dp[i][j] 种方法.</p> <p>下面使用一维数组进行讲解.</p> <blockquote><p>确定递推公式</p></blockquote> <p>有哪些来源可以推出 dp[j] 呢? 只要<strong>搞到 nums[i], 凑成 dp[j] 就有 dp[j - nums[i]]</strong>  种方法.</p> <p>例如: dp[j], j 为 5,</p> <ul><li>已经有一个 1(nums[i]) 的话, 有 dp[4] 种方法 凑成 容量为 5 的背包.</li> <li>已经有一个 2(nums[i]) 的话, 有 dp[3] 种方法 凑成 容量为 5 的背包.</li> <li>已经有一个 3(nums[i]) 的话, 有 dp[2] 中方法 凑成 容量为 5 的背包</li> <li>已经有一个 4(nums[i]) 的话, 有 dp[1] 中方法 凑成 容量为 5 的背包</li> <li>已经有一个 5(nums[i]) 的话, 有 dp[0] 中方法 凑成 容量为 5 的背包</li></ul> <p>那么凑整 dp[5] 有多少方法呢, 也就是<strong>把所有的 dp[j - nums[i]] 累加</strong>起来.</p> <p>所以求组合类问题的公式, 都是类似这种:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dp[j] += dp[j - nums[i]]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>这个公式在后面在讲解背包解决排列组合问题的时候还会用到</strong>!</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式可以看出, 在初始化的时候 <strong>dp[0] 一定要初始化为 1</strong>, 因为 dp[0] 是在公式中一切递推结果的起源, 如果 dp[0] 是 0 的话, 递推结果将都是 0.</p> <p>这里有人可能认为从 dp 数组定义来说 dp[0] 应该是 0, 也有人认为 dp[0] 应该是 1. 其实不要硬去解释它的含义, 咱就把 dp[0] 的情况带入本题看看应该等于多少.</p> <p>如果<strong>数组 [0], target = 0, 那么 bagSize =  (target + sum) / 2 = 0. dp[0] 也应该是 1, 也就是说给数组里的元素 0 前面无论放加法还是减法, 都是 1 种方法</strong>. 所以本题应该初始化 dp[0] 为 1.</p> <p>可能有同学想了, 那如果是数组 [0,0,0,0,0] target = 0 呢.</p> <p>其实此时最终的 dp[0] = 32, 也就是这五个零子集的所有组合情况, 但此 dp[0] 非彼 dp[0], dp[0] 能算出32, 其基础是因为 dp[0] = 1 累加起来的.</p> <p>dp[j] 其他下标对应的数值也应该初始化为 0, 从递推公式也可以看出, dp[j] 要保证是 0 的初始值, 才能正确的由 dp[j - nums[i]] 推导出来.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>前面讲过对于 01 背包问题一维 dp 的遍历, <strong>nums 放在外循环, target 在内循环, 且内循环倒序</strong>.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>输入: nums: [1, 1, 1, 1, 1], S: 3  bagSize = (S + sum) / 2 = (3 + 5) / 2 = 4</p> <p>dp 数组状态变化如下:</p> <p><img src="/img/net-img-20210125120743274-20240311234756-5mpib94.jpg" alt=""></p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findTargetSumWays</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果 target 的绝对值大于 sum, 那么是没有方案的</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">&gt;</span> sum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果(target+sum)除以2的余数不为0, 也是没有方案的</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>target <span class="token operator">+</span> sum<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> bagSize <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">+</span> sum<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>bagSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 遍历背包大小(由大到小)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> bagSize<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>bagSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>时间复杂度: O(n × m), n 为正数个数, m 为背包容量</li> <li>空间复杂度: O(m), m 为背包容量</li></ul> <p>本题还是有点难度, 也可以记住, 在<strong>求装满背包有几种方法的情况下, 递推公式一般为</strong>:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>易于理解的二维数组版本:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findTargetSumWays</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 01背包应用之“有多少种不同的填满背包最大容量的方法“</span>
        <span class="token comment">// 易于理解的二维数组解法及详细注释</span>

        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 注意 nums[i] &gt;= 0的题目条件, 意味着 sum 也是所有 nums[i]的绝对值之和</span>
        <span class="token comment">// 这里保证了 sum + target 一定是大于等于零的, 也就是 left 大于等于零(毕竟我们定义 left 大于 right)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&lt;</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 利用二元一次方程组将 left 用 target 和 sum 表示出来(替换掉 right 组合), 详见代码随想录对此题的分析</span>
        <span class="token comment">// 如果所求的 left 数组和为小数, 则作为整数数组的 nums 里的任何元素自然是没有办法凑出这个小数的</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sum <span class="token operator">+</span> target<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token punctuation">(</span>sum <span class="token operator">+</span> target<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  
        <span class="token comment">// dp[i][j]: 遍历到数组第 i 个数时,  left 为 j 时的能装满背包的方法总数</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 初始化最上行(dp[0][j]), 当 nums[0] == j 时(注意 nums[0]和 j 都一定是大于等于零的, 因此不需要判断等于-j 时的情况), 有唯一一种取法可取到 j, dp[0][j]此时等于1</span>
        <span class="token comment">// 其他情况 dp[0][j] = 0</span>
        <span class="token comment">// java 整数数组默认初始值为0</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 初始化最左列(dp[i][0])</span>
        <span class="token comment">// 当从 nums 数组的索引0到 i 的部分有 n 个0时(n &gt; 0), 每个0可以取+/-, 因此有2的 n 次方中可以取到 j = 0的方案</span>
        <span class="token comment">// n = 0说明当前遍历到的数组部分没有0全为正数, 因此只有一种方案可以取到 j = 0(就是所有数都不取)</span>
        <span class="token keyword">int</span> numZeros <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                numZeros<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> numZeros<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token comment">// 递推公式分析: </span>
        <span class="token comment">// 当 nums[i] &gt; j 时, 这时候 nums[i]一定不能取, 所以是 dp[i - 1][j]种方案数</span>
        <span class="token comment">// nums[i] &lt;= j 时, num[i]可取可不取, 因此方案数是 dp[i - 1][j] + dp[i - 1][j - nums[i]]</span>
        <span class="token comment">// 由递推公式可知, 先遍历 i 或 j 都可</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> left<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

	    <span class="token comment">// 打印 dp 数组</span>
        <span class="token comment">// for(int i = 0; i &lt; nums.length; i++) {</span>
        <span class="token comment">//     for(int j = 0; j &lt;= left; j++) {</span>
        <span class="token comment">//         System.out.print(dp[i][j] + &quot; &quot;);</span>
        <span class="token comment">//     }</span>
        <span class="token comment">//     System.out.println(&quot;&quot;);</span>
        <span class="token comment">// }</span>

        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h5 id="一和零-474-中等-🌸"><a href="#一和零-474-中等-🌸" class="header-anchor">#</a> 一和零(474-中等)🌸</h5> <h6 id="题目描述-22"><a href="#题目描述-22" class="header-anchor">#</a> 题目描述</h6> <p>给你一个二进制字符串数组 strs 和两个整数 m 和 n. 请找出并返回 strs 的<strong>最大子集的大小</strong>, 该子集中 最多 有 m 个 0 和 n 个 1. 如果 x 的所有元素也是 y 的元素, 集合 x 是集合 y 的 子集.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> strs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;111001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">3</span>  输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 最多有 <span class="token number">5</span> 个 <span class="token number">0</span> 和 <span class="token number">3</span> 个 <span class="token number">1</span> 的最大子集是 <span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">,</span> 因此答案是 <span class="token number">4</span> <span class="token punctuation">.</span> 
其他满足题意但较小的子集包括 <span class="token punctuation">{</span><span class="token string">&quot;0001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span> 和 <span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">.</span> <span class="token punctuation">{</span><span class="token string">&quot;111001&quot;</span><span class="token punctuation">}</span> 不满足题意<span class="token punctuation">,</span> 因为它含 <span class="token number">4</span> 个 <span class="token number">1</span><span class="token punctuation">,</span> 
大于 n 的值 <span class="token number">3.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/ones-and-zeroes/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/ones-and-zeroes/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-背包-4"><a href="#动态规划-背包-4" class="header-anchor">#</a> 动态规划(背包)</h6> <p>来说题, 本题不少同学会认为是多重背包, 一些题解也是这么写的. 其实本题并不是多重背包, 再来看一下这个图, 捋清几种背包的关系.</p> <p><img src="/img/net-img-20210117171307407-20230310132423205-20240313202419-h71qopp.png" alt="416.分割等和子集1"></p> <p>多重背包是<strong>每个物品, 数量不同</strong>的情况. <strong>本题中 strs 数组里的元素就是物品, 每个物品都是一个! 而 m 和 n 相当于是一个背包, 两个维度的背包.</strong></p> <p>理解成多重背包的同学主要是把 m 和 n 混淆为物品了, 感觉这是不同数量的物品, 所以以为是多重背包. 但本题其实是 01 背包问题! <strong>只不过这个背包有两个维度, 一个是 m 一个是 n, 而不同长度的字符串就是不同大小的待装物品</strong>.</p> <p>开始动规五部曲:</p> <blockquote><p>确定 dp 数组(dp table)以及下标的含义</p></blockquote> <p><strong>dp[i][j]: 最多有 i 个 0 和 j 个 1 的 strs 的最大子集的大小为 dp[i][j]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>dp[i][j] 可以由前一个 strs 里的字符串推导出来, strs 里的字符串有 zeroNum 个 0, oneNum 个 1.</p> <p>dp[i][j] 就可以是 <strong>dp[i - zeroNum][j - oneNum] + 1</strong>.</p> <p>然后在遍历的过程中, 取 dp[i][j]的最大值. 所以递推公式: <strong>dp[i][j] = max(dp[i][j], dp[i - zeroNum][j - oneNum] + 1)</strong> ;</p> <p>此时可以回想一下 01 背包的递推公式: dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);</p> <p>对比一下就会发现, 字符串的 zeroNum 和 oneNum 相当于物品的重量(weight[i]), 字符串本身的个数相当于物品的价值(value[i]).</p> <p><strong>这就是一个典型的 01 背包!</strong>   只不过物品的重量有了两个维度而已.</p> <blockquote><p>dp 数组如何初始化</p></blockquote> <p>01 背包的 dp 数组初始化为 0 就可以. 因为物品价值不会是负数, 初始为 0, 保证递推的时候 dp[i][j] 不会被初始值覆盖.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>外层 for 循环遍历物品, 内层 for 循环遍历背包容量且从后向前遍历! 本题也是, 物品就是 strs 里的字符串, 背包容量就是题目描述中的 m 和 n.</p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 遍历物品</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>string str <span class="token operator">:</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">int</span> oneNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> zeroNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> zeroNum<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> oneNum<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 遍历背包容量且从后向前遍历!</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> zeroNum<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> oneNum<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> zeroNum<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> oneNum<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>有同学可能想, 那个遍历背包容量的两层 for 循环先后循序有没有什么讲究? 没讲究, 都是物品重量的一个维度, 先遍历哪个都行!</p> <blockquote><p>举例推导 dp 数组</p></blockquote> <p>以输入: [&quot;10&quot;,&quot;0001&quot;,&quot;111001&quot;,&quot;1&quot;,&quot;0&quot;], m = 3, n = 3 为例</p> <p>最后 dp 数组的状态如下所示:</p> <p><img src="/img/net-img-20210120111201512-20240313202419-xitprey.jpg" alt="474.一和零"></p> <p>以上动规五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findMaxForm</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strs<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// dp[i][j]表示 i 个0和 j 个1时的最大子集</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 分别统计1和0的数量</span>
        <span class="token keyword">int</span> oneNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> zeroNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token operator">:</span> str<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                zeroNum<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                oneNum<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  
        <span class="token comment">// 倒序遍历</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> zeroNum<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> oneNum<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> zeroNum<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> oneNum<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>时间复杂度: O(kmn), k 为 strs 的长度</li> <li>空间复杂度: O(mn)</li></ul> <h5 id="完全背包问题理论基础🌸"><a href="#完全背包问题理论基础🌸" class="header-anchor">#</a> 完全背包问题理论基础🌸</h5> <h6 id="完全背包"><a href="#完全背包" class="header-anchor">#</a> 完全背包</h6> <p>场景: 有 N 件物品和一个最多能背重量为 W 的背包. 第 i 件物品的重量是 weight[i], 得到的价值是 value[i]. <strong>每件物品都有无限个(也就是可以放入背包多次)</strong> , 求解将哪些物品装入背包里物品价值总和最大.</p> <p><mark><strong>完全背包和 01 背包问题唯一不同的地方就是, 每种物品有无限件</strong></mark>.</p> <p>同样 leetcode 上没有纯完全背包问题, 都是需要完全背包的各种应用, 需要转化成完全背包问题, 所以这里还是以纯完全背包问题进行讲解理论和原理.</p> <p>在下面的讲解中, 依然举这个例子: 背包最大重量为 4.</p> <p>物品为:</p> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;">重量</th> <th style="text-align:center;">价值</th></tr></thead> <tbody><tr><td style="text-align:center;">物品0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">15</td></tr> <tr><td style="text-align:center;">物品1</td> <td style="text-align:center;">3</td> <td style="text-align:center;">20</td></tr> <tr><td style="text-align:center;">物品2</td> <td style="text-align:center;">4</td> <td style="text-align:center;">30</td></tr></tbody></table> <p><strong>每件商品都有无限个!</strong>  问背包能背的物品最大价值是多少?</p> <p>01 背包和完全背包<strong>唯一不同就是体现在遍历顺序</strong>上, 所以本文就不去做动规五部曲了, 直接针对<strong>遍历顺序</strong>经行分析!</p> <p>首先再回顾一下 01 背包的核心代码</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 遍历物品</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历背包容量(由大到小)</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> bagWeight<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>知道 <strong>01 背包内嵌的循环是从大到小遍历, 为了保证每个物品仅被添加一次. 而完全背包的物品是可以添加多次的, 所以要从小到大去遍历</strong>, 即:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 先遍历物品, 再遍历背包</span>
<span class="token comment">// 遍历物品</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历背包容量(由小到大)</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight <span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>dp 状态图如下:</p> <p><img src="/img/net-img-20210126104510106-20240313203629-0513kwi.jpg" alt="动态规划-完全背包"></p> <p>相信很多同学看网上的文章, 关于完全背包介绍基本就到为止了.</p> <p><strong>其实还有一个很重要的问题, 为什么遍历物品在外层循环, 遍历背包容量在内层循环?</strong>   这个问题很多题解关于这里都是轻描淡写就略过了, 大家都默认 遍历物品在外层, 遍历背包容量在内层, 好像本应该如此一样, 那么为什么呢?</p> <p>难道就不能遍历背包容量在外层, 遍历物品在内层? 01 背包中二维 dp 数组的两个 for 遍历的先后循序是可以颠倒了, 一维 dp 数组的两个 for 循环先后循序一定是先遍历物品, 再遍历背包容量.</p> <p><strong>在完全背包中, 对于一维 dp 数组来说, 其实两个 for 循环嵌套顺序是无所谓的! 因为 dp[j] 是根据 下标 j 之前所对应的 dp[j] 计算出来的. 只要保证下标 j 之前的 dp[j] 都是经过计算的就可以了</strong>.</p> <p>遍历物品在外层循环, 遍历背包容量在内层循环, 状态如图:</p> <p><img src="/img/net-img-20210126104529605-20240313203629-i1tgjs0.jpg" alt="动态规划-完全背包1"></p> <p>遍历背包容量在外层循环, 遍历物品在内层循环, 状态如图:</p> <p><img src="/img/net-img-20210729234011-20240313203629-jhoj8ez.png" alt="动态规划-完全背包2"></p> <p>看了这两个图, 大家就会理解, 完全背包中, <strong>两个 for 循环的先后循序, 都不影响计算 dp[j] 所需要的值(这个值就是下标 j 之前所对应的 dp[j])</strong> .</p> <p>先遍历背包在遍历物品, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 先遍历背包, 再遍历物品</span>
<span class="token comment">// 遍历背包容量</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历物品</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>完整代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 先遍历物品, 再遍历背包</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testCompletePack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bagWeight <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
  
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>bagWeight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 先遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 遍历背包容量(由小到大)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> maxValue <span class="token operator">:</span> dp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>maxValue <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 先遍历背包, 再遍历物品</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testCompletePackAnotherWay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weight <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bagWeight <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>bagWeight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历背包容量</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 遍历物品</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> weight<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> weight<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> weight<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> maxValue <span class="token operator">:</span> dp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>maxValue <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这里<strong>说的都是对于纯完全背包问题, 其 for 循环的先后循环是可以颠倒的!</strong>  但如果题目稍稍有点变化, 就会体现在<strong>遍历顺序</strong>上. 比如如果问装满背包有几种方式的话? 那么两个 for 循环的先后顺序就有很大区别了, 而 leetcode 上的题目都是这种稍有变化的类型.</p> <h5 id="零钱兑换ii-518-中等-🌸"><a href="#零钱兑换ii-518-中等-🌸" class="header-anchor">#</a> 零钱兑换II(518-中等)🌸</h5> <h6 id="题目描述-23"><a href="#题目描述-23" class="header-anchor">#</a> 题目描述</h6> <p>给定不同面额的硬币和一个总金额. 写出函数来计算<strong>可以凑成总金额的硬币组合数</strong>. 假设每一种面额的硬币有<strong>无限个</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> amount <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> 输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 有四种方式可以凑成总金额<span class="token operator">:</span>
<span class="token operator">*</span> <span class="token number">5</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token operator">*</span> <span class="token number">5</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span>
<span class="token operator">*</span> <span class="token number">5</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span>
<span class="token operator">*</span> <span class="token number">5</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span>
输入<span class="token operator">:</span> amount <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>    输出<span class="token operator">:</span> <span class="token number">0</span>   解释<span class="token operator">:</span> 只用面额<span class="token number">2</span>的硬币不能凑成总金额<span class="token number">3.</span>
输入<span class="token operator">:</span> amount <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/coin-change-ii/submissions/511573763/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/coin-change-ii/submissions/511573763/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-背包-5"><a href="#动态规划-背包-5" class="header-anchor">#</a> 动态规划(背包)</h6> <p>这是一道典型的背包问题, 一看到钱币数量不限, 就知道这是一个<strong>完全背包</strong>. 但本题和纯完全背包不一样, <strong>纯完全背包是凑成背包最大价值是多少, 而本题是要求凑成总金额的物品组合个数</strong>! 注意题目描述中是凑成总金额的硬币组合数, 为什么强调是<strong>组合数</strong>呢?</p> <p>例如示例一:</p> <ul><li>5 = 2 + 2 + 1</li> <li>5 = 2 + 1 + 2</li></ul> <p>这是一种<strong>组合</strong>, 都是 2 2 1. 如果问的是排列数, 那么上面就是两种排列了. <strong>组合不强调元素之间的顺序, 排列强调元素之间的顺序</strong>. 那为什么要介绍这些呢, 因为这和下文讲解<strong>遍历顺序</strong>息息相关!</p> <p>回归本题, 动规五步曲来分析如下:</p> <blockquote><p>确定 dp 数组以及下标的含义</p></blockquote> <p><strong>dp[j]: 凑成总金额 j 的货币组合数为 dp[j]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>dp[j] 就是所有的 <code>dp[j - coins[i]]</code>​(考虑 coins[i] 的情况)<strong>相加</strong>.</p> <p>所以递推公式: <strong>dp[j] += dp[j - coins[i]]</strong> ;</p> <p>这个递推公式在 <code>494.目标和</code>​ 中就讲解了, 求<strong>装满背包</strong>有几种方法, 公式都是: <strong>dp[j] += dp[j - nums[i]]</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>首先 dp[0] 一定要为 1, dp[0] = 1 是递归公式的基础. 如果 dp[0] = 0 的话, 后面所有推导出来的值都是 0 了. 那么 dp[0] = 1 有没有含义, 其实既可以说<strong>凑成总金额 0 的货币组合数为 1</strong>, 也可以说凑成总金额 0 的货币组合数为 0, 好像都没有毛病. 但题目描述中, 也没明确说 amount = 0 的情况, 结果应该是多少.</p> <p>这里其实题目描述还是要说明一下, 因为后台测试数据是默认, amount = 0 的情况, 组合数为 1 的.</p> <p>下标非 0 的 dp[j] 初始化为 0, 这样累计加 <code>dp[j - coins[i]]</code>​ 的时候才不会影响真正的 dp[j].</p> <p>dp[0] = 1 还说明了一种情况: 如果正好选了 coins[i] 后, 也就是 <code>j - coins[i] == 0</code>​ 的情况表示这个硬币刚好能选, 此时 dp[0] 为 1 表示只选 coins[i] 存在这样的一种选法.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>本题中是<strong>外层 for 循环遍历物品(钱币), 内层 for 遍历背包(金钱总额)</strong> , 还是外层 for 遍历背包(金钱总额), 内层 for 循环遍历物品(钱币)呢? 前面讲完全背包时提到, 两个 for 循环的先后顺序都是可以的.</p> <p><strong>但本题就不行了!</strong>  因为纯完全背包求得装满背包的最大价值是多少, <strong>和凑成总和的元素有没有顺序没关系</strong>, 即: <strong>有顺序也行, 没有顺序也行</strong>!</p> <p>而本题要求凑成总和的组合数, 元素之间明确<strong>要求没有顺序</strong>. 所以纯完全背包是能<strong>凑成总和</strong>就行, 不用管怎么凑的. 本题是求凑出来的方案个数, 且每个方案个数是为组合数.</p> <p>那么本题, 两个 for 循环的先后顺序可就有说法了.</p> <p>先来看 <strong>外层 for 循环遍历物品(钱币), 内层 for 遍历背包(金钱总额)</strong> 的情况.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// dp[j]: 凑成总金额 j 的货币组合数为 dp[j]</span>
<span class="token comment">// 遍历物品</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历背包容量</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>假设: coins[0] = 1, coins[1] = 5.</p> <p>那么就是先把 1 加入计算, 然后再把 5 加入计算, 得到的<strong>方法数量只有 {1, 5} 这种情况</strong>. 而不会出现 {5, 1} 的情况.</p> <p><strong>所以这种遍历顺序中 dp[j] 里计算的是</strong>​<mark><strong>组合数</strong></mark>!</p> <p>如果把两个 for 交换顺序, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 遍历背包容量</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>背包容量的每一个值, 都是经过 1 和 5 的计算, 包含了 {1, 5} 和 {5, 1} <strong>两种</strong>情况. <strong>此时 dp[j] 里算出来的就是</strong>​<mark><strong>排列数</strong></mark>!</p> <p>可能这里很多同学还不是很理解, <strong>建议动手把这两种方案的 dp 数组数值变化打印出来, 对比看一看</strong>!</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>输入: amount = 5, coins = [1, 2, 5] , dp 状态图如下:</p> <p><img src="/img/net-img-20210120181331461-20240313224647-gm0udac.jpg" alt="518.零钱兑换 II"></p> <p>最后红色框 dp[amount] 为最终结果.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 递推表达式</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化 dp 数组, 表示金额为0时只有一种情况, 也就是什么都不装</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 先遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历背包容量</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>时间复杂度: O(mn), 其中 m 是 amount, n 是 coins 的长度</li> <li>空间复杂度: O(m)</li></ul> <p>在求<strong>装满背包有几种方案</strong>的时候, 认清遍历顺序是非常关键的.</p> <ul><li><mark><strong>如果求组合数就是外层 for 循环遍历物品, 内层 for 遍历背包</strong></mark>.</li> <li><mark><strong>如果求排列数就是外层 for 遍历背包, 内层 for 循环遍历物品</strong></mark>.</li></ul> <p>下面是二维 dp 数组版本, 方便理解.</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>coins<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化边界值</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第一列的初始值为1</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 初始化第一行</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 先遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历背包容量</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>coins<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="组合总和iv-377-中等-🌸"><a href="#组合总和iv-377-中等-🌸" class="header-anchor">#</a> 组合总和Ⅳ(377-中等)🌸</h5> <h6 id="题目描述-24"><a href="#题目描述-24" class="header-anchor">#</a> 题目描述</h6> <p>给定一个由正整数组成且不存在重复数字的数组, 找出<strong>和为给定目标正整数的排列的个数</strong>. 请注意, 顺序不同的序列被视作不同的排列.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token number">4</span>  输出<span class="token operator">:</span> <span class="token number">7</span>
解释<span class="token operator">:</span> 所有可能的排列为<span class="token operator">:</span> 
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/combination-sum-iv/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/combination-sum-iv/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-9"><a href="#动态规划-9" class="header-anchor">#</a> 动态规划</h6> <p>本题题目描述说是求组合, 但又说是可以元素相同顺序不同的组合算两个组合, <strong>其实就是求排列!</strong>  组合不强调顺序, (1,5) 和 (5,1) 是同一个组合. <strong>排列强调顺序</strong>, (1,5) 和 (5,1) 是两个不同的排列.</p> <p>但其本质是本题求的是<strong>排列总和</strong>, 而且仅仅是求排列总和的个数, 并不是把所有的排列都列出来. <mark><strong>如果本题要把排列都列出来的话, 只能使用回溯算法爆搜</strong></mark>.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]: 凑成目标正整数为 i 的排列个数为 dp[i]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>​<code>dp[i]</code>​ (考虑 nums[j]) 可以由 <code>dp[i - nums[j]]</code>​(不考虑 nums[j]) 推导出来. 因为只要得到 nums[j], <strong>排列个数 dp[i - nums[j]], 就是 dp[i] 的一部分</strong>.</p> <p>求装满背包有<strong>几种方法</strong>, 递推公式一般都是 dp[i] += dp[i - nums[j]]; 本题也一样.</p> <blockquote><p>dp 数组如何初始化</p></blockquote> <p>因为递推公式 <code>dp[i] += dp[i - nums[j]]</code>​ 的缘故, dp[0] 要初始化为 1, 这样递归其他 dp[i] 的时候才会有数值基础. 至于 dp[0] = 1 有没有意义呢? 其实没有意义, 所以也不去强行解释它的意义了, 因为题目中也说了: 给定目标值是正整数! 所以 dp[0] = 1 是没有意义的, 仅仅是为了推导递推公式.</p> <p>至于非 0 下标的 dp[i] 应该初始为多少呢? 初始化为 0, 这样才不会影响 dp[i] 累加所有的 dp[i - nums[j]].</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>个数可以<strong>不限使用</strong>, 说明这是一个<strong>完全背包</strong>. 得到的集合是排列, 说明需要<strong>考虑元素之间的顺序</strong>.</p> <p>本题要求的是排列, 那么这个 for 循环嵌套的顺序可以有说法了.</p> <ul><li><strong>如果求组合数就是外层 for 循环遍历物品, 内层 for 遍历背包</strong>.</li> <li><mark><strong>如果求排列数就是外层 for 遍历背包, 内层 for 循环遍历物品</strong></mark>.</li></ul> <p>如果把遍历 nums(物品)放在外循环, 遍历 target 的作为内循环的话, 举一个例子: 计算 dp[4] 的时候, 结果集只有 {1,3} 这样的集合, 不会有 {3,1} 这样的集合, 因为 nums 遍历放在外层, 3 只能出现在 1 后面! 所以本题遍历顺序最终遍历顺序: <mark><strong>target(背包)放在外循环, 将 nums(物品)放在内循环, 内循环从前到后遍历</strong></mark>.</p> <blockquote><p>举例来推导dp数组</p></blockquote> <p>再来用示例中的例子推导一下:</p> <p><img src="/img/net-img-20230310000625-20240314203556-xutldxm.png" alt="377.组合总和Ⅳ"></p> <p>如果代码运行处的结果不是想要的结果, 就把 dp[i] 都打出来, 看看和推导的一不一样.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">combinationSum4</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 先遍历背包</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> target<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历物品</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>时间复杂度: O(target * n), 其中 n 为 nums 的长度</li> <li>空间复杂度: O(target)</li></ul> <h5 id="变态爬楼梯完全背包版本-中等-🌸"><a href="#变态爬楼梯完全背包版本-中等-🌸" class="header-anchor">#</a> 变态爬楼梯完全背包版本(中等)🌸</h5> <h6 id="题目描述-25"><a href="#题目描述-25" class="header-anchor">#</a> 题目描述</h6> <p>假设你正在爬楼梯. 需要 n 阶你才能到达楼顶. 每次可以爬至多 m (1 &lt;= m &lt; n)个台阶. 有多少种不同的方法可以爬到楼顶呢?</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>数据范围<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> m <span class="token operator">&lt;</span> n <span class="token operator">&lt;=</span> <span class="token number">32</span><span class="token punctuation">;</span>
当 m <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">3</span> 时<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">3</span> 这表示一共有三个台阶<span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token number">2</span> 代表你每次可以爬一个台阶或者两个台阶<span class="token punctuation">.</span> 
此时有三种方法可以爬到楼顶<span class="token punctuation">.</span> 
<span class="token number">1</span> 阶 <span class="token operator">+</span> <span class="token number">1</span> 阶 <span class="token operator">+</span> <span class="token number">1</span> 阶段
<span class="token number">1</span> 阶 <span class="token operator">+</span> <span class="token number">2</span> 阶
<span class="token number">2</span> 阶 <span class="token operator">+</span> <span class="token number">1</span> 阶
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><a href="https://kamacoder.com/problempage.php?pid=1067" target="_blank" rel="noopener noreferrer">https://kamacoder.com/problempage.php?pid=1067<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-完全背包-2"><a href="#动态规划-完全背包-2" class="header-anchor">#</a> 动态规划(完全背包)</h6> <p>这道题目力扣上没有原题, 所以可以在卡码网 <a href="https://kamacoder.com/problempage.php?pid=1067" target="_blank" rel="noopener noreferrer">57. 爬楼梯<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上来刷这道题目. 之前做的 爬楼梯 是只能至多爬两个台阶. 这次<strong>改为: 一步一个台阶, 两个台阶, 三个台阶, ..., 直到 m 个台阶. 问有多少种不同的方法可以爬到楼顶呢</strong>?</p> <p>这又有难度了, 这其实是一个<strong>完全背包</strong>问题. <strong>1 阶, 2 阶, .... m 阶就是物品, 楼顶就是背包</strong>. 每一阶可以<mark><strong>重复使用</strong></mark>, 例如跳了 1 阶, 还可以继续跳 1 阶. 问跳到楼顶有几种方法其实就是问装满背包有几种方法. 其实<strong>这就是一个完全背包问题了</strong>!</p> <p>这个和 <code>动态规划: 377. 组合总和 Ⅳ</code>​ 基本就是一道题了.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]: 爬到有 i 个台阶的楼顶, 有 dp[i] 种方法</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>求装满背包有几种方法, 递推公式一般都是 <code>dp[i] += dp[i - nums[j]]</code>​;</p> <p>本题 dp[i] 有几种来源, <strong>dp[i - 1], dp[i - 2], dp[i - 3]</strong>  等等, 即: dp[i - j].</p> <p>那么递推公式为: <code>dp[i] += dp[i - j]</code>​</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>既然递归公式是 dp[i] += dp[i - j], 那么 dp[0] 一定为 1, dp[0] 是递归中一切数值的基础所在, 如果 dp[0] 是 0 的话, 其他数值都是 0 了. 下标非 0 的 dp[i] 初始化为 0, 因为 dp[i] 是靠 dp[i - j] 累计上来的, dp[i] 本身为 0 这样才不会影响结果.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>这是背包里求排列问题, 即: <strong>1, 2 步和 2, 1 步都是上三个台阶, 但是这两种方法不一样! 类似于</strong>​<mark><strong>求排列</strong></mark>​<strong>的方式.</strong>  所以<strong>需将 target 放在外循环, 将 nums 放在内循环</strong>. 每一步可以走多次, 这是<strong>完全背包</strong>, 内循环需要从前向后遍历.</p> <blockquote><p>举例来推导dp数组</p></blockquote> <p>介于本题和 <code>动态规划: 377. 组合总和 Ⅳ</code>​ 几乎是一样的, 这里就不再重复举例了.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">clumbNums</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 求排列问题, 先遍历背包再遍历物品</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// 先遍历背包</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历物品</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>时间复杂度: O(n * m)</li> <li>空间复杂度: O(n)</li></ul> <h5 id="零钱兑换-322-中等-🌸💯"><a href="#零钱兑换-322-中等-🌸💯" class="header-anchor">#</a> 零钱兑换(322-中等)🌸💯</h5> <h6 id="题目描述-26"><a href="#题目描述-26" class="header-anchor">#</a> 题目描述</h6> <p>给定不同面额的硬币 coins 和一个总金额 amount. 求出可以凑成总金额所需的<strong>最少的硬币个数</strong>. 如果没有任何一种硬币组合能组成总金额, 返回 -1. 可以认为每种硬币的<strong>数量是无限</strong>的.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">11</span>   输出<span class="token operator">:</span> <span class="token number">3</span>   解释<span class="token operator">:</span> <span class="token number">11</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span>
输入<span class="token operator">:</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">3</span>   输出<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
输入<span class="token operator">:</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">0</span>   输出<span class="token operator">:</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/coin-change/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/coin-change/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-10"><a href="#动态规划-10" class="header-anchor">#</a> 动态规划</h6> <p>在 <code>518-零钱兑换II</code>​ 中已经兑换一次零钱了, 这次又要兑换, 套路不一样! 题目中说<strong>每种硬币的数量是无限</strong>的, 可以看出是典型的<strong>完全背包问题</strong>.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[j]: 凑足总额为 j 所需钱币的最少个数为 dp[j].</strong></p> <blockquote><p>确定递推公式</p></blockquote> <p>凑足总额为 j - coins[i] 的最少个数为 <strong>dp[j - coins[i]]</strong> , 那么只需要额外加上<strong>一个钱币</strong> coins[i] 即 <code>dp[j - coins[i]] + 1</code>​ 就是 dp[j].</p> <p><mark><strong>所以 dp[j] 要取所有 dp[j - coins[i]] + 1 中最小的</strong></mark>.</p> <p>递推公式: <strong>dp[j] =  min(dp[j - coins[i]] + 1, dp[j])</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>首先凑足总金额为 0 所需钱币的个数一定是 0, 那么 <strong>dp[0] = 0</strong>;</p> <p>其他下标对应的数值呢? 考虑到递推公式的特性, dp[j] 必须<strong>初始化为一个最大的数</strong>, 否则就会在 min(dp[j - coins[i]] + 1, dp[j]) 比较的过程中被初始值覆盖. 所以下标非 0 的元素都是应该是<strong>最大值</strong>.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>本题求钱币最小个数, <strong>那么钱币有顺序和没有顺序都可以, 都不影响钱币的最小个数</strong>. 所以本题<strong>并</strong>​<mark><strong>不强调集合是组合还是排列</strong></mark>.</p> <ul><li><strong>如果求组合数就是外层 for 循环遍历物品, 内层 for 遍历背包</strong>.</li> <li><strong>如果求排列数就是外层 for 遍历背包, 内层 for 循环遍历物品</strong>.</li></ul> <p>所以本题的两个 for 循环的关系是: 外层 for 循环遍历物品, 内层 for 遍历背包或者外层 for 遍历背包, 内层 for 循环遍历物品都是可以的!</p> <p><strong>这里采用 coins 放在外循环, target 在内循环的方式. 本题钱币数量可以无限使用, 那么是完全背包</strong>. 所以遍历的内循环是正序.</p> <p>综上所述, 遍历顺序为: <strong>coins(物品)放在外循环, target(背包)在内循环. 且内循环正序</strong>.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以输入: coins = [1, 2, 5], amount = 5 为例</p> <p><img src="/img/net-img-20210201111833906-20240316185244-nmnriej.jpg" alt="322.零钱兑换"></p> <p>dp[amount] 为最终结果. 以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token comment">// 初始化dp数组为最大值</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 当金额为0时需要的硬币数目为0</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 正序遍历: 完全背包每个硬币可以选择多次</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 只有dp[j-coins[i]]不是初始最大值时, 该位才有选择的必要</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 选择硬币数目最小的情况</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>时间复杂度: O(n * amount), 其中 n 为 coins 的长度</li> <li>空间复杂度: O(amount)</li></ul> <h5 id="完全平方数-279-中等-🌸💯"><a href="#完全平方数-279-中等-🌸💯" class="header-anchor">#</a> 完全平方数(279-中等)🌸💯</h5> <h6 id="题目描述-27"><a href="#题目描述-27" class="header-anchor">#</a> 题目描述</h6> <p><strong>给定正整数 n, 找到若干个完全平方数(比如 1, 4, 9, 16, ...)使得它们的和等于 n</strong>. 需要让组成和的完全平方数的个数最少. 给你一个整数 n, 返回和为 n 的完全平方数的最少数量.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> n <span class="token operator">=</span> <span class="token number">12</span>  输出<span class="token operator">:</span> <span class="token number">3</span>   解释<span class="token operator">:</span> <span class="token number">12</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">4</span>
输入<span class="token operator">:</span> n <span class="token operator">=</span> <span class="token number">13</span>  输出<span class="token operator">:</span> <span class="token number">2</span>   解释<span class="token operator">:</span> <span class="token number">13</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/perfect-squares/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/perfect-squares/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-完全背包-3"><a href="#动态规划-完全背包-3" class="header-anchor">#</a> 动态规划(完全背包)</h6> <p>可能刚看这种题感觉没啥思路, 又平方和的, 又最小数的. 下面<strong>把题目翻译一下:</strong> <mark><strong>完全平方数就是物品(可以无限件使用), 凑个正整数 n 就是背包, 问凑满这个背包最少有多少物品</strong></mark>​ <strong>?</strong>  这么浓厚的完全背包氛围, 而且题目 <code>322-零钱兑换</code>​ 基本就是一样的!</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[j]: 和为 j 的完全平方数的最少数量为 dp[j]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>dp[j] 可以由 <strong>dp[j - i * i]</strong>  推出, <strong>dp[j - i * i] + 1</strong> 便可以凑成 dp[j].</p> <p>此时要选择最小的 dp[j], 所以递推公式: <strong>dp[j] = min(dp[j - i * i] + 1, dp[j])</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>dp[0] 表示和<strong>为 0 的完全平方数的最小数量</strong>, 那么 dp[0] 一定是 0.</p> <p>有人会问, 那 0 * 0 也算是一种啊, 为啥 dp[0] 就是 0 呢? 看题目描述, 找到若干个完全平方数(比如 1, 4, 9, 16, ...), 题目描述中可没说要从 0 开始, dp[0] = 0 完全是为了递推公式.</p> <p>非 0 下标的 dp[j] 应该是多少呢?</p> <p>从递归公式 dp[j] = min(dp[j - i * i] + 1, dp[j]); 中可以看出每次 dp[j] 都要选最小的, <strong>所以非 0 下标的 dp[j] 一定要初始为</strong>​<mark><strong>最大值</strong></mark>​ <strong>, 这样 dp[j] 在递推的时候才不会被初始值覆盖</strong>.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>本题是完全背包:</p> <ul><li>如果求组合数就是外层 for 循环遍历物品, 内层 for 遍历背包.</li> <li>如果求排列数就是外层 for 遍历背包, 内层 for 循环遍历物品.</li></ul> <p><strong>所以本题外层 for 遍历背包, 内层 for 遍历物品, 还是外层 for 遍历物品, 内层 for 遍历背包,</strong> <mark><strong>都是可以的</strong></mark>​ <strong>!</strong></p> <blockquote><p>举例推导dp数组</p></blockquote> <p>已输入 n 为 5 例, dp 状态图如下:</p> <p><img src="/img/net-img-20210202112617341-20240316190255-t7jic6v.jpg" alt="279.完全平方数"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>
dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span>
dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span>
dp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>
dp<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最后的 dp[n] 为最终结果.</p> <p>以上动规五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numSquares</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化dp数组</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 当和为0时, 组合的个数为0</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 先遍历物品</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">*</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历背包</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">*</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对比零钱兑换: 这里不需要这个if, 因为本题不会存在 &quot;凑不出&quot; 的情况, 因为一定可以用N个1凑出来N</span>
            <span class="token comment">// if (dp[j - i * i] != max) {</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> i <span class="token operator">*</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// }</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>版本二: 先遍历背包, 再遍历物品.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numSquares</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> max<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 当和为0时, 组合的个数为0</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历背包</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 遍历物品</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">*</span> i <span class="token operator">&lt;=</span> j<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> i <span class="token operator">*</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h5 id="单词拆分-139-中等-🌸💯"><a href="#单词拆分-139-中等-🌸💯" class="header-anchor">#</a> 单词拆分(139-中等)🌸💯</h5> <h6 id="题目描述-28"><a href="#题目描述-28" class="header-anchor">#</a> 题目描述</h6> <p>给定一个非空字符串 s 和一个包含非空单词的列表 wordDict, 判定 s 是否可以被空格拆分为<strong>一个或多个</strong>在字典中出现的单词. 拆分时可以<strong>重复使用</strong>字典中的单词. 可以假设字典中没有重复的单词.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>示例 <span class="token number">1</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;leetcode&quot;</span><span class="token punctuation">,</span> wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;leet&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;code&quot;</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token boolean">true</span>
解释<span class="token operator">:</span> 返回 <span class="token boolean">true</span> 因为 <span class="token string">&quot;leetcode&quot;</span> 可以由 <span class="token string">&quot;leet&quot;</span> 和 <span class="token string">&quot;code&quot;</span> 拼接成<span class="token punctuation">.</span> 
示例 <span class="token number">2</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;applepenapple&quot;</span><span class="token punctuation">,</span> wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pen&quot;</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token boolean">true</span>
解释<span class="token operator">:</span> 返回 <span class="token boolean">true</span> 因为 <span class="token string">&quot;applepenapple&quot;</span> 可以由 <span class="token string">&quot;apple&quot;</span> <span class="token string">&quot;pen&quot;</span> <span class="token string">&quot;apple&quot;</span> 拼接成<span class="token punctuation">.</span> 
示例 <span class="token number">3</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;catsandog&quot;</span><span class="token punctuation">,</span> wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cats&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sand&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;and&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/word-break/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/word-break/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="回溯法"><a href="#回溯法" class="header-anchor">#</a> 回溯法</h6> <p>看到这道题目的时候, 可以想起一道题目<strong>回溯算法: 分割回文串(枚举分割后的所有子串, 判断是否回文)</strong> , 就是枚举字符串的所有分割情况. 本道可以枚举分割所有字符串, 判断是否在字典里出现过.</p> <ul><li>时间复杂度: O(2^n), 因为每一个单词都有<strong>两个状态</strong>, 切割和不切割</li> <li>空间复杂度: O(n), 算法递归系统调用栈的空间</li></ul> <p><strong>直接使用回溯很明显要超时</strong>, 超时的 case 如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab&quot;
[&quot;a&quot;,&quot;aa&quot;,&quot;aaa&quot;,&quot;aaaa&quot;,&quot;aaaaa&quot;,&quot;aaaaaa&quot;,&quot;aaaaaaa&quot;,&quot;aaaaaaaa&quot;,&quot;aaaaaaaaa&quot;,&quot;aaaaaaaaaa&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>递归的过程中有很多<strong>重复计算</strong>, 可以使用数组保存一下递归过程中计算的结果. 这个叫做<strong>记忆化递归.</strong></p> <p><strong>使用 memory 数组保存每次计算的以 startIndex 起始的计算结果, 如果 memory[startIndex] 里已经被赋值了, 直接用 memory[startIndex] 的结果</strong>.</p> <p>这个时间复杂度其实也是: O(2^n). 只不过对于上面那个超时测试用例优化效果特别明显.</p> <h6 id="动态规划-背包问题"><a href="#动态规划-背包问题" class="header-anchor">#</a> 动态规划(背包问题)</h6> <p><strong>单词就是物品, 字符串 s 就是背包, 单词能否组成字符串 s, 就是问物品能不能把背包装满</strong>. 拆分时可以重复使用字典中的单词, 说明就是一个<strong>完全背包</strong>!</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]: 字符串长度为 i 的话, dp[i] 为 true, 表示可以拆分为一个或多个在字典中出现的单词</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>如果<strong>确定 dp[j] 是 true, 且 [j, i] 这个区间的子串出现在字典里, 那么 dp[i] 一定是 true. (j &lt; i)</strong> .</p> <p>所以递推公式是 <strong>if([j, i] 这个区间的子串出现在字典里 &amp;&amp; dp[j]是 true) 那么 dp[i] = true</strong>.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式中可以看出, dp[i] 的状态依靠 dp[j] 是否为 true, 那么 dp[0] 就是递推的根基, dp[0] 一定要为 true, 否则递推下去后面都都是 false 了.</p> <p>那么 dp[0] 有没有意义呢? dp[0] 表示如果字符串为空的话, 说明出现在字典里. 但题目中说了 &quot;给定一个非空字符串 s&quot;, 所以测试数据中不会出现 i 为 0 的情况, 那么 dp[0] 初始为 true 完全就是为了推导公式.</p> <p>下标非 0 的 dp[i] 初始化为 false, 只要没有被覆盖说明都是不可拆分为一个或多个在字典中出现的单词.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>题目中说是拆分为一个或多个在字典中出现的单词, 所以这是<strong>完全背包</strong>.</p> <p>还要讨论两层 for 循环的前后顺序.</p> <ul><li><strong>如果求组合数就是外层 for 循环遍历物品, 内层 for 遍历背包</strong>.</li> <li><mark><strong>如果求排列数就是外层 for 遍历背包, 内层 for 循环遍历物品</strong></mark>.</li></ul> <p>而本题其实求的是<mark><strong>排列数</strong></mark>, 为什么? 拿 s = &quot;applepenapple&quot;, wordDict = [&quot;apple&quot;, &quot;pen&quot;] 举例. &quot;apple&quot;, &quot;pen&quot; 是物品, 那么要求物品的组合一定是 &quot;apple&quot; + &quot;pen&quot; + &quot;apple&quot; 才能组成 &quot;applepenapple&quot;. 而 &quot;apple&quot; + &quot;apple&quot; + &quot;pen&quot; 或者 &quot;pen&quot; + &quot;apple&quot; + &quot;apple&quot; 是不可以的, 因为这里就是<strong>强调物品之间顺序</strong>. 所以<strong>本题是先遍历背包, 再遍历物品</strong>.</p> <blockquote><p>举例推导dp[i]</p></blockquote> <p>以输入: s = &quot;leetcode&quot;, wordDict = [&quot;leet&quot;, &quot;code&quot;] 为例, dp 状态如图:</p> <p><img src="/img/net-img-20210202162652727-20240316191636-c8rrm8j.jpg" alt="139.单词拆分"></p> <p>dp[s.size()] 就是最终结果. 动规五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">wordBreak</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> wordDict<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>wordDict<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">// 先遍历背包</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 再遍历物品</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>时间复杂度: O(n^3), 因为 substr 返回子串的副本是 O(n)的复杂度(这里的 n 是 substring 的长度)</li> <li>空间复杂度: O(n)</li></ul> <h4 id="打家劫舍"><a href="#打家劫舍" class="header-anchor">#</a> 打家劫舍</h4> <h5 id="打家劫舍-198-中等-🌸💯"><a href="#打家劫舍-198-中等-🌸💯" class="header-anchor">#</a> 打家劫舍(198-中等)🌸💯</h5> <h6 id="题目描述-29"><a href="#题目描述-29" class="header-anchor">#</a> 题目描述</h6> <p>你是一个专业的小偷, 计划偷窃沿街的房屋. 每间房内都藏有一定的现金, 影响你偷窃的唯一制约因素就是相邻的房屋装有相互连通的防盗系统, 如果<strong>两间相邻的房屋在同一晚上被小偷闯入, 系统会自动报警</strong>. 给定一个代表每个房屋存放金额的非负整数数组, 计算不触动警报装置的情况下, 一夜之内能够<strong>偷窃到的最高金额</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 偷窃 <span class="token number">1</span> 号房屋 <span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> 然后偷窃 <span class="token number">3</span> 号房屋 <span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span> 偷窃到的最高金额 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">4.</span> 
输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> 输出<span class="token operator">:</span> <span class="token number">12</span>
解释<span class="token operator">:</span> 偷窃 <span class="token number">1</span> 号房屋 <span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 偷窃 <span class="token number">3</span> 号房屋 <span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 接着偷窃 <span class="token number">5</span> 号房屋 <span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span> 
偷窃到的最高金额 <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">9</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">12</span> <span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/house-robber/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/house-robber/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-11"><a href="#动态规划-11" class="header-anchor">#</a> 动态规划</h6> <p>大家如果刚接触这样的题目, 会有点困惑, <strong>当前的状态是偷还是不偷</strong>呢?</p> <p>仔细一想, <mark><strong>当前房屋偷与不偷取决于前一个房屋和前两个房屋是否被偷了</strong></mark>. 所以这里就更感觉到, <strong>当前状态和前面状态会有一种依赖关系</strong>, 那么这种依赖关系都是动规的递推公式.</p> <p>当然以上是大概思路, 打家劫舍是 dp 解决的经典问题, 接下来动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i]: 考虑下标 i(包括 i)以内的房屋, 最多可以偷窃的金额为 dp[i]</strong> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>决定 dp[i] 的因素就是第 i 房间偷还是不偷, 也就是两种情况.</p> <ul><li>如果<strong>偷第 i 房间</strong>, 那么 <strong>dp[i] = dp[i - 2] + nums[i]</strong> , 即: 第 (i - 1) 房间一定是不考虑的, 找出下标 (i - 2)(包括 i - 2)以内的房屋, 最多可以偷窃的金额为 dp[i - 2] 加上第 i 房间偷到的钱.</li> <li>如果<strong>不偷第 i 房间</strong>, 那么 dp[i] = dp[i - 1], 即考虑 (i - 1)房, (<mark><strong>注意这里是考虑, 并不是一定要偷 (i - 1)房</strong></mark>​ <strong>, 这是容易混淆的点</strong>)</li></ul> <p>然后 dp[i] 取最大值, 即 <strong>==dp[i] = max(dp[i - 2] + nums[i], dp[i - 1])==</strong> ;</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式 dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]); 可以看出, 递推公式的基础就是 dp[0] 和 dp[1].</p> <p>从 dp[i] 的定义上来讲, dp[0] 一定是 nums[0], dp[1] 就是 nums[0] 和 nums[1] 的最大值即: <strong>dp[1] = max(nums[0], nums[1])</strong> ;</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>dp[i] 是根据 dp[i - 2] 和 dp[i - 1] 推导出来的, 那么一定是<strong>从前到后</strong>遍历!</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以示例二, 输入 [2,7,9,3,1] 为例.</p> <p><img src="/img/net-img-20210221170954115-20240316193425-hnkpq3h.jpg" alt="198.打家劫舍"></p> <p>红框 dp[nums.size() - 1] 为结果.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化dp数组</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 前两家选一家打劫</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>分析本题可以发现, <strong>所求结果仅依赖于前两种状态</strong>, 此时可以使用<strong>滚动数组思想</strong>将空间复杂度降低为 3 个空间:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token generics"><span class="token punctuation">&lt;</span>mark<span class="token punctuation">&gt;</span></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 存放选择的结果</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 滚动更新dp</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="打家劫舍ii-213-中等-🌸"><a href="#打家劫舍ii-213-中等-🌸" class="header-anchor">#</a> 打家劫舍II(213-中等)🌸</h5> <h6 id="题目描述-30"><a href="#题目描述-30" class="header-anchor">#</a> 题目描述</h6> <p>你是一个专业的小偷, 计划偷窃沿街的房屋, 每间房内都藏有一定的现金. 这个地方所有的房屋都<strong>围成一圈</strong>, 这意味着第一个房屋和最后一个房屋是紧挨着的. 同时, 相邻的房屋装有相互连通的防盗系统, 如果<strong>两间相邻的房屋在同一晚上被小偷闯入, 系统会自动报警</strong>. 给定一个代表每个房屋存放金额的非负整数数组, 计算在不触动警报装置的情况下, 能够偷窃到的最高金额.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">3</span>
解释<span class="token operator">:</span> 不能先偷窃 <span class="token number">1</span> 号房屋<span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 然后偷窃 <span class="token number">3</span> 号房屋<span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 因为他们是相邻的<span class="token punctuation">.</span> 
输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 你可以先偷窃 <span class="token number">1</span> 号房屋<span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 然后偷窃 <span class="token number">3</span> 号房屋<span class="token punctuation">(</span>金额 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span> 偷窃到的最高金额 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">4.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/house-robber-ii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/house-robber-ii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-12"><a href="#动态规划-12" class="header-anchor">#</a> 动态规划</h6> <p>这道题目和 <code>198-打家劫舍</code>​ 是差不多的, 唯一区别就是成环了.</p> <p>对于一个数组, 成环的话主要有如下三种情况:</p> <ul><li><strong>情况一: 考虑不包含首尾元素</strong></li></ul> <p><img src="/img/net-img-20210129160748643-20230310134000692-20240316194510-0kz9xxi.jpg" alt="213.打家劫舍 II"></p> <ul><li><strong>情况二: 考虑包含首元素, 不包含尾元素</strong></li></ul> <p><img src="/img/net-img-20210129160821374-20230310134003961-20240316194510-9cnl3ov.jpg" alt="213.打家劫舍 II1"></p> <ul><li><strong>情况三: 考虑包含尾元素, 不包含首元素</strong></li></ul> <p><img src="/img/net-img-20210129160842491-20230310134008133-20240316194510-5zulvza.jpg" alt="213.打家劫舍 II2"></p> <p><strong>注意这里用的是 &quot;考虑&quot;</strong> , 例如情况三, 虽然是考虑包含尾元素, 但不一定要选尾部元素! 对于情况三, 取 nums[1] 和 nums[3] 就是最大的.</p> <p><strong>而情况二 和 情况三 都包含了情况一了, 所以只考虑情况二和情况三就可以了</strong>.</p> <p>分析到这里, 本题其实比较简单了. 剩下的和 <strong>198.打家劫舍</strong> 就是一样的了. 也就是<strong>取两种情况下的较大值</strong>.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">&lt;</span>mark<span class="token operator">&gt;</span> null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 取不考虑第一个和不考虑最后一个元素 而分别进行普通打家劫舍之后的较大值</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">robAction</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">copyOfRange</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">robAction</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">copyOfRange</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 下面就是普通的打家劫舍的过程</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">robAction</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 存放选择的结果</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 滚动更新dp</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ul><li>时间复杂度: O(n)</li> <li>空间复杂度: O(n)</li></ul> <h5 id="打家劫舍iii-337-中等-🌸"><a href="#打家劫舍iii-337-中等-🌸" class="header-anchor">#</a> 打家劫舍III(337-中等)🌸</h5> <h6 id="题目描述-31"><a href="#题目描述-31" class="header-anchor">#</a> 题目描述</h6> <p>在上次打劫完一条街道之后和一圈房屋后, 小偷又发现了一个新的可行窃的地区. 这个地区只有一个入口, 称之为 &quot;根&quot;. 除了根之外, 每栋房子有且只有一个 &quot;父&quot; 房子与之相连. 一番侦察之后, 聪明的小偷意识到这个地方的所有房屋的排列类似于一棵二叉树. 如果<strong>两个直接相连的房子在同一天晚上被打劫, 房屋将自动报警</strong>. 计算在不触动警报的情况下, 小偷一晚能够盗取的最高金额.</p> <p><img src="/img/net-img-20210223173849619-20240316200108-fo9z4xy.png" alt="337.打家劫舍 III"></p> <blockquote><p><a href="https://leetcode.cn/problems/house-robber-iii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/house-robber-iii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>这道题目和 <strong>198-打家劫舍, 213-打家劫舍 II</strong> 也是如出一辙, 只不过这个换成了树. 对于树的话, 首先就要想到遍历方式, 前中后序(深度优先搜索)还是层序遍历(广度优先搜索).</p> <p><strong>本题一定是要后序遍历, 因为需要通过递归方法的返回值来做下一步计算</strong>. 本题的关键依然是要<strong>讨论当前节点抢还是不抢</strong>. 如果<strong>抢了当前节点, 两个孩子就不能动, 如果没抢当前节点, 就可以考虑抢左右孩子(注意这里依然说的是 &quot;考虑&quot;).</strong></p> <h6 id="暴力递归"><a href="#暴力递归" class="header-anchor">#</a> 暴力递归</h6> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 偷父节点</span>
    <span class="token keyword">int</span> val1 <span class="token operator">=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val1 <span class="token operator">+=</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val1 <span class="token operator">+=</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 不偷父节点(考虑root的左右孩子)</span>
    <span class="token keyword">int</span> val2 <span class="token operator">=</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">rob</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>时间复杂度: O(n^2), 这个时间复杂度不太标准, 也不容易准确化, 例如越往下的节点重复计算次数就越多</li> <li>空间复杂度: O(log n), 算上递推系统栈的空间</li></ul> <p>当然以上<strong>代码超时</strong>了, 这个递归的过程中其实是有<strong>重复计算</strong>了. 这里计算了 root 的四个孙子(左右孩子的孩子)为头结点的子树的情况, 又计算了 root 的左右孩子为头结点的子树的情况, <strong>计算左右孩子的时候其实又把孙子计算了一遍</strong>.</p> <h6 id="记忆化递推"><a href="#记忆化递推" class="header-anchor">#</a> 记忆化递推</h6> <p>所以可以<strong>使用一个 map 把计算过的结果保存一下</strong>, 这样如果计算过孙子了, 那么计算孩子的时候可以<strong>复用孙子节点</strong>的结果.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 缓存递归记录-减少重复计算</span>
    Map<span class="token operator">&lt;</span>TreeNode<span class="token punctuation">,</span> Integer<span class="token operator">&gt;</span> memo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-function"><span class="token function">HashMap</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> memo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">robAction</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>TreeNode<span class="token punctuation">,</span> Integer<span class="token operator">&gt;</span> memo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 已经计算过, 直接取值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>memo<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> val1 <span class="token operator">=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val1 <span class="token operator">+=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">,</span> memo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">.</span>right<span class="token punctuation">,</span> memo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val1 <span class="token operator">+=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left<span class="token punctuation">,</span> memo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">.</span>right<span class="token punctuation">,</span> memo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">int</span> val2 <span class="token operator">=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> memo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> memo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 缓存计算结果</span>
    memo<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li>时间复杂度: O(n)</li> <li>空间复杂度: O(log n), 算上递推系统栈的空间</li></ul> <h6 id="动态规划-13"><a href="#动态规划-13" class="header-anchor">#</a> 动态规划</h6> <p>在上面两种方法, 其实对一个节点偷与不偷得到的最大金钱都没有做记录, 而是需要实时计算.</p> <p><strong>而动态规划其实就是使用状态转移容器来记录状态的变化, 这里可以使用一个长度为 2 的数组, 记录当前节点偷与不偷所得到的的最大金钱.</strong></p> <blockquote><p>确定递归函数的参数和返回值</p></blockquote> <p>这里<strong>要求一个节点偷与不偷的两个状态所得到的金钱, 那么返回值就是一个长度为 2 的数组</strong>. 其实这里的返回数组就是 dp 数组.</p> <p>所以 <strong>dp 数组以及下标的含义: 下标为 0 记录不偷该节点所得到的的最大金钱, 下标为 1 记录偷该节点所得到的最大金钱</strong>.</p> <p><strong>所以本题 dp 数组就是一个长度为 2 的数组</strong>!</p> <p>那么有同学可能疑惑, 长度为 2 的数组怎么标记树中每个节点的状态呢? <strong>别忘了在递归的过程中, 系统栈会保存每一层递归的参数</strong>.</p> <blockquote><p>确定终止条件</p></blockquote> <p>在遍历的过程中, 如果遇到<strong>空节点</strong>的话, 很明显, 无论偷还是不偷都是 0, 所以就返回. 这也相当于 dp 数组的初始化.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>首先明确的是使用<strong>后序遍历</strong>. 因为要通过<strong>递归函数的返回值来做下一步计算</strong>.</p> <ul><li>通过<strong>递归左节点</strong>, 得到左节点偷与不偷的金钱.</li> <li>通过<strong>递归右节点</strong>, 得到右节点偷与不偷的金钱.</li></ul> <blockquote><p>确定单层递归的逻辑</p></blockquote> <p>考虑两种情况, 也就是是否偷当前节点:</p> <ul><li>如果是偷当前节点, 那么左右孩子就不能偷, <code>val1 = cur.val + left[0] + right[0]</code>​; <strong>如果对下标含义不理解就再回顾一下 dp 数组的含义</strong>.</li> <li>如果不偷当前节点, 那么左右孩子就可以偷, 至于到底偷不偷一定是选一个最大的, 所以: <code>val2 = max(left[0], left[1]) + max(right[0], right[1])</code>​;</li></ul> <p>最后当前节点的状态就是 <code>{val2, val1}</code>​; 即:  <strong>{不偷当前节点得到的最大金钱, 偷当前节点得到的最大金钱}.</strong></p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以示例 1 为例, dp 数组状态如下: (<strong>注意用后序遍历的方式推导</strong>)</p> <p><img src="/img/net-img-20230203110031-20240316200108-evupvc4.png" alt=""></p> <p><strong>最后头结点就是 取下标 0 和 下标 1 的最大值就是偷得的最大金钱</strong>.</p> <p>递归三部曲与动规五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 不偷当前节点: Max(左孩子不偷, 左孩子偷) + Max(右孩子不偷, 右孩子偷)</span>
<span class="token comment">// root[0] = Math.max(rob(root.left)[0], rob(root.left)[1]) +</span>
<span class="token comment">// Math.max(rob(root.right)[0], rob(root.right)[1])</span>
<span class="token comment">// 偷当前节点: 左孩子不偷 + 右孩子不偷 + 当前节点偷</span>
<span class="token comment">// root[1] = rob(root.left)[0] + rob(root.right)[0] + root.val;</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">robAction</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  res = {不偷当前节点得到的最大金钱, 偷当前节点得到的最大金钱}</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 递归左右子树</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> left <span class="token operator">=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> right <span class="token operator">=</span> <span class="token function">robAction</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 不偷当前节点得到的最大金钱</span>
    res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> left<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> right<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 偷当前节点得到的最大金钱</span>
    res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> root<span class="token punctuation">.</span>val <span class="token operator">+</span> left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>时间复杂度: O(n), 每个节点只遍历了一次</li> <li>空间复杂度: O(log n), 算上递推系统栈的空间</li></ul> <p>这道题是树形 DP 的入门题目, 通过这道题目大家应该也了解了, 所谓<strong>树形 DP 就是在树上进行递归公式的推导</strong>.</p> <h4 id="买卖股票的最佳时机"><a href="#买卖股票的最佳时机" class="header-anchor">#</a> 买卖股票的最佳时机</h4> <h5 id="买卖股票的最佳时机-121-简单-🌸🔑💯"><a href="#买卖股票的最佳时机-121-简单-🌸🔑💯" class="header-anchor">#</a> 买卖股票的最佳时机(121-简单)🌸🔑💯</h5> <h6 id="题目描述-32"><a href="#题目描述-32" class="header-anchor">#</a> 题目描述</h6> <p>给定一个数组 prices, 它的第 i 个元素 prices[i] 表示一支给定股票第 i 天的价格. 你只能选择 <strong>某一天</strong> 买入这只股票, 并选择在未来的某一个不同的日子卖出该股票. 计算所能获取的最大利润. 返回可以从这笔交易中获取的最大利润. 如果不能获取任何利润, 返回 0.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>示例 <span class="token number">1</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>          输出<span class="token operator">:</span> <span class="token number">5</span>
解释<span class="token operator">:</span> 在第 <span class="token number">2</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">5</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 最大利润 <span class="token operator">=</span> <span class="token number">6</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">5.</span> 
     注意利润不能是 <span class="token number">7</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> 因为卖出价格需要大于买入价格<span class="token punctuation">;</span> 同时<span class="token punctuation">,</span> 你不能在买入前卖出股票<span class="token punctuation">.</span> 
示例 <span class="token number">2</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">0</span>
解释<span class="token operator">:</span> 在这种情况下<span class="token punctuation">,</span> 没有交易完成<span class="token punctuation">,</span> 所以最大利润为 <span class="token number">0.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="贪心算法"><a href="#贪心算法" class="header-anchor">#</a> 贪心算法</h6> <p>因为股票就<strong>买卖一次</strong>, 那么贪心的想法很自然就是<strong>取最左最小值, 取最右最大值</strong>, 那么得到的差值就是最大利润. 这个解法非常容易理解. <strong>只要一直记录前面出现的最小价格, 将这个最小价格作为买入价格, 然后将当前的价格作为售出价格, 滚动更新当前收益是不是最大收益</strong>.</p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 找到一个最小的购入点</span>
    <span class="token keyword">int</span> lowest <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
    <span class="token comment">// res 不断更新, 直到数组循环完毕</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 持续更新最低点</span>
        lowest <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> lowest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 持续更新利润</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> lowest<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h6 id="动态规划-14"><a href="#动态规划-14" class="header-anchor">#</a> 动态规划</h6> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i][0] 表示第 i 天持有股票所得最多现金</strong>, 这里可能有同学疑惑, 本题中只能买卖一次, 持有股票之后哪还有现金呢?</p> <p>其实一开始现金是 0, 那么加入第 i 天买入股票现金就是 -prices[i], 这是一个负数.</p> <p><strong>dp[i][1] 表示第 i 天不持有股票所得最多现金.</strong> <mark><strong>注意这里说的是 &quot;持有&quot;, &quot;持有&quot; 不代表就是当天 &quot;买入&quot;! 也有可能是昨天就买入了, 今天保持持有的状态</strong></mark>​ <strong>. 这个概念在后面的几题也要用到.</strong></p> <p>很多同学把 &quot;持有&quot; 和 &quot;买入&quot; 没区分清楚. 在下面递推公式分析中, 会进一步讲解.</p> <blockquote><p>确定递推公式</p></blockquote> <p>如果<strong>第 i 天持有股票即 dp[i][0]</strong> , 那么可以由两个状态推出来:</p> <ul><li>第 i - 1 天就持有股票, 那么就保持现状, 所得现金就是昨天持有股票的所得现金 即: <strong>dp[i - 1][0]</strong> .</li> <li>第 i 天买入股票, 所得现金就是买入今天的股票后所得现金即:  <strong>-prices[i]</strong> .</li></ul> <p>那么 dp[i][0] 应该选所得现金最大的, 所以 <strong>dp[i][0] = max(dp[i - 1][0], -prices[i])</strong> ;</p> <p>如果<strong>第 i 天不持有股票即 dp[i][1]</strong> , 也可以由两个状态推出来:</p> <ul><li>第 i - 1 天就不持有股票, 那么就保持现状, 所得现金就是昨天不持有股票的所得现金 即: <strong>dp[i - 1][1]</strong> .</li> <li>第 i 天卖出股票, 所得现金就是按照今天股票价格卖出后所得现金即: <strong>prices[i] + dp[i - 1][0]</strong> .</li></ul> <p>同样 dp[i][1] 取最大的, <strong>dp[i][1] = max(dp[i - 1][1], prices[i] + dp[i - 1][0])</strong> ;</p> <p>这样递推公式就分析完了.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>由递推公式 dp[i][0] = max(dp[i - 1][0], -prices[i]); 和 dp[i][1] = max(dp[i - 1][1], prices[i] + dp[i - 1][0]); 可以看出其基础都是要从 dp[0][0] 和 dp[0][1] 推导出来.</p> <p>那么 <strong>dp[0][0] 表示第 0 天持有股票, 此时的持有股票就一定是买入股票了</strong>, 因为不可能有前一天推出来, 所以 dp[0][0] -= prices[0];</p> <p>dp[0][1] 表示第 0 天不持有股票, 不持有股票那么现金就是 0, 所以 dp[0][1] = 0;</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递推公式可以看出 dp[i] 都是由 dp[i - 1] 推导出来的, 那么一定是<strong>从前向后</strong>遍历.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以示例 1, 输入: [7,1,5,3,6,4] 为例, dp 数组状态如下:</p> <p><img src="/img/net-img-20210224225642465-20240316203859-rdoijaa.png" alt="121.买卖股票的最佳时机"></p> <p>dp[5][1] 就是最终结果. 为什么不是 dp[5][0] 呢? <strong>因为本题中不持有股票状态所得金钱一定比持有股票状态得到的多, 因为相当于已经卖出去了</strong>.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prices <span class="token operator">&lt;</span>mark<span class="token operator">&gt;</span> null <span class="token operator">||</span> prices<span class="token punctuation">.</span>length <span class="token operator">&lt;</span><span class="token operator">/</span>mark<span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">int</span> length <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// dp[i][0]代表第 i 天持有股票的最大收益</span>
    <span class="token comment">// dp[i][1]代表第 i 天不持有股票的最大收益</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第 i 天, 持有股票</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第 i 天, 不持有股票</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>从递推公式可以看出, dp[i] 只是依赖于 dp[i - 1] 的状态. 其实也能做一下空间压缩.</p> <h5 id="买卖股票的最佳时机ii-动态规划-122-中等-🌸"><a href="#买卖股票的最佳时机ii-动态规划-122-中等-🌸" class="header-anchor">#</a> 买卖股票的最佳时机II-动态规划(122-中等)🌸</h5> <h6 id="题目描述-33"><a href="#题目描述-33" class="header-anchor">#</a> 题目描述</h6> <p>给定一个数组, 它的第 i 个元素是一支给定股票第 i 天的价格. 设计一个算法来计算所能获取的最大利润. 可以<strong>尽可能地完成更多的交易(多次买卖一支股票)</strong> . 注意: 不能同时参与多笔交易(你必须在再次购买前出售掉之前的股票).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>示例 <span class="token number">1</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">7</span>
解释<span class="token operator">:</span> 在第 <span class="token number">2</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">3</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">4.</span> 
随后<span class="token punctuation">,</span> 在第 <span class="token number">4</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">5</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">3.</span> 
最大总利润为 <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">7.</span> 
示例 <span class="token number">2</span><span class="token operator">:</span> 
输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>     输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 在第 <span class="token number">1</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">5</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">4.</span> 
最大总利润为 <span class="token number">4</span> <span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="贪心算法-2"><a href="#贪心算法-2" class="header-anchor">#</a> 贪心算法</h6> <p>本题也可以用贪心算法, 可以参考对应的题解. 参考 买卖股票的最佳时机II(122-中等).</p> <h6 id="动态规划-15"><a href="#动态规划-15" class="header-anchor">#</a> 动态规划</h6> <p>本题和 <code>121-买卖股票的最佳时机</code>​ 的唯一区别是本题股票<strong>可以买卖多次了</strong>(注意只有一只股票, 所以再次购买前要出售掉之前的股票). 在动规五部曲中, 这个区别主要是<strong>体现在递推公式</strong>上, 其他都和 <code>121-买卖股票的最佳时机</code>​ 几乎一样. 所以重点讲一讲递推公式.</p> <p>这里重申一下 dp 数组的含义:</p> <ul><li><strong>dp[i][0] 表示第 i 天持有股票所得现金</strong>.</li> <li>**dp[i][1] 表示第 i 天不持有股票所得最多现金. **</li></ul> <p>如果<strong>第 i 天持有股票即 dp[i][0]</strong> , 那么可以由两个状态推出来:</p> <ul><li><strong>第 i - 1 天就持有股票</strong>, 那么就保持现状, 所得现金就是昨天持有股票的所得现金 即: dp[i - 1][0].</li> <li><strong>第 i 天买入股票</strong>, 所得现金就是昨天不持有股票的所得现金减去今天的股票价格 即: dp[i - 1][1] - prices[i].</li></ul> <p>注意这里和 <code>121-买卖股票的最佳时机</code>​ 唯一不同的地方, 就是<strong>推导 dp[i][0]的时候, 第 i 天买入股票的情况</strong>. 在 <code>121-买卖股票的最佳时机</code>​  中, 因为股票全程只能买卖一次, 所以如果买入股票, 那么第 i 天持有股票即 dp[i][0] 一定就是 -prices[i]. 而本题, 因为一只股票可以买卖多次, 所以<strong>当第 i 天买入股票的时候, 所持有的现金可能有之前买卖过的利润</strong>. 那么第 i 天持有股票即 dp[i][0], 如果是第 i 天买入股票, 所得现金就是昨天不持有股票的所得现金 减去 今天的股票价格 即: dp[i - 1][1] - prices[i].</p> <p>再来看看如果<strong>第 i 天不持有股票即 dp[i][1]</strong>  的情况, 依然可以由两个状态推出来:</p> <ul><li><strong>第 i - 1 天就不持有股票</strong>, 那么就保持现状, 所得现金就是昨天不持有股票的所得现金 即: dp[i - 1][1].</li> <li><strong>第 i 天卖出股票</strong>, 所得现金就是按照今天股票价格卖出后所得现金即: prices[i] + dp[i - 1][0].</li></ul> <p>注意这里和 <code>121-买卖股票的最佳时机</code>​ 就是一样的逻辑, <strong>卖出股票收获利润(可能是负值)天经地义</strong>!</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">// 创建二维数组存储状态</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                   <span class="token comment">// 初始状态</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第 i 天, 不持有股票</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第 i 天, 持有股票</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 卖出股票收益高于持有股票收益, 因此取[0]</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>大家可以本题和 <code>121-买卖股票的最佳时机</code>​  ****  的代码几乎一样, 唯一的区别在:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>这正是因为本题的股票可以买卖多次</strong>! 所以买入股票的时候, 可能会有之前买卖的利润即: dp[i - 1][1], 所以 <strong>dp[i - 1][1] - prices[i]</strong> .</p> <p>本题也能优化空间, 具体如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 0表示持有, 1表示卖出</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 前一天持有; 既然不限制交易次数, 那么再次买股票时, 要加上之前的收益</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 前一天卖出; 或当天卖出, 当天卖出, 得先持有</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="买卖股票的最佳时机含手续费-714-中等-🌸"><a href="#买卖股票的最佳时机含手续费-714-中等-🌸" class="header-anchor">#</a> 买卖股票的最佳时机含手续费(714-中等)🌸</h5> <h6 id="题目描述-34"><a href="#题目描述-34" class="header-anchor">#</a> 题目描述</h6> <p>给定一个整数数组 prices, 其中第 i 个元素代表了第 i 天的股票价格; 非负整数 fee 代表了交易股票的手续费用. 可以无限次地完成交易, 但是每笔交易都需要付手续费. 如果已经购买了一个股票, 在卖出它之前就不能再继续购买股票了. 返回获得利润的最大值. 注意: 这里的一笔交易指买入持有并卖出股票的整个过程, 每笔交易只需要为支付一次手续费.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fee <span class="token operator">=</span> <span class="token number">2</span>   输出<span class="token operator">:</span> <span class="token number">8</span>
解释<span class="token operator">:</span> 能够达到的最大利润<span class="token operator">:</span>  
在此处买入 prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
在此处卖出 prices<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span>
在此处买入 prices<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
在此处卖出 prices<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>
总利润<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">8</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">9</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-16"><a href="#动态规划-16" class="header-anchor">#</a> 动态规划</h6> <p>相对于 <strong>122-买卖股票的最佳时机 II</strong>, 本题<strong>只需要在计算卖出操作的时候减去手续费就可以了, 代码几乎是一样的</strong>.</p> <p>唯一差别在于递推公式部分, 所以本篇也就不按照动规五部曲详细讲解了, 主要讲解一下递推公式部分.</p> <p>这里重申一下 dp 数组的含义:</p> <ul><li><strong>dp[i][0] 表示第 i 天持有股票所省最多现金</strong>.</li> <li><strong>dp[i][1] 表示第 i 天不持有股票所得最多现金</strong>.</li></ul> <p>如果第 i 天持有股票即 dp[i][0], 那么可以由两个状态推出来:</p> <ul><li>第 i - 1 天就持有股票, 那么就保持现状, 所得现金就是昨天持有股票的所得现金 即: dp[i - 1][0].</li> <li>第 i 天买入股票, 所得现金就是昨天不持有股票的所得现金减去 今天的股票价格 即: dp[i - 1][1] - prices[i].</li></ul> <p>所以: <strong>dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i])</strong> ;</p> <p>在来看看如果第 i 天不持有股票即 dp[i][1] 的情况, 依然可以由两个状态推出来:</p> <ul><li>第 i - 1 天就不持有股票, 那么就保持现状, 所得现金就是昨天不持有股票的所得现金 即: dp[i - 1][1].</li> <li>第 i 天卖出股票, 所得现金就是按照今天股票价格卖出后所得现金, <strong>注意这里需要有手续费了</strong>即: dp[i - 1][0] + prices[i] - fee.</li></ul> <p>所以: <strong>dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] + prices[i] - fee)</strong> ;</p> <p>本题和 ​<strong>122-买卖股票的最佳时机II</strong> 的区别就是这里<strong>需要多一个减去手续费</strong>的操作.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">,</span> <span class="token keyword">int</span> fee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// dp 定义第 i 天持股/不持股 所得最多现金</span>
    <span class="token comment">// 0 : 持股(买入)</span>
    <span class="token comment">// 1 : 不持股(售出)</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第i天持有股票, 取前一天持有股票和前一天不持有股票减去今天股票价格的最大值</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第i天不持有股票, 如果需要卖出时需要减去手续费</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> fee<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="买卖股票的最佳时机iii-123-困难-🌸💯"><a href="#买卖股票的最佳时机iii-123-困难-🌸💯" class="header-anchor">#</a> 买卖股票的最佳时机III(123-困难)🌸💯</h5> <h6 id="题目"><a href="#题目" class="header-anchor">#</a> 题目</h6> <p>给定一个数组, 它的第 i 个元素是一支给定的股票在第 i 天的价格. 设计一个算法来计算所能获取的最大利润. <strong>最多可以完成两笔交易</strong>. 注意: 不能同时参与多笔交易(必须<strong>在再次购买前出售掉之前的股票</strong>).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">6</span>
解释<span class="token operator">:</span> 在第 <span class="token number">4</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">6</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">.</span> 
     随后<span class="token punctuation">,</span> 在第 <span class="token number">7</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">8</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">.</span> 
输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>        输出<span class="token operator">:</span> <span class="token number">4</span>  
解释<span class="token operator">:</span> 在第 <span class="token number">1</span> 天<span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">5</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token punctuation">.</span>    
     注意你不能在第 <span class="token number">1</span> 天和第 <span class="token number">2</span> 天接连购买股票<span class="token punctuation">,</span> 之后再将它们卖出<span class="token punctuation">.</span>    
     因为这样属于同时参与了多笔交易<span class="token punctuation">,</span> 你必须在再次购买前出售掉之前的股票<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-17"><a href="#动态规划-17" class="header-anchor">#</a> 动态规划</h6> <p>这道题目相对 <strong>121-买卖股票的最佳时机</strong> 和 <strong>122-买卖股票的最佳时机 II</strong> 难了不少. 关键在于<strong>至多买卖两次, 这意味着可以买卖一次, 可以买卖两次, 也可以不买卖</strong>.</p> <p>接来下用动态规划五部曲详细分析一下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>一天一共就有<strong>五个状态</strong>:</p> <ol start="0"><li>没有操作(其实也可以不设置这个状态)</li> <li><strong>第一次持有股票</strong></li> <li><strong>第一次不持有股票</strong></li> <li><strong>第二次持有股票</strong></li> <li><strong>第二次不持有股票</strong></li></ol> <p><strong>dp[i][j] 中 i 表示第 i 天, j 为 [0 - 4] 五个状态, dp[i][j] 表示第 i 天在状态 j 下所剩的最大现金</strong>.</p> <p>需要注意: dp[i][1], <strong>表示的是第 i 天, 持有股票的状态, 并不是说一定要第 i 天买入股票, 这是容易陷入的误区</strong>. 例如 <strong>dp[i][1], 并不是说 第 i 天一定买入股票(这里强调的是持有), 有可能 第 i - 1 天 就买入了, 那么 dp[i][1] 延续持有股票的这个状态</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>达到 <strong>dp[i][1] 状态</strong>, 有两个具体操作:</p> <ul><li>操作一: 第 i 天买入股票了, 那么 dp[i][1] = dp[i - 1][0] - prices[i].</li> <li>操作二: 第 i 天没有操作, 而是沿用前一天买入的状态, 即: dp[i][1] = dp[i - 1][1].</li></ul> <p>那么 dp[i][1] 究竟选 dp[i - 1][0] - prices[i], 还是 dp[i - 1][1] 呢?</p> <p>一定是<strong>选最大</strong>的, 所以 dp[i][1] = max(dp[i-1][0] - prices[i], dp[i - 1][1]);</p> <p>同理 <strong>dp[i][2]</strong>  也有两个操作:</p> <ul><li>操作一: 第 i 天卖出股票了, 那么 dp[i][2] = dp[i - 1][1] + prices[i].</li> <li>操作二: 第 i 天没有操作, 沿用前一天卖出股票的状态, 即: dp[i][2] = dp[i - 1][2].</li></ul> <p>所以 dp[i][2] = max(dp[i - 1][1] + prices[i], dp[i - 1][2]).</p> <p>同理可推出剩下状态部分:</p> <ul><li>dp[i][3] = max(dp[i - 1][3], dp[i - 1][2] - prices[i]);</li> <li>dp[i][4] = max(dp[i - 1][4], dp[i - 1][3] + prices[i]);</li></ul> <blockquote><p>dp数组如何初始化</p></blockquote> <p>第 0 天没有操作, 这个最容易想到, 就是 0, 即: <strong>dp[0][0] = 0</strong>;</p> <p>第 0 天做第一次买入的操作, <strong>dp[0][1] = -prices[0]</strong> ;</p> <p>第 0 天做第一次卖出的操作, 这个初始值应该是多少呢?</p> <p>此时还没有买入, 怎么就卖出呢? 其实大家可以理解当天买入, 当天卖出, 所以 <strong>dp[0][2] = 0</strong>;</p> <p>第 0 天第二次买入操作, 初始值应该是多少呢? 应该不少同学疑惑, 第一次还没买入呢, 怎么初始化第二次买入呢?</p> <p>第二次买入依赖于第一次卖出的状态, 其实相当于第 0 天第一次买入了, 第一次卖出了, 然后再买入一次(第二次买入), 那么现在手头上没有现金, 只要买入, 现金就做相应的减少.</p> <p>所以第二次买入操作, 初始化为: <strong>dp[0][3] = -prices[0]</strong> ;</p> <p>同理第二次卖出初始化 <strong>dp[0][4] = 0</strong>;</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式其实已经可以看出, 一定是<strong>从前向后遍历</strong>, 因为 dp[i], 依靠 dp[i - 1] 的数值.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以输入 [1,2,3,4,5] 为例</p> <p><img src="/img/net-img-20201228181724295-20230310134201291-20240317104954-49c7ky4.png" alt="123.买卖股票的最佳时机 III"></p> <p>可以看到红色框为<strong>最后两次卖出的状态</strong>. 现在<strong>最大的时候一定是卖出的状态, 而两次卖出的状态现金最大一定是最后一次卖出</strong>. 也可以这么理解: 如果第一次卖出已经是最大值了, 那么可以在当天立刻买入再立刻卖出. 所以 dp[4][4] 已经包含了 dp[4][2] 的情况. 也就是说<strong>第二次卖出手里所剩的钱一定是最多的</strong>.</p> <p>所以最终最大利润是 dp[4][4].</p> <p>分析完了, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// 边界判断, 题目中 length &gt;= 1, 所以可省去</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 定义 5 种状态:</span>
    <span class="token comment">// 0: 没有操作, 1: 第一次买入, 2: 第一次卖出, 3: 第二次买入, 4: 第二次卖出</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化第二次买入的状态是确保 最后结果是最多两次买卖的最大利润</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>时间复杂度: O(n)</li> <li>空间复杂度: O(n × 5)</li></ul> <h5 id="买卖股票的最佳时机iv-188-困难-🌸💯"><a href="#买卖股票的最佳时机iv-188-困难-🌸💯" class="header-anchor">#</a> 买卖股票的最佳时机IV(188-困难)🌸💯</h5> <h6 id="题目描述-35"><a href="#题目描述-35" class="header-anchor">#</a> 题目描述</h6> <p>给定一个整数数组 prices, 它的第 i 个元素 prices[i] 是一支给定的股票在第 i 天的价格. 设计一个算法来计算所能获取的最大利润. <strong>最多可以完成 k 笔交易</strong>. 注意: 不能同时参与多笔交易(必须在<strong>再次购买前出售掉之前的股票</strong>).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> k <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">7</span>
解释<span class="token operator">:</span> 在第 <span class="token number">2</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> 的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">3</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span> 的时候卖出<span class="token punctuation">,</span> 
这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">6</span><span class="token operator">-</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token number">4.</span> 随后<span class="token punctuation">,</span> 在第 <span class="token number">5</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> 的时候买入<span class="token punctuation">,</span> 在第 <span class="token number">6</span> 天 <span class="token punctuation">(</span>股票价格 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> 
的时候卖出<span class="token punctuation">,</span> 这笔交易所能获得利润 <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token number">3.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-18"><a href="#动态规划-18" class="header-anchor">#</a> 动态规划</h6> <p>这道题目可以说是<strong>123买卖股票的最佳时机 III</strong>的进阶版, 这里要求至多有 k 次交易.</p> <p>动规五部曲, 分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>在 <strong>123-买卖股票的最佳时机 III</strong> 中, 定义了一个二维 dp 数组, 本题其实依然可以用一个二维 dp 数组.</p> <p>使用二维数组 <mark><strong>dp[i][j]: 第 i 天的状态为 j, 所剩下的最大现金是 dp[i][j]</strong></mark> .</p> <p>j 的状态表示为:</p> <ul><li>0 表示不操作</li> <li>1 第一次买入</li> <li>2 第一次卖出</li> <li>3 第二次买入</li> <li>4 第二次卖出</li> <li>...</li></ul> <p><strong>大家应该发现规律了, 除了 0 以外,</strong> <mark><strong>偶数的状态就是卖出, 奇数就是买入</strong></mark>.</p> <p>题目要求是至多有 K 笔交易, 那么 j 的范围就定义为 <strong>2 * k + 1</strong> 就可以了.</p> <blockquote><p>确定递推公式</p></blockquote> <p>还要强调一下: dp[i][1], <strong>表示的是第 i 天, 持有股票的状态, 并不是说一定要第 i 天买入股票, 这是容易陷入的误区</strong>.</p> <p>达到 dp[i][1] 状态, 有两个具体操作:</p> <ul><li>操作一: 第 i 天买入股票了, 那么 dp[i][1] = dp[i - 1][0] - prices[i].</li> <li>操作二: 第 i 天没有操作, 而是沿用前一天买入的状态, 即: dp[i][1] = dp[i - 1][1].</li></ul> <p>选最大的, 所以 dp[i][1] = max(dp[i - 1][0] - prices[i], dp[i - 1][1]);</p> <p>同理 dp[i][2] 也有两个操作:</p> <ul><li>操作一: 第 i 天卖出股票了, 那么 dp[i][2] = dp[i - 1][1] + prices[i].</li> <li>操作二: 第 i 天没有操作, 沿用前一天卖出股票的状态, 即: dp[i][2] = dp[i - 1][2].</li></ul> <p>所以 dp[i][2] = max(dp[i - 1][1] + prices[i], dp[i - 1][2]).</p> <p>同理可以类比剩下的状态, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">*</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>本题和 <strong>123-买卖股票的最佳时机 III</strong> 最大的区别就是这里要<strong>类比 j 为奇数是买, 偶数是卖的状态</strong>.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>第 0 天没有操作, 这个最容易想到, 就是 0, 即: dp[0][0] = 0;</p> <p>第 0 天做第一次买入的操作, dp[0][1] = -prices[0];</p> <p>第 0 天做第一次卖出的操作, 这个初始值应该是多少呢?</p> <p>此时还没有买入, 怎么就卖出呢?  其实大家可以理解当天买入, 当天卖出, 所以 dp[0][2] = 0;</p> <p>第 0 天第二次买入操作, 初始值应该是多少呢? 应该不少同学疑惑, 第一次还没买入呢, 怎么初始化第二次买入呢? 第二次买入依赖于第一次卖出的状态, 其实相当于第 0 天第一次买入了, 第一次卖出了, 然后在买入一次(第二次买入), 那么现在手头上没有现金, 只要买入, 现金就做相应的减少.</p> <p>所以第二次买入操作, 初始化为: dp[0][3] = -prices[0];</p> <p>第二次卖出初始化 dp[0][4] = 0;</p> <p>**所以同理可以推出 dp[0][j] 当 j 为奇数的时候都初始化为 -prices[0]. **</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">*</span> k<span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>在初始化的地方同样要类比 j 为偶数是卖, 奇数是买的状态</strong>.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式其实已经可以看出, 一定是从前向后遍历, 因为 dp[i], 依靠 dp[i - 1] 的数值.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以输入 [1,2,3,4,5], k=2 为例.</p> <p><img src="/img/net-img-20201229100358221-20240317111120-rqcfzvp.png" alt="188.买卖股票的最佳时机 IV"></p> <p><strong>最后一次卖出, 一定是利润最大</strong>的, dp[prices.size() - 1][2 * k] 即红色部分就是最后求解.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// [天数][交易次数][是否持有股票]</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// dp 数组初始化</span>
    <span class="token comment">// 初始化所有的交易次数是为确保 最后结果是最多 k 次买卖的最大利润</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// dp 方程, 0表示不持有/卖出, 1表示持有/买入</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>时间复杂度: O(n * k), 其中 n 为 prices 的长度</li> <li>空间复杂度: O(n * k)</li></ul> <h5 id="最佳买卖股票时机含冷冻期-309-中等-🌸"><a href="#最佳买卖股票时机含冷冻期-309-中等-🌸" class="header-anchor">#</a> 最佳买卖股票时机含冷冻期(309-中等)🌸</h5> <h6 id="题目描述-36"><a href="#题目描述-36" class="header-anchor">#</a> 题目描述</h6> <p>给定一个整数数组, 其中第 i 个元素代表了第 i 天的股票价格. 设计一个算法计算出最大利润. 在满足以下约束条件下, 你<strong>可以尽可能地完成更多的交易</strong>(多次买卖一支股票):</p> <ul><li>不能同时参与多笔交易(必须在再次购买前出售掉之前的股票).</li> <li>卖出股票后, <strong>无法在第二天买入股票 (即冷冻期为 1 天)</strong> .</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">3</span> 
解释<span class="token operator">:</span> 对应的交易状态为<span class="token operator">:</span> <span class="token punctuation">[</span>买入<span class="token punctuation">,</span> 卖出<span class="token punctuation">,</span> 冷冻期<span class="token punctuation">,</span> 买入<span class="token punctuation">,</span> 卖出<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-19"><a href="#动态规划-19" class="header-anchor">#</a> 动态规划</h6> <p>相对于 <strong>122-买卖股票的最佳时机II</strong>, 本题加上了一个冷冻期. 在 <strong>122-买卖股票的最佳时机II</strong> 中有两个状态, 持有股票后的最多现金, 和不持有股票的最多现金.</p> <p>动规五部曲, 分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><strong>dp[i][j], 第 i 天状态为 j, 所剩的最多现金为 dp[i][j]</strong> .</p> <p><strong>其实本题很多同学搞的比较懵, 是因为出现冷冻期之后, 状态其实是比较复杂度</strong>, 例如今天买入股票, 今天卖出股票, 今天是冷冻期, 都是不能操作股票的.</p> <p>具体可以区分出如下<strong>四个状态</strong>:</p> <ul><li><p>状态一: <strong>持有股票状态</strong>(今天买入股票, 或者是之前就买入了股票然后没有操作, 一直持有)</p></li> <li><p><strong>不持有股票状态, 这里就有两种卖出股票状态</strong></p> <ul><li>状态二: <strong>保持卖出股票的状态</strong>(两天前就卖出了股票, 度过一天冷冻期. 或者是前一天就是卖出股票状态, 一直没操作)</li> <li>状态三: <strong>今天卖出股票</strong></li></ul></li> <li><p>状态四: <strong>今天为冷冻期状态</strong>, 但冷冻期状态不可持续, 只有一天!</p></li></ul> <p><img src="/img/net-img-518d5baaf33f4b2698064f8efb42edbf-20240317120213-9qw86bq.png" alt=""></p> <p>j 的状态为:</p> <ul><li>0: 状态一</li> <li>1: 状态二</li> <li>2: 状态三</li> <li>3: 状态四</li></ul> <p>很多题解为什么讲的比较模糊, 是因为把这四个状态合并成三个状态了, 其实就是把状态二和状态四合并在一起了.</p> <p>从代码上来看确实可以合并, 但从逻辑上分析合并之后就很难理解了, 所以下面的讲解是按照这四个状态来的, 把每一个状态分析清楚.</p> <p>如果按顺序来刷的话, 会发现 <strong>买卖股票最佳时机 1, 2, 3, 4 的题目讲解中</strong>. 「今天卖出股票」是没有单独列出一个状态的归类为「不持有股票的状态」, 而本题为什么要单独列出「今天卖出股票」 一个状态呢?</p> <p>因为本题有冷冻期, 而<strong>冷冻期的前一天, 只能是「今天卖出股票」状态</strong>, 如果是「不持有股票状态」那么就很模糊, 因为不一定是卖出股票的操作.</p> <p><strong>注意这里的每一个状态, 例如状态一, 是持有股票股票状态并不是说今天一定就买入股票, 而是说保持买入股票的状态即: 可能是前几天买入的, 之后一直没操作, 所以保持买入股票的状态</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p><strong>达到买入股票状态</strong>(状态一)即: dp[i][0], 有两个具体操作:</p> <ul><li><p>操作一: 前一天就是持有股票状态(状态一), dp[i][0] = dp[i - 1][0].</p></li> <li><p>操作二: 今天买入了, 有两种情况:</p> <ul><li>前一天是冷冻期(状态四), dp[i - 1][3] - prices[i].</li> <li>前一天是保持卖出股票的状态(状态二), dp[i - 1][1] - prices[i].</li></ul></li></ul> <p>那么 <strong>dp[i][0] = max(dp[i - 1][0], dp[i - 1][3] - prices[i], dp[i - 1][1] - prices[i])</strong> ;</p> <p><strong>达到保持卖出股票状态</strong>(状态二)即: dp[i][1], 有两个具体操作:</p> <ul><li>操作一: 前一天就是状态二.</li> <li>操作二: 前一天是冷冻期(状态四).</li></ul> <p><strong>dp[i][1] = max(dp[i - 1][1], dp[i - 1][3])</strong> ;</p> <p><strong>达到今天就卖出股票状态</strong>(状态三), 即: dp[i][2] , 只有一个操作: 昨天一定是持有股票状态(状态一), 今天卖出. 即: <strong>dp[i][2] = dp[i - 1][0] + prices[i]</strong> ;</p> <p><strong>达到冷冻期状态</strong>(状态四), 即: dp[i][3], 只有一个操作: 昨天卖出了股票(状态三).</p> <p><strong>dp[i][3] = dp[i - 1][2]</strong> ;</p> <p>综上分析, 递推代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>dp数组如何初始化</p></blockquote> <p>这里主要讨论一下第 0 天如何初始化.</p> <p>如果是持有股票状态(状态一)那么: dp[0][0] = -prices[0], 一定是当天买入股票.</p> <p>保持卖出股票状态(状态二), 这里其实从「状态二」的定义来说, 很难明确应该初始多少, 这种情况就看递推公式需要给他初始成什么数值.</p> <p>如果 i 为 1, 第 1 天买入股票, 那么递归公式中需要计算 dp[i - 1][1] - prices[i], 即 dp[0][1] - prices[1], 那么大家感受一下 dp[0][1] (即第 0 天的状态二)应该初始成多少, 只能初始为 0. 想一想如果初始为其他数值, 是第 1 天买入股票后 手里还剩的现金数量是不是就不对了.</p> <p>今天卖出了股票(状态三), 同上分析, dp[0][2] 初始化为 0, dp[0][3] 也初始为 0.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式上可以看出, dp[i] 依赖于 dp[i-1], 所以是从前向后遍历.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以 [1,2,3,0,2] 为例, dp 数组如下:</p> <p><img src="/img/net-img-2021032317451040-20240317120213-b2ffbc2.png" alt="309.最佳买卖股票时机含冷冻期"></p> <p>最后结果是取 状态二, 状态三, 和状态四的最大值, 不少同学会把状态四忘了, 状态四是冷冻期, <strong>最后一天如果是冷冻期也可能是最大值</strong>.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prices <span class="token operator">==</span> null <span class="token operator">||</span> prices<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// bad case</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// dp 公式</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>时间复杂度: O(n)</li> <li>空间复杂度: O(n)</li></ul> <h4 id="子序列类问题"><a href="#子序列类问题" class="header-anchor">#</a> 子序列类问题</h4> <h5 id="摆动序列-376-中等-🌸"><a href="#摆动序列-376-中等-🌸" class="header-anchor">#</a> 摆动序列(376-中等)🌸</h5> <h6 id="题目描述-37"><a href="#题目描述-37" class="header-anchor">#</a> 题目描述</h6> <p>如果<strong>连续数字之间的差严格地在正数和负数之间交替, 则数字序列称为摆动序列</strong>. 第一个差(如果存在的话)可能是正数或负数. 少于两个元素的序列也是摆动序列.</p> <p>例如 [1,7,4,9,2,5] 是一个摆动序列, 因为差值 (6,-3,5,-7,3) 是正负交替出现的. 相反, [1,4,7,2,5]  和 [1,7,4,5,5] 不是摆动序列, 第一个序列是因为它的前两个差值都是正数, 第二个序列是因为它的最后一个差值为零.</p> <p><strong>给定一个整数序列, 返回作为摆动序列的最长子序列的长度</strong>. 通过从原始序列中<mark><strong>删除一些(也可以不删除)元素</strong></mark>来获得子序列, 剩下的元素保持其原始顺序.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">6</span>   解释<span class="token operator">:</span> 整个序列均为摆动序列<span class="token punctuation">.</span>
输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">7</span>  解释<span class="token operator">:</span> 这个序列包含几个长度为 <span class="token number">7</span> 摆动序列<span class="token punctuation">,</span> 其中一个可为 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
输入<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/wiggle-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/wiggle-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-20"><a href="#动态规划-20" class="header-anchor">#</a> 动态规划</h6> <p>很容易可以发现, 对于当前考虑的这个数, <strong>要么是作为山峰(即 nums[i] &gt; nums[i - 1]), 要么是作为山谷(即 nums[i] &lt; nums[i - 1])</strong> .</p> <ul><li>设 dp 状态 <code>dp[i][0]</code>​, 表示考虑<strong>前 i 个数, 第 i 个数作为山峰的摆动子序列的最长长度.</strong></li> <li>设 dp 状态 <code>dp[i][1]</code>​, 表示考虑<strong>前 i 个数, 第 i 个数作为山谷的摆动子序列的最长长度.</strong></li></ul> <p>则转移方程为:</p> <ul><li>​<code>dp[i][0] = max(dp[i][0], dp[j][1] + 1)</code>​, 其中 <code>0 &lt; j &lt; i</code>​ 且 <code>nums[j] &lt; nums[i]</code>​, 表示将 nums[i] 接到前面某个山谷后面, 作为<strong>山峰</strong>.</li> <li>​<code>dp[i][1] = max(dp[i][1], dp[j][0] + 1)</code>​, 其中 <code>0 &lt; j &lt; i</code>​ 且 <code>nums[j] &gt; nums[i]</code>​, 表示将 nums[i] 接到前面某个山峰后面, 作为<strong>山谷</strong>.</li></ul> <p>初始状态: 由于一个数可以接到前面的某个数后面, 也可以以自身为子序列的起点, 所以初始状态为: <code>dp[0][0] = dp[0][1] = 1</code>​.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">wiggleMaxLength</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 0 i-作为波峰的最大长度</span>
    <span class="token comment">// 1 i-作为波谷的最大长度</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// i 自己可以成为波峰或者波谷</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// i 是波谷</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// i 是波峰</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="最长递增序列-300-中等-🌸💯"><a href="#最长递增序列-300-中等-🌸💯" class="header-anchor">#</a> 最长递增序列(300-中等)🌸💯</h5> <h6 id="题目描述-38"><a href="#题目描述-38" class="header-anchor">#</a> 题目描述</h6> <p>给你一个整数数组 nums, 找到其中<strong>最长严格递增子序列的长度</strong>. 子序列是由数组派生而来的序列, 删除(或不删除)数组中的元素而不改变其余元素的顺序. 例如, [3,6,2,7] 是数组 [0,3,1,6,2,2,7] 的子序列.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">4</span>  解释<span class="token operator">:</span> 最长递增子序列是 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 因此长度为 <span class="token number">4.</span> 
输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>    输出<span class="token operator">:</span> <span class="token number">4</span>
输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/longest-increasing-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-increasing-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-21"><a href="#动态规划-21" class="header-anchor">#</a> 动态规划</h6> <p>首先要明确什么是子序列, &quot;子序列是由数组派生而来的序列, 删除(或不删除)数组中的元素而不改变其余元素的顺序&quot;. <strong>子序列问题是动态规划解决的经典问题</strong>, 当前下标 i 的递增子序列长度, 其实和 i 之前的下表 j 的子序列长度有关系, 那又是什么样的关系呢.</p> <p>接下来, 依然用动规五部曲来详细分析一波:</p> <blockquote><p>dp[i]的定义</p></blockquote> <p>本题中, 正确定义 dp 数组的含义十分重要.</p> <p><mark><strong>dp[i] 表示 i 之前包括 i 的以 nums[i] 结尾的最长递增子序列的长度</strong></mark>.</p> <p>为什么一定表示 &quot;以 nums[i] 结尾的最长递增子序&quot;, 因为在做<strong>递增比较</strong>的时候, 如果比较 nums[j] 和 nums[i] 的大小, 那么<strong>两个递增子序列一定分别以 nums[j] 为结尾 和 nums[i] 为结尾</strong>, 要不然这个比较就没有意义了, 不是尾部元素的比较. 那么如何算递增呢.</p> <blockquote><p>状态转移方程</p></blockquote> <p><mark><strong>位置 i 的最长升序子序列等于 j 从 0 到 i - 1 各个位置的最长升序子序列 +1 的最大值.</strong></mark></p> <p>所以: <code>if (nums[i] &gt; nums[j]) dp[i] = max(dp[i], dp[j] + 1)</code>​;</p> <p><strong>注意这里不是要 dp[i] 与 dp[j] + 1 进行比较, 而是要取 dp[j] + 1 的最大值</strong>.</p> <blockquote><p>dp[i]的初始化</p></blockquote> <p>每一个 i, 对应的 <code>dp[i]</code>​(即最长递增子序列)起始大小至少都是 1.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>dp[i] 是有 0 到 i - 1 各个位置的最长递增子序列推导而来, 那么遍历 i 一定是<strong>从前向后</strong>遍历.</p> <p><strong>j 其实就是遍历 0 到 i - 1</strong>, 那么是从前到后, 还是从后到前遍历都无所谓, 只要把 0 到 i - 1 的元素都遍历了就行了. 所以默认习惯从前向后遍历.</p> <p>遍历 i 的循环在外层, 遍历 j 则在内层, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> result<span class="token punctuation">)</span> result <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 取长的子序列</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>输入: [0,1,0,3,2], dp 数组的变化如下:</p> <p><img src="/img/net-img-20210110170945618-20240317124305-yg2ep3r.jpg" alt="300.最长上升子序列"></p> <p>以上五部分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果i的位置的元素大于之前的某个元素, 则可以在之前的最长上升子序列长度上加1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>时间复杂度: O(n^2)</li> <li>空间复杂度: O(n)</li></ul> <h5 id="最长连续递增序列-674-中等-🌸"><a href="#最长连续递增序列-674-中等-🌸" class="header-anchor">#</a> 最长连续递增序列(674-中等)🌸</h5> <h6 id="题目描述-39"><a href="#题目描述-39" class="header-anchor">#</a> 题目描述</h6> <p>给定一个<strong>未经排序</strong>的整数数组, 找到最长且<strong>连续递增的子序列</strong>, 并返回该序列的长度. 连续递增的子序列 可以由两个下标 l 和 r(l &lt; r)确定, 如果对于每个 l &lt;= i &lt; r, 都有 nums[i] &lt; nums[i + 1] , 那么子序列 [nums[l], nums[l + 1], ..., nums[r - 1], nums[r]] 就是连续递增子序列.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">3</span>
解释<span class="token operator">:</span> 最长连续递增序列是 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 长度为<span class="token number">3.</span> 
尽管 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span> 也是升序的子序列<span class="token punctuation">,</span> 但它不是连续的<span class="token punctuation">,</span> 因为 <span class="token number">5</span> 和 <span class="token number">7</span> 在原数组里被 <span class="token number">4</span> 隔开<span class="token punctuation">.</span>  
输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">1</span>
解释<span class="token operator">:</span> 最长连续递增序列是 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 长度为<span class="token number">1.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/longest-continuous-increasing-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-continuous-increasing-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-22"><a href="#动态规划-22" class="header-anchor">#</a> 动态规划</h6> <p>本题相对于 <strong>300-最长递增子序列</strong> 最大的区别在于 &quot;连续&quot;. 本题要求的是最长<strong>连续</strong>递增序列.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i]: 以下标 i 为结尾的连续递增的子序列长度为 dp[i]</strong></mark> .</p> <p>注意这里的定义, 一定是以下标 i 为结尾, <strong>并不是说一定以下标 0 为起始位置</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p><strong>如果 nums[i] &gt; nums[i - 1], 那么以 i 为结尾的连续递增的子序列长度 一定等于 以 i - 1 为结尾的连续递增的子序列长度 + 1.</strong></p> <p>即: <strong>dp[i] = dp[i - 1] + 1</strong>;</p> <p>注意这里就体现出和动态规划: <strong>300-最长递增子序列</strong>的区别! 因为本题要求<strong>连续递增子序列, 所以就只要比较 nums[i] 与 nums[i - 1]</strong> , 而不用去挨着比较 <code>nums[j]</code>​(j 是在 0 到 i 之间遍历) 与 nums[i].</p> <p>既然不用 j 了, 那么也<strong>不用两层 for 循环</strong>, 本题一层 for 循环就行, 比较 nums[i] 和 nums[i - 1].</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>以下标 i 为结尾的连续递增的子序列长度<strong>最少也应该是 1</strong>, 即就是 nums[i] 这一个元素. 所以 dp[i] 应该初始 1.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递推公式上可以看出, dp[i + 1] 依赖 dp[i], 所以一定是<strong>从前向后</strong>遍历.</p> <p>本文在确定递推公式的时候也说明了为什么本题只需要一层 for 循环, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 连续记录</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>已输入 nums = [1,3,5,4,7] 为例, dp 数组状态如下:</p> <p><img src="/img/net-img-20210204103529742-20240317125223-qa9d5if.jpg" alt="674.最长连续递增序列"></p> <p>**注意这里要取 dp[i] 里的最大值, 所以 dp[2] 才是结果! 滚动更新结果即可. **</p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">findLengthOfLCIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// dp[i]代表当前下标结尾的最大连续上升子序列长度</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 出现上升的情况 更新dp</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 持续更新最大值</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h6 id="贪心算法-3"><a href="#贪心算法-3" class="header-anchor">#</a> 贪心算法</h6> <p>这道题目也可以用<strong>贪心</strong>来做, 也就是遇到 <strong>nums[i] &gt; nums[i - 1]</strong>  的情况, 就 count++, 否则 count 重置为 1, 记录 count 的最大值就可以了.</p> <p>代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">findLengthOfLCIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 连续子序列最少也是1</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 连续记录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment">// 不连续, 重置count为1</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
            count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="最长重复子数组-718-中等-🌸"><a href="#最长重复子数组-718-中等-🌸" class="header-anchor">#</a> 最长重复子数组(718-中等)🌸</h5> <h6 id="题目描述-40"><a href="#题目描述-40" class="header-anchor">#</a> 题目描述</h6> <p>给两个整数数组 A 和 B, 返回<strong>两个数组中公共的, 长度最长的子数组的长度</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">3</span>
解释<span class="token operator">:</span> 长度最长的公共子数组是 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span> 
输入<span class="token operator">:</span> nums1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>  输出<span class="token operator">:</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/maximum-length-of-repeated-subarray/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/maximum-length-of-repeated-subarray/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-23"><a href="#动态规划-23" class="header-anchor">#</a> 动态规划</h6> <p>注意题目中说的子数组, 其实就是<strong>连续子序列</strong>. 要求两个数组中最长重复子数组, 如果是暴力的解法, 只需要先两层 for 循环确定两个数组起始位置, 然后再来一个循环可以是 for 或者 while, 来从两个起始位置开始比较, 取得重复子数组的长度.</p> <p>本题其实是动规解决的经典题目, 只要想到<mark><strong>用二维数组可以记录两个字符串的所有比较情况</strong></mark>, 这样就比较好推 递推公式了.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j]: 以下标 i - 1 为结尾的 A, 和以下标 j - 1 为结尾的 B, 最长重复子数组长度为 dp[i][j]</strong></mark> .   <strong>特别注意</strong>: &quot;以下标 i - 1 为结尾的 A&quot; 标明一定是 以 A[i - 1] 为结尾的字符串.</p> <p>此时细心的同学应该发现, 那 dp[0][0] 是什么含义呢? 总不能是以下标 -1 为结尾的 A 数组吧. 其实 dp[i][j] 的定义也就决定着在遍历 dp[i][j] 的时候 i 和 j 都要从 1 开始.</p> <p>那如果定义 dp[i][j] 为 以下标 i 为结尾的 A, 和以下标 j 为结尾的 B, 最长重复子数组长度. 不行么? 行倒是行! 但实现起来就麻烦一点, <strong>需要单独处理初始化部分</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>根据 dp[i][j] 的定义, dp[i][j] 的状态只能由 dp[i - 1][j - 1] 推导出来.</p> <p>即当 <strong>A[i - 1] 和 B[j - 1] 相等(也就是两个数组的数字相同)</strong> 的时候, <strong>dp[i][j] = dp[i - 1][j - 1] + 1</strong>;</p> <p>根据递推公式可以看出, 遍历 i 和 j 要从 1 开始!</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>根据 dp[i][j] 的定义, dp[i][0] 和 dp[0][j] 其实都是没有意义的! 但 dp[i][0] 和 dp[0][j] 要初始值, 因为为了方便递归公式 dp[i][j] = dp[i - 1][j - 1] + 1.</p> <p>所以 dp[i][0] 和 dp[0][j] 初始化为 0.</p> <p>举个例子 A[0] 如果和 B[0] 相同的话, dp[1][1] = dp[0][0] + 1, 只有 dp[0][0] 初始为 0, 正好符合递推公式逐步累加起来.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>外层 for 循环遍历 A, 内层 for 循环遍历 B. 同时题目要求长度最长的子数组的长度. 所以在遍历的时候顺便把 dp[i][j] 的<strong>最大值记录</strong>下来.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> nums2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        result <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>拿示例 1 中, A: [1,2,3,2,1], B: [3,2,1,4,7] 为例, 画一个 dp 数组的状态变化, 如下:</p> <p><img src="/img/net-img-2021011215282060-20240317133738-gpgeoaq.jpg" alt="718.最长重复子数组"></p> <p>以上五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findLength</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// dp[i][j]: 以下标 i - 1 为结尾的 A, 和以下标 j - 1 为结尾的 B, 最长重复子数组长度为 dp[i][j]</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums1<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums2<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 遇到各自的子数组又出现元素相同的情况</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 持续更新最大值</span>
            result <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>可以考虑用滚动数组压缩空间, 在如下图中:</p> <p><img src="/img/net-img-2021011215282060-20230310134554486-20240317133738-enyq0gw.jpg" alt="718.最长重复子数组"></p> <p>可以看出 dp[i][j] 都是由 dp[i - 1][j - 1] 推出. 那么压缩为一维数组, 也就是 dp[j] 都是由 dp[j - 1] 推出. 也就是相当于可以把上一层 dp[i - 1][j] 拷贝到下一层 dp[i][j] 来继续用.</p> <p><strong>此时遍历 B 数组的时候, 就要从后向前遍历, 这样避免重复覆盖</strong>.</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findLength</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 反过来遍历防止覆盖已有数据</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            result <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="最长公共子序列-1143-中等-🌸💯"><a href="#最长公共子序列-1143-中等-🌸💯" class="header-anchor">#</a> 最长公共子序列(1143-中等)🌸💯</h5> <h6 id="题目描述-41"><a href="#题目描述-41" class="header-anchor">#</a> 题目描述</h6> <p>给定两个字符串 text1 和 text2, 返回这<strong>两个字符串的最长公共子序列的长度</strong>. 一个字符串的子序列是指这样一个新的字符串: 它是由原字符串在不改变字符的相对顺序的情况下<strong>删除</strong>某些字符(也可以不删除任何字符)后组成的新字符串. 例如, &quot;ace&quot; 是 &quot;abcde&quot; 的子序列, 但 &quot;aec&quot; 不是 &quot;abcde&quot; 的子序列. 两个字符串的「公共子序列」是这两个字符串所共同拥有的子序列. 若这两个字符串没有公共子序列, 则返回 0.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> text1 <span class="token operator">=</span> <span class="token string">&quot;abcde&quot;</span><span class="token punctuation">,</span> text2 <span class="token operator">=</span> <span class="token string">&quot;ace&quot;</span>    输出<span class="token operator">:</span> <span class="token number">3</span>  
解释<span class="token operator">:</span> 最长公共子序列是 <span class="token string">&quot;ace&quot;</span> <span class="token punctuation">,</span> 它的长度为 <span class="token number">3.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/longest-common-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-common-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-24"><a href="#动态规划-24" class="header-anchor">#</a> 动态规划</h6> <p>本题和 <strong>718-最长重复子数组</strong> 区别在于这里<strong>不要求是连续的了, 但要有相对顺序</strong>, 即: &quot;ace&quot; 是 &quot;abcde&quot; 的子序列, 但 &quot;aec&quot; 不是 &quot;abcde&quot; 的子序列.</p> <p>继续动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j]: 长度为 [0, i - 1] 的字符串 text1 与长度为 [0, j - 1] 的字符串 text2 的最长公共子序列为 dp[i][j]</strong></mark> .</p> <p>有人会问: 为什么要定义长度为 [0, i - 1] 的字符串 text1, 定义为长度为 [0, i] 的字符串 text1 不香么? 这样定义是为了后面代码实现方便, 其实就是<strong>简化了 dp 数组第一行和第一列的初始化逻辑</strong>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>主要就是两大情况: **text1[i - 1] 与 text2[j - 1] 相同, text1[i - 1] 与 text2[j - 1] 不相同. **</p> <ul><li>如果 <strong>text1[i - 1] 与 text2[j - 1] 相同</strong>, 那么<strong>找到了一个公共元素</strong>, 所以 <strong>dp[i][j] = dp[i - 1][j - 1] + 1</strong>;</li> <li>如果 <strong>text1[i - 1] 与 text2[j - 1] 不相同</strong>, 那就看看 text1[0, i - 2] 与 text2[0, j - 1] 的最长公共子序列和 text1[0, i - 1] 与 text2[0, j - 2] 的最长公共子序列, 取<strong>最大的</strong>. 即: <strong>dp[i][j] = max(dp[i - 1][j], dp[i][j - 1])</strong> ;</li></ul> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>text1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> text2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>dp数组如何初始化</p></blockquote> <p>先看看 dp[i][0] 应该是多少呢? test1[0, i - 1] 和空串的最长公共子序列自然是 0, 所以 dp[i][0] = 0; 同理 dp[0][j] 也是 0.</p> <p>其他下标都是随着递推公式逐步覆盖, 初始为多少都可以, 那么就统一初始为 0.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递推公式, 可以看出, <strong>有三个方向</strong>可以推出 dp[i][j], 如图:</p> <p><img src="/img/net-img-20210204115139616-20240317134717-p0itv1z.jpg" alt="1143.最长公共子序列"></p> <p>那么为了在递推的过程中, 这三个方向都是经过计算的数值, 所以要<strong>从前向后, 从上到下</strong>来遍历这个矩阵.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以输入: text1 = &quot;abcde&quot;, text2 = &quot;ace&quot; 为例, dp 状态如图:</p> <p><img src="/img/net-img-20210210150215918-20240317134718-x3ssvhh.jpg" alt="1143.最长公共子序列1"></p> <p>最后红框 <code>dp[text1.size()][text2.size()]</code>​ 为最终结果.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestCommonSubsequence</span><span class="token punctuation">(</span>String text1<span class="token punctuation">,</span> String text2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 也可以把字符串转换为字符数组</span>
    <span class="token comment">// char[] char1 = text1.toCharArray();</span>
    <span class="token comment">// char[] char2 = text2.toCharArray();</span>
    <span class="token comment">// 先对 dp 数组做初始化操作(全都默认为0)</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>text1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>text2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> text1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">char</span> char1 <span class="token operator">=</span> text1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> text2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">char</span> char2 <span class="token operator">=</span> text2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 两个字符相同-遇到一个新的相同字符, 则在之前的最长公共子序列长度上加1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>char1 <span class="token operator">==</span> char2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 否则看看 text1[0, i - 2] 与 text2[0, j - 1] 的最长公共子序列 </span>
                <span class="token comment">// 和 text1[0, i - 1] 与 text2[0, j - 2] 的最长公共子序列, 取最大的</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>text1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>text2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h5 id="不相交的线-1035-中等-🌸"><a href="#不相交的线-1035-中等-🌸" class="header-anchor">#</a> 不相交的线(1035-中等)🌸</h5> <h6 id="题目描述-42"><a href="#题目描述-42" class="header-anchor">#</a> 题目描述</h6> <p>在两条独立的水平线上按给定的顺序写下 A 和 B 中的整数. 现在可以绘制一些连接两个数字 A[i] 和 B[j] 的直线, 只要 A[i] == B[j], 且绘制的直线不与任何其他连线(非水平线)相交. 以这种方法绘制线条, 并返回可以绘制的<strong>最大连线数</strong>.</p> <p>​<img src="/img/net-img-2021032116363533-20240317140119-4rc1msq.png" alt="1035.不相交的线">​</p> <blockquote><p><a href="https://leetcode.cn/problems/uncrossed-lines/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/uncrossed-lines/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-25"><a href="#动态规划-25" class="header-anchor">#</a> 动态规划</h6> <p>绘制一些连接两个数字 A[i] 和 B[j] 的直线, 只要 <strong>A[i] <mark> B[j], 且直线不能相交</mark></strong>! 直线不能相交, 这就是说明在**字符串 A 中 找到一个与字符串 B 相同的子序列, 且这个子序列不能改变相对顺序, 只要相对顺序不改变, 链接相同数字的直线就不会相交==**.</p> <p>拿示例一 A = [1,4,2], B = [1,2,4] 为例, 相交情况如图:</p> <p><img src="/img/net-img-20210914145158-20240317140119-ngdbok4.png" alt=""></p> <p>其实也就是说 A 和 B 的<strong>最长公共子序列</strong>是 [1,4], 长度为 2. 这个公共子序列指的是相对顺序不变(即数字 4 在字符串 A 中数字 1 的后面, 那么数字 4 也应该在字符串 B 数字 1 的后面).</p> <p>这么分析完之后, 大家可以发现: <mark><strong>本题说是求绘制的最大连线数, 其实就是求两个字符串的最长公共子序列的长度</strong></mark>​ <strong>!</strong>  那么本题就和 <strong>1143-最长公共子序列</strong> 就是一样的了. 一样到什么程度呢? 把字符串名字改一下, 其他代码都不用改, 直接 copy 过来就行了.</p> <p>本题代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxUncrossedLines</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 遇到相同的字符, 也就是最长公共子序列长度+1, 则可以多连一条线</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 否则取前两个的最大值</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="最大子序和-动态规划-53-中等-🌸🔑💯"><a href="#最大子序和-动态规划-53-中等-🌸🔑💯" class="header-anchor">#</a> 最大子序和-动态规划(53-中等)🌸🔑💯</h5> <h6 id="题目描述-43"><a href="#题目描述-43" class="header-anchor">#</a> 题目描述</h6> <p>给定一个整数数组 nums, 找到一个<strong>具有最大和的连续子数组(子数组最少包含一个元素)</strong> , 返回其最大和.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>   输出<span class="token operator">:</span> <span class="token number">6</span>
解释<span class="token operator">:</span> 连续子数组 <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> 的和最大为 <span class="token number">6.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/maximum-subarray/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/maximum-subarray/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="贪心算法-4"><a href="#贪心算法-4" class="header-anchor">#</a> 贪心算法</h6> <p>此题可以用贪心算法, 解法参考对应的部分: 最大子序和-贪心算法(53-中等).</p> <h6 id="动态规划-26"><a href="#动态规划-26" class="header-anchor">#</a> 动态规划</h6> <p>动规五部曲如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i]: 包括下标 i(以 nums[i] 为结尾)的最大连续子序列和为 dp[i]</strong></mark> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>dp[i] 只有两个方向可以推出来:</p> <ul><li><strong>dp[i - 1] + nums[i], 即: nums[i] 加入当前连续子序列和.</strong></li> <li><strong>nums[i], 即: 从头开始计算当前连续子序列和.</strong></li></ul> <p>一定是取最大的, 所以 <strong>==dp[i] = max(dp[i - 1] + nums[i], nums[i])==</strong> .</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式可以看出来 dp[i] 是依赖于 dp[i - 1] 的状态, dp[0] 就是递推公式的基础.</p> <p>dp[0] 应该是多少呢? 根据 dp[i] 的定义, 很明显 dp[0] 应为 nums[0] 即 <strong>dp[0] = nums[0]</strong> .</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>递推公式中 dp[i] 依赖于 dp[i - 1] 的状态, 需要从前向后遍历.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以示例一为例, 输入: nums = [-2,1,-3,4,-1,2,1,-5,4], 对应的 dp 状态如下:</p> <p><img src="/img/net-img-20210303104129101-20240309225444-cf4vvr4.png" alt="53.最大子序和(动态规划)"></p> <p><strong>注意最后的结果不是 dp[nums.size() - 1]</strong> , 而是 dp[6]. 所以在递推公式的时候, 可以直接滚动更新记录最大的 dp[i].</p> <p>以上动规五部曲分析完毕, 完整代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxSubArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化dp数组</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 状态转移方程</span>
        <span class="token comment">// nums[i]加入当前连续子序列和, 或者以nums[i]为起点重新开始计算子序和 取较大值</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 持续更新结果值</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这里可以优化空间.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxSubArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> pre <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pre <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="判断子序列-392-中等-🌸"><a href="#判断子序列-392-中等-🌸" class="header-anchor">#</a> 判断子序列(392-中等)🌸</h5> <h6 id="题目描述-44"><a href="#题目描述-44" class="header-anchor">#</a> 题目描述</h6> <p><strong>给定字符串 s 和 t, 判断 s 是否为 t 的子序列</strong>. 字符串的一个子序列是原始字符串删除一些(也可以不删除)字符而不改变剩余字符相对位置形成的新字符串. (例如, &quot;ace&quot; 是 &quot;abcde&quot; 的一个子序列, 而 &quot;aec&quot; 不是).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token string">&quot;ahbgdc&quot;</span>  输出<span class="token operator">:</span> <span class="token boolean">true</span>
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;axc&quot;</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token string">&quot;ahbgdc&quot;</span>  输出<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>两个字符串都只由小写字符组成.</p> <blockquote><p><a href="https://leetcode.cn/problems/is-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/is-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>本题对应的双指针解法: 判断子序列(392-中等).</p> <h6 id="动态规划-27"><a href="#动态规划-27" class="header-anchor">#</a> 动态规划</h6> <p>这道题应该算是<strong>编辑距离的入门题目</strong>, 因为从题意中也可以发现, 只需要计算删除的情况, 不用考虑增加和替换的情况. <strong>所以掌握本题的动态规划解法是对后面要讲解的编辑距离的题目打下基础</strong>.</p> <p>动态规划五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j] 表示以下标 i - 1 为结尾的字符串 s, 和以下标 j - 1 为结尾的字符串 t, 相同子序列的长度为 dp[i][j]</strong></mark> .</p> <p>注意这里是判断 s 是否为 t 的子序列. 即 t 的长度是大于等于 s 的.</p> <p>有同学问了, 为啥要表示下标 i - 1 为结尾的字符串呢, 为啥不表示下标 i 为结尾的字符串呢? 其实用 i 来表示也可以! <strong>但统一以下标 i - 1 为结尾的字符串来计算</strong>, 这样在下面的递归公式中会容易理解一些.</p> <blockquote><p>确定递推公式</p></blockquote> <p>在确定递推公式的时候, 首先要考虑如下两种操作, 整理如下:</p> <ul><li>​<code>if (s[i - 1] == t[j - 1])</code>​: t 中找到了一个字符在 s 中也出现了.</li> <li>​<code>if (s[i - 1] != t[j - 1])</code>​: 相当于 t 要删除元素, 继续匹配.</li></ul> <p>​<code>if (s[i - 1] == t[j - 1])</code>​, 那么 <code>dp[i][j] = dp[i - 1][j - 1] + 1</code>​;, 因为找到了一个相同的字符, 相同子序列长度自然要在 dp[i - 1][j - 1] 的基础上加 1(如果不理解, 在回看一下 dp[i][j]的定义).</p> <p>​<code>if (s[i - 1] != t[j - 1])</code>​, 此时<strong>相当于 t 要删除元素</strong>, t 如果把当前元素 t[j - 1] 删除, 那么 dp[i][j] 的数值就是 看 s[i - 1] 与 t[j - 2] 的比较结果了, 即: dp[i][j] = dp[i][j - 1];</p> <p>其实这里可以发现和 <strong>1143-最长公共子序列</strong> 的递推公式基本那就是一样的, 区别就是本题如果删元素一定是字符串 t, 而 <strong>1143-最长公共子序列</strong> 是两个字符串都可以删元素.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式可以看出 dp[i][j] 都是依赖于 dp[i - 1][j - 1] 和 dp[i][j - 1], 所以 dp[0][0] 和 dp[i][0] 是一定要初始化的.</p> <p>这里已经可以发现, 在定义 dp[i][j] 含义的时候为什么要<strong>表示以下标 i - 1 为结尾的字符串 s, 和以下标 j - 1 为结尾的字符串 t, 相同子序列的长度为 dp[i][j]</strong> . 因为这样的定义在 dp 二维矩阵中可以留出初始化的区间, 如图:</p> <p><img src="/img/net-img-20210303173115966-20240317141732-p65g0id.png" alt="392.判断子序列"></p> <p>如果要是定义的 dp[i][j] 是以下标 i 为结尾的字符串 s 和以下标 j 为结尾的字符串 t, <strong>初始化就比较麻烦</strong>了.</p> <p>dp[i][0] 表示以下标 i - 1 为结尾的字符串, 与空字符串的相同子序列长度, 所以为 0. dp[0][j] 同理.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>同理从递推公式可以看出 dp[i][j] 都是依赖于 dp[i - 1][j - 1] 和 dp[i][j - 1], 那么遍历顺序也应该是<strong>从上到下, 从左到右.</strong></p> <p>如图所示:</p> <p><img src="/img/net-img-20210303172354155-20240317141732-7fms8to.jpg" alt="392.判断子序列1"></p> <blockquote><p>举例推导dp数组</p></blockquote> <p>以示例一为例, 输入: s = &quot;abc&quot;, t = &quot;ahbgdc&quot;, dp 状态转移图如下:</p> <p><img src="/img/net-img-2021030317364166-20240317141732-hezblx0.jpg" alt="392.判断子序列2"></p> <p><strong>dp[i][j] 表示以下标 i - 1 为结尾的字符串 s 和以下标 j - 1 为结尾的字符串 t 相同子序列的长度</strong>, 所以如果 dp[s.size()][t.size()] 与字符串 s 的长度相同说明: <strong>s 与 t 的最长相同子序列就是 s, 那么 s 就是 t 的子序列</strong>.</p> <p>图中 dp[s.size()][t.size()] = 3, 而 s.size() 也为 3. 所以 s 是 t 的子序列, 返回 true.</p> <p>动规五部曲分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSubsequence</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> length1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> length2 <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>length1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>length2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> length1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> length2<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果相等则在之前的最长公共子序列长度上加1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> t<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果最长公共子序列长度等于s的长度, 则说明s是t的子序列</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>length1<span class="token punctuation">]</span><span class="token punctuation">[</span>length2<span class="token punctuation">]</span> <span class="token operator">==</span> length1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="最大乘积的连续子数组-152-中等-🌸💯"><a href="#最大乘积的连续子数组-152-中等-🌸💯" class="header-anchor">#</a> 最大乘积的连续子数组(152-中等)🌸💯</h5> <h6 id="题目描述-45"><a href="#题目描述-45" class="header-anchor">#</a> 题目描述</h6> <p>给你一个整数数组 nums, 找出数组中<strong>乘积最大的连续子数组</strong>(该子数组中至少包含一个数字), 并返回该子数组所对应的乘积.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>输入: [2,3,-2,4]        输出: 6  解释: 子数组 [2,3] 有最大乘积 6. 
输入: nums = [-2,0,-1]  输出: 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/maximum-product-subarray/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/maximum-product-subarray/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划法-10"><a href="#动态规划法-10" class="header-anchor">#</a> 动态规划法</h6> <p>假如 <strong>dp[i] 的定义：以下标 i 结尾的连续子序列的乘积的最大值</strong>。最后把整个 dp 数组看一遍求最大值即可。</p> <p>因此状态转移方程可能是：</p> <ul><li>​<code>dp[i] = max(dp[i - 1] * nums[i], nums[i])</code>​</li></ul> <p>说明：牢记状态的定义，一定以下标 i 结尾，即：乘积数组中 nums[i] <strong>必须被选取</strong>。</p> <p>但如果 dp[i - 1] 是<strong>负数</strong>，乘上 nums[i] 还是负数，倒不如另起炉灶。</p> <p>如果 nums[i] 是<strong>负数</strong>该怎么办呢？dp[i - 1] 是正数的时候，越乘越小，dp[i - 1] 是负数的时候，越乘越大，于是可能就需要记录一下<strong>负数的那个最小数</strong>。</p> <p>遇到这样的问题，其实就在提示我们状态不够用了。因此，可以在原来的<strong>一维 dp 后面新增一个状态</strong>。</p> <p>针对这道题，第 2 维状态只需要两个：</p> <ul><li>用 0 表示遍历的过程中得到的<strong>以 nums[i] 结尾的连续子序列的乘积的最小值</strong>；</li> <li>用 1 表示遍历的过程中得到的<strong>以 nums[i] 结尾的连续子序列的乘积的最大值</strong>。</li></ul> <p>即使用二维状态数组同时记录乘积的最大值和最小值。</p> <p>这里就声明一下状态：</p> <ul><li>dp[i][1] 表示：以 nums[i] 结尾的连续子序列的乘积的最大值；</li> <li>dp[i][0] 表示：以 nums[i] 结尾的连续子序列的乘积的最小值。</li></ul> <p>代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 状态定义</span>
    <span class="token comment">// dp[i][1] 表示以 nums[i] 结尾的连续子序列的乘积的最大值</span>
    <span class="token comment">// dp[i][0] 表示以 nums[i] 结尾的连续子序列的乘积的最小值</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果当前数大于等于0</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 找到最大值</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>或者设置<strong>两个状态数组</strong>，这样语义会更清晰一些。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 状态定义</span>
    <span class="token comment">// maxDp[i] 表示以 nums[i] 结尾的连续子序列的乘积的最大值</span>
    <span class="token comment">// minDp[i] 表示以 nums[i] 结尾的连续子序列的乘积的最小值</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> maxDp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> minDp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

    maxDp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    minDp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            maxDp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> maxDp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            minDp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> minDp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            maxDp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> minDp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            minDp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> maxDp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 找到最大值</span>
    <span class="token keyword">int</span> res <span class="token operator">=</span> maxDp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> maxDp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>因为<strong>每一个状态只与前一个状态有关</strong>，可以使用「滚动变量」技巧，使用常数个变量完成这道问题。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> preMax <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> preMin <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> curMax<span class="token punctuation">;</span>
    <span class="token keyword">int</span> curMin<span class="token punctuation">;</span>

    <span class="token keyword">int</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            curMax <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>preMax <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            curMin <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>preMin <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            curMax <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>preMin <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            curMin <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>preMax <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> curMax<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 滚动变量</span>
        preMax <span class="token operator">=</span> curMax<span class="token punctuation">;</span>
        preMin <span class="token operator">=</span> curMin<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h5 id="两个字符串的删除操作-583-中等-🌸"><a href="#两个字符串的删除操作-583-中等-🌸" class="header-anchor">#</a> 两个字符串的删除操作(583-中等)🌸</h5> <p>给定两个单词 word1 和 word2, <strong>找到使得 word1 和 word2 相同所需的最小步数, 每步可以删除任意一个字符串中的一个字符</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> word1 <span class="token operator">=</span> <span class="token string">&quot;sea&quot;</span><span class="token punctuation">,</span> word2 <span class="token operator">=</span> <span class="token string">&quot;eat&quot;</span>        输出<span class="token operator">:</span> <span class="token number">2</span>
解释<span class="token operator">:</span> 第一步将 <span class="token string">&quot;sea&quot;</span> 变为 <span class="token string">&quot;ea&quot;</span> <span class="token punctuation">,</span> 第二步将 <span class="token string">&quot;eat &quot;</span>变为 <span class="token string">&quot;ea&quot;</span>
输入<span class="token operator">:</span> word1 <span class="token operator">=</span> <span class="token string">&quot;leetcode&quot;</span><span class="token punctuation">,</span> word2 <span class="token operator">=</span> <span class="token string">&quot;etco&quot;</span>  输出<span class="token operator">:</span> <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/delete-operation-for-two-strings/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/delete-operation-for-two-strings/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划一"><a href="#动态规划一" class="header-anchor">#</a> 动态规划一</h6> <p>本题和 <strong>115-不同的子序列</strong> 相比, 其实就是<strong>两个字符串都可以删除</strong>了, 情况虽说复杂一些, 但整体思路是不变的.</p> <p>这次是两个字符串可以相互删了, 这种题目也知道用动态规划的思路来解, 动规五部曲, 分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j]: 以 i - 1 为结尾的字符串 word1, 和以 j - 1 位结尾的字符串 word2, 想要达到相等, 所需要删除元素的最少次数</strong></mark>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>需要看 word1[i - 1] 与 word2[j - 1] 是否相同.</p> <p>当 <strong>word1[i - 1] 与 word2[j - 1] 相同</strong>的时候, <strong>dp[i][j] = dp[i - 1][j - 1]</strong> .</p> <p>当 <strong>word1[i - 1] 与 word2[j - 1] 不相同</strong>的时候, 有三种情况:</p> <ul><li>情况一: 删 word1[i - 1], 最少操作次数为 dp[i - 1][j] + 1.</li> <li>情况二: 删 word2[j - 1], 最少操作次数为 dp[i][j - 1] + 1.</li> <li>情况三: 同时删 word1[i - 1] 和 word2[j - 1], 操作的最少次数为 dp[i - 1][j - 1] + 2.</li></ul> <p>那最后当然是<strong>取最小值</strong>, 所以当 word1[i - 1] 与 word2[j - 1] 不相同的时候, 递推公式: <strong>dp[i][j] = min({dp[i - 1][j - 1] + 2, dp[i - 1][j] + 1, dp[i][j - 1] + 1})</strong> .</p> <p>因为 dp[i][j - 1]  + 1 = dp[i - 1][j - 1] + 2, 所以递推公式可简化为: dp[i][j] = min(dp[i - 1][j] + 1, dp[i][j - 1] + 1);</p> <p>这里可有点绕, 从字面上理解就是当同时删 word1[i - 1] 和 word2[j - 1], dp[i][j - 1] 本来就不考虑 word2[j - 1] 了, 那么在删 word1[i - 1], 是不是就达到两个元素都删除的效果, 即 dp[i][j - 1] + 1.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>从递推公式中, 可以看出来, dp[i][0] 和 dp[0][j] 是一定要初始化的.</p> <p>dp[i][0]: word2 为空字符串, 以 i - 1 为结尾的字符串 word1 要删除多少个元素, 才能和 word2 相同呢, 很明显 <strong>dp[i][0] = i</strong>.</p> <p>dp[0][j] 的话同理.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递推公式 dp[i][j] = min(dp[i - 1][j - 1] + 2, min(dp[i - 1][j], dp[i][j - 1]) + 1); 和 dp[i][j] = dp[i - 1][j - 1] 可以看出 dp[i][j] 都是根据<strong>左上方, 正上方, 正左方</strong>推出来的.</p> <p>所以遍历的时候一定是<strong>从上到下, 从左到右</strong>, 这样保证 dp[i][j] 可以根据之前计算出来的数值进行计算.</p> <blockquote><p>举例推导 dp 数组</p></blockquote> <p>以 word1:&quot;sea&quot;, word2:&quot;eat&quot; 为例, 推导 dp 数组状态图如下:</p> <p><img src="/img/net-img-20210714101750205-20240317153545-yegxubw.png" alt="583.两个字符串的删除操作1"></p> <p>以上分析完毕, 代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minDistance</span><span class="token punctuation">(</span><span class="token class-name">String</span> word1<span class="token punctuation">,</span> <span class="token class-name">String</span> word2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>word1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> word2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span>
                        <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h6 id="动态规划之求最长公共子序列-更好理解"><a href="#动态规划之求最长公共子序列-更好理解" class="header-anchor">#</a> 动态规划之求最长公共子序列(更好理解)</h6> <p>本题和 <strong>1143-最长公共子序列</strong> 基本相同, <strong>只要求出两个字符串的最长公共子序列长度即可</strong>, 那么除了最长公共子序列之外的字符都是必须删除的, 最后用两个字符串的总长度减去两个最长公共子序列的长度就是删除的最少步数. 这个解法与 <strong>1143-最长公共子序列</strong> 的解法只有最后一句不一样, 其他的都是一样的逻辑.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minDistance</span><span class="token punctuation">(</span>String word1<span class="token punctuation">,</span> String word2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> char1 <span class="token operator">=</span> word1<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> char2 <span class="token operator">=</span> word2<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> len1 <span class="token operator">=</span> char1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> len2 <span class="token operator">=</span> char2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>len2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 求最长公共子序列</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> len1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> len2<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>char1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> char2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 两个字符串长度和减去两倍的最长公共子序列长度</span>
    <span class="token keyword">return</span> len1 <span class="token operator">+</span> len2 <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> dp<span class="token punctuation">[</span>len1<span class="token punctuation">]</span><span class="token punctuation">[</span>len2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="编辑距离-72-中等-🌸💯"><a href="#编辑距离-72-中等-🌸💯" class="header-anchor">#</a> 编辑距离(72-中等)🌸💯</h5> <h6 id="题目描述-46"><a href="#题目描述-46" class="header-anchor">#</a> 题目描述</h6> <p>给你两个单词 word1 和 word2, 请计算出<strong>将 word1 转换成 word2 所使用的最少操作数</strong>.</p> <p>可以对一个单词进行如下三种操作:</p> <ul><li>插入一个字符</li> <li>删除一个字符</li> <li>替换一个字符</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> word1 <span class="token operator">=</span> <span class="token string">&quot;horse&quot;</span><span class="token punctuation">,</span> word2 <span class="token operator">=</span> <span class="token string">&quot;ros&quot;</span>   输出<span class="token operator">:</span> <span class="token number">3</span>
解释<span class="token operator">:</span> 
horse <span class="token operator">-&gt;</span> rorse <span class="token punctuation">(</span>将 <span class="token char">'h'</span> 替换为 <span class="token char">'r'</span><span class="token punctuation">)</span>
rorse <span class="token operator">-&gt;</span> rose <span class="token punctuation">(</span>删除 <span class="token char">'r'</span><span class="token punctuation">)</span>
rose <span class="token operator">-&gt;</span> ros <span class="token punctuation">(</span>删除 <span class="token char">'e'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/edit-distance/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/edit-distance/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-28"><a href="#动态规划-28" class="header-anchor">#</a> 动态规划</h6> <p>编辑距离终于来了, 这道题目如果不了解动态规划的话, 会超级复杂. 编辑距离是用动规来解决的经典题目, 这道题目看上去好像很复杂, 但用动规可以很巧妙的算出最少编辑距离.</p> <p>接下来依然使用动规五部曲, 对本题做一个详细的分析:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j] 表示以下标 i - 1 为结尾的字符串 word1, 和以下标 j - 1 为结尾的字符串 word2, 最近编辑距离为 dp[i][j]</strong></mark> .</p> <p>为啥要表示下标 i - 1 为结尾的字符串呢, 为啥不表示下标 i 为结尾的字符串呢? 其实用 i 来表示也可以! 用 i - 1 就是为了方便后面 dp 数组初始化的.</p> <blockquote><p>确定递推公式</p></blockquote> <p>在确定递推公式的时候, 首先要<strong>考虑清楚编辑的几种操作</strong>, 整理如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if (word1[i - 1] == word2[j - 1])
    不操作
if (word1[i - 1] != word2[j - 1])
    增
    删
    换
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>也就是如上 4 种情况.</p> <p>​<code>if (word1[i - 1] == word2[j - 1])</code>​ 那么说明不用任何编辑, <code>dp[i][j]</code>​ 就应该是 <code>dp[i - 1][j - 1]</code>​, 即 <code>dp[i][j] = dp[i - 1][j - 1];</code>​</p> <p>此时可能有同学有点不明白, 为啥要 <code>dp[i][j] = dp[i - 1][j - 1]</code>​ 呢?</p> <p>那么就在回顾上面讲过的 <code>dp[i][j]</code>​ 的定义, <code>word1[i - 1]</code>​ 与 <code>word2[j - 1]</code>​ 相等了, 那么就不用编辑了, 以下标 i - 2 为结尾的字符串 word1 和以下标 j - 2 为结尾的字符串 <code>word2</code>​ 的最近编辑距离 <code>dp[i - 1][j - 1]</code>​ 就是 <code>dp[i][j]</code>​ 了.</p> <p>在整个动规的过程中, 最为关键就是正确理解 <code>dp[i][j]</code>​ 的定义!</p> <p>​<code>if (word1[i - 1] != word2[j - 1])</code>​, 此时就<strong>需要编辑</strong>了, 如何编辑呢?</p> <ul><li><p>操作一: word1 删除一个元素, 那么就是以下标 i - 2 为结尾的 word1 与 j - 1 为结尾的 word2 的最近编辑距离, 再加上一个操作. 即 <code>dp[i][j] = dp[i - 1][j] + 1;</code>​</p></li> <li><p>操作二: word2 删除一个元素, 那么就是以下标 i - 1 为结尾的 word1 与 j - 2 为结尾的 word2 的最近编辑距离, 再加上一个操作. 即 <code>dp[i][j] = dp[i][j - 1] + 1;</code>​</p></li></ul> <p>这里有同学发现了, 怎么都是删除元素, 添加元素去哪了.</p> <p><mark><strong>word2 添加一个元素, 相当于 word1 删除一个元素</strong></mark>, 例如 <code>word1 = &quot;ad&quot; , word2 = &quot;a&quot;</code>​, <code>word1</code>​ 删除元素 <code>'d'</code>​ 和 <code>word2</code>​ 添加一个元素 <code>'d'</code>​, 变成 <code>word1=&quot;a&quot;, word2=&quot;ad&quot;</code>​, 最终的操作数是一样! dp 数组如下图所示意的:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>            a                         a     d
   +-----+-----+             +-----+-----+-----+
   |  0  |  1  |             |  0  |  1  |  2  |
   +-----+-----+   ===&gt;      +-----+-----+-----+
 a |  1  |  0  |           a |  1  |  0  |  1  |
   +-----+-----+             +-----+-----+-----+
 d |  2  |  1  |
   +-----+-----+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>操作三: 替换元素, <code>word1</code>​ 替换 <code>word1[i - 1]</code>​, 使其与 <code>word2[j - 1]</code>​ 相同, 此时<strong>不用增删加元素</strong>.</li></ul> <p>可以回顾一下, <code>if (word1[i - 1] == word2[j - 1])</code>​的时候的操作是 <code>dp[i][j] = dp[i - 1][j - 1]</code>​ 对吧.</p> <p>那么只需要一次替换的操作, 就可以让 word1[i - 1] 和 word2[j - 1] 相同. 所以 <code>dp[i][j] = dp[i - 1][j - 1] + 1;</code>​</p> <p>综上, 当 <code>if (word1[i - 1] != word2[j - 1])</code>​ 时取最小的, 即: <code>dp[i][j] = min({dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]}) + 1;</code>​</p> <p>递归公式代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>word1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> word2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">{</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>dp数组如何初始化</p></blockquote> <p>再回顾一下 dp[i][j] 的定义:</p> <p><strong>dp[i][j] 表示以下标 i - 1 为结尾的字符串 word1, 和以下标 j - 1 为结尾的字符串 word2, 最近编辑距离为 dp[i][j]</strong> .</p> <p>那么 dp[i][0] 和 dp[0][j] 表示什么呢?</p> <p>dp[i][0]: 以下标 i - 1 为结尾的字符串 word1, 和空字符串 word2, 最近编辑距离为 dp[i][0].</p> <p>那么 dp[i][0] 就应该是 i, 对 word1里的元素全部做删除操作, 即: <strong>dp[i][0] = i</strong>.</p> <p>同理 dp[0][j] = j.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从如下四个递推公式:</p> <ul><li>​<code>dp[i][j] = dp[i - 1][j - 1]</code>​</li> <li>​<code>dp[i][j] = dp[i - 1][j - 1] + 1</code>​</li> <li>​<code>dp[i][j] = dp[i][j - 1] + 1</code>​</li> <li>​<code>dp[i][j] = dp[i - 1][j] + 1</code>​</li></ul> <p>可以看出 dp[i][j] 是依赖<strong>左方, 上方和左上方</strong>元素的, 如图:</p> <p><img src="/img/net-img-20210114162113131-20240317154743-z8llwb6.jpg" alt="72.编辑距离"></p> <p>所以在 dp 矩阵中一定是<strong>从左到右从上到下去</strong>遍历.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> word1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> word2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>word1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> word2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">{</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>以 <code>word1 = &quot;horse&quot;, word2 = &quot;ros&quot;</code>​ 为例, dp 矩阵状态图如下:</p> <p><img src="/img/net-img-20210114162132300-20240317154743-s7twf2b.jpg" alt="72.编辑距离1"></p> <p>以上动规五部分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minDistance</span><span class="token punctuation">(</span>String word1<span class="token punctuation">,</span> String word2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 因为 dp 数组有效位从1开始</span>
            <span class="token comment">// 所以当前遍历到的字符串的位置为 i-1 | j-1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>word1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> word2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h5 id="回文子串数量-647-中等-🌸"><a href="#回文子串数量-647-中等-🌸" class="header-anchor">#</a> 回文子串数量(647-中等)🌸</h5> <h6 id="题目描述-47"><a href="#题目描述-47" class="header-anchor">#</a> 题目描述</h6> <p>给定一个字符串, 计算这个字符串中有多少个回文子串. 具有不同开始位置或结束位置的子串, 即使是由相同的字符组成, 也会被视作不同的子串.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>   输出<span class="token operator">:</span> <span class="token number">3</span>
解释<span class="token operator">:</span> 三个回文子串<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span>
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;aaa&quot;</span>   输出<span class="token operator">:</span> <span class="token number">6</span>
解释<span class="token operator">:</span> <span class="token number">6</span>个回文子串<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaa&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/palindromic-substrings/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/palindromic-substrings/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="暴力解法"><a href="#暴力解法" class="header-anchor">#</a> 暴力解法</h6> <p>两层 for 循环, 遍历区间起始位置和终止位置, 然后还需要一层遍历判断这个区间是不是回文. 所以时间复杂度: O(n^3).</p> <h6 id="动态规划-29"><a href="#动态规划-29" class="header-anchor">#</a> 动态规划</h6> <p>动规五部曲:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p>如果大家做了很多这种<strong>子序列</strong>相关的题目, 在定义 dp 数组的时候, 很自然就会想题目求什么就如何定义 dp 数组.</p> <p>绝大多数题目确实是这样, 不过本题如果定义, dp[i] 为 下标 i 结尾的字符串有 dp[i] 个回文串的话, 会发现很难找到递归关系. 因为 dp[i] 和 dp[i - 1], dp[i + 1] 看上去都没啥关系.</p> <p>所以要看回文串的性质. 如图:</p> <p><img src="/img/net-img-20230102170752-20240317155728-fnrrkmb.png" alt=""></p> <p>判断字符串 S 是否是回文, 那么如果知道 s[1], s[2], s[3] 这个子串是回文的, 那么只需要比较 s[0] 和 s[4] 这两个元素是否相同, 如果相同的话, 这个字符串 s 就是回文串.</p> <p>那么此时是不是<strong>能找到一种递归关系, 也就是判断一个子字符串(字符串的下表范围[i, j])是否回文, 依赖于子字符串(下标范围 [i + 1, j - 1])) 是否是回文</strong>.</p> <p>所以为了明确这种递归关系, dp 数组是要定义成一位<strong>二维 dp 数组</strong>.</p> <p><mark><strong>布尔类型的 dp[i][j]: 表示区间范围 [i, j] (注意是左闭右闭)的子串是否是回文子串, 如果是 dp[i][j] 为 true, 否则为 false</strong></mark>.</p> <blockquote><p>确定递推公式</p></blockquote> <p>在确定递推公式时, 就要分析如下几种情况.</p> <p>整体上是两种, 就是 <strong>s[i] 与 s[j] 相等, s[i] 与 s[j] 不相等</strong>这两种.</p> <p>当 s[i] 与 s[j] 不相等, 那没啥好说的了, dp[i][j] 一定是 false.</p> <p>当 s[i] 与 s[j] 相等时, 这就复杂一些了, 有如下<strong>三种情况</strong>:</p> <ul><li>情况一: 下标 i 与 j 相同, 同一个字符例如 a, 当然是回文子串.</li> <li>情况二: 下标 i 与 j 相差为 1, 例如 aa, 也是回文子串.</li> <li>情况三: 下标 i 与 j 相差大于 1 的时候, 例如 cabac, 此时 s[i] 与 s[j] 已经相同了, 就看 i 到 j 区间是不是回文子串就看 aba 是不是回文就可以了, 那么 aba 的区间就是 i + 1 与 j - 1 区间, 这个区间是不是回文就看 dp[i + 1][j - 1] 是否为 true.</li></ul> <p>以上三种情况分析完了, 那么递归公式如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 情况一 和 情况二</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        result<span class="token operator">++</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 情况三</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        result<span class="token operator">++</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>result 就是统计回文子串的数量.</p> <p>注意这里没有列出当 s[i] 与 s[j] 不相等的时候, 因为在下面 dp[i][j] 初始化的时候, 就初始为 false.</p> <blockquote><p>dp数组如何初始化</p></blockquote> <p>所以 dp[i][j] 初始化为 false.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>遍历顺序可有有点讲究了. 首先从递推公式中可以看出, 情况三是根据 <code>dp[i + 1][j - 1]</code>​ 是否为 true, 再对 dp[i][j] 进行赋值 true 的.</p> <p>dp[i + 1][j - 1] 在 dp[i][j] 的<strong>左下角</strong>, 如图:</p> <p><img src="/img/net-img-20210121171032473-20230310132134822-20240317155728-3jgnfae.jpg" alt="647.回文子串"></p> <p>如果这矩阵是从上到下, 从左到右遍历, 那么会用到没有计算过的 dp[i + 1][j - 1], 也就是根据不确定是不是回文的区间 [i + 1, j - 1], 来判断了 [i, j] 是不是回文, 那结果一定是不对的.</p> <p><strong>所以一定要</strong>​<mark><strong>从下到上, 从左到右</strong></mark>​<strong>遍历, 这样保证 dp[i + 1][j - 1] 都是经过计算的</strong>. 有的代码实现是优先遍历列, 然后遍历行, 其实也是一个道理, 都是为了保证 dp[i + 1][j - 1] 都是经过计算的.</p> <blockquote><p>举例推导dp数组</p></blockquote> <p>举例, 输入: &quot;aaa&quot;, dp[i][j] 状态如下:</p> <p><img src="/img/net-img-20210121171059951-20230310132153163-20240317155728-p8geszm.jpg" alt="647.回文子串1"></p> <p>图中有 6 个 true, 所以就是有 6 个回文子串.</p> <p><strong>注意因为 dp[i][j] 的定义, 所以 j 一定是大于等于 i 的, 那么在填充 dp[i][j] 的时候一定是只填充右上半部分</strong>.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">countSubstrings</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> chars<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    boolean<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> boolean<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 从下往上遍历</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 从左往右遍历</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 仅考虑ij相同的情况(ij不同默认就为false了)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>chars<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> chars<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 情况一 和 情况二</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token operator">++</span><span class="token punctuation">;</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token comment">// 情况三</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token operator">++</span><span class="token punctuation">;</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h6 id="双指针法"><a href="#双指针法" class="header-anchor">#</a> 双指针法</h6> <p>动态规划的空间复杂度是偏高的, 再看一下中心拓展法: 回文子串数量(647-中等).</p> <h5 id="最长回文子序列-516-中等-🌸"><a href="#最长回文子序列-516-中等-🌸" class="header-anchor">#</a> 最长回文子序列(516-中等)🌸</h5> <h6 id="题目描述-48"><a href="#题目描述-48" class="header-anchor">#</a> 题目描述</h6> <p>给定一个字符串 s, 找到其中<strong>最长的回文子序列</strong>, 并返回该序列的长度. 可以假设 s 的最大长度为 1000.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;bbbab&quot;</span>   输出<span class="token operator">:</span> <span class="token number">4</span>
解释<span class="token operator">:</span> 一个可能的最长回文子序列为 <span class="token string">&quot;bbbb&quot;</span><span class="token punctuation">.</span> 
输入<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">&quot;cbbd&quot;</span>    输出<span class="token operator">:</span> <span class="token number">2</span>
解释<span class="token operator">:</span> 一个可能的最长回文子序列为 <span class="token string">&quot;bb&quot;</span><span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/description/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-palindromic-subsequence/description/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h6 id="动态规划-30"><a href="#动态规划-30" class="header-anchor">#</a> 动态规划</h6> <p>要搞清楚回文子串和回文子序列两者之间的区别. <mark><strong>回文子串是要连续的, 回文子序列可不是连续的</strong></mark>​ <strong>!</strong></p> <p>思路其实是差不多的, 但本题要比求回文子串简单一点, 因为情况少了一点.</p> <p>动规五部曲分析如下:</p> <blockquote><p>确定dp数组以及下标的含义</p></blockquote> <p><mark><strong>dp[i][j]: 字符串 s 在 [i, j] 范围内最长的回文子序列的长度为 dp[i][j]</strong></mark> .</p> <blockquote><p>确定递推公式</p></blockquote> <p>在判断回文子串的题目中, 关键逻辑就是看 s[i] 与 s[j] 是否相同.</p> <p>如果 <strong>s[i] 与 s[j] 相同</strong>, 那么 <strong>dp[i][j] = dp[i + 1][j - 1] + 2</strong>.</p> <p>如图:</p> <p><img src="/img/net-img-20210127151350563-20240317161236-kmqsuba.jpg" alt="516.最长回文子序列"></p> <p>如果 <strong>s[i] 与 s[j] 不相同</strong>, 说明 s[i] 和 s[j] 的同时加入并不能增加 [i, j] 区间回文子序列的长度, 那么分别加入 s[i], s[j] 看看哪一个可以组成最长的回文子序列.</p> <ul><li>加入 s[j] 的回文子序列长度为 dp[i + 1][j].</li> <li>加入 s[i] 的回文子序列长度为 dp[i][j - 1].</li></ul> <p>那么 dp[i][j] 一定是<strong>取最大</strong>的, 即: <strong>dp[i][j] = max(dp[i + 1][j], dp[i][j - 1])</strong> ;</p> <p><img src="/img/net-img-20210127151420476-20240317161236-u3roo5d.jpg" alt="516.最长回文子序列1"></p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>dp数组如何初始化</p></blockquote> <p>首先要考虑当 i 和 j 相同的情况, 从递推公式: dp[i][j] = dp[i + 1][j - 1] + 2; 可以看出 递推公式是计算不到 i 和 j 相同时候的情况.</p> <p>所以需要手动初始化一下, 当 i 与 j 相同, 那么 dp[i][j] 一定是等于 1 的, 即: <strong>一个字符的回文子序列长度就是 1</strong>.</p> <p>其他情况 dp[i][j] 初始为 0 就行, 这样递推公式: dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]); 中 dp[i][j] 才不会被初始值覆盖.</p> <blockquote><p>确定遍历顺序</p></blockquote> <p>从递归公式中, 可以看出 dp[i][j] 依赖于 dp[i + 1][j - 1], dp[i + 1][j] 和 dp[i][j - 1], 如图:</p> <p><img src="/img/net-img-20230102172155-20240317161236-zrdnbs6.png" alt=""></p> <p><strong>所以遍历 i 的时候一定要</strong>​<mark><strong>从下到上遍历</strong></mark>​ <strong>, 这样才能保证下一行的数据是经过计算的</strong>.</p> <p>j 的话, 可以正常从左向右遍历.</p> <p>代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>举例推导dp数组</p></blockquote> <p>输入 s:&quot;cbbd&quot; 为例, dp 数组状态如图:</p> <p><img src="/img/net-img-20210127151521432-20240317161236-6yuve5d.jpg" alt="516.最长回文子序列3"></p> <p>红色框即: dp[0][s.size() - 1] 为最终结果.</p> <p>以上分析完毕, 代码如下:</p> <div class="language-CPP line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestPalindromeSubseq</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 初始化</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 从下往上遍历, 保证情况不漏</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// 从左往右遍历</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 字符相同</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>‍</p> <p>‍</p> <p>‍</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/main/docs/40.算法/4000.算法/100.算法题目🌟/1000.动态规划题目.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8f069b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">贪心算法题目</div></a> <a href="/pages/8f83eb/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">回溯算法题目</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8f069b/" class="prev">贪心算法题目</a></span> <span class="next"><a href="/pages/8f83eb/">回溯算法题目</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:1174520425@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/nanodaemony" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2025
    <span>达尔文的猹 | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3f3e0e10.js" defer></script><script src="/assets/js/2.e9fcb30c.js" defer></script><script src="/assets/js/3.1998f389.js" defer></script><script src="/assets/js/205.add8738b.js" defer></script>
  </body>
</html>
