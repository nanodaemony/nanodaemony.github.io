<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring(Boot)基础 | Pangolin</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="大道至简">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.76d9f797.css" as="style"><link rel="preload" href="/assets/js/app.5bc2c979.js" as="script"><link rel="preload" href="/assets/js/2.eccd4273.js" as="script"><link rel="preload" href="/assets/js/156.3e91e0f4.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8038d8.js"><link rel="prefetch" href="/assets/js/100.db890b43.js"><link rel="prefetch" href="/assets/js/101.9b9a913e.js"><link rel="prefetch" href="/assets/js/102.b98098b4.js"><link rel="prefetch" href="/assets/js/103.20eafae5.js"><link rel="prefetch" href="/assets/js/104.5f942f86.js"><link rel="prefetch" href="/assets/js/105.a443c173.js"><link rel="prefetch" href="/assets/js/106.6530e112.js"><link rel="prefetch" href="/assets/js/107.7b05a1d1.js"><link rel="prefetch" href="/assets/js/108.8c45adc4.js"><link rel="prefetch" href="/assets/js/109.ea29e43c.js"><link rel="prefetch" href="/assets/js/11.8d2b228f.js"><link rel="prefetch" href="/assets/js/110.0765054b.js"><link rel="prefetch" href="/assets/js/111.ae06b85d.js"><link rel="prefetch" href="/assets/js/112.b27bb80e.js"><link rel="prefetch" href="/assets/js/113.592e5b3f.js"><link rel="prefetch" href="/assets/js/114.677c3c60.js"><link rel="prefetch" href="/assets/js/115.fb35062d.js"><link rel="prefetch" href="/assets/js/116.19de2d57.js"><link rel="prefetch" href="/assets/js/117.ac783334.js"><link rel="prefetch" href="/assets/js/118.06b27dd3.js"><link rel="prefetch" href="/assets/js/119.cf6bb932.js"><link rel="prefetch" href="/assets/js/12.8764d408.js"><link rel="prefetch" href="/assets/js/120.ba8e09a5.js"><link rel="prefetch" href="/assets/js/121.bc501a72.js"><link rel="prefetch" href="/assets/js/122.c9a3dd47.js"><link rel="prefetch" href="/assets/js/123.b474c20b.js"><link rel="prefetch" href="/assets/js/124.f405a8c5.js"><link rel="prefetch" href="/assets/js/125.24083f67.js"><link rel="prefetch" href="/assets/js/126.3c5c6c33.js"><link rel="prefetch" href="/assets/js/127.b561056f.js"><link rel="prefetch" href="/assets/js/128.58891fb1.js"><link rel="prefetch" href="/assets/js/129.5073fbfd.js"><link rel="prefetch" href="/assets/js/13.1034e1a1.js"><link rel="prefetch" href="/assets/js/130.ca12ca1d.js"><link rel="prefetch" href="/assets/js/131.8e520e7f.js"><link rel="prefetch" href="/assets/js/132.0f186ee2.js"><link rel="prefetch" href="/assets/js/133.1d8479f7.js"><link rel="prefetch" href="/assets/js/134.9c30d69b.js"><link rel="prefetch" href="/assets/js/135.91463dab.js"><link rel="prefetch" href="/assets/js/136.5e57454a.js"><link rel="prefetch" href="/assets/js/137.1d4e51f0.js"><link rel="prefetch" href="/assets/js/138.6cd3ac7f.js"><link rel="prefetch" href="/assets/js/139.7bd789a6.js"><link rel="prefetch" href="/assets/js/14.ead46968.js"><link rel="prefetch" href="/assets/js/140.e1d92390.js"><link rel="prefetch" href="/assets/js/141.23e11057.js"><link rel="prefetch" href="/assets/js/142.c8cc0f38.js"><link rel="prefetch" href="/assets/js/143.fc738cb7.js"><link rel="prefetch" href="/assets/js/144.67c64203.js"><link rel="prefetch" href="/assets/js/145.cc73ed45.js"><link rel="prefetch" href="/assets/js/146.adaac4c0.js"><link rel="prefetch" href="/assets/js/147.0e83b5c1.js"><link rel="prefetch" href="/assets/js/148.1f253a46.js"><link rel="prefetch" href="/assets/js/149.ab428593.js"><link rel="prefetch" href="/assets/js/15.198f32e1.js"><link rel="prefetch" href="/assets/js/150.64cd514e.js"><link rel="prefetch" href="/assets/js/151.ca1ae55a.js"><link rel="prefetch" href="/assets/js/152.4119b23d.js"><link rel="prefetch" href="/assets/js/153.ed663263.js"><link rel="prefetch" href="/assets/js/154.71b836f6.js"><link rel="prefetch" href="/assets/js/155.c47e2e88.js"><link rel="prefetch" href="/assets/js/157.811b1421.js"><link rel="prefetch" href="/assets/js/158.71193c19.js"><link rel="prefetch" href="/assets/js/159.f09778fd.js"><link rel="prefetch" href="/assets/js/16.03096de2.js"><link rel="prefetch" href="/assets/js/160.15d99de4.js"><link rel="prefetch" href="/assets/js/161.813166a0.js"><link rel="prefetch" href="/assets/js/162.c52bbf77.js"><link rel="prefetch" href="/assets/js/163.ada6991a.js"><link rel="prefetch" href="/assets/js/164.d8ceba57.js"><link rel="prefetch" href="/assets/js/165.a645ef3a.js"><link rel="prefetch" href="/assets/js/166.995d24ad.js"><link rel="prefetch" href="/assets/js/167.d7278e80.js"><link rel="prefetch" href="/assets/js/168.e388905a.js"><link rel="prefetch" href="/assets/js/169.52edabbb.js"><link rel="prefetch" href="/assets/js/17.a49f9c19.js"><link rel="prefetch" href="/assets/js/170.0b62c5b4.js"><link rel="prefetch" href="/assets/js/171.017c8997.js"><link rel="prefetch" href="/assets/js/172.f0763c39.js"><link rel="prefetch" href="/assets/js/173.c961bf43.js"><link rel="prefetch" href="/assets/js/174.395224c0.js"><link rel="prefetch" href="/assets/js/175.52fbdc96.js"><link rel="prefetch" href="/assets/js/176.14e0a3b2.js"><link rel="prefetch" href="/assets/js/177.78f7d89f.js"><link rel="prefetch" href="/assets/js/178.c08bdd65.js"><link rel="prefetch" href="/assets/js/179.b634397c.js"><link rel="prefetch" href="/assets/js/18.9786a034.js"><link rel="prefetch" href="/assets/js/180.284b6c99.js"><link rel="prefetch" href="/assets/js/181.b4744ee7.js"><link rel="prefetch" href="/assets/js/182.8bfd08cd.js"><link rel="prefetch" href="/assets/js/183.59b0b92b.js"><link rel="prefetch" href="/assets/js/184.a5fae95c.js"><link rel="prefetch" href="/assets/js/185.dcf55c72.js"><link rel="prefetch" href="/assets/js/186.6b1cf319.js"><link rel="prefetch" href="/assets/js/187.312708d0.js"><link rel="prefetch" href="/assets/js/188.71de21d0.js"><link rel="prefetch" href="/assets/js/189.7d72c108.js"><link rel="prefetch" href="/assets/js/19.089d6618.js"><link rel="prefetch" href="/assets/js/190.85dce0bd.js"><link rel="prefetch" href="/assets/js/191.08f7136b.js"><link rel="prefetch" href="/assets/js/192.6a155217.js"><link rel="prefetch" href="/assets/js/193.64f71670.js"><link rel="prefetch" href="/assets/js/194.c4d60c72.js"><link rel="prefetch" href="/assets/js/195.748850e9.js"><link rel="prefetch" href="/assets/js/196.887ef31c.js"><link rel="prefetch" href="/assets/js/197.4473c177.js"><link rel="prefetch" href="/assets/js/198.ea53a990.js"><link rel="prefetch" href="/assets/js/199.886f6490.js"><link rel="prefetch" href="/assets/js/20.a52783e8.js"><link rel="prefetch" href="/assets/js/200.7619a798.js"><link rel="prefetch" href="/assets/js/201.d3f5de5f.js"><link rel="prefetch" href="/assets/js/202.ed4c18cc.js"><link rel="prefetch" href="/assets/js/203.7937068e.js"><link rel="prefetch" href="/assets/js/204.3dbdd61c.js"><link rel="prefetch" href="/assets/js/205.52bc6fdf.js"><link rel="prefetch" href="/assets/js/206.4393998f.js"><link rel="prefetch" href="/assets/js/207.ec8e121d.js"><link rel="prefetch" href="/assets/js/208.f54d4e42.js"><link rel="prefetch" href="/assets/js/209.1bc5d06d.js"><link rel="prefetch" href="/assets/js/21.2e3bed21.js"><link rel="prefetch" href="/assets/js/210.2a3dc088.js"><link rel="prefetch" href="/assets/js/211.7084c526.js"><link rel="prefetch" href="/assets/js/212.de742850.js"><link rel="prefetch" href="/assets/js/213.fc775028.js"><link rel="prefetch" href="/assets/js/214.e338168c.js"><link rel="prefetch" href="/assets/js/215.3e89c57e.js"><link rel="prefetch" href="/assets/js/216.ecfe7587.js"><link rel="prefetch" href="/assets/js/217.14dcd4a2.js"><link rel="prefetch" href="/assets/js/218.ee7d57f7.js"><link rel="prefetch" href="/assets/js/219.c263c1e8.js"><link rel="prefetch" href="/assets/js/22.3d09766f.js"><link rel="prefetch" href="/assets/js/220.33f2bfd2.js"><link rel="prefetch" href="/assets/js/221.cd55e739.js"><link rel="prefetch" href="/assets/js/222.63107647.js"><link rel="prefetch" href="/assets/js/223.768ef403.js"><link rel="prefetch" href="/assets/js/224.54357078.js"><link rel="prefetch" href="/assets/js/225.b8e46582.js"><link rel="prefetch" href="/assets/js/226.1d0dcae9.js"><link rel="prefetch" href="/assets/js/227.a351c0a1.js"><link rel="prefetch" href="/assets/js/228.f7b8c278.js"><link rel="prefetch" href="/assets/js/229.8e4aba4d.js"><link rel="prefetch" href="/assets/js/23.b87e3933.js"><link rel="prefetch" href="/assets/js/230.186bd7a5.js"><link rel="prefetch" href="/assets/js/231.dad483e1.js"><link rel="prefetch" href="/assets/js/232.26555358.js"><link rel="prefetch" href="/assets/js/233.658ba0e4.js"><link rel="prefetch" href="/assets/js/234.7994cee0.js"><link rel="prefetch" href="/assets/js/235.3934d057.js"><link rel="prefetch" href="/assets/js/236.59cb6eac.js"><link rel="prefetch" href="/assets/js/237.baa1c655.js"><link rel="prefetch" href="/assets/js/238.8ee9f8ae.js"><link rel="prefetch" href="/assets/js/239.b0fe3966.js"><link rel="prefetch" href="/assets/js/24.afe2a3c4.js"><link rel="prefetch" href="/assets/js/240.d06483fa.js"><link rel="prefetch" href="/assets/js/241.81a2223e.js"><link rel="prefetch" href="/assets/js/242.8f6eee74.js"><link rel="prefetch" href="/assets/js/243.874461fa.js"><link rel="prefetch" href="/assets/js/244.ec0bb622.js"><link rel="prefetch" href="/assets/js/245.2ecf61f8.js"><link rel="prefetch" href="/assets/js/246.e7f6e55c.js"><link rel="prefetch" href="/assets/js/247.f32a1a4b.js"><link rel="prefetch" href="/assets/js/248.4302c4d8.js"><link rel="prefetch" href="/assets/js/249.9b0a4d9f.js"><link rel="prefetch" href="/assets/js/25.a22777b8.js"><link rel="prefetch" href="/assets/js/250.1295326c.js"><link rel="prefetch" href="/assets/js/251.d1cdb160.js"><link rel="prefetch" href="/assets/js/252.4e9d56fe.js"><link rel="prefetch" href="/assets/js/253.5a23b42d.js"><link rel="prefetch" href="/assets/js/254.8777547c.js"><link rel="prefetch" href="/assets/js/255.b8825033.js"><link rel="prefetch" href="/assets/js/256.0ee3689d.js"><link rel="prefetch" href="/assets/js/257.4a684795.js"><link rel="prefetch" href="/assets/js/258.ca696e72.js"><link rel="prefetch" href="/assets/js/259.fdf867d0.js"><link rel="prefetch" href="/assets/js/26.c84357e5.js"><link rel="prefetch" href="/assets/js/260.d35d60d5.js"><link rel="prefetch" href="/assets/js/261.c162cef5.js"><link rel="prefetch" href="/assets/js/262.8cbc5289.js"><link rel="prefetch" href="/assets/js/263.c05bbe4c.js"><link rel="prefetch" href="/assets/js/264.2e7c8f69.js"><link rel="prefetch" href="/assets/js/265.372a0632.js"><link rel="prefetch" href="/assets/js/266.49c38b9d.js"><link rel="prefetch" href="/assets/js/267.f7406d35.js"><link rel="prefetch" href="/assets/js/268.c7846c3e.js"><link rel="prefetch" href="/assets/js/269.e30bdc7f.js"><link rel="prefetch" href="/assets/js/27.0b3da7b9.js"><link rel="prefetch" href="/assets/js/270.8a3786ce.js"><link rel="prefetch" href="/assets/js/271.4b771c95.js"><link rel="prefetch" href="/assets/js/272.c710d2d6.js"><link rel="prefetch" href="/assets/js/273.43fb2872.js"><link rel="prefetch" href="/assets/js/274.d8a9dff2.js"><link rel="prefetch" href="/assets/js/275.c2812b68.js"><link rel="prefetch" href="/assets/js/276.406503c4.js"><link rel="prefetch" href="/assets/js/277.10c29e54.js"><link rel="prefetch" href="/assets/js/278.5f4b657a.js"><link rel="prefetch" href="/assets/js/279.84b86ae8.js"><link rel="prefetch" href="/assets/js/28.1c1fd5a6.js"><link rel="prefetch" href="/assets/js/280.8a2ba3b2.js"><link rel="prefetch" href="/assets/js/281.4a7f2b91.js"><link rel="prefetch" href="/assets/js/282.7b2f2668.js"><link rel="prefetch" href="/assets/js/283.455f93df.js"><link rel="prefetch" href="/assets/js/284.1a448478.js"><link rel="prefetch" href="/assets/js/285.19eebc05.js"><link rel="prefetch" href="/assets/js/286.5423cfc6.js"><link rel="prefetch" href="/assets/js/287.afbe115e.js"><link rel="prefetch" href="/assets/js/288.d4f4f247.js"><link rel="prefetch" href="/assets/js/289.da477465.js"><link rel="prefetch" href="/assets/js/29.103209e9.js"><link rel="prefetch" href="/assets/js/290.abf99800.js"><link rel="prefetch" href="/assets/js/291.71fe3ae6.js"><link rel="prefetch" href="/assets/js/292.455169ca.js"><link rel="prefetch" href="/assets/js/293.d23ffed4.js"><link rel="prefetch" href="/assets/js/294.1a753204.js"><link rel="prefetch" href="/assets/js/295.badfa110.js"><link rel="prefetch" href="/assets/js/296.344206a1.js"><link rel="prefetch" href="/assets/js/297.29e4f914.js"><link rel="prefetch" href="/assets/js/298.f9db8940.js"><link rel="prefetch" href="/assets/js/299.2253c1e7.js"><link rel="prefetch" href="/assets/js/3.e5ca1c51.js"><link rel="prefetch" href="/assets/js/30.e76a827e.js"><link rel="prefetch" href="/assets/js/300.e5bfd607.js"><link rel="prefetch" href="/assets/js/301.cc3e786e.js"><link rel="prefetch" href="/assets/js/302.7fdc62b6.js"><link rel="prefetch" href="/assets/js/303.b1db491f.js"><link rel="prefetch" href="/assets/js/304.18917b0f.js"><link rel="prefetch" href="/assets/js/305.d352aeb5.js"><link rel="prefetch" href="/assets/js/306.8bc72324.js"><link rel="prefetch" href="/assets/js/307.854b4037.js"><link rel="prefetch" href="/assets/js/308.6a0e4a18.js"><link rel="prefetch" href="/assets/js/309.d184df6f.js"><link rel="prefetch" href="/assets/js/31.7e4b200d.js"><link rel="prefetch" href="/assets/js/310.8e0af1ab.js"><link rel="prefetch" href="/assets/js/311.00bae85e.js"><link rel="prefetch" href="/assets/js/312.bc92cba9.js"><link rel="prefetch" href="/assets/js/313.8f70a987.js"><link rel="prefetch" href="/assets/js/314.8f190f1f.js"><link rel="prefetch" href="/assets/js/315.4b8506c7.js"><link rel="prefetch" href="/assets/js/316.5911c1f9.js"><link rel="prefetch" href="/assets/js/317.58cca547.js"><link rel="prefetch" href="/assets/js/318.4f23c053.js"><link rel="prefetch" href="/assets/js/319.941f5d3e.js"><link rel="prefetch" href="/assets/js/32.9c188bac.js"><link rel="prefetch" href="/assets/js/320.a3f15adc.js"><link rel="prefetch" href="/assets/js/321.14c74686.js"><link rel="prefetch" href="/assets/js/322.5f7b1b87.js"><link rel="prefetch" href="/assets/js/323.ab05eccb.js"><link rel="prefetch" href="/assets/js/324.292806ba.js"><link rel="prefetch" href="/assets/js/325.b96314dd.js"><link rel="prefetch" href="/assets/js/326.3d8f6329.js"><link rel="prefetch" href="/assets/js/327.49cf9268.js"><link rel="prefetch" href="/assets/js/328.be56ec05.js"><link rel="prefetch" href="/assets/js/329.8c390111.js"><link rel="prefetch" href="/assets/js/33.2435d797.js"><link rel="prefetch" href="/assets/js/330.b961e5fd.js"><link rel="prefetch" href="/assets/js/331.24ce8c0b.js"><link rel="prefetch" href="/assets/js/332.115b7546.js"><link rel="prefetch" href="/assets/js/333.957e0728.js"><link rel="prefetch" href="/assets/js/334.68825ff7.js"><link rel="prefetch" href="/assets/js/335.b662f33d.js"><link rel="prefetch" href="/assets/js/336.d8818747.js"><link rel="prefetch" href="/assets/js/337.9d24e096.js"><link rel="prefetch" href="/assets/js/338.3b669645.js"><link rel="prefetch" href="/assets/js/339.51cc2773.js"><link rel="prefetch" href="/assets/js/34.d57f3bb9.js"><link rel="prefetch" href="/assets/js/340.28cfadfb.js"><link rel="prefetch" href="/assets/js/341.4e6b0bdd.js"><link rel="prefetch" href="/assets/js/342.310c1a3e.js"><link rel="prefetch" href="/assets/js/343.0e61677a.js"><link rel="prefetch" href="/assets/js/344.340a39bd.js"><link rel="prefetch" href="/assets/js/345.fff51053.js"><link rel="prefetch" href="/assets/js/346.93c709db.js"><link rel="prefetch" href="/assets/js/347.dc863ac9.js"><link rel="prefetch" href="/assets/js/348.13c191d7.js"><link rel="prefetch" href="/assets/js/349.8aea43f7.js"><link rel="prefetch" href="/assets/js/35.e20cb4ac.js"><link rel="prefetch" href="/assets/js/350.49b72b87.js"><link rel="prefetch" href="/assets/js/351.3e6e6379.js"><link rel="prefetch" href="/assets/js/352.e2524a53.js"><link rel="prefetch" href="/assets/js/353.b71b2a33.js"><link rel="prefetch" href="/assets/js/354.a4720902.js"><link rel="prefetch" href="/assets/js/355.5a8970e1.js"><link rel="prefetch" href="/assets/js/356.353f0a9c.js"><link rel="prefetch" href="/assets/js/357.648060ca.js"><link rel="prefetch" href="/assets/js/358.643b787c.js"><link rel="prefetch" href="/assets/js/359.b1bc0c81.js"><link rel="prefetch" href="/assets/js/36.6a79f8ad.js"><link rel="prefetch" href="/assets/js/360.748faf07.js"><link rel="prefetch" href="/assets/js/361.cddfbfab.js"><link rel="prefetch" href="/assets/js/362.46990756.js"><link rel="prefetch" href="/assets/js/363.f4846a88.js"><link rel="prefetch" href="/assets/js/364.e7fd6af2.js"><link rel="prefetch" href="/assets/js/365.41693194.js"><link rel="prefetch" href="/assets/js/366.60931b9e.js"><link rel="prefetch" href="/assets/js/367.c7a310db.js"><link rel="prefetch" href="/assets/js/368.cae4028a.js"><link rel="prefetch" href="/assets/js/369.e3bcd2c2.js"><link rel="prefetch" href="/assets/js/37.4ccc31d6.js"><link rel="prefetch" href="/assets/js/370.2ea3b181.js"><link rel="prefetch" href="/assets/js/371.978056e5.js"><link rel="prefetch" href="/assets/js/372.aa13db83.js"><link rel="prefetch" href="/assets/js/373.f3791afe.js"><link rel="prefetch" href="/assets/js/374.b108af2d.js"><link rel="prefetch" href="/assets/js/375.dc75d5b1.js"><link rel="prefetch" href="/assets/js/376.8a663da6.js"><link rel="prefetch" href="/assets/js/38.9816dff1.js"><link rel="prefetch" href="/assets/js/39.03d551c0.js"><link rel="prefetch" href="/assets/js/4.611d42c4.js"><link rel="prefetch" href="/assets/js/40.ce442bf2.js"><link rel="prefetch" href="/assets/js/41.d596832c.js"><link rel="prefetch" href="/assets/js/42.29309c56.js"><link rel="prefetch" href="/assets/js/43.d47b7a06.js"><link rel="prefetch" href="/assets/js/44.87716237.js"><link rel="prefetch" href="/assets/js/45.d5ef3d2b.js"><link rel="prefetch" href="/assets/js/46.21cef7ff.js"><link rel="prefetch" href="/assets/js/47.75c67941.js"><link rel="prefetch" href="/assets/js/48.b94040d3.js"><link rel="prefetch" href="/assets/js/49.507fb28d.js"><link rel="prefetch" href="/assets/js/5.e6d623f8.js"><link rel="prefetch" href="/assets/js/50.4013f17e.js"><link rel="prefetch" href="/assets/js/51.6e81cba9.js"><link rel="prefetch" href="/assets/js/52.07e4aadf.js"><link rel="prefetch" href="/assets/js/53.1d325b49.js"><link rel="prefetch" href="/assets/js/54.79ff5e8c.js"><link rel="prefetch" href="/assets/js/55.77160bdd.js"><link rel="prefetch" href="/assets/js/56.a3041056.js"><link rel="prefetch" href="/assets/js/57.b7c0602c.js"><link rel="prefetch" href="/assets/js/58.a4af9a23.js"><link rel="prefetch" href="/assets/js/59.61a80d59.js"><link rel="prefetch" href="/assets/js/6.dc644b59.js"><link rel="prefetch" href="/assets/js/60.4ae1e1f0.js"><link rel="prefetch" href="/assets/js/61.b733273a.js"><link rel="prefetch" href="/assets/js/62.63b8d77d.js"><link rel="prefetch" href="/assets/js/63.46a84bd8.js"><link rel="prefetch" href="/assets/js/64.ce8c5891.js"><link rel="prefetch" href="/assets/js/65.8abe6836.js"><link rel="prefetch" href="/assets/js/66.6f9a9cf9.js"><link rel="prefetch" href="/assets/js/67.6bc415b9.js"><link rel="prefetch" href="/assets/js/68.b100ab24.js"><link rel="prefetch" href="/assets/js/69.5d9ed0d7.js"><link rel="prefetch" href="/assets/js/7.7da3e776.js"><link rel="prefetch" href="/assets/js/70.f213eb63.js"><link rel="prefetch" href="/assets/js/71.9dbed333.js"><link rel="prefetch" href="/assets/js/72.1129fb4b.js"><link rel="prefetch" href="/assets/js/73.7459f6b0.js"><link rel="prefetch" href="/assets/js/74.2364da14.js"><link rel="prefetch" href="/assets/js/75.72e5d347.js"><link rel="prefetch" href="/assets/js/76.7f1bc93d.js"><link rel="prefetch" href="/assets/js/77.7f9bb46a.js"><link rel="prefetch" href="/assets/js/78.16497536.js"><link rel="prefetch" href="/assets/js/79.1598ba88.js"><link rel="prefetch" href="/assets/js/8.91ce867e.js"><link rel="prefetch" href="/assets/js/80.d7595902.js"><link rel="prefetch" href="/assets/js/81.c808c887.js"><link rel="prefetch" href="/assets/js/82.49dc6011.js"><link rel="prefetch" href="/assets/js/83.6e151bae.js"><link rel="prefetch" href="/assets/js/84.9d3d5086.js"><link rel="prefetch" href="/assets/js/85.2c4d111e.js"><link rel="prefetch" href="/assets/js/86.cff98baa.js"><link rel="prefetch" href="/assets/js/87.655584a0.js"><link rel="prefetch" href="/assets/js/88.109ad4f1.js"><link rel="prefetch" href="/assets/js/89.46f7ed5c.js"><link rel="prefetch" href="/assets/js/9.8a2e5f54.js"><link rel="prefetch" href="/assets/js/90.1a91e9ca.js"><link rel="prefetch" href="/assets/js/91.26a98055.js"><link rel="prefetch" href="/assets/js/92.6ed9cb6e.js"><link rel="prefetch" href="/assets/js/93.14253412.js"><link rel="prefetch" href="/assets/js/94.54415bcf.js"><link rel="prefetch" href="/assets/js/95.0e1c9d0a.js"><link rel="prefetch" href="/assets/js/96.8654188f.js"><link rel="prefetch" href="/assets/js/97.d338a1d8.js"><link rel="prefetch" href="/assets/js/98.efa1e5c5.js"><link rel="prefetch" href="/assets/js/99.83fa6575.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76d9f797.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/magic.png" alt="Pangolin" class="logo"> <span class="site-name can-hide">Pangolin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">中间件</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">个人</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/operating_system/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><a href="/basic/" class="link-title">基础</a> <span class="title" style="display:none;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>达尔文的猹</h3> <span>大道至简 悟在天成</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">🏡首页</a></div><div class="nav-item"><a href="/basic/" class="nav-link">基础</a></div><div class="nav-item"><a href="/develop/" class="nav-link">开发</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">中间件</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/books/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/pangolin/" class="nav-link">个人</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/operating_system/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><a href="/basic/" class="link-title">基础</a> <span class="title" style="display:none;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ORM框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/4553db/" class="sidebar-link">MyBatis</a></li><li><a href="/pages/d426ff/" class="sidebar-link">Spring集成MyBatis</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/45687a/" class="sidebar-link">基础</a></li><li><a href="/pages/669da3/" class="sidebar-link">Java基础</a></li><li><a href="/pages/06424b/" class="sidebar-link">类与继承</a></li><li><a href="/pages/a29a57/" class="sidebar-link">抽象类与接口</a></li><li><a href="/pages/575ca7/" class="sidebar-link">内部类</a></li><li><a href="/pages/1d42f5/" class="sidebar-link">枚举类</a></li><li><a href="/pages/68df7d/" class="sidebar-link">常用类</a></li><li><a href="/pages/208d9a/" class="sidebar-link">关键字</a></li><li><a href="/pages/19431a/" class="sidebar-link">注解</a></li><li><a href="/pages/98c0c9/" class="sidebar-link">异常</a></li><li><a href="/pages/a08fb2/" class="sidebar-link">泛型</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>集合类</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e52b1c/" class="sidebar-link">集合类</a></li><li><a href="/pages/20a058/" class="sidebar-link">集合容器类概述</a></li><li><a href="/pages/71ab62/" class="sidebar-link">ArrayList与LinkedList</a></li><li><a href="/pages/dd747b/" class="sidebar-link">ArrayDeque</a></li><li><a href="/pages/f0ecf7/" class="sidebar-link">PriorityQueue</a></li><li><a href="/pages/a577c4/" class="sidebar-link">HashMap与HashSet</a></li><li><a href="/pages/b65f71/" class="sidebar-link">LinkedHashMap</a></li><li><a href="/pages/02deb8/" class="sidebar-link">TreeMap与TreeSet</a></li><li><a href="/pages/8b70b6/" class="sidebar-link">WeakHashMap</a></li><li><a href="/pages/098b2b/" class="sidebar-link">CopyOnWriteArrayList</a></li><li><a href="/pages/380128/" class="sidebar-link">ConcurrentHashMap</a></li><li><a href="/pages/b23642/" class="sidebar-link">BlockingQueue</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>并发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/5d5b55/" class="sidebar-link">并发</a></li><li><a href="/pages/ef591d/" class="sidebar-link">多线程基础</a></li><li><a href="/pages/870f46/" class="sidebar-link">JMM与Volatile</a></li><li><a href="/pages/70bfda/" class="sidebar-link">JUC与AQS</a></li><li><a href="/pages/60c2c3/" class="sidebar-link">锁与互斥同步</a></li><li><a href="/pages/6e4dfa/" class="sidebar-link">显式锁与ReetrantLock</a></li><li><a href="/pages/a0d56d/" class="sidebar-link">线程安全总结</a></li><li><a href="/pages/b92a49/" class="sidebar-link">JUC组件与线程协作</a></li><li><a href="/pages/103bb5/" class="sidebar-link">Atomic原子变量与Unsafe类与CAS</a></li><li><a href="/pages/065f55/" class="sidebar-link">线程池与定时任务</a></li><li><a href="/pages/dd3660/" class="sidebar-link">ThreadLocal</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>IO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7db050/" class="sidebar-link">IO</a></li><li><a href="/pages/ccb0a7/" class="sidebar-link">文件操作</a></li><li><a href="/pages/45bc73/" class="sidebar-link">IO流操作</a></li><li><a href="/pages/404e82/" class="sidebar-link">网络IO操作</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Java高级特性</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/396bd1/" class="sidebar-link">Java高级特性</a></li><li><a href="/pages/eaa98b/" class="sidebar-link">Lambda表达式</a></li><li><a href="/pages/40af88/" class="sidebar-link">流Stream</a></li><li><a href="/pages/402b10/" class="sidebar-link">反射</a></li><li><a href="/pages/a5ebcd/" class="sidebar-link">代理</a></li><li><a href="/pages/b48bfe/" class="sidebar-link">Java性能问题定位分析</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/20204f/" class="sidebar-link">其他</a></li><li><a href="/pages/e4cde0/" class="sidebar-link">杂记</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>规范&amp;amp;风格</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ee7259/" class="sidebar-link">规范&amp;amp;风格</a></li><li><a href="/pages/139e3f/" class="sidebar-link">代码整洁之道</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ed8d11/" class="sidebar-link">Web基础</a></li><li><a href="/pages/a228d7/" aria-current="page" class="active sidebar-link">Spring(Boot)基础</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/ecd8b6/" class="sidebar-link">Spring Boot应用整合</a></li><li><a href="/pages/76dc08/" class="sidebar-link">Spring MVC</a></li><li><a href="/pages/b9aa73/" class="sidebar-link">Spring AOP</a></li><li><a href="/pages/dc74be/" class="sidebar-link">Spring事务</a></li><li><a href="/pages/b43c8c/" class="sidebar-link">Spring IOC源码分析-概览</a></li><li><a href="/pages/d9b4a5/" class="sidebar-link">Spring IOC源码分析-getBean()</a></li><li><a href="/pages/59dd3e/" class="sidebar-link">Spring IOC源码分析-createBean()</a></li><li><a href="/pages/691b21/" class="sidebar-link">Spring AOP源码分析</a></li><li><a href="/pages/d31e18/" class="sidebar-link">Spring事务源码分析</a></li><li><a href="/pages/f16cdb/" class="sidebar-link">Spring Boot源码分析</a></li><li><a href="/pages/b13a90/" class="sidebar-link">Spring MVC源码分析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/943c23/" class="sidebar-link">JVM内存区域与对象解析</a></li><li><a href="/pages/05acae/" class="sidebar-link">内存分配与垃圾收集</a></li><li><a href="/pages/d09a16/" class="sidebar-link">JVM监控与故障处理工具</a></li><li><a href="/pages/06e4ad/" class="sidebar-link">类文件结构与类加载机制</a></li><li><a href="/pages/3d00d5/" class="sidebar-link">虚拟机方法调用与指令执行引擎</a></li><li><a href="/pages/eba070/" class="sidebar-link">程序编译与代码优化</a></li><li><a href="/pages/83896f/" class="sidebar-link">虚拟机调优及参数总结</a></li><li><a href="/pages/8a0034/" class="sidebar-link">GraalVM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f6cd57/" class="sidebar-link">数据库系统原理</a></li><li><a href="/pages/410bf5/" class="sidebar-link">MySQL必知必会</a></li><li><a href="/pages/495264/" class="sidebar-link">MySQL开发与优化</a></li><li><a href="/pages/ec7e76/" class="sidebar-link">MySQL架构与日志</a></li><li><a href="/pages/4dbe1f/" class="sidebar-link">MySQL索引</a></li><li><a href="/pages/cbc7ab/" class="sidebar-link">MySQL优化</a></li><li><a href="/pages/4afd3a/" class="sidebar-link">MySQL锁机制与事务并发控制</a></li><li><a href="/pages/412461/" class="sidebar-link">MySQL高级特性</a></li><li><a href="/pages/41888c/" class="sidebar-link">MySQL设计规范</a></li><li><a href="/pages/087de5/" class="sidebar-link">MySQL架构篇</a></li><li><a href="/pages/b0952c/" class="sidebar-link">MySQL复制</a></li><li><a href="/pages/ee884d/" class="sidebar-link">MySQL高可用</a></li><li><a href="/pages/6d4f47/" class="sidebar-link">MySQL运维篇</a></li><li><a href="/pages/b8bad7/" class="sidebar-link">MySQL常用工具</a></li><li><a href="/pages/8bd691/" class="sidebar-link">MySQL日志</a></li><li><a href="/pages/5db7ef/" class="sidebar-link">MySQL备份与恢复</a></li><li><a href="/pages/3e3d3a/" class="sidebar-link">MySQL权限与安全</a></li><li><a href="/pages/5f2a5c/" class="sidebar-link">MySQL监控</a></li><li><a href="/pages/bf28eb/" class="sidebar-link">数据库LeetCode题目</a></li><li><a href="/pages/d4f878/" class="sidebar-link">数据库面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2bed26/" class="sidebar-link">Arthas</a></li><li><a href="/pages/84ff17/" class="sidebar-link">CICD</a></li><li><a href="/pages/a7e6ff/" class="sidebar-link">Maven</a></li><li><a href="/pages/2a3f45/" class="sidebar-link">Typora主题</a></li><li><a href="/pages/f28f56/" class="sidebar-link">VuePress</a></li><li><a href="/pages/9d673a/" class="sidebar-link">思源笔记</a></li><li><a href="/pages/538b8a/" class="sidebar-link">环境搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ORM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c83270/" class="sidebar-link">MyBatis</a></li><li><a href="/pages/29ba44/" class="sidebar-link">Spring集成MyBatis</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>测试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e55b6f/" class="sidebar-link">测试基础</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/develop/#开发" data-v-06225672>开发</a></li><li data-v-06225672><a href="/develop/#Spring" data-v-06225672>Spring</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/nanodaemony" target="_blank" title="作者" class="beLink" data-v-06225672>NanoDaemony</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->Spring(Boot)基础<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="_2-spring-boot-基础"><a href="#_2-spring-boot-基础" class="header-anchor">#</a> 2.Spring(Boot)基础</h1> <p>Spring 是一个轻量级 Web <strong>开发框架</strong>.</p> <h4 id="spring模块"><a href="#spring模块" class="header-anchor">#</a> Spring模块</h4> <p>Spring 框架是<strong>很多模块</strong>的集合. 下图是 Spring4.x 的模块架构, 包含<strong>核心容器, 数据访问/集成,, Web, AOP, 工具, 消息和测试等模块</strong>. 5.x 版本中 Web 模块的 Portlet 组件已废弃, 同时增加了用于异步响应式处理的 <strong>WebFlux</strong> 组件.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/Spring%E4%B8%BB%E8%A6%81%E6%A8%A1%E5%9D%97.png" alt=""></p> <blockquote><p>Spring Core Container</p></blockquote> <p><strong>(1) Core</strong></p> <p>Spring 框架的核心, 是其他组件的基本模块.</p> <p><strong>(2) Beans</strong></p> <p>包含访问配置文件, 创建和管理 Bean 以及进行 IoC/DI 操作相关的所有类.</p> <p><strong>(3) Context</strong></p> <p>模构建于 Core 和 Beans 模块基础之上, 提供了一种框架式对象访问方法. Context 模块继承了 Beans 的特性, 为 Spring 核心提供了大量扩展, 添加了对国际化, 事件传播, 资源加载和对 Context 的透明创建的支持. Context 模块同时也支持 J2EE 的一些特性, ApplicationContext 接口是 Context 模块的关键.</p> <p><strong>(4) Expression Language</strong></p> <p>提供表达式语言, 用于在运行时查询和操纵对象.</p> <blockquote><p>Spring Data Access/Integration</p></blockquote> <p><strong>(1) JDBC</strong></p> <p>提供了一个 JDBC 抽象层, 可以消除冗长的 JDBC 编码并解析数据库厂商特有的错误代码. 包含了 Spring 对 JDBC 数据访问进行封装的所有类.</p> <p><strong>(2) ORM</strong></p> <p>该模块为 JPA, Hibernate, iBatis 等对象-关系映射 API 提供了一个交互层. 利用 ORM 封装包, 可以混合使用所有 Spring 提供的特性进行 O/R 映射, 如简单声明性事务管理.</p> <p><strong>(3) OXM</strong></p> <p>该模块提供了一个对 Object/XML 映射实现的抽象层, Object/XML 映射实现包括 JAXB,  Castor, XMLBeans 等.</p> <p><strong>(4) JMS(Java Messaging Service)</strong></p> <p>主要包含一些制造和消费消息的特性.</p> <p><strong>(5) Transaction</strong></p> <p>支持<strong>编程和声明式</strong>事务管理, 这些事务类必须实现特定的接口, 并且对所有 bean 都适用.</p> <blockquote><p>Spring Web</p></blockquote> <p>提供了面向 Web 的集成特性. 如多文件上传, 使用 Servlet Listeners 初始化 IoC 容器以及一个面向 Web 的应用上下文. 它还包含 Spring 远程支持中 Web 的相关部分.</p> <blockquote><p>Spring AOP</p></blockquote> <p>Aspects 模块提供了对 AspectJ 的集成支持.</p> <p>Instrumentation 模块提供了 class instrumentation 支持和 classloader 实现, 使得可以在特定的应用服务器上使用.</p> <blockquote><p>Test</p></blockquote> <p>Test 模块支持使用 JUnit 和 TestNG 对 Spring 组件进行测试.</p> <h4 id="控制反转"><a href="#控制反转" class="header-anchor">#</a> 控制反转</h4> <h5 id="_1-ioc概述"><a href="#_1-ioc概述" class="header-anchor">#</a> 1.IOC概述</h5> <p>IoC(Inverse of Control 控制反转)是一种<strong>设计思想</strong>, 就是<strong>将原本在程序中手动创建对象的控制权, 交由 Spring 框架来管理</strong>. <strong>控制</strong>就是开发者本来可以控制对象的<strong>创建, 管理</strong>过程; <strong>反转</strong>就是将这个<strong>权利交给外部的环境</strong>去实现, 如 IOC 容器. IoC 并非 Spring 框架特有.</p> <p>将对象之间的<strong>相互依赖关系</strong>交给 IoC 容器来管理, 并由 IoC 容器完成对象的<strong>注入</strong>. <strong>IoC 容器就像是一个工厂一样, 当需要创建一个对象的时候, 只需要配置好配置文件/注解即可, 完全不用考虑对象是如何被创建出来的</strong>. 使用控制反转后开发者失去了创建管理对象的权利, 但可以<strong>不用考虑对象的创建, 管理等一系列事情</strong>.</p> <p>例如类 A 依赖于类 B:</p> <ul><li><strong>传统开发方式</strong>: 在类 A 中手动 new 一个 B 的对象出来.</li> <li><strong>使用 IoC 开发方式</strong>: 不通过 new 关键字来创建对象, 而是通过 IoC 容器(Spring 框架) 来生成实例化对象. 需要哪个对象<strong>直接从 IoC 容器里面获取</strong>即可.</li></ul> <p>IOC 最核心的思想: 资源不由使用资源的双方管理, <strong>而由不使用资源的第三方管理</strong>.</p> <p>控制反转的好处: (1)降低对象之间的<strong>耦合度</strong>或依赖程度; (2)资源集中管理, 实现资源的可配置和易管理; (3)简化应用开发, 增加可维护性.</p> <h5 id="_2-依赖倒置原则"><a href="#_2-依赖倒置原则" class="header-anchor">#</a> 2.依赖倒置原则</h5> <p>假设设计一辆汽车: 先设计轮子, 然后根据轮子大小设计底盘, 接着根据底盘设计车身, 最后根据车身设计整个汽车. 就出现了一个**&quot;依赖&quot;关系**: 汽车依赖车身, 车身依赖底盘, 底盘依赖轮子.</p> <p>​<img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220412212217610.png" alt="">​</p> <p>这样设计的可维护性很低. 假设设计完后要把轮子都改大一码, 因为是根据轮子的尺寸设计底盘, 轮子尺寸一改, 底盘设计就得修改; 同样因为是根据底盘设计车身, 那么车身也得改, 同理汽车设计也得改: 整个设计几乎都得改!</p> <p>换一种思路. 先设计汽车的<strong>大概样子</strong>, 然后根据汽车的样子来设计车身, 根据车身来设计底盘, 最后根据底盘来设计轮子. 这时候<strong>依赖关系就倒置</strong>过来了: 轮子依赖底盘, 底盘依赖车身, 车身依赖汽车.</p> <p>​<img src="" alt="">​</p> <p>这时候如果要改轮子<strong>就只需要改动轮子的设计</strong>, 而不需要动其他东西的设计了.</p> <p>这就是依赖倒置原则: <strong>把原本的高层建筑依赖底层建筑&quot;倒置&quot;过来, 变成底层建筑依赖高层建筑</strong>. 高层建筑决定<strong>需要什么</strong>, 底层去实现这样的需求, 但高层并不用管底层是怎么实现的. 这样就不会出现&quot;牵一发动全身&quot;的情况.</p> <p>这几种概念的关系如下:</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/image-20220412212259278.png" alt=""></p> <h5 id="_3-ioc与di的关系"><a href="#_3-ioc与di的关系" class="header-anchor">#</a> 3.IOC与DI的关系</h5> <ul><li>IOC 是一种<strong>设计思想</strong>, 就是将原本在程序中手动创建对象的控制权交由 Spring 框架管理.</li> <li>DI (Dependency Injection) 是<strong>依赖注入</strong>, 向<strong>类里面属性注入其依赖值</strong>. <strong>依赖注入</strong>是 IOC 最常见的<strong>实现方式</strong>. <strong>依赖注入不能单独存在, 需要在 IOC 基础上完成操作</strong>.</li></ul> <h4 id="bean基础"><a href="#bean基础" class="header-anchor">#</a> Bean基础</h4> <h5 id="_1-bean概述"><a href="#_1-bean概述" class="header-anchor">#</a> 1.Bean概述</h5> <p>在 Spring 中, 组成应用程序的主体及由 IOC 容器管理的对象称为 <strong>bean</strong>. bean 就是由 IOC 容器初始化, 装配及管理的对象, 除此之外 bean 与程序中的其他对象没有什么区别.</p> <p>配置类如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainConfig</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;myBook&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">book</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="_2-beanname"><a href="#_2-beanname" class="header-anchor">#</a> 2.BeanName</h5> <p>每个 Bean 在 Spring 容器中都有一个<strong>唯一的名字</strong>(beanName)和 0 或<strong>多个别名</strong>(aliases), 通过 beanName 和 alias 都能从容器中获取 bean.</p> <p>通过 <strong>@Bean</strong> 的形式定义 bean 的默认名称是<strong>方法名</strong>, 也可以指定 bean 的名称如 <strong>@Bean(value = &quot;beanName&quot;)</strong>. 通过 beanName 可从容器中获取对应的 bean.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定配置类</span>
	<span class="token class-name">AnnotationConfigApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">NanoConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 通过beanName获取bean</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;myBook&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3-configuration配置类"><a href="#_3-configuration配置类" class="header-anchor">#</a> 3.@Configuration配置类</h5> <p>@Configuration 注解一般用来声明<strong>配置类</strong>, 相比 @Component 注解, @Configuration 注解声明配置类语义更加明确.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TransferService</span> <span class="token function">transferService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransferServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="bean作用域"><a href="#bean作用域" class="header-anchor">#</a> Bean作用域</h4> <h5 id="_1-作用域分类"><a href="#_1-作用域分类" class="header-anchor">#</a> 1.作用域分类</h5> <p>在许多场景下单例 bean 是理想的方案, 不过有的类<strong>会携带或保持一些状态</strong>, 因此重用可能会污染这些单例对象的状态, 所以 Spring 定义了多种作用域的 bean.</p> <table><thead><tr><th style="text-align:center;">Scope</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>singleton</strong></td> <td style="text-align:left;">(<strong>默认的</strong>)在每个 Spring IoC 容器中, 一个 bean 定义对应只会有唯一一个 bean 实例</td></tr> <tr><td style="text-align:center;"><strong>prototype</strong></td> <td style="text-align:left;">一个 bean 定义可以有<strong>多个</strong> bean 实例</td></tr> <tr><td style="text-align:center;"><strong>request</strong></td> <td style="text-align:left;">一个 bean 定义对应于单个 <strong>HTTP 请求</strong>的生命周期, 仅适用于 <strong>WebApplicationContext</strong> 环境</td></tr> <tr><td style="text-align:center;"><strong>session</strong></td> <td style="text-align:left;">一个 bean 定义对应于单个 <strong>HTTP Session</strong> 的生命周期.</td></tr></tbody></table> <p>注意: <strong>普通</strong> ApplicationContext 仅提供 <strong>singleton 和 prototype</strong> 两种作用域. <strong>request, session</strong> 作用域只能用在 <strong>WebApplicationContext</strong> 环境中.</p> <h6 id="_1-singleton"><a href="#_1-singleton" class="header-anchor">#</a> (1)singleton</h6> <p>singleton 的 bean 是由容器来保证这种类型的 bean 在<strong>同一个容器中</strong>只存在一个<strong>共享实例</strong>. 在<strong>不指定 @Scope</strong> 的情况下, <strong>所有</strong> bean 都默认为<strong>单实例</strong>, 且在<strong>容器启动就进行实例创建(<strong>​</strong>==饿汉式加载==<strong>​</strong>)</strong>. 如果将单例 bean 指定为 <strong>@Lazy 懒加载</strong>, 那么容器启动时就<strong>不实例化对象</strong>, 而在<strong>第一次使用</strong>的时候才进行实例化. singleton bean 的生命周期全交由容器管理.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Lazy</span> <span class="token comment">// 懒加载</span>
<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Spring 的单例是基于 BeanFactory 也就是 Spring 容器的, 单例 Bean 在此容器内只有一个; 而 Java 的单例是基于 JVM, 每个 JVM 内只有一个实例</strong>.</p> <h6 id="_2-prototype"><a href="#_2-prototype" class="header-anchor">#</a> (2)prototype</h6> <p>prototype (原型类型)作用域表示一个 bean <strong>定义</strong>对应<strong>多个对象实例</strong>. prototype 对象在<strong>创建容器的时候并没有实例化</strong>, 而是<strong>当有需要获取 bean 的时候才会去创建一个对象</strong>, 而且每次获取到的对象是一个<strong>新的对象</strong>.</p> <p><strong>生命周期</strong>: 虽然这种类型的对象的<strong>实例化以及属性设置</strong>等工作都是由<strong>容器负责</strong>, 但是只要创建完毕并将对象实例返回给请求方之后, <strong>容器就不再拥有当前返回对象的引用</strong>, 请求方需要<strong>自己负责</strong> prototype 对象的后继生命周期的管理, 包括该对象的销毁.</p> <p>singleton 与 prototype 用法最大区别: <strong>有无状态</strong>. 对<strong>有状态的 bean 可以使用 prototype 作用域</strong>(比如保存每个顾客信息的对象), 而对<strong>无状态</strong>的 bean 则应该使用 <strong>singleton</strong> 作用域.</p> <h6 id="_3-request"><a href="#_3-request" class="header-anchor">#</a> (3)request</h6> <p>request 模式只适用于 Web 程序. <strong>每一次 HTTP 请求都会产生一个新的 bean</strong>, 同时该 bean 仅在当前 HTTP request 内有效, 当请求结束后, 该对象的生命周期即告结束.</p> <h6 id="_4-session"><a href="#_4-session" class="header-anchor">#</a> (4)session</h6> <p>session 模式只适用于 Web 程序. 用户打开<strong>浏览器会话开始</strong>, 直到关闭浏览器会话才会结束. 一次会话期间只会创建一个 session 对象, 所以 session 中的数据<strong>可供当前会话中所有 servlet 共享</strong>. 该 bean 仅在<strong>当前 HTTP session 内有效</strong>.</p> <h5 id="_2-scope注解"><a href="#_2-scope注解" class="header-anchor">#</a> 2.@Scope注解</h5> <p>@Scope 注解可以配置 bean 的<strong>作用域</strong>.</p> <p><strong>ConfigurableBeanFactory</strong> 接口提供了单例(SCOPE_SINGLETON) 和原型 (SCOPE_PROTOTYPE)模式的常量.</p> <p>在 <strong>MVC</strong> 中, <strong>WebApplicationContext 接口</strong>提供 MVC 下特有的<strong>作用域</strong>常量, 如请求(SCOPE_REQUEST), 会话(SCOPE_SESSION).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">.</span><span class="token constant">SCOPE_SINGLETON</span><span class="token punctuation">)</span>  	<span class="token comment">// 设置bean作用域</span>
<span class="token comment">// @Scope(WebApplicationContext.SCOPE_REQUSET)  	// 设置bean作用域(For MVC)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestBean</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConfigurableBeanFactory</span> <span class="token keyword">extends</span> <span class="token class-name">HierarchicalBeanFactory</span><span class="token punctuation">,</span> <span class="token class-name">SingletonBeanRegistry</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token constant">SCOPE_SINGLETON</span> <span class="token operator">=</span> <span class="token string">&quot;singleton&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token constant">SCOPE_PROTOTYPE</span> <span class="token operator">=</span> <span class="token string">&quot;prototype&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">WebApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> <span class="token constant">SCOPE_REQUEST</span> <span class="token operator">=</span> <span class="token string">&quot;request&quot;</span><span class="token punctuation">;</span>

	<span class="token class-name">String</span> <span class="token constant">SCOPE_SESSION</span> <span class="token operator">=</span> <span class="token string">&quot;session&quot;</span><span class="token punctuation">;</span>

	<span class="token class-name">String</span> <span class="token constant">SCOPE_APPLICATION</span> <span class="token operator">=</span> <span class="token string">&quot;application&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="_3-其他"><a href="#_3-其他" class="header-anchor">#</a> 3.其他</h5> <blockquote><p>Spring中单例bean的线程安全问题</p></blockquote> <p>单例 bean 可能<strong>存在线程问题</strong>, 当<strong>多个</strong>线程操作<strong>同一个对象</strong>的时候, 对单例对象的<strong>非静态成员变量的写操作</strong>会存在线程安全问题. 常见的有两种解决办法:</p> <ol><li>在 Bean 对象中尽量避免定义可变的成员变量(不太现实).</li> <li>在<strong>类</strong>中定义一个 <strong>ThreadLocal</strong> 成员变量, 将需要的<strong>可变成员变量保存在 ThreadLocal 中</strong>(推荐的一种方式).</li></ol> <h4 id="包扫描-componentscan"><a href="#包扫描-componentscan" class="header-anchor">#</a> 包扫描@ComponentScan</h4> <p>在<strong>配置类</strong>上使用 @ComponentScan 注解以进行<strong>包扫描</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.nano&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>1. 排除用法</strong></p> <p>参数 <strong>excludeFilters</strong> 可以排除不需要扫描的类. 下面排除 @Controller 注解的和 BookService 的类而不扫描.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;com.nano&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ASSIGNABLE_TYPE</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>2. 包含用法</strong></p> <p>参数 includeFilters 可以扫描包含的类. 若使用包含的用法, 需要把 useDefaultFilters 属性设置为 false(true 表示扫描全部的). 这个少用.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;com.nano&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>includeFilters <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>useDefaultFilters <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>3: @ComponentScan.FilterType</strong></p> <p>可以通过 FilterType 定制包扫描类的类型.</p> <ul><li>注解形式的 FilterType.ANNOTATION(如: @Controller @Service @Repository @Compent).</li> <li>指定类型的 FilterType.ASSIGNABLE_TYPE(如: @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = {TulingService.class})).</li> <li>自定义的 FilterType.CUSTOM.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">FilterType</span> <span class="token punctuation">{</span>
	<span class="token comment">// 注解形式 比如@Controller @Service @Repository @Compent </span>
    <span class="token constant">ANNOTATION</span><span class="token punctuation">,</span>
	<span class="token comment">// 指定的类型 </span>
    <span class="token constant">ASSIGNABLE_TYPE</span><span class="token punctuation">,</span>
	<span class="token comment">// aspectJ形式 </span>
    <span class="token constant">ASPECTJ</span><span class="token punctuation">,</span>
	<span class="token comment">// 正则表达式</span>
    <span class="token constant">REGEX</span><span class="token punctuation">,</span>
	<span class="token comment">// 自定义的 </span>
    <span class="token constant">CUSTOM</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>FilterType.CUSTOM 自定义类型使用实例.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoFilterType</span> <span class="token keyword">implements</span> <span class="token class-name">TypeFilter</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">match</span><span class="token punctuation">(</span><span class="token class-name">MetadataReader</span> metadataReader<span class="token punctuation">,</span> <span class="token class-name">MetadataReaderFactory</span> metadataReaderFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		<span class="token comment">// 获取当前类的注解源信息</span>
		<span class="token class-name">AnnotationMetadata</span> annotationMetadata <span class="token operator">=</span> metadataReader<span class="token punctuation">.</span><span class="token function">getAnnotationMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 获取当前类的class的源信息</span>
		<span class="token class-name">ClassMetadata</span> classMetadata <span class="token operator">=</span> metadataReader<span class="token punctuation">.</span><span class="token function">getClassMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token class-name">Resource</span> resource <span class="token operator">=</span> metadataReader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>classMetadata<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;dao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;com.nano&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>includeFilters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token class-name">NanoFilterType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> useDefaultFilters <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="bean加载与装配"><a href="#bean加载与装配" class="header-anchor">#</a> Bean加载与装配</h4> <h5 id="_1-常用bean加载方式"><a href="#_1-常用bean加载方式" class="header-anchor">#</a> 1.常用Bean加载方式</h5> <p>有不同的方式将 bean 加载到容器中.</p> <h6 id="_1-常用注解"><a href="#_1-常用注解" class="header-anchor">#</a> (1)常用注解</h6> <p>通过 <strong>@ComponentScan + (@Controller/@Service/@Respository/@Component)</strong> 添加组件. 适用场景: <strong>自己写的业务组件</strong>可以通过该方式来进行加载到容器中. 一般使用 <strong>@Autowired</strong> 注解自动装配 bean.</p> <ul><li>@<strong>Component</strong>: 通用注解, 可标注<strong>任意类</strong>为 Spring 组件. 如果一个 Bean <strong>不知道</strong>属于哪个层, 可以使用此注解标注.</li> <li>@<strong>Repository</strong>: 对应<strong>持久层</strong>即 Dao 层, 主要用于数据库相关操作.</li> <li>@<strong>Service</strong>: 对应<strong>服务层</strong>, 主要涉及一些复杂的逻辑, 需要用到 Dao 层.</li> <li>@<strong>Controller</strong>: 对应 MVC <strong>控制层</strong>, 用于接受用户请求并调用 Service 层返回数据给前端页面.</li></ul> <h6 id="_2-bean注解"><a href="#_2-bean注解" class="header-anchor">#</a> (2)@Bean注解</h6> <p><strong>@Bean</strong> 注解适用于导入<strong>第三方组件</strong>的类.</p> <blockquote><p><strong>@Component和@Bean的区别</strong></p></blockquote> <ul><li>作用对象不同: @Component 注解作用于<strong>类</strong>, 而 @Bean 注解作用于<strong>方法</strong>.</li> <li>@Component 通常配合 @ComponentScan 注解将需要装配的类注入到容器中. @Bean 注解通常用于将<strong>第三方 bean</strong> 注入到容器中.</li></ul> <h6 id="_3-import注解"><a href="#_3-import注解" class="header-anchor">#</a> (3)@Import注解</h6> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>@Import 注解可以导入实现了 <strong>ImportSelector 接口和 ImportBeanDefinitionRegistrar 接口</strong>的 bean.</p> <p>通过 @Import 与 <strong>ImportSeletor 接口</strong>实现组件导入, 注意: 导入组件的 id 为<strong>全类名路径</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 可以获取导入类的注解信息</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;com.nano.entity.Book&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> 
<span class="token comment">// 配置类中注入 bean. </span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">BookImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>通过 @Import 与 <strong>ImportBeanDefinitionRegister 接口</strong>导入组件(可以指定 bean 的名称).</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoBeanDefinitionRegister</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegister</span> <span class="token punctuation">{</span> 
    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// 创建一个bean定义对象</span>
		<span class="token class-name">RootBeanDefinition</span> rootBeanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RootBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">Pencil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 把bean定义对象导入到容器中</span>
		registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> rootBeanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token comment">//@Import(value = {Person.class, Car.class})</span>
<span class="token comment">//@Import(value = {Person.class, Car.class, BookImportSelector.class})</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">BookImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">NanoBeanDefinitionRegister</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这种方式在<strong>自动装配</strong>中用的多, 这在 Spring 源码中应用很多, 比如 AOP 中通过这种方式往容器导入了相关组件.</p> <h6 id="_4-facotrybean接口"><a href="#_4-facotrybean接口" class="header-anchor">#</a> (4)FacotryBean接口</h6> <p>可以通过实现 <strong>FacotryBean 接口</strong>来实现<strong>比较复杂</strong>组件的导入与注册. 常规 Bean 都是 Spring <strong>使用 Class 的反射</strong>获取具体<strong>实例</strong>, 如果 Bean 的获取过程<strong>比较复杂</strong>, 那么配置类中需要配置<strong>大量属性值</strong>, 这时候可以<strong>实现 FactoryBean 接口</strong>, 在其 <strong>getObject() 方法中初始化这个 bean</strong>. 比如装配 MyBatis 中的 <strong>SqlSessionFactoryBean</strong> 或者<strong>数据库连接</strong>对象就可以用这个.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Car</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token comment">// 返回bean的对象</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	<span class="token comment">// 返回bean的类型</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	<span class="token comment">// 是否为单例</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>使用场景: 整合<strong>第三方的复杂初始化对象</strong>. 典型的是 <strong>SqlSessionFactoryBean</strong> 组件.</p> <h5 id="_2-懒加载-lazy"><a href="#_2-懒加载-lazy" class="header-anchor">#</a> 2.懒加载@Lazy</h5> <p>懒加载主要针对 <strong>singleton</strong> 的 bean, 容器启动时不创建对象, 在<strong>第一次使用的时候才会创建该对象.</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Lazy</span>
<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_3-条件装配-conditional"><a href="#_3-条件装配-conditional" class="header-anchor">#</a> 3.条件装配@Conditional</h5> <h6 id="_1-conditional注解"><a href="#_1-conditional注解" class="header-anchor">#</a> (1)@Conditional注解</h6> <p>@Conditional 注解用于条件装配 Bean, 需要<strong>配合 Condition 接口</strong>使用. <strong>满足一定条件才装配 Bean 否则不装配</strong>, 比如数据库<strong>配置信息不全</strong>就不装配.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.nano.*&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:spring-other.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
	
	<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;dataSource&quot;</span><span class="token punctuation">,</span> destroyMethod <span class="token operator">=</span> <span class="token string">&quot;close&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 这里配置的类需实现Condition接口</span>
	<span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">DatabaseConditional</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>      
	<span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span>            
        	<span class="token comment">// 使用@Value去取配置文件中的值并注入</span>
			<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${database.driverName}&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> driver<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${database.url}&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> url<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${database.username}&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> 
			<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${database.password}&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password
		<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
		props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
		props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			dataSource <span class="token operator">=</span> <span class="token class-name">BasicDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>上述的 <strong>@Conditional(DatabaseConditional.class)</strong> 传入了 DatabaseConditional 类, 传入 @Conditional 注解的<strong>类需要实现 Condition 接口</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Condition</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ConditionContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">Environment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotatedTypeMetadata</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DatabaseConditional</span> <span class="token keyword">implements</span> <span class="token class-name">Condition</span> <span class="token punctuation">{</span>

    <span class="token comment">/** 数据库装配条件 不符合条件的就不装配 */</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Environment</span> env <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 此处是判断条件</span>
		<span class="token keyword">return</span> env<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token string">&quot;database.driverName&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> env<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token string">&quot;database.url&quot;</span><span class="token punctuation">)</span> 
				<span class="token operator">&amp;&amp;</span> env<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token string">&quot;database.username&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> env<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token string">&quot;database.password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>只有满足了<strong>上述自定义的条件</strong>, 才会<strong>装配</strong> DataSource 这个 bean.</p> <h6 id="_2-conditional派生注解"><a href="#_2-conditional派生注解" class="header-anchor">#</a> (2)@Conditional派生注解</h6> <p>作用: 当满足指定的<strong>条件时, 才往容器中装配该组件</strong>.</p> <table><thead><tr><th style="text-align:center;">@Conditional扩展注解</th> <th style="text-align:center;">作用(判断是否满足当前指定条件)</th></tr></thead> <tbody><tr><td style="text-align:center;">@ConditionalOnJava</td> <td style="text-align:center;">Java 版本是否符合要求</td></tr> <tr><td style="text-align:center;">@<strong>ConditionalOnBean</strong></td> <td style="text-align:center;">容器中<strong>存在</strong>指定 Bean</td></tr> <tr><td style="text-align:center;"><strong>@ConditionalOnMissingBean</strong></td> <td style="text-align:center;">容器中<strong>不存在</strong>指定 Bean</td></tr> <tr><td style="text-align:center;">@ConditionalOnExpression</td> <td style="text-align:center;">满足 SpEL 表达式指定</td></tr> <tr><td style="text-align:center;"><strong>@ConditionalOnClass</strong></td> <td style="text-align:center;">系统中有<strong>指定的类</strong></td></tr> <tr><td style="text-align:center;">@ConditionalOnMissingClass</td> <td style="text-align:center;">系统中没有指定的类</td></tr> <tr><td style="text-align:center;">@ConditionalOnSingleCandidate</td> <td style="text-align:center;">容器中只有一个指定的 Bean, 或这个 Bean 是首选 Bean</td></tr> <tr><td style="text-align:center;">@ConditionalOnProperty</td> <td style="text-align:center;">当 Environment 里存在 <strong>PropertySource</strong>, 存在对应的值不为 false 的属性值时进行加载</td></tr> <tr><td style="text-align:center;">@ConditionalOnResource</td> <td style="text-align:center;">只有存在指定的资源文件时才生效, 默认情况下是 classpath, 也可以指定其绝对路径</td></tr> <tr><td style="text-align:center;">@ConditionalOnWebApplication</td> <td style="text-align:center;">当前的 ApplicationContext 是 WebApplicationContext 时才生效</td></tr> <tr><td style="text-align:center;">@ConditionalOnNotWebApplication</td> <td style="text-align:center;">当前的 ApplicationContext 不是 WebApplicationContext 时才生效</td></tr> <tr><td style="text-align:center;">@ConditionalOnJndi</td> <td style="text-align:center;">JNDI 存在指定项</td></tr></tbody></table> <p>解释:</p> <ul><li><strong>@ConditionalOnClass/@ConditionalOnMissingClass</strong>: 当前 classpath 有对应指定的类型才去创建 Bean. 底层通过 ClassLoader 或者 Class.forName 来加载类.</li> <li><strong>@ConditionalOnBean/@ConditionalOnMissingBean</strong>: 只有当 BeanFactory 里(不)包含指定的 Bean 时, 才加载对应的 bean. 注意: 官网建议在 AutoConfiguration 里使用此注解, 因为 @ConditionalOnClass 受到 bean 装配顺序影响, 很有可能不能达到预期效果.</li></ul> <h5 id="_4-profile"><a href="#_4-profile" class="header-anchor">#</a> <a href="mailto:4.@Profile">4.@Profile</a></h5> <p>通过 @Profile 注解可以根据环境来激活标识不同的 Bean.</p> <p>@Profile 标识在类上, 那么只有当前环境匹配, 整个配置类才会生效. @Profile 标识在 Bean 上 , 那么只有当前环境的 Bean 才会被激活. 没有标志为 @Profile 的 bean 不管在什么环境都可以被激活.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:ds.properties&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainConfig</span> <span class="token keyword">implements</span> <span class="token class-name">EmbeddedValueResolverAware</span> <span class="token punctuation">{</span>
    
	<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ds.username}&quot;</span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ds.password}&quot;</span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> jdbcUrl<span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token class-name">String</span> classDriver<span class="token punctuation">;</span>
    
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmbeddedValueResolver</span><span class="token punctuation">(</span><span class="token class-name">StringValueResolver</span> resolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>jdbcUrl <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">resolveStringValue</span><span class="token punctuation">(</span><span class="token string">&quot;${ds.jdbcUrl}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>classDriver <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">resolveStringValue</span><span class="token punctuation">(</span><span class="token string">&quot;${ds.classDriver}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	
    <span class="token comment">// 标识为测试环境才会被装配 @Bean</span>
	<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">testDs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">buliderDataSource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
   
	<span class="token comment">// 标识生产环境才会被激活 @Bean</span>
	<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;prod&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">prodDs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">buliderDataSource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
	<span class="token keyword">private</span> <span class="token class-name">DataSource</span> <span class="token function">buliderDataSource</span><span class="token punctuation">(</span><span class="token class-name">DruidDataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
		dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span>classDriver<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>jdbcUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> dataSource<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>激活切换环境的方法:</p> <p>方法一:通过运行时 JVM 参数切换: <strong>-Dspring.profiles.active=test|dev|prod</strong></p> <p>方法二:通过代码方式切换.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">AnnotationConfigApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		
    ctx<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setActiveProfiles</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dev&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">MainConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    ctx<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">printBeanName</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="配置文件与属性设置"><a href="#配置文件与属性设置" class="header-anchor">#</a> 配置文件与属性设置</h4> <h5 id="_1-配置文件"><a href="#_1-配置文件" class="header-anchor">#</a> 1.配置文件</h5> <p>配置文件可以修改 Spring Boot 自动配置的<strong>默认值</strong>. Spring Boot 使用<strong>全局配置文件</strong>, 配置文件名是固定的:</p> <ul><li><strong>application.properties</strong></li> <li><strong>application.yml</strong></li></ul> <h6 id="_1-yaml语法"><a href="#_1-yaml语法" class="header-anchor">#</a> (1)YAML语法</h6> <p><strong>k:(空格)v</strong>: 表示<strong>一对键值对</strong>(空格必须有). 以<strong>空格</strong>的缩进来控制层级关系; 只要是左对齐的一列数据, 都是同一个层级的. 属性和值也是大小写敏感.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> /hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>对象, Map 写法:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">friends</span><span class="token punctuation">:</span>
  <span class="token key atrule">lastName</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>数组(List, Set)写法: 用 <strong>- 值表示数组中的一个元素</strong>.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">pets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> cat
  <span class="token punctuation">-</span> dog
  <span class="token punctuation">-</span> pig
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_2-配置信息读取"><a href="#_2-配置信息读取" class="header-anchor">#</a> 2.配置信息读取</h5> <h6 id="_1-value注解"><a href="#_1-value注解" class="header-anchor">#</a> (1)@Value注解</h6> <p>使用 <strong>@Value 注解</strong>可以为 <strong>bean 注入属性</strong>, @Value 内可以直接设置属性值, 也可以使用 Spring 表达式, 或引用配置文件中的属性值.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token comment">// 普通方式</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
    <span class="token comment">// SPEL表达式赋值</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{28-8}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token comment">// 通过读取配置文件的值</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${person.lastName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h6 id="_2-configurationproperties注解"><a href="#_2-configurationproperties注解" class="header-anchor">#</a> (2)@ConfigurationProperties注解</h6> <p>使用 @ConfigurationProperties 注解可以将<strong>配置信息与指定的 bean 属性进行绑定</strong>, 从而将配置文件中的对应属性映射到一个组件类中. <strong>prefix 属性</strong>可以指定配置文件中的配置值. 配置文件为 <strong>application.yml</strong>.</p> <p>配置信息如下:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">lastName</span><span class="token punctuation">:</span> Lucy
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">boss</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">birth</span><span class="token punctuation">:</span> 2017/12/12
  <span class="token key atrule">maps</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">k1</span><span class="token punctuation">:</span> v1<span class="token punctuation">,</span><span class="token key atrule">k2</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">}</span>
  <span class="token key atrule">friends</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Jack
    <span class="token punctuation">-</span> Lily
  <span class="token key atrule">dog</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> 小狗
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">12</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>映射的类如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token comment">// 这里前缀与配置文件中的前缀对应</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> boss<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> friends<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Dog</span> pet<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h6 id="_3-propertysource注解加载自定义配置文件"><a href="#_3-propertysource注解加载自定义配置文件" class="header-anchor">#</a> (3)@PropertySource注解加载自定义配置文件</h6> <p><strong>@PropertySource</strong> 注解可以加载<strong>自定义配置文件</strong>中的配置信息. <strong>@PropertySource</strong> 注解需要在<strong>配置类</strong>中标注, value 值可以有多个. ignoreResourceNotFound 指示找不到配置文件就忽略.</p> <p>比如将 person 相关的信息配置在 <strong>person.properties</strong> 文件中, 通过 @PropertySource 注解加载配置信息的方式如下.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:person.properties&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> boss<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="_4-importresource注解"><a href="#_4-importresource注解" class="header-anchor">#</a> (4)@ImportResource注解</h6> <p>@<strong>ImportResource</strong> 注解可以导入 Spring 的配置文件, 让配置文件里面的内容生效; 因为 Spring Boot 里面没有 Spring 的配置文件, 自己编写的配置文件也不能自动识别, 想让 Spring 的配置文件生效并加载进来就需要把 @<strong>ImportResource</strong> 标注在一个<strong>配置类</strong>上.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:beans.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>	<span class="token comment">// 导入Spring的配置文件让其生效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_3-配置文件加载顺序"><a href="#_3-配置文件加载顺序" class="header-anchor">#</a> 3.配置文件加载顺序</h5> <p>Spring Boot 启动会扫描以下位置的 application.properties 或者 application.yml 文件作为<strong>默认配置文件</strong>.</p> <ul><li>file:./config/</li> <li>file:./</li> <li>classpath:/config/</li> <li>classpath:/</li></ul> <p>优先级<strong>由高到底</strong>, 高优先级的配置会覆盖低优先级的配置.</p> <p>还可以通过 spring.config.location 来改变默认的配置文件位置. 项目打包好以后, 可以使用<strong>命令行参数的形式</strong>, 启动项目的时候来<strong>指定配置文件的新位置</strong>; 指定配置文件和默认加载的这些配置文件共同起作用形成互补配置.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>java <span class="token operator">-</span>jar <span class="token class-name">NanoApplication</span><span class="token punctuation">.</span>jar <span class="token operator">--</span>spring<span class="token punctuation">.</span>config<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>app<span class="token operator">/</span>nano<span class="token operator">/</span>application<span class="token punctuation">.</span>properties
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="依赖注入-di"><a href="#依赖注入-di" class="header-anchor">#</a> 依赖注入(DI)</h4> <p>依赖注入就是把底层类作为参数传入上层类, 实现上层类对下层类的控制. 在依赖注入模式下, 创建被依赖对象工作不再由调用方完成而由 Spring 容器完成, 然后注入给调用方. 依赖注入不能单独存在, 需要在 IOC 基础上完成操作. 说白了就是<strong>创建对象时, 向类里的属性设置值</strong>.</p> <p>一般而言, 依赖注入有几种方式.</p> <ul><li><strong>构造器</strong>注入.</li> <li><strong>setter</strong> 注入.</li> <li><strong>注解</strong>注入(@Autowired)</li> <li>接口注入.</li></ul> <p><strong>构造器注入和 setter 注入和注解注入</strong>是主要的方式, 而接口注入是从别的地方注入的方式.</p> <h5 id="_1-构造器注入"><a href="#_1-构造器注入" class="header-anchor">#</a> 1.构造器注入</h5> <p>构造器注入<strong>依赖于构造方法</strong>实现, 构造方法可以是<strong>有参数或无参数</strong>的. 普通类通过构造方法来创建类对象, Spring 可以采用<strong>反射的方式</strong>通过使用构造方法来完成注入, 这就是构造器注入的原理.</p> <p><strong>构造器注入无法解决循环依赖问题</strong>!</p> <h5 id="_2-setter注入"><a href="#_2-setter注入" class="header-anchor">#</a> 2.setter注入</h5> <p>setter 注入即通过对应的 <strong>setter 方法</strong>进行属性注入, 它消除了使用构造器注入时出现<strong>多个参数的可能性</strong>. 首先可以把构造方法声明为<strong>无参数</strong>的, 然后使用 setter 注入为其设置对应的值, 其实也是通过<strong>反射现实</strong>的.</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.nano.pojo.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>工程师<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Jack<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
&lt;/bean
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Spring 会通过<strong>反射调用无参构造方法生成对象</strong>, 再反射调用对应的 setter 方法注入配置的值. 这种方式是基于 xml 配置时 Spring 最为主要的注入方式.</p> <h5 id="_3-接口注入"><a href="#_3-接口注入" class="header-anchor">#</a> 3.接口注入</h5> <p>有些时候资源<strong>并非来自于自身系统</strong>, 而是来自于<strong>外界</strong>, 这个时候可以采用<strong>接口注入</strong>的形式来获取它. 比如在 Web 工程中, 配置的数据源往往是通过服务器(比如 Tomcat)去配置的, 这个时候可以用 <strong>JNDI</strong> 的形式通过接口将它注入 Spring IoC 容器中来.</p> <h5 id="_4-autowired与-resource注入"><a href="#_4-autowired与-resource注入" class="header-anchor">#</a> 4.@Autowired与@Resource注入</h5> <h6 id="_1-autowired注解"><a href="#_1-autowired注解" class="header-anchor">#</a> (1)@Autowired注解</h6> <p>@Autowired 注解首先根据类型去<strong>寻找对应的 bean</strong>, 找不到再根据<strong>属性名称和 beanName ​</strong>来寻找 bean. 默认必须找到对应 Bean, 否则报错(可以使用 required = false 关闭必须装配).</p> <p>@Autowired 可以标注在<strong>属性, 方法, 入参</strong>上.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>	<span class="token comment">// 标注属性</span>
<span class="token keyword">private</span> <span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Autowired</span> <span class="token comment">// 标注方法</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAnimal</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>animal <span class="token operator">=</span> animal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 标注入参</span>
<span class="token keyword">public</span> <span class="token class-name">BussinessPerson</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>animal <span class="token operator">=</span> animal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="_2-primary与-qualifier注解"><a href="#_2-primary与-qualifier注解" class="header-anchor">#</a> (2)@Primary与@Qualifier注解</h6> <p>当一个接口有<strong>多个实现类</strong>, 使用场景需要进行区分的时候, <strong>使用 @Primary 与 @Qualifier ​</strong>​<strong><strong>可以指定</strong></strong>​<strong>注入的 bean 的实现类型</strong>以消除歧义. 如下接口:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面是两个实现类:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;狗【&quot;</span> <span class="token operator">+</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;】是看门用的. &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;猫【&quot;</span> <span class="token operator">+</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;】是抓老鼠. &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这里 Dog 类和 Cat 类都实现了 Animal 接口.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自动注入实现了动物接口的类</span>
    <span class="token annotation punctuation">@Autowired</span>	
    <span class="token keyword">private</span> <span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>animal<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAnimal</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>animal <span class="token operator">=</span> animal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Student 的自动注入会报错, 因为<strong>不知道注入哪一个</strong>实例. 产生注入失败是因为<strong>按类型查找</strong>, 动物 Animal 接口有<strong>多个类型</strong>, 这就存在歧义.</p> <p><strong>注解 @Primary</strong> 可以修改<strong>优先权</strong>. 比如在 Cat 类上使用此注解.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Primary</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此时容器会<strong>优先</strong>注入 Cat 实例到作为 Animal 的实现进行注入.</p> <p>如果 @Primary 用在多个类上也会有歧义, 可以使用 <strong>@Qualifier 注解</strong>. @Qualifier 注解可以配置指定的 <strong>beanName</strong>, 它可以与 @Autowired 一起去通过<strong>类型与 beanName ​</strong>一起寻找 bean. 如下注入的就是 Dog 类的实例.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span>	<span class="token comment">// 指定beanName</span>
<span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="_3-resourse注解"><a href="#_3-resourse注解" class="header-anchor">#</a> (3)@Resourse注解</h6> <p>@Resource 可以用于 bean 的注入.</p> <p><strong>@Autowired</strong> 为 Spring 提供的注解, 只按照 <strong>type 注入</strong>.</p> <p><strong>@Resource</strong> 由 J2EE 提供, 其定义为 javax.annotation.Resource. @Resource 既可以按照 <strong>name</strong> 也可以按照 <strong>type</strong> 进行注入, 不配置时默认按照 name 进行注入.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServiceImpl</span> <span class="token punctuation">{</span>
    <span class="token comment">// 下面两种@Resource只要使用一种即可</span>
    @<span class="token function">Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;userDao&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> UserDao userDao<span class="token punctuation">;</span> <span class="token comment">// 用于字段上</span>
    
    @<span class="token function">Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;userDao&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token parameter">UserDao userDao</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用于属性的setter方法上</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>@Resource 装配顺序:</strong></p> <ol><li>如果<strong>同时指定了 name 和 type</strong>, 则从 Spring 上下文中找到唯一匹配的 bean 进行装配, 找不到则抛出异常.</li> <li>如果指定了 <strong>name</strong>, 则从上下文中查找名称(id)匹配的 bean 进行装配, 找不到则抛出异常.</li> <li>如果指定了 <strong>type</strong>, 则从上下文中找到类似匹配的唯一 bean 进行装配, 找不到或是找到多个, 都会抛出异常.</li> <li>如果既没有指定 name, 又没有指定 type, 则默认按 name 进行装配.</li></ol> <h4 id="bean的生命周期与拓展"><a href="#bean的生命周期与拓展" class="header-anchor">#</a> Bean的生命周期与拓展</h4> <p><strong>单实例</strong> bean 在容器启动的时候就创建了, 而且容器销毁的时候, 也会调用 bean 的销毁方法.</p> <p><strong>多实例</strong> bean 在容器启动的时候不会被创建的而是在获取 bean 的时候被创建, 且 bean 的销毁不受 IOC 容器的管理. 多例通过 GC 进行处理回收.</p> <h5 id="_1-生命周期"><a href="#_1-生命周期" class="header-anchor">#</a> 1.生命周期</h5> <h6 id="_1-生命周期基本流程"><a href="#_1-生命周期基本流程" class="header-anchor">#</a> (1)生命周期基本流程</h6> <p>主要流程如下.</p> <p>[单例 Spring bean 的生命周期] 面试回答, 这 10 个步骤可以作为面试模板:</p> <ol><li><strong>实例化</strong>一个 Bean, 完成对象创建;</li> <li>按照 Spring 上下文对实例化的 Bean 进行配置, 也就是 <strong>IOC 注入</strong>;</li> <li>如果这个 Bean 实现了 <strong>BeanNameAware 接口</strong>, 会调用它实现的 <strong>setBeanName</strong>(String beanId) 方法, 此处传递的是 Spring 配置文件中 Bean 的 ID;</li> <li>如果这个 Bean 实现了 <strong>BeanFactoryAware 接口</strong>, 会调用它实现的 <strong>setBeanFactory</strong>(), 传递的是 Spring <strong>工厂本身</strong>(可以用这个方法获取到其他 Bean);</li> <li>如果这个 Bean 实现了 <strong>ApplicationContextAware接口</strong>, 会调用 <strong>setApplicationContext</strong>(ApplicationContext)方法, 传入 <strong>Spring 上下文</strong>, 该方式同样可以实现步骤 4, 但<strong>比 4 更好</strong>, 因为 ApplicationContext 是 BeanFactory 的子接口, 实现了更多<strong>方法</strong>;</li> <li>如果这个 Bean 实现了 <strong>BeanPostProcessor 接口</strong>, 将会调用 <strong>postProcessBeforeInitialization</strong>(Object obj,  String s)方法, BeanPostProcessor 经常被<strong>用作是 Bean 内容的更改</strong>, 并且由于这个是在 Bean 初始化<strong>结束时</strong>调用 After 方法, 也可用于<strong>内存或缓存技术</strong>;</li> <li>如果这个 Bean 配置了 <strong>init-method 方法</strong>, 则调用该初始化方法;</li> <li>如果这个 Bean 实现了 <strong>BeanPostProcessor 接口</strong>, 将会调用 <strong>postAfterInitialization</strong>(Object obj, String s) 方法;</li></ol> <p>注意: 以上工作完成以后就可以<strong>使用这个 Bean 了</strong>, 这是一个 singleton 的 bean, 所以一般情况下调用同一个 ID 获取的 Bean 会是在内容<strong>地址相同</strong>的实例.</p> <ol start="9"><li>当 Bean <strong>不再需要</strong>时, 会经过清理阶段, 如果 Bean 实现了 <strong>DisposableBean 接口</strong>, 会调用其实现的 <strong>destroy() 方法</strong>.</li> <li>最后, 如果这个 Bean 配置了 <strong>destroy-method 方法</strong>, 则调用该<strong>销毁方法</strong>.</li></ol> <p>Bean 的完整生命周期经历了各种<strong>方法调用</strong>, 这些方法可以划分为以下几类:</p> <ul><li><strong>Bean 自身的方法</strong>: 包含 Bean 本身调用的方法和通过配置文件或注解配置的 <strong>init-method</strong> 和 <strong>destroy-method</strong> 所对应的的<strong>初始化及销毁</strong>方法.</li> <li><strong>Bean 级生命周期接口方法</strong>: 包含 BeanNameAware, BeanFactoryAware, InitializingBean 和 DiposableBean 等接口的方法.</li> <li><strong>容器级生命周期接口方法</strong>: 包含 <strong>InstantiationAwareBeanPostProcessor</strong> 和 <strong>BeanPostProcessor</strong> 这两个接口的方法, 一般称它们的实现类为“<strong>后处理器</strong>”.</li> <li><strong>工厂后处理器接口方法</strong>: 包含 AspectJWeavingEnabler, ConfigurationClassPostProcessor, CustomAutowireConfigurer 等非常有用的<strong>工厂后处理器接口</strong>的方法. 工厂后处理器也是<strong>容器级</strong>的. 在应用上下文装配配置文件之后立即调用.</li></ul> <h6 id="_2-不同scope的生命周期"><a href="#_2-不同scope的生命周期" class="header-anchor">#</a> (2)不同Scope的生命周期</h6> <p><strong>singleton bean</strong></p> <p>Spring 容器可以完整管理 <strong>singleton</strong> 作用域下 bean 的创建, 初始化, 销毁的完整生命周期. 整个详细流程参考上面.</p> <p><strong>prototype bean</strong></p> <p>对于 prototype 作用域的 bean, <strong>Spring 只负责创建实例</strong>, 当容器创建 bean 的实例(包含初始化, 配置, 装配等工作)后, 会将其交给使用方, 之后 Spring 容器就不再跟踪其生命周期.</p> <p>prototype 对象在第一次时, Spring 容器都会调用其<strong>构造器创建这个对象</strong>, 然后调用 <strong>init-method</strong> 属性值中所指定的初始化方法. 而对象销毁的时候, Spring 容器<strong>不会</strong>帮调用任何方法(<strong>不会调用 destroy 方法</strong>). 清除 prototype bean 并释放任何其持有的资源, 都是<strong>使用方代码的职责</strong>. 对于prototype 作用域 bean, 可以将 Spring 容器的角色看作<strong>普通 new 操作</strong>的替代者, 任何迟于该时间点的生命周期事宜都得交由使用方来处理. 让 Spring 容器释放被 prototype 作用域 bean 占用资源的一种可行方式是, 通过使用 bean 的后置处理器, 该处理器持有要被清除的 bean 的引用.</p> <h5 id="_2-初始化与销毁方法"><a href="#_2-初始化与销毁方法" class="header-anchor">#</a> 2.初始化与销毁方法</h5> <h6 id="_1-注解配置"><a href="#_1-注解配置" class="header-anchor">#</a> (1)注解配置</h6> <p>由容器管理 Bean 的生命周期, 通过指定 bean 的初始化方法和 bean 的销毁方法.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定bean的生命周期的初始化方法和销毁方法.</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">,</span> destroyMethod <span class="token operator">=</span> <span class="token string">&quot;destroy&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">car</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="_2-initializingbean与disposablebean接口"><a href="#_2-initializingbean与disposablebean接口" class="header-anchor">#</a> (2)InitializingBean与DisposableBean接口</h6> <p>可以通过 <strong>InitializingBean 和 DisposableBean</strong> 两个接口实现 bean 的初始化及销毁方法.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span><span class="token punctuation">,</span> <span class="token class-name">DisposableBean</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Person的构造方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;DisposableBean的destroy()方法 &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;InitializingBean的 afterPropertiesSet方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h6 id="_3-postconstruct和-prodestory注解"><a href="#_3-postconstruct和-prodestory注解" class="header-anchor">#</a> (3)@PostConstruct和@ProDestory注解</h6> <p>通过 JSR250 规范提供的注解 <strong>@PostConstruct 和 @ProDestory</strong> 标注的方法实现 bean 的初始化及销毁方法.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;book 的构造方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@PostConstruct</span> 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;book 的PostConstruct标志的方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@PreDestroy</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;book 的PreDestory标注的方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="_3-xxxaware接口"><a href="#_3-xxxaware接口" class="header-anchor">#</a> 3.XXXAware接口</h5> <p>有些时候需要在 <strong>Bean 的初始化</strong>中使用 <strong>Spring 框架自身的一些对象</strong>来执行一些操作, 比如获取 ServletContext 的一些参数, 获取 ApplicaitionContext 中的 BeanDefinition 的名字, 获取 Bean 在容器中的名字等. **==为了让 Bean 可以获取到框架自身的一些对象, Spring 提供了一组名为 Aware 的接口==<em><em>​</em>.</em></p> <p>这些接口均继承于 org.springframework.beans.factory.<strong>Aware 标记接口</strong>, 并提供一个将由 <strong>Bean 实现的 set</strong>​*​ 方法**,  Spring 通过基于 <strong>setter 的依赖注入方式</strong>使相应的对象可以被 Bean 使用.</p> <p>介绍一些<strong>重要的 Aware 接口</strong>:</p> <ul><li><strong>ApplicationContextAware</strong>: 获得 <strong>ApplicationContext</strong> 对象, 可以用来获取<strong>所有 BeanDefinition</strong>.</li> <li><strong>BeanFactoryAware</strong>: 获得 <strong>BeanFactory</strong> 对象, 可以用来检测 Bean 的作用域.</li> <li><strong>BeanNameAware</strong>: 获得 Bean 在<strong>配置文件</strong>中定义的名字.</li> <li><strong>ResourceLoaderAware</strong>: 获得 ResourceLoader 对象, 可以获得 <strong>classpath</strong> 中某个文件.</li> <li><strong>ServletContextAware</strong>: 在一个 MVC 应用中可以获取 <strong>ServletContext</strong> 对象, 可以读取 context 中的参数.</li> <li><strong>ServletConfigAware</strong>: 在一个 MVC 应用中可以获取 <strong>ServletConfig</strong> 对象, 可以读取 config 中的参数.</li></ul> <p>一个实例.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GiraffeService</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span><span class="token punctuation">,</span>
<span class="token class-name">ApplicationEventPublisherAware</span><span class="token punctuation">,</span> <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span>
<span class="token class-name">BeanNameAware</span><span class="token punctuation">,</span> <span class="token class-name">EnvironmentAware</span><span class="token punctuation">,</span> <span class="token class-name">ImportAware</span><span class="token punctuation">,</span> <span class="token class-name">ResourceLoaderAware</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanClassLoader</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setBeanClassLoader,ClassLoader Name = &quot;</span> <span class="token operator">+</span> classLoader<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setBeanFactory,setBeanFactory:: giraffe bean singleton=&quot;</span> <span class="token operator">+</span>  beanFactory<span class="token punctuation">.</span><span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token string">&quot;giraffeService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanName</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setBeanName:: Bean Name defined in context=&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setApplicationContext:: Bean Definition Names=&quot;</span>
                           <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationEventPublisher</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEventPublisher</span> applicationEventPublisher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setApplicationEventPublisher&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEnvironment</span><span class="token punctuation">(</span><span class="token class-name">Environment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setEnvironment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setResourceLoader</span><span class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Resource</span> resource <span class="token operator">=</span> resourceLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring-beans.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setResourceLoader:: Resource File Name=&quot;</span>
                           <span class="token operator">+</span> resource<span class="token punctuation">.</span><span class="token function">getFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setImportMetadata</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行setImportMetadata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h5 id="_4-beanpostprocessor"><a href="#_4-beanpostprocessor" class="header-anchor">#</a> 4.BeanPostProcessor</h5> <p>上面<strong>的 Aware 接口是针对某个实现这些接口的 Bean 定制初始化的过程, Spring 同样可以针对容器中的所有 Bean, 或者某些 Bean 定制初始化过程,</strong> 只需<strong>提供一个实现 BeanPostProcessor 接口的类</strong>即可. 通过 BeanPostProcessor 接口的 bean 的后置处理器会拦截<strong>所有 bean 创建</strong>过程.</p> <p>该接口第一个方法接受的第一个参数是 bean 实例, 第二个参数是 bean 的名字, 重点在于方法的返回值将会作为<strong>新的 bean 实例</strong>以实现对原有 bean 的拓展, 所以这里不要随便返回个 null. 这就可以对一些<strong>想要修饰的 bean 实例做一些事情</strong>.</p> <p>该接口中包含两个方法 <strong>postProcessBeforeInitialization()</strong> 和 <strong>postProcessAfterInitialization()</strong>.</p> <ul><li><strong>postProcessBeforeInitialization()</strong> 在初始化 <strong>init() 初始化方法之前</strong>调用.</li> <li><strong>postProcessAfterInitialization()</strong> 在初始化 <strong>init() 初始化方法之后</strong>调用.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanPostProcessor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">default</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">default</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>例如:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NanoBeanPostProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">BeanPostProcessor</span><span class="token punctuation">,</span> <span class="token class-name">PriorityOrdered</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyBeanPostProcessor#postProcessBeforeInitialization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">LoginService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 自己的逻辑</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;NanoBeanPostProcessor类的postProcessAfterInitialization方法...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 自己的逻辑</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>BeanPostProcessor 的执行时机(伪代码):</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">populateBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> mbd<span class="token punctuation">,</span> instanceWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span> 
initializeBean <span class="token punctuation">{</span>
	<span class="token function">applyBeanPostProcessorsBeforeInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    invokeInitMethods <span class="token punctuation">{</span>
		isInitializingBean<span class="token punctuation">.</span>afterPropertiesSet<span class="token punctuation">;</span>
		自定义的<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法 
    <span class="token punctuation">}</span>
	<span class="token function">applyBeanPostProcessorsAfterInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>除了自己定义的 <strong>BeanPostProcessor</strong> 实现类外, Spring 容器也在启动时<strong>自动给加了几个</strong>实现类. 如在获取 BeanFactory 的 <strong>obtainFactory</strong>() 方法结束后的 <strong>prepareBeanFactory</strong>(factory), 仔细看会发现, Spring 往容器中添加了这<strong>两个 BeanPostProcessor: ApplicationContextAwareProcessor, ApplicationListenerDetector</strong>.</p> <h4 id="beanfactory与applicationcontext"><a href="#beanfactory与applicationcontext" class="header-anchor">#</a> BeanFactory与ApplicationContext</h4> <h5 id="_1-beanfactory"><a href="#_1-beanfactory" class="header-anchor">#</a> 1.BeanFactory</h5> <p>BeanFactory 是 Spring 里面<strong>最顶层</strong>的接口, 提供了最简单的<strong>容器</strong>的功能, 只提供了<strong>实例化对象和获取对象</strong>的功能. 它在启动的时候<strong>不会去实例化 Bean</strong>, 中有从容器中获取 Bean 的时候才会去实例化. <strong>BeanFactory</strong> 是负责<strong>生产和管理</strong> Bean 的一个<strong>工厂</strong>, 它的常用实现有 XmlBeanFactory, <strong>DefaultListableBeanFactory</strong>, <strong>ApplicationContext</strong> 等.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/1573545313232.png" alt=""></p> <h5 id="_2-applicationcontext"><a href="#_2-applicationcontext" class="header-anchor">#</a> 2.ApplicationContext</h5> <p>ApplicationContext 是 BeanFactory 的<strong>实现类</strong>, 除了提供 BeanFactory 所支持的<strong>所有功能</strong>外, ApplicationContext 还有额外的功能:</p> <ul><li><strong>默认初始化所有</strong>的 Singleton 实例, 也可以通过配置取消预初始化.</li> <li>继承 MessageSource, 因此支持<strong>国际化</strong>.</li> <li><strong>资源访问</strong>, 比如访问 URL 和文件(ResourceLoader);</li> <li>同时加载<strong>多个配置文件</strong>.</li> <li>消息发送, 响应机制(ApplicationEventPublisher);</li> <li>以<strong>声明式</strong>方式创建并启动 Spring 容器.</li></ul> <p>由于 ApplicationContext 会<strong>预先初始化所有的 Singleton Bean</strong>, 因此在系统创建时会有较大的<strong>系统开销</strong>, 但一旦 ApplicationContext 初始化完成, 程序后面获取 Singleton Bean 实例时候将有较好的性能. 设置了 <strong>lazy-init 属性</strong>的 bean 则会延迟初始化.</p> <p>ApplicationContext 的几个实现类:</p> <ul><li><strong>ClassPathXmlApplication</strong>: 把上下文文件当成类路径资源.</li> <li><strong>FileSystemXmlApplication</strong>: 从文件系统中的 XML 文件载入上下文定义信息.</li> <li><strong>XmlWebApplicationContext</strong>: 从 Web 系统中的 XML 文件载入上下文定义信息.</li></ul> <p>BeanFacotry 与 ApplicationContext 的<strong>本质区别</strong>: 使用 BeanFacotry 的 bean 是<strong>延迟加载</strong>的, ApplicationContext 是<strong>非延迟加载</strong>的.</p> <h5 id="_3-延迟实例化与非延迟实例化"><a href="#_3-延迟实例化与非延迟实例化" class="header-anchor">#</a> 3.延迟实例化与非延迟实例化</h5> <p><strong>BeanFactory</strong> 延迟实例化的<strong>优点</strong>: 应用启动的时候占用资源很少, 对资源要求较高的应用, 比较有优势.</p> <p><strong>缺点</strong>: 速度会相对来说慢一些, 且有可能会出现空指针异常的错误.</p> <p><strong>ApplicationContext</strong> 不延迟实例化的<strong>优点</strong>:</p> <ul><li>所有的 Bean 在启动的时候都加载, 系统运行的速度快; 且能在系统启动的时候, 尽早发现系统中的配置问题.</li> <li>可以用于 web 场景, 在启动的时候就把所有的 Bean 都加载了.</li></ul> <p><strong>缺点</strong>: 把费时的操作放到系统启动中完成, 所有的对象都可以<strong>预加载</strong>, 缺点就是消耗服务器的内存.</p> <h4 id="spring消息与事件"><a href="#spring消息与事件" class="header-anchor">#</a> Spring消息与事件</h4> <h5 id="_1-事件驱动模型"><a href="#_1-事件驱动模型" class="header-anchor">#</a> 1.事件驱动模型</h5> <p>事件驱动模型中对应观察者模式的<strong>几种角色</strong>如下.</p> <blockquote><p>事件角色</p></blockquote> <p><strong>ApplicationEvent</strong> 充当<strong>事件的角色</strong>, 这是一个抽象类, 它继承了 java.util.EventObject 并实现了 Serializable 接口.</p> <p>Spring 默认实现了 ContextStartedEvent, ContextStoppedEvent, ContextRefreshedEvent, ContextClosedEvent 等事件, 它们都继承了 ApplicationContextEvent.</p> <p><img src="https://nano-note.oss-cn-beijing.aliyuncs.com/images/ApplicationEvent-Subclass.png" alt="ApplicationEvent-Subclass"></p> <blockquote><p>事件监听者角色</p></blockquote> <p><strong>ApplicationListener</strong> 充当事件监听者角色, 它是一个接口, 只定义了一个 <strong>onApplicationEvent()</strong> 方法来处理ApplicationEvent. <strong>实现 ApplicationListener 接口的 onApplicationEvent() 方法即可实现事件监听</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationEvent</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">EventListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">E</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>事件发布者角色</p></blockquote> <p><strong>ApplicationEventPublisher</strong> 充当<strong>事件发布者</strong>角色, 它也是一个<strong>接口</strong>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationEventPublisher</span> <span class="token punctuation">{</span>
    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token class-name">Object</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ApplicationEventPublisher 接口的 <strong>publishEvent()</strong> 方法在 <strong>AbstractApplicationContext</strong> 类中被实现, 事件真正是通过 <strong>ApplicationEventMulticaster</strong> 来广播出去的.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoPublisher</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 发布事件</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当调用 DemoPublisher 的 <strong>publish()</strong> 方法时, 如 demoPublisher.publish(&quot;你好&quot;), 控制台会打印: 接收到的信息是: 你好.</p> <h4 id="spring设计模式总结"><a href="#spring设计模式总结" class="header-anchor">#</a> Spring设计模式总结</h4> <p>Spring 中用到了哪些设计模式?</p> <ul><li><strong>工厂模式</strong>: Spring 使用工厂模式通过 <strong>BeanFactory, ApplicationContext 创建 bean 对象</strong>.</li> <li><strong>代理模式</strong>: Spring <strong>AOP 功能</strong>的实现.</li> <li><strong>单例模式</strong>: Spring 中的 Bean 默认都是<strong>单例</strong>的.</li> <li><strong>模板方法模式</strong>: Spring 中 jdbcTemplate, hibernateTemplate 等对数据库操作的类使用到了模板模式.</li> <li><strong>包装器模式</strong>: 当项目需要连接多个数据库, 而且不同的客户在每次访问中根据需要会去访问不同的数据库. 包装器模式让可以根据客户的需求能够动态切换不同的数据源.</li> <li><strong>观察者模式</strong>: <strong>Spring 事件驱动模型</strong>是经典的观察者模式.</li> <li><strong>适配器模式</strong>: <strong>Spring AOP</strong> 的<strong>增强或通知</strong>(Advice)使用到了适配器模式, <strong>Spring MVC</strong> 中也是用到了<strong>适配器模式适配 Controller</strong>.</li> <li><strong>DI(Dependecy Inject, 依赖注入): 是实现控制反转的一种设计模式, 依赖注入就是将实例变量传入到一个对象中去.</strong></li></ul> <h5 id="_1-工厂方法模式"><a href="#_1-工厂方法模式" class="header-anchor">#</a> 1.工厂方法模式</h5> <p>Spring 容器就是实例化和管理 Bean 的<strong>工厂</strong>. <strong>工厂模式</strong>隐藏了创建类的细节, 返回值必定是<strong>接口或者抽象类</strong>, 而不是具体的某个对象, 工厂类根据条件生成不同的<strong>子类实例</strong>. 当得到子类的<strong>实例</strong>后, 就可以调用基类中的方法, 不必考虑返回的是哪一个子类的实例.</p> <p>工厂方法模式在各种 <strong>BeanFactory 以及 ApplicationContext</strong> 创建中都用到了. Spring 使用工厂模式可以通过 BeanFactory 或 ApplicationContext <strong>创建 bean 对象</strong>.</p> <h5 id="_2-单例模式"><a href="#_2-单例模式" class="header-anchor">#</a> 2.单例模式</h5> <p>系统中有一些对象其实只需要一个, 比如线程池, 缓存, 注册表, 日志对象, 充当打印机, 显卡等设备驱动程序的对象. 事实上, 这一类对象<strong>只能有一个实例</strong>, 多个实例反而可能会导致一些问题, 比如程序行为异常, 资源使用过量, 或者不一致性的结果.</p> <p><strong>使用单例模式的好处:</strong></p> <ul><li>对于频繁使用的对象, 可以<strong>省略创建对象所花费</strong>的时间, 特别是对重量级对象而言.</li> <li>生成对象操作的次数减少, 内存的使用频率也会降低, 这将减轻 GC 压力, 缩短 GC 停顿时间.</li></ul> <p>单例模式体现: <strong>Spring 默认将所有的 Bean 设置成单例模式, 这样就可以大大降低创建对象和销毁时的系统开销</strong>.</p> <p><strong>Spring 通过 ConcurrentHashMap 实现单例注册表的特殊方式实现单例模式</strong>. singletonObjects 中缓存的是全部实例化完成的单例对象.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 通过ConcurrentHashMap(线程安全)实现单例注册表</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_3-代理模式"><a href="#_3-代理模式" class="header-anchor">#</a> 3.代理模式</h5> <p>体现: <strong>Spring AOP 就是基于动态代理实现的</strong>. 代理模式的一个很好的例子是 <strong>ProxyFactoryBean</strong>. 该工厂根据 Spring bean 构建 AOP 代理. 该类实现了定义 getObject() 方法的 <strong>FactoryBean 接口</strong>. 此方法用于将需求 Bean 的实例返回给 beanFactory. 在这种情况下, 它不是返回的实例而是 AOP 代理.</p> <h5 id="_4-模板方法模式"><a href="#_4-模板方法模式" class="header-anchor">#</a> 4.模板方法模式</h5> <p><strong>模板方法模式</strong>是一种行为设计模式, 它定义一个操作中的算法的骨架, 而将一些步骤延迟到子类中.  模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤的实现方式.</p> <p>体现: Spring 中 <strong>jdbcTemplate, redisTemplate, hibernateTemplate</strong> 等<strong>以 Template 结尾的对数据库操作的类</strong>就使用到了模板模式. 一般情况下, 都是使用<strong>继承</strong>的方式来实现模板模式, 但是 Spring 并没有使用这种方式, 而是<strong>使用 Callback 方式与模板方法模式配合</strong>, 既达到了代码复用的效果, 同时也增加了灵活性.</p> <h5 id="_5-观察者模式"><a href="#_5-观察者模式" class="header-anchor">#</a> 5.观察者模式</h5> <p>观察者模式是一种对象行为型模式. 它表示的是一种对象与对象之间具有依赖关系, 当一个对象发生改变的时候, 这个对象所依赖的对象也会做出反应.</p> <p>体现: <strong>Spring 事件驱动模型就是观察者模式很经典的一个应用</strong>. Spring 事件驱动模型非常有用, 在很多场景都可以解耦代码. <strong>Spring 中观察者模式常用的地方是 listener 的实现, 如 ApplicationListener</strong>.</p> <h5 id="_6-适配器模式"><a href="#_6-适配器模式" class="header-anchor">#</a> 6.适配器模式</h5> <p><strong>适配器模式</strong>将一个<strong>接口</strong>转换成客户希望的<strong>另一个接口</strong>, 适配器模式使接口<strong>不兼容</strong>的类可以一起工作, 其别名为<strong>包装器</strong>(Wrapper).</p> <blockquote><p>Spring AOP中的适配器模式</p></blockquote> <p>Spring AOP 的<strong>实现是基于代理模式</strong>, 但是 AOP 的<strong>增强/通知</strong>(Advice)使用到了<strong>适配器模式</strong>, 与之相关的接口是 <strong>AdvisorAdapter</strong>. Advice 常用的类型有: BeforeAdvice, AfterAdvice, AfterReturningAdvice 等等. 每个类型 Advice 都有<strong>对应的拦截器</strong>: MethodBeforeAdviceInterceptor, AfterReturningAdviceAdapter, AfterReturningAdviceInterceptor. Spring 预定义的通知要通过<strong>对应的适配器</strong>, 适配成 <strong>MethodInterceptor</strong> 接口(方法拦截器)类型的对象, 如 MethodBeforeAdviceInterceptor 负责适配 MethodBeforeAdvice.</p> <blockquote><p>Spring MVC中的适配器模式</p></blockquote> <p>在 Spring MVC 中, <strong>DispatcherServlet</strong> 根据请求信息调用 <strong>HandlerMapping</strong>, 解析请求对应的 <strong>Handler</strong>. 解析到对应的 Handler (也就是平常的 Controller 控制器) 后, 开始由 <strong>HandlerAdapter</strong> 适配器处理. <strong>HandlerAdapter 作为期望接口, 具体的适配器实现类用于对目标类进行适配, Controller 作为需要适配的类.</strong></p> <p><strong>为什么要在 Spring MVC 中使用适配器模式? Spring MVC 中的 ​</strong>​<strong><strong>Controller 种类众多</strong></strong>​**, 不同类型的 Controller 通过不同的方法来对请求进行处理. 如果不利用适配器模式的话, ​<strong>​<strong><strong>DispatcherServlet</strong></strong>​</strong>​ 直接获取对应类型的 Controller, 需要的**自行判断, 像下面这段代码一样:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">MultiActionController</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MultiActionController</span><span class="token punctuation">)</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xxx  
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">XXX</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>增加一个 Controller 类型就要在上面代码中再加入一行判断语句, 这种形式就使得程序难以维护, 也违反了设计模式中的开闭原则, 即对扩展开放, 对修改关闭.</p> <h5 id="_7-装饰者模式"><a href="#_7-装饰者模式" class="header-anchor">#</a> 7.装饰者模式</h5> <p><strong>装饰者模式</strong>可以<strong>动态</strong>地给对象添加一些<strong>额外的属性或行为</strong>. 相比于使用继承, 装饰者模式更加灵活. 当<strong>需要修改原有</strong>的功能, 但又<strong>不愿直接去修改原有的代码</strong>时, 可以设计一个 Decorator <strong>套在原有代码外面</strong>.</p> <p>Spring 中配置 <strong>DataSource</strong> 的时候, DataSource <strong>可能是不同的数据库和数据源</strong>, 用装饰者模式就可以根据客户的需求在少修改原有类的代码下动态切换不同的数据源. Spring 中用到的包装器模式在类名上含有 <strong>Wrapper 或者 Decorator</strong>. 这些类基本上都是动态地给一个对象添加一些额外的职责.</p> <p>‍</p> <p>‍</p> <h4 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h4> <ul><li>《Spring技术内幕》</li> <li><a href="https://www.cnblogs.com/ooo0/p/10962360.html" target="_blank" rel="noopener noreferrer">Spring 依赖注入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/zrtqsk/p/3735273.html" target="_blank" rel="noopener noreferrer">Spring Bean的生命周期<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/fuzhongmin05/article/details/73389779" target="_blank" rel="noopener noreferrer">Spring中bean的作用域与生命周期<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485689&amp;idx=1&amp;sn=061b32c2222869932be5631fb0bb5260&amp;chksm=cea24732f9d5ce24a356fb3675170e7843addbfcc79ee267cfdb45c83fc7e90babf0f20d22e1&amp;token=292197051&amp;lang=zh_CN#rd" target="_blank" rel="noopener noreferrer">一文搞懂如何在 Spring Boot 正确中使用 JPA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.tutorialsteacher.com/ioc/inversion-of-control" target="_blank" rel="noopener noreferrer">https://www.tutorialsteacher.com/ioc/inversion-of-control<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://design-patterns.readthedocs.io/zh_CN/latest/behavioral_patterns/observer.html" target="_blank" rel="noopener noreferrer">https://design-patterns.readthedocs.io/zh_CN/latest/behavioral_patterns/observer.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5a8eb261f265da4e9e307230" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5a8eb261f265da4e9e307230<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5ba28986f265da0abc2b6084" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5ba28986f265da0abc2b6084<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/main/docs/20.开发/2100.Spring/2.Spring(Boot)基础.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ed8d11/" class="prev">Web基础</a></span> <span class="next"><a href="/pages/ecd8b6/">Spring Boot应用整合</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/f90282/"><div>
            基础
            <!----></div></a> <span class="date">06-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/0f75ac/"><div>
            搜索二叉树BST
            <!----></div></a> <span class="date">06-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/39721f/"><div>
            平衡二叉树AVL
            <!----></div></a> <span class="date">06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1174520425@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/nanodaemony" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>达尔文的猹 | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.5bc2c979.js" defer></script><script src="/assets/js/2.eccd4273.js" defer></script><script src="/assets/js/156.3e91e0f4.js" defer></script>
  </body>
</html>
